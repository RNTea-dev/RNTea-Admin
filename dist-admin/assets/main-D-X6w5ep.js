(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function DE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ed={exports:{}},$a={},Id={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg;function VE(){if(pg)return Me;pg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.iterator;function P(T){return T===null||typeof T!="object"?null:(T=C&&T[C]||T["@@iterator"],typeof T=="function"?T:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,Y={};function W(T,j,ee){this.props=T,this.context=j,this.refs=Y,this.updater=ee||$}W.prototype.isReactComponent={},W.prototype.setState=function(T,j){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,j,"setState")},W.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function me(){}me.prototype=W.prototype;function de(T,j,ee){this.props=T,this.context=j,this.refs=Y,this.updater=ee||$}var se=de.prototype=new me;se.constructor=de,q(se,W.prototype),se.isPureReactComponent=!0;var Se=Array.isArray,qe=Object.prototype.hasOwnProperty,Ee={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function I(T,j,ee){var ie,ye={},X=null,le=null;if(j!=null)for(ie in j.ref!==void 0&&(le=j.ref),j.key!==void 0&&(X=""+j.key),j)qe.call(j,ie)&&!O.hasOwnProperty(ie)&&(ye[ie]=j[ie]);var fe=arguments.length-2;if(fe===1)ye.children=ee;else if(1<fe){for(var ue=Array(fe),Oe=0;Oe<fe;Oe++)ue[Oe]=arguments[Oe+2];ye.children=ue}if(T&&T.defaultProps)for(ie in fe=T.defaultProps,fe)ye[ie]===void 0&&(ye[ie]=fe[ie]);return{$$typeof:r,type:T,key:X,ref:le,props:ye,_owner:Ee.current}}function k(T,j){return{$$typeof:r,type:T.type,key:j,ref:T.ref,props:T.props,_owner:T._owner}}function x(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function L(T){var j={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ee){return j[ee]})}var M=/\/+/g;function R(T,j){return typeof T=="object"&&T!==null&&T.key!=null?L(""+T.key):j.toString(36)}function Ve(T,j,ee,ie,ye){var X=typeof T;(X==="undefined"||X==="boolean")&&(T=null);var le=!1;if(T===null)le=!0;else switch(X){case"string":case"number":le=!0;break;case"object":switch(T.$$typeof){case r:case e:le=!0}}if(le)return le=T,ye=ye(le),T=ie===""?"."+R(le,0):ie,Se(ye)?(ee="",T!=null&&(ee=T.replace(M,"$&/")+"/"),Ve(ye,j,ee,"",function(Oe){return Oe})):ye!=null&&(x(ye)&&(ye=k(ye,ee+(!ye.key||le&&le.key===ye.key?"":(""+ye.key).replace(M,"$&/")+"/")+T)),j.push(ye)),1;if(le=0,ie=ie===""?".":ie+":",Se(T))for(var fe=0;fe<T.length;fe++){X=T[fe];var ue=ie+R(X,fe);le+=Ve(X,j,ee,ue,ye)}else if(ue=P(T),typeof ue=="function")for(T=ue.call(T),fe=0;!(X=T.next()).done;)X=X.value,ue=ie+R(X,fe++),le+=Ve(X,j,ee,ue,ye);else if(X==="object")throw j=String(T),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return le}function rt(T,j,ee){if(T==null)return T;var ie=[],ye=0;return Ve(T,ie,"","",function(X){return j.call(ee,X,ye++)}),ie}function ut(T){if(T._status===-1){var j=T._result;j=j(),j.then(function(ee){(T._status===0||T._status===-1)&&(T._status=1,T._result=ee)},function(ee){(T._status===0||T._status===-1)&&(T._status=2,T._result=ee)}),T._status===-1&&(T._status=0,T._result=j)}if(T._status===1)return T._result.default;throw T._result}var be={current:null},ne={transition:null},ve={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:ne,ReactCurrentOwner:Ee};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:rt,forEach:function(T,j,ee){rt(T,function(){j.apply(this,arguments)},ee)},count:function(T){var j=0;return rt(T,function(){j++}),j},toArray:function(T){return rt(T,function(j){return j})||[]},only:function(T){if(!x(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Me.Component=W,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=de,Me.StrictMode=s,Me.Suspense=g,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,Me.act=oe,Me.cloneElement=function(T,j,ee){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var ie=q({},T.props),ye=T.key,X=T.ref,le=T._owner;if(j!=null){if(j.ref!==void 0&&(X=j.ref,le=Ee.current),j.key!==void 0&&(ye=""+j.key),T.type&&T.type.defaultProps)var fe=T.type.defaultProps;for(ue in j)qe.call(j,ue)&&!O.hasOwnProperty(ue)&&(ie[ue]=j[ue]===void 0&&fe!==void 0?fe[ue]:j[ue])}var ue=arguments.length-2;if(ue===1)ie.children=ee;else if(1<ue){fe=Array(ue);for(var Oe=0;Oe<ue;Oe++)fe[Oe]=arguments[Oe+2];ie.children=fe}return{$$typeof:r,type:T.type,key:ye,ref:X,props:ie,_owner:le}},Me.createContext=function(T){return T={$$typeof:h,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:l,_context:T},T.Consumer=T},Me.createElement=I,Me.createFactory=function(T){var j=I.bind(null,T);return j.type=T,j},Me.createRef=function(){return{current:null}},Me.forwardRef=function(T){return{$$typeof:m,render:T}},Me.isValidElement=x,Me.lazy=function(T){return{$$typeof:E,_payload:{_status:-1,_result:T},_init:ut}},Me.memo=function(T,j){return{$$typeof:_,type:T,compare:j===void 0?null:j}},Me.startTransition=function(T){var j=ne.transition;ne.transition={};try{T()}finally{ne.transition=j}},Me.unstable_act=oe,Me.useCallback=function(T,j){return be.current.useCallback(T,j)},Me.useContext=function(T){return be.current.useContext(T)},Me.useDebugValue=function(){},Me.useDeferredValue=function(T){return be.current.useDeferredValue(T)},Me.useEffect=function(T,j){return be.current.useEffect(T,j)},Me.useId=function(){return be.current.useId()},Me.useImperativeHandle=function(T,j,ee){return be.current.useImperativeHandle(T,j,ee)},Me.useInsertionEffect=function(T,j){return be.current.useInsertionEffect(T,j)},Me.useLayoutEffect=function(T,j){return be.current.useLayoutEffect(T,j)},Me.useMemo=function(T,j){return be.current.useMemo(T,j)},Me.useReducer=function(T,j,ee){return be.current.useReducer(T,j,ee)},Me.useRef=function(T){return be.current.useRef(T)},Me.useState=function(T){return be.current.useState(T)},Me.useSyncExternalStore=function(T,j,ee){return be.current.useSyncExternalStore(T,j,ee)},Me.useTransition=function(){return be.current.useTransition()},Me.version="18.3.1",Me}var mg;function cf(){return mg||(mg=1,Id.exports=VE()),Id.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg;function OE(){if(gg)return $a;gg=1;var r=cf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,_){var E,C={},P=null,$=null;_!==void 0&&(P=""+_),g.key!==void 0&&(P=""+g.key),g.ref!==void 0&&($=g.ref);for(E in g)s.call(g,E)&&!l.hasOwnProperty(E)&&(C[E]=g[E]);if(m&&m.defaultProps)for(E in g=m.defaultProps,g)C[E]===void 0&&(C[E]=g[E]);return{$$typeof:e,type:m,key:P,ref:$,props:C,_owner:o.current}}return $a.Fragment=t,$a.jsx=h,$a.jsxs=h,$a}var yg;function LE(){return yg||(yg=1,Ed.exports=OE()),Ed.exports}var A=LE(),Ie=cf();const ME=DE(Ie);var zu={},Td={exports:{}},un={},Sd={exports:{}},Ad={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g;function bE(){return _g||(_g=1,function(r){function e(ne,ve){var oe=ne.length;ne.push(ve);e:for(;0<oe;){var T=oe-1>>>1,j=ne[T];if(0<o(j,ve))ne[T]=ve,ne[oe]=j,oe=T;else break e}}function t(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var ve=ne[0],oe=ne.pop();if(oe!==ve){ne[0]=oe;e:for(var T=0,j=ne.length,ee=j>>>1;T<ee;){var ie=2*(T+1)-1,ye=ne[ie],X=ie+1,le=ne[X];if(0>o(ye,oe))X<j&&0>o(le,ye)?(ne[T]=le,ne[X]=oe,T=X):(ne[T]=ye,ne[ie]=oe,T=ie);else if(X<j&&0>o(le,oe))ne[T]=le,ne[X]=oe,T=X;else break e}}return ve}function o(ne,ve){var oe=ne.sortIndex-ve.sortIndex;return oe!==0?oe:ne.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var g=[],_=[],E=1,C=null,P=3,$=!1,q=!1,Y=!1,W=typeof setTimeout=="function"?setTimeout:null,me=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function se(ne){for(var ve=t(_);ve!==null;){if(ve.callback===null)s(_);else if(ve.startTime<=ne)s(_),ve.sortIndex=ve.expirationTime,e(g,ve);else break;ve=t(_)}}function Se(ne){if(Y=!1,se(ne),!q)if(t(g)!==null)q=!0,ut(qe);else{var ve=t(_);ve!==null&&be(Se,ve.startTime-ne)}}function qe(ne,ve){q=!1,Y&&(Y=!1,me(I),I=-1),$=!0;var oe=P;try{for(se(ve),C=t(g);C!==null&&(!(C.expirationTime>ve)||ne&&!L());){var T=C.callback;if(typeof T=="function"){C.callback=null,P=C.priorityLevel;var j=T(C.expirationTime<=ve);ve=r.unstable_now(),typeof j=="function"?C.callback=j:C===t(g)&&s(g),se(ve)}else s(g);C=t(g)}if(C!==null)var ee=!0;else{var ie=t(_);ie!==null&&be(Se,ie.startTime-ve),ee=!1}return ee}finally{C=null,P=oe,$=!1}}var Ee=!1,O=null,I=-1,k=5,x=-1;function L(){return!(r.unstable_now()-x<k)}function M(){if(O!==null){var ne=r.unstable_now();x=ne;var ve=!0;try{ve=O(!0,ne)}finally{ve?R():(Ee=!1,O=null)}}else Ee=!1}var R;if(typeof de=="function")R=function(){de(M)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,rt=Ve.port2;Ve.port1.onmessage=M,R=function(){rt.postMessage(null)}}else R=function(){W(M,0)};function ut(ne){O=ne,Ee||(Ee=!0,R())}function be(ne,ve){I=W(function(){ne(r.unstable_now())},ve)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){q||$||(q=!0,ut(qe))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return P},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(ne){switch(P){case 1:case 2:case 3:var ve=3;break;default:ve=P}var oe=P;P=ve;try{return ne()}finally{P=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,ve){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var oe=P;P=ne;try{return ve()}finally{P=oe}},r.unstable_scheduleCallback=function(ne,ve,oe){var T=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?T+oe:T):oe=T,ne){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=oe+j,ne={id:E++,callback:ve,priorityLevel:ne,startTime:oe,expirationTime:j,sortIndex:-1},oe>T?(ne.sortIndex=oe,e(_,ne),t(g)===null&&ne===t(_)&&(Y?(me(I),I=-1):Y=!0,be(Se,oe-T))):(ne.sortIndex=j,e(g,ne),q||$||(q=!0,ut(qe))),ne},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(ne){var ve=P;return function(){var oe=P;P=ve;try{return ne.apply(this,arguments)}finally{P=oe}}}}(Ad)),Ad}var vg;function FE(){return vg||(vg=1,Sd.exports=bE()),Sd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wg;function jE(){if(wg)return un;wg=1;var r=cf(),e=FE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},C={};function P(n){return g.call(C,n)?!0:g.call(E,n)?!1:_.test(n)?C[n]=!0:(E[n]=!0,!1)}function $(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,i,a,c){if(i===null||typeof i>"u"||$(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function Y(n,i,a,c,d,p,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=v}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){W[n]=new Y(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];W[i]=new Y(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){W[n]=new Y(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){W[n]=new Y(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){W[n]=new Y(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){W[n]=new Y(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){W[n]=new Y(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){W[n]=new Y(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){W[n]=new Y(n,5,!1,n.toLowerCase(),null,!1,!1)});var me=/[\-:]([a-z])/g;function de(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(me,de);W[i]=new Y(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(me,de);W[i]=new Y(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(me,de);W[i]=new Y(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){W[n]=new Y(n,1,!1,n.toLowerCase(),null,!1,!1)}),W.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){W[n]=new Y(n,1,!1,n.toLowerCase(),null,!0,!0)});function se(n,i,a,c){var d=W.hasOwnProperty(i)?W[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(q(i,a,d,c)&&(a=null),c||d===null?P(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var Se=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qe=Symbol.for("react.element"),Ee=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),L=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),ut=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ve(n){return n===null||typeof n!="object"?null:(n=ne&&n[ne]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,T;function j(n){if(T===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);T=i&&i[1]||""}return`
`+T+n}var ee=!1;function ie(n,i){if(!n||ee)return"";ee=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(z){var c=z}Reflect.construct(n,[],i)}else{try{i.call()}catch(z){c=z}n.call(i.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),p=c.stack.split(`
`),v=d.length-1,S=p.length-1;1<=v&&0<=S&&d[v]!==p[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==p[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==p[S]){var N=`
`+d[v].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=v&&0<=S);break}}}finally{ee=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?j(n):""}function ye(n){switch(n.tag){case 5:return j(n.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return n=ie(n.type,!1),n;case 11:return n=ie(n.type.render,!1),n;case 1:return n=ie(n.type,!0),n;default:return""}}function X(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case O:return"Fragment";case Ee:return"Portal";case k:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case Ve:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case L:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case M:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case rt:return i=n.displayName||null,i!==null?i:X(n.type)||"Memo";case ut:i=n._payload,n=n._init;try{return X(n(i))}catch{}}return null}function le(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ue(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Oe(n){var i=ue(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,p.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function zt(n){n._valueTracker||(n._valueTracker=Oe(n))}function Bn(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=ue(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function fn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function An(n,i){var a=i.checked;return oe({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ei(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=fe(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ki(n,i){i=i.checked,i!=null&&se(n,"checked",i,!1)}function Qi(n,i){Ki(n,i);var a=fe(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?D(n,i.type,a):i.hasOwnProperty("defaultValue")&&D(n,i.type,fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Yi(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function D(n,i,a){(i!=="number"||fn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Z=Array.isArray;function Ae(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+fe(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Qe(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ze(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Z(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:fe(a)}}function it(n,i){var a=fe(i.value),c=fe(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function pn(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Ye(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function et(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Ye(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var en,Zo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(en=en||document.createElement("div"),en.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=en.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function ti(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ji=["Webkit","ms","Moz","O"];Object.keys(Xi).forEach(function(n){Ji.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Xi[i]=Xi[n]})});function ea(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Xi.hasOwnProperty(n)&&Xi[n]?(""+i).trim():i+"px"}function ta(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=ea(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var na=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ra(n,i){if(i){if(na[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ia(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zi=null;function Us(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zs=null,Cn=null,lr=null;function Bs(n){if(n=Pa(n)){if(typeof zs!="function")throw Error(t(280));var i=n.stateNode;i&&(i=nu(i),zs(n.stateNode,n.type,i))}}function ur(n){Cn?lr?lr.push(n):lr=[n]:Cn=n}function sa(){if(Cn){var n=Cn,i=lr;if(lr=Cn=null,Bs(n),i)for(n=0;n<i.length;n++)Bs(i[n])}}function es(n,i){return n(i)}function oa(){}var Pr=!1;function aa(n,i,a){if(Pr)return n(i,a);Pr=!0;try{return es(n,i,a)}finally{Pr=!1,(Cn!==null||lr!==null)&&(oa(),sa())}}function pt(n,i){var a=n.stateNode;if(a===null)return null;var c=nu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var $s=!1;if(m)try{var $n={};Object.defineProperty($n,"passive",{get:function(){$s=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{$s=!1}function ts(n,i,a,c,d,p,v,S,N){var z=Array.prototype.slice.call(arguments,3);try{i.apply(a,z)}catch(Q){this.onError(Q)}}var ns=!1,Hs=null,Hn=!1,la=null,Qc={onError:function(n){ns=!0,Hs=n}};function qs(n,i,a,c,d,p,v,S,N){ns=!1,Hs=null,ts.apply(Qc,arguments)}function Rl(n,i,a,c,d,p,v,S,N){if(qs.apply(this,arguments),ns){if(ns){var z=Hs;ns=!1,Hs=null}else throw Error(t(198));Hn||(Hn=!0,la=z)}}function qn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function rs(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Wn(n){if(qn(n)!==n)throw Error(t(188))}function Pl(n){var i=n.alternate;if(!i){if(i=qn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Wn(d),n;if(p===c)return Wn(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var v=!1,S=d.child;S;){if(S===a){v=!0,a=d,c=p;break}if(S===c){v=!0,c=d,a=p;break}S=S.sibling}if(!v){for(S=p.child;S;){if(S===a){v=!0,a=p,c=d;break}if(S===c){v=!0,c=p,a=d;break}S=S.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function ua(n){return n=Pl(n),n!==null?Ws(n):null}function Ws(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Ws(n);if(i!==null)return i;n=n.sibling}return null}var Gs=e.unstable_scheduleCallback,ca=e.unstable_cancelCallback,kl=e.unstable_shouldYield,Yc=e.unstable_requestPaint,tt=e.unstable_now,Nl=e.unstable_getCurrentPriorityLevel,is=e.unstable_ImmediatePriority,ni=e.unstable_UserBlockingPriority,Rn=e.unstable_NormalPriority,ha=e.unstable_LowPriority,xl=e.unstable_IdlePriority,ss=null,mn=null;function Dl(n){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(ss,n,void 0,(n.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:Ol,da=Math.log,Vl=Math.LN2;function Ol(n){return n>>>=0,n===0?32:31-(da(n)/Vl|0)|0}var Ks=64,Qs=4194304;function ri(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function os(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,v=a&268435455;if(v!==0){var S=v&~d;S!==0?c=ri(S):(p&=v,p!==0&&(c=ri(p)))}else v=a&~d,v!==0?c=ri(v):p!==0&&(c=ri(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Yt(i),d=1<<a,c|=n[a],i&=~d;return c}function Xc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kr(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var v=31-Yt(p),S=1<<v,N=d[v];N===-1?((S&a)===0||(S&c)!==0)&&(d[v]=Xc(S,i)):N<=i&&(n.expiredLanes|=S),p&=~S}}function gn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function as(){var n=Ks;return Ks<<=1,(Ks&4194240)===0&&(Ks=64),n}function ii(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function si(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Yt(i),n[i]=a}function Xe(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Yt(a),p=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function oi(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Yt(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Ue=0;function ai(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ll,Ys,Ml,bl,Fl,fa=!1,cr=[],Dt=null,Gn=null,Kn=null,li=new Map,Pn=new Map,hr=[],Jc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jl(n,i){switch(n){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":li.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(i.pointerId)}}function tn(n,i,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},i!==null&&(i=Pa(i),i!==null&&Ys(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Zc(n,i,a,c,d){switch(i){case"focusin":return Dt=tn(Dt,n,i,a,c,d),!0;case"dragenter":return Gn=tn(Gn,n,i,a,c,d),!0;case"mouseover":return Kn=tn(Kn,n,i,a,c,d),!0;case"pointerover":var p=d.pointerId;return li.set(p,tn(li.get(p)||null,n,i,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Pn.set(p,tn(Pn.get(p)||null,n,i,a,c,d)),!0}return!1}function Ul(n){var i=ds(n.target);if(i!==null){var a=qn(i);if(a!==null){if(i=a.tag,i===13){if(i=rs(a),i!==null){n.blockedOn=i,Fl(n.priority,function(){Ml(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Nr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Xs(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Zi=c,a.target.dispatchEvent(c),Zi=null}else return i=Pa(a),i!==null&&Ys(i),n.blockedOn=a,!1;i.shift()}return!0}function ls(n,i,a){Nr(n)&&a.delete(i)}function zl(){fa=!1,Dt!==null&&Nr(Dt)&&(Dt=null),Gn!==null&&Nr(Gn)&&(Gn=null),Kn!==null&&Nr(Kn)&&(Kn=null),li.forEach(ls),Pn.forEach(ls)}function Qn(n,i){n.blockedOn===i&&(n.blockedOn=null,fa||(fa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zl)))}function Yn(n){function i(d){return Qn(d,n)}if(0<cr.length){Qn(cr[0],n);for(var a=1;a<cr.length;a++){var c=cr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Dt!==null&&Qn(Dt,n),Gn!==null&&Qn(Gn,n),Kn!==null&&Qn(Kn,n),li.forEach(i),Pn.forEach(i),a=0;a<hr.length;a++)c=hr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<hr.length&&(a=hr[0],a.blockedOn===null);)Ul(a),a.blockedOn===null&&hr.shift()}var xr=Se.ReactCurrentBatchConfig,ui=!0;function at(n,i,a,c){var d=Ue,p=xr.transition;xr.transition=null;try{Ue=1,pa(n,i,a,c)}finally{Ue=d,xr.transition=p}}function eh(n,i,a,c){var d=Ue,p=xr.transition;xr.transition=null;try{Ue=4,pa(n,i,a,c)}finally{Ue=d,xr.transition=p}}function pa(n,i,a,c){if(ui){var d=Xs(n,i,a,c);if(d===null)hh(n,i,c,us,a),jl(n,c);else if(Zc(d,n,i,a,c))c.stopPropagation();else if(jl(n,c),i&4&&-1<Jc.indexOf(n)){for(;d!==null;){var p=Pa(d);if(p!==null&&Ll(p),p=Xs(n,i,a,c),p===null&&hh(n,i,c,us,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else hh(n,i,c,null,a)}}var us=null;function Xs(n,i,a,c){if(us=null,n=Us(c),n=ds(n),n!==null)if(i=qn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=rs(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return us=n,null}function ma(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nl()){case is:return 1;case ni:return 4;case Rn:case ha:return 16;case xl:return 536870912;default:return 16}default:return 16}}var yn=null,Js=null,nn=null;function ga(){if(nn)return nn;var n,i=Js,a=i.length,c,d="value"in yn?yn.value:yn.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var v=a-n;for(c=1;c<=v&&i[a-c]===d[p-c];c++);return nn=d.slice(n,1<c?1-c:void 0)}function Zs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function dr(){return!0}function ya(){return!1}function Vt(n){function i(a,c,d,p,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?dr:ya,this.isPropagationStopped=ya,this}return oe(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),i}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=Vt(Xn),fr=oe({},Xn,{view:0,detail:0}),th=Vt(fr),to,Dr,ci,cs=oe({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ci&&(ci&&n.type==="mousemove"?(to=n.screenX-ci.screenX,Dr=n.screenY-ci.screenY):Dr=to=0,ci=n),to)},movementY:function(n){return"movementY"in n?n.movementY:Dr}}),no=Vt(cs),_a=oe({},cs,{dataTransfer:0}),Bl=Vt(_a),ro=oe({},fr,{relatedTarget:0}),io=Vt(ro),$l=oe({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Vr=Vt($l),Hl=oe({},Xn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ql=Vt(Hl),Wl=oe({},Xn,{data:0}),va=Vt(Wl),so={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Gl[n])?!!i[n]:!1}function pr(){return Kl}var u=oe({},fr,{key:function(n){if(n.key){var i=so[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Zs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Xt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(n){return n.type==="keypress"?Zs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),f=Vt(u),y=oe({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=Vt(y),b=oe({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr}),B=Vt(b),re=oe({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ke=Vt(re),Tt=oe({},cs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Vt(Tt),Rt=[9,13,27,32],_t=m&&"CompositionEvent"in window,kn=null;m&&"documentMode"in document&&(kn=document.documentMode);var _n=m&&"TextEvent"in window&&!kn,hs=m&&(!_t||kn&&8<kn&&11>=kn),oo=" ",lp=!1;function up(n,i){switch(n){case"keyup":return Rt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ao=!1;function kw(n,i){switch(n){case"compositionend":return cp(i);case"keypress":return i.which!==32?null:(lp=!0,oo);case"textInput":return n=i.data,n===oo&&lp?null:n;default:return null}}function Nw(n,i){if(ao)return n==="compositionend"||!_t&&up(n,i)?(n=ga(),nn=Js=yn=null,ao=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return hs&&i.locale!=="ko"?null:i.data;default:return null}}var xw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!xw[n.type]:i==="textarea"}function dp(n,i,a,c){ur(c),i=Zl(i,"onChange"),0<i.length&&(a=new eo("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var wa=null,Ea=null;function Dw(n){Np(n,0)}function Ql(n){var i=fo(n);if(Bn(i))return n}function Vw(n,i){if(n==="change")return i}var fp=!1;if(m){var nh;if(m){var rh="oninput"in document;if(!rh){var pp=document.createElement("div");pp.setAttribute("oninput","return;"),rh=typeof pp.oninput=="function"}nh=rh}else nh=!1;fp=nh&&(!document.documentMode||9<document.documentMode)}function mp(){wa&&(wa.detachEvent("onpropertychange",gp),Ea=wa=null)}function gp(n){if(n.propertyName==="value"&&Ql(Ea)){var i=[];dp(i,Ea,n,Us(n)),aa(Dw,i)}}function Ow(n,i,a){n==="focusin"?(mp(),wa=i,Ea=a,wa.attachEvent("onpropertychange",gp)):n==="focusout"&&mp()}function Lw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ql(Ea)}function Mw(n,i){if(n==="click")return Ql(i)}function bw(n,i){if(n==="input"||n==="change")return Ql(i)}function Fw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Jn=typeof Object.is=="function"?Object.is:Fw;function Ia(n,i){if(Jn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!Jn(n[d],i[d]))return!1}return!0}function yp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _p(n,i){var a=yp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=yp(a)}}function vp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?vp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function wp(){for(var n=window,i=fn();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=fn(n.document)}return i}function ih(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function jw(n){var i=wp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&vp(a.ownerDocument.documentElement,a)){if(c!==null&&ih(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=_p(a,p);var v=_p(a,c);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Uw=m&&"documentMode"in document&&11>=document.documentMode,lo=null,sh=null,Ta=null,oh=!1;function Ep(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;oh||lo==null||lo!==fn(c)||(c=lo,"selectionStart"in c&&ih(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ta&&Ia(Ta,c)||(Ta=c,c=Zl(sh,"onSelect"),0<c.length&&(i=new eo("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=lo)))}function Yl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var uo={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionend:Yl("Transition","TransitionEnd")},ah={},Ip={};m&&(Ip=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function Xl(n){if(ah[n])return ah[n];if(!uo[n])return n;var i=uo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ip)return ah[n]=i[a];return n}var Tp=Xl("animationend"),Sp=Xl("animationiteration"),Ap=Xl("animationstart"),Cp=Xl("transitionend"),Rp=new Map,Pp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(n,i){Rp.set(n,i),l(i,[n])}for(var lh=0;lh<Pp.length;lh++){var uh=Pp[lh],zw=uh.toLowerCase(),Bw=uh[0].toUpperCase()+uh.slice(1);hi(zw,"on"+Bw)}hi(Tp,"onAnimationEnd"),hi(Sp,"onAnimationIteration"),hi(Ap,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(Cp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$w=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function kp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,Rl(c,i,void 0,n),n.currentTarget=null}function Np(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var v=c.length-1;0<=v;v--){var S=c[v],N=S.instance,z=S.currentTarget;if(S=S.listener,N!==p&&d.isPropagationStopped())break e;kp(d,S,z),p=N}else for(v=0;v<c.length;v++){if(S=c[v],N=S.instance,z=S.currentTarget,S=S.listener,N!==p&&d.isPropagationStopped())break e;kp(d,S,z),p=N}}}if(Hn)throw n=la,Hn=!1,la=null,n}function st(n,i){var a=i[yh];a===void 0&&(a=i[yh]=new Set);var c=n+"__bubble";a.has(c)||(xp(i,n,2,!1),a.add(c))}function ch(n,i,a){var c=0;i&&(c|=4),xp(a,n,c,i)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Aa(n){if(!n[Jl]){n[Jl]=!0,s.forEach(function(a){a!=="selectionchange"&&($w.has(a)||ch(a,!1,n),ch(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Jl]||(i[Jl]=!0,ch("selectionchange",!1,i))}}function xp(n,i,a,c){switch(ma(i)){case 1:var d=at;break;case 4:d=eh;break;default:d=pa}a=d.bind(null,i,a,n),d=void 0,!$s||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function hh(n,i,a,c,d){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var N=v.tag;if((N===3||N===4)&&(N=v.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;v=v.return}for(;S!==null;){if(v=ds(S),v===null)return;if(N=v.tag,N===5||N===6){c=p=v;continue e}S=S.parentNode}}c=c.return}aa(function(){var z=p,Q=Us(a),J=[];e:{var K=Rp.get(n);if(K!==void 0){var ce=eo,ge=n;switch(n){case"keypress":if(Zs(a)===0)break e;case"keydown":case"keyup":ce=f;break;case"focusin":ge="focus",ce=io;break;case"focusout":ge="blur",ce=io;break;case"beforeblur":case"afterblur":ce=io;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=no;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Bl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=B;break;case Tp:case Sp:case Ap:ce=Vr;break;case Cp:ce=Ke;break;case"scroll":ce=th;break;case"wheel":ce=ze;break;case"copy":case"cut":case"paste":ce=ql;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=w}var _e=(i&4)!==0,mt=!_e&&n==="scroll",F=_e?K!==null?K+"Capture":null:K;_e=[];for(var V=z,U;V!==null;){U=V;var te=U.stateNode;if(U.tag===5&&te!==null&&(U=te,F!==null&&(te=pt(V,F),te!=null&&_e.push(Ca(V,te,U)))),mt)break;V=V.return}0<_e.length&&(K=new ce(K,ge,null,a,Q),J.push({event:K,listeners:_e}))}}if((i&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",K&&a!==Zi&&(ge=a.relatedTarget||a.fromElement)&&(ds(ge)||ge[Or]))break e;if((ce||K)&&(K=Q.window===Q?Q:(K=Q.ownerDocument)?K.defaultView||K.parentWindow:window,ce?(ge=a.relatedTarget||a.toElement,ce=z,ge=ge?ds(ge):null,ge!==null&&(mt=qn(ge),ge!==mt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(ce=null,ge=z),ce!==ge)){if(_e=no,te="onMouseLeave",F="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(_e=w,te="onPointerLeave",F="onPointerEnter",V="pointer"),mt=ce==null?K:fo(ce),U=ge==null?K:fo(ge),K=new _e(te,V+"leave",ce,a,Q),K.target=mt,K.relatedTarget=U,te=null,ds(Q)===z&&(_e=new _e(F,V+"enter",ge,a,Q),_e.target=U,_e.relatedTarget=mt,te=_e),mt=te,ce&&ge)t:{for(_e=ce,F=ge,V=0,U=_e;U;U=co(U))V++;for(U=0,te=F;te;te=co(te))U++;for(;0<V-U;)_e=co(_e),V--;for(;0<U-V;)F=co(F),U--;for(;V--;){if(_e===F||F!==null&&_e===F.alternate)break t;_e=co(_e),F=co(F)}_e=null}else _e=null;ce!==null&&Dp(J,K,ce,_e,!1),ge!==null&&mt!==null&&Dp(J,mt,ge,_e,!0)}}e:{if(K=z?fo(z):window,ce=K.nodeName&&K.nodeName.toLowerCase(),ce==="select"||ce==="input"&&K.type==="file")var we=Vw;else if(hp(K))if(fp)we=bw;else{we=Lw;var Ce=Ow}else(ce=K.nodeName)&&ce.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(we=Mw);if(we&&(we=we(n,z))){dp(J,we,a,Q);break e}Ce&&Ce(n,K,z),n==="focusout"&&(Ce=K._wrapperState)&&Ce.controlled&&K.type==="number"&&D(K,"number",K.value)}switch(Ce=z?fo(z):window,n){case"focusin":(hp(Ce)||Ce.contentEditable==="true")&&(lo=Ce,sh=z,Ta=null);break;case"focusout":Ta=sh=lo=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,Ep(J,a,Q);break;case"selectionchange":if(Uw)break;case"keydown":case"keyup":Ep(J,a,Q)}var Re;if(_t)e:{switch(n){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else ao?up(n,a)&&(Ne="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ne="onCompositionStart");Ne&&(hs&&a.locale!=="ko"&&(ao||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&ao&&(Re=ga()):(yn=Q,Js="value"in yn?yn.value:yn.textContent,ao=!0)),Ce=Zl(z,Ne),0<Ce.length&&(Ne=new va(Ne,n,null,a,Q),J.push({event:Ne,listeners:Ce}),Re?Ne.data=Re:(Re=cp(a),Re!==null&&(Ne.data=Re)))),(Re=_n?kw(n,a):Nw(n,a))&&(z=Zl(z,"onBeforeInput"),0<z.length&&(Q=new va("onBeforeInput","beforeinput",null,a,Q),J.push({event:Q,listeners:z}),Q.data=Re))}Np(J,i)})}function Ca(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Zl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=pt(n,a),p!=null&&c.unshift(Ca(n,p,d)),p=pt(n,i),p!=null&&c.push(Ca(n,p,d))),n=n.return}return c}function co(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Dp(n,i,a,c,d){for(var p=i._reactName,v=[];a!==null&&a!==c;){var S=a,N=S.alternate,z=S.stateNode;if(N!==null&&N===c)break;S.tag===5&&z!==null&&(S=z,d?(N=pt(a,p),N!=null&&v.unshift(Ca(a,N,S))):d||(N=pt(a,p),N!=null&&v.push(Ca(a,N,S)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var Hw=/\r\n?/g,qw=/\u0000|\uFFFD/g;function Vp(n){return(typeof n=="string"?n:""+n).replace(Hw,`
`).replace(qw,"")}function eu(n,i,a){if(i=Vp(i),Vp(n)!==i&&a)throw Error(t(425))}function tu(){}var dh=null,fh=null;function ph(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var mh=typeof setTimeout=="function"?setTimeout:void 0,Ww=typeof clearTimeout=="function"?clearTimeout:void 0,Op=typeof Promise=="function"?Promise:void 0,Gw=typeof queueMicrotask=="function"?queueMicrotask:typeof Op<"u"?function(n){return Op.resolve(null).then(n).catch(Kw)}:mh;function Kw(n){setTimeout(function(){throw n})}function gh(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Yn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Yn(i)}function di(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Lp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var ho=Math.random().toString(36).slice(2),mr="__reactFiber$"+ho,Ra="__reactProps$"+ho,Or="__reactContainer$"+ho,yh="__reactEvents$"+ho,Qw="__reactListeners$"+ho,Yw="__reactHandles$"+ho;function ds(n){var i=n[mr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Or]||a[mr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Lp(n);n!==null;){if(a=n[mr])return a;n=Lp(n)}return i}n=a,a=n.parentNode}return null}function Pa(n){return n=n[mr]||n[Or],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function fo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function nu(n){return n[Ra]||null}var _h=[],po=-1;function fi(n){return{current:n}}function ot(n){0>po||(n.current=_h[po],_h[po]=null,po--)}function nt(n,i){po++,_h[po]=n.current,n.current=i}var pi={},Bt=fi(pi),rn=fi(!1),fs=pi;function mo(n,i){var a=n.type.contextTypes;if(!a)return pi;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function sn(n){return n=n.childContextTypes,n!=null}function ru(){ot(rn),ot(Bt)}function Mp(n,i,a){if(Bt.current!==pi)throw Error(t(168));nt(Bt,i),nt(rn,a)}function bp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,le(n)||"Unknown",d));return oe({},a,c)}function iu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||pi,fs=Bt.current,nt(Bt,n),nt(rn,rn.current),!0}function Fp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=bp(n,i,fs),c.__reactInternalMemoizedMergedChildContext=n,ot(rn),ot(Bt),nt(Bt,n)):ot(rn),nt(rn,a)}var Lr=null,su=!1,vh=!1;function jp(n){Lr===null?Lr=[n]:Lr.push(n)}function Xw(n){su=!0,jp(n)}function mi(){if(!vh&&Lr!==null){vh=!0;var n=0,i=Ue;try{var a=Lr;for(Ue=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Lr=null,su=!1}catch(d){throw Lr!==null&&(Lr=Lr.slice(n+1)),Gs(is,mi),d}finally{Ue=i,vh=!1}}return null}var go=[],yo=0,ou=null,au=0,Nn=[],xn=0,ps=null,Mr=1,br="";function ms(n,i){go[yo++]=au,go[yo++]=ou,ou=n,au=i}function Up(n,i,a){Nn[xn++]=Mr,Nn[xn++]=br,Nn[xn++]=ps,ps=n;var c=Mr;n=br;var d=32-Yt(c)-1;c&=~(1<<d),a+=1;var p=32-Yt(i)+d;if(30<p){var v=d-d%5;p=(c&(1<<v)-1).toString(32),c>>=v,d-=v,Mr=1<<32-Yt(i)+d|a<<d|c,br=p+n}else Mr=1<<p|a<<d|c,br=n}function wh(n){n.return!==null&&(ms(n,1),Up(n,1,0))}function Eh(n){for(;n===ou;)ou=go[--yo],go[yo]=null,au=go[--yo],go[yo]=null;for(;n===ps;)ps=Nn[--xn],Nn[xn]=null,br=Nn[--xn],Nn[xn]=null,Mr=Nn[--xn],Nn[xn]=null}var vn=null,wn=null,lt=!1,Zn=null;function zp(n,i){var a=Ln(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Bp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,vn=n,wn=di(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,vn=n,wn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=ps!==null?{id:Mr,overflow:br}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Ln(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,vn=n,wn=null,!0):!1;default:return!1}}function Ih(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Th(n){if(lt){var i=wn;if(i){var a=i;if(!Bp(n,i)){if(Ih(n))throw Error(t(418));i=di(a.nextSibling);var c=vn;i&&Bp(n,i)?zp(c,a):(n.flags=n.flags&-4097|2,lt=!1,vn=n)}}else{if(Ih(n))throw Error(t(418));n.flags=n.flags&-4097|2,lt=!1,vn=n}}}function $p(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vn=n}function lu(n){if(n!==vn)return!1;if(!lt)return $p(n),lt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!ph(n.type,n.memoizedProps)),i&&(i=wn)){if(Ih(n))throw Hp(),Error(t(418));for(;i;)zp(n,i),i=di(i.nextSibling)}if($p(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){wn=di(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}wn=null}}else wn=vn?di(n.stateNode.nextSibling):null;return!0}function Hp(){for(var n=wn;n;)n=di(n.nextSibling)}function _o(){wn=vn=null,lt=!1}function Sh(n){Zn===null?Zn=[n]:Zn.push(n)}var Jw=Se.ReactCurrentBatchConfig;function ka(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(v){var S=d.refs;v===null?delete S[p]:S[p]=v},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function uu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function qp(n){var i=n._init;return i(n._payload)}function Wp(n){function i(F,V){if(n){var U=F.deletions;U===null?(F.deletions=[V],F.flags|=16):U.push(V)}}function a(F,V){if(!n)return null;for(;V!==null;)i(F,V),V=V.sibling;return null}function c(F,V){for(F=new Map;V!==null;)V.key!==null?F.set(V.key,V):F.set(V.index,V),V=V.sibling;return F}function d(F,V){return F=Ti(F,V),F.index=0,F.sibling=null,F}function p(F,V,U){return F.index=U,n?(U=F.alternate,U!==null?(U=U.index,U<V?(F.flags|=2,V):U):(F.flags|=2,V)):(F.flags|=1048576,V)}function v(F){return n&&F.alternate===null&&(F.flags|=2),F}function S(F,V,U,te){return V===null||V.tag!==6?(V=md(U,F.mode,te),V.return=F,V):(V=d(V,U),V.return=F,V)}function N(F,V,U,te){var we=U.type;return we===O?Q(F,V,U.props.children,te,U.key):V!==null&&(V.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ut&&qp(we)===V.type)?(te=d(V,U.props),te.ref=ka(F,V,U),te.return=F,te):(te=Vu(U.type,U.key,U.props,null,F.mode,te),te.ref=ka(F,V,U),te.return=F,te)}function z(F,V,U,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=gd(U,F.mode,te),V.return=F,V):(V=d(V,U.children||[]),V.return=F,V)}function Q(F,V,U,te,we){return V===null||V.tag!==7?(V=Ts(U,F.mode,te,we),V.return=F,V):(V=d(V,U),V.return=F,V)}function J(F,V,U){if(typeof V=="string"&&V!==""||typeof V=="number")return V=md(""+V,F.mode,U),V.return=F,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case qe:return U=Vu(V.type,V.key,V.props,null,F.mode,U),U.ref=ka(F,null,V),U.return=F,U;case Ee:return V=gd(V,F.mode,U),V.return=F,V;case ut:var te=V._init;return J(F,te(V._payload),U)}if(Z(V)||ve(V))return V=Ts(V,F.mode,U,null),V.return=F,V;uu(F,V)}return null}function K(F,V,U,te){var we=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return we!==null?null:S(F,V,""+U,te);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case qe:return U.key===we?N(F,V,U,te):null;case Ee:return U.key===we?z(F,V,U,te):null;case ut:return we=U._init,K(F,V,we(U._payload),te)}if(Z(U)||ve(U))return we!==null?null:Q(F,V,U,te,null);uu(F,U)}return null}function ce(F,V,U,te,we){if(typeof te=="string"&&te!==""||typeof te=="number")return F=F.get(U)||null,S(V,F,""+te,we);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case qe:return F=F.get(te.key===null?U:te.key)||null,N(V,F,te,we);case Ee:return F=F.get(te.key===null?U:te.key)||null,z(V,F,te,we);case ut:var Ce=te._init;return ce(F,V,U,Ce(te._payload),we)}if(Z(te)||ve(te))return F=F.get(U)||null,Q(V,F,te,we,null);uu(V,te)}return null}function ge(F,V,U,te){for(var we=null,Ce=null,Re=V,Ne=V=0,Nt=null;Re!==null&&Ne<U.length;Ne++){Re.index>Ne?(Nt=Re,Re=null):Nt=Re.sibling;var He=K(F,Re,U[Ne],te);if(He===null){Re===null&&(Re=Nt);break}n&&Re&&He.alternate===null&&i(F,Re),V=p(He,V,Ne),Ce===null?we=He:Ce.sibling=He,Ce=He,Re=Nt}if(Ne===U.length)return a(F,Re),lt&&ms(F,Ne),we;if(Re===null){for(;Ne<U.length;Ne++)Re=J(F,U[Ne],te),Re!==null&&(V=p(Re,V,Ne),Ce===null?we=Re:Ce.sibling=Re,Ce=Re);return lt&&ms(F,Ne),we}for(Re=c(F,Re);Ne<U.length;Ne++)Nt=ce(Re,F,Ne,U[Ne],te),Nt!==null&&(n&&Nt.alternate!==null&&Re.delete(Nt.key===null?Ne:Nt.key),V=p(Nt,V,Ne),Ce===null?we=Nt:Ce.sibling=Nt,Ce=Nt);return n&&Re.forEach(function(Si){return i(F,Si)}),lt&&ms(F,Ne),we}function _e(F,V,U,te){var we=ve(U);if(typeof we!="function")throw Error(t(150));if(U=we.call(U),U==null)throw Error(t(151));for(var Ce=we=null,Re=V,Ne=V=0,Nt=null,He=U.next();Re!==null&&!He.done;Ne++,He=U.next()){Re.index>Ne?(Nt=Re,Re=null):Nt=Re.sibling;var Si=K(F,Re,He.value,te);if(Si===null){Re===null&&(Re=Nt);break}n&&Re&&Si.alternate===null&&i(F,Re),V=p(Si,V,Ne),Ce===null?we=Si:Ce.sibling=Si,Ce=Si,Re=Nt}if(He.done)return a(F,Re),lt&&ms(F,Ne),we;if(Re===null){for(;!He.done;Ne++,He=U.next())He=J(F,He.value,te),He!==null&&(V=p(He,V,Ne),Ce===null?we=He:Ce.sibling=He,Ce=He);return lt&&ms(F,Ne),we}for(Re=c(F,Re);!He.done;Ne++,He=U.next())He=ce(Re,F,Ne,He.value,te),He!==null&&(n&&He.alternate!==null&&Re.delete(He.key===null?Ne:He.key),V=p(He,V,Ne),Ce===null?we=He:Ce.sibling=He,Ce=He);return n&&Re.forEach(function(xE){return i(F,xE)}),lt&&ms(F,Ne),we}function mt(F,V,U,te){if(typeof U=="object"&&U!==null&&U.type===O&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case qe:e:{for(var we=U.key,Ce=V;Ce!==null;){if(Ce.key===we){if(we=U.type,we===O){if(Ce.tag===7){a(F,Ce.sibling),V=d(Ce,U.props.children),V.return=F,F=V;break e}}else if(Ce.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ut&&qp(we)===Ce.type){a(F,Ce.sibling),V=d(Ce,U.props),V.ref=ka(F,Ce,U),V.return=F,F=V;break e}a(F,Ce);break}else i(F,Ce);Ce=Ce.sibling}U.type===O?(V=Ts(U.props.children,F.mode,te,U.key),V.return=F,F=V):(te=Vu(U.type,U.key,U.props,null,F.mode,te),te.ref=ka(F,V,U),te.return=F,F=te)}return v(F);case Ee:e:{for(Ce=U.key;V!==null;){if(V.key===Ce)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){a(F,V.sibling),V=d(V,U.children||[]),V.return=F,F=V;break e}else{a(F,V);break}else i(F,V);V=V.sibling}V=gd(U,F.mode,te),V.return=F,F=V}return v(F);case ut:return Ce=U._init,mt(F,V,Ce(U._payload),te)}if(Z(U))return ge(F,V,U,te);if(ve(U))return _e(F,V,U,te);uu(F,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,V!==null&&V.tag===6?(a(F,V.sibling),V=d(V,U),V.return=F,F=V):(a(F,V),V=md(U,F.mode,te),V.return=F,F=V),v(F)):a(F,V)}return mt}var vo=Wp(!0),Gp=Wp(!1),cu=fi(null),hu=null,wo=null,Ah=null;function Ch(){Ah=wo=hu=null}function Rh(n){var i=cu.current;ot(cu),n._currentValue=i}function Ph(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function Eo(n,i){hu=n,Ah=wo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(on=!0),n.firstContext=null)}function Dn(n){var i=n._currentValue;if(Ah!==n)if(n={context:n,memoizedValue:i,next:null},wo===null){if(hu===null)throw Error(t(308));wo=n,hu.dependencies={lanes:0,firstContext:n}}else wo=wo.next=n;return i}var gs=null;function kh(n){gs===null?gs=[n]:gs.push(n)}function Kp(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,kh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Fr(n,c)}function Fr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var gi=!1;function Nh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function jr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function yi(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,($e&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Fr(n,a)}return d=c.interleaved,d===null?(i.next=i,kh(c)):(i.next=d.next,d.next=i),c.interleaved=i,Fr(n,a)}function du(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,oi(n,a)}}function Yp(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function fu(n,i,a,c){var d=n.updateQueue;gi=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var N=S,z=N.next;N.next=null,v===null?p=z:v.next=z,v=N;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==v&&(S===null?Q.firstBaseUpdate=z:S.next=z,Q.lastBaseUpdate=N))}if(p!==null){var J=d.baseState;v=0,Q=z=N=null,S=p;do{var K=S.lane,ce=S.eventTime;if((c&K)===K){Q!==null&&(Q=Q.next={eventTime:ce,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ge=n,_e=S;switch(K=i,ce=a,_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){J=ge.call(ce,J,K);break e}J=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,K=typeof ge=="function"?ge.call(ce,J,K):ge,K==null)break e;J=oe({},J,K);break e;case 2:gi=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,K=d.effects,K===null?d.effects=[S]:K.push(S))}else ce={eventTime:ce,lane:K,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(z=Q=ce,N=J):Q=Q.next=ce,v|=K;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;K=S,S=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);if(Q===null&&(N=J),d.baseState=N,d.firstBaseUpdate=z,d.lastBaseUpdate=Q,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);vs|=v,n.lanes=v,n.memoizedState=J}}function Xp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Na={},gr=fi(Na),xa=fi(Na),Da=fi(Na);function ys(n){if(n===Na)throw Error(t(174));return n}function xh(n,i){switch(nt(Da,i),nt(xa,n),nt(gr,Na),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:et(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=et(i,n)}ot(gr),nt(gr,i)}function Io(){ot(gr),ot(xa),ot(Da)}function Jp(n){ys(Da.current);var i=ys(gr.current),a=et(i,n.type);i!==a&&(nt(xa,n),nt(gr,a))}function Dh(n){xa.current===n&&(ot(gr),ot(xa))}var ct=fi(0);function pu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vh=[];function Oh(){for(var n=0;n<Vh.length;n++)Vh[n]._workInProgressVersionPrimary=null;Vh.length=0}var mu=Se.ReactCurrentDispatcher,Lh=Se.ReactCurrentBatchConfig,_s=0,ht=null,St=null,Pt=null,gu=!1,Va=!1,Oa=0,Zw=0;function $t(){throw Error(t(321))}function Mh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Jn(n[a],i[a]))return!1;return!0}function bh(n,i,a,c,d,p){if(_s=p,ht=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,mu.current=n===null||n.memoizedState===null?rE:iE,n=a(c,d),Va){p=0;do{if(Va=!1,Oa=0,25<=p)throw Error(t(301));p+=1,Pt=St=null,i.updateQueue=null,mu.current=sE,n=a(c,d)}while(Va)}if(mu.current=vu,i=St!==null&&St.next!==null,_s=0,Pt=St=ht=null,gu=!1,i)throw Error(t(300));return n}function Fh(){var n=Oa!==0;return Oa=0,n}function yr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ht.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function Vn(){if(St===null){var n=ht.alternate;n=n!==null?n.memoizedState:null}else n=St.next;var i=Pt===null?ht.memoizedState:Pt.next;if(i!==null)Pt=i,St=n;else{if(n===null)throw Error(t(310));St=n,n={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Pt===null?ht.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function La(n,i){return typeof i=="function"?i(n):i}function jh(n){var i=Vn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=St,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var S=v=null,N=null,z=p;do{var Q=z.lane;if((_s&Q)===Q)N!==null&&(N=N.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var J={lane:Q,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};N===null?(S=N=J,v=c):N=N.next=J,ht.lanes|=Q,vs|=Q}z=z.next}while(z!==null&&z!==p);N===null?v=c:N.next=S,Jn(c,i.memoizedState)||(on=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,ht.lanes|=p,vs|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Uh(n){var i=Vn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);Jn(p,i.memoizedState)||(on=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function Zp(){}function em(n,i){var a=ht,c=Vn(),d=i(),p=!Jn(c.memoizedState,d);if(p&&(c.memoizedState=d,on=!0),c=c.queue,zh(rm.bind(null,a,c,n),[n]),c.getSnapshot!==i||p||Pt!==null&&Pt.memoizedState.tag&1){if(a.flags|=2048,Ma(9,nm.bind(null,a,c,d,i),void 0,null),kt===null)throw Error(t(349));(_s&30)!==0||tm(a,i,d)}return d}function tm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=ht.updateQueue,i===null?(i={lastEffect:null,stores:null},ht.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function nm(n,i,a,c){i.value=a,i.getSnapshot=c,im(i)&&sm(n)}function rm(n,i,a){return a(function(){im(i)&&sm(n)})}function im(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Jn(n,a)}catch{return!0}}function sm(n){var i=Fr(n,1);i!==null&&rr(i,n,1,-1)}function om(n){var i=yr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:n},i.queue=n,n=n.dispatch=nE.bind(null,ht,n),[i.memoizedState,n]}function Ma(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=ht.updateQueue,i===null?(i={lastEffect:null,stores:null},ht.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function am(){return Vn().memoizedState}function yu(n,i,a,c){var d=yr();ht.flags|=n,d.memoizedState=Ma(1|i,a,void 0,c===void 0?null:c)}function _u(n,i,a,c){var d=Vn();c=c===void 0?null:c;var p=void 0;if(St!==null){var v=St.memoizedState;if(p=v.destroy,c!==null&&Mh(c,v.deps)){d.memoizedState=Ma(i,a,p,c);return}}ht.flags|=n,d.memoizedState=Ma(1|i,a,p,c)}function lm(n,i){return yu(8390656,8,n,i)}function zh(n,i){return _u(2048,8,n,i)}function um(n,i){return _u(4,2,n,i)}function cm(n,i){return _u(4,4,n,i)}function hm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function dm(n,i,a){return a=a!=null?a.concat([n]):null,_u(4,4,hm.bind(null,i,n),a)}function Bh(){}function fm(n,i){var a=Vn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Mh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function pm(n,i){var a=Vn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Mh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function mm(n,i,a){return(_s&21)===0?(n.baseState&&(n.baseState=!1,on=!0),n.memoizedState=a):(Jn(a,i)||(a=as(),ht.lanes|=a,vs|=a,n.baseState=!0),i)}function eE(n,i){var a=Ue;Ue=a!==0&&4>a?a:4,n(!0);var c=Lh.transition;Lh.transition={};try{n(!1),i()}finally{Ue=a,Lh.transition=c}}function gm(){return Vn().memoizedState}function tE(n,i,a){var c=Ei(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},ym(n))_m(i,a);else if(a=Kp(n,i,a,c),a!==null){var d=Zt();rr(a,n,c,d),vm(a,i,c)}}function nE(n,i,a){var c=Ei(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(ym(n))_m(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,S=p(v,a);if(d.hasEagerState=!0,d.eagerState=S,Jn(S,v)){var N=i.interleaved;N===null?(d.next=d,kh(i)):(d.next=N.next,N.next=d),i.interleaved=d;return}}catch{}finally{}a=Kp(n,i,d,c),a!==null&&(d=Zt(),rr(a,n,c,d),vm(a,i,c))}}function ym(n){var i=n.alternate;return n===ht||i!==null&&i===ht}function _m(n,i){Va=gu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function vm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,oi(n,a)}}var vu={readContext:Dn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},rE={readContext:Dn,useCallback:function(n,i){return yr().memoizedState=[n,i===void 0?null:i],n},useContext:Dn,useEffect:lm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,yu(4194308,4,hm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return yu(4194308,4,n,i)},useInsertionEffect:function(n,i){return yu(4,2,n,i)},useMemo:function(n,i){var a=yr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=yr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=tE.bind(null,ht,n),[c.memoizedState,n]},useRef:function(n){var i=yr();return n={current:n},i.memoizedState=n},useState:om,useDebugValue:Bh,useDeferredValue:function(n){return yr().memoizedState=n},useTransition:function(){var n=om(!1),i=n[0];return n=eE.bind(null,n[1]),yr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=ht,d=yr();if(lt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),kt===null)throw Error(t(349));(_s&30)!==0||tm(c,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,lm(rm.bind(null,c,p,n),[n]),c.flags|=2048,Ma(9,nm.bind(null,c,p,a,i),void 0,null),a},useId:function(){var n=yr(),i=kt.identifierPrefix;if(lt){var a=br,c=Mr;a=(c&~(1<<32-Yt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Oa++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Zw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},iE={readContext:Dn,useCallback:fm,useContext:Dn,useEffect:zh,useImperativeHandle:dm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:pm,useReducer:jh,useRef:am,useState:function(){return jh(La)},useDebugValue:Bh,useDeferredValue:function(n){var i=Vn();return mm(i,St.memoizedState,n)},useTransition:function(){var n=jh(La)[0],i=Vn().memoizedState;return[n,i]},useMutableSource:Zp,useSyncExternalStore:em,useId:gm,unstable_isNewReconciler:!1},sE={readContext:Dn,useCallback:fm,useContext:Dn,useEffect:zh,useImperativeHandle:dm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:pm,useReducer:Uh,useRef:am,useState:function(){return Uh(La)},useDebugValue:Bh,useDeferredValue:function(n){var i=Vn();return St===null?i.memoizedState=n:mm(i,St.memoizedState,n)},useTransition:function(){var n=Uh(La)[0],i=Vn().memoizedState;return[n,i]},useMutableSource:Zp,useSyncExternalStore:em,useId:gm,unstable_isNewReconciler:!1};function er(n,i){if(n&&n.defaultProps){i=oe({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function $h(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:oe({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var wu={isMounted:function(n){return(n=n._reactInternals)?qn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Zt(),d=Ei(n),p=jr(c,d);p.payload=i,a!=null&&(p.callback=a),i=yi(n,p,d),i!==null&&(rr(i,n,d,c),du(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Zt(),d=Ei(n),p=jr(c,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=yi(n,p,d),i!==null&&(rr(i,n,d,c),du(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Zt(),c=Ei(n),d=jr(a,c);d.tag=2,i!=null&&(d.callback=i),i=yi(n,d,c),i!==null&&(rr(i,n,c,a),du(i,n,c))}};function wm(n,i,a,c,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,v):i.prototype&&i.prototype.isPureReactComponent?!Ia(a,c)||!Ia(d,p):!0}function Em(n,i,a){var c=!1,d=pi,p=i.contextType;return typeof p=="object"&&p!==null?p=Dn(p):(d=sn(i)?fs:Bt.current,c=i.contextTypes,p=(c=c!=null)?mo(n,d):pi),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=wu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function Im(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&wu.enqueueReplaceState(i,i.state,null)}function Hh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Nh(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=Dn(p):(p=sn(i)?fs:Bt.current,d.context=mo(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&($h(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&wu.enqueueReplaceState(d,d.state,null),fu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function To(n,i){try{var a="",c=i;do a+=ye(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function qh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Wh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var oE=typeof WeakMap=="function"?WeakMap:Map;function Tm(n,i,a){a=jr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Ru||(Ru=!0,ad=c),Wh(n,i)},a}function Sm(n,i,a){a=jr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Wh(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Wh(n,i),typeof c!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function Am(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new oE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=wE.bind(null,n,i,a),i.then(n,n))}function Cm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Rm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=jr(-1,1),i.tag=2,yi(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var aE=Se.ReactCurrentOwner,on=!1;function Jt(n,i,a,c){i.child=n===null?Gp(i,null,a,c):vo(i,n.child,a,c)}function Pm(n,i,a,c,d){a=a.render;var p=i.ref;return Eo(i,d),c=bh(n,i,a,c,p,d),a=Fh(),n!==null&&!on?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Ur(n,i,d)):(lt&&a&&wh(i),i.flags|=1,Jt(n,i,c,d),i.child)}function km(n,i,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!pd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,Nm(n,i,p,c,d)):(n=Vu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ia,a(v,c)&&n.ref===i.ref)return Ur(n,i,d)}return i.flags|=1,n=Ti(p,c),n.ref=i.ref,n.return=i,i.child=n}function Nm(n,i,a,c,d){if(n!==null){var p=n.memoizedProps;if(Ia(p,c)&&n.ref===i.ref)if(on=!1,i.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(on=!0);else return i.lanes=n.lanes,Ur(n,i,d)}return Gh(n,i,a,c,d)}function xm(n,i,a){var c=i.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Ao,En),En|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,nt(Ao,En),En|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,nt(Ao,En),En|=c}else p!==null?(c=p.baseLanes|a,i.memoizedState=null):c=a,nt(Ao,En),En|=c;return Jt(n,i,d,a),i.child}function Dm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Gh(n,i,a,c,d){var p=sn(a)?fs:Bt.current;return p=mo(i,p),Eo(i,d),a=bh(n,i,a,c,p,d),c=Fh(),n!==null&&!on?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Ur(n,i,d)):(lt&&c&&wh(i),i.flags|=1,Jt(n,i,a,d),i.child)}function Vm(n,i,a,c,d){if(sn(a)){var p=!0;iu(i)}else p=!1;if(Eo(i,d),i.stateNode===null)Iu(n,i),Em(i,a,c),Hh(i,a,c,d),c=!0;else if(n===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var N=v.context,z=a.contextType;typeof z=="object"&&z!==null?z=Dn(z):(z=sn(a)?fs:Bt.current,z=mo(i,z));var Q=a.getDerivedStateFromProps,J=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function";J||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==c||N!==z)&&Im(i,v,c,z),gi=!1;var K=i.memoizedState;v.state=K,fu(i,c,v,d),N=i.memoizedState,S!==c||K!==N||rn.current||gi?(typeof Q=="function"&&($h(i,a,Q,c),N=i.memoizedState),(S=gi||wm(i,a,S,c,K,N,z))?(J||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=N),v.props=c,v.state=N,v.context=z,c=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,Qp(n,i),S=i.memoizedProps,z=i.type===i.elementType?S:er(i.type,S),v.props=z,J=i.pendingProps,K=v.context,N=a.contextType,typeof N=="object"&&N!==null?N=Dn(N):(N=sn(a)?fs:Bt.current,N=mo(i,N));var ce=a.getDerivedStateFromProps;(Q=typeof ce=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==J||K!==N)&&Im(i,v,c,N),gi=!1,K=i.memoizedState,v.state=K,fu(i,c,v,d);var ge=i.memoizedState;S!==J||K!==ge||rn.current||gi?(typeof ce=="function"&&($h(i,a,ce,c),ge=i.memoizedState),(z=gi||wm(i,a,z,c,K,ge,N)||!1)?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ge,N),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ge,N)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ge),v.props=c,v.state=ge,v.context=N,c=z):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),c=!1)}return Kh(n,i,a,c,p,d)}function Kh(n,i,a,c,d,p){Dm(n,i);var v=(i.flags&128)!==0;if(!c&&!v)return d&&Fp(i,a,!1),Ur(n,i,p);c=i.stateNode,aE.current=i;var S=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&v?(i.child=vo(i,n.child,null,p),i.child=vo(i,null,S,p)):Jt(n,i,S,p),i.memoizedState=c.state,d&&Fp(i,a,!0),i.child}function Om(n){var i=n.stateNode;i.pendingContext?Mp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Mp(n,i.context,!1),xh(n,i.containerInfo)}function Lm(n,i,a,c,d){return _o(),Sh(d),i.flags|=256,Jt(n,i,a,c),i.child}var Qh={dehydrated:null,treeContext:null,retryLane:0};function Yh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Mm(n,i,a){var c=i.pendingProps,d=ct.current,p=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),nt(ct,d&1),n===null)return Th(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=c.children,n=c.fallback,p?(c=i.mode,p=i.child,v={mode:"hidden",children:v},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Ou(v,c,0,null),n=Ts(n,c,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=Yh(a),i.memoizedState=Qh,n):Xh(i,v));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return lE(n,i,v,c,S,d,a);if(p){p=c.fallback,v=i.mode,d=n.child,S=d.sibling;var N={mode:"hidden",children:c.children};return(v&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=N,i.deletions=null):(c=Ti(d,N),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=Ti(S,p):(p=Ts(p,v,a,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,v=n.child.memoizedState,v=v===null?Yh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=n.childLanes&~a,i.memoizedState=Qh,c}return p=n.child,n=p.sibling,c=Ti(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Xh(n,i){return i=Ou({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Eu(n,i,a,c){return c!==null&&Sh(c),vo(i,n.child,null,a),n=Xh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function lE(n,i,a,c,d,p,v){if(a)return i.flags&256?(i.flags&=-257,c=qh(Error(t(422))),Eu(n,i,v,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=c.fallback,d=i.mode,c=Ou({mode:"visible",children:c.children},d,0,null),p=Ts(p,d,v,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&vo(i,n.child,null,v),i.child.memoizedState=Yh(v),i.memoizedState=Qh,p);if((i.mode&1)===0)return Eu(n,i,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,p=Error(t(419)),c=qh(p,c,void 0),Eu(n,i,v,c)}if(S=(v&n.childLanes)!==0,on||S){if(c=kt,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Fr(n,d),rr(c,n,d,-1))}return fd(),c=qh(Error(t(421))),Eu(n,i,v,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=EE.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,wn=di(d.nextSibling),vn=i,lt=!0,Zn=null,n!==null&&(Nn[xn++]=Mr,Nn[xn++]=br,Nn[xn++]=ps,Mr=n.id,br=n.overflow,ps=i),i=Xh(i,c.children),i.flags|=4096,i)}function bm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Ph(n.return,i,a)}function Jh(n,i,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Fm(n,i,a){var c=i.pendingProps,d=c.revealOrder,p=c.tail;if(Jt(n,i,c.children,a),c=ct.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&bm(n,a,i);else if(n.tag===19)bm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(nt(ct,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&pu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Jh(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&pu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Jh(i,!0,a,null,p);break;case"together":Jh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Iu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Ur(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),vs|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Ti(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Ti(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function uE(n,i,a){switch(i.tag){case 3:Om(i),_o();break;case 5:Jp(i);break;case 1:sn(i.type)&&iu(i);break;case 4:xh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;nt(cu,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(nt(ct,ct.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Mm(n,i,a):(nt(ct,ct.current&1),n=Ur(n,i,a),n!==null?n.sibling:null);nt(ct,ct.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Fm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),nt(ct,ct.current),c)break;return null;case 22:case 23:return i.lanes=0,xm(n,i,a)}return Ur(n,i,a)}var jm,Zh,Um,zm;jm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Zh=function(){},Um=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,ys(gr.current);var p=null;switch(a){case"input":d=An(n,d),c=An(n,c),p=[];break;case"select":d=oe({},d,{value:void 0}),c=oe({},c,{value:void 0}),p=[];break;case"textarea":d=Qe(n,d),c=Qe(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=tu)}ra(a,c);var v;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var S=d[z];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?p||(p=[]):(p=p||[]).push(z,null));for(z in c){var N=c[z];if(S=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&N!==S&&(N!=null||S!=null))if(z==="style")if(S){for(v in S)!S.hasOwnProperty(v)||N&&N.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in N)N.hasOwnProperty(v)&&S[v]!==N[v]&&(a||(a={}),a[v]=N[v])}else a||(p||(p=[]),p.push(z,a)),a=N;else z==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,S=S?S.__html:void 0,N!=null&&S!==N&&(p=p||[]).push(z,N)):z==="children"?typeof N!="string"&&typeof N!="number"||(p=p||[]).push(z,""+N):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(N!=null&&z==="onScroll"&&st("scroll",n),p||S===N||(p=[])):(p=p||[]).push(z,N))}a&&(p=p||[]).push("style",a);var z=p;(i.updateQueue=z)&&(i.flags|=4)}},zm=function(n,i,a,c){a!==c&&(i.flags|=4)};function ba(n,i){if(!lt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ht(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function cE(n,i,a){var c=i.pendingProps;switch(Eh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(i),null;case 1:return sn(i.type)&&ru(),Ht(i),null;case 3:return c=i.stateNode,Io(),ot(rn),ot(Bt),Oh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(lu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zn!==null&&(cd(Zn),Zn=null))),Zh(n,i),Ht(i),null;case 5:Dh(i);var d=ys(Da.current);if(a=i.type,n!==null&&i.stateNode!=null)Um(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Ht(i),null}if(n=ys(gr.current),lu(i)){c=i.stateNode,a=i.type;var p=i.memoizedProps;switch(c[mr]=i,c[Ra]=p,n=(i.mode&1)!==0,a){case"dialog":st("cancel",c),st("close",c);break;case"iframe":case"object":case"embed":st("load",c);break;case"video":case"audio":for(d=0;d<Sa.length;d++)st(Sa[d],c);break;case"source":st("error",c);break;case"img":case"image":case"link":st("error",c),st("load",c);break;case"details":st("toggle",c);break;case"input":ei(c,p),st("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},st("invalid",c);break;case"textarea":Ze(c,p),st("invalid",c)}ra(a,p),d=null;for(var v in p)if(p.hasOwnProperty(v)){var S=p[v];v==="children"?typeof S=="string"?c.textContent!==S&&(p.suppressHydrationWarning!==!0&&eu(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&eu(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&st("scroll",c)}switch(a){case"input":zt(c),Yi(c,p,!0);break;case"textarea":zt(c),pn(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=tu)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ye(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[mr]=i,n[Ra]=c,jm(n,i,!1,!1),i.stateNode=n;e:{switch(v=ia(a,c),a){case"dialog":st("cancel",n),st("close",n),d=c;break;case"iframe":case"object":case"embed":st("load",n),d=c;break;case"video":case"audio":for(d=0;d<Sa.length;d++)st(Sa[d],n);d=c;break;case"source":st("error",n),d=c;break;case"img":case"image":case"link":st("error",n),st("load",n),d=c;break;case"details":st("toggle",n),d=c;break;case"input":ei(n,c),d=An(n,c),st("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=oe({},c,{value:void 0}),st("invalid",n);break;case"textarea":Ze(n,c),d=Qe(n,c),st("invalid",n);break;default:d=c}ra(a,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var N=S[p];p==="style"?ta(n,N):p==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Zo(n,N)):p==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&ti(n,N):typeof N=="number"&&ti(n,""+N):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?N!=null&&p==="onScroll"&&st("scroll",n):N!=null&&se(n,p,N,v))}switch(a){case"input":zt(n),Yi(n,c,!1);break;case"textarea":zt(n),pn(n);break;case"option":c.value!=null&&n.setAttribute("value",""+fe(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?Ae(n,!!c.multiple,p,!1):c.defaultValue!=null&&Ae(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=tu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ht(i),null;case 6:if(n&&i.stateNode!=null)zm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=ys(Da.current),ys(gr.current),lu(i)){if(c=i.stateNode,a=i.memoizedProps,c[mr]=i,(p=c.nodeValue!==a)&&(n=vn,n!==null))switch(n.tag){case 3:eu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&eu(c.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[mr]=i,i.stateNode=c}return Ht(i),null;case 13:if(ot(ct),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(lt&&wn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Hp(),_o(),i.flags|=98560,p=!1;else if(p=lu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[mr]=i}else _o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ht(i),p=!1}else Zn!==null&&(cd(Zn),Zn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(ct.current&1)!==0?At===0&&(At=3):fd())),i.updateQueue!==null&&(i.flags|=4),Ht(i),null);case 4:return Io(),Zh(n,i),n===null&&Aa(i.stateNode.containerInfo),Ht(i),null;case 10:return Rh(i.type._context),Ht(i),null;case 17:return sn(i.type)&&ru(),Ht(i),null;case 19:if(ot(ct),p=i.memoizedState,p===null)return Ht(i),null;if(c=(i.flags&128)!==0,v=p.rendering,v===null)if(c)ba(p,!1);else{if(At!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=pu(n),v!==null){for(i.flags|=128,ba(p,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)p=a,n=c,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,n=v.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return nt(ct,ct.current&1|2),i.child}n=n.sibling}p.tail!==null&&tt()>Co&&(i.flags|=128,c=!0,ba(p,!1),i.lanes=4194304)}else{if(!c)if(n=pu(v),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),ba(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!lt)return Ht(i),null}else 2*tt()-p.renderingStartTime>Co&&a!==1073741824&&(i.flags|=128,c=!0,ba(p,!1),i.lanes=4194304);p.isBackwards?(v.sibling=i.child,i.child=v):(a=p.last,a!==null?a.sibling=v:i.child=v,p.last=v)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=tt(),i.sibling=null,a=ct.current,nt(ct,c?a&1|2:a&1),i):(Ht(i),null);case 22:case 23:return dd(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(En&1073741824)!==0&&(Ht(i),i.subtreeFlags&6&&(i.flags|=8192)):Ht(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function hE(n,i){switch(Eh(i),i.tag){case 1:return sn(i.type)&&ru(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Io(),ot(rn),ot(Bt),Oh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Dh(i),null;case 13:if(ot(ct),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));_o()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ot(ct),null;case 4:return Io(),null;case 10:return Rh(i.type._context),null;case 22:case 23:return dd(),null;case 24:return null;default:return null}}var Tu=!1,qt=!1,dE=typeof WeakSet=="function"?WeakSet:Set,pe=null;function So(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ft(n,i,c)}else a.current=null}function ed(n,i,a){try{a()}catch(c){ft(n,i,c)}}var Bm=!1;function fE(n,i){if(dh=ui,n=wp(),ih(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,S=-1,N=-1,z=0,Q=0,J=n,K=null;t:for(;;){for(var ce;J!==a||d!==0&&J.nodeType!==3||(S=v+d),J!==p||c!==0&&J.nodeType!==3||(N=v+c),J.nodeType===3&&(v+=J.nodeValue.length),(ce=J.firstChild)!==null;)K=J,J=ce;for(;;){if(J===n)break t;if(K===a&&++z===d&&(S=v),K===p&&++Q===c&&(N=v),(ce=J.nextSibling)!==null)break;J=K,K=J.parentNode}J=ce}a=S===-1||N===-1?null:{start:S,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(fh={focusedElem:n,selectionRange:a},ui=!1,pe=i;pe!==null;)if(i=pe,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,pe=n;else for(;pe!==null;){i=pe;try{var ge=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var _e=ge.memoizedProps,mt=ge.memoizedState,F=i.stateNode,V=F.getSnapshotBeforeUpdate(i.elementType===i.type?_e:er(i.type,_e),mt);F.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){ft(i,i.return,te)}if(n=i.sibling,n!==null){n.return=i.return,pe=n;break}pe=i.return}return ge=Bm,Bm=!1,ge}function Fa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&ed(i,a,p)}d=d.next}while(d!==c)}}function Su(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function td(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function $m(n){var i=n.alternate;i!==null&&(n.alternate=null,$m(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[mr],delete i[Ra],delete i[yh],delete i[Qw],delete i[Yw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Hm(n){return n.tag===5||n.tag===3||n.tag===4}function qm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function nd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=tu));else if(c!==4&&(n=n.child,n!==null))for(nd(n,i,a),n=n.sibling;n!==null;)nd(n,i,a),n=n.sibling}function rd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(rd(n,i,a),n=n.sibling;n!==null;)rd(n,i,a),n=n.sibling}var Ot=null,tr=!1;function _i(n,i,a){for(a=a.child;a!==null;)Wm(n,i,a),a=a.sibling}function Wm(n,i,a){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(ss,a)}catch{}switch(a.tag){case 5:qt||So(a,i);case 6:var c=Ot,d=tr;Ot=null,_i(n,i,a),Ot=c,tr=d,Ot!==null&&(tr?(n=Ot,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ot.removeChild(a.stateNode));break;case 18:Ot!==null&&(tr?(n=Ot,a=a.stateNode,n.nodeType===8?gh(n.parentNode,a):n.nodeType===1&&gh(n,a),Yn(n)):gh(Ot,a.stateNode));break;case 4:c=Ot,d=tr,Ot=a.stateNode.containerInfo,tr=!0,_i(n,i,a),Ot=c,tr=d;break;case 0:case 11:case 14:case 15:if(!qt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&ed(a,i,v),d=d.next}while(d!==c)}_i(n,i,a);break;case 1:if(!qt&&(So(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){ft(a,i,S)}_i(n,i,a);break;case 21:_i(n,i,a);break;case 22:a.mode&1?(qt=(c=qt)||a.memoizedState!==null,_i(n,i,a),qt=c):_i(n,i,a);break;default:_i(n,i,a)}}function Gm(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new dE),i.forEach(function(c){var d=IE.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function nr(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:Ot=S.stateNode,tr=!1;break e;case 3:Ot=S.stateNode.containerInfo,tr=!0;break e;case 4:Ot=S.stateNode.containerInfo,tr=!0;break e}S=S.return}if(Ot===null)throw Error(t(160));Wm(p,v,d),Ot=null,tr=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch(z){ft(d,i,z)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Km(i,n),i=i.sibling}function Km(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(nr(i,n),_r(n),c&4){try{Fa(3,n,n.return),Su(3,n)}catch(_e){ft(n,n.return,_e)}try{Fa(5,n,n.return)}catch(_e){ft(n,n.return,_e)}}break;case 1:nr(i,n),_r(n),c&512&&a!==null&&So(a,a.return);break;case 5:if(nr(i,n),_r(n),c&512&&a!==null&&So(a,a.return),n.flags&32){var d=n.stateNode;try{ti(d,"")}catch(_e){ft(n,n.return,_e)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,v=a!==null?a.memoizedProps:p,S=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&Ki(d,p),ia(S,v);var z=ia(S,p);for(v=0;v<N.length;v+=2){var Q=N[v],J=N[v+1];Q==="style"?ta(d,J):Q==="dangerouslySetInnerHTML"?Zo(d,J):Q==="children"?ti(d,J):se(d,Q,J,z)}switch(S){case"input":Qi(d,p);break;case"textarea":it(d,p);break;case"select":var K=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ce=p.value;ce!=null?Ae(d,!!p.multiple,ce,!1):K!==!!p.multiple&&(p.defaultValue!=null?Ae(d,!!p.multiple,p.defaultValue,!0):Ae(d,!!p.multiple,p.multiple?[]:"",!1))}d[Ra]=p}catch(_e){ft(n,n.return,_e)}}break;case 6:if(nr(i,n),_r(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(_e){ft(n,n.return,_e)}}break;case 3:if(nr(i,n),_r(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Yn(i.containerInfo)}catch(_e){ft(n,n.return,_e)}break;case 4:nr(i,n),_r(n);break;case 13:nr(i,n),_r(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(od=tt())),c&4&&Gm(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?(qt=(z=qt)||Q,nr(i,n),qt=z):nr(i,n),_r(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Q&&(n.mode&1)!==0)for(pe=n,Q=n.child;Q!==null;){for(J=pe=Q;pe!==null;){switch(K=pe,ce=K.child,K.tag){case 0:case 11:case 14:case 15:Fa(4,K,K.return);break;case 1:So(K,K.return);var ge=K.stateNode;if(typeof ge.componentWillUnmount=="function"){c=K,a=K.return;try{i=c,ge.props=i.memoizedProps,ge.state=i.memoizedState,ge.componentWillUnmount()}catch(_e){ft(c,a,_e)}}break;case 5:So(K,K.return);break;case 22:if(K.memoizedState!==null){Xm(J);continue}}ce!==null?(ce.return=K,pe=ce):Xm(J)}Q=Q.sibling}e:for(Q=null,J=n;;){if(J.tag===5){if(Q===null){Q=J;try{d=J.stateNode,z?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=J.stateNode,N=J.memoizedProps.style,v=N!=null&&N.hasOwnProperty("display")?N.display:null,S.style.display=ea("display",v))}catch(_e){ft(n,n.return,_e)}}}else if(J.tag===6){if(Q===null)try{J.stateNode.nodeValue=z?"":J.memoizedProps}catch(_e){ft(n,n.return,_e)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Q===J&&(Q=null),J=J.return}Q===J&&(Q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:nr(i,n),_r(n),c&4&&Gm(n);break;case 21:break;default:nr(i,n),_r(n)}}function _r(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Hm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(ti(d,""),c.flags&=-33);var p=qm(n);rd(n,p,d);break;case 3:case 4:var v=c.stateNode.containerInfo,S=qm(n);nd(n,S,v);break;default:throw Error(t(161))}}catch(N){ft(n,n.return,N)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function pE(n,i,a){pe=n,Qm(n)}function Qm(n,i,a){for(var c=(n.mode&1)!==0;pe!==null;){var d=pe,p=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||Tu;if(!v){var S=d.alternate,N=S!==null&&S.memoizedState!==null||qt;S=Tu;var z=qt;if(Tu=v,(qt=N)&&!z)for(pe=d;pe!==null;)v=pe,N=v.child,v.tag===22&&v.memoizedState!==null?Jm(d):N!==null?(N.return=v,pe=N):Jm(d);for(;p!==null;)pe=p,Qm(p),p=p.sibling;pe=d,Tu=S,qt=z}Ym(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,pe=p):Ym(n)}}function Ym(n){for(;pe!==null;){var i=pe;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:qt||Su(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!qt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:er(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&Xp(i,p,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Xp(i,v,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var N=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var z=i.alternate;if(z!==null){var Q=z.memoizedState;if(Q!==null){var J=Q.dehydrated;J!==null&&Yn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||i.flags&512&&td(i)}catch(K){ft(i,i.return,K)}}if(i===n){pe=null;break}if(a=i.sibling,a!==null){a.return=i.return,pe=a;break}pe=i.return}}function Xm(n){for(;pe!==null;){var i=pe;if(i===n){pe=null;break}var a=i.sibling;if(a!==null){a.return=i.return,pe=a;break}pe=i.return}}function Jm(n){for(;pe!==null;){var i=pe;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Su(4,i)}catch(N){ft(i,a,N)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(N){ft(i,d,N)}}var p=i.return;try{td(i)}catch(N){ft(i,p,N)}break;case 5:var v=i.return;try{td(i)}catch(N){ft(i,v,N)}}}catch(N){ft(i,i.return,N)}if(i===n){pe=null;break}var S=i.sibling;if(S!==null){S.return=i.return,pe=S;break}pe=i.return}}var mE=Math.ceil,Au=Se.ReactCurrentDispatcher,id=Se.ReactCurrentOwner,On=Se.ReactCurrentBatchConfig,$e=0,kt=null,vt=null,Lt=0,En=0,Ao=fi(0),At=0,ja=null,vs=0,Cu=0,sd=0,Ua=null,an=null,od=0,Co=1/0,zr=null,Ru=!1,ad=null,vi=null,Pu=!1,wi=null,ku=0,za=0,ld=null,Nu=-1,xu=0;function Zt(){return($e&6)!==0?tt():Nu!==-1?Nu:Nu=tt()}function Ei(n){return(n.mode&1)===0?1:($e&2)!==0&&Lt!==0?Lt&-Lt:Jw.transition!==null?(xu===0&&(xu=as()),xu):(n=Ue,n!==0||(n=window.event,n=n===void 0?16:ma(n.type)),n)}function rr(n,i,a,c){if(50<za)throw za=0,ld=null,Error(t(185));si(n,a,c),(($e&2)===0||n!==kt)&&(n===kt&&(($e&2)===0&&(Cu|=a),At===4&&Ii(n,Lt)),ln(n,c),a===1&&$e===0&&(i.mode&1)===0&&(Co=tt()+500,su&&mi()))}function ln(n,i){var a=n.callbackNode;kr(n,i);var c=os(n,n===kt?Lt:0);if(c===0)a!==null&&ca(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&ca(a),i===1)n.tag===0?Xw(eg.bind(null,n)):jp(eg.bind(null,n)),Gw(function(){($e&6)===0&&mi()}),a=null;else{switch(ai(c)){case 1:a=is;break;case 4:a=ni;break;case 16:a=Rn;break;case 536870912:a=xl;break;default:a=Rn}a=lg(a,Zm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Zm(n,i){if(Nu=-1,xu=0,($e&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Ro()&&n.callbackNode!==a)return null;var c=os(n,n===kt?Lt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Du(n,c);else{i=c;var d=$e;$e|=2;var p=ng();(kt!==n||Lt!==i)&&(zr=null,Co=tt()+500,Es(n,i));do try{_E();break}catch(S){tg(n,S)}while(!0);Ch(),Au.current=p,$e=d,vt!==null?i=0:(kt=null,Lt=0,i=At)}if(i!==0){if(i===2&&(d=gn(n),d!==0&&(c=d,i=ud(n,d))),i===1)throw a=ja,Es(n,0),Ii(n,c),ln(n,tt()),a;if(i===6)Ii(n,c);else{if(d=n.current.alternate,(c&30)===0&&!gE(d)&&(i=Du(n,c),i===2&&(p=gn(n),p!==0&&(c=p,i=ud(n,p))),i===1))throw a=ja,Es(n,0),Ii(n,c),ln(n,tt()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Is(n,an,zr);break;case 3:if(Ii(n,c),(c&130023424)===c&&(i=od+500-tt(),10<i)){if(os(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Zt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=mh(Is.bind(null,n,an,zr),i);break}Is(n,an,zr);break;case 4:if(Ii(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var v=31-Yt(c);p=1<<v,v=i[v],v>d&&(d=v),c&=~p}if(c=d,c=tt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*mE(c/1960))-c,10<c){n.timeoutHandle=mh(Is.bind(null,n,an,zr),c);break}Is(n,an,zr);break;case 5:Is(n,an,zr);break;default:throw Error(t(329))}}}return ln(n,tt()),n.callbackNode===a?Zm.bind(null,n):null}function ud(n,i){var a=Ua;return n.current.memoizedState.isDehydrated&&(Es(n,i).flags|=256),n=Du(n,i),n!==2&&(i=an,an=a,i!==null&&cd(i)),n}function cd(n){an===null?an=n:an.push.apply(an,n)}function gE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Jn(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ii(n,i){for(i&=~sd,i&=~Cu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Yt(i),c=1<<a;n[a]=-1,i&=~c}}function eg(n){if(($e&6)!==0)throw Error(t(327));Ro();var i=os(n,0);if((i&1)===0)return ln(n,tt()),null;var a=Du(n,i);if(n.tag!==0&&a===2){var c=gn(n);c!==0&&(i=c,a=ud(n,c))}if(a===1)throw a=ja,Es(n,0),Ii(n,i),ln(n,tt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Is(n,an,zr),ln(n,tt()),null}function hd(n,i){var a=$e;$e|=1;try{return n(i)}finally{$e=a,$e===0&&(Co=tt()+500,su&&mi())}}function ws(n){wi!==null&&wi.tag===0&&($e&6)===0&&Ro();var i=$e;$e|=1;var a=On.transition,c=Ue;try{if(On.transition=null,Ue=1,n)return n()}finally{Ue=c,On.transition=a,$e=i,($e&6)===0&&mi()}}function dd(){En=Ao.current,ot(Ao)}function Es(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Ww(a)),vt!==null)for(a=vt.return;a!==null;){var c=a;switch(Eh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ru();break;case 3:Io(),ot(rn),ot(Bt),Oh();break;case 5:Dh(c);break;case 4:Io();break;case 13:ot(ct);break;case 19:ot(ct);break;case 10:Rh(c.type._context);break;case 22:case 23:dd()}a=a.return}if(kt=n,vt=n=Ti(n.current,null),Lt=En=i,At=0,ja=null,sd=Cu=vs=0,an=Ua=null,gs!==null){for(i=0;i<gs.length;i++)if(a=gs[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var v=p.next;p.next=d,c.next=v}a.pending=c}gs=null}return n}function tg(n,i){do{var a=vt;try{if(Ch(),mu.current=vu,gu){for(var c=ht.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}gu=!1}if(_s=0,Pt=St=ht=null,Va=!1,Oa=0,id.current=null,a===null||a.return===null){At=1,ja=i,vt=null;break}e:{var p=n,v=a.return,S=a,N=i;if(i=Lt,S.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var z=N,Q=S,J=Q.tag;if((Q.mode&1)===0&&(J===0||J===11||J===15)){var K=Q.alternate;K?(Q.updateQueue=K.updateQueue,Q.memoizedState=K.memoizedState,Q.lanes=K.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ce=Cm(v);if(ce!==null){ce.flags&=-257,Rm(ce,v,S,p,i),ce.mode&1&&Am(p,z,i),i=ce,N=z;var ge=i.updateQueue;if(ge===null){var _e=new Set;_e.add(N),i.updateQueue=_e}else ge.add(N);break e}else{if((i&1)===0){Am(p,z,i),fd();break e}N=Error(t(426))}}else if(lt&&S.mode&1){var mt=Cm(v);if(mt!==null){(mt.flags&65536)===0&&(mt.flags|=256),Rm(mt,v,S,p,i),Sh(To(N,S));break e}}p=N=To(N,S),At!==4&&(At=2),Ua===null?Ua=[p]:Ua.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var F=Tm(p,N,i);Yp(p,F);break e;case 1:S=N;var V=p.type,U=p.stateNode;if((p.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(vi===null||!vi.has(U)))){p.flags|=65536,i&=-i,p.lanes|=i;var te=Sm(p,S,i);Yp(p,te);break e}}p=p.return}while(p!==null)}ig(a)}catch(we){i=we,vt===a&&a!==null&&(vt=a=a.return);continue}break}while(!0)}function ng(){var n=Au.current;return Au.current=vu,n===null?vu:n}function fd(){(At===0||At===3||At===2)&&(At=4),kt===null||(vs&268435455)===0&&(Cu&268435455)===0||Ii(kt,Lt)}function Du(n,i){var a=$e;$e|=2;var c=ng();(kt!==n||Lt!==i)&&(zr=null,Es(n,i));do try{yE();break}catch(d){tg(n,d)}while(!0);if(Ch(),$e=a,Au.current=c,vt!==null)throw Error(t(261));return kt=null,Lt=0,At}function yE(){for(;vt!==null;)rg(vt)}function _E(){for(;vt!==null&&!kl();)rg(vt)}function rg(n){var i=ag(n.alternate,n,En);n.memoizedProps=n.pendingProps,i===null?ig(n):vt=i,id.current=null}function ig(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=cE(a,i,En),a!==null){vt=a;return}}else{if(a=hE(a,i),a!==null){a.flags&=32767,vt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{At=6,vt=null;return}}if(i=i.sibling,i!==null){vt=i;return}vt=i=n}while(i!==null);At===0&&(At=5)}function Is(n,i,a){var c=Ue,d=On.transition;try{On.transition=null,Ue=1,vE(n,i,a,c)}finally{On.transition=d,Ue=c}return null}function vE(n,i,a,c){do Ro();while(wi!==null);if(($e&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Xe(n,p),n===kt&&(vt=kt=null,Lt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Pu||(Pu=!0,lg(Rn,function(){return Ro(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=On.transition,On.transition=null;var v=Ue;Ue=1;var S=$e;$e|=4,id.current=null,fE(n,a),Km(a,n),jw(fh),ui=!!dh,fh=dh=null,n.current=a,pE(a),Yc(),$e=S,Ue=v,On.transition=p}else n.current=a;if(Pu&&(Pu=!1,wi=n,ku=d),p=n.pendingLanes,p===0&&(vi=null),Dl(a.stateNode),ln(n,tt()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Ru)throw Ru=!1,n=ad,ad=null,n;return(ku&1)!==0&&n.tag!==0&&Ro(),p=n.pendingLanes,(p&1)!==0?n===ld?za++:(za=0,ld=n):za=0,mi(),null}function Ro(){if(wi!==null){var n=ai(ku),i=On.transition,a=Ue;try{if(On.transition=null,Ue=16>n?16:n,wi===null)var c=!1;else{if(n=wi,wi=null,ku=0,($e&6)!==0)throw Error(t(331));var d=$e;for($e|=4,pe=n.current;pe!==null;){var p=pe,v=p.child;if((pe.flags&16)!==0){var S=p.deletions;if(S!==null){for(var N=0;N<S.length;N++){var z=S[N];for(pe=z;pe!==null;){var Q=pe;switch(Q.tag){case 0:case 11:case 15:Fa(8,Q,p)}var J=Q.child;if(J!==null)J.return=Q,pe=J;else for(;pe!==null;){Q=pe;var K=Q.sibling,ce=Q.return;if($m(Q),Q===z){pe=null;break}if(K!==null){K.return=ce,pe=K;break}pe=ce}}}var ge=p.alternate;if(ge!==null){var _e=ge.child;if(_e!==null){ge.child=null;do{var mt=_e.sibling;_e.sibling=null,_e=mt}while(_e!==null)}}pe=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,pe=v;else e:for(;pe!==null;){if(p=pe,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Fa(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,pe=F;break e}pe=p.return}}var V=n.current;for(pe=V;pe!==null;){v=pe;var U=v.child;if((v.subtreeFlags&2064)!==0&&U!==null)U.return=v,pe=U;else e:for(v=V;pe!==null;){if(S=pe,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Su(9,S)}}catch(we){ft(S,S.return,we)}if(S===v){pe=null;break e}var te=S.sibling;if(te!==null){te.return=S.return,pe=te;break e}pe=S.return}}if($e=d,mi(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(ss,n)}catch{}c=!0}return c}finally{Ue=a,On.transition=i}}return!1}function sg(n,i,a){i=To(a,i),i=Tm(n,i,1),n=yi(n,i,1),i=Zt(),n!==null&&(si(n,1,i),ln(n,i))}function ft(n,i,a){if(n.tag===3)sg(n,n,a);else for(;i!==null;){if(i.tag===3){sg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(vi===null||!vi.has(c))){n=To(a,n),n=Sm(i,n,1),i=yi(i,n,1),n=Zt(),i!==null&&(si(i,1,n),ln(i,n));break}}i=i.return}}function wE(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Zt(),n.pingedLanes|=n.suspendedLanes&a,kt===n&&(Lt&a)===a&&(At===4||At===3&&(Lt&130023424)===Lt&&500>tt()-od?Es(n,0):sd|=a),ln(n,i)}function og(n,i){i===0&&((n.mode&1)===0?i=1:(i=Qs,Qs<<=1,(Qs&130023424)===0&&(Qs=4194304)));var a=Zt();n=Fr(n,i),n!==null&&(si(n,i,a),ln(n,a))}function EE(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),og(n,a)}function IE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),og(n,a)}var ag;ag=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||rn.current)on=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return on=!1,uE(n,i,a);on=(n.flags&131072)!==0}else on=!1,lt&&(i.flags&1048576)!==0&&Up(i,au,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Iu(n,i),n=i.pendingProps;var d=mo(i,Bt.current);Eo(i,a),d=bh(null,i,c,n,d,a);var p=Fh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,sn(c)?(p=!0,iu(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Nh(i),d.updater=wu,i.stateNode=d,d._reactInternals=i,Hh(i,c,n,a),i=Kh(null,i,c,!0,p,a)):(i.tag=0,lt&&p&&wh(i),Jt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Iu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=SE(c),n=er(c,n),d){case 0:i=Gh(null,i,c,n,a);break e;case 1:i=Vm(null,i,c,n,a);break e;case 11:i=Pm(null,i,c,n,a);break e;case 14:i=km(null,i,c,er(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:er(c,d),Gh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:er(c,d),Vm(n,i,c,d,a);case 3:e:{if(Om(i),n===null)throw Error(t(387));c=i.pendingProps,p=i.memoizedState,d=p.element,Qp(n,i),fu(i,c,null,a);var v=i.memoizedState;if(c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=To(Error(t(423)),i),i=Lm(n,i,c,a,d);break e}else if(c!==d){d=To(Error(t(424)),i),i=Lm(n,i,c,a,d);break e}else for(wn=di(i.stateNode.containerInfo.firstChild),vn=i,lt=!0,Zn=null,a=Gp(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(_o(),c===d){i=Ur(n,i,a);break e}Jt(n,i,c,a)}i=i.child}return i;case 5:return Jp(i),n===null&&Th(i),c=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,v=d.children,ph(c,d)?v=null:p!==null&&ph(c,p)&&(i.flags|=32),Dm(n,i),Jt(n,i,v,a),i.child;case 6:return n===null&&Th(i),null;case 13:return Mm(n,i,a);case 4:return xh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=vo(i,null,c,a):Jt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:er(c,d),Pm(n,i,c,d,a);case 7:return Jt(n,i,i.pendingProps,a),i.child;case 8:return Jt(n,i,i.pendingProps.children,a),i.child;case 12:return Jt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,p=i.memoizedProps,v=d.value,nt(cu,c._currentValue),c._currentValue=v,p!==null)if(Jn(p.value,v)){if(p.children===d.children&&!rn.current){i=Ur(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var S=p.dependencies;if(S!==null){v=p.child;for(var N=S.firstContext;N!==null;){if(N.context===c){if(p.tag===1){N=jr(-1,a&-a),N.tag=2;var z=p.updateQueue;if(z!==null){z=z.shared;var Q=z.pending;Q===null?N.next=N:(N.next=Q.next,Q.next=N),z.pending=N}}p.lanes|=a,N=p.alternate,N!==null&&(N.lanes|=a),Ph(p.return,a,i),S.lanes|=a;break}N=N.next}}else if(p.tag===10)v=p.type===i.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),Ph(v,a,i),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===i){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}Jt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,Eo(i,a),d=Dn(d),c=c(d),i.flags|=1,Jt(n,i,c,a),i.child;case 14:return c=i.type,d=er(c,i.pendingProps),d=er(c.type,d),km(n,i,c,d,a);case 15:return Nm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:er(c,d),Iu(n,i),i.tag=1,sn(c)?(n=!0,iu(i)):n=!1,Eo(i,a),Em(i,c,d),Hh(i,c,d,a),Kh(null,i,c,!0,n,a);case 19:return Fm(n,i,a);case 22:return xm(n,i,a)}throw Error(t(156,i.tag))};function lg(n,i){return Gs(n,i)}function TE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(n,i,a,c){return new TE(n,i,a,c)}function pd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function SE(n){if(typeof n=="function")return pd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===rt)return 14}return 2}function Ti(n,i){var a=n.alternate;return a===null?(a=Ln(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Vu(n,i,a,c,d,p){var v=2;if(c=n,typeof n=="function")pd(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case O:return Ts(a.children,d,p,i);case I:v=8,d|=8;break;case k:return n=Ln(12,a,i,d|2),n.elementType=k,n.lanes=p,n;case R:return n=Ln(13,a,i,d),n.elementType=R,n.lanes=p,n;case Ve:return n=Ln(19,a,i,d),n.elementType=Ve,n.lanes=p,n;case be:return Ou(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:v=10;break e;case L:v=9;break e;case M:v=11;break e;case rt:v=14;break e;case ut:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Ln(v,a,i,d),i.elementType=n,i.type=c,i.lanes=p,i}function Ts(n,i,a,c){return n=Ln(7,n,c,i),n.lanes=a,n}function Ou(n,i,a,c){return n=Ln(22,n,c,i),n.elementType=be,n.lanes=a,n.stateNode={isHidden:!1},n}function md(n,i,a){return n=Ln(6,n,null,i),n.lanes=a,n}function gd(n,i,a){return i=Ln(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function AE(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ii(0),this.expirationTimes=ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ii(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function yd(n,i,a,c,d,p,v,S,N){return n=new AE(n,i,a,S,N),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Ln(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(p),n}function CE(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ee,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function ug(n){if(!n)return pi;n=n._reactInternals;e:{if(qn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(sn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(sn(a))return bp(n,a,i)}return i}function cg(n,i,a,c,d,p,v,S,N){return n=yd(a,c,!0,n,d,p,v,S,N),n.context=ug(null),a=n.current,c=Zt(),d=Ei(a),p=jr(c,d),p.callback=i??null,yi(a,p,d),n.current.lanes=d,si(n,d,c),ln(n,c),n}function Lu(n,i,a,c){var d=i.current,p=Zt(),v=Ei(d);return a=ug(a),i.context===null?i.context=a:i.pendingContext=a,i=jr(p,v),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=yi(d,i,v),n!==null&&(rr(n,d,v,p),du(n,d,v)),v}function Mu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function hg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function _d(n,i){hg(n,i),(n=n.alternate)&&hg(n,i)}function RE(){return null}var dg=typeof reportError=="function"?reportError:function(n){console.error(n)};function vd(n){this._internalRoot=n}bu.prototype.render=vd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Lu(n,i,null,null)},bu.prototype.unmount=vd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ws(function(){Lu(null,n,null,null)}),i[Or]=null}};function bu(n){this._internalRoot=n}bu.prototype.unstable_scheduleHydration=function(n){if(n){var i=bl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<hr.length&&i!==0&&i<hr[a].priority;a++);hr.splice(a,0,n),a===0&&Ul(n)}};function wd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function fg(){}function PE(n,i,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var z=Mu(v);p.call(z)}}var v=cg(i,c,n,0,null,!1,!1,"",fg);return n._reactRootContainer=v,n[Or]=v.current,Aa(n.nodeType===8?n.parentNode:n),ws(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var z=Mu(N);S.call(z)}}var N=yd(n,0,!1,null,null,!1,!1,"",fg);return n._reactRootContainer=N,n[Or]=N.current,Aa(n.nodeType===8?n.parentNode:n),ws(function(){Lu(i,N,a,c)}),N}function ju(n,i,a,c,d){var p=a._reactRootContainer;if(p){var v=p;if(typeof d=="function"){var S=d;d=function(){var N=Mu(v);S.call(N)}}Lu(i,v,n,d)}else v=PE(a,i,n,d,c);return Mu(v)}Ll=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=ri(i.pendingLanes);a!==0&&(oi(i,a|1),ln(i,tt()),($e&6)===0&&(Co=tt()+500,mi()))}break;case 13:ws(function(){var c=Fr(n,1);if(c!==null){var d=Zt();rr(c,n,1,d)}}),_d(n,1)}},Ys=function(n){if(n.tag===13){var i=Fr(n,134217728);if(i!==null){var a=Zt();rr(i,n,134217728,a)}_d(n,134217728)}},Ml=function(n){if(n.tag===13){var i=Ei(n),a=Fr(n,i);if(a!==null){var c=Zt();rr(a,n,i,c)}_d(n,i)}},bl=function(){return Ue},Fl=function(n,i){var a=Ue;try{return Ue=n,i()}finally{Ue=a}},zs=function(n,i,a){switch(i){case"input":if(Qi(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=nu(c);if(!d)throw Error(t(90));Bn(c),Qi(c,d)}}}break;case"textarea":it(n,a);break;case"select":i=a.value,i!=null&&Ae(n,!!a.multiple,i,!1)}},es=hd,oa=ws;var kE={usingClientEntryPoint:!1,Events:[Pa,fo,nu,ur,sa,hd]},Ba={findFiberByHostInstance:ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NE={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Se.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ua(n),n===null?null:n.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||RE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{ss=Uu.inject(NE),mn=Uu}catch{}}return un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kE,un.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wd(i))throw Error(t(200));return CE(n,i,null,a)},un.createRoot=function(n,i){if(!wd(n))throw Error(t(299));var a=!1,c="",d=dg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=yd(n,1,!1,null,null,a,!1,c,d),n[Or]=i.current,Aa(n.nodeType===8?n.parentNode:n),new vd(i)},un.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ua(i),n=n===null?null:n.stateNode,n},un.flushSync=function(n){return ws(n)},un.hydrate=function(n,i,a){if(!Fu(i))throw Error(t(200));return ju(null,n,i,!0,a)},un.hydrateRoot=function(n,i,a){if(!wd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",v=dg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=cg(i,null,n,1,a??null,d,!1,p,v),n[Or]=i.current,Aa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new bu(i)},un.render=function(n,i,a){if(!Fu(i))throw Error(t(200));return ju(null,n,i,!1,a)},un.unmountComponentAtNode=function(n){if(!Fu(n))throw Error(t(40));return n._reactRootContainer?(ws(function(){ju(null,null,n,!1,function(){n._reactRootContainer=null,n[Or]=null})}),!0):!1},un.unstable_batchedUpdates=hd,un.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Fu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return ju(n,i,a,!1,c)},un.version="18.3.1-next-f1338f8080-20240426",un}var Eg;function UE(){if(Eg)return Td.exports;Eg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Td.exports=jE(),Td.exports}var Ig;function zE(){if(Ig)return zu;Ig=1;var r=UE();return zu.createRoot=r.createRoot,zu.hydrateRoot=r.hydrateRoot,zu}var BE=zE();const $E=()=>{};var Tg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},HE=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],m=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},i_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,m=h?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,E=l>>2,C=(l&3)<<4|m>>4;let P=(m&15)<<2|_>>6,$=_&63;g||($=64,h||(P=64)),s.push(t[E],t[C],t[P],t[$])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(r_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):HE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const C=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||m==null||_==null||C==null)throw new qE;const P=l<<2|m>>4;if(s.push(P),_!==64){const $=m<<4&240|_>>2;if(s.push($),C!==64){const q=_<<6&192|C;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class qE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WE=function(r){const e=r_(r);return i_.encodeByteArray(e,!0)},sc=function(r){return WE(r).replace(/\./g,"")},s_=function(r){try{return i_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=()=>GE().__FIREBASE_DEFAULTS__,QE=()=>{if(typeof process>"u"||typeof Tg>"u")return;const r=Tg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},YE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&s_(r[1]);return e&&JSON.parse(e)},Sc=()=>{try{return $E()||KE()||QE()||YE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},o_=r=>{var e,t;return(t=(e=Sc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},XE=r=>{const e=o_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},a_=()=>{var r;return(r=Sc())===null||r===void 0?void 0:r.config},l_=r=>{var e;return(e=Sc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function u_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[sc(JSON.stringify(t)),sc(JSON.stringify(h)),""].join(".")}const el={};function e0(){const r={prod:[],emulator:[]};for(const e of Object.keys(el))el[e]?r.emulator.push(e):r.prod.push(e);return r}function t0(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Sg=!1;function c_(r,e){if(typeof window>"u"||typeof document>"u"||!qo(window.location.host)||el[r]===e||el[r]||Sg)return;el[r]=e;function t(P){return`__firebase__banner__${P}`}const s="__firebase__banner",l=e0().prod.length>0;function h(){const P=document.getElementById(s);P&&P.remove()}function m(P){P.style.display="flex",P.style.background="#7faaf0",P.style.position="fixed",P.style.bottom="5px",P.style.left="5px",P.style.padding=".5em",P.style.borderRadius="5px",P.style.alignItems="center"}function g(P,$){P.setAttribute("width","24"),P.setAttribute("id",$),P.setAttribute("height","24"),P.setAttribute("viewBox","0 0 24 24"),P.setAttribute("fill","none"),P.style.marginLeft="-6px"}function _(){const P=document.createElement("span");return P.style.cursor="pointer",P.style.marginLeft="16px",P.style.fontSize="24px",P.innerHTML=" &times;",P.onclick=()=>{Sg=!0,h()},P}function E(P,$){P.setAttribute("id",$),P.innerText="Learn more",P.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",P.setAttribute("target","__blank"),P.style.paddingLeft="5px",P.style.textDecoration="underline"}function C(){const P=t0(s),$=t("text"),q=document.getElementById($)||document.createElement("span"),Y=t("learnmore"),W=document.getElementById(Y)||document.createElement("a"),me=t("preprendIcon"),de=document.getElementById(me)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(P.created){const se=P.element;m(se),E(W,Y);const Se=_();g(de,me),se.append(de,q,W,Se),document.body.appendChild(se)}l?(q.innerText="Preview backend disconnected.",de.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(de.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function r0(){var r;const e=(r=Sc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function i0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function s0(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function o0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function a0(){const r=Qt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function l0(){return!r0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function u0(){try{return typeof indexedDB=="object"}catch{return!1}}function c0(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="FirebaseError";class Jr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=h0,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?d0(l,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Jr(o,m,s)}}function d0(r,e){return r.replace(f0,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const f0=/\{\$([^}]+)}/g;function p0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function bi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Ag(l)&&Ag(h)){if(!bi(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Ag(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function qa(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Wa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function m0(r,e){const t=new g0(r,e);return t.subscribe.bind(t)}class g0{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");y0(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Cd),o.error===void 0&&(o.error=Cd),o.complete===void 0&&(o.complete=Cd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function y0(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Cd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(r){return r&&r._delegate?r._delegate:r}class Ns{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new JE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w0(e))try{this.getOrInitializeService({instanceIdentifier:Ss})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ss){return this.instances.has(e)}getOptions(e=Ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);s===m&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:v0(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ss){return this.component?this.component.multipleInstances?e:Ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function v0(r){return r===Ss?void 0:r}function w0(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Fe||(Fe={}));const I0={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},T0=Fe.INFO,S0={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},A0=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=S0[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hf{constructor(e){this.name=e,this._logLevel=T0,this._logHandler=A0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const C0=(r,e)=>e.some(t=>r instanceof t);let Cg,Rg;function R0(){return Cg||(Cg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P0(){return Rg||(Rg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h_=new WeakMap,Fd=new WeakMap,d_=new WeakMap,Rd=new WeakMap,df=new WeakMap;function k0(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(xi(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&h_.set(t,r)}).catch(()=>{}),df.set(e,r),e}function N0(r){if(Fd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Fd.set(r,e)}let jd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Fd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||d_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function x0(r){jd=r(jd)}function D0(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Pd(this),e,...t);return d_.set(s,e.sort?e.sort():[e]),xi(s)}:P0().includes(r)?function(...e){return r.apply(Pd(this),e),xi(h_.get(this))}:function(...e){return xi(r.apply(Pd(this),e))}}function V0(r){return typeof r=="function"?D0(r):(r instanceof IDBTransaction&&N0(r),C0(r,R0())?new Proxy(r,jd):r)}function xi(r){if(r instanceof IDBRequest)return k0(r);if(Rd.has(r))return Rd.get(r);const e=V0(r);return e!==r&&(Rd.set(r,e),df.set(e,r)),e}const Pd=r=>df.get(r);function O0(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),m=xi(h);return s&&h.addEventListener("upgradeneeded",g=>{s(xi(h.result),g.oldVersion,g.newVersion,xi(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const L0=["get","getKey","getAll","getAllKeys","count"],M0=["put","add","delete","clear"],kd=new Map;function Pg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(kd.get(e))return kd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=M0.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||L0.includes(t)))return;const l=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return kd.set(e,l),l}x0(r=>({...r,get:(e,t,s)=>Pg(e,t)||r.get(e,t,s),has:(e,t)=>!!Pg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(F0(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function F0(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ud="@firebase/app",kg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new hf("@firebase/app"),j0="@firebase/app-compat",U0="@firebase/analytics-compat",z0="@firebase/analytics",B0="@firebase/app-check-compat",$0="@firebase/app-check",H0="@firebase/auth",q0="@firebase/auth-compat",W0="@firebase/database",G0="@firebase/data-connect",K0="@firebase/database-compat",Q0="@firebase/functions",Y0="@firebase/functions-compat",X0="@firebase/installations",J0="@firebase/installations-compat",Z0="@firebase/messaging",eI="@firebase/messaging-compat",tI="@firebase/performance",nI="@firebase/performance-compat",rI="@firebase/remote-config",iI="@firebase/remote-config-compat",sI="@firebase/storage",oI="@firebase/storage-compat",aI="@firebase/firestore",lI="@firebase/ai",uI="@firebase/firestore-compat",cI="firebase",hI="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="[DEFAULT]",dI={[Ud]:"fire-core",[j0]:"fire-core-compat",[z0]:"fire-analytics",[U0]:"fire-analytics-compat",[$0]:"fire-app-check",[B0]:"fire-app-check-compat",[H0]:"fire-auth",[q0]:"fire-auth-compat",[W0]:"fire-rtdb",[G0]:"fire-data-connect",[K0]:"fire-rtdb-compat",[Q0]:"fire-fn",[Y0]:"fire-fn-compat",[X0]:"fire-iid",[J0]:"fire-iid-compat",[Z0]:"fire-fcm",[eI]:"fire-fcm-compat",[tI]:"fire-perf",[nI]:"fire-perf-compat",[rI]:"fire-rc",[iI]:"fire-rc-compat",[sI]:"fire-gcs",[oI]:"fire-gcs-compat",[aI]:"fire-fst",[uI]:"fire-fst-compat",[lI]:"fire-vertex","fire-js":"fire-js",[cI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=new Map,fI=new Map,Bd=new Map;function Ng(r,e){try{r.container.addComponent(e)}catch(t){Kr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function bo(r){const e=r.name;if(Bd.has(e))return Kr.debug(`There were multiple attempts to register component ${e}.`),!1;Bd.set(e,r);for(const t of ol.values())Ng(t,r);for(const t of fI.values())Ng(t,r);return!0}function ff(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function bn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new gl("app","Firebase",pI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=hI;function f_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:zd,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw Di.create("bad-app-name",{appName:String(o)});if(t||(t=a_()),!t)throw Di.create("no-options");const l=ol.get(o);if(l){if(bi(t,l.options)&&bi(s,l.config))return l;throw Di.create("duplicate-app",{appName:o})}const h=new E0(o);for(const g of Bd.values())h.addComponent(g);const m=new mI(t,s,h);return ol.set(o,m),m}function pf(r=zd){const e=ol.get(r);if(!e&&r===zd&&a_())return f_();if(!e)throw Di.create("no-app",{appName:r});return e}function gI(){return Array.from(ol.values())}function Vi(r,e,t){var s;let o=(s=dI[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const m=[`Unable to register library "${o}" with version "${e}":`];l&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kr.warn(m.join(" "));return}bo(new Ns(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="firebase-heartbeat-database",_I=1,al="firebase-heartbeat-store";let Nd=null;function p_(){return Nd||(Nd=O0(yI,_I,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(al)}catch(t){console.warn(t)}}}}).catch(r=>{throw Di.create("idb-open",{originalErrorMessage:r.message})})),Nd}async function vI(r){try{const t=(await p_()).transaction(al),s=await t.objectStore(al).get(m_(r));return await t.done,s}catch(e){if(e instanceof Jr)Kr.warn(e.message);else{const t=Di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kr.warn(t.message)}}}async function xg(r,e){try{const s=(await p_()).transaction(al,"readwrite");await s.objectStore(al).put(e,m_(r)),await s.done}catch(t){if(t instanceof Jr)Kr.warn(t.message);else{const s=Di.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Kr.warn(s.message)}}}function m_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=1024,EI=30;class II{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new SI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Dg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>EI){const h=AI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Kr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Dg(),{heartbeatsToSend:s,unsentEntries:o}=TI(this._heartbeatsCache.heartbeats),l=sc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Kr.warn(t),""}}}function Dg(){return new Date().toISOString().substring(0,10)}function TI(r,e=wI){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Vg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Vg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class SI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return u0()?c0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Vg(r){return sc(JSON.stringify({version:2,heartbeats:r})).length}function AI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(r){bo(new Ns("platform-logger",e=>new b0(e),"PRIVATE")),bo(new Ns("heartbeat",e=>new II(e),"PRIVATE")),Vi(Ud,kg,r),Vi(Ud,kg,"esm2017"),Vi("fire-js","")}CI("");var RI="firebase",PI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vi(RI,PI,"app");function mf(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function g_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kI=g_,y_=new gl("auth","Firebase",g_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new hf("@firebase/auth");function NI(r,...e){oc.logLevel<=Fe.WARN&&oc.warn(`Auth (${Wo}): ${r}`,...e)}function Ku(r,...e){oc.logLevel<=Fe.ERROR&&oc.error(`Auth (${Wo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(r,...e){throw yf(r,...e)}function or(r,...e){return yf(r,...e)}function gf(r,e,t){const s=Object.assign(Object.assign({},kI()),{[e]:t});return new gl("auth","Firebase",s).create(e,{appName:r.name})}function Oi(r){return gf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xI(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Un(r,"argument-error"),gf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return y_.create(r,...e)}function Pe(r,e,...t){if(!r)throw yf(e,...t)}function qr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ku(e),new Error(e)}function Qr(r,e){r||qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function DI(){return Og()==="http:"||Og()==="https:"}function Og(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DI()||s0()||"connection"in navigator)?navigator.onLine:!0}function OI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qr(t>e,"Short delay should be less than long delay!"),this.isMobile=n0()||o0()}get(){return VI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(r,e){Qr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bI=new _l(3e4,6e4);function Os(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function qi(r,e,t,s,o={}){return v_(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const m=yl(Object.assign({key:r.config.apiKey},h)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _=Object.assign({method:e,headers:g},l);return i0()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&qo(r.emulatorConfig.host)&&(_.credentials="include"),__.fetch()(await w_(r,r.config.apiHost,t,m),_)})}async function v_(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},LI),e);try{const o=new jI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Bu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Bu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Bu(r,"user-disabled",h);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw gf(r,E,_);Un(r,E)}}catch(o){if(o instanceof Jr)throw o;Un(r,"network-request-failed",{message:String(o)})}}async function Ac(r,e,t,s,o={}){const l=await qi(r,e,t,s,o);return"mfaPendingCredential"in l&&Un(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function w_(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?_f(r.config,o):`${r.config.apiScheme}://${o}`;return MI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function FI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(or(this.auth,"network-request-failed")),bI.get())})}}function Bu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=or(r,e,s);return o.customData._tokenResponse=t,o}function Lg(r){return r!==void 0&&r.enterprise!==void 0}class UI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return FI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zI(r,e){return qi(r,"GET","/v2/recaptchaConfig",Os(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(r,e){return qi(r,"POST","/v1/accounts:delete",e)}async function ac(r,e){return qi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $I(r,e=!1){const t=jt(r),s=await t.getIdToken(e),o=vf(s);Pe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:tl(xd(o.auth_time)),issuedAtTime:tl(xd(o.iat)),expirationTime:tl(xd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function xd(r){return Number(r)*1e3}function vf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Ku("JWT malformed, contained fewer than 3 sections"),null;try{const o=s_(t);return o?JSON.parse(o):(Ku("Failed to decode base64 JWT payload"),null)}catch(o){return Ku("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Mg(r){const e=vf(r);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Jr&&HI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function HI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(r){var e;const t=r.auth,s=await r.getIdToken(),o=await ll(r,ac(t,{idToken:s}));Pe(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?E_(l.providerUserInfo):[],m=GI(r.providerData,h),g=r.isAnonymous,_=!(r.email&&l.passwordHash)&&!(m!=null&&m.length),E=g?_:!1,C={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:m,metadata:new Hd(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,C)}async function WI(r){const e=jt(r);await lc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GI(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function E_(r){return r.map(e=>{var{providerId:t}=e,s=mf(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(r,e){const t=await v_(r,{},async()=>{const s=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await w_(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&qo(r.emulatorConfig.host)&&(g.credentials="include"),__.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function QI(r,e){return qi(r,"POST","/v2/accounts:revokeToken",Os(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=Mg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await KI(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new Do;return s&&(Pe(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Pe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Pe(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(r,e){Pe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class sr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=mf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Hd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ll(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $I(this,e)}reload(){return WI(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await lc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await ll(this,BI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,h,m,g,_,E;const C=(s=t.displayName)!==null&&s!==void 0?s:void 0,P=(o=t.email)!==null&&o!==void 0?o:void 0,$=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,q=(h=t.photoURL)!==null&&h!==void 0?h:void 0,Y=(m=t.tenantId)!==null&&m!==void 0?m:void 0,W=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,me=(_=t.createdAt)!==null&&_!==void 0?_:void 0,de=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:se,emailVerified:Se,isAnonymous:qe,providerData:Ee,stsTokenManager:O}=t;Pe(se&&O,e,"internal-error");const I=Do.fromJSON(this.name,O);Pe(typeof se=="string",e,"internal-error"),Ai(C,e.name),Ai(P,e.name),Pe(typeof Se=="boolean",e,"internal-error"),Pe(typeof qe=="boolean",e,"internal-error"),Ai($,e.name),Ai(q,e.name),Ai(Y,e.name),Ai(W,e.name),Ai(me,e.name),Ai(de,e.name);const k=new sr({uid:se,auth:e,email:P,emailVerified:Se,displayName:C,isAnonymous:qe,photoURL:q,phoneNumber:$,tenantId:Y,stsTokenManager:I,createdAt:me,lastLoginAt:de});return Ee&&Array.isArray(Ee)&&(k.providerData=Ee.map(x=>Object.assign({},x))),W&&(k._redirectEventId=W),k}static async _fromIdTokenResponse(e,t,s=!1){const o=new Do;o.updateFromServerResponse(t);const l=new sr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await lc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Pe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?E_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),m=new Do;m.updateFromIdToken(s);const g=new sr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Hd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=new Map;function Wr(r){Qr(r instanceof Function,"Expected a class definition");let e=bg.get(r);return e?(Qr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,bg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}I_.type="NONE";const Fg=I_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(r,e,t){return`firebase:${r}:${e}:${t}`}class Vo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Qu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Qu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ac(this.auth,{idToken:e}).catch(()=>{});return t?sr._fromGetAccountInfoResponse(this.auth,t,e):null}return sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Vo(Wr(Fg),e,s);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||Wr(Fg);const h=Qu(s,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const E=await _._get(h);if(E){let C;if(typeof E=="string"){const P=await ac(e,{idToken:E}).catch(()=>{});if(!P)break;C=await sr._fromGetAccountInfoResponse(e,P,E)}else C=sr._fromJSON(e,E);_!==l&&(m=C),l=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Vo(l,e,s):(l=g[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(h)}catch{}})),new Vo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(T_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(P_(e))return"Blackberry";if(k_(e))return"Webos";if(S_(e))return"Safari";if((e.includes("chrome/")||A_(e))&&!e.includes("edge/"))return"Chrome";if(R_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function T_(r=Qt()){return/firefox\//i.test(r)}function S_(r=Qt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A_(r=Qt()){return/crios\//i.test(r)}function C_(r=Qt()){return/iemobile/i.test(r)}function R_(r=Qt()){return/android/i.test(r)}function P_(r=Qt()){return/blackberry/i.test(r)}function k_(r=Qt()){return/webos/i.test(r)}function wf(r=Qt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function YI(r=Qt()){var e;return wf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XI(){return a0()&&document.documentMode===10}function N_(r=Qt()){return wf(r)||R_(r)||k_(r)||P_(r)||/windows phone/i.test(r)||C_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(r,e=[]){let t;switch(r){case"Browser":t=jg(Qt());break;case"Worker":t=`${jg(Qt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,m)=>{try{const g=e(l);h(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(r,e={}){return qi(r,"GET","/v2/passwordPolicy",Os(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=6;class tT{constructor(e){var t,s,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:eT,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,h,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ug(this),this.idTokenSubscription=new Ug(this),this.beforeStateQueue=new JI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=y_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wr(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ac(this,{idToken:e}),s=await sr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(bn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(Oi(this));const t=e?jt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZI(this),t=new tT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await QI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wr(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[Wr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&NI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ls(r){return jt(r)}class Ug{constructor(e){this.auth=e,this.observer=null,this.addObserver=m0(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rT(r){Cc=r}function D_(r){return Cc.loadJS(r)}function iT(){return Cc.recaptchaEnterpriseScript}function sT(){return Cc.gapiScript}function oT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class aT{constructor(){this.enterprise=new lT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lT{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const uT="recaptcha-enterprise",V_="NO_RECAPTCHA";class cT{constructor(e){this.type=uT,this.auth=Ls(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,m)=>{zI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new UI(g);return l.tenantId==null?l._agentRecaptchaConfig=_:l._tenantRecaptchaConfigs[l.tenantId]=_,h(_.siteKey)}}).catch(g=>{m(g)})})}function o(l,h,m){const g=window.grecaptcha;Lg(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(_=>{h(_)}).catch(()=>{h(V_)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aT().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(m=>{if(!t&&Lg(window.grecaptcha))o(m,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=iT();g.length!==0&&(g+=m),D_(g).then(()=>{o(m,l,h)}).catch(_=>{h(_)})}}).catch(m=>{h(m)})})}}async function zg(r,e,t,s=!1,o=!1){const l=new cT(r);let h;if(o)h=V_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Bg(r,e,t,s,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await zg(r,e,t,t==="getOobCode");return s(r,h)}else return s(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await zg(r,e,t,t==="getOobCode");return s(r,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(r,e){const t=ff(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(bi(l,e??{}))return o;Un(o,"already-initialized")}return t.initialize({options:e})}function dT(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Wr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function fT(r,e,t){const s=Ls(r);Pe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=O_(e),{host:h,port:m}=pT(e),g=m===null?"":`:${m}`,_={url:`${l}//${h}${g}/`},E=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Pe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Pe(bi(_,s.config.emulator)&&bi(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,qo(h)?(u_(`${l}//${h}${g}`),c_("Auth",!0)):mT()}function O_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function pT(r){const e=O_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:$g(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:$g(h)}}}function $g(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function mT(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qr("not implemented")}_getIdTokenResponse(e){return qr("not implemented")}_linkToIdToken(e,t){return qr("not implemented")}_getReauthenticationResolver(e){return qr("not implemented")}}async function gT(r,e){return qi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(r,e){return Ac(r,"POST","/v1/accounts:signInWithPassword",Os(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(r,e){return Ac(r,"POST","/v1/accounts:signInWithEmailLink",Os(r,e))}async function vT(r,e){return Ac(r,"POST","/v1/accounts:signInWithEmailLink",Os(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends Ef{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ul(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ul(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bg(e,t,"signInWithPassword",yT);case"emailLink":return _T(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bg(e,s,"signUpPassword",gT);case"emailLink":return vT(e,{idToken:t,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(r,e){return Ac(r,"POST","/v1/accounts:signInWithIdp",Os(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="http://localhost";class xs extends Ef{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Un("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=mf(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new xs(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Oo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:wT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IT(r){const e=qa(Wa(r)).link,t=e?qa(Wa(e)).deep_link_id:null,s=qa(Wa(r)).deep_link_id;return(s?qa(Wa(s)).link:null)||s||t||e||r}class If{constructor(e){var t,s,o,l,h,m;const g=qa(Wa(e)),_=(t=g.apiKey)!==null&&t!==void 0?t:null,E=(s=g.oobCode)!==null&&s!==void 0?s:null,C=ET((o=g.mode)!==null&&o!==void 0?o:null);Pe(_&&E&&C,"argument-error"),this.apiKey=_,this.operation=C,this.code=E,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=g.lang)!==null&&h!==void 0?h:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=IT(e);try{return new If(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.providerId=Go.PROVIDER_ID}static credential(e,t){return ul._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=If.parseLink(t);return Pe(s,"argument-error"),ul._fromEmailAndCode(e,s.code,s.tenantId)}}Go.PROVIDER_ID="password";Go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends Tf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends vl{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xs._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Hr.credential(t,s)}catch{return null}}}Hr.GOOGLE_SIGN_IN_METHOD="google.com";Hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends vl{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.GITHUB_SIGN_IN_METHOD="github.com";Pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends vl{constructor(){super("twitter.com")}static credential(e,t){return xs._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ki.credential(t,s)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await sr._fromIdTokenResponse(e,s,o),h=Hg(s);return new Fo({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Hg(s);return new Fo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Hg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends Jr{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,uc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new uc(e,t,s,o)}}function L_(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?uc._fromErrorAndOperation(r,l,e,s):l})}async function TT(r,e,t=!1){const s=await ll(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Fo._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ST(r,e,t=!1){const{auth:s}=r;if(bn(s.app))return Promise.reject(Oi(s));const o="reauthenticate";try{const l=await ll(r,L_(s,o,e,r),t);Pe(l.idToken,s,"internal-error");const h=vf(l.idToken);Pe(h,s,"internal-error");const{sub:m}=h;return Pe(r.uid===m,s,"user-mismatch"),Fo._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Un(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M_(r,e,t=!1){if(bn(r.app))return Promise.reject(Oi(r));const s="signIn",o=await L_(r,s,e),l=await Fo._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function AT(r,e){return M_(Ls(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(r){const e=Ls(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function RT(r,e,t){return bn(r.app)?Promise.reject(Oi(r)):AT(jt(r),Go.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&CT(r),s})}function PT(r,e,t,s){return jt(r).onIdTokenChanged(e,t,s)}function kT(r,e,t){return jt(r).beforeAuthStateChanged(e,t)}function NT(r,e,t,s){return jt(r).onAuthStateChanged(e,t,s)}const cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cc,"1"),this.storage.removeItem(cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=1e3,DT=10;class F_ extends b_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=N_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);XI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,DT):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},xT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}F_.type="LOCAL";const VT=F_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_ extends b_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}j_.type="SESSION";const U_=j_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Rc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async _=>_(t.origin,l)),g=await OT(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,g)=>{const _=Sf("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(C){const P=C;if(P.data.eventId===_)switch(P.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(P.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return window}function MT(r){Ir().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(){return typeof Ir().WorkerGlobalScope<"u"&&typeof Ir().importScripts=="function"}async function bT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FT(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function jT(){return z_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="firebaseLocalStorageDb",UT=1,hc="firebaseLocalStorage",$_="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Pc(r,e){return r.transaction([hc],e?"readwrite":"readonly").objectStore(hc)}function zT(){const r=indexedDB.deleteDatabase(B_);return new wl(r).toPromise()}function qd(){const r=indexedDB.open(B_,UT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(hc,{keyPath:$_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(hc)?e(s):(s.close(),await zT(),e(await qd()))})})}async function qg(r,e,t){const s=Pc(r,!0).put({[$_]:e,value:t});return new wl(s).toPromise()}async function BT(r,e){const t=Pc(r,!1).get(e),s=await new wl(t).toPromise();return s===void 0?null:s.value}function Wg(r,e){const t=Pc(r,!0).delete(e);return new wl(t).toPromise()}const $T=800,HT=3;class H_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>HT)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return z_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rc._getInstance(jT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await bT(),!this.activeServiceWorker)return;this.sender=new LT(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qd();return await qg(e,cc,"1"),await Wg(e,cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>qg(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>BT(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Pc(o,!1).getAll();return new wl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$T)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}H_.type="LOCAL";const qT=H_;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(r,e){return e?Wr(e):(Pe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends Ef{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WT(r){return M_(r.auth,new Af(r),r.bypassAuthState)}function GT(r){const{auth:e,user:t}=r;return Pe(t,e,"internal-error"),ST(t,new Af(r),r.bypassAuthState)}async function KT(r){const{auth:e,user:t}=r;return Pe(t,e,"internal-error"),TT(t,new Af(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WT;case"linkViaPopup":case"linkViaRedirect":return KT;case"reauthViaPopup":case"reauthViaRedirect":return GT;default:Un(this.auth,"internal-error")}}resolve(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=new _l(2e3,1e4);async function YT(r,e,t){if(bn(r.app))return Promise.reject(or(r,"operation-not-supported-in-this-environment"));const s=Ls(r);xI(r,e,Tf);const o=q_(s,t);return new As(s,"signInViaPopup",e,o).executeNotNull()}class As extends W_{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,As.currentPopupAction&&As.currentPopupAction.cancel(),As.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Qr(this.filter.length===1,"Popup operations only handle one event");const e=Sf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,As.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QT.get())};e()}}As.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="pendingRedirect",Yu=new Map;class JT extends W_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Yu.get(this.auth._key());if(!e){try{const s=await ZT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Yu.set(this.auth._key(),e)}return this.bypassAuthState||Yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZT(r,e){const t=nS(e),s=tS(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function eS(r,e){Yu.set(r._key(),e)}function tS(r){return Wr(r._redirectPersistence)}function nS(r){return Qu(XT,r.config.apiKey,r.name)}async function rS(r,e,t=!1){if(bn(r.app))return Promise.reject(Oi(r));const s=Ls(r),o=q_(s,e),h=await new JT(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=10*60*1e3;class sS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!G_(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(or(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gg(e))}saveEventToCache(e){this.cachedEventUids.add(Gg(e)),this.lastProcessedEventTime=Date.now()}}function Gg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function G_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aS(r,e={}){return qi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uS=/^https?/;async function cS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await aS(r);for(const t of e)try{if(hS(t))return}catch{}Un(r,"unauthorized-domain")}function hS(r){const e=$d(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!uS.test(t))return!1;if(lS.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=new _l(3e4,6e4);function Kg(){const r=Ir().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function fS(r){return new Promise((e,t)=>{var s,o,l;function h(){Kg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kg(),t(or(r,"network-request-failed"))},timeout:dS.get()})}if(!((o=(s=Ir().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Ir().gapi)===null||l===void 0)&&l.load)h();else{const m=oT("iframefcb");return Ir()[m]=()=>{gapi.load?h():t(or(r,"network-request-failed"))},D_(`${sT()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function pS(r){return Xu=Xu||fS(r),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=new _l(5e3,15e3),gS="__/auth/iframe",yS="emulator/auth/iframe",_S={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wS(r){const e=r.config;Pe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?_f(e,yS):`https://${r.config.authDomain}/${gS}`,s={apiKey:e.apiKey,appName:r.name,v:Wo},o=vS.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${yl(s).slice(1)}`}async function ES(r){const e=await pS(r),t=Ir().gapi;return Pe(t,r,"internal-error"),e.open({where:document.body,url:wS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_S,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=or(r,"network-request-failed"),m=Ir().setTimeout(()=>{l(h)},mS.get());function g(){Ir().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TS=500,SS=600,AS="_blank",CS="http://localhost";class Qg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RS(r,e,t,s=TS,o=SS){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g=Object.assign(Object.assign({},IS),{width:s.toString(),height:o.toString(),top:l,left:h}),_=Qt().toLowerCase();t&&(m=A_(_)?AS:t),T_(_)&&(e=e||CS,g.scrollbars="yes");const E=Object.entries(g).reduce((P,[$,q])=>`${P}${$}=${q},`,"");if(YI(_)&&m!=="_self")return PS(e||"",m),new Qg(null);const C=window.open(e||"",m,E);Pe(C,r,"popup-blocked");try{C.focus()}catch{}return new Qg(C)}function PS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="__/auth/handler",NS="emulator/auth/handler",xS=encodeURIComponent("fac");async function Yg(r,e,t,s,o,l){Pe(r.config.authDomain,r,"auth-domain-config-required"),Pe(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Wo,eventId:o};if(e instanceof Tf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",p0(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,C]of Object.entries({}))h[E]=C}if(e instanceof vl){const E=e.getScopes().filter(C=>C!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),_=g?`#${xS}=${encodeURIComponent(g)}`:"";return`${DS(r)}?${yl(m).slice(1)}${_}`}function DS({config:r}){return r.emulator?_f(r,NS):`https://${r.authDomain}/${kS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="webStorageSupport";class VS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U_,this._completeRedirectFn=rS,this._overrideRedirectResult=eS}async _openPopup(e,t,s,o){var l;Qr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Yg(e,t,s,$d(),o);return RS(e,h,Sf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Yg(e,t,s,$d(),o);return MT(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Qr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await ES(e),s=new sS(e);return t.register("authEvent",o=>(Pe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Dd,{type:Dd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Dd];h!==void 0&&t(!!h),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return N_()||S_()||wf()}}const OS=VS;var Xg="@firebase/auth",Jg="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bS(r){bo(new Ns("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;Pe(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x_(r)},_=new nT(s,o,l,g);return dT(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),bo(new Ns("auth-internal",e=>{const t=Ls(e.getProvider("auth").getImmediate());return(s=>new LS(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(Xg,Jg,MS(r)),Vi(Xg,Jg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=5*60,jS=l_("authIdTokenMaxAge")||FS;let Zg=null;const US=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>jS)return;const o=t==null?void 0:t.token;Zg!==o&&(Zg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function K_(r=pf()){const e=ff(r,"auth");if(e.isInitialized())return e.getImmediate();const t=hT(r,{popupRedirectResolver:OS,persistence:[qT,VT,U_]}),s=l_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=US(l.toString());kT(t,h,()=>h(t.currentUser)),PT(t,m=>h(m))}}const o=o_("auth");return o&&fT(t,`http://${o}`),t}function zS(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}rT({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=or("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",zS().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bS("Browser");var ey=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Li,Q_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,I){function k(){}k.prototype=I.prototype,O.D=I.prototype,O.prototype=new k,O.prototype.constructor=O,O.C=function(x,L,M){for(var R=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)R[Ve-2]=arguments[Ve];return I.prototype[L].apply(x,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,I,k){k||(k=0);var x=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)x[L]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(L=0;16>L;++L)x[L]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=O.g[0],k=O.g[1],L=O.g[2];var M=O.g[3],R=I+(M^k&(L^M))+x[0]+3614090360&4294967295;I=k+(R<<7&4294967295|R>>>25),R=M+(L^I&(k^L))+x[1]+3905402710&4294967295,M=I+(R<<12&4294967295|R>>>20),R=L+(k^M&(I^k))+x[2]+606105819&4294967295,L=M+(R<<17&4294967295|R>>>15),R=k+(I^L&(M^I))+x[3]+3250441966&4294967295,k=L+(R<<22&4294967295|R>>>10),R=I+(M^k&(L^M))+x[4]+4118548399&4294967295,I=k+(R<<7&4294967295|R>>>25),R=M+(L^I&(k^L))+x[5]+1200080426&4294967295,M=I+(R<<12&4294967295|R>>>20),R=L+(k^M&(I^k))+x[6]+2821735955&4294967295,L=M+(R<<17&4294967295|R>>>15),R=k+(I^L&(M^I))+x[7]+4249261313&4294967295,k=L+(R<<22&4294967295|R>>>10),R=I+(M^k&(L^M))+x[8]+1770035416&4294967295,I=k+(R<<7&4294967295|R>>>25),R=M+(L^I&(k^L))+x[9]+2336552879&4294967295,M=I+(R<<12&4294967295|R>>>20),R=L+(k^M&(I^k))+x[10]+4294925233&4294967295,L=M+(R<<17&4294967295|R>>>15),R=k+(I^L&(M^I))+x[11]+2304563134&4294967295,k=L+(R<<22&4294967295|R>>>10),R=I+(M^k&(L^M))+x[12]+1804603682&4294967295,I=k+(R<<7&4294967295|R>>>25),R=M+(L^I&(k^L))+x[13]+4254626195&4294967295,M=I+(R<<12&4294967295|R>>>20),R=L+(k^M&(I^k))+x[14]+2792965006&4294967295,L=M+(R<<17&4294967295|R>>>15),R=k+(I^L&(M^I))+x[15]+1236535329&4294967295,k=L+(R<<22&4294967295|R>>>10),R=I+(L^M&(k^L))+x[1]+4129170786&4294967295,I=k+(R<<5&4294967295|R>>>27),R=M+(k^L&(I^k))+x[6]+3225465664&4294967295,M=I+(R<<9&4294967295|R>>>23),R=L+(I^k&(M^I))+x[11]+643717713&4294967295,L=M+(R<<14&4294967295|R>>>18),R=k+(M^I&(L^M))+x[0]+3921069994&4294967295,k=L+(R<<20&4294967295|R>>>12),R=I+(L^M&(k^L))+x[5]+3593408605&4294967295,I=k+(R<<5&4294967295|R>>>27),R=M+(k^L&(I^k))+x[10]+38016083&4294967295,M=I+(R<<9&4294967295|R>>>23),R=L+(I^k&(M^I))+x[15]+3634488961&4294967295,L=M+(R<<14&4294967295|R>>>18),R=k+(M^I&(L^M))+x[4]+3889429448&4294967295,k=L+(R<<20&4294967295|R>>>12),R=I+(L^M&(k^L))+x[9]+568446438&4294967295,I=k+(R<<5&4294967295|R>>>27),R=M+(k^L&(I^k))+x[14]+3275163606&4294967295,M=I+(R<<9&4294967295|R>>>23),R=L+(I^k&(M^I))+x[3]+4107603335&4294967295,L=M+(R<<14&4294967295|R>>>18),R=k+(M^I&(L^M))+x[8]+1163531501&4294967295,k=L+(R<<20&4294967295|R>>>12),R=I+(L^M&(k^L))+x[13]+2850285829&4294967295,I=k+(R<<5&4294967295|R>>>27),R=M+(k^L&(I^k))+x[2]+4243563512&4294967295,M=I+(R<<9&4294967295|R>>>23),R=L+(I^k&(M^I))+x[7]+1735328473&4294967295,L=M+(R<<14&4294967295|R>>>18),R=k+(M^I&(L^M))+x[12]+2368359562&4294967295,k=L+(R<<20&4294967295|R>>>12),R=I+(k^L^M)+x[5]+4294588738&4294967295,I=k+(R<<4&4294967295|R>>>28),R=M+(I^k^L)+x[8]+2272392833&4294967295,M=I+(R<<11&4294967295|R>>>21),R=L+(M^I^k)+x[11]+1839030562&4294967295,L=M+(R<<16&4294967295|R>>>16),R=k+(L^M^I)+x[14]+4259657740&4294967295,k=L+(R<<23&4294967295|R>>>9),R=I+(k^L^M)+x[1]+2763975236&4294967295,I=k+(R<<4&4294967295|R>>>28),R=M+(I^k^L)+x[4]+1272893353&4294967295,M=I+(R<<11&4294967295|R>>>21),R=L+(M^I^k)+x[7]+4139469664&4294967295,L=M+(R<<16&4294967295|R>>>16),R=k+(L^M^I)+x[10]+3200236656&4294967295,k=L+(R<<23&4294967295|R>>>9),R=I+(k^L^M)+x[13]+681279174&4294967295,I=k+(R<<4&4294967295|R>>>28),R=M+(I^k^L)+x[0]+3936430074&4294967295,M=I+(R<<11&4294967295|R>>>21),R=L+(M^I^k)+x[3]+3572445317&4294967295,L=M+(R<<16&4294967295|R>>>16),R=k+(L^M^I)+x[6]+76029189&4294967295,k=L+(R<<23&4294967295|R>>>9),R=I+(k^L^M)+x[9]+3654602809&4294967295,I=k+(R<<4&4294967295|R>>>28),R=M+(I^k^L)+x[12]+3873151461&4294967295,M=I+(R<<11&4294967295|R>>>21),R=L+(M^I^k)+x[15]+530742520&4294967295,L=M+(R<<16&4294967295|R>>>16),R=k+(L^M^I)+x[2]+3299628645&4294967295,k=L+(R<<23&4294967295|R>>>9),R=I+(L^(k|~M))+x[0]+4096336452&4294967295,I=k+(R<<6&4294967295|R>>>26),R=M+(k^(I|~L))+x[7]+1126891415&4294967295,M=I+(R<<10&4294967295|R>>>22),R=L+(I^(M|~k))+x[14]+2878612391&4294967295,L=M+(R<<15&4294967295|R>>>17),R=k+(M^(L|~I))+x[5]+4237533241&4294967295,k=L+(R<<21&4294967295|R>>>11),R=I+(L^(k|~M))+x[12]+1700485571&4294967295,I=k+(R<<6&4294967295|R>>>26),R=M+(k^(I|~L))+x[3]+2399980690&4294967295,M=I+(R<<10&4294967295|R>>>22),R=L+(I^(M|~k))+x[10]+4293915773&4294967295,L=M+(R<<15&4294967295|R>>>17),R=k+(M^(L|~I))+x[1]+2240044497&4294967295,k=L+(R<<21&4294967295|R>>>11),R=I+(L^(k|~M))+x[8]+1873313359&4294967295,I=k+(R<<6&4294967295|R>>>26),R=M+(k^(I|~L))+x[15]+4264355552&4294967295,M=I+(R<<10&4294967295|R>>>22),R=L+(I^(M|~k))+x[6]+2734768916&4294967295,L=M+(R<<15&4294967295|R>>>17),R=k+(M^(L|~I))+x[13]+1309151649&4294967295,k=L+(R<<21&4294967295|R>>>11),R=I+(L^(k|~M))+x[4]+4149444226&4294967295,I=k+(R<<6&4294967295|R>>>26),R=M+(k^(I|~L))+x[11]+3174756917&4294967295,M=I+(R<<10&4294967295|R>>>22),R=L+(I^(M|~k))+x[2]+718787259&4294967295,L=M+(R<<15&4294967295|R>>>17),R=k+(M^(L|~I))+x[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(L+(R<<21&4294967295|R>>>11))&4294967295,O.g[2]=O.g[2]+L&4294967295,O.g[3]=O.g[3]+M&4294967295}s.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var k=I-this.blockSize,x=this.B,L=this.h,M=0;M<I;){if(L==0)for(;M<=k;)o(this,O,M),M+=this.blockSize;if(typeof O=="string"){for(;M<I;)if(x[L++]=O.charCodeAt(M++),L==this.blockSize){o(this,x),L=0;break}}else for(;M<I;)if(x[L++]=O[M++],L==this.blockSize){o(this,x),L=0;break}}this.h=L,this.o+=I},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var k=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=k&255,k/=256;for(this.u(O),O=Array(16),I=k=0;4>I;++I)for(var x=0;32>x;x+=8)O[k++]=this.g[I]>>>x&255;return O};function l(O,I){var k=m;return Object.prototype.hasOwnProperty.call(k,O)?k[O]:k[O]=I(O)}function h(O,I){this.h=I;for(var k=[],x=!0,L=O.length-1;0<=L;L--){var M=O[L]|0;x&&M==I||(k[L]=M,x=!1)}this.g=k}var m={};function g(O){return-128<=O&&128>O?l(O,function(I){return new h([I|0],0>I?-1:0)}):new h([O|0],0>O?-1:0)}function _(O){if(isNaN(O)||!isFinite(O))return C;if(0>O)return W(_(-O));for(var I=[],k=1,x=0;O>=k;x++)I[x]=O/k|0,k*=4294967296;return new h(I,0)}function E(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return W(E(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=_(Math.pow(I,8)),x=C,L=0;L<O.length;L+=8){var M=Math.min(8,O.length-L),R=parseInt(O.substring(L,L+M),I);8>M?(M=_(Math.pow(I,M)),x=x.j(M).add(_(R))):(x=x.j(k),x=x.add(_(R)))}return x}var C=g(0),P=g(1),$=g(16777216);r=h.prototype,r.m=function(){if(Y(this))return-W(this).m();for(var O=0,I=1,k=0;k<this.g.length;k++){var x=this.i(k);O+=(0<=x?x:4294967296+x)*I,I*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(q(this))return"0";if(Y(this))return"-"+W(this).toString(O);for(var I=_(Math.pow(O,6)),k=this,x="";;){var L=Se(k,I).g;k=me(k,L.j(I));var M=((0<k.g.length?k.g[0]:k.h)>>>0).toString(O);if(k=L,q(k))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function q(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function Y(O){return O.h==-1}r.l=function(O){return O=me(this,O),Y(O)?-1:q(O)?0:1};function W(O){for(var I=O.g.length,k=[],x=0;x<I;x++)k[x]=~O.g[x];return new h(k,~O.h).add(P)}r.abs=function(){return Y(this)?W(this):this},r.add=function(O){for(var I=Math.max(this.g.length,O.g.length),k=[],x=0,L=0;L<=I;L++){var M=x+(this.i(L)&65535)+(O.i(L)&65535),R=(M>>>16)+(this.i(L)>>>16)+(O.i(L)>>>16);x=R>>>16,M&=65535,R&=65535,k[L]=R<<16|M}return new h(k,k[k.length-1]&-2147483648?-1:0)};function me(O,I){return O.add(W(I))}r.j=function(O){if(q(this)||q(O))return C;if(Y(this))return Y(O)?W(this).j(W(O)):W(W(this).j(O));if(Y(O))return W(this.j(W(O)));if(0>this.l($)&&0>O.l($))return _(this.m()*O.m());for(var I=this.g.length+O.g.length,k=[],x=0;x<2*I;x++)k[x]=0;for(x=0;x<this.g.length;x++)for(var L=0;L<O.g.length;L++){var M=this.i(x)>>>16,R=this.i(x)&65535,Ve=O.i(L)>>>16,rt=O.i(L)&65535;k[2*x+2*L]+=R*rt,de(k,2*x+2*L),k[2*x+2*L+1]+=M*rt,de(k,2*x+2*L+1),k[2*x+2*L+1]+=R*Ve,de(k,2*x+2*L+1),k[2*x+2*L+2]+=M*Ve,de(k,2*x+2*L+2)}for(x=0;x<I;x++)k[x]=k[2*x+1]<<16|k[2*x];for(x=I;x<2*I;x++)k[x]=0;return new h(k,0)};function de(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function se(O,I){this.g=O,this.h=I}function Se(O,I){if(q(I))throw Error("division by zero");if(q(O))return new se(C,C);if(Y(O))return I=Se(W(O),I),new se(W(I.g),W(I.h));if(Y(I))return I=Se(O,W(I)),new se(W(I.g),I.h);if(30<O.g.length){if(Y(O)||Y(I))throw Error("slowDivide_ only works with positive integers.");for(var k=P,x=I;0>=x.l(O);)k=qe(k),x=qe(x);var L=Ee(k,1),M=Ee(x,1);for(x=Ee(x,2),k=Ee(k,2);!q(x);){var R=M.add(x);0>=R.l(O)&&(L=L.add(k),M=R),x=Ee(x,1),k=Ee(k,1)}return I=me(O,L.j(I)),new se(L,I)}for(L=C;0<=O.l(I);){for(k=Math.max(1,Math.floor(O.m()/I.m())),x=Math.ceil(Math.log(k)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=_(k),R=M.j(I);Y(R)||0<R.l(O);)k-=x,M=_(k),R=M.j(I);q(M)&&(M=P),L=L.add(M),O=me(O,R)}return new se(L,O)}r.A=function(O){return Se(this,O).h},r.and=function(O){for(var I=Math.max(this.g.length,O.g.length),k=[],x=0;x<I;x++)k[x]=this.i(x)&O.i(x);return new h(k,this.h&O.h)},r.or=function(O){for(var I=Math.max(this.g.length,O.g.length),k=[],x=0;x<I;x++)k[x]=this.i(x)|O.i(x);return new h(k,this.h|O.h)},r.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),k=[],x=0;x<I;x++)k[x]=this.i(x)^O.i(x);return new h(k,this.h^O.h)};function qe(O){for(var I=O.g.length+1,k=[],x=0;x<I;x++)k[x]=O.i(x)<<1|O.i(x-1)>>>31;return new h(k,O.h)}function Ee(O,I){var k=I>>5;I%=32;for(var x=O.g.length-k,L=[],M=0;M<x;M++)L[M]=0<I?O.i(M+k)>>>I|O.i(M+k+1)<<32-I:O.i(M+k);return new h(L,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Q_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,Li=h}).apply(typeof ey<"u"?ey:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Y_,Ga,X_,Ju,Wd,J_,Z_,ev;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,y){return u==Array.prototype||u==Object.prototype||(u[f]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var f=0;f<u.length;++f){var y=u[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function o(u,f){if(f)e:{var y=s;u=u.split(".");for(var w=0;w<u.length-1;w++){var b=u[w];if(!(b in y))break e;y=y[b]}u=u[u.length-1],w=y[u],f=f(w),f!=w&&f!=null&&e(y,u,{configurable:!0,writable:!0,value:f})}}function l(u,f){u instanceof String&&(u+="");var y=0,w=!1,b={next:function(){if(!w&&y<u.length){var B=y++;return{value:f(B,u[B]),done:!1}}return w=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}o("Array.prototype.values",function(u){return u||function(){return l(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function _(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function E(u,f,y){return u.call.apply(u.bind,arguments)}function C(u,f,y){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,w),u.apply(f,b)}}return function(){return u.apply(f,arguments)}}function P(u,f,y){return P=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:C,P.apply(null,arguments)}function $(u,f){var y=Array.prototype.slice.call(arguments,1);return function(){var w=y.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function q(u,f){function y(){}y.prototype=f.prototype,u.aa=f.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(w,b,B){for(var re=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)re[Ke-2]=arguments[Ke];return f.prototype[b].apply(w,re)}}function Y(u){const f=u.length;if(0<f){const y=Array(f);for(let w=0;w<f;w++)y[w]=u[w];return y}return[]}function W(u,f){for(let y=1;y<arguments.length;y++){const w=arguments[y];if(g(w)){const b=u.length||0,B=w.length||0;u.length=b+B;for(let re=0;re<B;re++)u[b+re]=w[re]}else u.push(w)}}class me{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function de(u){return/^[\s\xa0]*$/.test(u)}function se(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function Se(u){return Se[" "](u),u}Se[" "]=function(){};var qe=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function Ee(u,f,y){for(const w in u)f.call(y,u[w],w,u)}function O(u,f){for(const y in u)f.call(void 0,u[y],y,u)}function I(u){const f={};for(const y in u)f[y]=u[y];return f}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,f){let y,w;for(let b=1;b<arguments.length;b++){w=arguments[b];for(y in w)u[y]=w[y];for(let B=0;B<k.length;B++)y=k[B],Object.prototype.hasOwnProperty.call(w,y)&&(u[y]=w[y])}}function L(u){var f=1;u=u.split(":");const y=[];for(;0<f&&u.length;)y.push(u.shift()),f--;return u.length&&y.push(u.join(":")),y}function M(u){m.setTimeout(()=>{throw u},0)}function R(){var u=ve;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Ve{constructor(){this.h=this.g=null}add(f,y){const w=rt.get();w.set(f,y),this.h?this.h.next=w:this.g=w,this.h=w}}var rt=new me(()=>new ut,u=>u.reset());class ut{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ne=!1,ve=new Ve,oe=()=>{const u=m.Promise.resolve(void 0);be=()=>{u.then(T)}};var T=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){M(y)}var f=rt;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}ne=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};m.addEventListener("test",y,f),m.removeEventListener("test",y,f)}catch{}return u}();function ye(u,f){if(ee.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(qe){e:{try{Se(f.nodeName);var b=!0;break e}catch{}b=!1}b||(f=null)}}else y=="mouseover"?f=u.fromElement:y=="mouseout"&&(f=u.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:X[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ye.aa.h.call(this)}}q(ye,ee);var X={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),fe=0;function ue(u,f,y,w,b){this.listener=u,this.proxy=null,this.src=f,this.type=y,this.capture=!!w,this.ha=b,this.key=++fe,this.da=this.fa=!1}function Oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zt(u){this.src=u,this.g={},this.h=0}zt.prototype.add=function(u,f,y,w,b){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var re=fn(u,f,w,b);return-1<re?(f=u[re],y||(f.fa=!1)):(f=new ue(f,this.src,B,!!w,b),f.fa=y,u.push(f)),f};function Bn(u,f){var y=f.type;if(y in u.g){var w=u.g[y],b=Array.prototype.indexOf.call(w,f,void 0),B;(B=0<=b)&&Array.prototype.splice.call(w,b,1),B&&(Oe(f),u.g[y].length==0&&(delete u.g[y],u.h--))}}function fn(u,f,y,w){for(var b=0;b<u.length;++b){var B=u[b];if(!B.da&&B.listener==f&&B.capture==!!y&&B.ha==w)return b}return-1}var An="closure_lm_"+(1e6*Math.random()|0),ei={};function Ki(u,f,y,w,b){if(Array.isArray(f)){for(var B=0;B<f.length;B++)Ki(u,f[B],y,w,b);return null}return y=pn(y),u&&u[le]?u.K(f,y,_(w)?!!w.capture:!1,b):Qi(u,f,y,!1,w,b)}function Qi(u,f,y,w,b,B){if(!f)throw Error("Invalid event type");var re=_(b)?!!b.capture:!!b,Ke=Ze(u);if(Ke||(u[An]=Ke=new zt(u)),y=Ke.add(f,y,w,re,B),y.proxy)return y;if(w=Yi(),y.proxy=w,w.src=u,w.listener=y,u.addEventListener)ie||(b=re),b===void 0&&(b=!1),u.addEventListener(f.toString(),w,b);else if(u.attachEvent)u.attachEvent(Ae(f.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Yi(){function u(y){return f.call(u.src,u.listener,y)}const f=Qe;return u}function D(u,f,y,w,b){if(Array.isArray(f))for(var B=0;B<f.length;B++)D(u,f[B],y,w,b);else w=_(w)?!!w.capture:!!w,y=pn(y),u&&u[le]?(u=u.i,f=String(f).toString(),f in u.g&&(B=u.g[f],y=fn(B,y,w,b),-1<y&&(Oe(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete u.g[f],u.h--)))):u&&(u=Ze(u))&&(f=u.g[f.toString()],u=-1,f&&(u=fn(f,y,w,b)),(y=-1<u?f[u]:null)&&Z(y))}function Z(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[le])Bn(f.i,u);else{var y=u.type,w=u.proxy;f.removeEventListener?f.removeEventListener(y,w,u.capture):f.detachEvent?f.detachEvent(Ae(y),w):f.addListener&&f.removeListener&&f.removeListener(w),(y=Ze(f))?(Bn(y,u),y.h==0&&(y.src=null,f[An]=null)):Oe(u)}}}function Ae(u){return u in ei?ei[u]:ei[u]="on"+u}function Qe(u,f){if(u.da)u=!0;else{f=new ye(f,this);var y=u.listener,w=u.ha||u.src;u.fa&&Z(u),u=y.call(w,f)}return u}function Ze(u){return u=u[An],u instanceof zt?u:null}var it="__closure_events_fn_"+(1e9*Math.random()>>>0);function pn(u){return typeof u=="function"?u:(u[it]||(u[it]=function(f){return u.handleEvent(f)}),u[it])}function Ye(){j.call(this),this.i=new zt(this),this.M=this,this.F=null}q(Ye,j),Ye.prototype[le]=!0,Ye.prototype.removeEventListener=function(u,f,y,w){D(this,u,f,y,w)};function et(u,f){var y,w=u.F;if(w)for(y=[];w;w=w.F)y.push(w);if(u=u.M,w=f.type||f,typeof f=="string")f=new ee(f,u);else if(f instanceof ee)f.target=f.target||u;else{var b=f;f=new ee(w,u),x(f,b)}if(b=!0,y)for(var B=y.length-1;0<=B;B--){var re=f.g=y[B];b=en(re,w,!0,f)&&b}if(re=f.g=u,b=en(re,w,!0,f)&&b,b=en(re,w,!1,f)&&b,y)for(B=0;B<y.length;B++)re=f.g=y[B],b=en(re,w,!1,f)&&b}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var y=u.g[f],w=0;w<y.length;w++)Oe(y[w]);delete u.g[f],u.h--}}this.F=null},Ye.prototype.K=function(u,f,y,w){return this.i.add(String(u),f,!1,y,w)},Ye.prototype.L=function(u,f,y,w){return this.i.add(String(u),f,!0,y,w)};function en(u,f,y,w){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var b=!0,B=0;B<f.length;++B){var re=f[B];if(re&&!re.da&&re.capture==y){var Ke=re.listener,Tt=re.ha||re.src;re.fa&&Bn(u.i,re),b=Ke.call(Tt,w)!==!1&&b}}return b&&!w.defaultPrevented}function Zo(u,f,y){if(typeof u=="function")y&&(u=P(u,y));else if(u&&typeof u.handleEvent=="function")u=P(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(u,f||0)}function ti(u){u.g=Zo(()=>{u.g=null,u.i&&(u.i=!1,ti(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class Xi extends j{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ti(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ji(u){j.call(this),this.h=u,this.g={}}q(Ji,j);var ea=[];function ta(u){Ee(u.g,function(f,y){this.g.hasOwnProperty(y)&&Z(f)},u),u.g={}}Ji.prototype.N=function(){Ji.aa.N.call(this),ta(this)},Ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var na=m.JSON.stringify,ra=m.JSON.parse,ia=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Zi(){}Zi.prototype.h=null;function Us(u){return u.h||(u.h=u.i())}function zs(){}var Cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lr(){ee.call(this,"d")}q(lr,ee);function Bs(){ee.call(this,"c")}q(Bs,ee);var ur={},sa=null;function es(){return sa=sa||new Ye}ur.La="serverreachability";function oa(u){ee.call(this,ur.La,u)}q(oa,ee);function Pr(u){const f=es();et(f,new oa(f))}ur.STAT_EVENT="statevent";function aa(u,f){ee.call(this,ur.STAT_EVENT,u),this.stat=f}q(aa,ee);function pt(u){const f=es();et(f,new aa(f,u))}ur.Ma="timingevent";function $s(u,f){ee.call(this,ur.Ma,u),this.size=f}q($s,ee);function $n(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},f)}function ts(){this.g=!0}ts.prototype.xa=function(){this.g=!1};function ns(u,f,y,w,b,B){u.info(function(){if(u.g)if(B)for(var re="",Ke=B.split("&"),Tt=0;Tt<Ke.length;Tt++){var ze=Ke[Tt].split("=");if(1<ze.length){var Rt=ze[0];ze=ze[1];var _t=Rt.split("_");re=2<=_t.length&&_t[1]=="type"?re+(Rt+"="+ze+"&"):re+(Rt+"=redacted&")}}else re=null;else re=B;return"XMLHTTP REQ ("+w+") [attempt "+b+"]: "+f+`
`+y+`
`+re})}function Hs(u,f,y,w,b,B,re){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+b+"]: "+f+`
`+y+`
`+B+" "+re})}function Hn(u,f,y,w){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Qc(u,y)+(w?" "+w:"")})}function la(u,f){u.info(function(){return"TIMEOUT: "+f})}ts.prototype.info=function(){};function Qc(u,f){if(!u.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var w=y[u];if(!(2>w.length)){var b=w[1];if(Array.isArray(b)&&!(1>b.length)){var B=b[0];if(B!="noop"&&B!="stop"&&B!="close")for(var re=1;re<b.length;re++)b[re]=""}}}}return na(y)}catch{return f}}var qs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qn;function rs(){}q(rs,Zi),rs.prototype.g=function(){return new XMLHttpRequest},rs.prototype.i=function(){return{}},qn=new rs;function Wn(u,f,y,w){this.j=u,this.i=f,this.l=y,this.R=w||1,this.U=new Ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pl}function Pl(){this.i=null,this.g="",this.h=!1}var ua={},Ws={};function Gs(u,f,y){u.L=1,u.v=oi(gn(f)),u.m=y,u.P=!0,ca(u,null)}function ca(u,f){u.F=Date.now(),tt(u),u.A=gn(u.v);var y=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),li(y.i,"t",w),u.C=0,y=u.j.J,u.h=new Pl,u.g=Wl(u.j,y?f:null,!u.m),0<u.O&&(u.M=new Xi(P(u.Y,u,u.g),u.O)),f=u.U,y=u.g,w=u.ca;var b="readystatechange";Array.isArray(b)||(b&&(ea[0]=b.toString()),b=ea);for(var B=0;B<b.length;B++){var re=Ki(y,b[B],w||f.handleEvent,!1,f.h||f);if(!re)break;f.g[re.key]=re}f=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Pr(),ns(u.i,u.u,u.A,u.l,u.R,u.m)}Wn.prototype.ca=function(u){u=u.target;const f=this.M;f&&nn(u)==3?f.j():this.Y(u)},Wn.prototype.Y=function(u){try{if(u==this.g)e:{const _t=nn(this.g);var f=this.g.Ba();const kn=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||ga(this.g)))){this.J||_t!=4||f==7||(f==8||0>=kn?Pr(3):Pr(2)),is(this);var y=this.g.Z();this.X=y;t:if(kl(this)){var w=ga(this.g);u="";var b=w.length,B=nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rn(this),ni(this);var re="";break t}this.h.i=new m.TextDecoder}for(f=0;f<b;f++)this.h.h=!0,u+=this.h.i.decode(w[f],{stream:!(B&&f==b-1)});w.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=y==200,Hs(this.i,this.u,this.A,this.l,this.R,_t,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Tt=this.g;if((Ke=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!de(Ke)){var ze=Ke;break t}}ze=null}if(y=ze)Hn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ha(this,y);else{this.o=!1,this.s=3,pt(12),Rn(this),ni(this);break e}}if(this.P){y=!0;let _n;for(;!this.J&&this.C<re.length;)if(_n=Yc(this,re),_n==Ws){_t==4&&(this.s=4,pt(14),y=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==ua){this.s=4,pt(15),Hn(this.i,this.l,re,"[Invalid Chunk]"),y=!1;break}else Hn(this.i,this.l,_n,null),ha(this,_n);if(kl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||re.length!=0||this.h.h||(this.s=1,pt(16),y=!1),this.o=this.o&&y,!y)Hn(this.i,this.l,re,"[Invalid Chunked Response]"),Rn(this),ni(this);else if(0<re.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),_a(Rt),Rt.M=!0,pt(11))}}else Hn(this.i,this.l,re,null),ha(this,re);_t==4&&Rn(this),this.o&&!this.J&&(_t==4?io(this.j,this):(this.o=!1,tt(this)))}else Zs(this.g),y==400&&0<re.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Rn(this),ni(this)}}}catch{}finally{}};function kl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Yc(u,f){var y=u.C,w=f.indexOf(`
`,y);return w==-1?Ws:(y=Number(f.substring(y,w)),isNaN(y)?ua:(w+=1,w+y>f.length?Ws:(f=f.slice(w,w+y),u.C=w+y,f)))}Wn.prototype.cancel=function(){this.J=!0,Rn(this)};function tt(u){u.S=Date.now()+u.I,Nl(u,u.I)}function Nl(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=$n(P(u.ba,u),f)}function is(u){u.B&&(m.clearTimeout(u.B),u.B=null)}Wn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(la(this.i,this.A),this.L!=2&&(Pr(),pt(17)),Rn(this),this.s=2,ni(this)):Nl(this,this.S-u)};function ni(u){u.j.G==0||u.J||io(u.j,u)}function Rn(u){is(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,ta(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function ha(u,f){try{var y=u.j;if(y.G!=0&&(y.g==u||Yt(y.h,u))){if(!u.K&&Yt(y.h,u)&&y.G==3){try{var w=y.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var b=w;if(b[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)ro(y),Xn(y);else break e;no(y),pt(18)}}else y.za=b[1],0<y.za-y.T&&37500>b[2]&&y.F&&y.v==0&&!y.C&&(y.C=$n(P(y.Za,y),6e3));if(1>=Dl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Vr(y,11)}else if((u.K||y.g==u)&&ro(y),!de(f))for(b=y.Da.g.parse(f),f=0;f<b.length;f++){let ze=b[f];if(y.T=ze[0],ze=ze[1],y.G==2)if(ze[0]=="c"){y.K=ze[1],y.ia=ze[2];const Rt=ze[3];Rt!=null&&(y.la=Rt,y.j.info("VER="+y.la));const _t=ze[4];_t!=null&&(y.Aa=_t,y.j.info("SVER="+y.Aa));const kn=ze[5];kn!=null&&typeof kn=="number"&&0<kn&&(w=1.5*kn,y.L=w,y.j.info("backChannelRequestTimeoutMs_="+w)),w=y;const _n=u.g;if(_n){const hs=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hs){var B=w.h;B.g||hs.indexOf("spdy")==-1&&hs.indexOf("quic")==-1&&hs.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(da(B,B.h),B.h=null))}if(w.D){const oo=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;oo&&(w.ya=oo,Xe(w.I,w.D,oo))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),w=y;var re=u;if(w.qa=ql(w,w.J?w.ia:null,w.W),re.K){Vl(w.h,re);var Ke=re,Tt=w.L;Tt&&(Ke.I=Tt),Ke.B&&(is(Ke),tt(Ke)),w.g=re}else cs(w);0<y.i.length&&fr(y)}else ze[0]!="stop"&&ze[0]!="close"||Vr(y,7);else y.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Vr(y,7):Vt(y):ze[0]!="noop"&&y.l&&y.l.ta(ze),y.v=0)}}Pr(4)}catch{}}var xl=class{constructor(u,f){this.g=u,this.map=f}};function ss(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Dl(u){return u.h?1:u.g?u.g.size:0}function Yt(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function da(u,f){u.g?u.g.add(f):u.h=f}function Vl(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}ss.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ol(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const y of u.g.values())f=f.concat(y.D);return f}return Y(u.i)}function Ks(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var f=[],y=u.length,w=0;w<y;w++)f.push(u[w]);return f}f=[],y=0;for(w in u)f[y++]=u[w];return f}function Qs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var f=[];u=u.length;for(var y=0;y<u;y++)f.push(y);return f}f=[],y=0;for(const w in u)f[y++]=w;return f}}}function ri(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var y=Qs(u),w=Ks(u),b=w.length,B=0;B<b;B++)f.call(void 0,w[B],y&&y[B],u)}var os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xc(u,f){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var w=u[y].indexOf("="),b=null;if(0<=w){var B=u[y].substring(0,w);b=u[y].substring(w+1)}else B=u[y];f(B,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function kr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof kr){this.h=u.h,as(this,u.j),this.o=u.o,this.g=u.g,ii(this,u.s),this.l=u.l;var f=u.i,y=new cr;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),si(this,y),this.m=u.m}else u&&(f=String(u).match(os))?(this.h=!1,as(this,f[1]||"",!0),this.o=Ue(f[2]||""),this.g=Ue(f[3]||"",!0),ii(this,f[4]),this.l=Ue(f[5]||"",!0),si(this,f[6]||"",!0),this.m=Ue(f[7]||"")):(this.h=!1,this.i=new cr(null,this.h))}kr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(ai(f,Ys,!0),":");var y=this.g;return(y||f=="file")&&(u.push("//"),(f=this.o)&&u.push(ai(f,Ys,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(ai(y,y.charAt(0)=="/"?bl:Ml,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",ai(y,fa)),u.join("")};function gn(u){return new kr(u)}function as(u,f,y){u.j=y?Ue(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function ii(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function si(u,f,y){f instanceof cr?(u.i=f,hr(u.i,u.h)):(y||(f=ai(f,Fl)),u.i=new cr(f,u.h))}function Xe(u,f,y){u.i.set(f,y)}function oi(u){return Xe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ue(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ai(u,f,y){return typeof u=="string"?(u=encodeURI(u).replace(f,Ll),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ll(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ys=/[#\/\?@]/g,Ml=/[#\?:]/g,bl=/[#\?]/g,Fl=/[#\?@]/g,fa=/#/g;function cr(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Dt(u){u.g||(u.g=new Map,u.h=0,u.i&&Xc(u.i,function(f,y){u.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}r=cr.prototype,r.add=function(u,f){Dt(this),this.i=null,u=Pn(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(f),this.h+=1,this};function Gn(u,f){Dt(u),f=Pn(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Kn(u,f){return Dt(u),f=Pn(u,f),u.g.has(f)}r.forEach=function(u,f){Dt(this),this.g.forEach(function(y,w){y.forEach(function(b){u.call(f,b,w,this)},this)},this)},r.na=function(){Dt(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let w=0;w<f.length;w++){const b=u[w];for(let B=0;B<b.length;B++)y.push(f[w])}return y},r.V=function(u){Dt(this);let f=[];if(typeof u=="string")Kn(this,u)&&(f=f.concat(this.g.get(Pn(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)f=f.concat(u[y])}return f},r.set=function(u,f){return Dt(this),this.i=null,u=Pn(this,u),Kn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},r.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function li(u,f,y){Gn(u,f),0<y.length&&(u.i=null,u.g.set(Pn(u,f),Y(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var w=f[y];const B=encodeURIComponent(String(w)),re=this.V(w);for(w=0;w<re.length;w++){var b=B;re[w]!==""&&(b+="="+encodeURIComponent(String(re[w]))),u.push(b)}}return this.i=u.join("&")};function Pn(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function hr(u,f){f&&!u.j&&(Dt(u),u.i=null,u.g.forEach(function(y,w){var b=w.toLowerCase();w!=b&&(Gn(this,w),li(this,b,y))},u)),u.j=f}function Jc(u,f){const y=new ts;if(m.Image){const w=new Image;w.onload=$(tn,y,"TestLoadImage: loaded",!0,f,w),w.onerror=$(tn,y,"TestLoadImage: error",!1,f,w),w.onabort=$(tn,y,"TestLoadImage: abort",!1,f,w),w.ontimeout=$(tn,y,"TestLoadImage: timeout",!1,f,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else f(!1)}function jl(u,f){const y=new ts,w=new AbortController,b=setTimeout(()=>{w.abort(),tn(y,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:w.signal}).then(B=>{clearTimeout(b),B.ok?tn(y,"TestPingServer: ok",!0,f):tn(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(b),tn(y,"TestPingServer: error",!1,f)})}function tn(u,f,y,w,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),w(y)}catch{}}function Zc(){this.g=new ia}function Ul(u,f,y){const w=y||"";try{ri(u,function(b,B){let re=b;_(b)&&(re=na(b)),f.push(w+B+"="+encodeURIComponent(re))})}catch(b){throw f.push(w+"type="+encodeURIComponent("_badmap")),b}}function Nr(u){this.l=u.Ub||null,this.j=u.eb||!1}q(Nr,Zi),Nr.prototype.g=function(){return new ls(this.l,this.j)},Nr.prototype.i=function(u){return function(){return u}}({});function ls(u,f){Ye.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(ls,Ye),r=ls.prototype,r.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Yn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function zl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Qn(this):Yn(this),this.readyState==3&&zl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Qn(this))},r.Qa=function(u){this.g&&(this.response=u,Qn(this))},r.ga=function(){this.g&&Qn(this)};function Qn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Yn(u)}r.setRequestHeader=function(u,f){this.u.append(u,f)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=f.next();return u.join(`\r
`)};function Yn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xr(u){let f="";return Ee(u,function(y,w){f+=w,f+=":",f+=y,f+=`\r
`}),f}function ui(u,f,y){e:{for(w in y){var w=!1;break e}w=!0}w||(y=xr(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Xe(u,f,y))}function at(u){Ye.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(at,Ye);var eh=/^https?$/i,pa=["POST","PUT"];r=at.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,f,y,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qn.g(),this.v=this.o?Us(this.o):Us(qn),this.g.onreadystatechange=P(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(B){us(this,B);return}if(u=y||"",y=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var b in w)y.set(b,w[b]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const B of w.keys())y.set(B,w.get(B));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),b=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(pa,f,void 0))||w||b||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,re]of y)this.g.setRequestHeader(B,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Js(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){us(this,B)}};function us(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Xs(u),yn(u)}function Xs(u){u.A||(u.A=!0,et(u,"complete"),et(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,et(this,"complete"),et(this,"abort"),yn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),at.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ma(this):this.bb())},r.bb=function(){ma(this)};function ma(u){if(u.h&&typeof h<"u"&&(!u.v[1]||nn(u)!=4||u.Z()!=2)){if(u.u&&nn(u)==4)Zo(u.Ea,0,u);else if(et(u,"readystatechange"),nn(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var w;if(w=re===0){var b=String(u.D).match(os)[1]||null;!b&&m.self&&m.self.location&&(b=m.self.location.protocol.slice(0,-1)),w=!eh.test(b?b.toLowerCase():"")}y=w}if(y)et(u,"complete"),et(u,"success");else{u.m=6;try{var B=2<nn(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",Xs(u)}}finally{yn(u)}}}}function yn(u,f){if(u.g){Js(u);const y=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||et(u,"ready");try{y.onreadystatechange=w}catch{}}}function Js(u){u.I&&(m.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function nn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<nn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),ra(f)}};function ga(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Zs(u){const f={};u=(u.g&&2<=nn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(de(u[w]))continue;var y=L(u[w]);const b=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const B=f[b]||[];f[b]=B,B.push(y)}O(f,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dr(u,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||f}function ya(u){this.Aa=0,this.i=[],this.j=new ts,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dr("baseRetryDelayMs",5e3,u),this.cb=dr("retryDelaySeedMs",1e4,u),this.Wa=dr("forwardChannelMaxRetries",2,u),this.wa=dr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ss(u&&u.concurrentRequestLimit),this.Da=new Zc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ya.prototype,r.la=8,r.G=1,r.connect=function(u,f,y,w){pt(0),this.W=u,this.H=f||{},y&&w!==void 0&&(this.H.OSID=y,this.H.OAID=w),this.F=this.X,this.I=ql(this,null,this.W),fr(this)};function Vt(u){if(eo(u),u.G==3){var f=u.U++,y=gn(u.I);if(Xe(y,"SID",u.K),Xe(y,"RID",f),Xe(y,"TYPE","terminate"),Dr(u,y),f=new Wn(u,u.j,f),f.L=2,f.v=oi(gn(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=f.v,y=!0),y||(f.g=Wl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),tt(f)}Hl(u)}function Xn(u){u.g&&(_a(u),u.g.cancel(),u.g=null)}function eo(u){Xn(u),u.u&&(m.clearTimeout(u.u),u.u=null),ro(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function fr(u){if(!mn(u.h)&&!u.s){u.s=!0;var f=u.Ga;be||oe(),ne||(be(),ne=!0),ve.add(f,u),u.B=0}}function th(u,f){return Dl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=$n(P(u.Ga,u,f),$l(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const b=new Wn(this,this.j,u);let B=this.o;if(this.S&&(B?(B=I(B),x(B,this.S)):B=this.S),this.m!==null||this.O||(b.H=B,B=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var w=this.i[y];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=ci(this,b,f),y=gn(this.I),Xe(y,"RID",u),Xe(y,"CVER",22),this.D&&Xe(y,"X-HTTP-Session-Id",this.D),Dr(this,y),B&&(this.O?f="headers="+encodeURIComponent(String(xr(B)))+"&"+f:this.m&&ui(y,this.m,B)),da(this.h,b),this.Ua&&Xe(y,"TYPE","init"),this.P?(Xe(y,"$req",f),Xe(y,"SID","null"),b.T=!0,Gs(b,y,null)):Gs(b,y,f),this.G=2}}else this.G==3&&(u?to(this,u):this.i.length==0||mn(this.h)||to(this))};function to(u,f){var y;f?y=f.l:y=u.U++;const w=gn(u.I);Xe(w,"SID",u.K),Xe(w,"RID",y),Xe(w,"AID",u.T),Dr(u,w),u.m&&u.o&&ui(w,u.m,u.o),y=new Wn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),f&&(u.i=f.D.concat(u.i)),f=ci(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),da(u.h,y),Gs(y,w,f)}function Dr(u,f){u.H&&Ee(u.H,function(y,w){Xe(f,w,y)}),u.l&&ri({},function(y,w){Xe(f,w,y)})}function ci(u,f,y){y=Math.min(u.i.length,y);var w=u.l?P(u.l.Na,u.l,u):null;e:{var b=u.i;let B=-1;for(;;){const re=["count="+y];B==-1?0<y?(B=b[0].g,re.push("ofs="+B)):B=0:re.push("ofs="+B);let Ke=!0;for(let Tt=0;Tt<y;Tt++){let ze=b[Tt].g;const Rt=b[Tt].map;if(ze-=B,0>ze)B=Math.max(0,b[Tt].g-100),Ke=!1;else try{Ul(Rt,re,"req"+ze+"_")}catch{w&&w(Rt)}}if(Ke){w=re.join("&");break e}}}return u=u.i.splice(0,y),f.D=u,w}function cs(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;be||oe(),ne||(be(),ne=!0),ve.add(f,u),u.v=0}}function no(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=$n(P(u.Fa,u),$l(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Bl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=$n(P(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Xn(this),Bl(this))};function _a(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function Bl(u){u.g=new Wn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=gn(u.qa);Xe(f,"RID","rpc"),Xe(f,"SID",u.K),Xe(f,"AID",u.T),Xe(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Xe(f,"TO",u.ja),Xe(f,"TYPE","xmlhttp"),Dr(u,f),u.m&&u.o&&ui(f,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=oi(gn(f)),y.m=null,y.P=!0,ca(y,u)}r.Za=function(){this.C!=null&&(this.C=null,Xn(this),no(this),pt(19))};function ro(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function io(u,f){var y=null;if(u.g==f){ro(u),_a(u),u.g=null;var w=2}else if(Yt(u.h,f))y=f.D,Vl(u.h,f),w=1;else return;if(u.G!=0){if(f.o)if(w==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var b=u.B;w=es(),et(w,new $s(w,y)),fr(u)}else cs(u);else if(b=f.s,b==3||b==0&&0<f.X||!(w==1&&th(u,f)||w==2&&no(u)))switch(y&&0<y.length&&(f=u.h,f.i=f.i.concat(y)),b){case 1:Vr(u,5);break;case 4:Vr(u,10);break;case 3:Vr(u,6);break;default:Vr(u,2)}}}function $l(u,f){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*f}function Vr(u,f){if(u.j.info("Error code "+f),f==2){var y=P(u.fb,u),w=u.Xa;const b=!w;w=new kr(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||as(w,"https"),oi(w),b?Jc(w.toString(),y):jl(w.toString(),y)}else pt(2);u.G=0,u.l&&u.l.sa(f),Hl(u),eo(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Hl(u){if(u.G=0,u.ka=[],u.l){const f=Ol(u.h);(f.length!=0||u.i.length!=0)&&(W(u.ka,f),W(u.ka,u.i),u.h.i.length=0,Y(u.i),u.i.length=0),u.l.ra()}}function ql(u,f,y){var w=y instanceof kr?gn(y):new kr(y);if(w.g!="")f&&(w.g=f+"."+w.g),ii(w,w.s);else{var b=m.location;w=b.protocol,f=f?f+"."+b.hostname:b.hostname,b=+b.port;var B=new kr(null);w&&as(B,w),f&&(B.g=f),b&&ii(B,b),y&&(B.l=y),w=B}return y=u.D,f=u.ya,y&&f&&Xe(w,y,f),Xe(w,"VER",u.la),Dr(u,w),w}function Wl(u,f,y){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new at(new Nr({eb:y})):new at(u.pa),f.Ha(u.J),f}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function va(){}r=va.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function so(){}so.prototype.g=function(u,f){return new Xt(u,f)};function Xt(u,f){Ye.call(this),this.g=new ya(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!de(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!de(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new pr(this)}q(Xt,Ye),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Vt(this.g)},Xt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=na(u),u=y);f.i.push(new xl(f.Ya++,u)),f.G==3&&fr(f)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Vt(this.g),delete this.g,Xt.aa.N.call(this)};function Gl(u){lr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const y in f){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}q(Gl,lr);function Kl(){Bs.call(this),this.status=1}q(Kl,Bs);function pr(u){this.g=u}q(pr,va),pr.prototype.ua=function(){et(this.g,"a")},pr.prototype.ta=function(u){et(this.g,new Gl(u))},pr.prototype.sa=function(u){et(this.g,new Kl)},pr.prototype.ra=function(){et(this.g,"b")},so.prototype.createWebChannel=so.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,ev=function(){return new so},Z_=function(){return es()},J_=ur,Wd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qs.NO_ERROR=0,qs.TIMEOUT=8,qs.HTTP_ERROR=6,Ju=qs,Rl.COMPLETE="complete",X_=Rl,zs.EventType=Cn,Cn.OPEN="a",Cn.CLOSE="b",Cn.ERROR="c",Cn.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,Ga=zs,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,Y_=at}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const ty="@firebase/firestore",ny="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new hf("@firebase/firestore");function Po(){return Ds.logLevel}function he(r,...e){if(Ds.logLevel<=Fe.DEBUG){const t=e.map(Cf);Ds.debug(`Firestore (${Ko}): ${r}`,...t)}}function Yr(r,...e){if(Ds.logLevel<=Fe.ERROR){const t=e.map(Cf);Ds.error(`Firestore (${Ko}): ${r}`,...t)}}function Fi(r,...e){if(Ds.logLevel<=Fe.WARN){const t=e.map(Cf);Ds.warn(`Firestore (${Ko}): ${r}`,...t)}}function Cf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,tv(r,s,t)}function tv(r,e,t){let s=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Yr(s),new Error(s)}function Ge(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||tv(e,o,s)}function De(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gt.UNAUTHENTICATED))}shutdown(){}}class $S{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class HS{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Gr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Gr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ge(typeof s.accessToken=="string",31837,{l:s}),new nv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}}class qS{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WS{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new qS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ry{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ge(this.o===void 0,3512);const s=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ry(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ry(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=KS(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Le(r,e){return r<e?-1:r>e?1:0}function Gd(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Le(s,o);{const l=rv(),h=QS(l.encode(iy(r,t)),l.encode(iy(e,t)));return h!==0?h:Le(s,o)}}t+=s>65535?2:1}return Le(r.length,e.length)}function iy(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function QS(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Le(r[t],e[t]);return Le(r.length,e.length)}function jo(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="__name__";class wr{constructor(e,t,s){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ke(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return wr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=wr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const s=wr.isNumericId(e),o=wr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?wr.extractNumericId(e).compare(wr.extractNumericId(t)):Gd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Li.fromString(e.substring(4,e.length-2))}}class Je extends wr{construct(e,t,s){return new Je(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ae(H.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new Je(t)}static emptyPath(){return new Je([])}}const YS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends wr{construct(e,t,s){return new Ft(e,t,s)}static isValidIdentifier(e){return YS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sy}static keyField(){return new Ft([sy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ae(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ae(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ae(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(l(),o++)}if(l(),h)throw new ae(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(Je.fromString(e))}static fromName(e){return new Te(Je.fromString(e).popFirst(5))}static empty(){return new Te(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(r,e,t){if(!t)throw new ae(H.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function XS(r,e,t,s){if(e===!0&&s===!0)throw new ae(H.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function oy(r){if(!Te.isDocumentKey(r))throw new ae(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ay(r){if(Te.isDocumentKey(r))throw new ae(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function iv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function kc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ke(12329,{type:typeof r})}function zn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ae(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kc(r);throw new ae(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(r,e){const t={typeString:r};return e&&(t.value=e),t}function El(r,e){if(!iv(r))throw new ae(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ae(H.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-62135596800,uy=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*uy);return new We(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ly)throw new ae(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uy}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(El(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ly;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:It("string",We._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new We(0,0))}static max(){return new xe(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=-1;function JS(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(s===1e9?new We(t+1,0):new We(t,s));return new ji(o,Te.empty(),e)}function ZS(r){return new ji(r.readTime,r.key,cl)}class ji{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ji(xe.min(),Te.empty(),cl)}static max(){return new ji(xe.max(),Te.empty(),cl)}}function eA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(r){if(r.code!==H.FAILED_PRECONDITION||r.message!==tA)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,s)=>{t(e)})}static reject(e){return new G((t,s)=>{s(e)})}static waitFor(e){return new G((t,s)=>{let o=0,l=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++l,h&&l===o&&t()},g=>s(g))}),h=!0,l===o&&t()})}static or(e){let t=G.resolve(!1);for(const s of e)t=t.next(o=>o?G.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new G((s,o)=>{const l=e.length,h=new Array(l);let m=0;for(let g=0;g<l;g++){const _=g;t(e[_]).next(E=>{h[_]=E,++m,m===l&&s(h)},E=>o(E))}})}static doWhile(e,t){return new G((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function rA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Nc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=-1;function xc(r){return r==null}function dc(r){return r===0&&1/r==-1/0}function iA(r){return typeof r=="number"&&Number.isInteger(r)&&!dc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="";function sA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=cy(e)),e=oA(r.get(t),e);return cy(e)}function oA(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case sv:t+="";break;default:t+=l}}return t}function cy(r){return r+sv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Wi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function ov(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||bt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hu(this.root,e,this.comparator,!0)}}class Hu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??bt.RED,this.left=o??bt.EMPTY,this.right=l??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new bt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return bt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dy(this.data.getIterator())}getIteratorFrom(e){return new dy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ct(this.comparator);return t.data=e,t}}class dy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Sn([])}unionWith(e){let t=new Ct(Ft.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Sn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new av("Invalid base64 string: "+l):l}}(e);return new Ut(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const aA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(r){if(Ge(!!r,39018),typeof r=="string"){let e=0;const t=aA.exec(r);if(Ge(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:gt(r.seconds),nanos:gt(r.nanos)}}function gt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function zi(r){return typeof r=="string"?Ut.fromBase64String(r):Ut.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="server_timestamp",uv="__type__",cv="__previous_value__",hv="__local_write_time__";function Nf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[uv])===null||t===void 0?void 0:t.stringValue)===lv}function Dc(r){const e=r.mapValue.fields[cv];return Nf(e)?Dc(e):e}function hl(r){const e=Ui(r.mapValue.fields[hv].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t,s,o,l,h,m,g,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=E}}const fc="(default)";class dl{constructor(e,t){this.projectId=e,this.database=t||fc}static empty(){return new dl("","")}get isDefaultDatabase(){return this.database===fc}isEqual(e){return e instanceof dl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="__type__",uA="__max__",qu={mapValue:{}},fv="__vector__",pc="value";function Bi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Nf(r)?4:hA(r)?9007199254740991:cA(r)?10:11:ke(28295,{value:r})}function Rr(r,e){if(r===e)return!0;const t=Bi(r);if(t!==Bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return hl(r).isEqual(hl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ui(o.timestampValue),m=Ui(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return zi(o.bytesValue).isEqual(zi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return gt(o.geoPointValue.latitude)===gt(l.geoPointValue.latitude)&&gt(o.geoPointValue.longitude)===gt(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return gt(o.integerValue)===gt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=gt(o.doubleValue),m=gt(l.doubleValue);return h===m?dc(h)===dc(m):isNaN(h)&&isNaN(m)}return!1}(r,e);case 9:return jo(r.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(hy(h)!==hy(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Rr(h[g],m[g])))return!1;return!0}(r,e);default:return ke(52216,{left:r})}}function fl(r,e){return(r.values||[]).find(t=>Rr(t,e))!==void 0}function Uo(r,e){if(r===e)return 0;const t=Bi(r),s=Bi(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return function(l,h){const m=gt(l.integerValue||l.doubleValue),g=gt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(r,e);case 3:return fy(r.timestampValue,e.timestampValue);case 4:return fy(hl(r),hl(e));case 5:return Gd(r.stringValue,e.stringValue);case 6:return function(l,h){const m=zi(l),g=zi(h);return m.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const m=l.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const E=Le(m[_],g[_]);if(E!==0)return E}return Le(m.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const m=Le(gt(l.latitude),gt(h.latitude));return m!==0?m:Le(gt(l.longitude),gt(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return py(r.arrayValue,e.arrayValue);case 10:return function(l,h){var m,g,_,E;const C=l.fields||{},P=h.fields||{},$=(m=C[pc])===null||m===void 0?void 0:m.arrayValue,q=(g=P[pc])===null||g===void 0?void 0:g.arrayValue,Y=Le(((_=$==null?void 0:$.values)===null||_===void 0?void 0:_.length)||0,((E=q==null?void 0:q.values)===null||E===void 0?void 0:E.length)||0);return Y!==0?Y:py($,q)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===qu.mapValue&&h===qu.mapValue)return 0;if(l===qu.mapValue)return 1;if(h===qu.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),_=h.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let C=0;C<g.length&&C<E.length;++C){const P=Gd(g[C],E[C]);if(P!==0)return P;const $=Uo(m[g[C]],_[E[C]]);if($!==0)return $}return Le(g.length,E.length)}(r.mapValue,e.mapValue);default:throw ke(23264,{le:t})}}function fy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=Ui(r),s=Ui(e),o=Le(t.seconds,s.seconds);return o!==0?o:Le(t.nanos,s.nanos)}function py(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Uo(t[o],s[o]);if(l)return l}return Le(t.length,s.length)}function zo(r){return Kd(r)}function Kd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Ui(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return zi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Te.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Kd(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Kd(t.fields[h])}`;return o+"}"}(r.mapValue):ke(61005,{value:r})}function Zu(r){switch(Bi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dc(r);return e?16+Zu(e):16;case 5:return 2*r.stringValue.length;case 6:return zi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+Zu(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Wi(s.fields,(l,h)=>{o+=l.length+Zu(h)}),o}(r.mapValue);default:throw ke(13486,{value:r})}}function my(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Qd(r){return!!r&&"integerValue"in r}function xf(r){return!!r&&"arrayValue"in r}function gy(r){return!!r&&"nullValue"in r}function yy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ec(r){return!!r&&"mapValue"in r}function cA(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[dv])===null||t===void 0?void 0:t.stringValue)===fv}function nl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Wi(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=nl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function hA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===uA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nl(t)}setAll(e){let t=Ft.emptyPath(),s={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}h?s[m.lastSegment()]=nl(h):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ec(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Wi(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new dn(nl(this.value))}}function pv(r){const e=[];return Wi(r.fields,(t,s)=>{const o=new Ft([t]);if(ec(s)){const l=pv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t,s,o,l,h,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Kt(e,0,xe.min(),xe.min(),xe.min(),dn.empty(),0)}static newFoundDocument(e,t,s,o){return new Kt(e,1,t,xe.min(),s,o,0)}static newNoDocument(e,t){return new Kt(e,2,t,xe.min(),xe.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new Kt(e,3,t,xe.min(),xe.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.position=e,this.inclusive=t}}function _y(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=Te.comparator(Te.fromName(h.referenceValue),t.key):s=Uo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function vy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Rr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t="asc"){this.field=e,this.dir=t}}function dA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{}class Et extends mv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new pA(e,t,s):t==="array-contains"?new yA(e,s):t==="in"?new _A(e,s):t==="not-in"?new vA(e,s):t==="array-contains-any"?new wA(e,s):new Et(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new mA(e,s):new gA(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Uo(t,this.value)):t!==null&&Bi(this.value)===Bi(t)&&this.matchesComparison(Uo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ar extends mv{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new ar(e,t)}matches(e){return gv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function gv(r){return r.op==="and"}function yv(r){return fA(r)&&gv(r)}function fA(r){for(const e of r.filters)if(e instanceof ar)return!1;return!0}function Yd(r){if(r instanceof Et)return r.field.canonicalString()+r.op.toString()+zo(r.value);if(yv(r))return r.filters.map(e=>Yd(e)).join(",");{const e=r.filters.map(t=>Yd(t)).join(",");return`${r.op}(${e})`}}function _v(r,e){return r instanceof Et?function(s,o){return o instanceof Et&&s.op===o.op&&s.field.isEqual(o.field)&&Rr(s.value,o.value)}(r,e):r instanceof ar?function(s,o){return o instanceof ar&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,m)=>l&&_v(h,o.filters[m]),!0):!1}(r,e):void ke(19439)}function vv(r){return r instanceof Et?function(t){return`${t.field.canonicalString()} ${t.op} ${zo(t.value)}`}(r):r instanceof ar?function(t){return t.op.toString()+" {"+t.getFilters().map(vv).join(" ,")+"}"}(r):"Filter"}class pA extends Et{constructor(e,t,s){super(e,t,s),this.key=Te.fromName(s.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class mA extends Et{constructor(e,t){super(e,"in",t),this.keys=wv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gA extends Et{constructor(e,t){super(e,"not-in",t),this.keys=wv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function wv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Te.fromName(s.referenceValue))}class yA extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xf(t)&&fl(t.arrayValue,this.value)}}class _A extends Et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fl(this.value.arrayValue,t)}}class vA extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fl(this.value.arrayValue,t)}}class wA extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>fl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t=null,s=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Pe=null}}function wy(r,e=null,t=[],s=[],o=null,l=null,h=null){return new EA(r,e,t,s,o,l,h)}function Df(r){const e=De(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Yd(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),xc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>zo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>zo(s)).join(",")),e.Pe=t}return e.Pe}function Vf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!dA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!_v(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!vy(r.startAt,e.startAt)&&vy(r.endAt,e.endAt)}function Xd(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t=null,s=[],o=[],l=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function IA(r,e,t,s,o,l,h,m){return new Ms(r,e,t,s,o,l,h,m)}function Of(r){return new Ms(r)}function Ey(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Ev(r){return r.collectionGroup!==null}function rl(r){const e=De(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Ct(Ft.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new pl(l,s))}),t.has(Ft.keyField().canonicalString())||e.Te.push(new pl(Ft.keyField(),s))}return e.Te}function Tr(r){const e=De(r);return e.Ie||(e.Ie=TA(e,rl(r))),e.Ie}function TA(r,e){if(r.limitType==="F")return wy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new pl(o.field,l)});const t=r.endAt?new mc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new mc(r.startAt.position,r.startAt.inclusive):null;return wy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Jd(r,e){const t=r.filters.concat([e]);return new Ms(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function gc(r,e,t){return new Ms(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Vc(r,e){return Vf(Tr(r),Tr(e))&&r.limitType===e.limitType}function Iv(r){return`${Df(Tr(r))}|lt:${r.limitType}`}function ko(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>vv(o)).join(", ")}]`),xc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>zo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>zo(o)).join(",")),`Target(${s})`}(Tr(r))}; limitType=${r.limitType})`}function Oc(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Te.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of rl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,m,g){const _=_y(h,m,g);return h.inclusive?_<=0:_<0}(s.startAt,rl(s),o)||s.endAt&&!function(h,m,g){const _=_y(h,m,g);return h.inclusive?_>=0:_>0}(s.endAt,rl(s),o))}(r,e)}function SA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Tv(r){return(e,t)=>{let s=!1;for(const o of rl(r)){const l=AA(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function AA(r,e,t){const s=r.field.isKeyField()?Te.comparator(e.key,t.key):function(l,h,m){const g=h.data.field(l),_=m.data.field(l);return g!==null&&_!==null?Uo(g,_):ke(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return ke(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return ov(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=new dt(Te.comparator);function Xr(){return CA}const Sv=new dt(Te.comparator);function Ka(...r){let e=Sv;for(const t of r)e=e.insert(t.key,t);return e}function Av(r){let e=Sv;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Cs(){return il()}function Cv(){return il()}function il(){return new bs(r=>r.toString(),(r,e)=>r.isEqual(e))}const RA=new dt(Te.comparator),PA=new Ct(Te.comparator);function je(...r){let e=PA;for(const t of r)e=e.add(t);return e}const kA=new Ct(Le);function NA(){return kA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(e)?"-0":e}}function Rv(r){return{integerValue:""+r}}function xA(r,e){return iA(e)?Rv(e):Lf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function DA(r,e,t){return r instanceof yc?function(o,l){const h={fields:{[uv]:{stringValue:lv},[hv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Nf(l)&&(l=Dc(l)),l&&(h.fields[cv]=l),{mapValue:h}}(t,e):r instanceof Bo?kv(r,e):r instanceof ml?Nv(r,e):function(o,l){const h=Pv(o,l),m=Iy(h)+Iy(o.Ee);return Qd(h)&&Qd(o.Ee)?Rv(m):Lf(o.serializer,m)}(r,e)}function VA(r,e,t){return r instanceof Bo?kv(r,e):r instanceof ml?Nv(r,e):t}function Pv(r,e){return r instanceof _c?function(s){return Qd(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class yc extends Lc{}class Bo extends Lc{constructor(e){super(),this.elements=e}}function kv(r,e){const t=xv(e);for(const s of r.elements)t.some(o=>Rr(o,s))||t.push(s);return{arrayValue:{values:t}}}class ml extends Lc{constructor(e){super(),this.elements=e}}function Nv(r,e){let t=xv(e);for(const s of r.elements)t=t.filter(o=>!Rr(o,s));return{arrayValue:{values:t}}}class _c extends Lc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Iy(r){return gt(r.integerValue||r.doubleValue)}function xv(r){return xf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,t){this.field=e,this.transform=t}}function LA(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Bo&&o instanceof Bo||s instanceof ml&&o instanceof ml?jo(s.elements,o.elements,Rr):s instanceof _c&&o instanceof _c?Rr(s.Ee,o.Ee):s instanceof yc&&o instanceof yc}(r.transform,e.transform)}class MA{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Mc{}function Dv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Mf(r.key,jn.none()):new Il(r.key,r.data,jn.none());{const t=r.data,s=dn.empty();let o=new Ct(Ft.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Gi(r.key,s,new Sn(o.toArray()),jn.none())}}function bA(r,e,t){r instanceof Il?function(o,l,h){const m=o.value.clone(),g=Sy(o.fieldTransforms,l,h.transformResults);m.setAll(g),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(r,e,t):r instanceof Gi?function(o,l,h){if(!tc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=Sy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(Vv(o)),g.setAll(m),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function sl(r,e,t,s){return r instanceof Il?function(l,h,m,g){if(!tc(l.precondition,h))return m;const _=l.value.clone(),E=Ay(l.fieldTransforms,g,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(r,e,t,s):r instanceof Gi?function(l,h,m,g){if(!tc(l.precondition,h))return m;const _=Ay(l.fieldTransforms,g,h),E=h.data;return E.setAll(Vv(l)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(C=>C.field))}(r,e,t,s):function(l,h,m){return tc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(r,e,t)}function FA(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=Pv(s.transform,o||null);l!=null&&(t===null&&(t=dn.empty()),t.set(s.field,l))}return t||null}function Ty(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&jo(s,o,(l,h)=>LA(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Il extends Mc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gi extends Mc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Vv(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Sy(r,e,t){const s=new Map;Ge(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,m=e.data.field(l.field);s.set(l.field,VA(h,m,t[o]))}return s}function Ay(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,DA(l,h,e))}return s}class Mf extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jA extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&bA(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=sl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=sl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Cv();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const g=Dv(h,m);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(xe.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),je())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(t,s)=>Ty(t,s))&&jo(this.baseMutations,e.baseMutations,(t,s)=>Ty(t,s))}}class bf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ge(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=function(){return RA}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new bf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Be;function $A(r){switch(r){case H.OK:return ke(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ke(15467,{code:r})}}function Ov(r){if(r===void 0)return Yr("GRPC error has no .code"),H.UNKNOWN;switch(r){case wt.OK:return H.OK;case wt.CANCELLED:return H.CANCELLED;case wt.UNKNOWN:return H.UNKNOWN;case wt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case wt.INTERNAL:return H.INTERNAL;case wt.UNAVAILABLE:return H.UNAVAILABLE;case wt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case wt.NOT_FOUND:return H.NOT_FOUND;case wt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case wt.ABORTED:return H.ABORTED;case wt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case wt.DATA_LOSS:return H.DATA_LOSS;default:return ke(39323,{code:r})}}(Be=wt||(wt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=new Li([4294967295,4294967295],0);function Cy(r){const e=rv().encode(r),t=new Q_;return t.update(e),new Uint8Array(t.digest())}function Ry(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Li([t,s],0),new Li([o,l],0)]}class Ff{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Qa(`Invalid padding: ${t}`);if(s<0)throw new Qa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Li.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(Li.fromNumber(s)));return o.compare(HA)===1&&(o=new Li([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Cy(e),[s,o]=Ry(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(s,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Ff(l,o,t);return s.forEach(m=>h.insert(m)),h}insert(e){if(this.fe===0)return;const t=Cy(e),[s,o]=Ry(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(s,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Tl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new bc(xe.min(),o,new dt(Le),Xr(),je())}}class Tl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Tl(s,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class Lv{constructor(e,t){this.targetId=e,this.De=t}}class Mv{constructor(e,t,s=Ut.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Py{constructor(){this.ve=0,this.Ce=ky(),this.Fe=Ut.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=je(),t=je(),s=je();return this.Ce.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:ke(38017,{changeType:l})}}),new Tl(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=ky()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class qA{constructor(e){this.We=e,this.Ge=new Map,this.ze=Xr(),this.je=Wu(),this.Je=Wu(),this.He=new dt(Le)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:ke(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((s,o)=>{this.nt(o)&&t(o)})}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const l=o.target;if(Xd(l))if(s===0){const h=new Te(l.path);this.Xe(t,h,Kt.newNoDocument(h,xe.min()))}else Ge(s===1,20013,{expectedCount:s});else{const h=this.ot(t);if(h!==s){const m=this._t(e),g=m?this.ut(m,e,h):1;if(g!==0){this.rt(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,_)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=zi(s).toUint8Array()}catch(g){if(g instanceof av)return Fi("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Ff(h,o,l)}catch(g){return Fi(g instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.fe===0?null:m}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const h=this.We.lt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.Xe(t,l,null),o++)}),o}Pt(e){const t=new Map;this.Ge.forEach((l,h)=>{const m=this.st(h);if(m){if(l.current&&Xd(m.target)){const g=new Te(m.target.path);this.Tt(g).has(h)||this.It(h,g)||this.Xe(h,g,Kt.newNoDocument(g,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}});let s=je();this.Je.forEach((l,h)=>{let m=!0;h.forEachWhile(g=>{const _=this.st(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(l))}),this.ze.forEach((l,h)=>h.setReadTime(e));const o=new bc(e,t,this.He,this.ze,s);return this.ze=Xr(),this.je=Wu(),this.Je=Wu(),this.He=new dt(Le),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Py,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ct(Le),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ct(Le),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Py),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Wu(){return new dt(Te.comparator)}function ky(){return new dt(Te.comparator)}const WA={asc:"ASCENDING",desc:"DESCENDING"},GA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KA={and:"AND",or:"OR"};class QA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zd(r,e){return r.useProto3Json||xc(e)?e:{value:e}}function vc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function YA(r,e){return vc(r,e.toTimestamp())}function Sr(r){return Ge(!!r,49232),xe.fromTimestamp(function(t){const s=Ui(t);return new We(s.seconds,s.nanos)}(r))}function jf(r,e){return ef(r,e).canonicalString()}function ef(r,e){const t=function(o){return new Je(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Fv(r){const e=Je.fromString(r);return Ge($v(e),10190,{key:e.toString()}),e}function tf(r,e){return jf(r.databaseId,e.path)}function Vd(r,e){const t=Fv(e);if(t.get(1)!==r.databaseId.projectId)throw new ae(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ae(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Te(Uv(t))}function jv(r,e){return jf(r.databaseId,e)}function XA(r){const e=Fv(r);return e.length===4?Je.emptyPath():Uv(e)}function nf(r){return new Je(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Uv(r){return Ge(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ny(r,e,t){return{name:tf(r,e),fields:t.value.mapValue.fields}}function JA(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:ke(39313,{state:_})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(_,E){return _.useProto3Json?(Ge(E===void 0||typeof E=="string",58123),Ut.fromBase64String(E||"")):(Ge(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Ut.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(_){const E=_.code===void 0?H.UNKNOWN:Ov(_.code);return new ae(E,_.message||"")}(h);t=new Mv(s,o,l,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Vd(r,s.document.name),l=Sr(s.document.updateTime),h=s.document.createTime?Sr(s.document.createTime):xe.min(),m=new dn({mapValue:{fields:s.document.fields}}),g=Kt.newFoundDocument(o,l,h,m),_=s.targetIds||[],E=s.removedTargetIds||[];t=new nc(_,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Vd(r,s.document),l=s.readTime?Sr(s.readTime):xe.min(),h=Kt.newNoDocument(o,l),m=s.removedTargetIds||[];t=new nc([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Vd(r,s.document),l=s.removedTargetIds||[];t=new nc([],l,o,null)}else{if(!("filter"in e))return ke(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new BA(o,l),m=s.targetId;t=new Lv(m,h)}}return t}function ZA(r,e){let t;if(e instanceof Il)t={update:Ny(r,e.key,e.value)};else if(e instanceof Mf)t={delete:tf(r,e.key)};else if(e instanceof Gi)t={update:Ny(r,e.key,e.data),updateMask:l1(e.fieldMask)};else{if(!(e instanceof jA))return ke(16599,{Rt:e.type});t={verify:tf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const m=h.transform;if(m instanceof yc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Bo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ml)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof _c)return{fieldPath:h.field.canonicalString(),increment:m.Ee};throw ke(20930,{transform:h.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:YA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ke(27497)}(r,e.precondition)),t}function e1(r,e){return r&&r.length>0?(Ge(e!==void 0,14353),r.map(t=>function(o,l){let h=o.updateTime?Sr(o.updateTime):Sr(l);return h.isEqual(xe.min())&&(h=Sr(l)),new MA(h,o.transformResults||[])}(t,e))):[]}function t1(r,e){return{documents:[jv(r,e.path)]}}function n1(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=jv(r,o);const l=function(_){if(_.length!==0)return Bv(ar.create(_,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(_){if(_.length!==0)return _.map(E=>function(P){return{field:No(P.field),direction:s1(P.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Zd(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{Vt:t,parent:o}}function r1(r){let e=XA(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ge(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(C){const P=zv(C);return P instanceof ar&&yv(P)?P.getFilters():[P]}(t.where));let h=[];t.orderBy&&(h=function(C){return C.map(P=>function(q){return new pl(xo(q.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(P))}(t.orderBy));let m=null;t.limit&&(m=function(C){let P;return P=typeof C=="object"?C.value:C,xc(P)?null:P}(t.limit));let g=null;t.startAt&&(g=function(C){const P=!!C.before,$=C.values||[];return new mc($,P)}(t.startAt));let _=null;return t.endAt&&(_=function(C){const P=!C.before,$=C.values||[];return new mc($,P)}(t.endAt)),IA(e,o,h,l,m,"F",g,_)}function i1(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zv(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=xo(t.unaryFilter.field);return Et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=xo(t.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=xo(t.unaryFilter.field);return Et.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=xo(t.unaryFilter.field);return Et.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}}(r):r.fieldFilter!==void 0?function(t){return Et.create(xo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return ar.create(t.compositeFilter.filters.map(s=>zv(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ke(1026)}}(t.compositeFilter.op))}(r):ke(30097,{filter:r})}function s1(r){return WA[r]}function o1(r){return GA[r]}function a1(r){return KA[r]}function No(r){return{fieldPath:r.canonicalString()}}function xo(r){return Ft.fromServerFormat(r.fieldPath)}function Bv(r){return r instanceof Et?function(t){if(t.op==="=="){if(yy(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if(gy(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yy(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if(gy(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:o1(t.op),value:t.value}}}(r):r instanceof ar?function(t){const s=t.getFilters().map(o=>Bv(o));return s.length===1?s[0]:{compositeFilter:{op:a1(t.op),filters:s}}}(r):ke(54877,{filter:r})}function l1(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $v(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t,s,o,l=xe.min(),h=xe.min(),m=Ut.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.gt=e}}function c1(r){const e=r1({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?gc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.Dn=new d1}addToCollectionParentIndex(e,t){return this.Dn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(ji.min())}updateCollectionGroup(e,t,s){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class d1{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ct(Je.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ct(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hv=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(Hv,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new $o(0)}static ur(){return new $o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="LruGarbageCollector",f1=1048576;function Vy([r,e],[t,s]){const o=Le(r,t);return o===0?Le(e,s):o}class p1{constructor(e){this.Tr=e,this.buffer=new Ct(Vy),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Vy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class m1{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){he(Dy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yo(t)?he(Dy,"Ignoring IndexedDB error during garbage collection: ",t):await Qo(t)}await this.Rr(3e5)})}}class g1{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Nc.ue);const s=new p1(t);return this.Vr.forEachTarget(e,o=>s.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>s.Er(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(xy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xy):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,l,h,m,g,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),o=this.params.maximumSequenceNumbersToCollect):o=C,h=Date.now(),this.nthSequenceNumber(e,o))).next(C=>(s=C,m=Date.now(),this.removeTargets(e,s,t))).next(C=>(l=C,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(C=>(_=Date.now(),Po()<=Fe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${C} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:C})))}}function y1(r,e){return new g1(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.changes=new bs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?G.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&sl(s.mutation,o,Sn.empty(),We.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,je()).next(()=>s))}getLocalViewOfDocuments(e,t,s=je()){const o=Cs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let h=Ka();return l.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=Cs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,je()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,m)=>{t.set(h,m)})})}computeViews(e,t,s,o){let l=Xr();const h=il(),m=function(){return il()}();return t.forEach((g,_)=>{const E=s.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof Gi)?l=l.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),sl(E.mutation,_,E.mutation.getFieldMask(),We.now())):h.set(_.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((_,E)=>h.set(_,E)),t.forEach((_,E)=>{var C;return m.set(_,new v1(E,(C=h.get(_))!==null&&C!==void 0?C:null))}),m))}recalculateAndSaveOverlays(e,t){const s=il();let o=new dt((h,m)=>h-m),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const m of h)m.keys().forEach(g=>{const _=t.get(g);if(_===null)return;let E=s.get(g)||Sn.empty();E=m.applyToLocalView(_,E),s.set(g,E);const C=(o.get(m.batchId)||je()).add(g);o=o.insert(m.batchId,C)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,E=g.value,C=Cv();E.forEach(P=>{if(!l.has(P)){const $=Dv(t.get(P),s.get(P));$!==null&&C.set(P,$),l=l.add(P)}}),h.push(this.documentOverlayCache.saveOverlays(e,_,C))}return G.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return Te.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ev(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):G.resolve(Cs());let m=cl,g=l;return h.next(_=>G.forEach(_,(E,C)=>(m<C.largestBatchId&&(m=C.largestBatchId),l.get(E)?G.resolve():this.remoteDocumentCache.getEntry(e,E).next(P=>{g=g.insert(E,P)}))).next(()=>this.populateOverlays(e,_,l)).next(()=>this.computeViews(e,g,_,je())).next(E=>({batchId:m,changes:Av(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(s=>{let o=Ka();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Ka();return this.indexManager.getCollectionParents(e,l).next(m=>G.forEach(m,g=>{const _=function(C,P){return new Ms(P,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,s,o).next(E=>{E.forEach((C,P)=>{h=h.insert(C,P)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(h=>{l.forEach((g,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,Kt.newInvalidDocument(E)))});let m=Ka();return h.forEach((g,_)=>{const E=l.get(g);E!==void 0&&sl(E.mutation,_,Sn.empty(),We.now()),Oc(t,_)&&(m=m.insert(g,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return G.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Sr(o.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(o){return{name:o.name,query:c1(o.bundledQuery),readTime:Sr(o.readTime)}}(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(){this.overlays=new dt(Te.comparator),this.kr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Cs();return G.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.wt(e,t,l)}),G.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(s)),G.resolve()}getOverlaysForCollection(e,t,s){const o=Cs(),l=t.length+1,h=new Te(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new dt((_,E)=>_-E);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>s){let E=l.get(_.largestBatchId);E===null&&(E=Cs(),l=l.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=Cs(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,E)=>m.set(_,E)),!(m.size()>=o)););return G.resolve(m)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new zA(t,s));let l=this.kr.get(t);l===void 0&&(l=je(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this.qr=new Ct(xt.Qr),this.$r=new Ct(xt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new xt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Wr(new xt(e,t))}Gr(e,t){e.forEach(s=>this.removeReference(s,t))}zr(e){const t=new Te(new Je([])),s=new xt(t,e),o=new xt(t,e+1),l=[];return this.$r.forEachInRange([s,o],h=>{this.Wr(h),l.push(h.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Te(new Je([])),s=new xt(t,e),o=new xt(t,e+1);let l=je();return this.$r.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new xt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class xt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Te.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ct(xt.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new UA(l,t,s,o);this.mutationQueue.push(h);for(const m of o)this.Yr=this.Yr.add(new xt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?kf:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new xt(t,0),o=new xt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,o],h=>{const m=this.Zr(h.Hr);l.push(m)}),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ct(Le);return t.forEach(o=>{const l=new xt(o,0),h=new xt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],m=>{s=s.add(m.Hr)})}),G.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Te.isDocumentKey(l)||(l=l.child(""));const h=new xt(new Te(l),0);let m=new Ct(Le);return this.Yr.forEachWhile(g=>{const _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Hr)),!0)},h),G.resolve(this.ei(m))}ei(e){const t=[];return e.forEach(s=>{const o=this.Zr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ge(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return G.forEach(t.mutations,o=>{const l=new xt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,t){const s=new xt(t,0),o=this.Yr.firstAfterOrEqual(s);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.ni=e,this.docs=function(){return new dt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return G.resolve(s?s.document.mutableCopy():Kt.newInvalidDocument(t))}getEntries(e,t){let s=Xr();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Kt.newInvalidDocument(o))}),G.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Xr();const h=t.path,m=new Te(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||eA(ZS(E),s)<=0||(o.has(E.key)||Oc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,s,o){ke(9500)}ri(e,t){return G.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new C1(this)}getSize(e){return G.resolve(this.size)}}class C1 extends _1{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)}),G.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.persistence=e,this.ii=new bs(t=>Df(t),Vf),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.si=0,this.oi=new Uf,this.targetCount=0,this._i=$o.ar()}forEachTarget(e,t){return this.ii.forEach((s,o)=>t(o)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),G.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new $o(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.hr(t),G.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ii.forEach((h,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),G.waitFor(l).next(()=>o)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return G.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),G.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return G.resolve(s)}containsKey(e,t){return G.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,t){this.ai={},this.overlays={},this.ui=new Nc(0),this.ci=!1,this.ci=!0,this.li=new T1,this.referenceDelegate=e(this),this.hi=new R1(this),this.indexManager=new h1,this.remoteDocumentCache=function(o){return new A1(o)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new u1(t),this.Ti=new E1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new I1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new S1(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){he("MemoryPersistence","Starting transaction:",e);const o=new P1(this.ui.next());return this.referenceDelegate.Ii(),s(o).next(l=>this.referenceDelegate.di(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ei(e,t){return G.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,t)))}}class P1 extends nA{constructor(e){super(),this.currentSequenceNumber=e}}class zf{constructor(e){this.persistence=e,this.Ai=new Uf,this.Ri=null}static Vi(e){return new zf(e)}get mi(){if(this.Ri)return this.Ri;throw ke(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),G.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(o=>this.mi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.mi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,s=>{const o=Te.fromPath(s);return this.fi(e,o).next(l=>{l||t.removeEntry(o,xe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return G.or([()=>G.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class wc{constructor(e,t){this.persistence=e,this.gi=new bs(s=>sA(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=y1(this,t)}static Vi(e,t){return new wc(e,t)}Ii(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}yr(e){let t=0;return this.gr(e,s=>{t++}).next(()=>t)}gr(e,t){return G.forEach(this.gi,(s,o)=>this.Sr(e,s,o).next(l=>l?G.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,h=>this.Sr(e,h,t).next(m=>{m||(s++,l.removeEntry(h,xe.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zu(e.data.value)),t}Sr(e,t,s){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return G.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=je(),o=je();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Bf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return l0()?8:rA(Qt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ps(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.ys(e,t,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new k1;return this.ws(e,t,h).next(m=>{if(l.result=m,this.Rs)return this.Ss(e,t,h,m.size)})}).next(()=>l.result)}Ss(e,t,s,o){return s.documentReadCount<this.Vs?(Po()<=Fe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ko(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(Po()<=Fe.DEBUG&&he("QueryEngine","Query:",ko(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(Po()<=Fe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ko(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tr(t))):G.resolve())}ps(e,t){if(Ey(t))return G.resolve(null);let s=Tr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=gc(t,null,"F"),s=Tr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=je(...l);return this.gs.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,s).next(g=>{const _=this.bs(t,m);return this.Ds(t,_,h,g.readTime)?this.ps(e,gc(t,null,"F")):this.vs(e,_,t,g)}))})))}ys(e,t,s,o){return Ey(t)||o.isEqual(xe.min())?G.resolve(null):this.gs.getDocuments(e,s).next(l=>{const h=this.bs(t,l);return this.Ds(t,h,s,o)?G.resolve(null):(Po()<=Fe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ko(t)),this.vs(e,h,t,JS(o,cl)).next(m=>m))})}bs(e,t){let s=new Ct(Tv(e));return t.forEach((o,l)=>{Oc(e,l)&&(s=s.add(l))}),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,s){return Po()<=Fe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ko(t)),this.gs.getDocumentsMatchingQuery(e,t,ji.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="LocalStore",x1=3e8;class D1{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new dt(Le),this.Ms=new bs(l=>Df(l),Vf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w1(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function V1(r,e,t,s){return new D1(r,e,t,s)}async function Wv(r,e){const t=De(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],m=[];let g=je();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of l){m.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(s,g).next(_=>({Bs:_,removedBatchIds:h,addedBatchIds:m}))})})}function O1(r,e){const t=De(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(m,g,_,E){const C=_.batch,P=C.keys();let $=G.resolve();return P.forEach(q=>{$=$.next(()=>E.getEntry(g,q)).next(Y=>{const W=_.docVersions.get(q);Ge(W!==null,48541),Y.version.compareTo(W)<0&&(C.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),E.addEntry(Y)))})}),$.next(()=>m.mutationQueue.removeMutationBatch(g,C))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=je();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function Gv(r){const e=De(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function L1(r,e){const t=De(r),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const m=[];e.targetChanges.forEach((E,C)=>{const P=o.get(C);if(!P)return;m.push(t.hi.removeMatchingKeys(l,E.removedDocuments,C).next(()=>t.hi.addMatchingKeys(l,E.addedDocuments,C)));let $=P.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(C)!==null?$=$.withResumeToken(Ut.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(E.resumeToken,s)),o=o.insert(C,$),function(Y,W,me){return Y.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=x1?!0:me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0}(P,$,E)&&m.push(t.hi.updateTargetData(l,$))});let g=Xr(),_=je();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),m.push(M1(l,h,e.documentUpdates).next(E=>{g=E.Ls,_=E.ks})),!s.isEqual(xe.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next(C=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s));m.push(E)}return G.waitFor(m).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,_)).next(()=>g)}).then(l=>(t.Fs=o,l))}function M1(r,e,t){let s=je(),o=je();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=Xr();return t.forEach((m,g)=>{const _=l.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(xe.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):he($f,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)}),{Ls:h,ks:o}})}function b1(r,e){const t=De(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=kf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function F1(r,e){const t=De(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.hi.getTargetData(s,e).next(l=>l?(o=l,G.resolve(o)):t.hi.allocateTargetId(s).next(h=>(o=new Ni(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s})}async function rf(r,e,t){const s=De(r),o=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Yo(h))throw h;he($f,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function Oy(r,e,t){const s=De(r);let o=xe.min(),l=je();return s.persistence.runTransaction("Execute query","readwrite",h=>function(g,_,E){const C=De(g),P=C.Ms.get(E);return P!==void 0?G.resolve(C.Fs.get(P)):C.hi.getTargetData(_,E)}(s,h,Tr(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(h,m.targetId).next(g=>{l=g})}).next(()=>s.Cs.getDocumentsMatchingQuery(h,e,t?o:xe.min(),t?l:je())).next(m=>(j1(s,SA(e),m),{documents:m,qs:l})))}function j1(r,e,t){let s=r.xs.get(e)||xe.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.xs.set(e,s)}class Ly{constructor(){this.activeTargetIds=NA()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U1{constructor(){this.Fo=new Ly,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ly,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="ConnectivityMonitor";class by{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){he(My,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){he(My,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gu=null;function sf(){return Gu===null?Gu=function(){return 268435456+Math.round(2147483648*Math.random())}():Gu++,"0x"+Gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="RestConnection",B1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $1{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===fc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const h=sf(),m=this.Go(e,t.toUriEncodedString());he(Od,`Sending RPC '${e}' ${h}:`,m,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,l);const{host:_}=new URL(m),E=qo(_);return this.jo(e,m,g,s,E).then(C=>(he(Od,`Received RPC '${e}' ${h}: `,C),C),C=>{throw Fi(Od,`RPC '${e}' ${h} failed with error: `,C,"url: ",m,"request:",s),C})}Jo(e,t,s,o,l,h){return this.Wo(e,t,s,o,l)}zo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ko}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),s&&s.headers.forEach((o,l)=>e[l]=o)}Go(e,t){const s=B1[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class q1 extends $1{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,l){const h=sf();return new Promise((m,g)=>{const _=new Y_;_.setWithCredentials(!0),_.listenOnce(X_.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Ju.NO_ERROR:const C=_.getResponseJson();he(Wt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(C)),m(C);break;case Ju.TIMEOUT:he(Wt,`RPC '${e}' ${h} timed out`),g(new ae(H.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const P=_.getStatus();if(he(Wt,`RPC '${e}' ${h} failed with status:`,P,"response text:",_.getResponseText()),P>0){let $=_.getResponseJson();Array.isArray($)&&($=$[0]);const q=$==null?void 0:$.error;if(q&&q.status&&q.message){const Y=function(me){const de=me.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(de)>=0?de:H.UNKNOWN}(q.status);g(new ae(Y,q.message))}else g(new ae(H.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new ae(H.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{c_:e,streamId:h,l_:_.getLastErrorCode(),h_:_.getLastError()})}}finally{he(Wt,`RPC '${e}' ${h} completed.`)}});const E=JSON.stringify(o);he(Wt,`RPC '${e}' ${h} sending request:`,o),_.send(t,"POST",E,s,15)})}P_(e,t,s){const o=sf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=ev(),m=Z_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const E=l.join("");he(Wt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const C=h.createWebChannel(E,g);this.T_(C);let P=!1,$=!1;const q=new H1({Ho:W=>{$?he(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,W):(P||(he(Wt,`Opening RPC '${e}' stream ${o} transport.`),C.open(),P=!0),he(Wt,`RPC '${e}' stream ${o} sending:`,W),C.send(W))},Yo:()=>C.close()}),Y=(W,me,de)=>{W.listen(me,se=>{try{de(se)}catch(Se){setTimeout(()=>{throw Se},0)}})};return Y(C,Ga.EventType.OPEN,()=>{$||(he(Wt,`RPC '${e}' stream ${o} transport opened.`),q.s_())}),Y(C,Ga.EventType.CLOSE,()=>{$||($=!0,he(Wt,`RPC '${e}' stream ${o} transport closed`),q.__(),this.I_(C))}),Y(C,Ga.EventType.ERROR,W=>{$||($=!0,Fi(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,W.name,"Message:",W.message),q.__(new ae(H.UNAVAILABLE,"The operation could not be completed")))}),Y(C,Ga.EventType.MESSAGE,W=>{var me;if(!$){const de=W.data[0];Ge(!!de,16349);const se=de,Se=(se==null?void 0:se.error)||((me=se[0])===null||me===void 0?void 0:me.error);if(Se){he(Wt,`RPC '${e}' stream ${o} received error:`,Se);const qe=Se.status;let Ee=function(k){const x=wt[k];if(x!==void 0)return Ov(x)}(qe),O=Se.message;Ee===void 0&&(Ee=H.INTERNAL,O="Unknown error status: "+qe+" with message "+Se.message),$=!0,q.__(new ae(Ee,O)),C.close()}else he(Wt,`RPC '${e}' stream ${o} received:`,de),q.a_(de)}}),Y(m,J_.STAT_EVENT,W=>{W.stat===Wd.PROXY?he(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):W.stat===Wd.NOPROXY&&he(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{q.o_()},0),q}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(r){return new QA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="PersistentStream";class Qv{constructor(e,t,s,o,l,h,m,g){this.Fi=e,this.w_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Kv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(Yr(t.toString()),Yr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.b_===t&&this.W_(s,o)},s=>{e(()=>{const o=new ae(H.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)})})}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{s(()=>this.G_(o))}),this.stream.onMessage(o=>{s(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return he(Fy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(he(Fy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class W1 extends Qv{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=JA(this.serializer,e),s=function(l){if(!("targetChange"in l))return xe.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?xe.min():h.readTime?Sr(h.readTime):xe.min()}(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=nf(this.serializer),t.addTarget=function(l,h){let m;const g=h.target;if(m=Xd(g)?{documents:t1(l,g)}:{query:n1(l,g).Vt},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=bv(l,h.resumeToken);const _=Zd(l,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(xe.min())>0){m.readTime=vc(l,h.snapshotVersion.toTimestamp());const _=Zd(l,h.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,e);const s=i1(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=nf(this.serializer),t.removeTarget=e,this.k_(t)}}class G1 extends Qv{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=e1(e.writeResults,e.commitTime),s=Sr(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=nf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>ZA(this.serializer,s))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{}class Q1 extends K1{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ae(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Wo(e,ef(t,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(H.UNKNOWN,l.toString())})}Jo(e,t,s,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Jo(e,ef(t,s),o,h,m,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(H.UNKNOWN,h.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Y1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Yr(t),this._a=!1):he("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="RemoteStore";class X1{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(h=>{s.enqueueAndForget(async()=>{Fs(this)&&(he(Vs,"Restarting streams for network reachability change."),await async function(g){const _=De(g);_.Ia.add(4),await Sl(_),_.Aa.set("Unknown"),_.Ia.delete(4),await jc(_)}(this))})}),this.Aa=new Y1(s,o)}}async function jc(r){if(Fs(r))for(const e of r.da)await e(!0)}async function Sl(r){for(const e of r.da)await e(!1)}function Yv(r,e){const t=De(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Gf(t)?Wf(t):Xo(t).x_()&&qf(t,e))}function Hf(r,e){const t=De(r),s=Xo(t);t.Ta.delete(e),s.x_()&&Xv(t,e),t.Ta.size===0&&(s.x_()?s.B_():Fs(t)&&t.Aa.set("Unknown"))}function qf(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xo(r).H_(e)}function Xv(r,e){r.Ra.$e(e),Xo(r).Y_(e)}function Wf(r){r.Ra=new qA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),Xo(r).start(),r.Aa.aa()}function Gf(r){return Fs(r)&&!Xo(r).M_()&&r.Ta.size>0}function Fs(r){return De(r).Ia.size===0}function Jv(r){r.Ra=void 0}async function J1(r){r.Aa.set("Online")}async function Z1(r){r.Ta.forEach((e,t)=>{qf(r,e)})}async function eC(r,e){Jv(r),Gf(r)?(r.Aa.la(e),Wf(r)):r.Aa.set("Unknown")}async function tC(r,e,t){if(r.Aa.set("Online"),e instanceof Mv&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ta.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ta.delete(m),o.Ra.removeTarget(m))}(r,e)}catch(s){he(Vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ec(r,s)}else if(e instanceof nc?r.Ra.Ye(e):e instanceof Lv?r.Ra.it(e):r.Ra.et(e),!t.isEqual(xe.min()))try{const s=await Gv(r.localStore);t.compareTo(s)>=0&&await function(l,h){const m=l.Ra.Pt(h);return m.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.Ta.get(_);E&&l.Ta.set(_,E.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,_)=>{const E=l.Ta.get(g);if(!E)return;l.Ta.set(g,E.withResumeToken(Ut.EMPTY_BYTE_STRING,E.snapshotVersion)),Xv(l,g);const C=new Ni(E.target,g,_,E.sequenceNumber);qf(l,C)}),l.remoteSyncer.applyRemoteEvent(m)}(r,t)}catch(s){he(Vs,"Failed to raise snapshot:",s),await Ec(r,s)}}async function Ec(r,e,t){if(!Yo(e))throw e;r.Ia.add(1),await Sl(r),r.Aa.set("Offline"),t||(t=()=>Gv(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{he(Vs,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await jc(r)})}function Zv(r,e){return e().catch(t=>Ec(r,t,e))}async function Uc(r){const e=De(r),t=$i(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:kf;for(;nC(e);)try{const o=await b1(e.localStore,s);if(o===null){e.Pa.length===0&&t.B_();break}s=o.batchId,rC(e,o)}catch(o){await Ec(e,o)}ew(e)&&tw(e)}function nC(r){return Fs(r)&&r.Pa.length<10}function rC(r,e){r.Pa.push(e);const t=$i(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function ew(r){return Fs(r)&&!$i(r).M_()&&r.Pa.length>0}function tw(r){$i(r).start()}async function iC(r){$i(r).na()}async function sC(r){const e=$i(r);for(const t of r.Pa)e.X_(t.mutations)}async function oC(r,e,t){const s=r.Pa.shift(),o=bf.from(s,e,t);await Zv(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Uc(r)}async function aC(r,e){e&&$i(r).Z_&&await async function(s,o){if(function(h){return $A(h)&&h!==H.ABORTED}(o.code)){const l=s.Pa.shift();$i(s).N_(),await Zv(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Uc(s)}}(r,e),ew(r)&&tw(r)}async function jy(r,e){const t=De(r);t.asyncQueue.verifyOperationInProgress(),he(Vs,"RemoteStore received new credentials");const s=Fs(t);t.Ia.add(3),await Sl(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await jc(t)}async function lC(r,e){const t=De(r);e?(t.Ia.delete(2),await jc(t)):e||(t.Ia.add(2),await Sl(t),t.Aa.set("Unknown"))}function Xo(r){return r.Va||(r.Va=function(t,s,o){const l=De(t);return l.ia(),new W1(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:J1.bind(null,r),e_:Z1.bind(null,r),n_:eC.bind(null,r),J_:tC.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),Gf(r)?Wf(r):r.Aa.set("Unknown")):(await r.Va.stop(),Jv(r))})),r.Va}function $i(r){return r.ma||(r.ma=function(t,s,o){const l=De(t);return l.ia(),new G1(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:iC.bind(null,r),n_:aC.bind(null,r),ea:sC.bind(null,r),ta:oC.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await Uc(r)):(await r.ma.stop(),r.Pa.length>0&&(he(Vs,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,m=new Kf(e,t,h,o,l);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qf(r,e){if(Yr("AsyncQueue",`${e}: ${r}`),Yo(r))return new ae(H.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{static emptySet(e){return new Lo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Te.comparator(t.key,s.key):(t,s)=>Te.comparator(t.key,s.key),this.keyedMap=Ka(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Lo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.fa=new dt(Te.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ke(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ho{constructor(e,t,s,o,l,h,m,g,_){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach(m=>{h.push({type:0,doc:m})}),new Ho(e,t,Lo.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class cC{constructor(){this.queries=zy(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=De(t),l=o.queries;o.queries=zy(),l.forEach((h,m)=>{for(const g of m.wa)g.onError(s)})})(this,new ae(H.ABORTED,"Firestore shutting down"))}}function zy(){return new bs(r=>Iv(r),Vc)}async function nw(r,e){const t=De(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(s=2):(l=new uC,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Qf(h,`Initialization of query '${ko(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&Yf(t)}async function rw(r,e){const t=De(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function hC(r,e){const t=De(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.wa)m.Ca(o)&&(s=!0);h.ya=o}}s&&Yf(t)}function dC(r,e,t){const s=De(r),o=s.queries.get(e);if(o)for(const l of o.wa)l.onError(t);s.queries.delete(e)}function Yf(r){r.Da.forEach(e=>{e.next()})}var of,By;(By=of||(of={})).Fa="default",By.Cache="cache";class iw{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ho(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.key=e}}class ow{constructor(e){this.key=e}}class fC{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=je(),this.mutatedKeys=je(),this.Xa=Tv(e),this.eu=new Lo(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new Uy,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,C)=>{const P=o.get(E),$=Oc(this.query,C)?C:null,q=!!P&&this.mutatedKeys.has(P.key),Y=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let W=!1;P&&$?P.data.isEqual($.data)?q!==Y&&(s.track({type:3,doc:$}),W=!0):this.iu(P,$)||(s.track({type:2,doc:$}),W=!0,(g&&this.Xa($,g)>0||_&&this.Xa($,_)<0)&&(m=!0)):!P&&$?(s.track({type:0,doc:$}),W=!0):P&&!$&&(s.track({type:1,doc:P}),W=!0,(g||_)&&(m=!0)),W&&($?(h=h.add($),l=Y?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{eu:h,ru:s,Ds:m,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort((E,C)=>function($,q){const Y=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{At:W})}};return Y($)-Y(q)}(E.type,C.type)||this.Xa(E.doc,C.doc)),this.su(s),o=o!=null&&o;const m=t&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,_=g!==this.Ya;return this.Ya=g,h.length!==0||_?{snapshot:new Ho(this.query,e.eu,l,h,e.mutatedKeys,g===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:m}:{_u:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Uy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=je(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const t=[];return e.forEach(s=>{this.Za.has(s)||t.push(new ow(s))}),this.Za.forEach(s=>{e.has(s)||t.push(new sw(s))}),t}uu(e){this.Ha=e.qs,this.Za=je();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ho.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Xf="SyncEngine";class pC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class mC{constructor(e){this.key=e,this.lu=!1}}class gC{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new bs(m=>Iv(m),Vc),this.Tu=new Map,this.Iu=new Set,this.du=new dt(Te.comparator),this.Eu=new Map,this.Au=new Uf,this.Ru={},this.Vu=new Map,this.mu=$o.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function yC(r,e,t=!0){const s=dw(r);let o;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await aw(s,e,t,!0),o}async function _C(r,e){const t=dw(r);await aw(t,e,!0,!1)}async function aw(r,e,t,s){const o=await F1(r.localStore,Tr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let m;return s&&(m=await vC(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Yv(r.remoteStore,o),m}async function vC(r,e,t,s,o){r.gu=(C,P,$)=>async function(Y,W,me,de){let se=W.view.nu(me);se.Ds&&(se=await Oy(Y.localStore,W.query,!1).then(({documents:O})=>W.view.nu(O,se)));const Se=de&&de.targetChanges.get(W.targetId),qe=de&&de.targetMismatches.get(W.targetId)!=null,Ee=W.view.applyChanges(se,Y.isPrimaryClient,Se,qe);return Hy(Y,W.targetId,Ee._u),Ee.snapshot}(r,C,P,$);const l=await Oy(r.localStore,e,!0),h=new fC(e,l.qs),m=h.nu(l.documents),g=Tl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),_=h.applyChanges(m,r.isPrimaryClient,g);Hy(r,t,_._u);const E=new pC(e,t,h);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),_.snapshot}async function wC(r,e,t){const s=De(r),o=s.Pu.get(e),l=s.Tu.get(o.targetId);if(l.length>1)return s.Tu.set(o.targetId,l.filter(h=>!Vc(h,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await rf(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Hf(s.remoteStore,o.targetId),af(s,o.targetId)}).catch(Qo)):(af(s,o.targetId),await rf(s.localStore,o.targetId,!0))}async function EC(r,e){const t=De(r),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Hf(t.remoteStore,s.targetId))}async function IC(r,e,t){const s=kC(r);try{const o=await function(h,m){const g=De(h),_=We.now(),E=m.reduce(($,q)=>$.add(q.key),je());let C,P;return g.persistence.runTransaction("Locally write mutations","readwrite",$=>{let q=Xr(),Y=je();return g.Os.getEntries($,E).next(W=>{q=W,q.forEach((me,de)=>{de.isValidDocument()||(Y=Y.add(me))})}).next(()=>g.localDocuments.getOverlayedDocuments($,q)).next(W=>{C=W;const me=[];for(const de of m){const se=FA(de,C.get(de.key).overlayedDocument);se!=null&&me.push(new Gi(de.key,se,pv(se.value.mapValue),jn.exists(!0)))}return g.mutationQueue.addMutationBatch($,_,me,m)}).next(W=>{P=W;const me=W.applyToLocalDocumentSet(C,Y);return g.documentOverlayCache.saveOverlays($,W.batchId,me)})}).then(()=>({batchId:P.batchId,changes:Av(C)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,m,g){let _=h.Ru[h.currentUser.toKey()];_||(_=new dt(Le)),_=_.insert(m,g),h.Ru[h.currentUser.toKey()]=_}(s,o.batchId,t),await Al(s,o.changes),await Uc(s.remoteStore)}catch(o){const l=Qf(o,"Failed to persist write");t.reject(l)}}async function lw(r,e){const t=De(r);try{const s=await L1(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Eu.get(l);h&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?Ge(h.lu,14607):o.removedDocuments.size>0&&(Ge(h.lu,42227),h.lu=!1))}),await Al(t,s,e)}catch(s){await Qo(s)}}function $y(r,e,t){const s=De(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach((l,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const g=De(h);g.onlineState=m;let _=!1;g.queries.forEach((E,C)=>{for(const P of C.wa)P.va(m)&&(_=!0)}),_&&Yf(g)}(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function TC(r,e,t){const s=De(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let h=new dt(Te.comparator);h=h.insert(l,Kt.newNoDocument(l,xe.min()));const m=je().add(l),g=new bc(xe.min(),new Map,new dt(Le),h,m);await lw(s,g),s.du=s.du.remove(l),s.Eu.delete(e),Jf(s)}else await rf(s.localStore,e,!1).then(()=>af(s,e,t)).catch(Qo)}async function SC(r,e){const t=De(r),s=e.batch.batchId;try{const o=await O1(t.localStore,e);cw(t,s,null),uw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Al(t,o)}catch(o){await Qo(o)}}async function AC(r,e,t){const s=De(r);try{const o=await function(h,m){const g=De(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.mutationQueue.lookupMutationBatch(_,m).next(C=>(Ge(C!==null,37113),E=C.keys(),g.mutationQueue.removeMutationBatch(_,C))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>g.localDocuments.getDocuments(_,E))})}(s.localStore,e);cw(s,e,t),uw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Al(s,o)}catch(o){await Qo(o)}}function uw(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function cw(r,e,t){const s=De(r);let o=s.Ru[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function af(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Tu.get(e))r.Pu.delete(s),t&&r.hu.pu(s,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(s=>{r.Au.containsKey(s)||hw(r,s)})}function hw(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Hf(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),Jf(r))}function Hy(r,e,t){for(const s of t)s instanceof sw?(r.Au.addReference(s.key,e),CC(r,s)):s instanceof ow?(he(Xf,"Document no longer in limbo: "+s.key),r.Au.removeReference(s.key,e),r.Au.containsKey(s.key)||hw(r,s.key)):ke(19791,{yu:s})}function CC(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Iu.has(s)||(he(Xf,"New document in limbo: "+t),r.Iu.add(s),Jf(r))}function Jf(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Te(Je.fromString(e)),s=r.mu.next();r.Eu.set(s,new mC(t)),r.du=r.du.insert(t,s),Yv(r.remoteStore,new Ni(Tr(Of(t.path)),s,"TargetPurposeLimboResolution",Nc.ue))}}async function Al(r,e,t){const s=De(r),o=[],l=[],h=[];s.Pu.isEmpty()||(s.Pu.forEach((m,g)=>{h.push(s.gu(g,e,t).then(_=>{var E;if((_||t)&&s.isPrimaryClient){const C=_?!_.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,C?"current":"not-current")}if(_){o.push(_);const C=Bf.Es(g.targetId,_);l.push(C)}}))}),await Promise.all(h),s.hu.J_(o),await async function(g,_){const E=De(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>G.forEach(_,P=>G.forEach(P.Is,$=>E.persistence.referenceDelegate.addReference(C,P.targetId,$)).next(()=>G.forEach(P.ds,$=>E.persistence.referenceDelegate.removeReference(C,P.targetId,$)))))}catch(C){if(!Yo(C))throw C;he($f,"Failed to update sequence numbers: "+C)}for(const C of _){const P=C.targetId;if(!C.fromCache){const $=E.Fs.get(P),q=$.snapshotVersion,Y=$.withLastLimboFreeSnapshotVersion(q);E.Fs=E.Fs.insert(P,Y)}}}(s.localStore,l))}async function RC(r,e){const t=De(r);if(!t.currentUser.isEqual(e)){he(Xf,"User change. New user:",e.toKey());const s=await Wv(t.localStore,e);t.currentUser=e,function(l,h){l.Vu.forEach(m=>{m.forEach(g=>{g.reject(new ae(H.CANCELLED,h))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Al(t,s.Bs)}}function PC(r,e){const t=De(r),s=t.Eu.get(e);if(s&&s.lu)return je().add(s.key);{let o=je();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const m=t.Pu.get(h);o=o.unionWith(m.view.tu)}return o}}function dw(r){const e=De(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=lw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TC.bind(null,e),e.hu.J_=hC.bind(null,e.eventManager),e.hu.pu=dC.bind(null,e.eventManager),e}function kC(r){const e=De(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AC.bind(null,e),e}class Ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return V1(this.persistence,new N1,e.initialUser,this.serializer)}Du(e){return new qv(zf.Vi,this.serializer)}bu(e){return new U1}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ic.provider={build:()=>new Ic};class NC extends Ic{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ge(this.persistence.referenceDelegate instanceof wc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new m1(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new qv(s=>wc.Vi(s,t),this.serializer)}}class lf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>$y(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=RC.bind(null,this.syncEngine),await lC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cC}()}createDatastore(e){const t=Fc(e.databaseInfo.databaseId),s=function(l){return new q1(l)}(e.databaseInfo);return function(l,h,m,g){return new Q1(l,h,m,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,h,m){return new X1(s,o,l,h,m)}(this.localStore,this.datastore,e.asyncQueue,t=>$y(this.syncEngine,t,0),function(){return by.C()?new by:new z1}())}createSyncEngine(e,t){return function(o,l,h,m,g,_,E){const C=new gC(o,l,h,m,g,_);return E&&(C.fu=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=De(o);he(Vs,"RemoteStore shutting down."),l.Ia.add(5),await Sl(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}lf.provider={build:()=>new lf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Yr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="FirestoreClient";class xC{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Gt.UNAUTHENTICATED,this.clientId=Rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{he(Hi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(he(Hi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Qf(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Md(r,e){r.asyncQueue.verifyOperationInProgress(),he(Hi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await Wv(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>{Fi("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{he("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{Fi("Terminating Firestore due to IndexedDb database deletion failed",o)})}),r._offlineComponents=e}async function qy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await DC(r);he(Hi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>jy(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>jy(e.remoteStore,o)),r._onlineComponents=e}async function DC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(Hi,"Using user provided OfflineComponentProvider");try{await Md(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===H.FAILED_PRECONDITION||o.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Fi("Error using user provided cache. Falling back to memory cache: "+t),await Md(r,new Ic)}}else he(Hi,"Using default OfflineComponentProvider"),await Md(r,new NC(void 0));return r._offlineComponents}async function pw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(Hi,"Using user provided OnlineComponentProvider"),await qy(r,r._uninitializedComponentsProvider._online)):(he(Hi,"Using default OnlineComponentProvider"),await qy(r,new lf))),r._onlineComponents}function VC(r){return pw(r).then(e=>e.syncEngine)}async function mw(r){const e=await pw(r),t=e.eventManager;return t.onListen=yC.bind(null,e.syncEngine),t.onUnlisten=wC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_C.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=EC.bind(null,e.syncEngine),t}function OC(r,e,t={}){const s=new Gr;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,m,g,_){const E=new fw({next:P=>{E.Ou(),h.enqueueAndForget(()=>rw(l,C));const $=P.docs.has(m);!$&&P.fromCache?_.reject(new ae(H.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&P.fromCache&&g&&g.source==="server"?_.reject(new ae(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(P)},error:P=>_.reject(P)}),C=new iw(Of(m.path),E,{includeMetadataChanges:!0,ka:!0});return nw(l,C)}(await mw(r),r.asyncQueue,e,t,s)),s.promise}function LC(r,e,t={}){const s=new Gr;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,m,g,_){const E=new fw({next:P=>{E.Ou(),h.enqueueAndForget(()=>rw(l,C)),P.fromCache&&g.source==="server"?_.reject(new ae(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(P)},error:P=>_.reject(P)}),C=new iw(m,E,{includeMetadataChanges:!0,ka:!0});return nw(l,C)}(await mw(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="firestore.googleapis.com",Gy=!0;class Ky{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yw,this.ssl=Gy}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Gy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Hv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<f1)throw new ae(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ae(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ae(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ae(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cl{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ky({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ky(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new BS;switch(s.type){case"firstParty":return new WS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ae(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Wy.get(t);s&&(he("ComponentProvider","Removing Datastore"),Wy.delete(t),s.terminate())}(this),Promise.resolve()}}function MC(r,e,t,s={}){var o;r=zn(r,Cl);const l=qo(e),h=r._getSettings(),m=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${t}`;l&&(u_(`https://${g}`),c_("Firestore",!0)),h.host!==yw&&h.host!==g&&Fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _=Object.assign(Object.assign({},h),{host:g,ssl:l,emulatorOptions:s});if(!bi(_,m)&&(r._setSettings(_),s.mockUserToken)){let E,C;if(typeof s.mockUserToken=="string")E=s.mockUserToken,C=Gt.MOCK_USER;else{E=ZE(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const P=s.mockUserToken.sub||s.mockUserToken.user_id;if(!P)throw new ae(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Gt(P)}r._authCredentials=new $S(new nv(E,C))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class yt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yt(this.firestore,e,this._key)}toJSON(){return{type:yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(El(t,yt._jsonSchema))return new yt(e,s||null,new Te(Je.fromString(t.referencePath)))}}yt._jsonSchemaVersion="firestore/documentReference/1.0",yt._jsonSchema={type:It("string",yt._jsonSchemaVersion),referencePath:It("string")};class Mi extends Zr{constructor(e,t,s){super(e,t,Of(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new Te(e))}withConverter(e){return new Mi(this.firestore,e,this._path)}}function In(r,e,...t){if(r=jt(r),Pf("collection","path",e),r instanceof Cl){const s=Je.fromString(e,...t);return ay(s),new Mi(r,null,s)}{if(!(r instanceof yt||r instanceof Mi))throw new ae(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Je.fromString(e,...t));return ay(s),new Mi(r.firestore,null,s)}}function $r(r,e){if(r=zn(r,Cl),Pf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ae(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zr(r,null,function(s){return new Ms(Je.emptyPath(),s)}(e))}function ir(r,e,...t){if(r=jt(r),arguments.length===1&&(e=Rf.newId()),Pf("doc","path",e),r instanceof Cl){const s=Je.fromString(e,...t);return oy(s),new yt(r,null,new Te(s))}{if(!(r instanceof yt||r instanceof Mi))throw new ae(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Je.fromString(e,...t));return oy(s),new yt(r.firestore,r instanceof Mi?r.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="AsyncQueue";class Yy{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Kv(this,"async_queue_retry"),this.oc=()=>{const s=Ld();s&&he(Qy,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Ld();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ld();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Gr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Yo(e))throw e;he(Qy,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,Yr("INTERNAL UNHANDLED ERROR: ",Xy(s)),s}).then(s=>(this.nc=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Kf.createAndSchedule(this,e,t,s,l=>this.lc(l));return this.ec.push(o),o}ac(){this.tc&&ke(47125,{hc:Xy(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Xy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class js extends Cl{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Yy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yy(e),this._firestoreClient=void 0,await e}}}function bC(r,e){const t=typeof r=="object"?r:pf(),s=typeof r=="string"?r:fc,o=ff(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=XE("firestore");l&&MC(o,...l)}return o}function Zf(r){if(r._terminated)throw new ae(H.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||FC(r),r._firestoreClient}function FC(r){var e,t,s;const o=r._freezeSettings(),l=function(m,g,_,E){return new lA(m,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,gw(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new xC(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(Ut.fromBase64String(e))}catch(t){throw new ae(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(El(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:It("string",Fn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ar._jsonSchemaVersion}}static fromJSON(e){if(El(e,Ar._jsonSchema))return new Ar(e.latitude,e.longitude)}}Ar._jsonSchemaVersion="firestore/geoPoint/1.0",Ar._jsonSchema={type:It("string",Ar._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(El(e,Cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Cr(e.vectorValues);throw new ae(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cr._jsonSchemaVersion="firestore/vectorValue/1.0",Cr._jsonSchema={type:It("string",Cr._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=/^__.*__$/;class UC{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Gi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Il(e,this.data,t,this.fieldTransforms)}}class _w{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Gi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ec:r})}}class $c{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new $c(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Tc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(vw(this.Ec)&&jC.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class zC{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Fc(e)}Dc(e,t,s,o=!1){return new $c({Ec:e,methodName:t,bc:s,path:Ft.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hc(r){const e=r._freezeSettings(),t=Fc(r._databaseId);return new zC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ww(r,e,t,s,o,l={}){const h=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);tp("Data must be an object, but it was:",h,s);const m=Ew(s,h);let g,_;if(l.merge)g=new Sn(h.fieldMask),_=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const C of l.mergeFields){const P=uf(e,C,t);if(!h.contains(P))throw new ae(H.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);Tw(E,P)||E.push(P)}g=new Sn(E),_=h.fieldTransforms.filter(C=>g.covers(C.field))}else g=null,_=h.fieldTransforms;return new UC(new dn(m),g,_)}class qc extends Bc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qc}}function BC(r,e,t){return new $c({Ec:3,bc:e.settings.bc,methodName:r._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ep extends Bc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=BC(this,e,!0),s=this.vc.map(l=>Jo(l,t)),o=new Bo(s);return new OA(e.path,o)}isEqual(e){return e instanceof ep&&bi(this.vc,e.vc)}}function $C(r,e,t,s){const o=r.Dc(1,e,t);tp("Data must be an object, but it was:",o,s);const l=[],h=dn.empty();Wi(s,(g,_)=>{const E=np(e,g,t);_=jt(_);const C=o.gc(E);if(_ instanceof qc)l.push(E);else{const P=Jo(_,C);P!=null&&(l.push(E),h.set(E,P))}});const m=new Sn(l);return new _w(h,m,o.fieldTransforms)}function HC(r,e,t,s,o,l){const h=r.Dc(1,e,t),m=[uf(e,s,t)],g=[o];if(l.length%2!=0)throw new ae(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<l.length;P+=2)m.push(uf(e,l[P])),g.push(l[P+1]);const _=[],E=dn.empty();for(let P=m.length-1;P>=0;--P)if(!Tw(_,m[P])){const $=m[P];let q=g[P];q=jt(q);const Y=h.gc($);if(q instanceof qc)_.push($);else{const W=Jo(q,Y);W!=null&&(_.push($),E.set($,W))}}const C=new Sn(_);return new _w(E,C,h.fieldTransforms)}function qC(r,e,t,s=!1){return Jo(t,r.Dc(s?4:3,e))}function Jo(r,e){if(Iw(r=jt(r)))return tp("Unsupported field value:",e,r),Ew(r,e);if(r instanceof Bc)return function(s,o){if(!vw(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const m of s){let g=Jo(m,o.yc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=jt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return xA(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=We.fromDate(s);return{timestampValue:vc(o.serializer,l)}}if(s instanceof We){const l=new We(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:vc(o.serializer,l)}}if(s instanceof Ar)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Fn)return{bytesValue:bv(o.serializer,s._byteString)};if(s instanceof yt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:jf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Cr)return function(h,m){return{mapValue:{fields:{[dv]:{stringValue:fv},[pc]:{arrayValue:{values:h.toArray().map(_=>{if(typeof _!="number")throw m.wc("VectorValues must only contain numeric values.");return Lf(m.serializer,_)})}}}}}}(s,o);throw o.wc(`Unsupported field value: ${kc(s)}`)}(r,e)}function Ew(r,e){const t={};return ov(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(r,(s,o)=>{const l=Jo(o,e.Vc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function Iw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof We||r instanceof Ar||r instanceof Fn||r instanceof yt||r instanceof Bc||r instanceof Cr)}function tp(r,e,t){if(!Iw(t)||!iv(t)){const s=kc(t);throw s==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+s)}}function uf(r,e,t){if((e=jt(e))instanceof zc)return e._internalPath;if(typeof e=="string")return np(r,e);throw Tc("Field path arguments must be of type string or ",r,!1,void 0,t)}const WC=new RegExp("[~\\*/\\[\\]]");function np(r,e,t){if(e.search(WC)>=0)throw Tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch{throw Tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Tc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ae(H.INVALID_ARGUMENT,m+r+g)}function Tw(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class GC extends Sw{data(){return super.data()}}function Wc(r,e){return typeof e=="string"?np(r,e):e instanceof zc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ae(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rp{}class ip extends rp{}function Er(r,e,...t){let s=[];e instanceof rp&&s.push(e),s=s.concat(t),function(l){const h=l.filter(g=>g instanceof sp).length,m=l.filter(g=>g instanceof Gc).length;if(h>1||h>0&&m>0)throw new ae(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Gc extends ip{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Gc(e,t,s)}_apply(e){const t=this._parse(e);return Aw(e._query,t),new Zr(e.firestore,e.converter,Jd(e._query,t))}_parse(e){const t=Hc(e.firestore);return function(l,h,m,g,_,E,C){let P;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ae(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Zy(C,E);const q=[];for(const Y of C)q.push(Jy(g,l,Y));P={arrayValue:{values:q}}}else P=Jy(g,l,C)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Zy(C,E),P=qC(m,h,C,E==="in"||E==="not-in");return Et.create(_,E,P)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ya(r,e,t){const s=e,o=Wc("where",r);return Gc._create(o,s,t)}class sp extends rp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sp(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const m=l.getFlattenedFilters();for(const g of m)Aw(h,g),h=Jd(h,g)}(e._query,t),new Zr(e.firestore,e.converter,Jd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class op extends ip{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new op(e,t)}_apply(e){const t=function(o,l,h){if(o.startAt!==null)throw new ae(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pl(l,h)}(e._query,this._field,this._direction);return new Zr(e.firestore,e.converter,function(o,l){const h=o.explicitOrderBy.concat([l]);return new Ms(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Xa(r,e="asc"){const t=e,s=Wc("orderBy",r);return op._create(s,t)}class ap extends ip{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new ap(e,t,s)}_apply(e){return new Zr(e.firestore,e.converter,gc(e._query,this._limit,this._limitType))}}function QC(r){return ap._create("limit",r,"F")}function Jy(r,e,t){if(typeof(t=jt(t))=="string"){if(t==="")throw new ae(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ev(e)&&t.indexOf("/")!==-1)throw new ae(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Je.fromString(t));if(!Te.isDocumentKey(s))throw new ae(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return my(r,new Te(s))}if(t instanceof yt)return my(r,t._key);throw new ae(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kc(t)}.`)}function Zy(r,e){if(!Array.isArray(r)||r.length===0)throw new ae(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Aw(r,e){const t=function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YC{convertValue(e,t="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Wi(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[pc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>gt(h.doubleValue));return new Cr(l)}convertGeoPoint(e){return new Ar(gt(e.latitude),gt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Dc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const t=Ui(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Je.fromString(e);Ge($v(s),9688,{name:e});const o=new dl(s.get(1),s.get(3)),l=new Te(s.popFirst(5));return o.isEqual(t)||Yr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ps extends Sw{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Wc("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ps._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ps._jsonSchema={type:It("string",Ps._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class rc extends Ps{data(e={}){return super.data(e)}}class Mo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ja(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new rc(this._firestore,this._userDataWriter,s.key,s,new Ja(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const g=new rc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ja(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>l||m.type!==3).map(m=>{const g=new rc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ja(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:XC(m.type),doc:g,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(r){r=zn(r,yt);const e=zn(r.firestore,js);return OC(Zf(e),r._key).then(t=>ZC(e,r,t))}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:It("string",Mo._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class Rw extends YC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,t)}}function Mt(r){r=zn(r,Zr);const e=zn(r.firestore,js),t=Zf(e),s=new Rw(e);return KC(r._query),LC(t,r._query).then(o=>new Mo(e,s,r,o))}function cn(r,e,t){r=zn(r,yt);const s=zn(r.firestore,js),o=Cw(r.converter,e,t);return Kc(s,[ww(Hc(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,jn.none())])}function JC(r,e,t,...s){r=zn(r,yt);const o=zn(r.firestore,js),l=Hc(o);let h;return h=typeof(e=jt(e))=="string"||e instanceof zc?HC(l,"updateDoc",r._key,e,t,s):$C(l,"updateDoc",r._key,e),Kc(o,[h.toMutation(r._key,jn.exists(!0))])}function Tn(r){return Kc(zn(r.firestore,js),[new Mf(r._key,jn.none())])}function Ha(r,e){const t=zn(r.firestore,js),s=ir(r),o=Cw(r.converter,e);return Kc(t,[ww(Hc(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,jn.exists(!1))]).then(()=>s)}function Kc(r,e){return function(s,o){const l=new Gr;return s.asyncQueue.enqueueAndForget(async()=>IC(await VC(s),o,l)),l.promise}(Zf(r),e)}function ZC(r,e,t){const s=t.docs.get(e._key),o=new Rw(r);return new Ps(r,o,e._key,s,new Ja(t.hasPendingWrites,t.fromCache),e.converter)}function eR(...r){return new ep("arrayUnion",r)}(function(e,t=!0){(function(o){Ko=o})(Wo),bo(new Ns("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),m=new js(new HS(s.getProvider("auth-internal")),new GS(h,s.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ae(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dl(_.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),m._setSettings(l),m},"PUBLIC").setMultipleInstances(!0)),Vi(ty,ny,e),Vi(ty,ny,"esm2017")})();const tR=["rnteallc@gmail.com"],Mn=({children:r,className:e=""})=>A.jsx("div",{className:`bg-white rounded-2xl shadow-sm border border-gray-100 ${e}`,children:r}),Rs=({children:r,right:e})=>A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:r}),e]}),bd=({children:r,onClick:e,type:t="button",className:s="",disabled:o})=>A.jsx("button",{type:t,onClick:e,disabled:o,className:`px-4 py-2 rounded-xl shadow-sm border border-transparent transition
      bg-gray-900 text-white hover:shadow disabled:opacity-50 disabled:cursor-not-allowed ${s}`,children:r}),ks=({children:r,onClick:e,className:t="",disabled:s})=>A.jsx("button",{onClick:e,disabled:s,className:`px-3 py-2 rounded-xl border border-gray-200 text-gray-700 hover:bg-gray-50 disabled:opacity-50 ${t}`,children:r}),Za=({children:r,onClick:e,className:t="",disabled:s})=>A.jsx("button",{onClick:e,disabled:s,className:`px-3 py-2 rounded-xl border border-red-200 text-red-700 hover:bg-red-50 disabled:opacity-50 ${t}`,children:r}),Br=r=>A.jsx("input",{...r,className:`w-full px-3 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-900/10 ${r.className||""}`}),vr=r=>A.jsx("select",{...r,className:`w-full px-3 py-2 rounded-xl border border-gray-200 bg-white focus:outline-none focus:ring-2 focus:ring-gray-900/10 ${r.className||""}`}),e_=r=>A.jsx("textarea",{...r,className:`w-full px-3 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-900/10 ${r.className||""}`}),ic=r=>r?(r.toDate?r.toDate():new Date(r)).toLocaleString():"-",nR=[{key:"stats",label:"Stats"},{key:"hospitals",label:"Hospitals"},{key:"doctors",label:"Doctors"},{key:"posts",label:"Posts"},{key:"activity",label:"Activity Log"},{key:"dedupe",label:"Review Duplicates"}];function rR(){var Yi;const{db:r,appId:e,auth:t,userId:s}=Ie.useContext(Pw),o=((Yi=t==null?void 0:t.currentUser)==null?void 0:Yi.email)||"",l=tR.includes(o),h=Ie.useMemo(()=>`artifacts/${e}/public/data/hospitals`,[e]),m=Ie.useMemo(()=>nR.filter(D=>["stats","posts"].includes(D.key)?!0:l),[l]),[g,_]=Ie.useState("stats"),[E,C]=Ie.useState([]),[P,$]=Ie.useState([]),[q,Y]=Ie.useState([]),[W,me]=Ie.useState(!1),[de,se]=Ie.useState(null),[Se,qe]=Ie.useState(""),[Ee,O]=Ie.useState(""),[I,k]=Ie.useState(""),[x,L]=Ie.useState({name:"",location:""}),[M,R]=Ie.useState({name:"",specialty:"",hospitalId:""}),[Ve,rt]=Ie.useState({text:"",hospitalId:"",doctorId:"",status:"active"}),[ut,be]=Ie.useState({totalHospitals:0,totalDoctors:0,totalPosts:0,last7:0}),ne=Ie.useCallback(async()=>{console.log("[Admin] baseHospitalsPath =",h);try{const Qe=(await Mt(In(r,h))).docs.map(Ze=>({id:Ze.id,...Ze.data(),_path:h}));if(console.log("[Admin] Direct path count:",Qe.length),Qe[0]&&console.log("[Admin] First (direct):",Qe[0].id,Qe[0]),Qe.length)return Qe}catch(Ae){console.warn("[Admin] Direct hospitals path error:",Ae==null?void 0:Ae.message)}const Z=(await Mt($r(r,"hospitals"))).docs.map(Ae=>({id:Ae.id,...Ae.data(),_fullPath:Ae.ref.path}));return console.warn("[Admin] collectionGroup('hospitals') count:",Z.length),Z[0]&&console.warn("[Admin] Example hospitals full path:",Z[0]._fullPath),Z},[r,h]),ve=Ie.useCallback(async D=>D?(await Mt(Er(In(r,`${h}/${D}/doctors`),Xa("name")))).docs.map(Qe=>({id:Qe.id,hospitalId:D,...Qe.data()})):(await Mt(Er($r(r,"doctors"),Xa("name")))).docs.map(Ae=>{const Qe=Ae.ref.path.split("/"),Ze=Qe.indexOf("hospitals"),it=Ze>=0?Qe[Ze+1]:"";return{id:Ae.id,hospitalId:it,...Ae.data()}}),[r,h]),oe=Ie.useCallback(async()=>{const D=[];(await Mt(Er($r(r,"posts"),Xa("createdAt","desc")))).forEach(Ze=>{const it=Ze.ref.path.split("/"),pn=it.indexOf("hospitals"),Ye=it.indexOf("doctors"),et=pn>=0?it[pn+1]:"",en=Ye>=0?it[Ye+1]:"";D.push({id:Ze.id,hospitalId:et,doctorId:en,nested:!0,...Ze.data()})});try{(await Mt(Er(In(r,"posts"),Xa("createdAt","desc")))).forEach(it=>D.push({id:it.id,nested:!1,...it.data()}))}catch{}const Ae=new Set,Qe=[];for(const Ze of D){const it=`${Ze.id}:${Ze.nested?"n":"t"}`;Ae.has(it)||(Ae.add(it),Qe.push(Ze))}return Qe.sort((Ze,it)=>{var pn,Ye;return(((pn=it.createdAt)==null?void 0:pn.seconds)||0)-(((Ye=Ze.createdAt)==null?void 0:Ye.seconds)||0)})},[r]),T=Ie.useCallback(async()=>{me(!0);try{const[D,Z,Ae]=await Promise.allSettled([ne(),ve(),oe()]),Qe=D.status==="fulfilled"?D.value:[],Ze=Z.status==="fulfilled"?Z.value:[],it=Ae.status==="fulfilled"?Ae.value:[];D.status==="rejected"&&console.warn("[Admin] hospitals load failed:",D.reason),Z.status==="rejected"&&console.warn("[Admin] doctors load failed:",Z.reason),Ae.status==="rejected"&&console.warn("[Admin] posts load failed:",Ae.reason),C(Qe),$(Ze),Y(it),be({totalHospitals:Qe.length,totalDoctors:Ze.length,totalPosts:it.length,last7:it.filter(pn=>{var et,en;const Ye=((en=(et=pn.createdAt)==null?void 0:et.toDate)==null?void 0:en.call(et))||new Date(0);return Date.now()-Ye.getTime()<=7*24*60*60*1e3}).length})}finally{me(!1)}},[ne,ve,oe]);Ie.useEffect(()=>{r&&e&&T()},[r,e,T]);const j=Ie.useMemo(()=>{const D={};return P.forEach(Z=>{D[Z.hospitalId]||(D[Z.hospitalId]=[]),D[Z.hospitalId].push(Z)}),D},[P]),ee=Ie.useMemo(()=>{const D=Se.trim().toLowerCase();return E.filter(Z=>(Z.name||"").toLowerCase().includes(D)||(Z.location||"").toLowerCase().includes(D)).sort((Z,Ae)=>Z.name.localeCompare(Ae.name))},[E,Se]),ie=Ie.useMemo(()=>{const D=Se.trim().toLowerCase();let Z=P;return Ee&&(Z=Z.filter(Ae=>Ae.hospitalId===Ee)),D&&(Z=Z.filter(Ae=>(Ae.name||"").toLowerCase().includes(D)||(Ae.specialty||"").toLowerCase().includes(D))),Z.sort((Ae,Qe)=>Ae.name.localeCompare(Qe.name))},[P,Se,Ee]),ye=Ie.useMemo(()=>{const D=Se.trim().toLowerCase();let Z=q;return Ee&&(Z=Z.filter(Ae=>Ae.hospitalId===Ee||!Ae.nested)),I&&(Z=Z.filter(Ae=>Ae.doctorId===I||!Ae.nested)),D&&(Z=Z.filter(Ae=>(Ae.text||"").toLowerCase().includes(D))),Z},[q,Se,Ee,I]),X=async({type:D,entity:Z,entityId:Ae,note:Qe})=>{try{await Ha(In(r,"activity_logs"),{type:D,entity:Z,entityId:Ae,by:o||s||"user",note:Qe||"",ts:We.now()})}catch{}},le=async()=>{if(!(!l||!x.name.trim())){se("create-hospital");try{const D=await Ha(In(r,h),{...x,createdAt:We.now()});await X({type:"create",entity:"hospital",entityId:D.id,note:x.name}),L({name:"",location:""}),await T()}finally{se(null)}}},fe=async D=>{if(l){se(D.id);try{await cn(ir(r,h,D.id),{name:D.name,location:D.location},{merge:!0}),await X({type:"update",entity:"hospital",entityId:D.id,note:D.name}),await T()}finally{se(null)}}},ue=async D=>{if(l){se(D);try{await Tn(ir(r,h,D)),await X({type:"delete",entity:"hospital",entityId:D}),await T()}finally{se(null)}}},Oe=async()=>{if(!(!l||!M.name.trim()||!M.hospitalId)){se("create-doctor");try{const D=await Ha(In(r,`${h}/${M.hospitalId}/doctors`),{name:M.name,specialty:M.specialty||"",createdAt:We.now()});await X({type:"create",entity:"doctor",entityId:D.id,note:M.name}),R({name:"",specialty:"",hospitalId:""}),await T()}finally{se(null)}}},zt=async D=>{if(l){se(D.id);try{await cn(ir(r,`${h}/${D.hospitalId}/doctors/${D.id}`),{name:D.name,specialty:D.specialty||""},{merge:!0}),await X({type:"update",entity:"doctor",entityId:D.id,note:D.name}),await T()}finally{se(null)}}},Bn=async D=>{if(l){se(D.id);try{await Tn(ir(r,`${h}/${D.hospitalId}/doctors/${D.id}`)),await X({type:"delete",entity:"doctor",entityId:D.id}),await T()}finally{se(null)}}},fn=async()=>{if(Ve.text.trim()){se("create-post");try{let D;Ve.hospitalId&&Ve.doctorId?D=await Ha(In(r,`${h}/${Ve.hospitalId}/doctors/${Ve.doctorId}/posts`),{text:Ve.text,status:Ve.status||"active",createdAt:We.now()}):D=await Ha(In(r,"posts"),{text:Ve.text,status:Ve.status||"active",hospitalId:Ve.hospitalId||null,doctorId:Ve.doctorId||null,createdAt:We.now()}),await X({type:"create",entity:"post",entityId:D.id}),rt({text:"",hospitalId:"",doctorId:"",status:"active"}),await T()}finally{se(null)}}},An=async D=>{if(l){se(D.id);try{D.nested&&D.hospitalId&&D.doctorId?await cn(ir(r,`${h}/${D.hospitalId}/doctors/${D.doctorId}/posts/${D.id}`),{text:D.text,status:D.status||"active"},{merge:!0}):await cn(ir(r,"posts",D.id),{text:D.text,status:D.status||"active",hospitalId:D.hospitalId||null,doctorId:D.doctorId||null},{merge:!0}),await X({type:"update",entity:"post",entityId:D.id}),await T()}finally{se(null)}}},ei=async D=>{l&&await An({...D,status:"deleted"})},Ki=async D=>{if(l){se(D.id);try{D.nested&&D.hospitalId&&D.doctorId?await Tn(ir(r,`${h}/${D.hospitalId}/doctors/${D.doctorId}/posts/${D.id}`)):await Tn(ir(r,"posts",D.id)),await X({type:"delete",entity:"post",entityId:D.id}),await T()}finally{se(null)}}},Qi=A.jsx("div",{className:"px-6 py-4 border-b border-gray-100 bg-white sticky top-0 z-10",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("h1",{className:"text-2xl font-extrabold text-gray-900",children:"Admin Dashboard"}),A.jsx("span",{className:"text-sm text-gray-500",children:"Manage and audit RNTea data"}),A.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:["Signed in: ",o||s||"anonymous"," ",l?"· Admin":""]})]})});return A.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Qi,A.jsxs("div",{className:"max-w-7xl mx-auto p-6 grid grid-cols-12 gap-6",children:[A.jsxs(Mn,{className:"col-span-12 md:col-span-3 p-3 h-fit sticky top-20",children:[A.jsx("div",{className:"flex flex-col gap-1",children:m.map(D=>A.jsx("button",{onClick:()=>_(D.key),className:`text-left px-3 py-2 rounded-xl hover:bg-gray-50 ${g===D.key?"bg-gray-900 text-white hover:bg-gray-900":""}`,children:D.label},D.key))}),A.jsxs("div",{className:"mt-4",children:[A.jsx(Br,{placeholder:"Search…",value:Se,onChange:D=>qe(D.target.value)}),A.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2",children:[A.jsxs(vr,{value:Ee,onChange:D=>{O(D.target.value),k("")},children:[A.jsx("option",{value:"",children:"All hospitals"}),E.map(D=>A.jsx("option",{value:D.id,children:D.name},D.id))]}),A.jsxs(vr,{value:I,onChange:D=>k(D.target.value),disabled:!Ee,children:[A.jsx("option",{value:"",children:Ee?"All doctors (selected hospital)":"Pick a hospital first"}),(j[Ee]||[]).map(D=>A.jsx("option",{value:D.id,children:D.name},D.id))]})]})]})]}),A.jsxs("div",{className:"col-span-12 md:col-span-9 flex flex-col gap-6",children:[g==="stats"&&A.jsxs(Mn,{className:"p-6",children:[A.jsx(Rs,{children:"Overview"}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[A.jsxs(Mn,{className:"p-4",children:[A.jsx("div",{className:"text-sm text-gray-500",children:"Hospitals"}),A.jsx("div",{className:"text-3xl font-bold",children:ut.totalHospitals})]}),A.jsxs(Mn,{className:"p-4",children:[A.jsx("div",{className:"text-sm text-gray-500",children:"Doctors"}),A.jsx("div",{className:"text-3xl font-bold",children:ut.totalDoctors})]}),A.jsxs(Mn,{className:"p-4",children:[A.jsx("div",{className:"text-sm text-gray-500",children:"Posts"}),A.jsx("div",{className:"text-3xl font-bold",children:ut.totalPosts})]}),A.jsxs(Mn,{className:"p-4",children:[A.jsx("div",{className:"text-sm text-gray-500",children:"Posts (7d)"}),A.jsx("div",{className:"text-3xl font-bold",children:ut.last7})]})]})]}),g==="hospitals"&&l&&A.jsxs(Mn,{className:"p-6",children:[A.jsx(Rs,{right:A.jsx(bd,{onClick:le,disabled:de==="create-hospital",children:"Add Hospital"}),children:"Hospitals"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[A.jsx(Br,{placeholder:"Name",value:x.name,onChange:D=>L(Z=>({...Z,name:D.target.value}))}),A.jsx(Br,{placeholder:"Location",value:x.location,onChange:D=>L(Z=>({...Z,location:D.target.value}))})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"text-left text-gray-500",children:[A.jsx("th",{className:"p-2",children:"Name"}),A.jsx("th",{className:"p-2",children:"Location"}),A.jsx("th",{className:"p-2",children:"Created"}),A.jsx("th",{className:"p-2 w-40",children:"Actions"})]})}),A.jsxs("tbody",{children:[ee.map(D=>A.jsxs("tr",{className:"border-t",children:[A.jsx("td",{className:"p-2",children:A.jsx(Br,{value:D.name||"",onChange:Z=>{D.name=Z.target.value,C([...E])}})}),A.jsx("td",{className:"p-2",children:A.jsx(Br,{value:D.location||"",onChange:Z=>{D.location=Z.target.value,C([...E])}})}),A.jsx("td",{className:"p-2",children:ic(D.createdAt)}),A.jsxs("td",{className:"p-2 flex gap-2",children:[A.jsx(ks,{onClick:()=>fe(D),disabled:de===D.id,children:"Save"}),A.jsx(Za,{onClick:()=>ue(D.id),disabled:de===D.id,children:"Delete"})]})]},D.id)),!ee.length&&A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-gray-500",colSpan:4,children:"No hospitals found."})})]})]})})]}),g==="doctors"&&l&&A.jsxs(Mn,{className:"p-6",children:[A.jsx(Rs,{right:A.jsx(bd,{onClick:Oe,disabled:de==="create-doctor",children:"Add Doctor"}),children:"Doctors"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[A.jsxs(vr,{value:M.hospitalId,onChange:D=>R(Z=>({...Z,hospitalId:D.target.value})),children:[A.jsx("option",{value:"",children:"Select hospital"}),E.map(D=>A.jsx("option",{value:D.id,children:D.name},D.id))]}),A.jsx(Br,{placeholder:"Name",value:M.name,onChange:D=>R(Z=>({...Z,name:D.target.value}))}),A.jsx(Br,{placeholder:"Specialty",value:M.specialty,onChange:D=>R(Z=>({...Z,specialty:D.target.value}))})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"text-left text-gray-500",children:[A.jsx("th",{className:"p-2",children:"Hospital"}),A.jsx("th",{className:"p-2",children:"Name"}),A.jsx("th",{className:"p-2",children:"Specialty"}),A.jsx("th",{className:"p-2",children:"Created"}),A.jsx("th",{className:"p-2 w-40",children:"Actions"})]})}),A.jsxs("tbody",{children:[ie.map(D=>A.jsxs("tr",{className:"border-t",children:[A.jsx("td",{className:"p-2",children:A.jsx(vr,{value:D.hospitalId,onChange:Z=>{D.hospitalId=Z.target.value,$([...P])},children:E.map(Z=>A.jsx("option",{value:Z.id,children:Z.name},Z.id))})}),A.jsx("td",{className:"p-2",children:A.jsx(Br,{value:D.name||"",onChange:Z=>{D.name=Z.target.value,$([...P])}})}),A.jsx("td",{className:"p-2",children:A.jsx(Br,{value:D.specialty||"",onChange:Z=>{D.specialty=Z.target.value,$([...P])}})}),A.jsx("td",{className:"p-2",children:ic(D.createdAt)}),A.jsxs("td",{className:"p-2 flex gap-2",children:[A.jsx(ks,{onClick:()=>zt(D),disabled:de===D.id,children:"Save"}),A.jsx(Za,{onClick:()=>Bn(D),disabled:de===D.id,children:"Delete"})]})]},D.id)),!ie.length&&A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-gray-500",colSpan:5,children:"No doctors found."})})]})]})})]}),g==="posts"&&A.jsxs(Mn,{className:"p-6",children:[A.jsx(Rs,{right:A.jsx(bd,{onClick:fn,disabled:de==="create-post",children:"Add Post"}),children:"Posts"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[A.jsxs(vr,{value:Ve.hospitalId,onChange:D=>{const Z=D.target.value;rt(Ae=>({...Ae,hospitalId:Z,doctorId:""}))},children:[A.jsx("option",{value:"",children:"Select hospital"}),E.map(D=>A.jsx("option",{value:D.id,children:D.name},D.id))]}),A.jsxs(vr,{value:Ve.doctorId,onChange:D=>rt(Z=>({...Z,doctorId:D.target.value})),disabled:!Ve.hospitalId,children:[A.jsx("option",{value:"",children:Ve.hospitalId?"Select doctor":"Pick hospital first"}),(j[Ve.hospitalId]||[]).map(D=>A.jsx("option",{value:D.id,children:D.name},D.id))]}),A.jsxs(vr,{value:Ve.status,onChange:D=>rt(Z=>({...Z,status:D.target.value})),children:[A.jsx("option",{value:"active",children:"active"}),A.jsx("option",{value:"hidden",children:"hidden"}),A.jsx("option",{value:"deleted",children:"deleted"})]})]}),A.jsx(e_,{rows:3,placeholder:"Post text…",value:Ve.text,onChange:D=>rt(Z=>({...Z,text:D.target.value}))}),A.jsx("div",{className:"overflow-x-auto mt-6",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"text-left text-gray-500",children:[A.jsx("th",{className:"p-2",children:"Text"}),A.jsx("th",{className:"p-2",children:"Hospital"}),A.jsx("th",{className:"p-2",children:"Doctor"}),A.jsx("th",{className:"p-2",children:"Status"}),A.jsx("th",{className:"p-2",children:"Created"}),A.jsx("th",{className:"p-2 w-56",children:"Actions"})]})}),A.jsxs("tbody",{children:[ye.map(D=>A.jsxs("tr",{className:"border-t align-top",children:[A.jsx("td",{className:"p-2",children:A.jsx(e_,{rows:3,value:D.text||"",onChange:Z=>{D.text=Z.target.value,Y([...q])},readOnly:!l})}),A.jsx("td",{className:"p-2",children:A.jsxs(vr,{value:D.hospitalId||"",onChange:Z=>{D.hospitalId=Z.target.value||"",D.doctorId="",Y([...q])},disabled:!l,children:[A.jsx("option",{value:"",children:"(none)"}),E.map(Z=>A.jsx("option",{value:Z.id,children:Z.name},Z.id))]})}),A.jsx("td",{className:"p-2",children:A.jsxs(vr,{value:D.doctorId||"",onChange:Z=>{D.doctorId=Z.target.value||"",Y([...q])},disabled:!l||!D.hospitalId,children:[A.jsx("option",{value:"",children:"(none)"}),(j[D.hospitalId]||[]).map(Z=>A.jsx("option",{value:Z.id,children:Z.name},Z.id))]})}),A.jsx("td",{className:"p-2",children:A.jsxs(vr,{value:D.status||"active",onChange:Z=>{D.status=Z.target.value,Y([...q])},disabled:!l,children:[A.jsx("option",{value:"active",children:"active"}),A.jsx("option",{value:"hidden",children:"hidden"}),A.jsx("option",{value:"deleted",children:"deleted"})]})}),A.jsx("td",{className:"p-2",children:ic(D.createdAt)}),A.jsx("td",{className:"p-2 flex gap-2 flex-wrap",children:l?A.jsxs(A.Fragment,{children:[A.jsx(ks,{onClick:()=>An(D),disabled:de===D.id,children:"Save"}),D.status!=="deleted"?A.jsx(Za,{onClick:()=>ei(D),disabled:de===D.id,children:"Soft delete"}):A.jsx(Za,{onClick:()=>Ki(D),disabled:de===D.id,children:"Hard delete"})]}):A.jsx("span",{className:"text-xs text-gray-400",children:"view-only"})})]},`${D.id}:${D.nested?"n":"t"}`)),!ye.length&&A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-gray-500",colSpan:6,children:"No posts found."})})]})]})})]}),g==="dedupe"&&l&&A.jsx(sR,{db:r,email:o,logActivity:X}),g==="activity"&&l&&A.jsx(iR,{db:r})]})]})]})}function iR({db:r}){const[e,t]=Ie.useState([]),[s,o]=Ie.useState(!1),l=async()=>{o(!0);try{const h=await Mt(Er(In(r,"activity_logs"),Xa("ts","desc"),QC(200)));t(h.docs.map(m=>({id:m.id,...m.data()})))}finally{o(!1)}};return Ie.useEffect(()=>{r&&l()},[r]),A.jsxs(Mn,{className:"p-6",children:[A.jsx(Rs,{right:A.jsx(ks,{onClick:l,children:"Refresh"}),children:"Activity Log"}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"text-left text-gray-500",children:[A.jsx("th",{className:"p-2",children:"Time"}),A.jsx("th",{className:"p-2",children:"Type"}),A.jsx("th",{className:"p-2",children:"Entity"}),A.jsx("th",{className:"p-2",children:"Entity ID"}),A.jsx("th",{className:"p-2",children:"By"}),A.jsx("th",{className:"p-2",children:"Note"})]})}),A.jsxs("tbody",{children:[e.map(h=>A.jsxs("tr",{className:"border-t",children:[A.jsx("td",{className:"p-2",children:ic(h.ts)}),A.jsx("td",{className:"p-2",children:h.type}),A.jsx("td",{className:"p-2",children:h.entity}),A.jsx("td",{className:"p-2",children:h.entityId}),A.jsx("td",{className:"p-2",children:h.by||"-"}),A.jsx("td",{className:"p-2",children:h.note||""})]},h.id)),!e.length&&A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-gray-500",colSpan:6,children:"No activity yet."})})]})]})})]})}function sR({db:r,email:e,logActivity:t}){const[s,o]=Ie.useState(!1),[l,h]=Ie.useState(null),[m,g]=Ie.useState([]),[_,E]=Ie.useState([]),[C,P]=Ie.useState([]),[$,q]=Ie.useState([]),[Y,W]=Ie.useState([]),[me,de]=Ie.useState([]),se=T=>(T??"").toString().trim().toLowerCase().replace(/\s+/g," "),Se=T=>[se(T.name),se(T.city||T.location),se(T.state||"")].join("|"),qe=T=>[se(T.name),se(T.specialty||""),se(T.hospitalId||"")].join("|"),Ee=T=>{var ee;const j=(ee=T==null?void 0:T.toDate)!=null&&ee.call(T)?T.toDate():T?new Date(T):null;return j?`${j.getUTCFullYear()}-${String(j.getUTCMonth()+1).padStart(2,"0")}-${String(j.getUTCDate()).padStart(2,"0")}`:"na"},O=T=>[se(T.text),se(T.hospitalId||""),se(T.doctorId||""),Ee(T.createdAt)].join("|"),I=T=>ir(r,...T.split("/").filter(Boolean)),k=async(T,j,{merge:ee=!0}={})=>{const ie=await Ci(I(T));ie.exists()&&await cn(I(j),ie.data(),{merge:ee})},x=async(T,j)=>{const ee=T.split("/").filter(Boolean);return(await Mt(In(r,...ee,j))).docs.map(ye=>({id:ye.id,path:ye.ref.path,data:ye.data()}))},L=async(T,j,ee)=>{const ie=await x(T,ee);for(const{id:ye,data:X,path:le}of ie){const fe=`${j}/${ee}/${ye}`;await cn(I(fe),X,{merge:!0}),await Tn(I(le))}},M=(T={},j={})=>{const ee=(T.likeCount||0)+(j.likeCount||0),ie=Array.from(new Set([...T.likers||[],...j.likers||[]]));return{likeCount:ee,likers:ie}},R=async(T,j)=>{await k(T,j,{merge:!0});const ee=await x(T,"doctors");for(const ie of ee){const ye=ie.id,X=`${T}/doctors/${ye}`,le=`${j}/doctors/${ye}`;await k(X,le,{merge:!0});const fe=await x(X,"posts");for(const ue of fe){const Oe=ue.path,zt=`${le}/posts/${ue.id}`,Bn=await Ci(I(Oe)),fn=await Ci(I(zt));if(fn.exists()){const An=M(fn.data(),Bn.data());await cn(I(zt),An,{merge:!0})}else await cn(I(zt),Bn.data(),{merge:!0});await L(Oe,zt,"likes"),await Tn(I(Oe))}await Tn(I(X))}await Tn(I(T)),await(t==null?void 0:t({type:"merge",entity:"hospital",entityId:T,by:e,note:`→ ${j}`}))},Ve=async(T,j)=>{await k(T,j,{merge:!0});const ee=await x(T,"posts");for(const ie of ee){const ye=ie.path,X=`${j}/posts/${ie.id}`,le=await Ci(I(ye)),fe=await Ci(I(X));if(fe.exists()){const ue=M(fe.data(),le.data());await cn(I(X),ue,{merge:!0})}else await cn(I(X),le.data(),{merge:!0});await L(ye,X,"likes"),await Tn(I(ye))}await Tn(I(T)),await(t==null?void 0:t({type:"merge",entity:"doctor",entityId:T,by:e,note:`→ ${j}`}))},rt=async(T,j)=>{const ee=await Ci(I(T)),ie=await Ci(I(j));if(!ee.exists()||!ie.exists())return;const ye=M(ie.data(),ee.data());await cn(I(j),ye,{merge:!0});const X=await x(T,"likes");for(const{id:le,data:fe}of X)await cn(I(`${j}/likes/${le}`),fe,{merge:!0});await Tn(I(T)),await(t==null?void 0:t({type:"merge",entity:"post",entityId:T,by:e,note:`→ ${j}`}))},ut=async(T,j)=>{h(T);try{await cn(I(T),{status:"active"},{merge:!0}),await(t==null?void 0:t({type:"reinstate",entity:j,entityId:T,by:e})),await be()}finally{h(null)}},be=Ie.useCallback(async()=>{o(!0);try{const[T,j,ee,ie,ye,X]=await Promise.allSettled([Mt($r(r,"hospitals")),Mt($r(r,"doctors")),(async()=>{const le=[];try{(await Mt($r(r,"posts"))).docs.forEach(ue=>le.push({id:ue.id,path:ue.ref.path,...ue.data()}))}catch(fe){console.warn("[Dedupe] posts CG failed:",fe)}try{(await Mt(In(r,"posts"))).docs.forEach(ue=>le.push({id:ue.id,path:ue.ref.path,...ue.data()}))}catch{}return le})(),Mt(Er($r(r,"hospitals"),Ya("status","==","deleted"))),Mt(Er($r(r,"doctors"),Ya("status","==","deleted"))),(async()=>{const le=[];try{(await Mt(Er($r(r,"posts"),Ya("status","==","deleted")))).docs.forEach(ue=>le.push({id:ue.id,path:ue.ref.path,...ue.data()}))}catch{}try{(await Mt(Er(In(r,"posts"),Ya("status","==","deleted")))).docs.forEach(ue=>le.push({id:ue.id,path:ue.ref.path,...ue.data()}))}catch{}return le})()]);if(T.status==="fulfilled"){const le=T.value.docs.map(ue=>({id:ue.id,path:ue.ref.path,...ue.data()})),fe=new Map;le.forEach(ue=>{const Oe=Se(ue);Oe&&(fe.has(Oe)||fe.set(Oe,[]),fe.get(Oe).push(ue))}),g([...fe.values()].filter(ue=>ue.length>1))}else console.warn("[Dedupe] hospitals failed:",T.reason),g([]);if(j.status==="fulfilled"){const le=j.value.docs.map(ue=>({id:ue.id,path:ue.ref.path,...ue.data()})),fe=new Map;le.forEach(ue=>{const Oe=qe(ue);Oe&&(fe.has(Oe)||fe.set(Oe,[]),fe.get(Oe).push(ue))}),E([...fe.values()].filter(ue=>ue.length>1))}else console.warn("[Dedupe] doctors failed:",j.reason),E([]);if(ee.status==="fulfilled"){const le=ee.value,fe=new Map;le.forEach(ue=>{const Oe=O(ue);Oe&&(fe.has(Oe)||fe.set(Oe,[]),fe.get(Oe).push(ue))}),P([...fe.values()].filter(ue=>ue.length>1))}else console.warn("[Dedupe] posts failed:",ee.reason),P([]);q(ie.status==="fulfilled"?ie.value.docs.map(le=>({id:le.id,path:le.ref.path,...le.data()})):[]),W(ye.status==="fulfilled"?ye.value.docs.map(le=>({id:le.id,path:le.ref.path,...le.data()})):[]),de(X.status==="fulfilled"?X.value:[])}finally{o(!1)}},[r]);Ie.useEffect(()=>{be()},[be]);const ne=({label:T,items:j,onMerge:ee})=>{const[ie,ye]=Ie.useState(null);return A.jsxs("div",{className:"border rounded-xl p-3 space-y-3",children:[A.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Select a keeper, then merge each duplicate into it."}),j.map(X=>{var le;return A.jsxs("div",{className:"flex items-start gap-3 border rounded-xl p-3",children:[A.jsx("input",{type:"radio",name:`keep-${T}-${((le=j[0])==null?void 0:le.path)||""}`,onChange:()=>ye(X),checked:(ie==null?void 0:ie.path)===X.path,className:"mt-1"}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"text-sm font-semibold",children:[T==="hospital"&&(X.name||"(no name)"),T==="doctor"&&(X.name||"(no name)"),T==="post"&&(X.text?X.text.slice(0,160):"(no text)")]}),A.jsxs("div",{className:"text-xs text-gray-500",children:[T==="hospital"&&A.jsxs(A.Fragment,{children:[X.city||X.location||""," ",X.state||""]}),T==="doctor"&&A.jsxs(A.Fragment,{children:[X.specialty||""," ",X.hospitalId?`· hospitalId: ${X.hospitalId}`:""]}),T==="post"&&A.jsxs(A.Fragment,{children:[X.hospitalId?`hospitalId: ${X.hospitalId}`:"",X.doctorId?` · doctorId: ${X.doctorId}`:"",X.createdAt?` · ${Ee(X.createdAt)}`:""]})]}),A.jsx("div",{className:"text-[11px] text-gray-400 mt-1 break-all",children:X.path})]}),ie&&ie.path!==X.path&&A.jsxs("div",{className:"flex gap-2",children:[A.jsx(ks,{onClick:async()=>{h(X.path);try{T==="hospital"?await R(X.path,ie.path):T==="doctor"?await Ve(X.path,ie.path):T==="post"&&await rt(X.path,ie.path),await be()}finally{h(null)}},disabled:l===X.path,children:"Merge → keep"}),A.jsx(Za,{onClick:async()=>{h(X.path);try{await Tn(I(X.path)),await(t==null?void 0:t({type:"delete",entity:T,entityId:X.path,by:e,note:"dedupe manual delete"})),await be()}finally{h(null)}},disabled:l===X.path,children:"Delete"})]})]},X.path)})]})},ve=({title:T,groups:j,label:ee})=>A.jsxs(Mn,{className:"p-6",children:[A.jsxs(Rs,{right:A.jsx(ks,{onClick:be,disabled:s,children:s?"Scanning…":"Rescan"}),children:[T," (",j.length," groups)"]}),j.length===0?A.jsx("div",{className:"text-sm text-gray-500",children:"No suspected duplicates."}):A.jsx("div",{className:"space-y-4",children:j.map((ie,ye)=>A.jsx("div",{className:"space-y-3",children:A.jsx(ne,{label:ee,items:ie,onMerge:async(X,le,fe)=>{if(X==="hospital")return R(le,fe);if(X==="doctor")return Ve(le,fe);if(X==="post")return rt(le,fe)}})},`${ee}-${ye}`))})]}),oe=({title:T,items:j,label:ee})=>A.jsxs(Mn,{className:"p-6",children:[A.jsx(Rs,{children:T}),j.length===0?A.jsxs("div",{className:"text-sm text-gray-500",children:["No deleted ",ee,"s found."]}):A.jsx("div",{className:"space-y-2",children:j.map(ie=>A.jsxs("div",{className:"flex items-start gap-3 border rounded-xl p-3",children:[A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"text-sm font-semibold break-all",children:[ee==="hospital"&&(ie.name||"(no name)"),ee==="doctor"&&(ie.name||"(no name)"),ee==="post"&&(ie.text?ie.text.slice(0,160):"(no text)")]}),A.jsx("div",{className:"text-[11px] text-gray-400 break-all",children:ie.path})]}),A.jsx(ks,{onClick:()=>ut(ie.path,ee),disabled:l===ie.path,children:"Reinstate"})]},ie.path))})]});return A.jsxs("div",{className:"flex flex-col gap-6",children:[A.jsx(ve,{title:"Hospitals",groups:m,label:"hospital"}),A.jsx(ve,{title:"Doctors",groups:_,label:"doctor"}),A.jsx(ve,{title:"Posts",groups:C,label:"post"}),A.jsx(oe,{title:"Deleted Hospitals",items:$,label:"hospital"}),A.jsx(oe,{title:"Deleted Doctors",items:Y,label:"doctor"}),A.jsx(oe,{title:"Deleted Posts",items:me,label:"post"}),A.jsxs("div",{className:"text-xs text-gray-500",children:[A.jsx("b",{children:"Notes:"})," “Merge → keep” copies data into the selected keeper and deletes the source. “Reinstate” only works for ",A.jsx("i",{children:"soft"}),"-deleted items (where we set ",A.jsx("code",{children:'status: "deleted"'}),"). If a doc was hard-deleted, restore from backup or by re-creating it."]})]})}function oR(){const r=K_(),[e,t]=Ie.useState(""),[s,o]=Ie.useState(""),[l,h]=Ie.useState(""),[m,g]=Ie.useState(!1),_=async C=>{C.preventDefault(),g(!0),h("");try{await RT(r,e.trim(),s)}catch(P){h(P.message||"Login failed")}finally{g(!1)}},E=async()=>{g(!0),h("");try{await YT(r,new Hr)}catch(C){h(C.message||"Login failed")}finally{g(!1)}};return A.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:A.jsxs("div",{className:"w-full max-w-md bg-white border border-gray-100 rounded-2xl shadow-sm p-6",children:[A.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Admin Sign In"}),l&&A.jsx("div",{className:"mb-3 text-sm text-red-600",children:l}),A.jsxs("form",{onSubmit:_,className:"space-y-3",children:[A.jsx("input",{className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-900/10",type:"email",placeholder:"Email",autoComplete:"username",value:e,onChange:C=>t(C.target.value)}),A.jsx("input",{className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-900/10",type:"password",placeholder:"Password",autoComplete:"current-password",value:s,onChange:C=>o(C.target.value)}),A.jsx("button",{type:"submit",disabled:m,className:"w-full px-4 py-2 rounded-xl bg-gray-900 text-white hover:shadow disabled:opacity-50",children:m?"Signing in…":"Sign in"})]}),A.jsx("div",{className:"my-4 text-center text-sm text-gray-500",children:"or"}),A.jsx("button",{onClick:E,disabled:m,className:"w-full px-4 py-2 rounded-xl border border-gray-200 hover:bg-gray-50 disabled:opacity-50",children:"Continue with Google"}),A.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Trouble signing in? Ask an owner to add you in Firebase Auth and (optionally) give you the ",A.jsx("code",{children:"admin"})," claim."]})]})})}const aR=({message:r,type:e})=>{if(!r)return null;const t=e==="success"?"bg-green-100":"bg-red-100",s=e==="success"?"text-green-700":"text-red-700";return A.jsx("div",{className:`p-3 rounded-md ${t} ${s} my-4 message-box-fade show`,children:r})},Pw=Ie.createContext(null),lR=typeof __firebase_config<"u"?JSON.parse(__firebase_config):null,t_=typeof __app_id<"u"?__app_id:null;function uR(){const[r,e]=Ie.useState(null),[t,s]=Ie.useState(null),[o,l]=Ie.useState(null),[h,m]=Ie.useState(null),[g,_]=Ie.useState(!1),[E,C]=Ie.useState(!0),[P,$]=Ie.useState({text:"",type:""}),q=Ie.useCallback((W,me)=>{$({text:W,type:me}),setTimeout(()=>$({text:"",type:""}),5e3)},[]);Ie.useEffect(()=>{(async()=>{try{const me=lR||{apiKey:"AIzaSyBEwSVX9UY7-MNxeYwdbY0ZmDuXzYyt56g",authDomain:"rntea-cca78.firebaseapp.com",projectId:"rntea-cca78",storageBucket:"rntea-cca78.appspot.com",messagingSenderId:"806310857835",appId:"1:806310857835:web:b03b05847c818ee4fe352e",measurementId:"G-2T697CLRX9"};if(!(me!=null&&me.apiKey)||!(me!=null&&me.projectId)||!(me!=null&&me.appId))throw new Error("Firebase configuration is incomplete. Check .env or Canvas setup.");const de=gI().length?pf():f_(me),se=K_(de),Se=bC(de);e(de),l(se),s(Se);const qe=NT(se,Ee=>{m(Ee?Ee.uid:null),Ee||q("Please log in to access the Admin Panel.","info"),_(!0),C(!1)});return()=>qe&&qe()}catch(me){console.error("Firebase Initialization Error (Admin):",me),q(`FATAL: Failed to initialize Firebase: ${me.message}`,"error"),C(!1),_(!1)}})()},[q]);const Y=Ie.useMemo(()=>({app:r,db:t,auth:o,userId:h,authReady:g,appId:t_||"rntea-cca78",appId:t_||"1:806310857835:web:b03b05847c818ee4fe352e",loadingFirebase:E,message:P,showAdminMessage:q,collection:In,doc:ir,getDoc:Ci,getDocs:Mt,setDoc:cn,updateDoc:JC,deleteDoc:Tn,query:Er,where:Ya,arrayUnion:eR}),[r,t,o,h,g,E,P,q]);return A.jsxs(Pw.Provider,{value:Y,children:[A.jsx(aR,{message:P.text,type:P.type}),E?A.jsx("p",{className:"text-center text-gray-500 py-8",children:"Initializing Admin Application and Firebase..."}):o&&o.currentUser?A.jsx(rR,{}):A.jsx(oR,{})]})}const n_=document.getElementById("admin-root");n_?BE.createRoot(n_).render(A.jsx(ME.StrictMode,{children:A.jsx(uR,{})})):console.error("admin.jsx: #admin-root not found in DOM.");
