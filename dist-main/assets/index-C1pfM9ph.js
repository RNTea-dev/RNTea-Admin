function IE(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Cv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Nd={exports:{}},Ga={},Dd={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function TE(){if(Rg)return je;Rg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=I&&O[I]||O["@@iterator"],typeof O=="function"?O:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,H={};function M(O,G,pe){this.props=O,this.context=G,this.refs=H,this.updater=pe||j}M.prototype.isReactComponent={},M.prototype.setState=function(O,G){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,G,"setState")},M.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function le(){}le.prototype=M.prototype;function X(O,G,pe){this.props=O,this.context=G,this.refs=H,this.updater=pe||j}var Q=X.prototype=new le;Q.constructor=X,q(Q,M.prototype),Q.isPureReactComponent=!0;var de=Array.isArray,te=Object.prototype.hasOwnProperty,_e={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(O,G,pe){var we,be={},Ae=null,Le=null;if(G!=null)for(we in G.ref!==void 0&&(Le=G.ref),G.key!==void 0&&(Ae=""+G.key),G)te.call(G,we)&&!k.hasOwnProperty(we)&&(be[we]=G[we]);var Ne=arguments.length-2;if(Ne===1)be.children=pe;else if(1<Ne){for(var Ee=Array(Ne),st=0;st<Ne;st++)Ee[st]=arguments[st+2];be.children=Ee}if(O&&O.defaultProps)for(we in Ne=O.defaultProps,Ne)be[we]===void 0&&(be[we]=Ne[we]);return{$$typeof:r,type:O,key:Ae,ref:Le,props:be,_owner:_e.current}}function C(O,G){return{$$typeof:r,type:O.type,key:G,ref:O.ref,props:O.props,_owner:O._owner}}function P(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function N(O){var G={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(pe){return G[pe]})}var V=/\/+/g;function A(O,G){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):G.toString(36)}function qe(O,G,pe,we,be){var Ae=typeof O;(Ae==="undefined"||Ae==="boolean")&&(O=null);var Le=!1;if(O===null)Le=!0;else switch(Ae){case"string":case"number":Le=!0;break;case"object":switch(O.$$typeof){case r:case e:Le=!0}}if(Le)return Le=O,be=be(Le),O=we===""?"."+A(Le,0):we,de(be)?(pe="",O!=null&&(pe=O.replace(V,"$&/")+"/"),qe(be,G,pe,"",function(st){return st})):be!=null&&(P(be)&&(be=C(be,pe+(!be.key||Le&&Le.key===be.key?"":(""+be.key).replace(V,"$&/")+"/")+O)),G.push(be)),1;if(Le=0,we=we===""?".":we+":",de(O))for(var Ne=0;Ne<O.length;Ne++){Ae=O[Ne];var Ee=we+A(Ae,Ne);Le+=qe(Ae,G,pe,Ee,be)}else if(Ee=x(O),typeof Ee=="function")for(O=Ee.call(O),Ne=0;!(Ae=O.next()).done;)Ae=Ae.value,Ee=we+A(Ae,Ne++),Le+=qe(Ae,G,pe,Ee,be);else if(Ae==="object")throw G=String(O),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Le}function Ge(O,G,pe){if(O==null)return O;var we=[],be=0;return qe(O,we,"","",function(Ae){return G.call(pe,Ae,be++)}),we}function tt(O){if(O._status===-1){var G=O._result;G=G(),G.then(function(pe){(O._status===0||O._status===-1)&&(O._status=1,O._result=pe)},function(pe){(O._status===0||O._status===-1)&&(O._status=2,O._result=pe)}),O._status===-1&&(O._status=0,O._result=G)}if(O._status===1)return O._result.default;throw O._result}var Z={current:null},W={transition:null},oe={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:W,ReactCurrentOwner:_e};function ie(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:Ge,forEach:function(O,G,pe){Ge(O,function(){G.apply(this,arguments)},pe)},count:function(O){var G=0;return Ge(O,function(){G++}),G},toArray:function(O){return Ge(O,function(G){return G})||[]},only:function(O){if(!P(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},je.Component=M,je.Fragment=t,je.Profiler=o,je.PureComponent=X,je.StrictMode=i,je.Suspense=g,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,je.act=ie,je.cloneElement=function(O,G,pe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var we=q({},O.props),be=O.key,Ae=O.ref,Le=O._owner;if(G!=null){if(G.ref!==void 0&&(Ae=G.ref,Le=_e.current),G.key!==void 0&&(be=""+G.key),O.type&&O.type.defaultProps)var Ne=O.type.defaultProps;for(Ee in G)te.call(G,Ee)&&!k.hasOwnProperty(Ee)&&(we[Ee]=G[Ee]===void 0&&Ne!==void 0?Ne[Ee]:G[Ee])}var Ee=arguments.length-2;if(Ee===1)we.children=pe;else if(1<Ee){Ne=Array(Ee);for(var st=0;st<Ee;st++)Ne[st]=arguments[st+2];we.children=Ne}return{$$typeof:r,type:O.type,key:be,ref:Ae,props:we,_owner:Le}},je.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},je.createElement=S,je.createFactory=function(O){var G=S.bind(null,O);return G.type=O,G},je.createRef=function(){return{current:null}},je.forwardRef=function(O){return{$$typeof:f,render:O}},je.isValidElement=P,je.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:tt}},je.memo=function(O,G){return{$$typeof:v,type:O,compare:G===void 0?null:G}},je.startTransition=function(O){var G=W.transition;W.transition={};try{O()}finally{W.transition=G}},je.unstable_act=ie,je.useCallback=function(O,G){return Z.current.useCallback(O,G)},je.useContext=function(O){return Z.current.useContext(O)},je.useDebugValue=function(){},je.useDeferredValue=function(O){return Z.current.useDeferredValue(O)},je.useEffect=function(O,G){return Z.current.useEffect(O,G)},je.useId=function(){return Z.current.useId()},je.useImperativeHandle=function(O,G,pe){return Z.current.useImperativeHandle(O,G,pe)},je.useInsertionEffect=function(O,G){return Z.current.useInsertionEffect(O,G)},je.useLayoutEffect=function(O,G){return Z.current.useLayoutEffect(O,G)},je.useMemo=function(O,G){return Z.current.useMemo(O,G)},je.useReducer=function(O,G,pe){return Z.current.useReducer(O,G,pe)},je.useRef=function(O){return Z.current.useRef(O)},je.useState=function(O){return Z.current.useState(O)},je.useSyncExternalStore=function(O,G,pe){return Z.current.useSyncExternalStore(O,G,pe)},je.useTransition=function(){return Z.current.useTransition()},je.version="18.3.1",je}var Ag;function Rf(){return Ag||(Ag=1,Dd.exports=TE()),Dd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function SE(){if(Pg)return Ga;Pg=1;var r=Rf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,v){var E,I={},x=null,j=null;v!==void 0&&(x=""+v),g.key!==void 0&&(x=""+g.key),g.ref!==void 0&&(j=g.ref);for(E in g)i.call(g,E)&&!l.hasOwnProperty(E)&&(I[E]=g[E]);if(f&&f.defaultProps)for(E in g=f.defaultProps,g)I[E]===void 0&&(I[E]=g[E]);return{$$typeof:e,type:f,key:x,ref:j,props:I,_owner:o.current}}return Ga.Fragment=t,Ga.jsx=h,Ga.jsxs=h,Ga}var bg;function xE(){return bg||(bg=1,Nd.exports=SE()),Nd.exports}var _=xE(),L=Rf();const ci=Cv(L),CE=IE({__proto__:null,default:ci},[L]);var Ku={},Od={exports:{}},wn={},Vd={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function RE(){return kg||(kg=1,function(r){function e(W,oe){var ie=W.length;W.push(oe);e:for(;0<ie;){var O=ie-1>>>1,G=W[O];if(0<o(G,oe))W[O]=oe,W[ie]=G,ie=O;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var oe=W[0],ie=W.pop();if(ie!==oe){W[0]=ie;e:for(var O=0,G=W.length,pe=G>>>1;O<pe;){var we=2*(O+1)-1,be=W[we],Ae=we+1,Le=W[Ae];if(0>o(be,ie))Ae<G&&0>o(Le,be)?(W[O]=Le,W[Ae]=ie,O=Ae):(W[O]=be,W[we]=ie,O=we);else if(Ae<G&&0>o(Le,ie))W[O]=Le,W[Ae]=ie,O=Ae;else break e}}return oe}function o(W,oe){var ie=W.sortIndex-oe.sortIndex;return ie!==0?ie:W.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],v=[],E=1,I=null,x=3,j=!1,q=!1,H=!1,M=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(W){for(var oe=t(v);oe!==null;){if(oe.callback===null)i(v);else if(oe.startTime<=W)i(v),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(v)}}function de(W){if(H=!1,Q(W),!q)if(t(g)!==null)q=!0,tt(te);else{var oe=t(v);oe!==null&&Z(de,oe.startTime-W)}}function te(W,oe){q=!1,H&&(H=!1,le(S),S=-1),j=!0;var ie=x;try{for(Q(oe),I=t(g);I!==null&&(!(I.expirationTime>oe)||W&&!N());){var O=I.callback;if(typeof O=="function"){I.callback=null,x=I.priorityLevel;var G=O(I.expirationTime<=oe);oe=r.unstable_now(),typeof G=="function"?I.callback=G:I===t(g)&&i(g),Q(oe)}else i(g);I=t(g)}if(I!==null)var pe=!0;else{var we=t(v);we!==null&&Z(de,we.startTime-oe),pe=!1}return pe}finally{I=null,x=ie,j=!1}}var _e=!1,k=null,S=-1,C=5,P=-1;function N(){return!(r.unstable_now()-P<C)}function V(){if(k!==null){var W=r.unstable_now();P=W;var oe=!0;try{oe=k(!0,W)}finally{oe?A():(_e=!1,k=null)}}else _e=!1}var A;if(typeof X=="function")A=function(){X(V)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Ge=qe.port2;qe.port1.onmessage=V,A=function(){Ge.postMessage(null)}}else A=function(){M(V,0)};function tt(W){k=W,_e||(_e=!0,A())}function Z(W,oe){S=M(function(){W(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){q||j||(q=!0,tt(te))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(W){switch(x){case 1:case 2:case 3:var oe=3;break;default:oe=x}var ie=x;x=oe;try{return W()}finally{x=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ie=x;x=W;try{return oe()}finally{x=ie}},r.unstable_scheduleCallback=function(W,oe,ie){var O=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?O+ie:O):ie=O,W){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ie+G,W={id:E++,callback:oe,priorityLevel:W,startTime:ie,expirationTime:G,sortIndex:-1},ie>O?(W.sortIndex=ie,e(v,W),t(g)===null&&W===t(v)&&(H?(le(S),S=-1):H=!0,Z(de,ie-O))):(W.sortIndex=G,e(g,W),q||j||(q=!0,tt(te))),W},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(W){var oe=x;return function(){var ie=x;x=oe;try{return W.apply(this,arguments)}finally{x=ie}}}}(Ld)),Ld}var Ng;function AE(){return Ng||(Ng=1,Vd.exports=RE()),Vd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function PE(){if(Dg)return wn;Dg=1;var r=Rf(),e=AE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function x(n){return g.call(I,n)?!0:g.call(E,n)?!1:v.test(n)?I[n]=!0:(E[n]=!0,!1)}function j(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,s,a,c){if(s===null||typeof s>"u"||j(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function H(n,s,a,c,d,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){M[n]=new H(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];M[s]=new H(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){M[n]=new H(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){M[n]=new H(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){M[n]=new H(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){M[n]=new H(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){M[n]=new H(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){M[n]=new H(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){M[n]=new H(n,5,!1,n.toLowerCase(),null,!1,!1)});var le=/[\-:]([a-z])/g;function X(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(le,X);M[s]=new H(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(le,X);M[s]=new H(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(le,X);M[s]=new H(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){M[n]=new H(n,1,!1,n.toLowerCase(),null,!1,!1)}),M.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){M[n]=new H(n,1,!1,n.toLowerCase(),null,!0,!0)});function Q(n,s,a,c){var d=M.hasOwnProperty(s)?M[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(q(s,a,d,c)&&(a=null),c||d===null?x(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var de=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,te=Symbol.for("react.element"),_e=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),N=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),qe=Symbol.for("react.suspense_list"),Ge=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),W=Symbol.iterator;function oe(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,O;function G(n){if(O===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+n}var pe=!1;function we(n,s){if(!n||pe)return"";pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(B){var c=B}Reflect.construct(n,[],s)}else{try{s.call()}catch(B){c=B}n.call(s.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),m=c.stack.split(`
`),w=d.length-1,R=m.length-1;1<=w&&0<=R&&d[w]!==m[R];)R--;for(;1<=w&&0<=R;w--,R--)if(d[w]!==m[R]){if(w!==1||R!==1)do if(w--,R--,0>R||d[w]!==m[R]){var b=`
`+d[w].replace(" at new "," at ");return n.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",n.displayName)),b}while(1<=w&&0<=R);break}}}finally{pe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function be(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=we(n.type,!1),n;case 11:return n=we(n.type.render,!1),n;case 1:return n=we(n.type,!0),n;default:return""}}function Ae(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case _e:return"Portal";case C:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case qe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case V:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ge:return s=n.displayName||null,s!==null?s:Ae(n.type)||"Memo";case tt:s=n._payload,n=n._init;try{return Ae(n(s))}catch{}}return null}function Le(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ne(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ee(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function st(n){var s=Ee(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function un(n){n._valueTracker||(n._valueTracker=st(n))}function nn(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Ee(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Sn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function xn(n,s){var a=s.checked;return ie({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function _r(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Ne(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Cn(n,s){s=s.checked,s!=null&&Q(n,"checked",s,!1)}function wr(n,s){Cn(n,s);var a=Ne(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Fn(n,s.type,a):s.hasOwnProperty("defaultValue")&&Fn(n,s.type,Ne(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function nr(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Fn(n,s,a){(s!=="number"||Sn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Ie=Array.isArray;function Qe(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ne(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Rn(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Er(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Ie(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Ne(a)}}function Ir(n,s){var a=Ne(s.value),c=Ne(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Tr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function yt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?yt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Un,qr=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Un=Un||document.createElement("div"),Un.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Un.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function An(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var zn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sr=["Webkit","ms","Moz","O"];Object.keys(zn).forEach(function(n){Sr.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),zn[s]=zn[n]})});function xr(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||zn.hasOwnProperty(n)&&zn[n]?(""+s).trim():s+"px"}function Ei(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=xr(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Gr=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rr(n,s){if(s){if(Gr[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Kr(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cr=null;function Qr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ii=null,cn=null,Bn=null;function Ti(n){if(n=Na(n)){if(typeof Ii!="function")throw Error(t(280));var s=n.stateNode;s&&(s=uu(s),Ii(n.stateNode,n.type,s))}}function Hn(n){cn?Bn?Bn.push(n):Bn=[n]:cn=n}function _s(){if(cn){var n=cn,s=Bn;if(Bn=cn=null,Ti(n),s)for(n=0;n<s.length;n++)Ti(s[n])}}function Rr(n,s){return n(s)}function ws(){}var ir=!1;function Es(n,s,a){if(ir)return n(s,a);ir=!0;try{return Rr(n,s,a)}finally{ir=!1,(cn!==null||Bn!==null)&&(ws(),_s())}}function ft(n,s){var a=n.stateNode;if(a===null)return null;var c=uu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Y=!1;if(f)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Y=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch{Y=!1}function xe(n,s,a,c,d,m,w,R,b){var B=Array.prototype.slice.call(arguments,3);try{s.apply(a,B)}catch(ne){this.onError(ne)}}var Te=!1,Fe=null,Ze=!1,vt=null,Ye={onError:function(n){Te=!0,Fe=n}};function Je(n,s,a,c,d,m,w,R,b){Te=!1,Fe=null,xe.apply(Ye,arguments)}function hn(n,s,a,c,d,m,w,R,b){if(Je.apply(this,arguments),Te){if(Te){var B=Fe;Te=!1,Fe=null}else throw Error(t(198));Ze||(Ze=!0,vt=B)}}function dn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Yr(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Pn(n){if(dn(n)!==n)throw Error(t(188))}function Vl(n){var s=n.alternate;if(!s){if(s=dn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Pn(d),n;if(m===c)return Pn(d),s;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var w=!1,R=d.child;R;){if(R===a){w=!0,a=d,c=m;break}if(R===c){w=!0,c=d,a=m;break}R=R.sibling}if(!w){for(R=m.child;R;){if(R===a){w=!0,a=m,c=d;break}if(R===c){w=!0,c=m,a=d;break}R=R.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function fa(n){return n=Vl(n),n!==null?eo(n):null}function eo(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=eo(n);if(s!==null)return s;n=n.sibling}return null}var to=e.unstable_scheduleCallback,pa=e.unstable_cancelCallback,Ll=e.unstable_shouldYield,ah=e.unstable_requestPaint,rt=e.unstable_now,Ml=e.unstable_getCurrentPriorityLevel,Is=e.unstable_ImmediatePriority,Si=e.unstable_UserBlockingPriority,$n=e.unstable_NormalPriority,ma=e.unstable_LowPriority,jl=e.unstable_IdlePriority,Ts=null,bn=null;function Fl(n){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Ts,n,void 0,(n.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:zl,ga=Math.log,Ul=Math.LN2;function zl(n){return n>>>=0,n===0?32:31-(ga(n)/Ul|0)|0}var no=64,ro=4194304;function xi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ss(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var R=w&~d;R!==0?c=xi(R):(m&=w,m!==0&&(c=xi(m)))}else w=a&~d,w!==0?c=xi(w):m!==0&&(c=xi(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,m=s&-s,d>=m||d===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-rn(s),d=1<<a,c|=n[a],s&=~d;return c}function lh(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-rn(m),R=1<<w,b=d[w];b===-1?((R&a)===0||(R&c)!==0)&&(d[w]=lh(R,s)):b<=s&&(n.expiredLanes|=R),m&=~R}}function kn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function xs(){var n=no;return no<<=1,(no&4194240)===0&&(no=64),n}function Ci(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Ri(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-rn(s),n[s]=a}function nt(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-rn(a),m=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Ai(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-rn(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Be=0;function Pi(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Bl,io,Hl,$l,Wl,ya=!1,Ar=[],Ut=null,sr=null,or=null,bi=new Map,Wn=new Map,Pr=[],uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ql(n,s){switch(n){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":bi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wn.delete(s.pointerId)}}function fn(n,s,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},s!==null&&(s=Na(s),s!==null&&io(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function ch(n,s,a,c,d){switch(s){case"focusin":return Ut=fn(Ut,n,s,a,c,d),!0;case"dragenter":return sr=fn(sr,n,s,a,c,d),!0;case"mouseover":return or=fn(or,n,s,a,c,d),!0;case"pointerover":var m=d.pointerId;return bi.set(m,fn(bi.get(m)||null,n,s,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,Wn.set(m,fn(Wn.get(m)||null,n,s,a,c,d)),!0}return!1}function Gl(n){var s=bs(n.target);if(s!==null){var a=dn(s);if(a!==null){if(s=a.tag,s===13){if(s=Yr(a),s!==null){n.blockedOn=s,Wl(n.priority,function(){Hl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=so(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Cr=c,a.target.dispatchEvent(c),Cr=null}else return s=Na(a),s!==null&&io(s),n.blockedOn=a,!1;s.shift()}return!0}function Cs(n,s,a){Xr(n)&&a.delete(s)}function Kl(){ya=!1,Ut!==null&&Xr(Ut)&&(Ut=null),sr!==null&&Xr(sr)&&(sr=null),or!==null&&Xr(or)&&(or=null),bi.forEach(Cs),Wn.forEach(Cs)}function ar(n,s){n.blockedOn===s&&(n.blockedOn=null,ya||(ya=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Kl)))}function lr(n){function s(d){return ar(d,n)}if(0<Ar.length){ar(Ar[0],n);for(var a=1;a<Ar.length;a++){var c=Ar[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Ut!==null&&ar(Ut,n),sr!==null&&ar(sr,n),or!==null&&ar(or,n),bi.forEach(s),Wn.forEach(s),a=0;a<Pr.length;a++)c=Pr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Pr.length&&(a=Pr[0],a.blockedOn===null);)Gl(a),a.blockedOn===null&&Pr.shift()}var Zr=de.ReactCurrentBatchConfig,ki=!0;function ht(n,s,a,c){var d=Be,m=Zr.transition;Zr.transition=null;try{Be=1,va(n,s,a,c)}finally{Be=d,Zr.transition=m}}function hh(n,s,a,c){var d=Be,m=Zr.transition;Zr.transition=null;try{Be=4,va(n,s,a,c)}finally{Be=d,Zr.transition=m}}function va(n,s,a,c){if(ki){var d=so(n,s,a,c);if(d===null)Ih(n,s,c,Rs,a),ql(n,c);else if(ch(d,n,s,a,c))c.stopPropagation();else if(ql(n,c),s&4&&-1<uh.indexOf(n)){for(;d!==null;){var m=Na(d);if(m!==null&&Bl(m),m=so(n,s,a,c),m===null&&Ih(n,s,c,Rs,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Ih(n,s,c,null,a)}}var Rs=null;function so(n,s,a,c){if(Rs=null,n=Qr(c),n=bs(n),n!==null)if(s=dn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Yr(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Rs=n,null}function _a(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ml()){case Is:return 1;case Si:return 4;case $n:case ma:return 16;case jl:return 536870912;default:return 16}default:return 16}}var Nn=null,oo=null,pn=null;function wa(){if(pn)return pn;var n,s=oo,a=s.length,c,d="value"in Nn?Nn.value:Nn.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[m-c];c++);return pn=d.slice(n,1<c?1-c:void 0)}function ao(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function br(){return!0}function Ea(){return!1}function zt(n){function s(a,c,d,m,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(a=n[R],this[R]=a?a(m):m[R]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?br:Ea,this.isPropagationStopped=Ea,this}return ie(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),s}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lo=zt(ur),kr=ie({},ur,{view:0,detail:0}),dh=zt(kr),uo,ei,Ni,As=ie({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ni&&(Ni&&n.type==="mousemove"?(uo=n.screenX-Ni.screenX,ei=n.screenY-Ni.screenY):ei=uo=0,Ni=n),uo)},movementY:function(n){return"movementY"in n?n.movementY:ei}}),co=zt(As),Ia=ie({},As,{dataTransfer:0}),Ql=zt(Ia),ho=ie({},kr,{relatedTarget:0}),fo=zt(ho),Yl=ie({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),ti=zt(Yl),Jl=ie({},ur,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Xl=zt(Jl),Zl=ie({},ur,{data:0}),Ta=zt(Zl),po={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=eu[n])?!!s[n]:!1}function Nr(){return tu}var u=ie({},kr,{key:function(n){if(n.key){var s=po[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ao(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?sn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(n){return n.type==="keypress"?ao(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ao(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=zt(u),y=ie({},As,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=zt(y),F=ie({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr}),$=zt(F),ae=ie({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),et=zt(ae),bt=ie({},As,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),He=zt(bt),Vt=[9,13,27,32],St=f&&"CompositionEvent"in window,qn=null;f&&"documentMode"in document&&(qn=document.documentMode);var Dn=f&&"TextEvent"in window&&!qn,Ps=f&&(!St||qn&&8<qn&&11>=qn),mo=" ",Ep=!1;function Ip(n,s){switch(n){case"keyup":return Vt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var go=!1;function _w(n,s){switch(n){case"compositionend":return Tp(s);case"keypress":return s.which!==32?null:(Ep=!0,mo);case"textInput":return n=s.data,n===mo&&Ep?null:n;default:return null}}function ww(n,s){if(go)return n==="compositionend"||!St&&Ip(n,s)?(n=wa(),pn=oo=Nn=null,go=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ps&&s.locale!=="ko"?null:s.data;default:return null}}var Ew={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Ew[n.type]:s==="textarea"}function xp(n,s,a,c){Hn(c),s=ou(s,"onChange"),0<s.length&&(a=new lo("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Sa=null,xa=null;function Iw(n){Hp(n,0)}function nu(n){var s=Eo(n);if(nn(s))return n}function Tw(n,s){if(n==="change")return s}var Cp=!1;if(f){var fh;if(f){var ph="oninput"in document;if(!ph){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),ph=typeof Rp.oninput=="function"}fh=ph}else fh=!1;Cp=fh&&(!document.documentMode||9<document.documentMode)}function Ap(){Sa&&(Sa.detachEvent("onpropertychange",Pp),xa=Sa=null)}function Pp(n){if(n.propertyName==="value"&&nu(xa)){var s=[];xp(s,xa,n,Qr(n)),Es(Iw,s)}}function Sw(n,s,a){n==="focusin"?(Ap(),Sa=s,xa=a,Sa.attachEvent("onpropertychange",Pp)):n==="focusout"&&Ap()}function xw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return nu(xa)}function Cw(n,s){if(n==="click")return nu(s)}function Rw(n,s){if(n==="input"||n==="change")return nu(s)}function Aw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var cr=typeof Object.is=="function"?Object.is:Aw;function Ca(n,s){if(cr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!cr(n[d],s[d]))return!1}return!0}function bp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kp(n,s){var a=bp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bp(a)}}function Np(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Np(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Dp(){for(var n=window,s=Sn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Sn(n.document)}return s}function mh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Pw(n){var s=Dp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Np(a.ownerDocument.documentElement,a)){if(c!==null&&mh(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=kp(a,m);var w=kp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var bw=f&&"documentMode"in document&&11>=document.documentMode,yo=null,gh=null,Ra=null,yh=!1;function Op(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yh||yo==null||yo!==Sn(c)||(c=yo,"selectionStart"in c&&mh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ra&&Ca(Ra,c)||(Ra=c,c=ou(gh,"onSelect"),0<c.length&&(s=new lo("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=yo)))}function ru(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var vo={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},vh={},Vp={};f&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function iu(n){if(vh[n])return vh[n];if(!vo[n])return n;var s=vo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Vp)return vh[n]=s[a];return n}var Lp=iu("animationend"),Mp=iu("animationiteration"),jp=iu("animationstart"),Fp=iu("transitionend"),Up=new Map,zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(n,s){Up.set(n,s),l(s,[n])}for(var _h=0;_h<zp.length;_h++){var wh=zp[_h],kw=wh.toLowerCase(),Nw=wh[0].toUpperCase()+wh.slice(1);Di(kw,"on"+Nw)}Di(Lp,"onAnimationEnd"),Di(Mp,"onAnimationIteration"),Di(jp,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Fp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function Bp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,hn(c,s,void 0,n),n.currentTarget=null}function Hp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var w=c.length-1;0<=w;w--){var R=c[w],b=R.instance,B=R.currentTarget;if(R=R.listener,b!==m&&d.isPropagationStopped())break e;Bp(d,R,B),m=b}else for(w=0;w<c.length;w++){if(R=c[w],b=R.instance,B=R.currentTarget,R=R.listener,b!==m&&d.isPropagationStopped())break e;Bp(d,R,B),m=b}}}if(Ze)throw n=vt,Ze=!1,vt=null,n}function ot(n,s){var a=s[Ah];a===void 0&&(a=s[Ah]=new Set);var c=n+"__bubble";a.has(c)||($p(s,n,2,!1),a.add(c))}function Eh(n,s,a){var c=0;s&&(c|=4),$p(a,n,c,s)}var su="_reactListening"+Math.random().toString(36).slice(2);function Pa(n){if(!n[su]){n[su]=!0,i.forEach(function(a){a!=="selectionchange"&&(Dw.has(a)||Eh(a,!1,n),Eh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[su]||(s[su]=!0,Eh("selectionchange",!1,s))}}function $p(n,s,a,c){switch(_a(s)){case 1:var d=ht;break;case 4:d=hh;break;default:d=va}a=d.bind(null,s,a,n),d=void 0,!Y||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Ih(n,s,a,c,d){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===d||R.nodeType===8&&R.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var b=w.tag;if((b===3||b===4)&&(b=w.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;w=w.return}for(;R!==null;){if(w=bs(R),w===null)return;if(b=w.tag,b===5||b===6){c=m=w;continue e}R=R.parentNode}}c=c.return}Es(function(){var B=m,ne=Qr(a),re=[];e:{var ee=Up.get(n);if(ee!==void 0){var ce=lo,me=n;switch(n){case"keypress":if(ao(a)===0)break e;case"keydown":case"keyup":ce=p;break;case"focusin":me="focus",ce=fo;break;case"focusout":me="blur",ce=fo;break;case"beforeblur":case"afterblur":ce=fo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=$;break;case Lp:case Mp:case jp:ce=ti;break;case Fp:ce=et;break;case"scroll":ce=dh;break;case"wheel":ce=He;break;case"copy":case"cut":case"paste":ce=Xl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=T}var ge=(s&4)!==0,wt=!ge&&n==="scroll",U=ge?ee!==null?ee+"Capture":null:ee;ge=[];for(var D=B,z;D!==null;){z=D;var se=z.stateNode;if(z.tag===5&&se!==null&&(z=se,U!==null&&(se=ft(D,U),se!=null&&ge.push(ba(D,se,z)))),wt)break;D=D.return}0<ge.length&&(ee=new ce(ee,me,null,a,ne),re.push({event:ee,listeners:ge}))}}if((s&7)===0){e:{if(ee=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",ee&&a!==Cr&&(me=a.relatedTarget||a.fromElement)&&(bs(me)||me[ni]))break e;if((ce||ee)&&(ee=ne.window===ne?ne:(ee=ne.ownerDocument)?ee.defaultView||ee.parentWindow:window,ce?(me=a.relatedTarget||a.toElement,ce=B,me=me?bs(me):null,me!==null&&(wt=dn(me),me!==wt||me.tag!==5&&me.tag!==6)&&(me=null)):(ce=null,me=B),ce!==me)){if(ge=co,se="onMouseLeave",U="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(ge=T,se="onPointerLeave",U="onPointerEnter",D="pointer"),wt=ce==null?ee:Eo(ce),z=me==null?ee:Eo(me),ee=new ge(se,D+"leave",ce,a,ne),ee.target=wt,ee.relatedTarget=z,se=null,bs(ne)===B&&(ge=new ge(U,D+"enter",me,a,ne),ge.target=z,ge.relatedTarget=wt,se=ge),wt=se,ce&&me)t:{for(ge=ce,U=me,D=0,z=ge;z;z=_o(z))D++;for(z=0,se=U;se;se=_o(se))z++;for(;0<D-z;)ge=_o(ge),D--;for(;0<z-D;)U=_o(U),z--;for(;D--;){if(ge===U||U!==null&&ge===U.alternate)break t;ge=_o(ge),U=_o(U)}ge=null}else ge=null;ce!==null&&Wp(re,ee,ce,ge,!1),me!==null&&wt!==null&&Wp(re,wt,me,ge,!0)}}e:{if(ee=B?Eo(B):window,ce=ee.nodeName&&ee.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ee.type==="file")var ve=Tw;else if(Sp(ee))if(Cp)ve=Rw;else{ve=xw;var Ce=Sw}else(ce=ee.nodeName)&&ce.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ve=Cw);if(ve&&(ve=ve(n,B))){xp(re,ve,a,ne);break e}Ce&&Ce(n,ee,B),n==="focusout"&&(Ce=ee._wrapperState)&&Ce.controlled&&ee.type==="number"&&Fn(ee,"number",ee.value)}switch(Ce=B?Eo(B):window,n){case"focusin":(Sp(Ce)||Ce.contentEditable==="true")&&(yo=Ce,gh=B,Ra=null);break;case"focusout":Ra=gh=yo=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,Op(re,a,ne);break;case"selectionchange":if(bw)break;case"keydown":case"keyup":Op(re,a,ne)}var Re;if(St)e:{switch(n){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else go?Ip(n,a)&&(De="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(Ps&&a.locale!=="ko"&&(go||De!=="onCompositionStart"?De==="onCompositionEnd"&&go&&(Re=wa()):(Nn=ne,oo="value"in Nn?Nn.value:Nn.textContent,go=!0)),Ce=ou(B,De),0<Ce.length&&(De=new Ta(De,n,null,a,ne),re.push({event:De,listeners:Ce}),Re?De.data=Re:(Re=Tp(a),Re!==null&&(De.data=Re)))),(Re=Dn?_w(n,a):ww(n,a))&&(B=ou(B,"onBeforeInput"),0<B.length&&(ne=new Ta("onBeforeInput","beforeinput",null,a,ne),re.push({event:ne,listeners:B}),ne.data=Re))}Hp(re,s)})}function ba(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ou(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=ft(n,a),m!=null&&c.unshift(ba(n,m,d)),m=ft(n,s),m!=null&&c.push(ba(n,m,d))),n=n.return}return c}function _o(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Wp(n,s,a,c,d){for(var m=s._reactName,w=[];a!==null&&a!==c;){var R=a,b=R.alternate,B=R.stateNode;if(b!==null&&b===c)break;R.tag===5&&B!==null&&(R=B,d?(b=ft(a,m),b!=null&&w.unshift(ba(a,b,R))):d||(b=ft(a,m),b!=null&&w.push(ba(a,b,R)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var Ow=/\r\n?/g,Vw=/\u0000|\uFFFD/g;function qp(n){return(typeof n=="string"?n:""+n).replace(Ow,`
`).replace(Vw,"")}function au(n,s,a){if(s=qp(s),qp(n)!==s&&a)throw Error(t(425))}function lu(){}var Th=null,Sh=null;function xh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ch=typeof setTimeout=="function"?setTimeout:void 0,Lw=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,Mw=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(n){return Gp.resolve(null).then(n).catch(jw)}:Ch;function jw(n){setTimeout(function(){throw n})}function Rh(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),lr(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);lr(s)}function Oi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Kp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var wo=Math.random().toString(36).slice(2),Dr="__reactFiber$"+wo,ka="__reactProps$"+wo,ni="__reactContainer$"+wo,Ah="__reactEvents$"+wo,Fw="__reactListeners$"+wo,Uw="__reactHandles$"+wo;function bs(n){var s=n[Dr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[ni]||a[Dr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Kp(n);n!==null;){if(a=n[Dr])return a;n=Kp(n)}return s}n=a,a=n.parentNode}return null}function Na(n){return n=n[Dr]||n[ni],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Eo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function uu(n){return n[ka]||null}var Ph=[],Io=-1;function Vi(n){return{current:n}}function at(n){0>Io||(n.current=Ph[Io],Ph[Io]=null,Io--)}function it(n,s){Io++,Ph[Io]=n.current,n.current=s}var Li={},Gt=Vi(Li),mn=Vi(!1),ks=Li;function To(n,s){var a=n.type.contextTypes;if(!a)return Li;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function gn(n){return n=n.childContextTypes,n!=null}function cu(){at(mn),at(Gt)}function Qp(n,s,a){if(Gt.current!==Li)throw Error(t(168));it(Gt,s),it(mn,a)}function Yp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Le(n)||"Unknown",d));return ie({},a,c)}function hu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Li,ks=Gt.current,it(Gt,n),it(mn,mn.current),!0}function Jp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Yp(n,s,ks),c.__reactInternalMemoizedMergedChildContext=n,at(mn),at(Gt),it(Gt,n)):at(mn),it(mn,a)}var ri=null,du=!1,bh=!1;function Xp(n){ri===null?ri=[n]:ri.push(n)}function zw(n){du=!0,Xp(n)}function Mi(){if(!bh&&ri!==null){bh=!0;var n=0,s=Be;try{var a=ri;for(Be=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}ri=null,du=!1}catch(d){throw ri!==null&&(ri=ri.slice(n+1)),to(Is,Mi),d}finally{Be=s,bh=!1}}return null}var So=[],xo=0,fu=null,pu=0,Gn=[],Kn=0,Ns=null,ii=1,si="";function Ds(n,s){So[xo++]=pu,So[xo++]=fu,fu=n,pu=s}function Zp(n,s,a){Gn[Kn++]=ii,Gn[Kn++]=si,Gn[Kn++]=Ns,Ns=n;var c=ii;n=si;var d=32-rn(c)-1;c&=~(1<<d),a+=1;var m=32-rn(s)+d;if(30<m){var w=d-d%5;m=(c&(1<<w)-1).toString(32),c>>=w,d-=w,ii=1<<32-rn(s)+d|a<<d|c,si=m+n}else ii=1<<m|a<<d|c,si=n}function kh(n){n.return!==null&&(Ds(n,1),Zp(n,1,0))}function Nh(n){for(;n===fu;)fu=So[--xo],So[xo]=null,pu=So[--xo],So[xo]=null;for(;n===Ns;)Ns=Gn[--Kn],Gn[Kn]=null,si=Gn[--Kn],Gn[Kn]=null,ii=Gn[--Kn],Gn[Kn]=null}var On=null,Vn=null,dt=!1,hr=null;function em(n,s){var a=Xn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function tm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,On=n,Vn=Oi(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,On=n,Vn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ns!==null?{id:ii,overflow:si}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Xn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,On=n,Vn=null,!0):!1;default:return!1}}function Dh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Oh(n){if(dt){var s=Vn;if(s){var a=s;if(!tm(n,s)){if(Dh(n))throw Error(t(418));s=Oi(a.nextSibling);var c=On;s&&tm(n,s)?em(c,a):(n.flags=n.flags&-4097|2,dt=!1,On=n)}}else{if(Dh(n))throw Error(t(418));n.flags=n.flags&-4097|2,dt=!1,On=n}}}function nm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;On=n}function mu(n){if(n!==On)return!1;if(!dt)return nm(n),dt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!xh(n.type,n.memoizedProps)),s&&(s=Vn)){if(Dh(n))throw rm(),Error(t(418));for(;s;)em(n,s),s=Oi(s.nextSibling)}if(nm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Vn=Oi(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Vn=null}}else Vn=On?Oi(n.stateNode.nextSibling):null;return!0}function rm(){for(var n=Vn;n;)n=Oi(n.nextSibling)}function Co(){Vn=On=null,dt=!1}function Vh(n){hr===null?hr=[n]:hr.push(n)}var Bw=de.ReactCurrentBatchConfig;function Da(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var R=d.refs;w===null?delete R[m]:R[m]=w},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function gu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function im(n){var s=n._init;return s(n._payload)}function sm(n){function s(U,D){if(n){var z=U.deletions;z===null?(U.deletions=[D],U.flags|=16):z.push(D)}}function a(U,D){if(!n)return null;for(;D!==null;)s(U,D),D=D.sibling;return null}function c(U,D){for(U=new Map;D!==null;)D.key!==null?U.set(D.key,D):U.set(D.index,D),D=D.sibling;return U}function d(U,D){return U=Wi(U,D),U.index=0,U.sibling=null,U}function m(U,D,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<D?(U.flags|=2,D):z):(U.flags|=2,D)):(U.flags|=1048576,D)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function R(U,D,z,se){return D===null||D.tag!==6?(D=Cd(z,U.mode,se),D.return=U,D):(D=d(D,z),D.return=U,D)}function b(U,D,z,se){var ve=z.type;return ve===k?ne(U,D,z.props.children,se,z.key):D!==null&&(D.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===tt&&im(ve)===D.type)?(se=d(D,z.props),se.ref=Da(U,D,z),se.return=U,se):(se=Uu(z.type,z.key,z.props,null,U.mode,se),se.ref=Da(U,D,z),se.return=U,se)}function B(U,D,z,se){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=Rd(z,U.mode,se),D.return=U,D):(D=d(D,z.children||[]),D.return=U,D)}function ne(U,D,z,se,ve){return D===null||D.tag!==7?(D=zs(z,U.mode,se,ve),D.return=U,D):(D=d(D,z),D.return=U,D)}function re(U,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Cd(""+D,U.mode,z),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case te:return z=Uu(D.type,D.key,D.props,null,U.mode,z),z.ref=Da(U,null,D),z.return=U,z;case _e:return D=Rd(D,U.mode,z),D.return=U,D;case tt:var se=D._init;return re(U,se(D._payload),z)}if(Ie(D)||oe(D))return D=zs(D,U.mode,z,null),D.return=U,D;gu(U,D)}return null}function ee(U,D,z,se){var ve=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ve!==null?null:R(U,D,""+z,se);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case te:return z.key===ve?b(U,D,z,se):null;case _e:return z.key===ve?B(U,D,z,se):null;case tt:return ve=z._init,ee(U,D,ve(z._payload),se)}if(Ie(z)||oe(z))return ve!==null?null:ne(U,D,z,se,null);gu(U,z)}return null}function ce(U,D,z,se,ve){if(typeof se=="string"&&se!==""||typeof se=="number")return U=U.get(z)||null,R(D,U,""+se,ve);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case te:return U=U.get(se.key===null?z:se.key)||null,b(D,U,se,ve);case _e:return U=U.get(se.key===null?z:se.key)||null,B(D,U,se,ve);case tt:var Ce=se._init;return ce(U,D,z,Ce(se._payload),ve)}if(Ie(se)||oe(se))return U=U.get(z)||null,ne(D,U,se,ve,null);gu(D,se)}return null}function me(U,D,z,se){for(var ve=null,Ce=null,Re=D,De=D=0,jt=null;Re!==null&&De<z.length;De++){Re.index>De?(jt=Re,Re=null):jt=Re.sibling;var Ke=ee(U,Re,z[De],se);if(Ke===null){Re===null&&(Re=jt);break}n&&Re&&Ke.alternate===null&&s(U,Re),D=m(Ke,D,De),Ce===null?ve=Ke:Ce.sibling=Ke,Ce=Ke,Re=jt}if(De===z.length)return a(U,Re),dt&&Ds(U,De),ve;if(Re===null){for(;De<z.length;De++)Re=re(U,z[De],se),Re!==null&&(D=m(Re,D,De),Ce===null?ve=Re:Ce.sibling=Re,Ce=Re);return dt&&Ds(U,De),ve}for(Re=c(U,Re);De<z.length;De++)jt=ce(Re,U,De,z[De],se),jt!==null&&(n&&jt.alternate!==null&&Re.delete(jt.key===null?De:jt.key),D=m(jt,D,De),Ce===null?ve=jt:Ce.sibling=jt,Ce=jt);return n&&Re.forEach(function(qi){return s(U,qi)}),dt&&Ds(U,De),ve}function ge(U,D,z,se){var ve=oe(z);if(typeof ve!="function")throw Error(t(150));if(z=ve.call(z),z==null)throw Error(t(151));for(var Ce=ve=null,Re=D,De=D=0,jt=null,Ke=z.next();Re!==null&&!Ke.done;De++,Ke=z.next()){Re.index>De?(jt=Re,Re=null):jt=Re.sibling;var qi=ee(U,Re,Ke.value,se);if(qi===null){Re===null&&(Re=jt);break}n&&Re&&qi.alternate===null&&s(U,Re),D=m(qi,D,De),Ce===null?ve=qi:Ce.sibling=qi,Ce=qi,Re=jt}if(Ke.done)return a(U,Re),dt&&Ds(U,De),ve;if(Re===null){for(;!Ke.done;De++,Ke=z.next())Ke=re(U,Ke.value,se),Ke!==null&&(D=m(Ke,D,De),Ce===null?ve=Ke:Ce.sibling=Ke,Ce=Ke);return dt&&Ds(U,De),ve}for(Re=c(U,Re);!Ke.done;De++,Ke=z.next())Ke=ce(Re,U,De,Ke.value,se),Ke!==null&&(n&&Ke.alternate!==null&&Re.delete(Ke.key===null?De:Ke.key),D=m(Ke,D,De),Ce===null?ve=Ke:Ce.sibling=Ke,Ce=Ke);return n&&Re.forEach(function(EE){return s(U,EE)}),dt&&Ds(U,De),ve}function wt(U,D,z,se){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case te:e:{for(var ve=z.key,Ce=D;Ce!==null;){if(Ce.key===ve){if(ve=z.type,ve===k){if(Ce.tag===7){a(U,Ce.sibling),D=d(Ce,z.props.children),D.return=U,U=D;break e}}else if(Ce.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===tt&&im(ve)===Ce.type){a(U,Ce.sibling),D=d(Ce,z.props),D.ref=Da(U,Ce,z),D.return=U,U=D;break e}a(U,Ce);break}else s(U,Ce);Ce=Ce.sibling}z.type===k?(D=zs(z.props.children,U.mode,se,z.key),D.return=U,U=D):(se=Uu(z.type,z.key,z.props,null,U.mode,se),se.ref=Da(U,D,z),se.return=U,U=se)}return w(U);case _e:e:{for(Ce=z.key;D!==null;){if(D.key===Ce)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){a(U,D.sibling),D=d(D,z.children||[]),D.return=U,U=D;break e}else{a(U,D);break}else s(U,D);D=D.sibling}D=Rd(z,U.mode,se),D.return=U,U=D}return w(U);case tt:return Ce=z._init,wt(U,D,Ce(z._payload),se)}if(Ie(z))return me(U,D,z,se);if(oe(z))return ge(U,D,z,se);gu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,D!==null&&D.tag===6?(a(U,D.sibling),D=d(D,z),D.return=U,U=D):(a(U,D),D=Cd(z,U.mode,se),D.return=U,U=D),w(U)):a(U,D)}return wt}var Ro=sm(!0),om=sm(!1),yu=Vi(null),vu=null,Ao=null,Lh=null;function Mh(){Lh=Ao=vu=null}function jh(n){var s=yu.current;at(yu),n._currentValue=s}function Fh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function Po(n,s){vu=n,Lh=Ao=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(yn=!0),n.firstContext=null)}function Qn(n){var s=n._currentValue;if(Lh!==n)if(n={context:n,memoizedValue:s,next:null},Ao===null){if(vu===null)throw Error(t(308));Ao=n,vu.dependencies={lanes:0,firstContext:n}}else Ao=Ao.next=n;return s}var Os=null;function Uh(n){Os===null?Os=[n]:Os.push(n)}function am(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Uh(s)):(a.next=d.next,d.next=a),s.interleaved=a,oi(n,c)}function oi(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ji=!1;function zh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ai(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Fi(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,oi(n,a)}return d=c.interleaved,d===null?(s.next=s,Uh(c)):(s.next=d.next,d.next=s),c.interleaved=s,oi(n,a)}function _u(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Ai(n,a)}}function um(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function wu(n,s,a,c){var d=n.updateQueue;ji=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var b=R,B=b.next;b.next=null,w===null?m=B:w.next=B,w=b;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,R=ne.lastBaseUpdate,R!==w&&(R===null?ne.firstBaseUpdate=B:R.next=B,ne.lastBaseUpdate=b))}if(m!==null){var re=d.baseState;w=0,ne=B=b=null,R=m;do{var ee=R.lane,ce=R.eventTime;if((c&ee)===ee){ne!==null&&(ne=ne.next={eventTime:ce,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var me=n,ge=R;switch(ee=s,ce=a,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){re=me.call(ce,re,ee);break e}re=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,ee=typeof me=="function"?me.call(ce,re,ee):me,ee==null)break e;re=ie({},re,ee);break e;case 2:ji=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,ee=d.effects,ee===null?d.effects=[R]:ee.push(R))}else ce={eventTime:ce,lane:ee,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ne===null?(B=ne=ce,b=re):ne=ne.next=ce,w|=ee;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;ee=R,R=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);if(ne===null&&(b=re),d.baseState=b,d.firstBaseUpdate=B,d.lastBaseUpdate=ne,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else m===null&&(d.shared.lanes=0);Ms|=w,n.lanes=w,n.memoizedState=re}}function cm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Oa={},Or=Vi(Oa),Va=Vi(Oa),La=Vi(Oa);function Vs(n){if(n===Oa)throw Error(t(174));return n}function Bh(n,s){switch(it(La,s),it(Va,n),it(Or,Oa),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ct(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=ct(s,n)}at(Or),it(Or,s)}function bo(){at(Or),at(Va),at(La)}function hm(n){Vs(La.current);var s=Vs(Or.current),a=ct(s,n.type);s!==a&&(it(Va,n),it(Or,a))}function Hh(n){Va.current===n&&(at(Or),at(Va))}var pt=Vi(0);function Eu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $h=[];function Wh(){for(var n=0;n<$h.length;n++)$h[n]._workInProgressVersionPrimary=null;$h.length=0}var Iu=de.ReactCurrentDispatcher,qh=de.ReactCurrentBatchConfig,Ls=0,mt=null,kt=null,Lt=null,Tu=!1,Ma=!1,ja=0,Hw=0;function Kt(){throw Error(t(321))}function Gh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!cr(n[a],s[a]))return!1;return!0}function Kh(n,s,a,c,d,m){if(Ls=m,mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Iu.current=n===null||n.memoizedState===null?Gw:Kw,n=a(c,d),Ma){m=0;do{if(Ma=!1,ja=0,25<=m)throw Error(t(301));m+=1,Lt=kt=null,s.updateQueue=null,Iu.current=Qw,n=a(c,d)}while(Ma)}if(Iu.current=Cu,s=kt!==null&&kt.next!==null,Ls=0,Lt=kt=mt=null,Tu=!1,s)throw Error(t(300));return n}function Qh(){var n=ja!==0;return ja=0,n}function Vr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?mt.memoizedState=Lt=n:Lt=Lt.next=n,Lt}function Yn(){if(kt===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=kt.next;var s=Lt===null?mt.memoizedState:Lt.next;if(s!==null)Lt=s,kt=n;else{if(n===null)throw Error(t(310));kt=n,n={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Lt===null?mt.memoizedState=Lt=n:Lt=Lt.next=n}return Lt}function Fa(n,s){return typeof s=="function"?s(n):s}function Yh(n){var s=Yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=kt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var R=w=null,b=null,B=m;do{var ne=B.lane;if((Ls&ne)===ne)b!==null&&(b=b.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var re={lane:ne,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};b===null?(R=b=re,w=c):b=b.next=re,mt.lanes|=ne,Ms|=ne}B=B.next}while(B!==null&&B!==m);b===null?w=c:b.next=R,cr(c,s.memoizedState)||(yn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=b,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,mt.lanes|=m,Ms|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Jh(n){var s=Yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=n(m,w.action),w=w.next;while(w!==d);cr(m,s.memoizedState)||(yn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function dm(){}function fm(n,s){var a=mt,c=Yn(),d=s(),m=!cr(c.memoizedState,d);if(m&&(c.memoizedState=d,yn=!0),c=c.queue,Xh(gm.bind(null,a,c,n),[n]),c.getSnapshot!==s||m||Lt!==null&&Lt.memoizedState.tag&1){if(a.flags|=2048,Ua(9,mm.bind(null,a,c,d,s),void 0,null),Mt===null)throw Error(t(349));(Ls&30)!==0||pm(a,s,d)}return d}function pm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function mm(n,s,a,c){s.value=a,s.getSnapshot=c,ym(s)&&vm(n)}function gm(n,s,a){return a(function(){ym(s)&&vm(n)})}function ym(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!cr(n,a)}catch{return!0}}function vm(n){var s=oi(n,1);s!==null&&mr(s,n,1,-1)}function _m(n){var s=Vr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:n},s.queue=n,n=n.dispatch=qw.bind(null,mt,n),[s.memoizedState,n]}function Ua(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function wm(){return Yn().memoizedState}function Su(n,s,a,c){var d=Vr();mt.flags|=n,d.memoizedState=Ua(1|s,a,void 0,c===void 0?null:c)}function xu(n,s,a,c){var d=Yn();c=c===void 0?null:c;var m=void 0;if(kt!==null){var w=kt.memoizedState;if(m=w.destroy,c!==null&&Gh(c,w.deps)){d.memoizedState=Ua(s,a,m,c);return}}mt.flags|=n,d.memoizedState=Ua(1|s,a,m,c)}function Em(n,s){return Su(8390656,8,n,s)}function Xh(n,s){return xu(2048,8,n,s)}function Im(n,s){return xu(4,2,n,s)}function Tm(n,s){return xu(4,4,n,s)}function Sm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function xm(n,s,a){return a=a!=null?a.concat([n]):null,xu(4,4,Sm.bind(null,s,n),a)}function Zh(){}function Cm(n,s){var a=Yn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Gh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Rm(n,s){var a=Yn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Gh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Am(n,s,a){return(Ls&21)===0?(n.baseState&&(n.baseState=!1,yn=!0),n.memoizedState=a):(cr(a,s)||(a=xs(),mt.lanes|=a,Ms|=a,n.baseState=!0),s)}function $w(n,s){var a=Be;Be=a!==0&&4>a?a:4,n(!0);var c=qh.transition;qh.transition={};try{n(!1),s()}finally{Be=a,qh.transition=c}}function Pm(){return Yn().memoizedState}function Ww(n,s,a){var c=Hi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},bm(n))km(s,a);else if(a=am(n,s,a,c),a!==null){var d=an();mr(a,n,c,d),Nm(a,s,c)}}function qw(n,s,a){var c=Hi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(bm(n))km(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,R=m(w,a);if(d.hasEagerState=!0,d.eagerState=R,cr(R,w)){var b=s.interleaved;b===null?(d.next=d,Uh(s)):(d.next=b.next,b.next=d),s.interleaved=d;return}}catch{}finally{}a=am(n,s,d,c),a!==null&&(d=an(),mr(a,n,c,d),Nm(a,s,c))}}function bm(n){var s=n.alternate;return n===mt||s!==null&&s===mt}function km(n,s){Ma=Tu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Nm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Ai(n,a)}}var Cu={readContext:Qn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},Gw={readContext:Qn,useCallback:function(n,s){return Vr().memoizedState=[n,s===void 0?null:s],n},useContext:Qn,useEffect:Em,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Su(4194308,4,Sm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Su(4194308,4,n,s)},useInsertionEffect:function(n,s){return Su(4,2,n,s)},useMemo:function(n,s){var a=Vr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Vr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=Ww.bind(null,mt,n),[c.memoizedState,n]},useRef:function(n){var s=Vr();return n={current:n},s.memoizedState=n},useState:_m,useDebugValue:Zh,useDeferredValue:function(n){return Vr().memoizedState=n},useTransition:function(){var n=_m(!1),s=n[0];return n=$w.bind(null,n[1]),Vr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=mt,d=Vr();if(dt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Mt===null)throw Error(t(349));(Ls&30)!==0||pm(c,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,Em(gm.bind(null,c,m,n),[n]),c.flags|=2048,Ua(9,mm.bind(null,c,m,a,s),void 0,null),a},useId:function(){var n=Vr(),s=Mt.identifierPrefix;if(dt){var a=si,c=ii;a=(c&~(1<<32-rn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ja++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Hw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Kw={readContext:Qn,useCallback:Cm,useContext:Qn,useEffect:Xh,useImperativeHandle:xm,useInsertionEffect:Im,useLayoutEffect:Tm,useMemo:Rm,useReducer:Yh,useRef:wm,useState:function(){return Yh(Fa)},useDebugValue:Zh,useDeferredValue:function(n){var s=Yn();return Am(s,kt.memoizedState,n)},useTransition:function(){var n=Yh(Fa)[0],s=Yn().memoizedState;return[n,s]},useMutableSource:dm,useSyncExternalStore:fm,useId:Pm,unstable_isNewReconciler:!1},Qw={readContext:Qn,useCallback:Cm,useContext:Qn,useEffect:Xh,useImperativeHandle:xm,useInsertionEffect:Im,useLayoutEffect:Tm,useMemo:Rm,useReducer:Jh,useRef:wm,useState:function(){return Jh(Fa)},useDebugValue:Zh,useDeferredValue:function(n){var s=Yn();return kt===null?s.memoizedState=n:Am(s,kt.memoizedState,n)},useTransition:function(){var n=Jh(Fa)[0],s=Yn().memoizedState;return[n,s]},useMutableSource:dm,useSyncExternalStore:fm,useId:Pm,unstable_isNewReconciler:!1};function dr(n,s){if(n&&n.defaultProps){s=ie({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function ed(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ie({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ru={isMounted:function(n){return(n=n._reactInternals)?dn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=an(),d=Hi(n),m=ai(c,d);m.payload=s,a!=null&&(m.callback=a),s=Fi(n,m,d),s!==null&&(mr(s,n,d,c),_u(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=an(),d=Hi(n),m=ai(c,d);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=Fi(n,m,d),s!==null&&(mr(s,n,d,c),_u(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=an(),c=Hi(n),d=ai(a,c);d.tag=2,s!=null&&(d.callback=s),s=Fi(n,d,c),s!==null&&(mr(s,n,c,a),_u(s,n,c))}};function Dm(n,s,a,c,d,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):s.prototype&&s.prototype.isPureReactComponent?!Ca(a,c)||!Ca(d,m):!0}function Om(n,s,a){var c=!1,d=Li,m=s.contextType;return typeof m=="object"&&m!==null?m=Qn(m):(d=gn(s)?ks:Gt.current,c=s.contextTypes,m=(c=c!=null)?To(n,d):Li),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ru,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),s}function Vm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Ru.enqueueReplaceState(s,s.state,null)}function td(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},zh(n);var m=s.contextType;typeof m=="object"&&m!==null?d.context=Qn(m):(m=gn(s)?ks:Gt.current,d.context=To(n,m)),d.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(ed(n,s,m,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Ru.enqueueReplaceState(d,d.state,null),wu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function ko(n,s){try{var a="",c=s;do a+=be(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:d,digest:null}}function nd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function rd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Yw=typeof WeakMap=="function"?WeakMap:Map;function Lm(n,s,a){a=ai(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Ou||(Ou=!0,vd=c),rd(n,s)},a}function Mm(n,s,a){a=ai(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){rd(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){rd(n,s),typeof c!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function jm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Yw;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=cE.bind(null,n,s,a),s.then(n,n))}function Fm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Um(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ai(-1,1),s.tag=2,Fi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Jw=de.ReactCurrentOwner,yn=!1;function on(n,s,a,c){s.child=n===null?om(s,null,a,c):Ro(s,n.child,a,c)}function zm(n,s,a,c,d){a=a.render;var m=s.ref;return Po(s,d),c=Kh(n,s,a,c,m,d),a=Qh(),n!==null&&!yn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,li(n,s,d)):(dt&&a&&kh(s),s.flags|=1,on(n,s,c,d),s.child)}function Bm(n,s,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!xd(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,Hm(n,s,m,c,d)):(n=Uu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ca,a(w,c)&&n.ref===s.ref)return li(n,s,d)}return s.flags|=1,n=Wi(m,c),n.ref=s.ref,n.return=s,s.child=n}function Hm(n,s,a,c,d){if(n!==null){var m=n.memoizedProps;if(Ca(m,c)&&n.ref===s.ref)if(yn=!1,s.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(yn=!0);else return s.lanes=n.lanes,li(n,s,d)}return id(n,s,a,c,d)}function $m(n,s,a){var c=s.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Do,Ln),Ln|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,it(Do,Ln),Ln|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,it(Do,Ln),Ln|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,it(Do,Ln),Ln|=c;return on(n,s,d,a),s.child}function Wm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function id(n,s,a,c,d){var m=gn(a)?ks:Gt.current;return m=To(s,m),Po(s,d),a=Kh(n,s,a,c,m,d),c=Qh(),n!==null&&!yn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,li(n,s,d)):(dt&&c&&kh(s),s.flags|=1,on(n,s,a,d),s.child)}function qm(n,s,a,c,d){if(gn(a)){var m=!0;hu(s)}else m=!1;if(Po(s,d),s.stateNode===null)Pu(n,s),Om(s,a,c),td(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,R=s.memoizedProps;w.props=R;var b=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=Qn(B):(B=gn(a)?ks:Gt.current,B=To(s,B));var ne=a.getDerivedStateFromProps,re=typeof ne=="function"||typeof w.getSnapshotBeforeUpdate=="function";re||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==c||b!==B)&&Vm(s,w,c,B),ji=!1;var ee=s.memoizedState;w.state=ee,wu(s,c,w,d),b=s.memoizedState,R!==c||ee!==b||mn.current||ji?(typeof ne=="function"&&(ed(s,a,ne,c),b=s.memoizedState),(R=ji||Dm(s,a,R,c,ee,b,B))?(re||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=b),w.props=c,w.state=b,w.context=B,c=R):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,lm(n,s),R=s.memoizedProps,B=s.type===s.elementType?R:dr(s.type,R),w.props=B,re=s.pendingProps,ee=w.context,b=a.contextType,typeof b=="object"&&b!==null?b=Qn(b):(b=gn(a)?ks:Gt.current,b=To(s,b));var ce=a.getDerivedStateFromProps;(ne=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==re||ee!==b)&&Vm(s,w,c,b),ji=!1,ee=s.memoizedState,w.state=ee,wu(s,c,w,d);var me=s.memoizedState;R!==re||ee!==me||mn.current||ji?(typeof ce=="function"&&(ed(s,a,ce,c),me=s.memoizedState),(B=ji||Dm(s,a,B,c,ee,me,b)||!1)?(ne||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,me,b),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,me,b)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=me),w.props=c,w.state=me,w.context=b,c=B):(typeof w.componentDidUpdate!="function"||R===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),c=!1)}return sd(n,s,a,c,m,d)}function sd(n,s,a,c,d,m){Wm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&Jp(s,a,!1),li(n,s,m);c=s.stateNode,Jw.current=s;var R=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=Ro(s,n.child,null,m),s.child=Ro(s,null,R,m)):on(n,s,R,m),s.memoizedState=c.state,d&&Jp(s,a,!0),s.child}function Gm(n){var s=n.stateNode;s.pendingContext?Qp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Qp(n,s.context,!1),Bh(n,s.containerInfo)}function Km(n,s,a,c,d){return Co(),Vh(d),s.flags|=256,on(n,s,a,c),s.child}var od={dehydrated:null,treeContext:null,retryLane:0};function ad(n){return{baseLanes:n,cachePool:null,transitions:null}}function Qm(n,s,a){var c=s.pendingProps,d=pt.current,m=!1,w=(s.flags&128)!==0,R;if((R=w)||(R=n!==null&&n.memoizedState===null?!1:(d&2)!==0),R?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),it(pt,d&1),n===null)return Oh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=s.mode,m=s.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=zu(w,c,0,null),n=zs(n,c,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=ad(a),s.memoizedState=od,n):ld(s,w));if(d=n.memoizedState,d!==null&&(R=d.dehydrated,R!==null))return Xw(n,s,w,c,R,d,a);if(m){m=c.fallback,w=s.mode,d=n.child,R=d.sibling;var b={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=b,s.deletions=null):(c=Wi(d,b),c.subtreeFlags=d.subtreeFlags&14680064),R!==null?m=Wi(R,m):(m=zs(m,w,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,w=n.child.memoizedState,w=w===null?ad(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,s.memoizedState=od,c}return m=n.child,n=m.sibling,c=Wi(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function ld(n,s){return s=zu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Au(n,s,a,c){return c!==null&&Vh(c),Ro(s,n.child,null,a),n=ld(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Xw(n,s,a,c,d,m,w){if(a)return s.flags&256?(s.flags&=-257,c=nd(Error(t(422))),Au(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,d=s.mode,c=zu({mode:"visible",children:c.children},d,0,null),m=zs(m,d,w,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&Ro(s,n.child,null,w),s.child.memoizedState=ad(w),s.memoizedState=od,m);if((s.mode&1)===0)return Au(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var R=c.dgst;return c=R,m=Error(t(419)),c=nd(m,c,void 0),Au(n,s,w,c)}if(R=(w&n.childLanes)!==0,yn||R){if(c=Mt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,oi(n,d),mr(c,n,d,-1))}return Sd(),c=nd(Error(t(421))),Au(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=hE.bind(null,n),d._reactRetry=s,null):(n=m.treeContext,Vn=Oi(d.nextSibling),On=s,dt=!0,hr=null,n!==null&&(Gn[Kn++]=ii,Gn[Kn++]=si,Gn[Kn++]=Ns,ii=n.id,si=n.overflow,Ns=s),s=ld(s,c.children),s.flags|=4096,s)}function Ym(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Fh(n.return,s,a)}function ud(n,s,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function Jm(n,s,a){var c=s.pendingProps,d=c.revealOrder,m=c.tail;if(on(n,s,c.children,a),c=pt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ym(n,a,s);else if(n.tag===19)Ym(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(it(pt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&Eu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),ud(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Eu(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ud(s,!0,a,null,m);break;case"together":ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function li(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ms|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Wi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Wi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Zw(n,s,a){switch(s.tag){case 3:Gm(s),Co();break;case 5:hm(s);break;case 1:gn(s.type)&&hu(s);break;case 4:Bh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;it(yu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(it(pt,pt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Qm(n,s,a):(it(pt,pt.current&1),n=li(n,s,a),n!==null?n.sibling:null);it(pt,pt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Jm(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),it(pt,pt.current),c)break;return null;case 22:case 23:return s.lanes=0,$m(n,s,a)}return li(n,s,a)}var Xm,cd,Zm,eg;Xm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},cd=function(){},Zm=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,Vs(Or.current);var m=null;switch(a){case"input":d=xn(n,d),c=xn(n,c),m=[];break;case"select":d=ie({},d,{value:void 0}),c=ie({},c,{value:void 0}),m=[];break;case"textarea":d=Rn(n,d),c=Rn(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=lu)}rr(a,c);var w;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var R=d[B];for(w in R)R.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in c){var b=c[B];if(R=d!=null?d[B]:void 0,c.hasOwnProperty(B)&&b!==R&&(b!=null||R!=null))if(B==="style")if(R){for(w in R)!R.hasOwnProperty(w)||b&&b.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in b)b.hasOwnProperty(w)&&R[w]!==b[w]&&(a||(a={}),a[w]=b[w])}else a||(m||(m=[]),m.push(B,a)),a=b;else B==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,R=R?R.__html:void 0,b!=null&&R!==b&&(m=m||[]).push(B,b)):B==="children"?typeof b!="string"&&typeof b!="number"||(m=m||[]).push(B,""+b):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(b!=null&&B==="onScroll"&&ot("scroll",n),m||R===b||(m=[])):(m=m||[]).push(B,b))}a&&(m=m||[]).push("style",a);var B=m;(s.updateQueue=B)&&(s.flags|=4)}},eg=function(n,s,a,c){a!==c&&(s.flags|=4)};function za(n,s){if(!dt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Qt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function eE(n,s,a){var c=s.pendingProps;switch(Nh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return gn(s.type)&&cu(),Qt(s),null;case 3:return c=s.stateNode,bo(),at(mn),at(Gt),Wh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(mu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,hr!==null&&(Ed(hr),hr=null))),cd(n,s),Qt(s),null;case 5:Hh(s);var d=Vs(La.current);if(a=s.type,n!==null&&s.stateNode!=null)Zm(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Qt(s),null}if(n=Vs(Or.current),mu(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[Dr]=s,c[ka]=m,n=(s.mode&1)!==0,a){case"dialog":ot("cancel",c),ot("close",c);break;case"iframe":case"object":case"embed":ot("load",c);break;case"video":case"audio":for(d=0;d<Aa.length;d++)ot(Aa[d],c);break;case"source":ot("error",c);break;case"img":case"image":case"link":ot("error",c),ot("load",c);break;case"details":ot("toggle",c);break;case"input":_r(c,m),ot("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},ot("invalid",c);break;case"textarea":Er(c,m),ot("invalid",c)}rr(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var R=m[w];w==="children"?typeof R=="string"?c.textContent!==R&&(m.suppressHydrationWarning!==!0&&au(c.textContent,R,n),d=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(m.suppressHydrationWarning!==!0&&au(c.textContent,R,n),d=["children",""+R]):o.hasOwnProperty(w)&&R!=null&&w==="onScroll"&&ot("scroll",c)}switch(a){case"input":un(c),nr(c,m,!0);break;case"textarea":un(c),Tr(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=lu)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=yt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Dr]=s,n[ka]=c,Xm(n,s,!1,!1),s.stateNode=n;e:{switch(w=Kr(a,c),a){case"dialog":ot("cancel",n),ot("close",n),d=c;break;case"iframe":case"object":case"embed":ot("load",n),d=c;break;case"video":case"audio":for(d=0;d<Aa.length;d++)ot(Aa[d],n);d=c;break;case"source":ot("error",n),d=c;break;case"img":case"image":case"link":ot("error",n),ot("load",n),d=c;break;case"details":ot("toggle",n),d=c;break;case"input":_r(n,c),d=xn(n,c),ot("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ie({},c,{value:void 0}),ot("invalid",n);break;case"textarea":Er(n,c),d=Rn(n,c),ot("invalid",n);break;default:d=c}rr(a,d),R=d;for(m in R)if(R.hasOwnProperty(m)){var b=R[m];m==="style"?Ei(n,b):m==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&qr(n,b)):m==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&An(n,b):typeof b=="number"&&An(n,""+b):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?b!=null&&m==="onScroll"&&ot("scroll",n):b!=null&&Q(n,m,b,w))}switch(a){case"input":un(n),nr(n,c,!1);break;case"textarea":un(n),Tr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ne(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?Qe(n,!!c.multiple,m,!1):c.defaultValue!=null&&Qe(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=lu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Qt(s),null;case 6:if(n&&s.stateNode!=null)eg(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Vs(La.current),Vs(Or.current),mu(s)){if(c=s.stateNode,a=s.memoizedProps,c[Dr]=s,(m=c.nodeValue!==a)&&(n=On,n!==null))switch(n.tag){case 3:au(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&au(c.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Dr]=s,s.stateNode=c}return Qt(s),null;case 13:if(at(pt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(dt&&Vn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)rm(),Co(),s.flags|=98560,m=!1;else if(m=mu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Dr]=s}else Co(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),m=!1}else hr!==null&&(Ed(hr),hr=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(pt.current&1)!==0?Nt===0&&(Nt=3):Sd())),s.updateQueue!==null&&(s.flags|=4),Qt(s),null);case 4:return bo(),cd(n,s),n===null&&Pa(s.stateNode.containerInfo),Qt(s),null;case 10:return jh(s.type._context),Qt(s),null;case 17:return gn(s.type)&&cu(),Qt(s),null;case 19:if(at(pt),m=s.memoizedState,m===null)return Qt(s),null;if(c=(s.flags&128)!==0,w=m.rendering,w===null)if(c)za(m,!1);else{if(Nt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=Eu(n),w!==null){for(s.flags|=128,za(m,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return it(pt,pt.current&1|2),s.child}n=n.sibling}m.tail!==null&&rt()>Oo&&(s.flags|=128,c=!0,za(m,!1),s.lanes=4194304)}else{if(!c)if(n=Eu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),za(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!dt)return Qt(s),null}else 2*rt()-m.renderingStartTime>Oo&&a!==1073741824&&(s.flags|=128,c=!0,za(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(a=m.last,a!==null?a.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=rt(),s.sibling=null,a=pt.current,it(pt,c?a&1|2:a&1),s):(Qt(s),null);case 22:case 23:return Td(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Ln&1073741824)!==0&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function tE(n,s){switch(Nh(s),s.tag){case 1:return gn(s.type)&&cu(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return bo(),at(mn),at(Gt),Wh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Hh(s),null;case 13:if(at(pt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Co()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return at(pt),null;case 4:return bo(),null;case 10:return jh(s.type._context),null;case 22:case 23:return Td(),null;case 24:return null;default:return null}}var bu=!1,Yt=!1,nE=typeof WeakSet=="function"?WeakSet:Set,fe=null;function No(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){_t(n,s,c)}else a.current=null}function hd(n,s,a){try{a()}catch(c){_t(n,s,c)}}var tg=!1;function rE(n,s){if(Th=ki,n=Dp(),mh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,R=-1,b=-1,B=0,ne=0,re=n,ee=null;t:for(;;){for(var ce;re!==a||d!==0&&re.nodeType!==3||(R=w+d),re!==m||c!==0&&re.nodeType!==3||(b=w+c),re.nodeType===3&&(w+=re.nodeValue.length),(ce=re.firstChild)!==null;)ee=re,re=ce;for(;;){if(re===n)break t;if(ee===a&&++B===d&&(R=w),ee===m&&++ne===c&&(b=w),(ce=re.nextSibling)!==null)break;re=ee,ee=re.parentNode}re=ce}a=R===-1||b===-1?null:{start:R,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Sh={focusedElem:n,selectionRange:a},ki=!1,fe=s;fe!==null;)if(s=fe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,fe=n;else for(;fe!==null;){s=fe;try{var me=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,wt=me.memoizedState,U=s.stateNode,D=U.getSnapshotBeforeUpdate(s.elementType===s.type?ge:dr(s.type,ge),wt);U.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){_t(s,s.return,se)}if(n=s.sibling,n!==null){n.return=s.return,fe=n;break}fe=s.return}return me=tg,tg=!1,me}function Ba(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&hd(s,a,m)}d=d.next}while(d!==c)}}function ku(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function dd(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ng(n){var s=n.alternate;s!==null&&(n.alternate=null,ng(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Dr],delete s[ka],delete s[Ah],delete s[Fw],delete s[Uw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function rg(n){return n.tag===5||n.tag===3||n.tag===4}function ig(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||rg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=lu));else if(c!==4&&(n=n.child,n!==null))for(fd(n,s,a),n=n.sibling;n!==null;)fd(n,s,a),n=n.sibling}function pd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(pd(n,s,a),n=n.sibling;n!==null;)pd(n,s,a),n=n.sibling}var Bt=null,fr=!1;function Ui(n,s,a){for(a=a.child;a!==null;)sg(n,s,a),a=a.sibling}function sg(n,s,a){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Ts,a)}catch{}switch(a.tag){case 5:Yt||No(a,s);case 6:var c=Bt,d=fr;Bt=null,Ui(n,s,a),Bt=c,fr=d,Bt!==null&&(fr?(n=Bt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Bt.removeChild(a.stateNode));break;case 18:Bt!==null&&(fr?(n=Bt,a=a.stateNode,n.nodeType===8?Rh(n.parentNode,a):n.nodeType===1&&Rh(n,a),lr(n)):Rh(Bt,a.stateNode));break;case 4:c=Bt,d=fr,Bt=a.stateNode.containerInfo,fr=!0,Ui(n,s,a),Bt=c,fr=d;break;case 0:case 11:case 14:case 15:if(!Yt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&hd(a,s,w),d=d.next}while(d!==c)}Ui(n,s,a);break;case 1:if(!Yt&&(No(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){_t(a,s,R)}Ui(n,s,a);break;case 21:Ui(n,s,a);break;case 22:a.mode&1?(Yt=(c=Yt)||a.memoizedState!==null,Ui(n,s,a),Yt=c):Ui(n,s,a);break;default:Ui(n,s,a)}}function og(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new nE),s.forEach(function(c){var d=dE.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function pr(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,w=s,R=w;e:for(;R!==null;){switch(R.tag){case 5:Bt=R.stateNode,fr=!1;break e;case 3:Bt=R.stateNode.containerInfo,fr=!0;break e;case 4:Bt=R.stateNode.containerInfo,fr=!0;break e}R=R.return}if(Bt===null)throw Error(t(160));sg(m,w,d),Bt=null,fr=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch(B){_t(d,s,B)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ag(s,n),s=s.sibling}function ag(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(pr(s,n),Lr(n),c&4){try{Ba(3,n,n.return),ku(3,n)}catch(ge){_t(n,n.return,ge)}try{Ba(5,n,n.return)}catch(ge){_t(n,n.return,ge)}}break;case 1:pr(s,n),Lr(n),c&512&&a!==null&&No(a,a.return);break;case 5:if(pr(s,n),Lr(n),c&512&&a!==null&&No(a,a.return),n.flags&32){var d=n.stateNode;try{An(d,"")}catch(ge){_t(n,n.return,ge)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,R=n.type,b=n.updateQueue;if(n.updateQueue=null,b!==null)try{R==="input"&&m.type==="radio"&&m.name!=null&&Cn(d,m),Kr(R,w);var B=Kr(R,m);for(w=0;w<b.length;w+=2){var ne=b[w],re=b[w+1];ne==="style"?Ei(d,re):ne==="dangerouslySetInnerHTML"?qr(d,re):ne==="children"?An(d,re):Q(d,ne,re,B)}switch(R){case"input":wr(d,m);break;case"textarea":Ir(d,m);break;case"select":var ee=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ce=m.value;ce!=null?Qe(d,!!m.multiple,ce,!1):ee!==!!m.multiple&&(m.defaultValue!=null?Qe(d,!!m.multiple,m.defaultValue,!0):Qe(d,!!m.multiple,m.multiple?[]:"",!1))}d[ka]=m}catch(ge){_t(n,n.return,ge)}}break;case 6:if(pr(s,n),Lr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(ge){_t(n,n.return,ge)}}break;case 3:if(pr(s,n),Lr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{lr(s.containerInfo)}catch(ge){_t(n,n.return,ge)}break;case 4:pr(s,n),Lr(n);break;case 13:pr(s,n),Lr(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(yd=rt())),c&4&&og(n);break;case 22:if(ne=a!==null&&a.memoizedState!==null,n.mode&1?(Yt=(B=Yt)||ne,pr(s,n),Yt=B):pr(s,n),Lr(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!ne&&(n.mode&1)!==0)for(fe=n,ne=n.child;ne!==null;){for(re=fe=ne;fe!==null;){switch(ee=fe,ce=ee.child,ee.tag){case 0:case 11:case 14:case 15:Ba(4,ee,ee.return);break;case 1:No(ee,ee.return);var me=ee.stateNode;if(typeof me.componentWillUnmount=="function"){c=ee,a=ee.return;try{s=c,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(ge){_t(c,a,ge)}}break;case 5:No(ee,ee.return);break;case 22:if(ee.memoizedState!==null){cg(re);continue}}ce!==null?(ce.return=ee,fe=ce):cg(re)}ne=ne.sibling}e:for(ne=null,re=n;;){if(re.tag===5){if(ne===null){ne=re;try{d=re.stateNode,B?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(R=re.stateNode,b=re.memoizedProps.style,w=b!=null&&b.hasOwnProperty("display")?b.display:null,R.style.display=xr("display",w))}catch(ge){_t(n,n.return,ge)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=B?"":re.memoizedProps}catch(ge){_t(n,n.return,ge)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===n)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===n)break e;for(;re.sibling===null;){if(re.return===null||re.return===n)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:pr(s,n),Lr(n),c&4&&og(n);break;case 21:break;default:pr(s,n),Lr(n)}}function Lr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(rg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(An(d,""),c.flags&=-33);var m=ig(n);pd(n,m,d);break;case 3:case 4:var w=c.stateNode.containerInfo,R=ig(n);fd(n,R,w);break;default:throw Error(t(161))}}catch(b){_t(n,n.return,b)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function iE(n,s,a){fe=n,lg(n)}function lg(n,s,a){for(var c=(n.mode&1)!==0;fe!==null;){var d=fe,m=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||bu;if(!w){var R=d.alternate,b=R!==null&&R.memoizedState!==null||Yt;R=bu;var B=Yt;if(bu=w,(Yt=b)&&!B)for(fe=d;fe!==null;)w=fe,b=w.child,w.tag===22&&w.memoizedState!==null?hg(d):b!==null?(b.return=w,fe=b):hg(d);for(;m!==null;)fe=m,lg(m),m=m.sibling;fe=d,bu=R,Yt=B}ug(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,fe=m):ug(n)}}function ug(n){for(;fe!==null;){var s=fe;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Yt||ku(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Yt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:dr(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&cm(s,m,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}cm(s,w,a)}break;case 5:var R=s.stateNode;if(a===null&&s.flags&4){a=R;var b=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var B=s.alternate;if(B!==null){var ne=B.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&lr(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Yt||s.flags&512&&dd(s)}catch(ee){_t(s,s.return,ee)}}if(s===n){fe=null;break}if(a=s.sibling,a!==null){a.return=s.return,fe=a;break}fe=s.return}}function cg(n){for(;fe!==null;){var s=fe;if(s===n){fe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,fe=a;break}fe=s.return}}function hg(n){for(;fe!==null;){var s=fe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{ku(4,s)}catch(b){_t(s,a,b)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(b){_t(s,d,b)}}var m=s.return;try{dd(s)}catch(b){_t(s,m,b)}break;case 5:var w=s.return;try{dd(s)}catch(b){_t(s,w,b)}}}catch(b){_t(s,s.return,b)}if(s===n){fe=null;break}var R=s.sibling;if(R!==null){R.return=s.return,fe=R;break}fe=s.return}}var sE=Math.ceil,Nu=de.ReactCurrentDispatcher,md=de.ReactCurrentOwner,Jn=de.ReactCurrentBatchConfig,We=0,Mt=null,xt=null,Ht=0,Ln=0,Do=Vi(0),Nt=0,Ha=null,Ms=0,Du=0,gd=0,$a=null,vn=null,yd=0,Oo=1/0,ui=null,Ou=!1,vd=null,zi=null,Vu=!1,Bi=null,Lu=0,Wa=0,_d=null,Mu=-1,ju=0;function an(){return(We&6)!==0?rt():Mu!==-1?Mu:Mu=rt()}function Hi(n){return(n.mode&1)===0?1:(We&2)!==0&&Ht!==0?Ht&-Ht:Bw.transition!==null?(ju===0&&(ju=xs()),ju):(n=Be,n!==0||(n=window.event,n=n===void 0?16:_a(n.type)),n)}function mr(n,s,a,c){if(50<Wa)throw Wa=0,_d=null,Error(t(185));Ri(n,a,c),((We&2)===0||n!==Mt)&&(n===Mt&&((We&2)===0&&(Du|=a),Nt===4&&$i(n,Ht)),_n(n,c),a===1&&We===0&&(s.mode&1)===0&&(Oo=rt()+500,du&&Mi()))}function _n(n,s){var a=n.callbackNode;Jr(n,s);var c=Ss(n,n===Mt?Ht:0);if(c===0)a!==null&&pa(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&pa(a),s===1)n.tag===0?zw(fg.bind(null,n)):Xp(fg.bind(null,n)),Mw(function(){(We&6)===0&&Mi()}),a=null;else{switch(Pi(c)){case 1:a=Is;break;case 4:a=Si;break;case 16:a=$n;break;case 536870912:a=jl;break;default:a=$n}a=Eg(a,dg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function dg(n,s){if(Mu=-1,ju=0,(We&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Vo()&&n.callbackNode!==a)return null;var c=Ss(n,n===Mt?Ht:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Fu(n,c);else{s=c;var d=We;We|=2;var m=mg();(Mt!==n||Ht!==s)&&(ui=null,Oo=rt()+500,Fs(n,s));do try{lE();break}catch(R){pg(n,R)}while(!0);Mh(),Nu.current=m,We=d,xt!==null?s=0:(Mt=null,Ht=0,s=Nt)}if(s!==0){if(s===2&&(d=kn(n),d!==0&&(c=d,s=wd(n,d))),s===1)throw a=Ha,Fs(n,0),$i(n,c),_n(n,rt()),a;if(s===6)$i(n,c);else{if(d=n.current.alternate,(c&30)===0&&!oE(d)&&(s=Fu(n,c),s===2&&(m=kn(n),m!==0&&(c=m,s=wd(n,m))),s===1))throw a=Ha,Fs(n,0),$i(n,c),_n(n,rt()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Us(n,vn,ui);break;case 3:if($i(n,c),(c&130023424)===c&&(s=yd+500-rt(),10<s)){if(Ss(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){an(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Ch(Us.bind(null,n,vn,ui),s);break}Us(n,vn,ui);break;case 4:if($i(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-rn(c);m=1<<w,w=s[w],w>d&&(d=w),c&=~m}if(c=d,c=rt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*sE(c/1960))-c,10<c){n.timeoutHandle=Ch(Us.bind(null,n,vn,ui),c);break}Us(n,vn,ui);break;case 5:Us(n,vn,ui);break;default:throw Error(t(329))}}}return _n(n,rt()),n.callbackNode===a?dg.bind(null,n):null}function wd(n,s){var a=$a;return n.current.memoizedState.isDehydrated&&(Fs(n,s).flags|=256),n=Fu(n,s),n!==2&&(s=vn,vn=a,s!==null&&Ed(s)),n}function Ed(n){vn===null?vn=n:vn.push.apply(vn,n)}function oE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!cr(m(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function $i(n,s){for(s&=~gd,s&=~Du,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-rn(s),c=1<<a;n[a]=-1,s&=~c}}function fg(n){if((We&6)!==0)throw Error(t(327));Vo();var s=Ss(n,0);if((s&1)===0)return _n(n,rt()),null;var a=Fu(n,s);if(n.tag!==0&&a===2){var c=kn(n);c!==0&&(s=c,a=wd(n,c))}if(a===1)throw a=Ha,Fs(n,0),$i(n,s),_n(n,rt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Us(n,vn,ui),_n(n,rt()),null}function Id(n,s){var a=We;We|=1;try{return n(s)}finally{We=a,We===0&&(Oo=rt()+500,du&&Mi())}}function js(n){Bi!==null&&Bi.tag===0&&(We&6)===0&&Vo();var s=We;We|=1;var a=Jn.transition,c=Be;try{if(Jn.transition=null,Be=1,n)return n()}finally{Be=c,Jn.transition=a,We=s,(We&6)===0&&Mi()}}function Td(){Ln=Do.current,at(Do)}function Fs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Lw(a)),xt!==null)for(a=xt.return;a!==null;){var c=a;switch(Nh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&cu();break;case 3:bo(),at(mn),at(Gt),Wh();break;case 5:Hh(c);break;case 4:bo();break;case 13:at(pt);break;case 19:at(pt);break;case 10:jh(c.type._context);break;case 22:case 23:Td()}a=a.return}if(Mt=n,xt=n=Wi(n.current,null),Ht=Ln=s,Nt=0,Ha=null,gd=Du=Ms=0,vn=$a=null,Os!==null){for(s=0;s<Os.length;s++)if(a=Os[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,c.next=w}a.pending=c}Os=null}return n}function pg(n,s){do{var a=xt;try{if(Mh(),Iu.current=Cu,Tu){for(var c=mt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Tu=!1}if(Ls=0,Lt=kt=mt=null,Ma=!1,ja=0,md.current=null,a===null||a.return===null){Nt=1,Ha=s,xt=null;break}e:{var m=n,w=a.return,R=a,b=s;if(s=Ht,R.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var B=b,ne=R,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var ee=ne.alternate;ee?(ne.updateQueue=ee.updateQueue,ne.memoizedState=ee.memoizedState,ne.lanes=ee.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ce=Fm(w);if(ce!==null){ce.flags&=-257,Um(ce,w,R,m,s),ce.mode&1&&jm(m,B,s),s=ce,b=B;var me=s.updateQueue;if(me===null){var ge=new Set;ge.add(b),s.updateQueue=ge}else me.add(b);break e}else{if((s&1)===0){jm(m,B,s),Sd();break e}b=Error(t(426))}}else if(dt&&R.mode&1){var wt=Fm(w);if(wt!==null){(wt.flags&65536)===0&&(wt.flags|=256),Um(wt,w,R,m,s),Vh(ko(b,R));break e}}m=b=ko(b,R),Nt!==4&&(Nt=2),$a===null?$a=[m]:$a.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var U=Lm(m,b,s);um(m,U);break e;case 1:R=b;var D=m.type,z=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(zi===null||!zi.has(z)))){m.flags|=65536,s&=-s,m.lanes|=s;var se=Mm(m,R,s);um(m,se);break e}}m=m.return}while(m!==null)}yg(a)}catch(ve){s=ve,xt===a&&a!==null&&(xt=a=a.return);continue}break}while(!0)}function mg(){var n=Nu.current;return Nu.current=Cu,n===null?Cu:n}function Sd(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Mt===null||(Ms&268435455)===0&&(Du&268435455)===0||$i(Mt,Ht)}function Fu(n,s){var a=We;We|=2;var c=mg();(Mt!==n||Ht!==s)&&(ui=null,Fs(n,s));do try{aE();break}catch(d){pg(n,d)}while(!0);if(Mh(),We=a,Nu.current=c,xt!==null)throw Error(t(261));return Mt=null,Ht=0,Nt}function aE(){for(;xt!==null;)gg(xt)}function lE(){for(;xt!==null&&!Ll();)gg(xt)}function gg(n){var s=wg(n.alternate,n,Ln);n.memoizedProps=n.pendingProps,s===null?yg(n):xt=s,md.current=null}function yg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=eE(a,s,Ln),a!==null){xt=a;return}}else{if(a=tE(a,s),a!==null){a.flags&=32767,xt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Nt=6,xt=null;return}}if(s=s.sibling,s!==null){xt=s;return}xt=s=n}while(s!==null);Nt===0&&(Nt=5)}function Us(n,s,a){var c=Be,d=Jn.transition;try{Jn.transition=null,Be=1,uE(n,s,a,c)}finally{Jn.transition=d,Be=c}return null}function uE(n,s,a,c){do Vo();while(Bi!==null);if((We&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(nt(n,m),n===Mt&&(xt=Mt=null,Ht=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Vu||(Vu=!0,Eg($n,function(){return Vo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Jn.transition,Jn.transition=null;var w=Be;Be=1;var R=We;We|=4,md.current=null,rE(n,a),ag(a,n),Pw(Sh),ki=!!Th,Sh=Th=null,n.current=a,iE(a),ah(),We=R,Be=w,Jn.transition=m}else n.current=a;if(Vu&&(Vu=!1,Bi=n,Lu=d),m=n.pendingLanes,m===0&&(zi=null),Fl(a.stateNode),_n(n,rt()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Ou)throw Ou=!1,n=vd,vd=null,n;return(Lu&1)!==0&&n.tag!==0&&Vo(),m=n.pendingLanes,(m&1)!==0?n===_d?Wa++:(Wa=0,_d=n):Wa=0,Mi(),null}function Vo(){if(Bi!==null){var n=Pi(Lu),s=Jn.transition,a=Be;try{if(Jn.transition=null,Be=16>n?16:n,Bi===null)var c=!1;else{if(n=Bi,Bi=null,Lu=0,(We&6)!==0)throw Error(t(331));var d=We;for(We|=4,fe=n.current;fe!==null;){var m=fe,w=m.child;if((fe.flags&16)!==0){var R=m.deletions;if(R!==null){for(var b=0;b<R.length;b++){var B=R[b];for(fe=B;fe!==null;){var ne=fe;switch(ne.tag){case 0:case 11:case 15:Ba(8,ne,m)}var re=ne.child;if(re!==null)re.return=ne,fe=re;else for(;fe!==null;){ne=fe;var ee=ne.sibling,ce=ne.return;if(ng(ne),ne===B){fe=null;break}if(ee!==null){ee.return=ce,fe=ee;break}fe=ce}}}var me=m.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var wt=ge.sibling;ge.sibling=null,ge=wt}while(ge!==null)}}fe=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,fe=w;else e:for(;fe!==null;){if(m=fe,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Ba(9,m,m.return)}var U=m.sibling;if(U!==null){U.return=m.return,fe=U;break e}fe=m.return}}var D=n.current;for(fe=D;fe!==null;){w=fe;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,fe=z;else e:for(w=D;fe!==null;){if(R=fe,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:ku(9,R)}}catch(ve){_t(R,R.return,ve)}if(R===w){fe=null;break e}var se=R.sibling;if(se!==null){se.return=R.return,fe=se;break e}fe=R.return}}if(We=d,Mi(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Ts,n)}catch{}c=!0}return c}finally{Be=a,Jn.transition=s}}return!1}function vg(n,s,a){s=ko(a,s),s=Lm(n,s,1),n=Fi(n,s,1),s=an(),n!==null&&(Ri(n,1,s),_n(n,s))}function _t(n,s,a){if(n.tag===3)vg(n,n,a);else for(;s!==null;){if(s.tag===3){vg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(zi===null||!zi.has(c))){n=ko(a,n),n=Mm(s,n,1),s=Fi(s,n,1),n=an(),s!==null&&(Ri(s,1,n),_n(s,n));break}}s=s.return}}function cE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=an(),n.pingedLanes|=n.suspendedLanes&a,Mt===n&&(Ht&a)===a&&(Nt===4||Nt===3&&(Ht&130023424)===Ht&&500>rt()-yd?Fs(n,0):gd|=a),_n(n,s)}function _g(n,s){s===0&&((n.mode&1)===0?s=1:(s=ro,ro<<=1,(ro&130023424)===0&&(ro=4194304)));var a=an();n=oi(n,s),n!==null&&(Ri(n,s,a),_n(n,a))}function hE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),_g(n,a)}function dE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),_g(n,a)}var wg;wg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||mn.current)yn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return yn=!1,Zw(n,s,a);yn=(n.flags&131072)!==0}else yn=!1,dt&&(s.flags&1048576)!==0&&Zp(s,pu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Pu(n,s),n=s.pendingProps;var d=To(s,Gt.current);Po(s,a),d=Kh(null,s,c,n,d,a);var m=Qh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,gn(c)?(m=!0,hu(s)):m=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,zh(s),d.updater=Ru,s.stateNode=d,d._reactInternals=s,td(s,c,n,a),s=sd(null,s,c,!0,m,a)):(s.tag=0,dt&&m&&kh(s),on(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Pu(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=pE(c),n=dr(c,n),d){case 0:s=id(null,s,c,n,a);break e;case 1:s=qm(null,s,c,n,a);break e;case 11:s=zm(null,s,c,n,a);break e;case 14:s=Bm(null,s,c,dr(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:dr(c,d),id(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:dr(c,d),qm(n,s,c,d,a);case 3:e:{if(Gm(s),n===null)throw Error(t(387));c=s.pendingProps,m=s.memoizedState,d=m.element,lm(n,s),wu(s,c,null,a);var w=s.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){d=ko(Error(t(423)),s),s=Km(n,s,c,a,d);break e}else if(c!==d){d=ko(Error(t(424)),s),s=Km(n,s,c,a,d);break e}else for(Vn=Oi(s.stateNode.containerInfo.firstChild),On=s,dt=!0,hr=null,a=om(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Co(),c===d){s=li(n,s,a);break e}on(n,s,c,a)}s=s.child}return s;case 5:return hm(s),n===null&&Oh(s),c=s.type,d=s.pendingProps,m=n!==null?n.memoizedProps:null,w=d.children,xh(c,d)?w=null:m!==null&&xh(c,m)&&(s.flags|=32),Wm(n,s),on(n,s,w,a),s.child;case 6:return n===null&&Oh(s),null;case 13:return Qm(n,s,a);case 4:return Bh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Ro(s,null,c,a):on(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:dr(c,d),zm(n,s,c,d,a);case 7:return on(n,s,s.pendingProps,a),s.child;case 8:return on(n,s,s.pendingProps.children,a),s.child;case 12:return on(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,m=s.memoizedProps,w=d.value,it(yu,c._currentValue),c._currentValue=w,m!==null)if(cr(m.value,w)){if(m.children===d.children&&!mn.current){s=li(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var R=m.dependencies;if(R!==null){w=m.child;for(var b=R.firstContext;b!==null;){if(b.context===c){if(m.tag===1){b=ai(-1,a&-a),b.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var ne=B.pending;ne===null?b.next=b:(b.next=ne.next,ne.next=b),B.pending=b}}m.lanes|=a,b=m.alternate,b!==null&&(b.lanes|=a),Fh(m.return,a,s),R.lanes|=a;break}b=b.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,R=w.alternate,R!==null&&(R.lanes|=a),Fh(w,a,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}on(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,Po(s,a),d=Qn(d),c=c(d),s.flags|=1,on(n,s,c,a),s.child;case 14:return c=s.type,d=dr(c,s.pendingProps),d=dr(c.type,d),Bm(n,s,c,d,a);case 15:return Hm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:dr(c,d),Pu(n,s),s.tag=1,gn(c)?(n=!0,hu(s)):n=!1,Po(s,a),Om(s,c,d),td(s,c,d,a),sd(null,s,c,!0,n,a);case 19:return Jm(n,s,a);case 22:return $m(n,s,a)}throw Error(t(156,s.tag))};function Eg(n,s){return to(n,s)}function fE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(n,s,a,c){return new fE(n,s,a,c)}function xd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function pE(n){if(typeof n=="function")return xd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===Ge)return 14}return 2}function Wi(n,s){var a=n.alternate;return a===null?(a=Xn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Uu(n,s,a,c,d,m){var w=2;if(c=n,typeof n=="function")xd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case k:return zs(a.children,d,m,s);case S:w=8,d|=8;break;case C:return n=Xn(12,a,s,d|2),n.elementType=C,n.lanes=m,n;case A:return n=Xn(13,a,s,d),n.elementType=A,n.lanes=m,n;case qe:return n=Xn(19,a,s,d),n.elementType=qe,n.lanes=m,n;case Z:return zu(a,d,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:w=10;break e;case N:w=9;break e;case V:w=11;break e;case Ge:w=14;break e;case tt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Xn(w,a,s,d),s.elementType=n,s.type=c,s.lanes=m,s}function zs(n,s,a,c){return n=Xn(7,n,c,s),n.lanes=a,n}function zu(n,s,a,c){return n=Xn(22,n,c,s),n.elementType=Z,n.lanes=a,n.stateNode={isHidden:!1},n}function Cd(n,s,a){return n=Xn(6,n,null,s),n.lanes=a,n}function Rd(n,s,a){return s=Xn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function mE(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ci(0),this.expirationTimes=Ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ad(n,s,a,c,d,m,w,R,b){return n=new mE(n,s,a,R,b),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Xn(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},zh(m),n}function gE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_e,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Ig(n){if(!n)return Li;n=n._reactInternals;e:{if(dn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(gn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(gn(a))return Yp(n,a,s)}return s}function Tg(n,s,a,c,d,m,w,R,b){return n=Ad(a,c,!0,n,d,m,w,R,b),n.context=Ig(null),a=n.current,c=an(),d=Hi(a),m=ai(c,d),m.callback=s??null,Fi(a,m,d),n.current.lanes=d,Ri(n,d,c),_n(n,c),n}function Bu(n,s,a,c){var d=s.current,m=an(),w=Hi(d);return a=Ig(a),s.context===null?s.context=a:s.pendingContext=a,s=ai(m,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Fi(d,s,w),n!==null&&(mr(n,d,w,m),_u(n,d,w)),w}function Hu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Sg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Pd(n,s){Sg(n,s),(n=n.alternate)&&Sg(n,s)}function yE(){return null}var xg=typeof reportError=="function"?reportError:function(n){console.error(n)};function bd(n){this._internalRoot=n}$u.prototype.render=bd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Bu(n,s,null,null)},$u.prototype.unmount=bd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;js(function(){Bu(null,n,null,null)}),s[ni]=null}};function $u(n){this._internalRoot=n}$u.prototype.unstable_scheduleHydration=function(n){if(n){var s=$l();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Pr.length&&s!==0&&s<Pr[a].priority;a++);Pr.splice(a,0,n),a===0&&Gl(n)}};function kd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Wu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Cg(){}function vE(n,s,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var B=Hu(w);m.call(B)}}var w=Tg(s,c,n,0,null,!1,!1,"",Cg);return n._reactRootContainer=w,n[ni]=w.current,Pa(n.nodeType===8?n.parentNode:n),js(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var R=c;c=function(){var B=Hu(b);R.call(B)}}var b=Ad(n,0,!1,null,null,!1,!1,"",Cg);return n._reactRootContainer=b,n[ni]=b.current,Pa(n.nodeType===8?n.parentNode:n),js(function(){Bu(s,b,a,c)}),b}function qu(n,s,a,c,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var R=d;d=function(){var b=Hu(w);R.call(b)}}Bu(s,w,n,d)}else w=vE(a,s,n,d,c);return Hu(w)}Bl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=xi(s.pendingLanes);a!==0&&(Ai(s,a|1),_n(s,rt()),(We&6)===0&&(Oo=rt()+500,Mi()))}break;case 13:js(function(){var c=oi(n,1);if(c!==null){var d=an();mr(c,n,1,d)}}),Pd(n,1)}},io=function(n){if(n.tag===13){var s=oi(n,134217728);if(s!==null){var a=an();mr(s,n,134217728,a)}Pd(n,134217728)}},Hl=function(n){if(n.tag===13){var s=Hi(n),a=oi(n,s);if(a!==null){var c=an();mr(a,n,s,c)}Pd(n,s)}},$l=function(){return Be},Wl=function(n,s){var a=Be;try{return Be=n,s()}finally{Be=a}},Ii=function(n,s,a){switch(s){case"input":if(wr(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=uu(c);if(!d)throw Error(t(90));nn(c),wr(c,d)}}}break;case"textarea":Ir(n,a);break;case"select":s=a.value,s!=null&&Qe(n,!!a.multiple,s,!1)}},Rr=Id,ws=js;var _E={usingClientEntryPoint:!1,Events:[Na,Eo,uu,Hn,_s,Id]},qa={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wE={bundleType:qa.bundleType,version:qa.version,rendererPackageName:qa.rendererPackageName,rendererConfig:qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=fa(n),n===null?null:n.stateNode},findFiberByHostInstance:qa.findFiberByHostInstance||yE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gu.isDisabled&&Gu.supportsFiber)try{Ts=Gu.inject(wE),bn=Gu}catch{}}return wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_E,wn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kd(s))throw Error(t(200));return gE(n,s,null,a)},wn.createRoot=function(n,s){if(!kd(n))throw Error(t(299));var a=!1,c="",d=xg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Ad(n,1,!1,null,null,a,!1,c,d),n[ni]=s.current,Pa(n.nodeType===8?n.parentNode:n),new bd(s)},wn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=fa(s),n=n===null?null:n.stateNode,n},wn.flushSync=function(n){return js(n)},wn.hydrate=function(n,s,a){if(!Wu(s))throw Error(t(200));return qu(null,n,s,!0,a)},wn.hydrateRoot=function(n,s,a){if(!kd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",w=xg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Tg(s,null,n,1,a??null,d,!1,m,w),n[ni]=s.current,Pa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new $u(s)},wn.render=function(n,s,a){if(!Wu(s))throw Error(t(200));return qu(null,n,s,!1,a)},wn.unmountComponentAtNode=function(n){if(!Wu(n))throw Error(t(40));return n._reactRootContainer?(js(function(){qu(null,null,n,!1,function(){n._reactRootContainer=null,n[ni]=null})}),!0):!1},wn.unstable_batchedUpdates=Id,wn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Wu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return qu(n,s,a,!1,c)},wn.version="18.3.1-next-f1338f8080-20240426",wn}var Og;function Rv(){if(Og)return Od.exports;Og=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Od.exports=PE(),Od.exports}var Vg;function bE(){if(Vg)return Ku;Vg=1;var r=Rv();return Ku.createRoot=r.createRoot,Ku.hydrateRoot=r.hydrateRoot,Ku}var kE=bE();const NE=Cv(kE);Rv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fl(){return fl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},fl.apply(this,arguments)}var Zi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Zi||(Zi={}));const Lg="popstate";function DE(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:h,hash:f}=i.location;return Jd("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:mc(o)}return VE(e,t,null,r)}function Pt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Av(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OE(){return Math.random().toString(36).substr(2,8)}function Mg(r,e){return{usr:r.state,key:r.key,idx:e}}function Jd(r,e,t,i){return t===void 0&&(t=null),fl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ra(e):e,{state:t,key:e&&e.key||i||OE()})}function mc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ra(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function VE(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,f=Zi.Pop,g=null,v=E();v==null&&(v=0,h.replaceState(fl({},h.state,{idx:v}),""));function E(){return(h.state||{idx:null}).idx}function I(){f=Zi.Pop;let M=E(),le=M==null?null:M-v;v=M,g&&g({action:f,location:H.location,delta:le})}function x(M,le){f=Zi.Push;let X=Jd(H.location,M,le);v=E()+1;let Q=Mg(X,v),de=H.createHref(X);try{h.pushState(Q,"",de)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;o.location.assign(de)}l&&g&&g({action:f,location:H.location,delta:1})}function j(M,le){f=Zi.Replace;let X=Jd(H.location,M,le);v=E();let Q=Mg(X,v),de=H.createHref(X);h.replaceState(Q,"",de),l&&g&&g({action:f,location:H.location,delta:0})}function q(M){let le=o.location.origin!=="null"?o.location.origin:o.location.href,X=typeof M=="string"?M:mc(M);return X=X.replace(/ $/,"%20"),Pt(le,"No window.location.(origin|href) available to create URL for href: "+X),new URL(X,le)}let H={get action(){return f},get location(){return r(o,h)},listen(M){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Lg,I),g=M,()=>{o.removeEventListener(Lg,I),g=null}},createHref(M){return e(o,M)},createURL:q,encodeLocation(M){let le=q(M);return{pathname:le.pathname,search:le.search,hash:le.hash}},push:x,replace:j,go(M){return h.go(M)}};return H}var jg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(jg||(jg={}));function LE(r,e,t){return t===void 0&&(t="/"),ME(r,e,t)}function ME(r,e,t,i){let o=typeof e=="string"?ra(e):e,l=Af(o.pathname||"/",t);if(l==null)return null;let h=Pv(r);jE(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let v=YE(l);f=GE(h[g],v)}return f}function Pv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(Pt(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let v=ts([i,g.relativePath]),E=t.concat(g);l.children&&l.children.length>0&&(Pt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Pv(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:WE(v,l.index),routesMeta:E})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of bv(l.path))o(l,h,g)}),e}function bv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=bv(i.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function jE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:qE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const FE=/^:[\w-]+$/,UE=3,zE=2,BE=1,HE=10,$E=-2,Fg=r=>r==="*";function WE(r,e){let t=r.split("/"),i=t.length;return t.some(Fg)&&(i+=$E),e&&(i+=zE),t.filter(o=>!Fg(o)).reduce((o,l)=>o+(FE.test(l)?UE:l===""?BE:HE),i)}function qE(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function GE(r,e,t){let{routesMeta:i}=r,o={},l="/",h=[];for(let f=0;f<i.length;++f){let g=i[f],v=f===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",I=KE({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},E),x=g.route;if(!I)return null;Object.assign(o,I.params),h.push({params:o,pathname:ts([l,I.pathname]),pathnameBase:eI(ts([l,I.pathnameBase])),route:x}),I.pathnameBase!=="/"&&(l=ts([l,I.pathnameBase]))}return h}function KE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=QE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((v,E,I)=>{let{paramName:x,isOptional:j}=E;if(x==="*"){let H=f[I]||"";h=l.slice(0,l.length-H.length).replace(/(.)\/+$/,"$1")}const q=f[I];return j&&!q?v[x]=void 0:v[x]=(q||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:h,pattern:r}}function QE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Av(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(i.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function YE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Av(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Af(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}function JE(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?ra(r):r;return{pathname:t?t.startsWith("/")?t:XE(t,e):e,search:tI(i),hash:nI(o)}}function XE(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Md(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function kv(r,e){let t=ZE(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Nv(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=ra(r):(o=fl({},r),Pt(!o.pathname||!o.pathname.includes("?"),Md("?","pathname","search",o)),Pt(!o.pathname||!o.pathname.includes("#"),Md("#","pathname","hash",o)),Pt(!o.search||!o.search.includes("#"),Md("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let I=e.length-1;if(!i&&h.startsWith("..")){let x=h.split("/");for(;x[0]==="..";)x.shift(),I-=1;o.pathname=x.join("/")}f=I>=0?e[I]:"/"}let g=JE(o,f),v=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(v||E)&&(g.pathname+="/"),g}const ts=r=>r.join("/").replace(/\/\/+/g,"/"),eI=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),tI=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,nI=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function rI(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Dv=["post","put","patch","delete"];new Set(Dv);const iI=["get",...Dv];new Set(iI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pl(){return pl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},pl.apply(this,arguments)}const Pf=L.createContext(null),sI=L.createContext(null),Qs=L.createContext(null),Lc=L.createContext(null),Ys=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Ov=L.createContext(null);function oI(r,e){let{relative:t}=e===void 0?{}:e;Sl()||Pt(!1);let{basename:i,navigator:o}=L.useContext(Qs),{hash:l,pathname:h,search:f}=Mv(r,{relative:t}),g=h;return i!=="/"&&(g=h==="/"?i:ts([i,h])),o.createHref({pathname:g,search:f,hash:l})}function Sl(){return L.useContext(Lc)!=null}function ia(){return Sl()||Pt(!1),L.useContext(Lc).location}function Vv(r){L.useContext(Qs).static||L.useLayoutEffect(r)}function Lv(){let{isDataRoute:r}=L.useContext(Ys);return r?_I():aI()}function aI(){Sl()||Pt(!1);let r=L.useContext(Pf),{basename:e,future:t,navigator:i}=L.useContext(Qs),{matches:o}=L.useContext(Ys),{pathname:l}=ia(),h=JSON.stringify(kv(o,t.v7_relativeSplatPath)),f=L.useRef(!1);return Vv(()=>{f.current=!0}),L.useCallback(function(v,E){if(E===void 0&&(E={}),!f.current)return;if(typeof v=="number"){i.go(v);return}let I=Nv(v,JSON.parse(h),l,E.relative==="path");r==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:ts([e,I.pathname])),(E.replace?i.replace:i.push)(I,E.state,E)},[e,i,h,l,r])}function Mv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=L.useContext(Qs),{matches:o}=L.useContext(Ys),{pathname:l}=ia(),h=JSON.stringify(kv(o,i.v7_relativeSplatPath));return L.useMemo(()=>Nv(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function lI(r,e){return uI(r,e)}function uI(r,e,t,i){Sl()||Pt(!1);let{navigator:o}=L.useContext(Qs),{matches:l}=L.useContext(Ys),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let v=ia(),E;if(e){var I;let M=typeof e=="string"?ra(e):e;g==="/"||(I=M.pathname)!=null&&I.startsWith(g)||Pt(!1),E=M}else E=v;let x=E.pathname||"/",j=x;if(g!=="/"){let M=g.replace(/^\//,"").split("/");j="/"+x.replace(/^\//,"").split("/").slice(M.length).join("/")}let q=LE(r,{pathname:j}),H=pI(q&&q.map(M=>Object.assign({},M,{params:Object.assign({},f,M.params),pathname:ts([g,o.encodeLocation?o.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:ts([g,o.encodeLocation?o.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,t,i);return e&&H?L.createElement(Lc.Provider,{value:{location:pl({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Zi.Pop}},H):H}function cI(){let r=vI(),e=rI(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:o},t):null,null)}const hI=L.createElement(cI,null);class dI extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?L.createElement(Ys.Provider,{value:this.props.routeContext},L.createElement(Ov.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fI(r){let{routeContext:e,match:t,children:i}=r,o=L.useContext(Pf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(Ys.Provider,{value:e},i)}function pI(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let E=h.findIndex(I=>I.route.id&&(f==null?void 0:f[I.route.id])!==void 0);E>=0||Pt(!1),h=h.slice(0,Math.min(h.length,E+1))}let g=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<h.length;E++){let I=h[E];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(v=E),I.route.id){let{loaderData:x,errors:j}=t,q=I.route.loader&&x[I.route.id]===void 0&&(!j||j[I.route.id]===void 0);if(I.route.lazy||q){g=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((E,I,x)=>{let j,q=!1,H=null,M=null;t&&(j=f&&I.route.id?f[I.route.id]:void 0,H=I.route.errorElement||hI,g&&(v<0&&x===0?(wI("route-fallback"),q=!0,M=null):v===x&&(q=!0,M=I.route.hydrateFallbackElement||null)));let le=e.concat(h.slice(0,x+1)),X=()=>{let Q;return j?Q=H:q?Q=M:I.route.Component?Q=L.createElement(I.route.Component,null):I.route.element?Q=I.route.element:Q=E,L.createElement(fI,{match:I,routeContext:{outlet:E,matches:le,isDataRoute:t!=null},children:Q})};return t&&(I.route.ErrorBoundary||I.route.errorElement||x===0)?L.createElement(dI,{location:t.location,revalidation:t.revalidation,component:H,error:j,children:X(),routeContext:{outlet:null,matches:le,isDataRoute:!0}}):X()},null)}var jv=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(jv||{}),Fv=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Fv||{});function mI(r){let e=L.useContext(Pf);return e||Pt(!1),e}function gI(r){let e=L.useContext(sI);return e||Pt(!1),e}function yI(r){let e=L.useContext(Ys);return e||Pt(!1),e}function Uv(r){let e=yI(),t=e.matches[e.matches.length-1];return t.route.id||Pt(!1),t.route.id}function vI(){var r;let e=L.useContext(Ov),t=gI(),i=Uv();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function _I(){let{router:r}=mI(jv.UseNavigateStable),e=Uv(Fv.UseNavigateStable),t=L.useRef(!1);return Vv(()=>{t.current=!0}),L.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,pl({fromRouteId:e},l)))},[r,e])}const Ug={};function wI(r,e,t){Ug[r]||(Ug[r]=!0)}function EI(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function ic(r){Pt(!1)}function II(r){let{basename:e="/",children:t=null,location:i,navigationType:o=Zi.Pop,navigator:l,static:h=!1,future:f}=r;Sl()&&Pt(!1);let g=e.replace(/^\/*/,"/"),v=L.useMemo(()=>({basename:g,navigator:l,static:h,future:pl({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof i=="string"&&(i=ra(i));let{pathname:E="/",search:I="",hash:x="",state:j=null,key:q="default"}=i,H=L.useMemo(()=>{let M=Af(E,g);return M==null?null:{location:{pathname:M,search:I,hash:x,state:j,key:q},navigationType:o}},[g,E,I,x,j,q,o]);return H==null?null:L.createElement(Qs.Provider,{value:v},L.createElement(Lc.Provider,{children:t,value:H}))}function TI(r){let{children:e,location:t}=r;return lI(Xd(e),t)}new Promise(()=>{});function Xd(r,e){e===void 0&&(e=[]);let t=[];return L.Children.forEach(r,(i,o)=>{if(!L.isValidElement(i))return;let l=[...e,o];if(i.type===L.Fragment){t.push.apply(t,Xd(i.props.children,l));return}i.type!==ic&&Pt(!1),!i.props.index||!i.props.children||Pt(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Xd(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zd(){return Zd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Zd.apply(this,arguments)}function SI(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function xI(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function CI(r,e){return r.button===0&&(!e||e==="_self")&&!xI(r)}const RI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],AI="6";try{window.__reactRouterVersion=AI}catch{}const PI="startTransition",zg=CE[PI];function bI(r){let{basename:e,children:t,future:i,window:o}=r,l=L.useRef();l.current==null&&(l.current=DE({window:o,v5Compat:!0}));let h=l.current,[f,g]=L.useState({action:h.action,location:h.location}),{v7_startTransition:v}=i||{},E=L.useCallback(I=>{v&&zg?zg(()=>g(I)):g(I)},[g,v]);return L.useLayoutEffect(()=>h.listen(E),[h,E]),L.useEffect(()=>EI(i),[i]),L.createElement(II,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:i})}const kI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qi=L.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:v,preventScrollReset:E,viewTransition:I}=e,x=SI(e,RI),{basename:j}=L.useContext(Qs),q,H=!1;if(typeof v=="string"&&NI.test(v)&&(q=v,kI))try{let Q=new URL(window.location.href),de=v.startsWith("//")?new URL(Q.protocol+v):new URL(v),te=Af(de.pathname,j);de.origin===Q.origin&&te!=null?v=te+de.search+de.hash:H=!0}catch{}let M=oI(v,{relative:o}),le=DI(v,{replace:h,state:f,target:g,preventScrollReset:E,relative:o,viewTransition:I});function X(Q){i&&i(Q),Q.defaultPrevented||le(Q)}return L.createElement("a",Zd({},x,{href:q||M,onClick:H||l?i:X,ref:t,target:g}))});var Bg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Bg||(Bg={}));var Hg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Hg||(Hg={}));function DI(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=Lv(),v=ia(),E=Mv(r,{relative:h});return L.useCallback(I=>{if(CI(I,t)){I.preventDefault();let x=i!==void 0?i:mc(v)===mc(E);g(r,{replace:x,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[v,g,E,i,o,t,r,l,h,f])}const OI=()=>{};var $g={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},VI=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Bv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,E=l>>2,I=(l&3)<<4|f>>4;let x=(f&15)<<2|v>>6,j=v&63;g||(j=64,h||(x=64)),i.push(t[E],t[I],t[x],t[j])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(zv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):VI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||v==null||I==null)throw new LI;const x=l<<2|f>>4;if(i.push(x),v!==64){const j=f<<4&240|v>>2;if(i.push(j),I!==64){const q=v<<6&192|I;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class LI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MI=function(r){const e=zv(r);return Bv.encodeByteArray(e,!0)},gc=function(r){return MI(r).replace(/\./g,"")},Hv=function(r){try{return Bv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=()=>jI().__FIREBASE_DEFAULTS__,UI=()=>{if(typeof process>"u"||typeof $g>"u")return;const r=$g.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},zI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Hv(r[1]);return e&&JSON.parse(e)},Mc=()=>{try{return OI()||FI()||UI()||zI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},$v=r=>{var e,t;return(t=(e=Mc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},BI=r=>{const e=$v(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Wv=()=>{var r;return(r=Mc())===null||r===void 0?void 0:r.config},qv=r=>{var e;return(e=Mc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[gc(JSON.stringify(t)),gc(JSON.stringify(h)),""].join(".")}const il={};function WI(){const r={prod:[],emulator:[]};for(const e of Object.keys(il))il[e]?r.emulator.push(e):r.prod.push(e);return r}function qI(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Wg=!1;function Kv(r,e){if(typeof window>"u"||typeof document>"u"||!sa(window.location.host)||il[r]===e||il[r]||Wg)return;il[r]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",l=WI().prod.length>0;function h(){const x=document.getElementById(i);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,j){x.setAttribute("width","24"),x.setAttribute("id",j),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function v(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Wg=!0,h()},x}function E(x,j){x.setAttribute("id",j),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function I(){const x=qI(i),j=t("text"),q=document.getElementById(j)||document.createElement("span"),H=t("learnmore"),M=document.getElementById(H)||document.createElement("a"),le=t("preprendIcon"),X=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const Q=x.element;f(Q),E(M,H);const de=v();g(X,le),Q.append(X,q,M,de),document.body.appendChild(Q)}l?(q.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function KI(){var r;const e=(r=Mc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function JI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XI(){const r=en();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function ZI(){return!KI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eT(){try{return typeof indexedDB=="object"}catch{return!1}}function tT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="FirebaseError";class _i extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=nT,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xl.prototype.create)}}class xl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?rT(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new _i(o,f,i)}}function rT(r,e){return r.replace(iT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const iT=/\{\$([^}]+)}/g;function sT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ls(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(qg(l)&&qg(h)){if(!ls(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function qg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ya(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ja(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function oT(r,e){const t=new aT(r,e);return t.subscribe.bind(t)}class aT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");lT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=jd),o.error===void 0&&(o.error=jd),o.complete===void 0&&(o.complete=jd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(r){return r&&r._delegate?r._delegate:r}class qs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new HI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hT(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cT(r){return r===Bs?void 0:r}function hT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const fT={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},pT=Ue.INFO,mT={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},gT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=mT[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bf{constructor(e){this.name=e,this._logLevel=pT,this._logHandler=gT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const yT=(r,e)=>e.some(t=>r instanceof t);let Gg,Kg;function vT(){return Gg||(Gg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _T(){return Kg||(Kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qv=new WeakMap,ef=new WeakMap,Yv=new WeakMap,Fd=new WeakMap,kf=new WeakMap;function wT(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(ns(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Qv.set(t,r)}).catch(()=>{}),kf.set(e,r),e}function ET(r){if(ef.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});ef.set(r,e)}let tf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return ef.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Yv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ns(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function IT(r){tf=r(tf)}function TT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Ud(this),e,...t);return Yv.set(i,e.sort?e.sort():[e]),ns(i)}:_T().includes(r)?function(...e){return r.apply(Ud(this),e),ns(Qv.get(this))}:function(...e){return ns(r.apply(Ud(this),e))}}function ST(r){return typeof r=="function"?TT(r):(r instanceof IDBTransaction&&ET(r),yT(r,vT())?new Proxy(r,tf):r)}function ns(r){if(r instanceof IDBRequest)return wT(r);if(Fd.has(r))return Fd.get(r);const e=ST(r);return e!==r&&(Fd.set(r,e),kf.set(e,r)),e}const Ud=r=>kf.get(r);function xT(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=ns(h);return i&&h.addEventListener("upgradeneeded",g=>{i(ns(h.result),g.oldVersion,g.newVersion,ns(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const CT=["get","getKey","getAll","getAllKeys","count"],RT=["put","add","delete","clear"],zd=new Map;function Qg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(zd.get(e))return zd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=RT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||CT.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return i&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&g.done]))[0]};return zd.set(e,l),l}IT(r=>({...r,get:(e,t,i)=>Qg(e,t)||r.get(e,t,i),has:(e,t)=>!!Qg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PT(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function PT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",Yg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new bf("@firebase/app"),bT="@firebase/app-compat",kT="@firebase/analytics-compat",NT="@firebase/analytics",DT="@firebase/app-check-compat",OT="@firebase/app-check",VT="@firebase/auth",LT="@firebase/auth-compat",MT="@firebase/database",jT="@firebase/data-connect",FT="@firebase/database-compat",UT="@firebase/functions",zT="@firebase/functions-compat",BT="@firebase/installations",HT="@firebase/installations-compat",$T="@firebase/messaging",WT="@firebase/messaging-compat",qT="@firebase/performance",GT="@firebase/performance-compat",KT="@firebase/remote-config",QT="@firebase/remote-config-compat",YT="@firebase/storage",JT="@firebase/storage-compat",XT="@firebase/firestore",ZT="@firebase/ai",eS="@firebase/firestore-compat",tS="firebase",nS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",rS={[nf]:"fire-core",[bT]:"fire-core-compat",[NT]:"fire-analytics",[kT]:"fire-analytics-compat",[OT]:"fire-app-check",[DT]:"fire-app-check-compat",[VT]:"fire-auth",[LT]:"fire-auth-compat",[MT]:"fire-rtdb",[jT]:"fire-data-connect",[FT]:"fire-rtdb-compat",[UT]:"fire-fn",[zT]:"fire-fn-compat",[BT]:"fire-iid",[HT]:"fire-iid-compat",[$T]:"fire-fcm",[WT]:"fire-fcm-compat",[qT]:"fire-perf",[GT]:"fire-perf-compat",[KT]:"fire-rc",[QT]:"fire-rc-compat",[YT]:"fire-gcs",[JT]:"fire-gcs-compat",[XT]:"fire-fst",[eS]:"fire-fst-compat",[ZT]:"fire-vertex","fire-js":"fire-js",[tS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Map,iS=new Map,sf=new Map;function Jg(r,e){try{r.container.addComponent(e)}catch(t){pi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Qo(r){const e=r.name;if(sf.has(e))return pi.debug(`There were multiple attempts to register component ${e}.`),!1;sf.set(e,r);for(const t of yc.values())Jg(t,r);for(const t of iS.values())Jg(t,r);return!0}function Nf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ln(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new xl("app","Firebase",sS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=nS;function Jv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:rf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw rs.create("bad-app-name",{appName:String(o)});if(t||(t=Wv()),!t)throw rs.create("no-options");const l=yc.get(o);if(l){if(ls(t,l.options)&&ls(i,l.config))return l;throw rs.create("duplicate-app",{appName:o})}const h=new dT(o);for(const g of sf.values())h.addComponent(g);const f=new oS(t,i,h);return yc.set(o,f),f}function Xv(r=rf){const e=yc.get(r);if(!e&&r===rf&&Wv())return Jv();if(!e)throw rs.create("no-app",{appName:r});return e}function is(r,e,t){var i;let o=(i=rS[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pi.warn(f.join(" "));return}Qo(new qs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firebase-heartbeat-database",lS=1,ml="firebase-heartbeat-store";let Bd=null;function Zv(){return Bd||(Bd=xT(aS,lS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ml)}catch(t){console.warn(t)}}}}).catch(r=>{throw rs.create("idb-open",{originalErrorMessage:r.message})})),Bd}async function uS(r){try{const t=(await Zv()).transaction(ml),i=await t.objectStore(ml).get(e_(r));return await t.done,i}catch(e){if(e instanceof _i)pi.warn(e.message);else{const t=rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pi.warn(t.message)}}}async function Xg(r,e){try{const i=(await Zv()).transaction(ml,"readwrite");await i.objectStore(ml).put(e,e_(r)),await i.done}catch(t){if(t instanceof _i)pi.warn(t.message);else{const i=rs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});pi.warn(i.message)}}}function e_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=1024,hS=30;class dS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Zg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>hS){const h=mS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){pi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zg(),{heartbeatsToSend:i,unsentEntries:o}=fS(this._heartbeatsCache.heartbeats),l=gc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return pi.warn(t),""}}}function Zg(){return new Date().toISOString().substring(0,10)}function fS(r,e=cS){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),ey(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ey(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class pS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eT()?tT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await uS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ey(r){return gc(JSON.stringify({version:2,heartbeats:r})).length}function mS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(r){Qo(new qs("platform-logger",e=>new AT(e),"PRIVATE")),Qo(new qs("heartbeat",e=>new dS(e),"PRIVATE")),is(nf,Yg,r),is(nf,Yg,"esm2017"),is("fire-js","")}gS("");var yS="firebase",vS="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(yS,vS,"app");function Df(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function t_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _S=t_,n_=new xl("auth","Firebase",t_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new bf("@firebase/auth");function wS(r,...e){vc.logLevel<=Ue.WARN&&vc.warn(`Auth (${aa}): ${r}`,...e)}function sc(r,...e){vc.logLevel<=Ue.ERROR&&vc.error(`Auth (${aa}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(r,...e){throw Vf(r,...e)}function Tn(r,...e){return Vf(r,...e)}function Of(r,e,t){const i=Object.assign(Object.assign({},_S()),{[e]:t});return new xl("auth","Firebase",i).create(e,{appName:r.name})}function vr(r){return Of(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ES(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&er(r,"argument-error"),Of(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return n_.create(r,...e)}function ue(r,e,...t){if(!r)throw Vf(e,...t)}function di(r){const e="INTERNAL ASSERTION FAILED: "+r;throw sc(e),new Error(e)}function mi(r,e){r||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function Lf(){return ty()==="http:"||ty()==="https:"}function ty(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lf()||YI()||"connection"in navigator)?navigator.onLine:!0}function TS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.shortDelay=e,this.longDelay=t,mi(t>e,"Short delay should be less than long delay!"),this.isMobile=GI()||JI()}get(){return IS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(r,e){mi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CS=new Cl(3e4,6e4);function tn(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function jn(r,e,t,i,o={}){return i_(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=oa(Object.assign({key:r.config.apiKey},h)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:g},l);return QI()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&sa(r.emulatorConfig.host)&&(v.credentials="include"),r_.fetch()(await s_(r,r.config.apiHost,t,f),v)})}async function i_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},SS),e);try{const o=new AS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Xa(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,v]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xa(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Xa(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Xa(r,"user-disabled",h);const E=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Of(r,E,v);er(r,E)}}catch(o){if(o instanceof _i)throw o;er(r,"network-request-failed",{message:String(o)})}}async function wi(r,e,t,i,o={}){const l=await jn(r,e,t,i,o);return"mfaPendingCredential"in l&&er(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function s_(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?Mf(r.config,o):`${r.config.apiScheme}://${o}`;return xS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function RS(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Tn(this.auth,"network-request-failed")),CS.get())})}}function Xa(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Tn(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(r){return r!==void 0&&r.getResponse!==void 0}function ry(r){return r!==void 0&&r.enterprise!==void 0}class o_{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return RS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(r){return(await jn(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function a_(r,e){return jn(r,"GET","/v2/recaptchaConfig",tn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(r,e){return jn(r,"POST","/v1/accounts:delete",e)}async function wc(r,e){return jn(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kS(r,e=!1){const t=Tt(r),i=await t.getIdToken(e),o=jf(i);ue(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:sl(Hd(o.auth_time)),issuedAtTime:sl(Hd(o.iat)),expirationTime:sl(Hd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Hd(r){return Number(r)*1e3}function jf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return sc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Hv(t);return o?JSON.parse(o):(sc("Failed to decode base64 JWT payload"),null)}catch(o){return sc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function iy(r){const e=jf(r);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof _i&&NS(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function NS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sl(this.lastLoginAt),this.creationTime=sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(r){var e;const t=r.auth,i=await r.getIdToken(),o=await gl(r,wc(t,{idToken:i}));ue(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?l_(l.providerUserInfo):[],f=VS(r.providerData,h),g=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),E=g?v:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new of(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,I)}async function OS(r){const e=Tt(r);await yl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VS(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function l_(r){return r.map(e=>{var{providerId:t}=e,i=Df(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(r,e){const t=await i_(r,{},async()=>{const i=oa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await s_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return r.emulatorConfig&&sa(r.emulatorConfig.host)&&(g.credentials="include"),r_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function MS(r,e){return jn(r,"POST","/v2/accounts:revokeToken",tn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const t=iy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await LS(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Bo;return i&&(ue(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(ue(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(ue(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(r,e){ue(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class yr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Df(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new of(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await gl(this,this.stsTokenManager.getToken(this.auth,e));return ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kS(this,e)}reload(){return OS(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await yl(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(vr(this.auth));const e=await this.getIdToken();return await gl(this,bS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,f,g,v,E;const I=(i=t.displayName)!==null&&i!==void 0?i:void 0,x=(o=t.email)!==null&&o!==void 0?o:void 0,j=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,q=(h=t.photoURL)!==null&&h!==void 0?h:void 0,H=(f=t.tenantId)!==null&&f!==void 0?f:void 0,M=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,le=(v=t.createdAt)!==null&&v!==void 0?v:void 0,X=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:Q,emailVerified:de,isAnonymous:te,providerData:_e,stsTokenManager:k}=t;ue(Q&&k,e,"internal-error");const S=Bo.fromJSON(this.name,k);ue(typeof Q=="string",e,"internal-error"),Gi(I,e.name),Gi(x,e.name),ue(typeof de=="boolean",e,"internal-error"),ue(typeof te=="boolean",e,"internal-error"),Gi(j,e.name),Gi(q,e.name),Gi(H,e.name),Gi(M,e.name),Gi(le,e.name),Gi(X,e.name);const C=new yr({uid:Q,auth:e,email:x,emailVerified:de,displayName:I,isAnonymous:te,photoURL:q,phoneNumber:j,tenantId:H,stsTokenManager:S,createdAt:le,lastLoginAt:X});return _e&&Array.isArray(_e)&&(C.providerData=_e.map(P=>Object.assign({},P))),M&&(C._redirectEventId=M),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new Bo;o.updateFromServerResponse(t);const l=new yr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await yl(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ue(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?l_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Bo;f.updateFromIdToken(i);const g=new yr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new of(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new Map;function fi(r){mi(r instanceof Function,"Expected a class definition");let e=sy.get(r);return e?(mi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,sy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}u_.type="NONE";const oy=u_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(r,e,t){return`firebase:${r}:${e}:${t}`}class Ho{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=oc(this.userKey,o.apiKey,l),this.fullPersistenceKey=oc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await wc(this.auth,{idToken:e}).catch(()=>{});return t?yr._fromGetAccountInfoResponse(this.auth,t,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ho(fi(oy),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||fi(oy);const h=oc(i,e.config.apiKey,e.name);let f=null;for(const v of t)try{const E=await v._get(h);if(E){let I;if(typeof E=="string"){const x=await wc(e,{idToken:E}).catch(()=>{});if(!x)break;I=await yr._fromGetAccountInfoResponse(e,x,E)}else I=yr._fromJSON(e,E);v!==l&&(f=I),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ho(l,e,i):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Ho(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(f_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m_(e))return"Blackberry";if(g_(e))return"Webos";if(h_(e))return"Safari";if((e.includes("chrome/")||d_(e))&&!e.includes("edge/"))return"Chrome";if(p_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function c_(r=en()){return/firefox\//i.test(r)}function h_(r=en()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d_(r=en()){return/crios\//i.test(r)}function f_(r=en()){return/iemobile/i.test(r)}function p_(r=en()){return/android/i.test(r)}function m_(r=en()){return/blackberry/i.test(r)}function g_(r=en()){return/webos/i.test(r)}function Ff(r=en()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function jS(r=en()){var e;return Ff(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FS(){return XI()&&document.documentMode===10}function y_(r=en()){return Ff(r)||p_(r)||g_(r)||m_(r)||/windows phone/i.test(r)||f_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(r,e=[]){let t;switch(r){case"Browser":t=ay(en());break;case"Worker":t=`${ay(en())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${aa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(r,e={}){return jn(r,"GET","/v2/passwordPolicy",tn(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=6;class HS{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:BS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,f;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(f=g.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ly(this),this.idTokenSubscription=new ly(this),this.beforeStateQueue=new US(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fi(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wc(this,{idToken:e}),i=await yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ln(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject(vr(this));const t=e?Tt(e):null;return t&&ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject(vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject(vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zS(this),t=new HS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await MS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fi(e)||this._popupRedirectResolver;ue(t,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[fi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&wS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function tr(r){return Tt(r)}class ly{constructor(e){this.auth=e,this.observer=null,this.addObserver=oT(t=>this.observer=t)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WS(r){Rl=r}function Uf(r){return Rl.loadJS(r)}function qS(){return Rl.recaptchaV2Script}function GS(){return Rl.recaptchaEnterpriseScript}function KS(){return Rl.gapiScript}function __(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=500,YS=6e4,Qu=1e12;class JS{constructor(e){this.auth=e,this.counter=Qu,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new e1(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;const i=e||Qu;(t=this._widgets.get(i))===null||t===void 0||t.delete(),this._widgets.delete(i)}getResponse(e){var t;const i=e||Qu;return((t=this._widgets.get(i))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const i=e||Qu;return(t=this._widgets.get(i))===null||t===void 0||t.execute(),""}}class XS{constructor(){this.enterprise=new ZS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ZS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class e1{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;ue(o,"argument-error",{appName:t}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=t1(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},YS)},QS))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function t1(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<r;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const n1="recaptcha-enterprise",ol="NO_RECAPTCHA";class w_{constructor(e){this.type=n1,this.auth=tr(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{a_(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new o_(g);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(g=>{f(g)})})}function o(l,h,f){const g=window.grecaptcha;ry(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(ol)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XS().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(f=>{if(!t&&ry(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=GS();g.length!==0&&(g+=f),Uf(g).then(()=>{o(f,l,h)}).catch(v=>{h(v)})}}).catch(f=>{h(f)})})}}async function Ka(r,e,t,i=!1,o=!1){const l=new w_(r);let h;if(o)h=ol;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function $o(r,e,t,i,o){var l,h;if(o==="EMAIL_PASSWORD_PROVIDER")if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Ka(r,e,t,t==="getOobCode");return i(r,f)}else return i(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await Ka(r,e,t,t==="getOobCode");return i(r,g)}else return Promise.reject(f)});else if(o==="PHONE_PROVIDER")if(!((h=r._getRecaptchaConfig())===null||h===void 0)&&h.isProviderEnabled("PHONE_PROVIDER")){const f=await Ka(r,e,t);return i(r,f).catch(async g=>{var v;if(((v=r._getRecaptchaConfig())===null||v===void 0?void 0:v.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(g.code==="auth/missing-recaptcha-token"||g.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const E=await Ka(r,e,t,!1,!0);return i(r,E)}return Promise.reject(g)})}else{const f=await Ka(r,e,t,!1,!0);return i(r,f)}else return Promise.reject(o+" provider is not supported.")}async function r1(r){const e=tr(r),t=await a_(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new o_(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new w_(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(r,e){const t=Nf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ls(l,e??{}))return o;er(o,"already-initialized")}return t.initialize({options:e})}function s1(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(fi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function o1(r,e,t){const i=tr(r);ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=E_(e),{host:h,port:f}=a1(e),g=f===null?"":`:${f}`,v={url:`${l}//${h}${g}/`},E=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ue(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ue(ls(v,i.config.emulator)&&ls(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,sa(h)?(Gv(`${l}//${h}${g}`),Kv("Auth",!0)):l1()}function E_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function a1(r){const e=E_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:uy(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:uy(h)}}}function uy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function l1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,t){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}async function u1(r,e){return jn(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(r,e){return wi(r,"POST","/v1/accounts:signInWithPassword",tn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h1(r,e){return wi(r,"POST","/v1/accounts:signInWithEmailLink",tn(r,e))}async function d1(r,e){return wi(r,"POST","/v1/accounts:signInWithEmailLink",tn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends jc{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new vl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new vl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $o(e,t,"signInWithPassword",c1,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return h1(e,{email:this._email,oobCode:this._password});default:er(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $o(e,i,"signUpPassword",u1,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return d1(e,{idToken:t,email:this._email,oobCode:this._password});default:er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(r,e){return wi(r,"POST","/v1/accounts:signInWithIdp",tn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="http://localhost";class gi extends jc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):er("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Df(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new gi(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Wo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Wo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wo(e,t)}buildRequest(){const e={requestUri:f1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=oa(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cy(r,e){return jn(r,"POST","/v1/accounts:sendVerificationCode",tn(r,e))}async function p1(r,e){return wi(r,"POST","/v1/accounts:signInWithPhoneNumber",tn(r,e))}async function m1(r,e){const t=await wi(r,"POST","/v1/accounts:signInWithPhoneNumber",tn(r,e));if(t.temporaryProof)throw Xa(r,"account-exists-with-different-credential",t);return t}const g1={USER_NOT_FOUND:"user-not-found"};async function y1(r,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return wi(r,"POST","/v1/accounts:signInWithPhoneNumber",tn(r,t),g1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends jc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new al({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new al({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return p1(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return m1(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return y1(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:o,temporaryProof:l}=e;return!i&&!t&&!o&&!l?null:new al({verificationId:t,verificationCode:i,phoneNumber:o,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _1(r){const e=Ya(Ja(r)).link,t=e?Ya(Ja(e)).deep_link_id:null,i=Ya(Ja(r)).deep_link_id;return(i?Ya(Ja(i)).link:null)||i||t||e||r}class zf{constructor(e){var t,i,o,l,h,f;const g=Ya(Ja(e)),v=(t=g.apiKey)!==null&&t!==void 0?t:null,E=(i=g.oobCode)!==null&&i!==void 0?i:null,I=v1((o=g.mode)!==null&&o!==void 0?o:null);ue(v&&E&&I,"argument-error"),this.apiKey=v,this.operation=I,this.code=E,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=g.lang)!==null&&h!==void 0?h:null,this.tenantId=(f=g.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=_1(e);try{return new zf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.providerId=Js.PROVIDER_ID}static credential(e,t){return vl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=zf.parseLink(t);return ue(i,"argument-error"),vl._fromEmailAndCode(e,i.code,i.tenantId)}}Js.PROVIDER_ID="password";Js.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Js.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends Bf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qo extends la{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ue("providerId"in t&&"signInMethod"in t,"argument-error"),gi._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ue(e.idToken||e.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return qo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return qo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:l,nonce:h,providerId:f}=e;if(!i&&!o&&!t&&!l||!f)return null;try{return new qo(f)._credential({idToken:t,accessToken:i,nonce:h,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends la{constructor(){super("facebook.com")}static credential(e){return gi._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends la{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gi._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return hi.credential(t,i)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends la{constructor(){super("github.com")}static credential(e){return gi._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends la{constructor(){super("twitter.com")}static credential(e,t){return gi._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Xi.credential(t,i)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(r,e){return wi(r,"POST","/v1/accounts:signUp",tn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await yr._fromIdTokenResponse(e,i,o),h=hy(i);return new us({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=hy(i);return new us({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function hy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends _i{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Ec(e,t,i,o)}}function I_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ec._fromErrorAndOperation(r,l,e,i):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}async function T_(r,e,t=!1){const i=await gl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return us._forOperation(r,"link",i)}async function I1(r,e,t){await yl(e);const i=E1(e.providerData);ue(i.has(t)===r,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(r,e,t=!1){const{auth:i}=r;if(ln(i.app))return Promise.reject(vr(i));const o="reauthenticate";try{const l=await gl(r,I_(i,o,e,r),t);ue(l.idToken,i,"internal-error");const h=jf(l.idToken);ue(h,i,"internal-error");const{sub:f}=h;return ue(r.uid===f,i,"user-mismatch"),us._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&er(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S_(r,e,t=!1){if(ln(r.app))return Promise.reject(vr(r));const i="signIn",o=await I_(r,i,e),l=await us._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function x_(r,e){return S_(tr(r),e)}async function Yu(r,e){const t=Tt(r);return await I1(!1,t,e.providerId),T_(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(r,e){return wi(r,"POST","/v1/accounts:signInWithCustomToken",tn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(r,e){if(ln(r.app))return Promise.reject(vr(r));const t=tr(r),i=await S1(t,{token:e,returnSecureToken:!0}),o=await us._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C_(r){const e=tr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function C1(r,e,t){if(ln(r.app))return Promise.reject(vr(r));const i=tr(r),h=await $o(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",w1,"EMAIL_PASSWORD_PROVIDER").catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&C_(r),g}),f=await us._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(f.user),f}function R1(r,e,t){return ln(r.app)?Promise.reject(vr(r)):x_(Tt(r),Js.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&C_(r),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(r,e){return jn(r,"POST","/v1/accounts:createAuthUri",tn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(r,e){const t=Lf()?_c():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:o}=await A1(Tt(r),i);return o||[]}function b1(r,e,t,i){return Tt(r).onIdTokenChanged(e,t,i)}function k1(r,e,t){return Tt(r).beforeAuthStateChanged(e,t)}function N1(r,e,t,i){return Tt(r).onAuthStateChanged(e,t,i)}function D1(r){return Tt(r).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(r,e){return jn(r,"POST","/v2/accounts/mfaEnrollment:start",tn(r,e))}const Ic="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ic,"1"),this.storage.removeItem(Ic),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=1e3,V1=10;class A_ extends R_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);FS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,V1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},O1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}A_.type="LOCAL";const L1=A_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends R_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}P_.type="SESSION";const b_=P_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Fc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async v=>v(t.origin,l)),g=await M1(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const v=Hf("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(I){const x=I;if(x.data.eventId===v)switch(x.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(x.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return window}function F1(r){Rt().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(){return typeof Rt().WorkerGlobalScope<"u"&&typeof Rt().importScripts=="function"}async function U1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function B1(){return $f()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="firebaseLocalStorageDb",H1=1,Tc="firebaseLocalStorage",N_="fbase_key";class Al{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uc(r,e){return r.transaction([Tc],e?"readwrite":"readonly").objectStore(Tc)}function $1(){const r=indexedDB.deleteDatabase(k_);return new Al(r).toPromise()}function af(){const r=indexedDB.open(k_,H1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Tc,{keyPath:N_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Tc)?e(i):(i.close(),await $1(),e(await af()))})})}async function fy(r,e,t){const i=Uc(r,!0).put({[N_]:e,value:t});return new Al(i).toPromise()}async function W1(r,e){const t=Uc(r,!1).get(e),i=await new Al(t).toPromise();return i===void 0?null:i.value}function py(r,e){const t=Uc(r,!0).delete(e);return new Al(t).toPromise()}const q1=800,G1=3;class D_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await af(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>G1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $f()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(B1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await U1(),!this.activeServiceWorker)return;this.sender=new j1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||z1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await af();return await fy(e,Ic,"1"),await py(e,Ic),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>fy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>W1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>py(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Uc(o,!1).getAll();return new Al(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D_.type="LOCAL";const K1=D_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(r,e){return jn(r,"POST","/v2/accounts/mfaSignIn:start",tn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=__("rcb"),Q1=new Cl(3e4,6e4);class Y1{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Rt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return ue(J1(t),e,"argument-error"),this.shouldResolveImmediately(t)&&ny(Rt().grecaptcha)?Promise.resolve(Rt().grecaptcha):new Promise((i,o)=>{const l=Rt().setTimeout(()=>{o(Tn(e,"network-request-failed"))},Q1.get());Rt()[$d]=()=>{Rt().clearTimeout(l),delete Rt()[$d];const f=Rt().grecaptcha;if(!f||!ny(f)){o(Tn(e,"internal-error"));return}const g=f.render;f.render=(v,E)=>{const I=g(v,E);return this.counter++,I},this.hostLanguage=t,i(f)};const h=`${qS()}?${oa({onload:$d,render:"explicit",hl:t})}`;Uf(h).catch(()=>{clearTimeout(l),o(Tn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Rt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function J1(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}class X1{async load(e){return new JS(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll="recaptcha",Z1={theme:"light",type:"image"};class O_{constructor(e,t,i=Object.assign({},Z1)){this.parameters=i,this.type=ll,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tr(e),this.isInvisible=this.parameters.size==="invisible",ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof t=="string"?document.getElementById(t):t;ue(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new X1:new Y1,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(o=>{const l=h=>{h&&(this.tokenChangeListeners.delete(l),o(h))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=Rt()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ue(Lf()&&!$f(),this.auth,"internal-error"),await ex(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await PS(this.auth);ue(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function ex(){let r=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}r=()=>e(),window.addEventListener("load",r)}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=al._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function nx(r,e,t){if(ln(r.app))return Promise.reject(vr(r));const i=tr(r),o=await rx(i,e,Tt(t));return new tx(o,l=>x_(i,l))}async function rx(r,e,t){var i;if(!r._getRecaptchaConfig())try{await r1(r)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const l=o.session;if("phoneNumber"in o){ue(l.type==="enroll",r,"internal-error");const h={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await $o(r,h,"mfaSmsEnrollment",async(E,I)=>{if(I.phoneEnrollmentInfo.captchaResponse===ol){ue((t==null?void 0:t.type)===ll,E,"argument-error");const x=await Wd(E,I,t);return dy(E,x)}return dy(E,I)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneSessionInfo.sessionInfo}else{ue(l.type==="signin",r,"internal-error");const h=((i=o.multiFactorHint)===null||i===void 0?void 0:i.uid)||o.multiFactorUid;ue(h,r,"missing-multi-factor-info");const f={mfaPendingCredential:l.credential,mfaEnrollmentId:h,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await $o(r,f,"mfaSmsSignIn",async(I,x)=>{if(x.phoneSignInInfo.captchaResponse===ol){ue((t==null?void 0:t.type)===ll,I,"argument-error");const j=await Wd(I,x,t);return my(I,j)}return my(I,x)},"PHONE_PROVIDER").catch(I=>Promise.reject(I))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await $o(r,l,"sendVerificationCode",async(v,E)=>{if(E.captchaResponse===ol){ue((t==null?void 0:t.type)===ll,v,"argument-error");const I=await Wd(v,E,t);return cy(v,I)}return cy(v,E)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).sessionInfo}}finally{t==null||t._reset()}}async function Wd(r,e,t){ue(t.type===ll,r,"argument-error");const i=await t.verify();ue(typeof i=="string",r,"argument-error");const o=Object.assign({},e);if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,h=o.phoneEnrollmentInfo.captchaResponse,f=o.phoneEnrollmentInfo.clientType,g=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:i,captchaResponse:h,clientType:f,recaptchaVersion:g}}),o}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.captchaResponse,h=o.phoneSignInInfo.clientType,f=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:l,clientType:h,recaptchaVersion:f}}),o}else return Object.assign(o,{recaptchaToken:i}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(r,e){return e?fi(e):(ue(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends jc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ix(r){return S_(r.auth,new Wf(r),r.bypassAuthState)}function sx(r){const{auth:e,user:t}=r;return ue(t,e,"internal-error"),T1(t,new Wf(r),r.bypassAuthState)}async function ox(r){const{auth:e,user:t}=r;return ue(t,e,"internal-error"),T_(t,new Wf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ix;case"linkViaPopup":case"linkViaRedirect":return ox;case"reauthViaPopup":case"reauthViaRedirect":return sx;default:er(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Cl(2e3,1e4);async function Ju(r,e,t){if(ln(r.app))return Promise.reject(Tn(r,"operation-not-supported-in-this-environment"));const i=tr(r);ES(r,e,Bf);const o=V_(i,t);return new Hs(i,"signInViaPopup",e,o).executeNotNull()}class Hs extends L_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Hs.currentPopupAction&&Hs.currentPopupAction.cancel(),Hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ax.get())};e()}}Hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="pendingRedirect",ac=new Map;class ux extends L_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ac.get(this.auth._key());if(!e){try{const i=await cx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ac.set(this.auth._key(),e)}return this.bypassAuthState||ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cx(r,e){const t=fx(e),i=dx(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function hx(r,e){ac.set(r._key(),e)}function dx(r){return fi(r._redirectPersistence)}function fx(r){return oc(lx,r.config.apiKey,r.name)}async function px(r,e,t=!1){if(ln(r.app))return Promise.reject(vr(r));const i=tr(r),o=V_(i,e),h=await new ux(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=10*60*1e3;class gx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!M_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Tn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mx&&this.cachedEventUids.clear(),this.cachedEventUids.has(gy(e))}saveEventToCache(e){this.cachedEventUids.add(gy(e)),this.lastProcessedEventTime=Date.now()}}function gy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function M_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vx(r,e={}){return jn(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wx=/^https?/;async function Ex(r){if(r.config.emulator)return;const{authorizedDomains:e}=await vx(r);for(const t of e)try{if(Ix(t))return}catch{}er(r,"unauthorized-domain")}function Ix(r){const e=_c(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!wx.test(t))return!1;if(_x.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Cl(3e4,6e4);function yy(){const r=Rt().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Sx(r){return new Promise((e,t)=>{var i,o,l;function h(){yy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yy(),t(Tn(r,"network-request-failed"))},timeout:Tx.get()})}if(!((o=(i=Rt().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Rt().gapi)===null||l===void 0)&&l.load)h();else{const f=__("iframefcb");return Rt()[f]=()=>{gapi.load?h():t(Tn(r,"network-request-failed"))},Uf(`${KS()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw lc=null,e})}let lc=null;function xx(r){return lc=lc||Sx(r),lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=new Cl(5e3,15e3),Rx="__/auth/iframe",Ax="emulator/auth/iframe",Px={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kx(r){const e=r.config;ue(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Mf(e,Ax):`https://${r.config.authDomain}/${Rx}`,i={apiKey:e.apiKey,appName:r.name,v:aa},o=bx.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${oa(i).slice(1)}`}async function Nx(r){const e=await xx(r),t=Rt().gapi;return ue(t,r,"internal-error"),e.open({where:document.body,url:kx(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Px,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Tn(r,"network-request-failed"),f=Rt().setTimeout(()=>{l(h)},Cx.get());function g(){Rt().clearTimeout(f),o(i)}i.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ox=500,Vx=600,Lx="_blank",Mx="http://localhost";class vy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jx(r,e,t,i=Ox,o=Vx){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g=Object.assign(Object.assign({},Dx),{width:i.toString(),height:o.toString(),top:l,left:h}),v=en().toLowerCase();t&&(f=d_(v)?Lx:t),c_(v)&&(e=e||Mx,g.scrollbars="yes");const E=Object.entries(g).reduce((x,[j,q])=>`${x}${j}=${q},`,"");if(jS(v)&&f!=="_self")return Fx(e||"",f),new vy(null);const I=window.open(e||"",f,E);ue(I,r,"popup-blocked");try{I.focus()}catch{}return new vy(I)}function Fx(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="__/auth/handler",zx="emulator/auth/handler",Bx=encodeURIComponent("fac");async function _y(r,e,t,i,o,l){ue(r.config.authDomain,r,"auth-domain-config-required"),ue(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:aa,eventId:o};if(e instanceof Bf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",sT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))h[E]=I}if(e instanceof la){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const g=await r._getAppCheckToken(),v=g?`#${Bx}=${encodeURIComponent(g)}`:"";return`${Hx(r)}?${oa(f).slice(1)}${v}`}function Hx({config:r}){return r.emulator?Mf(r,zx):`https://${r.authDomain}/${Ux}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="webStorageSupport";class $x{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b_,this._completeRedirectFn=px,this._overrideRedirectResult=hx}async _openPopup(e,t,i,o){var l;mi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await _y(e,t,i,_c(),o);return jx(e,h,Hf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await _y(e,t,i,_c(),o);return F1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(mi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Nx(e),i=new gx(e);return t.register("authEvent",o=>(ue(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qd,{type:qd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[qd];h!==void 0&&t(!!h),er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ex(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return y_()||h_()||Ff()}}const Wx=$x;var wy="@firebase/auth",Ey="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kx(r){Qo(new qs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;ue(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v_(r)},v=new $S(i,o,l,g);return s1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Qo(new qs("auth-internal",e=>{const t=tr(e.getProvider("auth").getImmediate());return(i=>new qx(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),is(wy,Ey,Gx(r)),is(wy,Ey,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=5*60,Yx=qv("authIdTokenMaxAge")||Qx;let Iy=null;const Jx=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Yx)return;const o=t==null?void 0:t.token;Iy!==o&&(Iy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Xx(r=Xv()){const e=Nf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=i1(r,{popupRedirectResolver:Wx,persistence:[K1,L1,b_]}),i=qv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=Jx(l.toString());k1(t,h,()=>h(t.currentUser)),b1(t,f=>h(f))}}const o=$v("auth");return o&&o1(t,`http://${o}`),t}function Zx(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}WS({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Tn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",Zx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kx("Browser");var Ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ss,j_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function C(){}C.prototype=S.prototype,k.D=S.prototype,k.prototype=new C,k.prototype.constructor=k,k.C=function(P,N,V){for(var A=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)A[qe-2]=arguments[qe];return S.prototype[N].apply(P,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,S,C){C||(C=0);var P=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)P[N]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(N=0;16>N;++N)P[N]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=k.g[0],C=k.g[1],N=k.g[2];var V=k.g[3],A=S+(V^C&(N^V))+P[0]+3614090360&4294967295;S=C+(A<<7&4294967295|A>>>25),A=V+(N^S&(C^N))+P[1]+3905402710&4294967295,V=S+(A<<12&4294967295|A>>>20),A=N+(C^V&(S^C))+P[2]+606105819&4294967295,N=V+(A<<17&4294967295|A>>>15),A=C+(S^N&(V^S))+P[3]+3250441966&4294967295,C=N+(A<<22&4294967295|A>>>10),A=S+(V^C&(N^V))+P[4]+4118548399&4294967295,S=C+(A<<7&4294967295|A>>>25),A=V+(N^S&(C^N))+P[5]+1200080426&4294967295,V=S+(A<<12&4294967295|A>>>20),A=N+(C^V&(S^C))+P[6]+2821735955&4294967295,N=V+(A<<17&4294967295|A>>>15),A=C+(S^N&(V^S))+P[7]+4249261313&4294967295,C=N+(A<<22&4294967295|A>>>10),A=S+(V^C&(N^V))+P[8]+1770035416&4294967295,S=C+(A<<7&4294967295|A>>>25),A=V+(N^S&(C^N))+P[9]+2336552879&4294967295,V=S+(A<<12&4294967295|A>>>20),A=N+(C^V&(S^C))+P[10]+4294925233&4294967295,N=V+(A<<17&4294967295|A>>>15),A=C+(S^N&(V^S))+P[11]+2304563134&4294967295,C=N+(A<<22&4294967295|A>>>10),A=S+(V^C&(N^V))+P[12]+1804603682&4294967295,S=C+(A<<7&4294967295|A>>>25),A=V+(N^S&(C^N))+P[13]+4254626195&4294967295,V=S+(A<<12&4294967295|A>>>20),A=N+(C^V&(S^C))+P[14]+2792965006&4294967295,N=V+(A<<17&4294967295|A>>>15),A=C+(S^N&(V^S))+P[15]+1236535329&4294967295,C=N+(A<<22&4294967295|A>>>10),A=S+(N^V&(C^N))+P[1]+4129170786&4294967295,S=C+(A<<5&4294967295|A>>>27),A=V+(C^N&(S^C))+P[6]+3225465664&4294967295,V=S+(A<<9&4294967295|A>>>23),A=N+(S^C&(V^S))+P[11]+643717713&4294967295,N=V+(A<<14&4294967295|A>>>18),A=C+(V^S&(N^V))+P[0]+3921069994&4294967295,C=N+(A<<20&4294967295|A>>>12),A=S+(N^V&(C^N))+P[5]+3593408605&4294967295,S=C+(A<<5&4294967295|A>>>27),A=V+(C^N&(S^C))+P[10]+38016083&4294967295,V=S+(A<<9&4294967295|A>>>23),A=N+(S^C&(V^S))+P[15]+3634488961&4294967295,N=V+(A<<14&4294967295|A>>>18),A=C+(V^S&(N^V))+P[4]+3889429448&4294967295,C=N+(A<<20&4294967295|A>>>12),A=S+(N^V&(C^N))+P[9]+568446438&4294967295,S=C+(A<<5&4294967295|A>>>27),A=V+(C^N&(S^C))+P[14]+3275163606&4294967295,V=S+(A<<9&4294967295|A>>>23),A=N+(S^C&(V^S))+P[3]+4107603335&4294967295,N=V+(A<<14&4294967295|A>>>18),A=C+(V^S&(N^V))+P[8]+1163531501&4294967295,C=N+(A<<20&4294967295|A>>>12),A=S+(N^V&(C^N))+P[13]+2850285829&4294967295,S=C+(A<<5&4294967295|A>>>27),A=V+(C^N&(S^C))+P[2]+4243563512&4294967295,V=S+(A<<9&4294967295|A>>>23),A=N+(S^C&(V^S))+P[7]+1735328473&4294967295,N=V+(A<<14&4294967295|A>>>18),A=C+(V^S&(N^V))+P[12]+2368359562&4294967295,C=N+(A<<20&4294967295|A>>>12),A=S+(C^N^V)+P[5]+4294588738&4294967295,S=C+(A<<4&4294967295|A>>>28),A=V+(S^C^N)+P[8]+2272392833&4294967295,V=S+(A<<11&4294967295|A>>>21),A=N+(V^S^C)+P[11]+1839030562&4294967295,N=V+(A<<16&4294967295|A>>>16),A=C+(N^V^S)+P[14]+4259657740&4294967295,C=N+(A<<23&4294967295|A>>>9),A=S+(C^N^V)+P[1]+2763975236&4294967295,S=C+(A<<4&4294967295|A>>>28),A=V+(S^C^N)+P[4]+1272893353&4294967295,V=S+(A<<11&4294967295|A>>>21),A=N+(V^S^C)+P[7]+4139469664&4294967295,N=V+(A<<16&4294967295|A>>>16),A=C+(N^V^S)+P[10]+3200236656&4294967295,C=N+(A<<23&4294967295|A>>>9),A=S+(C^N^V)+P[13]+681279174&4294967295,S=C+(A<<4&4294967295|A>>>28),A=V+(S^C^N)+P[0]+3936430074&4294967295,V=S+(A<<11&4294967295|A>>>21),A=N+(V^S^C)+P[3]+3572445317&4294967295,N=V+(A<<16&4294967295|A>>>16),A=C+(N^V^S)+P[6]+76029189&4294967295,C=N+(A<<23&4294967295|A>>>9),A=S+(C^N^V)+P[9]+3654602809&4294967295,S=C+(A<<4&4294967295|A>>>28),A=V+(S^C^N)+P[12]+3873151461&4294967295,V=S+(A<<11&4294967295|A>>>21),A=N+(V^S^C)+P[15]+530742520&4294967295,N=V+(A<<16&4294967295|A>>>16),A=C+(N^V^S)+P[2]+3299628645&4294967295,C=N+(A<<23&4294967295|A>>>9),A=S+(N^(C|~V))+P[0]+4096336452&4294967295,S=C+(A<<6&4294967295|A>>>26),A=V+(C^(S|~N))+P[7]+1126891415&4294967295,V=S+(A<<10&4294967295|A>>>22),A=N+(S^(V|~C))+P[14]+2878612391&4294967295,N=V+(A<<15&4294967295|A>>>17),A=C+(V^(N|~S))+P[5]+4237533241&4294967295,C=N+(A<<21&4294967295|A>>>11),A=S+(N^(C|~V))+P[12]+1700485571&4294967295,S=C+(A<<6&4294967295|A>>>26),A=V+(C^(S|~N))+P[3]+2399980690&4294967295,V=S+(A<<10&4294967295|A>>>22),A=N+(S^(V|~C))+P[10]+4293915773&4294967295,N=V+(A<<15&4294967295|A>>>17),A=C+(V^(N|~S))+P[1]+2240044497&4294967295,C=N+(A<<21&4294967295|A>>>11),A=S+(N^(C|~V))+P[8]+1873313359&4294967295,S=C+(A<<6&4294967295|A>>>26),A=V+(C^(S|~N))+P[15]+4264355552&4294967295,V=S+(A<<10&4294967295|A>>>22),A=N+(S^(V|~C))+P[6]+2734768916&4294967295,N=V+(A<<15&4294967295|A>>>17),A=C+(V^(N|~S))+P[13]+1309151649&4294967295,C=N+(A<<21&4294967295|A>>>11),A=S+(N^(C|~V))+P[4]+4149444226&4294967295,S=C+(A<<6&4294967295|A>>>26),A=V+(C^(S|~N))+P[11]+3174756917&4294967295,V=S+(A<<10&4294967295|A>>>22),A=N+(S^(V|~C))+P[2]+718787259&4294967295,N=V+(A<<15&4294967295|A>>>17),A=C+(V^(N|~S))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+V&4294967295}i.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var C=S-this.blockSize,P=this.B,N=this.h,V=0;V<S;){if(N==0)for(;V<=C;)o(this,k,V),V+=this.blockSize;if(typeof k=="string"){for(;V<S;)if(P[N++]=k.charCodeAt(V++),N==this.blockSize){o(this,P),N=0;break}}else for(;V<S;)if(P[N++]=k[V++],N==this.blockSize){o(this,P),N=0;break}}this.h=N,this.o+=S},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var C=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=C&255,C/=256;for(this.u(k),k=Array(16),S=C=0;4>S;++S)for(var P=0;32>P;P+=8)k[C++]=this.g[S]>>>P&255;return k};function l(k,S){var C=f;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=S(k)}function h(k,S){this.h=S;for(var C=[],P=!0,N=k.length-1;0<=N;N--){var V=k[N]|0;P&&V==S||(C[N]=V,P=!1)}this.g=C}var f={};function g(k){return-128<=k&&128>k?l(k,function(S){return new h([S|0],0>S?-1:0)}):new h([k|0],0>k?-1:0)}function v(k){if(isNaN(k)||!isFinite(k))return I;if(0>k)return M(v(-k));for(var S=[],C=1,P=0;k>=C;P++)S[P]=k/C|0,C*=4294967296;return new h(S,0)}function E(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return M(E(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=v(Math.pow(S,8)),P=I,N=0;N<k.length;N+=8){var V=Math.min(8,k.length-N),A=parseInt(k.substring(N,N+V),S);8>V?(V=v(Math.pow(S,V)),P=P.j(V).add(v(A))):(P=P.j(C),P=P.add(v(A)))}return P}var I=g(0),x=g(1),j=g(16777216);r=h.prototype,r.m=function(){if(H(this))return-M(this).m();for(var k=0,S=1,C=0;C<this.g.length;C++){var P=this.i(C);k+=(0<=P?P:4294967296+P)*S,S*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(q(this))return"0";if(H(this))return"-"+M(this).toString(k);for(var S=v(Math.pow(k,6)),C=this,P="";;){var N=de(C,S).g;C=le(C,N.j(S));var V=((0<C.g.length?C.g[0]:C.h)>>>0).toString(k);if(C=N,q(C))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function q(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function H(k){return k.h==-1}r.l=function(k){return k=le(this,k),H(k)?-1:q(k)?0:1};function M(k){for(var S=k.g.length,C=[],P=0;P<S;P++)C[P]=~k.g[P];return new h(C,~k.h).add(x)}r.abs=function(){return H(this)?M(this):this},r.add=function(k){for(var S=Math.max(this.g.length,k.g.length),C=[],P=0,N=0;N<=S;N++){var V=P+(this.i(N)&65535)+(k.i(N)&65535),A=(V>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);P=A>>>16,V&=65535,A&=65535,C[N]=A<<16|V}return new h(C,C[C.length-1]&-2147483648?-1:0)};function le(k,S){return k.add(M(S))}r.j=function(k){if(q(this)||q(k))return I;if(H(this))return H(k)?M(this).j(M(k)):M(M(this).j(k));if(H(k))return M(this.j(M(k)));if(0>this.l(j)&&0>k.l(j))return v(this.m()*k.m());for(var S=this.g.length+k.g.length,C=[],P=0;P<2*S;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<k.g.length;N++){var V=this.i(P)>>>16,A=this.i(P)&65535,qe=k.i(N)>>>16,Ge=k.i(N)&65535;C[2*P+2*N]+=A*Ge,X(C,2*P+2*N),C[2*P+2*N+1]+=V*Ge,X(C,2*P+2*N+1),C[2*P+2*N+1]+=A*qe,X(C,2*P+2*N+1),C[2*P+2*N+2]+=V*qe,X(C,2*P+2*N+2)}for(P=0;P<S;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=S;P<2*S;P++)C[P]=0;return new h(C,0)};function X(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function Q(k,S){this.g=k,this.h=S}function de(k,S){if(q(S))throw Error("division by zero");if(q(k))return new Q(I,I);if(H(k))return S=de(M(k),S),new Q(M(S.g),M(S.h));if(H(S))return S=de(k,M(S)),new Q(M(S.g),S.h);if(30<k.g.length){if(H(k)||H(S))throw Error("slowDivide_ only works with positive integers.");for(var C=x,P=S;0>=P.l(k);)C=te(C),P=te(P);var N=_e(C,1),V=_e(P,1);for(P=_e(P,2),C=_e(C,2);!q(P);){var A=V.add(P);0>=A.l(k)&&(N=N.add(C),V=A),P=_e(P,1),C=_e(C,1)}return S=le(k,N.j(S)),new Q(N,S)}for(N=I;0<=k.l(S);){for(C=Math.max(1,Math.floor(k.m()/S.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=v(C),A=V.j(S);H(A)||0<A.l(k);)C-=P,V=v(C),A=V.j(S);q(V)&&(V=x),N=N.add(V),k=le(k,A)}return new Q(N,k)}r.A=function(k){return de(this,k).h},r.and=function(k){for(var S=Math.max(this.g.length,k.g.length),C=[],P=0;P<S;P++)C[P]=this.i(P)&k.i(P);return new h(C,this.h&k.h)},r.or=function(k){for(var S=Math.max(this.g.length,k.g.length),C=[],P=0;P<S;P++)C[P]=this.i(P)|k.i(P);return new h(C,this.h|k.h)},r.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),C=[],P=0;P<S;P++)C[P]=this.i(P)^k.i(P);return new h(C,this.h^k.h)};function te(k){for(var S=k.g.length+1,C=[],P=0;P<S;P++)C[P]=k.i(P)<<1|k.i(P-1)>>>31;return new h(C,k.h)}function _e(k,S){var C=S>>5;S%=32;for(var P=k.g.length-C,N=[],V=0;V<P;V++)N[V]=0<S?k.i(V+C)>>>S|k.i(V+C+1)<<32-S:k.i(V+C);return new h(N,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,j_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=E,ss=h}).apply(typeof Ty<"u"?Ty:typeof self<"u"?self:typeof window<"u"?window:{});var Xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var F_,Za,U_,uc,lf,z_,B_,H_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){return u==Array.prototype||u==Object.prototype||(u[p]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xu=="object"&&Xu];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var y=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in y))break e;y=y[F]}u=u[u.length-1],T=y[u],p=p(T),p!=T&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var y=0,T=!1,F={next:function(){if(!T&&y<u.length){var $=y++;return{value:p($,u[$]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,y){return u.call.apply(u.bind,arguments)}function I(u,p,y){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function x(u,p,y){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,x.apply(null,arguments)}function j(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function q(u,p){function y(){}y.prototype=p.prototype,u.aa=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(T,F,$){for(var ae=Array(arguments.length-2),et=2;et<arguments.length;et++)ae[et-2]=arguments[et];return p.prototype[F].apply(T,ae)}}function H(u){const p=u.length;if(0<p){const y=Array(p);for(let T=0;T<p;T++)y[T]=u[T];return y}return[]}function M(u,p){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(g(T)){const F=u.length||0,$=T.length||0;u.length=F+$;for(let ae=0;ae<$;ae++)u[F+ae]=T[ae]}else u.push(T)}}class le{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function X(u){return/^[\s\xa0]*$/.test(u)}function Q(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function de(u){return de[" "](u),u}de[" "]=function(){};var te=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function _e(u,p,y){for(const T in u)p.call(y,u[T],T,u)}function k(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function S(u){const p={};for(const y in u)p[y]=u[y];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,p){let y,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(y in T)u[y]=T[y];for(let $=0;$<C.length;$++)y=C[$],Object.prototype.hasOwnProperty.call(T,y)&&(u[y]=T[y])}}function N(u){var p=1;u=u.split(":");const y=[];for(;0<p&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function V(u){f.setTimeout(()=>{throw u},0)}function A(){var u=oe;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class qe{constructor(){this.h=this.g=null}add(p,y){const T=Ge.get();T.set(p,y),this.h?this.h.next=T:this.g=T,this.h=T}}var Ge=new le(()=>new tt,u=>u.reset());class tt{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,W=!1,oe=new qe,ie=()=>{const u=f.Promise.resolve(void 0);Z=()=>{u.then(O)}};var O=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(y){V(y)}var p=Ge;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}W=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};f.addEventListener("test",y,p),f.removeEventListener("test",y,p)}catch{}return u}();function be(u,p){if(pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(te){e:{try{de(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ae[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&be.aa.h.call(this)}}q(be,pe);var Ae={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function Ee(u,p,y,T,F){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!T,this.ha=F,this.key=++Ne,this.da=this.fa=!1}function st(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function un(u){this.src=u,this.g={},this.h=0}un.prototype.add=function(u,p,y,T,F){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var ae=Sn(u,p,T,F);return-1<ae?(p=u[ae],y||(p.fa=!1)):(p=new Ee(p,this.src,$,!!T,F),p.fa=y,u.push(p)),p};function nn(u,p){var y=p.type;if(y in u.g){var T=u.g[y],F=Array.prototype.indexOf.call(T,p,void 0),$;($=0<=F)&&Array.prototype.splice.call(T,F,1),$&&(st(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Sn(u,p,y,T){for(var F=0;F<u.length;++F){var $=u[F];if(!$.da&&$.listener==p&&$.capture==!!y&&$.ha==T)return F}return-1}var xn="closure_lm_"+(1e6*Math.random()|0),_r={};function Cn(u,p,y,T,F){if(Array.isArray(p)){for(var $=0;$<p.length;$++)Cn(u,p[$],y,T,F);return null}return y=Tr(y),u&&u[Le]?u.K(p,y,v(T)?!!T.capture:!1,F):wr(u,p,y,!1,T,F)}function wr(u,p,y,T,F,$){if(!p)throw Error("Invalid event type");var ae=v(F)?!!F.capture:!!F,et=Er(u);if(et||(u[xn]=et=new un(u)),y=et.add(p,y,T,ae,$),y.proxy)return y;if(T=nr(),y.proxy=T,T.src=u,T.listener=y,u.addEventListener)we||(F=ae),F===void 0&&(F=!1),u.addEventListener(p.toString(),T,F);else if(u.attachEvent)u.attachEvent(Qe(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function nr(){function u(y){return p.call(u.src,u.listener,y)}const p=Rn;return u}function Fn(u,p,y,T,F){if(Array.isArray(p))for(var $=0;$<p.length;$++)Fn(u,p[$],y,T,F);else T=v(T)?!!T.capture:!!T,y=Tr(y),u&&u[Le]?(u=u.i,p=String(p).toString(),p in u.g&&($=u.g[p],y=Sn($,y,T,F),-1<y&&(st($[y]),Array.prototype.splice.call($,y,1),$.length==0&&(delete u.g[p],u.h--)))):u&&(u=Er(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Sn(p,y,T,F)),(y=-1<u?p[u]:null)&&Ie(y))}function Ie(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Le])nn(p.i,u);else{var y=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(y,T,u.capture):p.detachEvent?p.detachEvent(Qe(y),T):p.addListener&&p.removeListener&&p.removeListener(T),(y=Er(p))?(nn(y,u),y.h==0&&(y.src=null,p[xn]=null)):st(u)}}}function Qe(u){return u in _r?_r[u]:_r[u]="on"+u}function Rn(u,p){if(u.da)u=!0;else{p=new be(p,this);var y=u.listener,T=u.ha||u.src;u.fa&&Ie(u),u=y.call(T,p)}return u}function Er(u){return u=u[xn],u instanceof un?u:null}var Ir="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tr(u){return typeof u=="function"?u:(u[Ir]||(u[Ir]=function(p){return u.handleEvent(p)}),u[Ir])}function yt(){G.call(this),this.i=new un(this),this.M=this,this.F=null}q(yt,G),yt.prototype[Le]=!0,yt.prototype.removeEventListener=function(u,p,y,T){Fn(this,u,p,y,T)};function ct(u,p){var y,T=u.F;if(T)for(y=[];T;T=T.F)y.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new pe(p,u);else if(p instanceof pe)p.target=p.target||u;else{var F=p;p=new pe(T,u),P(p,F)}if(F=!0,y)for(var $=y.length-1;0<=$;$--){var ae=p.g=y[$];F=Un(ae,T,!0,p)&&F}if(ae=p.g=u,F=Un(ae,T,!0,p)&&F,F=Un(ae,T,!1,p)&&F,y)for($=0;$<y.length;$++)ae=p.g=y[$],F=Un(ae,T,!1,p)&&F}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var y=u.g[p],T=0;T<y.length;T++)st(y[T]);delete u.g[p],u.h--}}this.F=null},yt.prototype.K=function(u,p,y,T){return this.i.add(String(u),p,!1,y,T)},yt.prototype.L=function(u,p,y,T){return this.i.add(String(u),p,!0,y,T)};function Un(u,p,y,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,$=0;$<p.length;++$){var ae=p[$];if(ae&&!ae.da&&ae.capture==y){var et=ae.listener,bt=ae.ha||ae.src;ae.fa&&nn(u.i,ae),F=et.call(bt,T)!==!1&&F}}return F&&!T.defaultPrevented}function qr(u,p,y){if(typeof u=="function")y&&(u=x(u,y));else if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function An(u){u.g=qr(()=>{u.g=null,u.i&&(u.i=!1,An(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class zn extends G{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:An(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(u){G.call(this),this.h=u,this.g={}}q(Sr,G);var xr=[];function Ei(u){_e(u.g,function(p,y){this.g.hasOwnProperty(y)&&Ie(p)},u),u.g={}}Sr.prototype.N=function(){Sr.aa.N.call(this),Ei(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gr=f.JSON.stringify,rr=f.JSON.parse,Kr=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Cr(){}Cr.prototype.h=null;function Qr(u){return u.h||(u.h=u.i())}function Ii(){}var cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bn(){pe.call(this,"d")}q(Bn,pe);function Ti(){pe.call(this,"c")}q(Ti,pe);var Hn={},_s=null;function Rr(){return _s=_s||new yt}Hn.La="serverreachability";function ws(u){pe.call(this,Hn.La,u)}q(ws,pe);function ir(u){const p=Rr();ct(p,new ws(p))}Hn.STAT_EVENT="statevent";function Es(u,p){pe.call(this,Hn.STAT_EVENT,u),this.stat=p}q(Es,pe);function ft(u){const p=Rr();ct(p,new Es(p,u))}Hn.Ma="timingevent";function Y(u,p){pe.call(this,Hn.Ma,u),this.size=p}q(Y,pe);function Pe(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function xe(){this.g=!0}xe.prototype.xa=function(){this.g=!1};function Te(u,p,y,T,F,$){u.info(function(){if(u.g)if($)for(var ae="",et=$.split("&"),bt=0;bt<et.length;bt++){var He=et[bt].split("=");if(1<He.length){var Vt=He[0];He=He[1];var St=Vt.split("_");ae=2<=St.length&&St[1]=="type"?ae+(Vt+"="+He+"&"):ae+(Vt+"=redacted&")}}else ae=null;else ae=$;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+p+`
`+y+`
`+ae})}function Fe(u,p,y,T,F,$,ae){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+p+`
`+y+`
`+$+" "+ae})}function Ze(u,p,y,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ye(u,y)+(T?" "+T:"")})}function vt(u,p){u.info(function(){return"TIMEOUT: "+p})}xe.prototype.info=function(){};function Ye(u,p){if(!u.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var T=y[u];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var $=F[0];if($!="noop"&&$!="stop"&&$!="close")for(var ae=1;ae<F.length;ae++)F[ae]=""}}}}return Gr(y)}catch{return p}}var Je={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dn;function Yr(){}q(Yr,Cr),Yr.prototype.g=function(){return new XMLHttpRequest},Yr.prototype.i=function(){return{}},dn=new Yr;function Pn(u,p,y,T){this.j=u,this.i=p,this.l=y,this.R=T||1,this.U=new Sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vl}function Vl(){this.i=null,this.g="",this.h=!1}var fa={},eo={};function to(u,p,y){u.L=1,u.v=Ai(kn(p)),u.m=y,u.P=!0,pa(u,null)}function pa(u,p){u.F=Date.now(),rt(u),u.A=kn(u.v);var y=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),bi(y.i,"t",T),u.C=0,y=u.j.J,u.h=new Vl,u.g=Zl(u.j,y?p:null,!u.m),0<u.O&&(u.M=new zn(x(u.Y,u,u.g),u.O)),p=u.U,y=u.g,T=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(xr[0]=F.toString()),F=xr);for(var $=0;$<F.length;$++){var ae=Cn(y,F[$],T||p.handleEvent,!1,p.h||p);if(!ae)break;p.g[ae.key]=ae}p=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),ir(),Te(u.i,u.u,u.A,u.l,u.R,u.m)}Pn.prototype.ca=function(u){u=u.target;const p=this.M;p&&pn(u)==3?p.j():this.Y(u)},Pn.prototype.Y=function(u){try{if(u==this.g)e:{const St=pn(this.g);var p=this.g.Ba();const qn=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||wa(this.g)))){this.J||St!=4||p==7||(p==8||0>=qn?ir(3):ir(2)),Is(this);var y=this.g.Z();this.X=y;t:if(Ll(this)){var T=wa(this.g);u="";var F=T.length,$=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$n(this),Si(this);var ae="";break t}this.h.i=new f.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!($&&p==F-1)});T.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=y==200,Fe(this.i,this.u,this.A,this.l,this.R,St,y),this.o){if(this.T&&!this.K){t:{if(this.g){var et,bt=this.g;if((et=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(et)){var He=et;break t}}He=null}if(y=He)Ze(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ma(this,y);else{this.o=!1,this.s=3,ft(12),$n(this),Si(this);break e}}if(this.P){y=!0;let Dn;for(;!this.J&&this.C<ae.length;)if(Dn=ah(this,ae),Dn==eo){St==4&&(this.s=4,ft(14),y=!1),Ze(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==fa){this.s=4,ft(15),Ze(this.i,this.l,ae,"[Invalid Chunk]"),y=!1;break}else Ze(this.i,this.l,Dn,null),ma(this,Dn);if(Ll(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||ae.length!=0||this.h.h||(this.s=1,ft(16),y=!1),this.o=this.o&&y,!y)Ze(this.i,this.l,ae,"[Invalid Chunked Response]"),$n(this),Si(this);else if(0<ae.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Ia(Vt),Vt.M=!0,ft(11))}}else Ze(this.i,this.l,ae,null),ma(this,ae);St==4&&$n(this),this.o&&!this.J&&(St==4?fo(this.j,this):(this.o=!1,rt(this)))}else ao(this.g),y==400&&0<ae.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),$n(this),Si(this)}}}catch{}finally{}};function Ll(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ah(u,p){var y=u.C,T=p.indexOf(`
`,y);return T==-1?eo:(y=Number(p.substring(y,T)),isNaN(y)?fa:(T+=1,T+y>p.length?eo:(p=p.slice(T,T+y),u.C=T+y,p)))}Pn.prototype.cancel=function(){this.J=!0,$n(this)};function rt(u){u.S=Date.now()+u.I,Ml(u,u.I)}function Ml(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Pe(x(u.ba,u),p)}function Is(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Pn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(vt(this.i,this.A),this.L!=2&&(ir(),ft(17)),$n(this),this.s=2,Si(this)):Ml(this,this.S-u)};function Si(u){u.j.G==0||u.J||fo(u.j,u)}function $n(u){Is(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Ei(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function ma(u,p){try{var y=u.j;if(y.G!=0&&(y.g==u||rn(y.h,u))){if(!u.K&&rn(y.h,u)&&y.G==3){try{var T=y.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)ho(y),ur(y);else break e;co(y),ft(18)}}else y.za=F[1],0<y.za-y.T&&37500>F[2]&&y.F&&y.v==0&&!y.C&&(y.C=Pe(x(y.Za,y),6e3));if(1>=Fl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ti(y,11)}else if((u.K||y.g==u)&&ho(y),!X(p))for(F=y.Da.g.parse(p),p=0;p<F.length;p++){let He=F[p];if(y.T=He[0],He=He[1],y.G==2)if(He[0]=="c"){y.K=He[1],y.ia=He[2];const Vt=He[3];Vt!=null&&(y.la=Vt,y.j.info("VER="+y.la));const St=He[4];St!=null&&(y.Aa=St,y.j.info("SVER="+y.Aa));const qn=He[5];qn!=null&&typeof qn=="number"&&0<qn&&(T=1.5*qn,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const Dn=u.g;if(Dn){const Ps=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ps){var $=T.h;$.g||Ps.indexOf("spdy")==-1&&Ps.indexOf("quic")==-1&&Ps.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ga($,$.h),$.h=null))}if(T.D){const mo=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;mo&&(T.ya=mo,nt(T.I,T.D,mo))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var ae=u;if(T.qa=Xl(T,T.J?T.ia:null,T.W),ae.K){Ul(T.h,ae);var et=ae,bt=T.L;bt&&(et.I=bt),et.B&&(Is(et),rt(et)),T.g=ae}else As(T);0<y.i.length&&kr(y)}else He[0]!="stop"&&He[0]!="close"||ti(y,7);else y.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?ti(y,7):zt(y):He[0]!="noop"&&y.l&&y.l.ta(He),y.v=0)}}ir(4)}catch{}}var jl=class{constructor(u,p){this.g=u,this.map=p}};function Ts(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Fl(u){return u.h?1:u.g?u.g.size:0}function rn(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function ga(u,p){u.g?u.g.add(p):u.h=p}function Ul(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Ts.prototype.cancel=function(){if(this.i=zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function zl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.D);return p}return H(u.i)}function no(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],y=u.length,T=0;T<y;T++)p.push(u[T]);return p}p=[],y=0;for(T in u)p[y++]=u[T];return p}function ro(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var y=0;y<u;y++)p.push(y);return p}p=[],y=0;for(const T in u)p[y++]=T;return p}}}function xi(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var y=ro(u),T=no(u),F=T.length,$=0;$<F;$++)p.call(void 0,T[$],y&&y[$],u)}var Ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lh(u,p){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var T=u[y].indexOf("="),F=null;if(0<=T){var $=u[y].substring(0,T);F=u[y].substring(T+1)}else $=u[y];p($,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Jr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Jr){this.h=u.h,xs(this,u.j),this.o=u.o,this.g=u.g,Ci(this,u.s),this.l=u.l;var p=u.i,y=new Ar;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),Ri(this,y),this.m=u.m}else u&&(p=String(u).match(Ss))?(this.h=!1,xs(this,p[1]||"",!0),this.o=Be(p[2]||""),this.g=Be(p[3]||"",!0),Ci(this,p[4]),this.l=Be(p[5]||"",!0),Ri(this,p[6]||"",!0),this.m=Be(p[7]||"")):(this.h=!1,this.i=new Ar(null,this.h))}Jr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Pi(p,io,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Pi(p,io,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Pi(y,y.charAt(0)=="/"?$l:Hl,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Pi(y,ya)),u.join("")};function kn(u){return new Jr(u)}function xs(u,p,y){u.j=y?Be(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ci(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Ri(u,p,y){p instanceof Ar?(u.i=p,Pr(u.i,u.h)):(y||(p=Pi(p,Wl)),u.i=new Ar(p,u.h))}function nt(u,p,y){u.i.set(p,y)}function Ai(u){return nt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Be(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Pi(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,Bl),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Bl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var io=/[#\/\?@]/g,Hl=/[#\?:]/g,$l=/[#\?]/g,Wl=/[#\?@]/g,ya=/#/g;function Ar(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Ut(u){u.g||(u.g=new Map,u.h=0,u.i&&lh(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=Ar.prototype,r.add=function(u,p){Ut(this),this.i=null,u=Wn(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function sr(u,p){Ut(u),p=Wn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function or(u,p){return Ut(u),p=Wn(u,p),u.g.has(p)}r.forEach=function(u,p){Ut(this),this.g.forEach(function(y,T){y.forEach(function(F){u.call(p,F,T,this)},this)},this)},r.na=function(){Ut(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let T=0;T<p.length;T++){const F=u[T];for(let $=0;$<F.length;$++)y.push(p[T])}return y},r.V=function(u){Ut(this);let p=[];if(typeof u=="string")or(this,u)&&(p=p.concat(this.g.get(Wn(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)p=p.concat(u[y])}return p},r.set=function(u,p){return Ut(this),this.i=null,u=Wn(this,u),or(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function bi(u,p,y){sr(u,p),0<y.length&&(u.i=null,u.g.set(Wn(u,p),H(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var T=p[y];const $=encodeURIComponent(String(T)),ae=this.V(T);for(T=0;T<ae.length;T++){var F=$;ae[T]!==""&&(F+="="+encodeURIComponent(String(ae[T]))),u.push(F)}}return this.i=u.join("&")};function Wn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Pr(u,p){p&&!u.j&&(Ut(u),u.i=null,u.g.forEach(function(y,T){var F=T.toLowerCase();T!=F&&(sr(this,T),bi(this,F,y))},u)),u.j=p}function uh(u,p){const y=new xe;if(f.Image){const T=new Image;T.onload=j(fn,y,"TestLoadImage: loaded",!0,p,T),T.onerror=j(fn,y,"TestLoadImage: error",!1,p,T),T.onabort=j(fn,y,"TestLoadImage: abort",!1,p,T),T.ontimeout=j(fn,y,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function ql(u,p){const y=new xe,T=new AbortController,F=setTimeout(()=>{T.abort(),fn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then($=>{clearTimeout(F),$.ok?fn(y,"TestPingServer: ok",!0,p):fn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),fn(y,"TestPingServer: error",!1,p)})}function fn(u,p,y,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(y)}catch{}}function ch(){this.g=new Kr}function Gl(u,p,y){const T=y||"";try{xi(u,function(F,$){let ae=F;v(F)&&(ae=Gr(F)),p.push(T+$+"="+encodeURIComponent(ae))})}catch(F){throw p.push(T+"type="+encodeURIComponent("_badmap")),F}}function Xr(u){this.l=u.Ub||null,this.j=u.eb||!1}q(Xr,Cr),Xr.prototype.g=function(){return new Cs(this.l,this.j)},Xr.prototype.i=function(u){return function(){return u}}({});function Cs(u,p){yt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Cs,yt),r=Cs.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,lr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ar(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,lr(this)),this.g&&(this.readyState=3,lr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?ar(this):lr(this),this.readyState==3&&Kl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,ar(this))},r.Qa=function(u){this.g&&(this.response=u,ar(this))},r.ga=function(){this.g&&ar(this)};function ar(u){u.readyState=4,u.l=null,u.j=null,u.v=null,lr(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function lr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Zr(u){let p="";return _e(u,function(y,T){p+=T,p+=":",p+=y,p+=`\r
`}),p}function ki(u,p,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=Zr(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):nt(u,p,y))}function ht(u){yt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(ht,yt);var hh=/^https?$/i,va=["POST","PUT"];r=ht.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dn.g(),this.v=this.o?Qr(this.o):Qr(dn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch($){Rs(this,$);return}if(u=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)y.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())y.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(va,p,void 0))||T||F||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ae]of y)this.g.setRequestHeader($,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oo(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Rs(this,$)}};function Rs(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,so(u),Nn(u)}function so(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ct(this,"complete"),ct(this,"abort"),Nn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nn(this,!0)),ht.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?_a(this):this.bb())},r.bb=function(){_a(this)};function _a(u){if(u.h&&typeof h<"u"&&(!u.v[1]||pn(u)!=4||u.Z()!=2)){if(u.u&&pn(u)==4)qr(u.Ea,0,u);else if(ct(u,"readystatechange"),pn(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var T;if(T=ae===0){var F=String(u.D).match(Ss)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),T=!hh.test(F?F.toLowerCase():"")}y=T}if(y)ct(u,"complete"),ct(u,"success");else{u.m=6;try{var $=2<pn(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",so(u)}}finally{Nn(u)}}}}function Nn(u,p){if(u.g){oo(u);const y=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ct(u,"ready");try{y.onreadystatechange=T}catch{}}}function oo(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function pn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),rr(p)}};function wa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ao(u){const p={};u=(u.g&&2<=pn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(X(u[T]))continue;var y=N(u[T]);const F=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const $=p[F]||[];p[F]=$,$.push(y)}k(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function Ea(u){this.Aa=0,this.i=[],this.j=new xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=br("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=br("baseRetryDelayMs",5e3,u),this.cb=br("retryDelaySeedMs",1e4,u),this.Wa=br("forwardChannelMaxRetries",2,u),this.wa=br("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ts(u&&u.concurrentRequestLimit),this.Da=new ch,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ea.prototype,r.la=8,r.G=1,r.connect=function(u,p,y,T){ft(0),this.W=u,this.H=p||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=Xl(this,null,this.W),kr(this)};function zt(u){if(lo(u),u.G==3){var p=u.U++,y=kn(u.I);if(nt(y,"SID",u.K),nt(y,"RID",p),nt(y,"TYPE","terminate"),ei(u,y),p=new Pn(u,u.j,p),p.L=2,p.v=Ai(kn(y)),y=!1,f.navigator&&f.navigator.sendBeacon)try{y=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&f.Image&&(new Image().src=p.v,y=!0),y||(p.g=Zl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),rt(p)}Jl(u)}function ur(u){u.g&&(Ia(u),u.g.cancel(),u.g=null)}function lo(u){ur(u),u.u&&(f.clearTimeout(u.u),u.u=null),ho(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function kr(u){if(!bn(u.h)&&!u.s){u.s=!0;var p=u.Ga;Z||ie(),W||(Z(),W=!0),oe.add(p,u),u.B=0}}function dh(u,p){return Fl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Pe(x(u.Ga,u,p),Yl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Pn(this,this.j,u);let $=this.o;if(this.S&&($?($=S($),P($,this.S)):$=this.S),this.m!==null||this.O||(F.H=$,$=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Ni(this,F,p),y=kn(this.I),nt(y,"RID",u),nt(y,"CVER",22),this.D&&nt(y,"X-HTTP-Session-Id",this.D),ei(this,y),$&&(this.O?p="headers="+encodeURIComponent(String(Zr($)))+"&"+p:this.m&&ki(y,this.m,$)),ga(this.h,F),this.Ua&&nt(y,"TYPE","init"),this.P?(nt(y,"$req",p),nt(y,"SID","null"),F.T=!0,to(F,y,null)):to(F,y,p),this.G=2}}else this.G==3&&(u?uo(this,u):this.i.length==0||bn(this.h)||uo(this))};function uo(u,p){var y;p?y=p.l:y=u.U++;const T=kn(u.I);nt(T,"SID",u.K),nt(T,"RID",y),nt(T,"AID",u.T),ei(u,T),u.m&&u.o&&ki(T,u.m,u.o),y=new Pn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Ni(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ga(u.h,y),to(y,T,p)}function ei(u,p){u.H&&_e(u.H,function(y,T){nt(p,T,y)}),u.l&&xi({},function(y,T){nt(p,T,y)})}function Ni(u,p,y){y=Math.min(u.i.length,y);var T=u.l?x(u.l.Na,u.l,u):null;e:{var F=u.i;let $=-1;for(;;){const ae=["count="+y];$==-1?0<y?($=F[0].g,ae.push("ofs="+$)):$=0:ae.push("ofs="+$);let et=!0;for(let bt=0;bt<y;bt++){let He=F[bt].g;const Vt=F[bt].map;if(He-=$,0>He)$=Math.max(0,F[bt].g-100),et=!1;else try{Gl(Vt,ae,"req"+He+"_")}catch{T&&T(Vt)}}if(et){T=ae.join("&");break e}}}return u=u.i.splice(0,y),p.D=u,T}function As(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Z||ie(),W||(Z(),W=!0),oe.add(p,u),u.v=0}}function co(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Pe(x(u.Fa,u),Yl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Pe(x(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),ur(this),Ql(this))};function Ia(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Ql(u){u.g=new Pn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=kn(u.qa);nt(p,"RID","rpc"),nt(p,"SID",u.K),nt(p,"AID",u.T),nt(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&nt(p,"TO",u.ja),nt(p,"TYPE","xmlhttp"),ei(u,p),u.m&&u.o&&ki(p,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Ai(kn(p)),y.m=null,y.P=!0,pa(y,u)}r.Za=function(){this.C!=null&&(this.C=null,ur(this),co(this),ft(19))};function ho(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function fo(u,p){var y=null;if(u.g==p){ho(u),Ia(u),u.g=null;var T=2}else if(rn(u.h,p))y=p.D,Ul(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;T=Rr(),ct(T,new Y(T,y)),kr(u)}else As(u);else if(F=p.s,F==3||F==0&&0<p.X||!(T==1&&dh(u,p)||T==2&&co(u)))switch(y&&0<y.length&&(p=u.h,p.i=p.i.concat(y)),F){case 1:ti(u,5);break;case 4:ti(u,10);break;case 3:ti(u,6);break;default:ti(u,2)}}}function Yl(u,p){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*p}function ti(u,p){if(u.j.info("Error code "+p),p==2){var y=x(u.fb,u),T=u.Xa;const F=!T;T=new Jr(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||xs(T,"https"),Ai(T),F?uh(T.toString(),y):ql(T.toString(),y)}else ft(2);u.G=0,u.l&&u.l.sa(p),Jl(u),lo(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Jl(u){if(u.G=0,u.ka=[],u.l){const p=zl(u.h);(p.length!=0||u.i.length!=0)&&(M(u.ka,p),M(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function Xl(u,p,y){var T=y instanceof Jr?kn(y):new Jr(y);if(T.g!="")p&&(T.g=p+"."+T.g),Ci(T,T.s);else{var F=f.location;T=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var $=new Jr(null);T&&xs($,T),p&&($.g=p),F&&Ci($,F),y&&($.l=y),T=$}return y=u.D,p=u.ya,y&&p&&nt(T,y,p),nt(T,"VER",u.la),ei(u,T),T}function Zl(u,p,y){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new ht(new Xr({eb:y})):new ht(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ta(){}r=Ta.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function po(){}po.prototype.g=function(u,p){return new sn(u,p)};function sn(u,p){yt.call(this),this.g=new Ea(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!X(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!X(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Nr(this)}q(sn,yt),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){zt(this.g)},sn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Gr(u),u=y);p.i.push(new jl(p.Ya++,u)),p.G==3&&kr(p)},sn.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,sn.aa.N.call(this)};function eu(u){Bn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}q(eu,Bn);function tu(){Ti.call(this),this.status=1}q(tu,Ti);function Nr(u){this.g=u}q(Nr,Ta),Nr.prototype.ua=function(){ct(this.g,"a")},Nr.prototype.ta=function(u){ct(this.g,new eu(u))},Nr.prototype.sa=function(u){ct(this.g,new tu)},Nr.prototype.ra=function(){ct(this.g,"b")},po.prototype.createWebChannel=po.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,H_=function(){return new po},B_=function(){return Rr()},z_=Hn,lf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Je.NO_ERROR=0,Je.TIMEOUT=8,Je.HTTP_ERROR=6,uc=Je,hn.COMPLETE="complete",U_=hn,Ii.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Za=Ii,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,F_=ht}).apply(typeof Xu<"u"?Xu:typeof self<"u"?self:typeof window<"u"?window:{});const Sy="@firebase/firestore",xy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new bf("@firebase/firestore");function jo(){return Gs.logLevel}function he(r,...e){if(Gs.logLevel<=Ue.DEBUG){const t=e.map(qf);Gs.debug(`Firestore (${ua}): ${r}`,...t)}}function yi(r,...e){if(Gs.logLevel<=Ue.ERROR){const t=e.map(qf);Gs.error(`Firestore (${ua}): ${r}`,...t)}}function cs(r,...e){if(Gs.logLevel<=Ue.WARN){const t=e.map(qf);Gs.warn(`Firestore (${ua}): ${r}`,...t)}}function qf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,$_(r,i,t)}function $_(r,e,t){let i=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw yi(i),new Error(i)}function Xe(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||$_(e,o,i)}function Ve(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends _i{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xt.UNAUTHENTICATED))}shutdown(){}}class tC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nC{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new os;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new os,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},f=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new os)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Xe(typeof i.accessToken=="string",31837,{l:i}),new W_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class rC{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iC{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new rC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const i=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=oC(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Me(r,e){return r<e?-1:r>e?1:0}function uf(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Me(i,o);{const l=q_(),h=aC(l.encode(Ry(r,t)),l.encode(Ry(e,t)));return h!==0?h:Me(i,o)}}t+=i>65535?2:1}return Me(r.length,e.length)}function Ry(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function aC(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Me(r[t],e[t]);return Me(r.length,e.length)}function Yo(r,e,t){return r.length===e.length&&r.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="__name__";class Mr{constructor(e,t,i){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ke(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Mr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Me(e.length,t.length)}static compareSegments(e,t){const i=Mr.isNumericId(e),o=Mr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Mr.extractNumericId(e).compare(Mr.extractNumericId(t)):uf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ss.fromString(e.substring(4,e.length-2))}}class lt extends Mr{construct(e,t,i){return new lt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new lt(t)}static emptyPath(){return new lt([])}}const lC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Mr{construct(e,t,i){return new Wt(e,t,i)}static isValidIdentifier(e){return lC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ay}static keyField(){return new Wt([Ay])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ye(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ye(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ye(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(t)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(lt.fromString(e))}static fromName(e){return new Se(lt.fromString(e).popFirst(5))}static empty(){return new Se(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(r,e,t){if(!t)throw new ye(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function uC(r,e,t,i){if(e===!0&&i===!0)throw new ye(J.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Py(r){if(!Se.isDocumentKey(r))throw new ye(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function by(r){if(Se.isDocumentKey(r))throw new ye(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function K_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Kf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ke(12329,{type:typeof r})}function jr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ye(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kf(r);throw new ye(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(r,e){const t={typeString:r};return e&&(t.value=e),t}function Pl(r,e){if(!K_(r))throw new ye(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ye(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=-62135596800,Ny=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ny);return new ut(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ky)throw new ye(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ny}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pl(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ky;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:At("string",ut._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new ut(0,0))}static max(){return new Oe(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=-1;function cC(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(i===1e9?new ut(t+1,0):new ut(t,i));return new hs(o,Se.empty(),e)}function hC(r){return new hs(r.readTime,r.key,_l)}class hs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new hs(Oe.min(),Se.empty(),_l)}static max(){return new hs(Oe.max(),Se.empty(),_l)}}function dC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(r.documentKey,e.documentKey),t!==0?t:Me(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==fC)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,i)=>{t(e)})}static reject(e){return new K((t,i)=>{i(e)})}static waitFor(e){return new K((t,i)=>{let o=0,l=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++l,h&&l===o&&t()},g=>i(g))}),h=!0,l===o&&t()})}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next(o=>o?K.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new K((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next(E=>{h[v]=E,++f,f===l&&i(h)},E=>o(E))}})}static doWhile(e,t){return new K((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function mC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ha(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}zc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=-1;function Bc(r){return r==null}function Sc(r){return r===0&&1/r==-1/0}function gC(r){return typeof r=="number"&&Number.isInteger(r)&&!Sc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="";function yC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Dy(e)),e=vC(r.get(t),e);return Dy(e)}function vC(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Q_:t+="";break;default:t+=l}}return t}function Dy(r){return r+Q_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ys(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Y_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zu(this.root,e,this.comparator,!0)}}class Zu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??$t.RED,this.left=o??$t.EMPTY,this.right=l??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new $t(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vy(this.data.getIterator())}getIteratorFrom(e){return new Vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class Vy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Mn([])}unionWith(e){let t=new Ot(Wt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new J_("Invalid base64 string: "+l):l}}(e);return new qt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const _C=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(r){if(Xe(!!r,39018),typeof r=="string"){let e=0;const t=_C.exec(r);if(Xe(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Et(r.seconds),nanos:Et(r.nanos)}}function Et(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function fs(r){return typeof r=="string"?qt.fromBase64String(r):qt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="server_timestamp",Z_="__type__",e0="__previous_value__",t0="__local_write_time__";function Yf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Z_])===null||t===void 0?void 0:t.stringValue)===X_}function Hc(r){const e=r.mapValue.fields[e0];return Yf(e)?Hc(e):e}function wl(r){const e=ds(r.mapValue.fields[t0].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t,i,o,l,h,f,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=E}}const xc="(default)";class El{constructor(e,t){this.projectId=e,this.database=t||xc}static empty(){return new El("","")}get isDefaultDatabase(){return this.database===xc}isEqual(e){return e instanceof El&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="__type__",EC="__max__",ec={mapValue:{}},r0="__vector__",Cc="value";function ps(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Yf(r)?4:TC(r)?9007199254740991:IC(r)?10:11:ke(28295,{value:r})}function $r(r,e){if(r===e)return!0;const t=ps(r);if(t!==ps(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return wl(r).isEqual(wl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=ds(o.timestampValue),f=ds(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return fs(o.bytesValue).isEqual(fs(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return Et(o.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(o.geoPointValue.longitude)===Et(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Et(o.integerValue)===Et(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=Et(o.doubleValue),f=Et(l.doubleValue);return h===f?Sc(h)===Sc(f):isNaN(h)&&isNaN(f)}return!1}(r,e);case 9:return Yo(r.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Oy(h)!==Oy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!$r(h[g],f[g])))return!1;return!0}(r,e);default:return ke(52216,{left:r})}}function Il(r,e){return(r.values||[]).find(t=>$r(t,e))!==void 0}function Jo(r,e){if(r===e)return 0;const t=ps(r),i=ps(e);if(t!==i)return Me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return function(l,h){const f=Et(l.integerValue||l.doubleValue),g=Et(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(r,e);case 3:return Ly(r.timestampValue,e.timestampValue);case 4:return Ly(wl(r),wl(e));case 5:return uf(r.stringValue,e.stringValue);case 6:return function(l,h){const f=fs(l),g=fs(h);return f.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const f=l.split("/"),g=h.split("/");for(let v=0;v<f.length&&v<g.length;v++){const E=Me(f[v],g[v]);if(E!==0)return E}return Me(f.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const f=Me(Et(l.latitude),Et(h.latitude));return f!==0?f:Me(Et(l.longitude),Et(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return My(r.arrayValue,e.arrayValue);case 10:return function(l,h){var f,g,v,E;const I=l.fields||{},x=h.fields||{},j=(f=I[Cc])===null||f===void 0?void 0:f.arrayValue,q=(g=x[Cc])===null||g===void 0?void 0:g.arrayValue,H=Me(((v=j==null?void 0:j.values)===null||v===void 0?void 0:v.length)||0,((E=q==null?void 0:q.values)===null||E===void 0?void 0:E.length)||0);return H!==0?H:My(j,q)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===ec.mapValue&&h===ec.mapValue)return 0;if(l===ec.mapValue)return 1;if(h===ec.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),v=h.fields||{},E=Object.keys(v);g.sort(),E.sort();for(let I=0;I<g.length&&I<E.length;++I){const x=uf(g[I],E[I]);if(x!==0)return x;const j=Jo(f[g[I]],v[E[I]]);if(j!==0)return j}return Me(g.length,E.length)}(r.mapValue,e.mapValue);default:throw ke(23264,{le:t})}}function Ly(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const t=ds(r),i=ds(e),o=Me(t.seconds,i.seconds);return o!==0?o:Me(t.nanos,i.nanos)}function My(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Jo(t[o],i[o]);if(l)return l}return Me(t.length,i.length)}function Xo(r){return cf(r)}function cf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const i=ds(t);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return fs(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Se.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=cf(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${cf(t.fields[h])}`;return o+"}"}(r.mapValue):ke(61005,{value:r})}function cc(r){switch(ps(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hc(r);return e?16+cc(e):16;case 5:return 2*r.stringValue.length;case 6:return fs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+cc(l),0)}(r.arrayValue);case 10:case 11:return function(i){let o=0;return ys(i.fields,(l,h)=>{o+=l.length+cc(h)}),o}(r.mapValue);default:throw ke(13486,{value:r})}}function hf(r){return!!r&&"integerValue"in r}function Jf(r){return!!r&&"arrayValue"in r}function jy(r){return!!r&&"nullValue"in r}function Fy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function hc(r){return!!r&&"mapValue"in r}function IC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[n0])===null||t===void 0?void 0:t.stringValue)===r0}function ul(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ys(r.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ul(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ul(r.arrayValue.values[t]);return e}return Object.assign({},r)}function TC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===EC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!hc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(t)}setAll(e){let t=Wt.emptyPath(),i={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=ul(h):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());hc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];hc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ys(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new In(ul(this.value))}}function i0(r){const e=[];return ys(r.fields,(t,i)=>{const o=new Wt([t]);if(hc(i)){const l=i0(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Zt(e,0,Oe.min(),Oe.min(),Oe.min(),In.empty(),0)}static newFoundDocument(e,t,i,o){return new Zt(e,1,t,Oe.min(),i,o,0)}static newNoDocument(e,t){return new Zt(e,2,t,Oe.min(),Oe.min(),In.empty(),0)}static newUnknownDocument(e,t){return new Zt(e,3,t,Oe.min(),Oe.min(),In.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t){this.position=e,this.inclusive=t}}function Uy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=Se.comparator(Se.fromName(h.referenceValue),t.key):i=Jo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function zy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!$r(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t="asc"){this.field=e,this.dir=t}}function SC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{}class Dt extends s0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new CC(e,t,i):t==="array-contains"?new PC(e,i):t==="in"?new bC(e,i):t==="not-in"?new kC(e,i):t==="array-contains-any"?new NC(e,i):new Dt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new RC(e,i):new AC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Jo(t,this.value)):t!==null&&ps(this.value)===ps(t)&&this.matchesComparison(Jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wr extends s0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Wr(e,t)}matches(e){return o0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function o0(r){return r.op==="and"}function a0(r){return xC(r)&&o0(r)}function xC(r){for(const e of r.filters)if(e instanceof Wr)return!1;return!0}function df(r){if(r instanceof Dt)return r.field.canonicalString()+r.op.toString()+Xo(r.value);if(a0(r))return r.filters.map(e=>df(e)).join(",");{const e=r.filters.map(t=>df(t)).join(",");return`${r.op}(${e})`}}function l0(r,e){return r instanceof Dt?function(i,o){return o instanceof Dt&&i.op===o.op&&i.field.isEqual(o.field)&&$r(i.value,o.value)}(r,e):r instanceof Wr?function(i,o){return o instanceof Wr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,h,f)=>l&&l0(h,o.filters[f]),!0):!1}(r,e):void ke(19439)}function u0(r){return r instanceof Dt?function(t){return`${t.field.canonicalString()} ${t.op} ${Xo(t.value)}`}(r):r instanceof Wr?function(t){return t.op.toString()+" {"+t.getFilters().map(u0).join(" ,")+"}"}(r):"Filter"}class CC extends Dt{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class RC extends Dt{constructor(e,t){super(e,"in",t),this.keys=c0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class AC extends Dt{constructor(e,t){super(e,"not-in",t),this.keys=c0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function c0(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Se.fromName(i.referenceValue))}class PC extends Dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jf(t)&&Il(t.arrayValue,this.value)}}class bC extends Dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Il(this.value.arrayValue,t)}}class kC extends Dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Il(this.value.arrayValue,t)}}class NC extends Dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Il(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Pe=null}}function By(r,e=null,t=[],i=[],o=null,l=null,h=null){return new DC(r,e,t,i,o,l,h)}function Xf(r){const e=Ve(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>df(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Xo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Xo(i)).join(",")),e.Pe=t}return e.Pe}function Zf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!SC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!l0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!zy(r.startAt,e.startAt)&&zy(r.endAt,e.endAt)}function ff(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function OC(r,e,t,i,o,l,h,f){return new $c(r,e,t,i,o,l,h,f)}function Wc(r){return new $c(r)}function Hy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function VC(r){return r.collectionGroup!==null}function cl(r){const e=Ve(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Ot(Wt.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(f=f.add(v.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Ac(l,i))}),t.has(Wt.keyField().canonicalString())||e.Te.push(new Ac(Wt.keyField(),i))}return e.Te}function Fr(r){const e=Ve(r);return e.Ie||(e.Ie=LC(e,cl(r))),e.Ie}function LC(r,e){if(r.limitType==="F")return By(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Ac(o.field,l)});const t=r.endAt?new Rc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Rc(r.startAt.position,r.startAt.inclusive):null;return By(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function pf(r,e,t){return new $c(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function qc(r,e){return Zf(Fr(r),Fr(e))&&r.limitType===e.limitType}function h0(r){return`${Xf(Fr(r))}|lt:${r.limitType}`}function Fo(r){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>u0(o)).join(", ")}]`),Bc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Xo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Xo(o)).join(",")),`Target(${i})`}(Fr(r))}; limitType=${r.limitType})`}function Gc(r,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Se.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,e)&&function(i,o){for(const l of cl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(i,o){return!(i.startAt&&!function(h,f,g){const v=Uy(h,f,g);return h.inclusive?v<=0:v<0}(i.startAt,cl(i),o)||i.endAt&&!function(h,f,g){const v=Uy(h,f,g);return h.inclusive?v>=0:v>0}(i.endAt,cl(i),o))}(r,e)}function MC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function d0(r){return(e,t)=>{let i=!1;for(const o of cl(r)){const l=jC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function jC(r,e,t){const i=r.field.isKeyField()?Se.comparator(e.key,t.key):function(l,h,f){const g=h.data.field(l),v=f.data.field(l);return g!==null&&v!==null?Jo(g,v):ke(42886)}(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ke(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ys(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return Y_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new gt(Se.comparator);function vi(){return FC}const f0=new gt(Se.comparator);function el(...r){let e=f0;for(const t of r)e=e.insert(t.key,t);return e}function p0(r){let e=f0;return r.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function $s(){return hl()}function m0(){return hl()}function hl(){return new Xs(r=>r.toString(),(r,e)=>r.isEqual(e))}const UC=new gt(Se.comparator),zC=new Ot(Se.comparator);function ze(...r){let e=zC;for(const t of r)e=e.add(t);return e}const BC=new Ot(Me);function HC(){return BC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sc(e)?"-0":e}}function g0(r){return{integerValue:""+r}}function $C(r,e){return gC(e)?g0(e):ep(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this._=void 0}}function WC(r,e,t){return r instanceof Pc?function(o,l){const h={fields:{[Z_]:{stringValue:X_},[t0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Yf(l)&&(l=Hc(l)),l&&(h.fields[e0]=l),{mapValue:h}}(t,e):r instanceof Zo?v0(r,e):r instanceof Tl?_0(r,e):function(o,l){const h=y0(o,l),f=$y(h)+$y(o.Ee);return hf(h)&&hf(o.Ee)?g0(f):ep(o.serializer,f)}(r,e)}function qC(r,e,t){return r instanceof Zo?v0(r,e):r instanceof Tl?_0(r,e):t}function y0(r,e){return r instanceof bc?function(i){return hf(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Pc extends Kc{}class Zo extends Kc{constructor(e){super(),this.elements=e}}function v0(r,e){const t=w0(e);for(const i of r.elements)t.some(o=>$r(o,i))||t.push(i);return{arrayValue:{values:t}}}class Tl extends Kc{constructor(e){super(),this.elements=e}}function _0(r,e){let t=w0(e);for(const i of r.elements)t=t.filter(o=>!$r(o,i));return{arrayValue:{values:t}}}class bc extends Kc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function $y(r){return Et(r.integerValue||r.doubleValue)}function w0(r){return Jf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t){this.field=e,this.transform=t}}function KC(r,e){return r.field.isEqual(e.field)&&function(i,o){return i instanceof Zo&&o instanceof Zo||i instanceof Tl&&o instanceof Tl?Yo(i.elements,o.elements,$r):i instanceof bc&&o instanceof bc?$r(i.Ee,o.Ee):i instanceof Pc&&o instanceof Pc}(r.transform,e.transform)}class QC{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Qc{}function E0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new T0(r.key,Ur.none()):new bl(r.key,r.data,Ur.none());{const t=r.data,i=In.empty();let o=new Ot(Wt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new vs(r.key,i,new Mn(o.toArray()),Ur.none())}}function YC(r,e,t){r instanceof bl?function(o,l,h){const f=o.value.clone(),g=qy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(r,e,t):r instanceof vs?function(o,l,h){if(!dc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=qy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(I0(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function dl(r,e,t,i){return r instanceof bl?function(l,h,f,g){if(!dc(l.precondition,h))return f;const v=l.value.clone(),E=Gy(l.fieldTransforms,g,h);return v.setAll(E),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null}(r,e,t,i):r instanceof vs?function(l,h,f,g){if(!dc(l.precondition,h))return f;const v=Gy(l.fieldTransforms,g,h),E=h.data;return E.setAll(I0(l)),E.setAll(v),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(I=>I.field))}(r,e,t,i):function(l,h,f){return dc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(r,e,t)}function JC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=y0(i.transform,o||null);l!=null&&(t===null&&(t=In.empty()),t.set(i.field,l))}return t||null}function Wy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Yo(i,o,(l,h)=>KC(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class bl extends Qc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class vs extends Qc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function I0(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}}),e}function qy(r,e,t){const i=new Map;Xe(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,qC(h,f,t[o]))}return i}function Gy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,WC(l,h,e))}return i}class T0 extends Qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XC extends Qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&YC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=dl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=dl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=m0();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=E0(h,f);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Oe.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ze())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(t,i)=>Wy(t,i))&&Yo(this.baseMutations,e.baseMutations,(t,i)=>Wy(t,i))}}class tp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Xe(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=function(){return UC}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new tp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,$e;function nR(r){switch(r){case J.OK:return ke(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return ke(15467,{code:r})}}function S0(r){if(r===void 0)return yi("GRPC error has no .code"),J.UNKNOWN;switch(r){case Ct.OK:return J.OK;case Ct.CANCELLED:return J.CANCELLED;case Ct.UNKNOWN:return J.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return J.INTERNAL;case Ct.UNAVAILABLE:return J.UNAVAILABLE;case Ct.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ct.NOT_FOUND:return J.NOT_FOUND;case Ct.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ct.ABORTED:return J.ABORTED;case Ct.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ct.DATA_LOSS:return J.DATA_LOSS;default:return ke(39323,{code:r})}}($e=Ct||(Ct={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new ss([4294967295,4294967295],0);function Ky(r){const e=q_().encode(r),t=new j_;return t.update(e),new Uint8Array(t.digest())}function Qy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ss([t,i],0),new ss([o,l],0)]}class np{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new tl(`Invalid padding: ${t}`);if(i<0)throw new tl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new tl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ss.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(ss.fromNumber(i)));return o.compare(rR)===1&&(o=new ss([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Ky(e),[i,o]=Qy(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new np(l,o,t);return i.forEach(f=>h.insert(f)),h}insert(e){if(this.fe===0)return;const t=Ky(e),[i,o]=Qy(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,kl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Yc(Oe.min(),o,new gt(Me),vi(),ze())}}class kl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new kl(i,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class x0{constructor(e,t){this.targetId=e,this.De=t}}class C0{constructor(e,t,i=qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Yy{constructor(){this.ve=0,this.Ce=Jy(),this.Fe=qt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ze(),t=ze(),i=ze();return this.Ce.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:ke(38017,{changeType:l})}}),new kl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Jy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class iR{constructor(e){this.We=e,this.Ge=new Map,this.ze=vi(),this.je=tc(),this.Je=tc(),this.He=new gt(Me)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:ke(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,o)=>{this.nt(o)&&t(o)})}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(ff(l))if(i===0){const h=new Se(l.path);this.Xe(t,h,Zt.newNoDocument(h,Oe.min()))}else Xe(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const f=this._t(e),g=f?this.ut(f,e,h):1;if(g!==0){this.rt(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=fs(i).toUint8Array()}catch(g){if(g instanceof J_)return cs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new np(h,o,l)}catch(g){return cs(g instanceof tl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.fe===0?null:f}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const h=this.We.lt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)}),o}Pt(e){const t=new Map;this.Ge.forEach((l,h)=>{const f=this.st(h);if(f){if(l.current&&ff(f.target)){const g=new Se(f.target.path);this.Tt(g).has(h)||this.It(h,g)||this.Xe(h,g,Zt.newNoDocument(g,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}});let i=ze();this.Je.forEach((l,h)=>{let f=!0;h.forEachWhile(g=>{const v=this.st(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.ze.forEach((l,h)=>h.setReadTime(e));const o=new Yc(e,t,this.He,this.ze,i);return this.ze=vi(),this.je=tc(),this.Je=tc(),this.He=new gt(Me),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Yy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ot(Me),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ot(Me),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Yy),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function tc(){return new gt(Se.comparator)}function Jy(){return new gt(Se.comparator)}const sR={asc:"ASCENDING",desc:"DESCENDING"},oR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aR={and:"AND",or:"OR"};class lR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mf(r,e){return r.useProto3Json||Bc(e)?e:{value:e}}function kc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function uR(r,e){return kc(r,e.toTimestamp())}function zr(r){return Xe(!!r,49232),Oe.fromTimestamp(function(t){const i=ds(t);return new ut(i.seconds,i.nanos)}(r))}function rp(r,e){return gf(r,e).canonicalString()}function gf(r,e){const t=function(o){return new lt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function A0(r){const e=lt.fromString(r);return Xe(D0(e),10190,{key:e.toString()}),e}function yf(r,e){return rp(r.databaseId,e.path)}function Gd(r,e){const t=A0(e);if(t.get(1)!==r.databaseId.projectId)throw new ye(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ye(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Se(b0(t))}function P0(r,e){return rp(r.databaseId,e)}function cR(r){const e=A0(r);return e.length===4?lt.emptyPath():b0(e)}function vf(r){return new lt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function b0(r){return Xe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Xy(r,e,t){return{name:yf(r,e),fields:t.value.mapValue.fields}}function hR(r,e){let t;if("targetChange"in e){e.targetChange;const i=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ke(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,E){return v.useProto3Json?(Xe(E===void 0||typeof E=="string",58123),qt.fromBase64String(E||"")):(Xe(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),qt.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(v){const E=v.code===void 0?J.UNKNOWN:S0(v.code);return new ye(E,v.message||"")}(h);t=new C0(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Gd(r,i.document.name),l=zr(i.document.updateTime),h=i.document.createTime?zr(i.document.createTime):Oe.min(),f=new In({mapValue:{fields:i.document.fields}}),g=Zt.newFoundDocument(o,l,h,f),v=i.targetIds||[],E=i.removedTargetIds||[];t=new fc(v,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Gd(r,i.document),l=i.readTime?zr(i.readTime):Oe.min(),h=Zt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new fc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Gd(r,i.document),l=i.removedTargetIds||[];t=new fc([],l,o,null)}else{if(!("filter"in e))return ke(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new tR(o,l),f=i.targetId;t=new x0(f,h)}}return t}function dR(r,e){let t;if(e instanceof bl)t={update:Xy(r,e.key,e.value)};else if(e instanceof T0)t={delete:yf(r,e.key)};else if(e instanceof vs)t={update:Xy(r,e.key,e.data),updateMask:ER(e.fieldMask)};else{if(!(e instanceof XC))return ke(16599,{Rt:e.type});t={verify:yf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const f=h.transform;if(f instanceof Pc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Zo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Tl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof bc)return{fieldPath:h.field.canonicalString(),increment:f.Ee};throw ke(20930,{transform:h.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:uR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ke(27497)}(r,e.precondition)),t}function fR(r,e){return r&&r.length>0?(Xe(e!==void 0,14353),r.map(t=>function(o,l){let h=o.updateTime?zr(o.updateTime):zr(l);return h.isEqual(Oe.min())&&(h=zr(l)),new QC(h,o.transformResults||[])}(t,e))):[]}function pR(r,e){return{documents:[P0(r,e.path)]}}function mR(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=P0(r,o);const l=function(v){if(v.length!==0)return N0(Wr.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(v){if(v.length!==0)return v.map(E=>function(x){return{field:Uo(x.field),direction:vR(x.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=mf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{Vt:t,parent:o}}function gR(r){let e=cR(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Xe(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(I){const x=k0(I);return x instanceof Wr&&a0(x)?x.getFilters():[x]}(t.where));let h=[];t.orderBy&&(h=function(I){return I.map(x=>function(q){return new Ac(zo(q.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(x))}(t.orderBy));let f=null;t.limit&&(f=function(I){let x;return x=typeof I=="object"?I.value:I,Bc(x)?null:x}(t.limit));let g=null;t.startAt&&(g=function(I){const x=!!I.before,j=I.values||[];return new Rc(j,x)}(t.startAt));let v=null;return t.endAt&&(v=function(I){const x=!I.before,j=I.values||[];return new Rc(j,x)}(t.endAt)),OC(e,o,h,l,f,"F",g,v)}function yR(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function k0(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=zo(t.unaryFilter.field);return Dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=zo(t.unaryFilter.field);return Dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=zo(t.unaryFilter.field);return Dt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=zo(t.unaryFilter.field);return Dt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}}(r):r.fieldFilter!==void 0?function(t){return Dt.create(zo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Wr.create(t.compositeFilter.filters.map(i=>k0(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ke(1026)}}(t.compositeFilter.op))}(r):ke(30097,{filter:r})}function vR(r){return sR[r]}function _R(r){return oR[r]}function wR(r){return aR[r]}function Uo(r){return{fieldPath:r.canonicalString()}}function zo(r){return Wt.fromServerFormat(r.fieldPath)}function N0(r){return r instanceof Dt?function(t){if(t.op==="=="){if(Fy(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NAN"}};if(jy(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Fy(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NAN"}};if(jy(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(t.field),op:_R(t.op),value:t.value}}}(r):r instanceof Wr?function(t){const i=t.getFilters().map(o=>N0(o));return i.length===1?i[0]:{compositeFilter:{op:wR(t.op),filters:i}}}(r):ke(54877,{filter:r})}function ER(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function D0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t,i,o,l=Oe.min(),h=Oe.min(),f=qt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.gt=e}}function TR(r){const e=gR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?pf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.Dn=new xR}addToCollectionParentIndex(e,t){return this.Dn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(hs.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class xR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ot(lt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ot(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O0=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(O0,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ea(0)}static ur(){return new ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="LruGarbageCollector",CR=1048576;function tv([r,e],[t,i]){const o=Me(r,t);return o===0?Me(e,i):o}class RR{constructor(e){this.Tr=e,this.buffer=new Ot(tv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();tv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){he(ev,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ha(t)?he(ev,"Ignoring IndexedDB error during garbage collection: ",t):await ca(t)}await this.Rr(3e5)})}}class PR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return K.resolve(zc.ue);const i=new RR(t);return this.Vr.forEachTarget(e,o=>i.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>i.Er(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Zy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zy):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,f,g,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,h=Date.now(),this.nthSequenceNumber(e,o))).next(I=>(i=I,f=Date.now(),this.removeTargets(e,i,t))).next(I=>(l=I,g=Date.now(),this.removeOrphanedDocuments(e,i))).next(I=>(v=Date.now(),jo()<=Ue.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${I} documents in `+(v-g)+`ms
Total Duration: ${v-E}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I})))}}function bR(r,e){return new PR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.changes=new Xs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&dl(i.mutation,o,Mn.empty(),ut.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ze()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ze()){const o=$s();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let h=el();return l.forEach((f,g)=>{h=h.insert(f,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=$s();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ze()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,i,o){let l=vi();const h=hl(),f=function(){return hl()}();return t.forEach((g,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof vs)?l=l.insert(v.key,v):E!==void 0?(h.set(v.key,E.mutation.getFieldMask()),dl(E.mutation,v,E.mutation.getFieldMask(),ut.now())):h.set(v.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((v,E)=>h.set(v,E)),t.forEach((v,E)=>{var I;return f.set(v,new NR(E,(I=h.get(v))!==null&&I!==void 0?I:null))}),f))}recalculateAndSaveOverlays(e,t){const i=hl();let o=new gt((h,f)=>h-f),l=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(g=>{const v=t.get(g);if(v===null)return;let E=i.get(g)||Mn.empty();E=f.applyToLocalView(v,E),i.set(g,E);const I=(o.get(f.batchId)||ze()).add(g);o=o.insert(f.batchId,I)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,E=g.value,I=m0();E.forEach(x=>{if(!l.has(x)){const j=E0(t.get(x),i.get(x));j!==null&&I.set(x,j),l=l.add(x)}}),h.push(this.documentOverlayCache.saveOverlays(e,v,I))}return K.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return Se.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):K.resolve($s());let f=_l,g=l;return h.next(v=>K.forEach(v,(E,I)=>(f<I.largestBatchId&&(f=I.largestBatchId),l.get(E)?K.resolve():this.remoteDocumentCache.getEntry(e,E).next(x=>{g=g.insert(E,x)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,g,v,ze())).next(E=>({batchId:f,changes:p0(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(i=>{let o=el();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=el();return this.indexManager.getCollectionParents(e,l).next(f=>K.forEach(f,g=>{const v=function(I,x){return new $c(x,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next(E=>{E.forEach((I,x)=>{h=h.insert(I,x)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(h=>{l.forEach((g,v)=>{const E=v.getKey();h.get(E)===null&&(h=h.insert(E,Zt.newInvalidDocument(E)))});let f=el();return h.forEach((g,v)=>{const E=l.get(g);E!==void 0&&dl(E.mutation,v,Mn.empty(),ut.now()),Gc(t,v)&&(f=f.insert(g,v))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return K.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(o){return{id:o.id,version:o.version,createTime:zr(o.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(o){return{name:o.name,query:TR(o.bundledQuery),readTime:zr(o.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.overlays=new gt(Se.comparator),this.kr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=$s();return K.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.wt(e,t,l)}),K.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const o=$s(),l=t.length+1,h=new Se(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new gt((v,E)=>v-E);const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=$s(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const f=$s(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,E)=>f.set(v,E)),!(f.size()>=o)););return K.resolve(f)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new eR(t,i));let l=this.kr.get(t);l===void 0&&(l=ze(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(){this.qr=new Ot(Ft.Qr),this.$r=new Ot(Ft.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new Ft(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){const t=new Se(new lt([])),i=new Ft(t,e),o=new Ft(t,e+1),l=[];return this.$r.forEachInRange([i,o],h=>{this.Wr(h),l.push(h.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Se(new lt([])),i=new Ft(t,e),o=new Ft(t,e+1);let l=ze();return this.$r.forEachInRange([i,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Ft(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Se.comparator(e.key,t.key)||Me(e.Hr,t.Hr)}static Ur(e,t){return Me(e.Hr,t.Hr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ot(Ft.Qr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new ZC(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Yr=this.Yr.add(new Ft(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Qf:this.er-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),o=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],h=>{const f=this.Zr(h.Hr);l.push(f)}),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(Me);return t.forEach(o=>{const l=new Ft(o,0),h=new Ft(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],f=>{i=i.add(f.Hr)})}),K.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Se.isDocumentKey(l)||(l=l.child(""));const h=new Ft(new Se(l),0);let f=new Ot(Me);return this.Yr.forEachWhile(g=>{const v=g.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(f=f.add(g.Hr)),!0)},h),K.resolve(this.ei(f))}ei(e){const t=[];return e.forEach(i=>{const o=this.Zr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Xe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return K.forEach(t.mutations,o=>{const l=new Ft(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){const i=new Ft(t,0),o=this.Yr.firstAfterOrEqual(i);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.ni=e,this.docs=function(){return new gt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():Zt.newInvalidDocument(t))}getEntries(e,t){let i=vi();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Zt.newInvalidDocument(o))}),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=vi();const h=t.path,f=new Se(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:E}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||dC(hC(E),i)<=0||(o.has(E.key)||Gc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,i,o){ke(9500)}ri(e,t){return K.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new FR(this)}getSize(e){return K.resolve(this.size)}}class FR extends kR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)}),K.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.persistence=e,this.ii=new Xs(t=>Xf(t),Zf),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.si=0,this.oi=new ip,this.targetCount=0,this._i=ea.ar()}forEachTarget(e,t){return this.ii.forEach((i,o)=>t(o)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),K.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ea(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.hr(t),K.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),K.waitFor(l).next(()=>o)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,t){this.ai={},this.overlays={},this.ui=new zc(0),this.ci=!1,this.ci=!0,this.li=new LR,this.referenceDelegate=e(this),this.hi=new UR(this),this.indexManager=new SR,this.remoteDocumentCache=function(o){return new jR(o)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new IR(t),this.Ti=new OR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new MR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new zR(this.ui.next());return this.referenceDelegate.Ii(),i(o).next(l=>this.referenceDelegate.di(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ei(e,t){return K.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}}class zR extends pC{constructor(e){super(),this.currentSequenceNumber=e}}class sp{constructor(e){this.persistence=e,this.Ai=new ip,this.Ri=null}static Vi(e){return new sp(e)}get mi(){if(this.Ri)return this.Ri;throw ke(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(o=>this.mi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.mi.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.mi,i=>{const o=Se.fromPath(i);return this.fi(e,o).next(l=>{l||t.removeEntry(o,Oe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return K.or([()=>K.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Nc{constructor(e,t){this.persistence=e,this.gi=new Xs(i=>yC(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=bR(this,t)}static Vi(e,t){return new Nc(e,t)}Ii(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return K.forEach(this.gi,(i,o)=>this.Sr(e,i,o).next(l=>l?K.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,h=>this.Sr(e,h,t).next(f=>{f||(i++,l.removeEntry(h,Oe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cc(e.data.value)),t}Sr(e,t,i){return K.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return K.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=ze(),o=ze();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new op(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return ZI()?8:mC(en())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.ys(e,t,o,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new BR;return this.ws(e,t,h).next(f=>{if(l.result=f,this.Rs)return this.Ss(e,t,h,f.size)})}).next(()=>l.result)}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(jo()<=Ue.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),K.resolve()):(jo()<=Ue.DEBUG&&he("QueryEngine","Query:",Fo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(jo()<=Ue.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):K.resolve())}ps(e,t){if(Hy(t))return K.resolve(null);let i=Fr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=pf(t,null,"F"),i=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=ze(...l);return this.gs.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,i).next(g=>{const v=this.bs(t,f);return this.Ds(t,v,h,g.readTime)?this.ps(e,pf(t,null,"F")):this.vs(e,v,t,g)}))})))}ys(e,t,i,o){return Hy(t)||o.isEqual(Oe.min())?K.resolve(null):this.gs.getDocuments(e,i).next(l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?K.resolve(null):(jo()<=Ue.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fo(t)),this.vs(e,h,t,cC(o,_l)).next(f=>f))})}bs(e,t){let i=new Ot(d0(e));return t.forEach((o,l)=>{Gc(e,l)&&(i=i.add(l))}),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return jo()<=Ue.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Fo(t)),this.gs.getDocumentsMatchingQuery(e,t,hs.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="LocalStore",$R=3e8;class WR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new gt(Me),this.Ms=new Xs(l=>Xf(l),Zf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function qR(r,e,t,i){return new WR(r,e,t,i)}async function L0(r,e){const t=Ve(r);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],f=[];let g=ze();for(const v of o){h.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of l){f.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next(v=>({Bs:v,removedBatchIds:h,addedBatchIds:f}))})})}function GR(r,e){const t=Ve(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(f,g,v,E){const I=v.batch,x=I.keys();let j=K.resolve();return x.forEach(q=>{j=j.next(()=>E.getEntry(g,q)).next(H=>{const M=v.docVersions.get(q);Xe(M!==null,48541),H.version.compareTo(M)<0&&(I.applyToRemoteDocument(H,v),H.isValidDocument()&&(H.setReadTime(v.commitVersion),E.addEntry(H)))})}),j.next(()=>f.mutationQueue.removeMutationBatch(g,I))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let g=ze();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(g=g.add(f.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function M0(r){const e=Ve(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function KR(r,e){const t=Ve(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach((E,I)=>{const x=o.get(I);if(!x)return;f.push(t.hi.removeMatchingKeys(l,E.removedDocuments,I).next(()=>t.hi.addMatchingKeys(l,E.addedDocuments,I)));let j=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?j=j.withResumeToken(qt.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):E.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(E.resumeToken,i)),o=o.insert(I,j),function(H,M,le){return H.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=$R?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0}(x,j,E)&&f.push(t.hi.updateTargetData(l,j))});let g=vi(),v=ze();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),f.push(QR(l,h,e.documentUpdates).next(E=>{g=E.Ls,v=E.ks})),!i.isEqual(Oe.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next(I=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(E)}return K.waitFor(f).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,v)).next(()=>g)}).then(l=>(t.Fs=o,l))}function QR(r,e,t){let i=ze(),o=ze();return t.forEach(l=>i=i.add(l)),e.getEntries(r,i).next(l=>{let h=vi();return t.forEach((f,g)=>{const v=l.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):he(ap,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)}),{Ls:h,ks:o}})}function YR(r,e){const t=Ve(r);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Qf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function JR(r,e){const t=Ve(r);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.hi.getTargetData(i,e).next(l=>l?(o=l,K.resolve(o)):t.hi.allocateTargetId(i).next(h=>(o=new es(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}async function _f(r,e,t){const i=Ve(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!ha(h))throw h;he(ap,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function nv(r,e,t){const i=Ve(r);let o=Oe.min(),l=ze();return i.persistence.runTransaction("Execute query","readwrite",h=>function(g,v,E){const I=Ve(g),x=I.Ms.get(E);return x!==void 0?K.resolve(I.Fs.get(x)):I.hi.getTargetData(v,E)}(i,h,Fr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,f.targetId).next(g=>{l=g})}).next(()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Oe.min(),t?l:ze())).next(f=>(XR(i,MC(e),f),{documents:f,qs:l})))}function XR(r,e,t){let i=r.xs.get(e)||Oe.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.xs.set(e,i)}class rv{constructor(){this.activeTargetIds=HC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZR{constructor(){this.Fo=new rv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new rv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="ConnectivityMonitor";class sv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){he(iv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){he(iv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc=null;function wf(){return nc===null?nc=function(){return 268435456+Math.round(2147483648*Math.random())}():nc++,"0x"+nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="RestConnection",tA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nA{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===xc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=wf(),f=this.Go(e,t.toUriEncodedString());he(Kd,`Sending RPC '${e}' ${h}:`,f,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,l);const{host:v}=new URL(f),E=sa(v);return this.jo(e,f,g,i,E).then(I=>(he(Kd,`Received RPC '${e}' ${h}: `,I),I),I=>{throw cs(Kd,`RPC '${e}' ${h} failed with error: `,I,"url: ",f,"request:",i),I})}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ua}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),i&&i.headers.forEach((o,l)=>e[l]=o)}Go(e,t){const i=tA[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class iA extends nA{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=wf();return new Promise((f,g)=>{const v=new F_;v.setWithCredentials(!0),v.listenOnce(U_.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case uc.NO_ERROR:const I=v.getResponseJson();he(Jt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(I)),f(I);break;case uc.TIMEOUT:he(Jt,`RPC '${e}' ${h} timed out`),g(new ye(J.DEADLINE_EXCEEDED,"Request time out"));break;case uc.HTTP_ERROR:const x=v.getStatus();if(he(Jt,`RPC '${e}' ${h} failed with status:`,x,"response text:",v.getResponseText()),x>0){let j=v.getResponseJson();Array.isArray(j)&&(j=j[0]);const q=j==null?void 0:j.error;if(q&&q.status&&q.message){const H=function(le){const X=le.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(X)>=0?X:J.UNKNOWN}(q.status);g(new ye(H,q.message))}else g(new ye(J.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ye(J.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{c_:e,streamId:h,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{he(Jt,`RPC '${e}' ${h} completed.`)}});const E=JSON.stringify(o);he(Jt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",E,i,15)})}P_(e,t,i){const o=wf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=H_(),f=B_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=l.join("");he(Jt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const I=h.createWebChannel(E,g);this.T_(I);let x=!1,j=!1;const q=new rA({Ho:M=>{j?he(Jt,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(x||(he(Jt,`Opening RPC '${e}' stream ${o} transport.`),I.open(),x=!0),he(Jt,`RPC '${e}' stream ${o} sending:`,M),I.send(M))},Yo:()=>I.close()}),H=(M,le,X)=>{M.listen(le,Q=>{try{X(Q)}catch(de){setTimeout(()=>{throw de},0)}})};return H(I,Za.EventType.OPEN,()=>{j||(he(Jt,`RPC '${e}' stream ${o} transport opened.`),q.s_())}),H(I,Za.EventType.CLOSE,()=>{j||(j=!0,he(Jt,`RPC '${e}' stream ${o} transport closed`),q.__(),this.I_(I))}),H(I,Za.EventType.ERROR,M=>{j||(j=!0,cs(Jt,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),q.__(new ye(J.UNAVAILABLE,"The operation could not be completed")))}),H(I,Za.EventType.MESSAGE,M=>{var le;if(!j){const X=M.data[0];Xe(!!X,16349);const Q=X,de=(Q==null?void 0:Q.error)||((le=Q[0])===null||le===void 0?void 0:le.error);if(de){he(Jt,`RPC '${e}' stream ${o} received error:`,de);const te=de.status;let _e=function(C){const P=Ct[C];if(P!==void 0)return S0(P)}(te),k=de.message;_e===void 0&&(_e=J.INTERNAL,k="Unknown error status: "+te+" with message "+de.message),j=!0,q.__(new ye(_e,k)),I.close()}else he(Jt,`RPC '${e}' stream ${o} received:`,X),q.a_(X)}}),H(f,z_.STAT_EVENT,M=>{M.stat===lf.PROXY?he(Jt,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===lf.NOPROXY&&he(Jt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{q.o_()},0),q}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(r){return new lR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="PersistentStream";class F0{constructor(e,t,i,o,l,h,f,g){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new j0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(yi(t.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.b_===t&&this.W_(i,o)},i=>{e(()=>{const o=new ye(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)})})}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{i(()=>this.G_(o))}),this.stream.onMessage(o=>{i(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return he(ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(he(ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sA extends F0{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=hR(this.serializer,e),i=function(l){if(!("targetChange"in l))return Oe.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Oe.min():h.readTime?zr(h.readTime):Oe.min()}(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=vf(this.serializer),t.addTarget=function(l,h){let f;const g=h.target;if(f=ff(g)?{documents:pR(l,g)}:{query:mR(l,g).Vt},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=R0(l,h.resumeToken);const v=mf(l,h.expectedCount);v!==null&&(f.expectedCount=v)}else if(h.snapshotVersion.compareTo(Oe.min())>0){f.readTime=kc(l,h.snapshotVersion.toTimestamp());const v=mf(l,h.expectedCount);v!==null&&(f.expectedCount=v)}return f}(this.serializer,e);const i=yR(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=vf(this.serializer),t.removeTarget=e,this.k_(t)}}class oA extends F0{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=fR(e.writeResults,e.commitTime),i=zr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=vf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>dR(this.serializer,i))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{}class lA extends aA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ye(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Wo(e,gf(t,i),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(J.UNKNOWN,l.toString())})}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.Jo(e,gf(t,i),o,h,f,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ye(J.UNKNOWN,h.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class uA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(yi(t),this._a=!1):he("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="RemoteStore";class cA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(h=>{i.enqueueAndForget(async()=>{Zs(this)&&(he(Ks,"Restarting streams for network reachability change."),await async function(g){const v=Ve(g);v.Ia.add(4),await Nl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await Xc(v)}(this))})}),this.Aa=new uA(i,o)}}async function Xc(r){if(Zs(r))for(const e of r.da)await e(!0)}async function Nl(r){for(const e of r.da)await e(!1)}function U0(r,e){const t=Ve(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),hp(t)?cp(t):da(t).x_()&&up(t,e))}function lp(r,e){const t=Ve(r),i=da(t);t.Ta.delete(e),i.x_()&&z0(t,e),t.Ta.size===0&&(i.x_()?i.B_():Zs(t)&&t.Aa.set("Unknown"))}function up(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}da(r).H_(e)}function z0(r,e){r.Ra.$e(e),da(r).Y_(e)}function cp(r){r.Ra=new iR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),da(r).start(),r.Aa.aa()}function hp(r){return Zs(r)&&!da(r).M_()&&r.Ta.size>0}function Zs(r){return Ve(r).Ia.size===0}function B0(r){r.Ra=void 0}async function hA(r){r.Aa.set("Online")}async function dA(r){r.Ta.forEach((e,t)=>{up(r,e)})}async function fA(r,e){B0(r),hp(r)?(r.Aa.la(e),cp(r)):r.Aa.set("Unknown")}async function pA(r,e,t){if(r.Aa.set("Online"),e instanceof C0&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ta.delete(f),o.Ra.removeTarget(f))}(r,e)}catch(i){he(Ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dc(r,i)}else if(e instanceof fc?r.Ra.Ye(e):e instanceof x0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Oe.min()))try{const i=await M0(r.localStore);t.compareTo(i)>=0&&await function(l,h){const f=l.Ra.Pt(h);return f.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.Ta.get(v);E&&l.Ta.set(v,E.withResumeToken(g.resumeToken,h))}}),f.targetMismatches.forEach((g,v)=>{const E=l.Ta.get(g);if(!E)return;l.Ta.set(g,E.withResumeToken(qt.EMPTY_BYTE_STRING,E.snapshotVersion)),z0(l,g);const I=new es(E.target,g,v,E.sequenceNumber);up(l,I)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(i){he(Ks,"Failed to raise snapshot:",i),await Dc(r,i)}}async function Dc(r,e,t){if(!ha(e))throw e;r.Ia.add(1),await Nl(r),r.Aa.set("Offline"),t||(t=()=>M0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{he(Ks,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Xc(r)})}function H0(r,e){return e().catch(t=>Dc(r,t,e))}async function Zc(r){const e=Ve(r),t=ms(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Qf;for(;mA(e);)try{const o=await YR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,gA(e,o)}catch(o){await Dc(e,o)}$0(e)&&W0(e)}function mA(r){return Zs(r)&&r.Pa.length<10}function gA(r,e){r.Pa.push(e);const t=ms(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function $0(r){return Zs(r)&&!ms(r).M_()&&r.Pa.length>0}function W0(r){ms(r).start()}async function yA(r){ms(r).na()}async function vA(r){const e=ms(r);for(const t of r.Pa)e.X_(t.mutations)}async function _A(r,e,t){const i=r.Pa.shift(),o=tp.from(i,e,t);await H0(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Zc(r)}async function wA(r,e){e&&ms(r).Z_&&await async function(i,o){if(function(h){return nR(h)&&h!==J.ABORTED}(o.code)){const l=i.Pa.shift();ms(i).N_(),await H0(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Zc(i)}}(r,e),$0(r)&&W0(r)}async function av(r,e){const t=Ve(r);t.asyncQueue.verifyOperationInProgress(),he(Ks,"RemoteStore received new credentials");const i=Zs(t);t.Ia.add(3),await Nl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Xc(t)}async function EA(r,e){const t=Ve(r);e?(t.Ia.delete(2),await Xc(t)):e||(t.Ia.add(2),await Nl(t),t.Aa.set("Unknown"))}function da(r){return r.Va||(r.Va=function(t,i,o){const l=Ve(t);return l.ia(),new sA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:hA.bind(null,r),e_:dA.bind(null,r),n_:fA.bind(null,r),J_:pA.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),hp(r)?cp(r):r.Aa.set("Unknown")):(await r.Va.stop(),B0(r))})),r.Va}function ms(r){return r.ma||(r.ma=function(t,i,o){const l=Ve(t);return l.ia(),new oA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:yA.bind(null,r),n_:wA.bind(null,r),ea:vA.bind(null,r),ta:_A.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await Zc(r)):(await r.ma.stop(),r.Pa.length>0&&(he(Ks,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new dp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fp(r,e){if(yi("AsyncQueue",`${e}: ${r}`),ha(r))return new ye(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{static emptySet(e){return new Go(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=el(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Go;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.fa=new gt(Se.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ke(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}}class ta{constructor(e,t,i,o,l,h,f,g,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new ta(e,t,Go.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class TA{constructor(){this.queries=uv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ve(t),l=o.queries;o.queries=uv(),l.forEach((h,f)=>{for(const g of f.wa)g.onError(i)})})(this,new ye(J.ABORTED,"Firestore shutting down"))}}function uv(){return new Xs(r=>h0(r),qc)}async function q0(r,e){const t=Ve(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new IA,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=fp(h,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&pp(t)}async function G0(r,e){const t=Ve(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function SA(r,e){const t=Ve(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.wa)f.Ca(o)&&(i=!0);h.ya=o}}i&&pp(t)}function xA(r,e,t){const i=Ve(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function pp(r){r.Da.forEach(e=>{e.next()})}var Ef,cv;(cv=Ef||(Ef={})).Fa="default",cv.Cache="cache";class K0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ta(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ef.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.key=e}}class Y0{constructor(e){this.key=e}}class CA{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ze(),this.mutatedKeys=ze(),this.Xa=d0(e),this.eu=new Go(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new lv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,I)=>{const x=o.get(E),j=Gc(this.query,I)?I:null,q=!!x&&this.mutatedKeys.has(x.key),H=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let M=!1;x&&j?x.data.isEqual(j.data)?q!==H&&(i.track({type:3,doc:j}),M=!0):this.iu(x,j)||(i.track({type:2,doc:j}),M=!0,(g&&this.Xa(j,g)>0||v&&this.Xa(j,v)<0)&&(f=!0)):!x&&j?(i.track({type:0,doc:j}),M=!0):x&&!j&&(i.track({type:1,doc:x}),M=!0,(g||v)&&(f=!0)),M&&(j?(h=h.add(j),l=H?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{eu:h,ru:i,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort((E,I)=>function(j,q){const H=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{At:M})}};return H(j)-H(q)}(E.type,I.type)||this.Xa(E.doc,I.doc)),this.su(i),o=o!=null&&o;const f=t&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,v=g!==this.Ya;return this.Ya=g,h.length!==0||v?{snapshot:new ta(this.query,e.eu,l,h,e.mutatedKeys,g===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new lv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ze(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new Y0(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new Q0(i))}),t}uu(e){this.Ha=e.qs,this.Za=ze();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ta.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const mp="SyncEngine";class RA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class AA{constructor(e){this.key=e,this.lu=!1}}class PA{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new Xs(f=>h0(f),qc),this.Tu=new Map,this.Iu=new Set,this.du=new gt(Se.comparator),this.Eu=new Map,this.Au=new ip,this.Ru={},this.Vu=new Map,this.mu=ea.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function bA(r,e,t=!0){const i=nw(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await J0(i,e,t,!0),o}async function kA(r,e){const t=nw(r);await J0(t,e,!0,!1)}async function J0(r,e,t,i){const o=await JR(r.localStore,Fr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await NA(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&U0(r.remoteStore,o),f}async function NA(r,e,t,i,o){r.gu=(I,x,j)=>async function(H,M,le,X){let Q=M.view.nu(le);Q.Ds&&(Q=await nv(H.localStore,M.query,!1).then(({documents:k})=>M.view.nu(k,Q)));const de=X&&X.targetChanges.get(M.targetId),te=X&&X.targetMismatches.get(M.targetId)!=null,_e=M.view.applyChanges(Q,H.isPrimaryClient,de,te);return dv(H,M.targetId,_e._u),_e.snapshot}(r,I,x,j);const l=await nv(r.localStore,e,!0),h=new CA(e,l.qs),f=h.nu(l.documents),g=kl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(f,r.isPrimaryClient,g);dv(r,t,v._u);const E=new RA(e,t,h);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function DA(r,e,t){const i=Ve(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter(h=>!qc(h,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await _f(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&lp(i.remoteStore,o.targetId),If(i,o.targetId)}).catch(ca)):(If(i,o.targetId),await _f(i.localStore,o.targetId,!0))}async function OA(r,e){const t=Ve(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),lp(t.remoteStore,i.targetId))}async function VA(r,e,t){const i=BA(r);try{const o=await function(h,f){const g=Ve(h),v=ut.now(),E=f.reduce((j,q)=>j.add(q.key),ze());let I,x;return g.persistence.runTransaction("Locally write mutations","readwrite",j=>{let q=vi(),H=ze();return g.Os.getEntries(j,E).next(M=>{q=M,q.forEach((le,X)=>{X.isValidDocument()||(H=H.add(le))})}).next(()=>g.localDocuments.getOverlayedDocuments(j,q)).next(M=>{I=M;const le=[];for(const X of f){const Q=JC(X,I.get(X.key).overlayedDocument);Q!=null&&le.push(new vs(X.key,Q,i0(Q.value.mapValue),Ur.exists(!0)))}return g.mutationQueue.addMutationBatch(j,v,le,f)}).next(M=>{x=M;const le=M.applyToLocalDocumentSet(I,H);return g.documentOverlayCache.saveOverlays(j,M.batchId,le)})}).then(()=>({batchId:x.batchId,changes:p0(I)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,f,g){let v=h.Ru[h.currentUser.toKey()];v||(v=new gt(Me)),v=v.insert(f,g),h.Ru[h.currentUser.toKey()]=v}(i,o.batchId,t),await Dl(i,o.changes),await Zc(i.remoteStore)}catch(o){const l=fp(o,"Failed to persist write");t.reject(l)}}async function X0(r,e){const t=Ve(r);try{const i=await KR(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Eu.get(l);h&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?Xe(h.lu,14607):o.removedDocuments.size>0&&(Xe(h.lu,42227),h.lu=!1))}),await Dl(t,i,e)}catch(i){await ca(i)}}function hv(r,e,t){const i=Ve(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const g=Ve(h);g.onlineState=f;let v=!1;g.queries.forEach((E,I)=>{for(const x of I.wa)x.va(f)&&(v=!0)}),v&&pp(g)}(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function LA(r,e,t){const i=Ve(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new gt(Se.comparator);h=h.insert(l,Zt.newNoDocument(l,Oe.min()));const f=ze().add(l),g=new Yc(Oe.min(),new Map,new gt(Me),h,f);await X0(i,g),i.du=i.du.remove(l),i.Eu.delete(e),gp(i)}else await _f(i.localStore,e,!1).then(()=>If(i,e,t)).catch(ca)}async function MA(r,e){const t=Ve(r),i=e.batch.batchId;try{const o=await GR(t.localStore,e);ew(t,i,null),Z0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Dl(t,o)}catch(o){await ca(o)}}async function jA(r,e,t){const i=Ve(r);try{const o=await function(h,f){const g=Ve(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return g.mutationQueue.lookupMutationBatch(v,f).next(I=>(Xe(I!==null,37113),E=I.keys(),g.mutationQueue.removeMutationBatch(v,I))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,E,f)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>g.localDocuments.getDocuments(v,E))})}(i.localStore,e);ew(i,e,t),Z0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Dl(i,o)}catch(o){await ca(o)}}function Z0(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function ew(r,e,t){const i=Ve(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function If(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(i=>{r.Au.containsKey(i)||tw(r,i)})}function tw(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(lp(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),gp(r))}function dv(r,e,t){for(const i of t)i instanceof Q0?(r.Au.addReference(i.key,e),FA(r,i)):i instanceof Y0?(he(mp,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||tw(r,i.key)):ke(19791,{yu:i})}function FA(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(he(mp,"New document in limbo: "+t),r.Iu.add(i),gp(r))}function gp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Se(lt.fromString(e)),i=r.mu.next();r.Eu.set(i,new AA(t)),r.du=r.du.insert(t,i),U0(r.remoteStore,new es(Fr(Wc(t.path)),i,"TargetPurposeLimboResolution",zc.ue))}}async function Dl(r,e,t){const i=Ve(r),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach((f,g)=>{h.push(i.gu(g,e,t).then(v=>{var E;if((v||t)&&i.isPrimaryClient){const I=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(g.targetId,I?"current":"not-current")}if(v){o.push(v);const I=op.Es(g.targetId,v);l.push(I)}}))}),await Promise.all(h),i.hu.J_(o),await async function(g,v){const E=Ve(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>K.forEach(v,x=>K.forEach(x.Is,j=>E.persistence.referenceDelegate.addReference(I,x.targetId,j)).next(()=>K.forEach(x.ds,j=>E.persistence.referenceDelegate.removeReference(I,x.targetId,j)))))}catch(I){if(!ha(I))throw I;he(ap,"Failed to update sequence numbers: "+I)}for(const I of v){const x=I.targetId;if(!I.fromCache){const j=E.Fs.get(x),q=j.snapshotVersion,H=j.withLastLimboFreeSnapshotVersion(q);E.Fs=E.Fs.insert(x,H)}}}(i.localStore,l))}async function UA(r,e){const t=Ve(r);if(!t.currentUser.isEqual(e)){he(mp,"User change. New user:",e.toKey());const i=await L0(t.localStore,e);t.currentUser=e,function(l,h){l.Vu.forEach(f=>{f.forEach(g=>{g.reject(new ye(J.CANCELLED,h))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Dl(t,i.Bs)}}function zA(r,e){const t=Ve(r),i=t.Eu.get(e);if(i&&i.lu)return ze().add(i.key);{let o=ze();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const f=t.Pu.get(h);o=o.unionWith(f.view.tu)}return o}}function nw(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=X0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LA.bind(null,e),e.hu.J_=SA.bind(null,e.eventManager),e.hu.pu=xA.bind(null,e.eventManager),e}function BA(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jA.bind(null,e),e}class Oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return qR(this.persistence,new HR,e.initialUser,this.serializer)}Du(e){return new V0(sp.Vi,this.serializer)}bu(e){return new ZR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oc.provider={build:()=>new Oc};class HA extends Oc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Xe(this.persistence.referenceDelegate instanceof Nc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new AR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new V0(i=>Nc.Vi(i,t),this.serializer)}}class Tf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>hv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=UA.bind(null,this.syncEngine),await EA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TA}()}createDatastore(e){const t=Jc(e.databaseInfo.databaseId),i=function(l){return new iA(l)}(e.databaseInfo);return function(l,h,f,g){return new lA(l,h,f,g)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,h,f){return new cA(i,o,l,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>hv(this.syncEngine,t,0),function(){return sv.C()?new sv:new eA}())}createSyncEngine(e,t){return function(o,l,h,f,g,v,E){const I=new PA(o,l,h,f,g,v);return E&&(I.fu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ve(o);he(Ks,"RemoteStore shutting down."),l.Ia.add(5),await Nl(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Tf.provider={build:()=>new Tf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="FirestoreClient";class $A{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Xt.UNAUTHENTICATED,this.clientId=Gf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async h=>{he(gs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(he(gs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=fp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Yd(r,e){r.asyncQueue.verifyOperationInProgress(),he(gs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener(async o=>{i.isEqual(o)||(await L0(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>{cs("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{he("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{cs("Terminating Firestore due to IndexedDb database deletion failed",o)})}),r._offlineComponents=e}async function fv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await WA(r);he(gs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(i=>av(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,o)=>av(e.remoteStore,o)),r._onlineComponents=e}async function WA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(gs,"Using user provided OfflineComponentProvider");try{await Yd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;cs("Error using user provided cache. Falling back to memory cache: "+t),await Yd(r,new Oc)}}else he(gs,"Using default OfflineComponentProvider"),await Yd(r,new HA(void 0));return r._offlineComponents}async function iw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(gs,"Using user provided OnlineComponentProvider"),await fv(r,r._uninitializedComponentsProvider._online)):(he(gs,"Using default OnlineComponentProvider"),await fv(r,new Tf))),r._onlineComponents}function qA(r){return iw(r).then(e=>e.syncEngine)}async function Sf(r){const e=await iw(r),t=e.eventManager;return t.onListen=bA.bind(null,e.syncEngine),t.onUnlisten=DA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=OA.bind(null,e.syncEngine),t}function GA(r,e,t={}){const i=new os;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,f,g,v){const E=new rw({next:x=>{E.Ou(),h.enqueueAndForget(()=>G0(l,I));const j=x.docs.has(f);!j&&x.fromCache?v.reject(new ye(J.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&x.fromCache&&g&&g.source==="server"?v.reject(new ye(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),I=new K0(Wc(f.path),E,{includeMetadataChanges:!0,ka:!0});return q0(l,I)}(await Sf(r),r.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="firestore.googleapis.com",mv=!0;class gv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ow,this.ssl=mv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:mv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CR)throw new ye(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new eC;switch(i.type){case"firstParty":return new iC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=pv.get(t);i&&(he("ComponentProvider","Removing Datastore"),pv.delete(t),i.terminate())}(this),Promise.resolve()}}function KA(r,e,t,i={}){var o;r=jr(r,eh);const l=sa(e),h=r._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${t}`;l&&(Gv(`https://${g}`),Kv("Firestore",!0)),h.host!==ow&&h.host!==g&&cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:g,ssl:l,emulatorOptions:i});if(!ls(v,f)&&(r._setSettings(v),i.mockUserToken)){let E,I;if(typeof i.mockUserToken=="string")E=i.mockUserToken,I=Xt.MOCK_USER;else{E=$I(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new ye(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Xt(x)}r._authCredentials=new tC(new W_(E,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new th(this.firestore,e,this._query)}}class It{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}toJSON(){return{type:It._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Pl(t,It._jsonSchema))return new It(e,i||null,new Se(lt.fromString(t.referencePath)))}}It._jsonSchemaVersion="firestore/documentReference/1.0",It._jsonSchema={type:At("string",It._jsonSchemaVersion),referencePath:At("string")};class as extends th{constructor(e,t,i){super(e,t,Wc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new Se(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function Ki(r,e,...t){if(r=Tt(r),G_("collection","path",e),r instanceof eh){const i=lt.fromString(e,...t);return by(i),new as(r,null,i)}{if(!(r instanceof It||r instanceof as))throw new ye(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(lt.fromString(e,...t));return by(i),new as(r.firestore,null,i)}}function gr(r,e,...t){if(r=Tt(r),arguments.length===1&&(e=Gf.newId()),G_("doc","path",e),r instanceof eh){const i=lt.fromString(e,...t);return Py(i),new It(r,null,new Se(i))}{if(!(r instanceof It||r instanceof as))throw new ye(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(lt.fromString(e,...t));return Py(i),new It(r.firestore,r instanceof as?r.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="AsyncQueue";class vv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new j0(this,"async_queue_retry"),this.oc=()=>{const i=Qd();i&&he(yv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Qd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Qd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new os;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ha(e))throw e;he(yv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,yi("INTERNAL UNHANDLED ERROR: ",_v(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=dp.createAndSchedule(this,e,t,i,l=>this.lc(l));return this.ec.push(o),o}ac(){this.tc&&ke(47125,{hc:_v(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function _v(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(r){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class na extends eh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new vv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vv(e),this._firestoreClient=void 0,await e}}}function QA(r,e){const t=typeof r=="object"?r:Xv(),i=typeof r=="string"?r:xc,o=Nf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=BI("firestore");l&&KA(o,...l)}return o}function yp(r){if(r._terminated)throw new ye(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||YA(r),r._firestoreClient}function YA(r){var e,t,i;const o=r._freezeSettings(),l=function(f,g,v,E){return new wC(f,g,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,sw(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new $A(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zn(qt.fromBase64String(e))}catch(t){throw new ye(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zn(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pl(e,Zn._jsonSchema))return Zn.fromBase64String(e.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:At("string",Zn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Pl(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:At("string",Br._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pl(e,Hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Hr(e.vectorValues);throw new ye(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:At("string",Hr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=/^__.*__$/;class XA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new vs(e,this.data,this.fieldMask,t,this.fieldTransforms):new bl(e,this.data,t,this.fieldTransforms)}}class aw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new vs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ec:r})}}class ih{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ih(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Vc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(lw(this.Ec)&&JA.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class ZA{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Jc(e)}Dc(e,t,i,o=!1){return new ih({Ec:e,methodName:t,bc:i,path:Wt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uw(r){const e=r._freezeSettings(),t=Jc(r._databaseId);return new ZA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function eP(r,e,t,i,o,l={}){const h=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);_p("Data must be an object, but it was:",h,i);const f=cw(i,h);let g,v;if(l.merge)g=new Mn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const I of l.mergeFields){const x=xf(e,I,t);if(!h.contains(x))throw new ye(J.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);dw(E,x)||E.push(x)}g=new Mn(E),v=h.fieldTransforms.filter(I=>g.covers(I.field))}else g=null,v=h.fieldTransforms;return new XA(new In(f),g,v)}class sh extends rh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sh}}function tP(r,e,t){return new ih({Ec:3,bc:e.settings.bc,methodName:r._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vp extends rh{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=tP(this,e,!0),i=this.vc.map(l=>Ol(l,t)),o=new Zo(i);return new GC(e.path,o)}isEqual(e){return e instanceof vp&&ls(this.vc,e.vc)}}function nP(r,e,t,i){const o=r.Dc(1,e,t);_p("Data must be an object, but it was:",o,i);const l=[],h=In.empty();ys(i,(g,v)=>{const E=wp(e,g,t);v=Tt(v);const I=o.gc(E);if(v instanceof sh)l.push(E);else{const x=Ol(v,I);x!=null&&(l.push(E),h.set(E,x))}});const f=new Mn(l);return new aw(h,f,o.fieldTransforms)}function rP(r,e,t,i,o,l){const h=r.Dc(1,e,t),f=[xf(e,i,t)],g=[o];if(l.length%2!=0)throw new ye(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)f.push(xf(e,l[x])),g.push(l[x+1]);const v=[],E=In.empty();for(let x=f.length-1;x>=0;--x)if(!dw(v,f[x])){const j=f[x];let q=g[x];q=Tt(q);const H=h.gc(j);if(q instanceof sh)v.push(j);else{const M=Ol(q,H);M!=null&&(v.push(j),E.set(j,M))}}const I=new Mn(v);return new aw(E,I,h.fieldTransforms)}function Ol(r,e){if(hw(r=Tt(r)))return _p("Unsupported field value:",e,r),cw(r,e);if(r instanceof rh)return function(i,o){if(!lw(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,o){const l=[];let h=0;for(const f of i){let g=Ol(f,o.yc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(r,e)}return function(i,o){if((i=Tt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $C(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ut.fromDate(i);return{timestampValue:kc(o.serializer,l)}}if(i instanceof ut){const l=new ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kc(o.serializer,l)}}if(i instanceof Br)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Zn)return{bytesValue:R0(o.serializer,i._byteString)};if(i instanceof It){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:rp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Hr)return function(h,f){return{mapValue:{fields:{[n0]:{stringValue:r0},[Cc]:{arrayValue:{values:h.toArray().map(v=>{if(typeof v!="number")throw f.wc("VectorValues must only contain numeric values.");return ep(f.serializer,v)})}}}}}}(i,o);throw o.wc(`Unsupported field value: ${Kf(i)}`)}(r,e)}function cw(r,e){const t={};return Y_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ys(r,(i,o)=>{const l=Ol(o,e.Vc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function hw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ut||r instanceof Br||r instanceof Zn||r instanceof It||r instanceof rh||r instanceof Hr)}function _p(r,e,t){if(!hw(t)||!K_(t)){const i=Kf(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function xf(r,e,t){if((e=Tt(e))instanceof nh)return e._internalPath;if(typeof e=="string")return wp(r,e);throw Vc("Field path arguments must be of type string or ",r,!1,void 0,t)}const iP=new RegExp("[~\\*/\\[\\]]");function wp(r,e,t){if(e.search(iP)>=0)throw Vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new nh(...e.split("."))._internalPath}catch{throw Vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Vc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new ye(J.INVALID_ARGUMENT,f+r+g)}function dw(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sP extends fw{data(){return super.data()}}function pw(r,e){return typeof e=="string"?wp(r,e):e instanceof nh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aP{convertValue(e,t="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ys(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Cc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>Et(h.doubleValue));return new Hr(l)}convertGeoPoint(e){return new Br(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Hc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(wl(e));default:return null}}convertTimestamp(e){const t=ds(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=lt.fromString(e);Xe(D0(i),9688,{name:e});const o=new El(i.get(1),i.get(3)),l=new Se(i.popFirst(5));return o.isEqual(t)||yi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class nl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ws extends fw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(pw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ws._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:At("string",Ws._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class pc extends Ws{data(e={}){return super.data(e)}}class Ko{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new nl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new pc(this._firestore,this._userDataWriter,i.key,i,new nl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(f=>{const g=new pc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new nl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const g=new pc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new nl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return f.type!==0&&(v=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:uP(f.type),doc:g,oldIndex:v,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(r){r=jr(r,It);const e=jr(r.firestore,na);return GA(yp(e),r._key).then(t=>yw(e,r,t))}Ko._jsonSchemaVersion="firestore/querySnapshot/1.0",Ko._jsonSchema={type:At("string",Ko._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class mw extends aP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,t)}}function rl(r,e,t){r=jr(r,It);const i=jr(r.firestore,na),o=lP(r.converter,e,t);return gw(i,[eP(uw(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Ur.none())])}function rc(r,e,t,...i){r=jr(r,It);const o=jr(r.firestore,na),l=uw(o);let h;return h=typeof(e=Tt(e))=="string"||e instanceof nh?rP(l,"updateDoc",r._key,e,t,i):nP(l,"updateDoc",r._key,e),gw(o,[h.toMutation(r._key,Ur.exists(!0))])}function Lo(r,...e){var t,i,o;r=Tt(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||wv(e[h])||(l=e[h++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(wv(e[h])){const I=e[h];e[h]=(t=I.next)===null||t===void 0?void 0:t.bind(I),e[h+1]=(i=I.error)===null||i===void 0?void 0:i.bind(I),e[h+2]=(o=I.complete)===null||o===void 0?void 0:o.bind(I)}let g,v,E;if(r instanceof It)v=jr(r.firestore,na),E=Wc(r._key.path),g={next:I=>{e[h]&&e[h](yw(v,r,I))},error:e[h+1],complete:e[h+2]};else{const I=jr(r,th);v=jr(I.firestore,na),E=I._query;const x=new mw(v);g={next:j=>{e[h]&&e[h](new Ko(v,x,I,j))},error:e[h+1],complete:e[h+2]},oP(r._query)}return function(x,j,q,H){const M=new rw(H),le=new K0(j,M,q);return x.asyncQueue.enqueueAndForget(async()=>q0(await Sf(x),le)),()=>{M.Ou(),x.asyncQueue.enqueueAndForget(async()=>G0(await Sf(x),le))}}(yp(v),E,f,g)}function gw(r,e){return function(i,o){const l=new os;return i.asyncQueue.enqueueAndForget(async()=>VA(await qA(i),o,l)),l.promise}(yp(r),e)}function yw(r,e,t){const i=t.docs.get(e._key),o=new mw(r);return new Ws(r,o,e._key,i,new nl(t.hasPendingWrites,t.fromCache),e.converter)}function Iv(...r){return new vp("arrayUnion",r)}(function(e,t=!0){(function(o){ua=o})(aa),Qo(new qs("firestore",(i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new na(new nC(i.getProvider("auth-internal")),new sC(h,i.getProvider("app-check-internal")),function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ye(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(v.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),is(Sy,xy,e),is(Sy,xy,"esm2017")})();const Tv=({rating:r,onRatingChange:e,readOnly:t=!1})=>{const i=[1,2,3,4,5];return _.jsx("div",{className:"star-rating",children:i.map(o=>_.jsx("span",{className:`star ${o<=r?"filled":""}`,"data-value":o,onClick:()=>!t&&e(o),onMouseOver:l=>{if(!t){const h=l.currentTarget;Array.from(h.parentNode.children).forEach(g=>{parseInt(g.dataset.value)<=o?g.classList.add("filled"):g.classList.remove("filled")})}},onMouseOut:l=>{if(!t){const h=l.currentTarget;Array.from(h.parentNode.children).forEach(g=>{parseInt(g.dataset.value)<=r?g.classList.add("filled"):g.classList.remove("filled")})}},style:{cursor:t?"default":"pointer"},children:""},o))})},cP=["fuck","shit","asshole","bitch","cunt","damn","hell"],Cf=250,hP=["Certified Nursing Assistant (CNA)","Licensed Practical Nurse (LPN) / Licensed Vocational Nurse (LVN)","Registered Nurse (RN)","Nurse Practitioner (NP)","Family Nurse Practitioner (FNP)","Adult-Gerontology Nurse Practitioner (AGNP)","Pediatric Nurse Practitioner (PNP)","Psychiatric Mental Health Nurse Practitioner (PMHNP)","Acute Care Nurse Practitioner (ACNP)","Women's Health Nurse Practitioner (WHNP)","Certified Registered Nurse Anesthetist (CRNA)","Clinical Nurse Specialist (CNS)","Certified Nurse-Midwife (CNM)","Cardiac Nurse","Critical Care Nurse (ICU Nurse)","Emergency Nurse (ER Nurse)","Oncology Nurse","Pediatric Nurse","Labor and Delivery Nurse","Neonatal Intensive Care Unit (NICU) Nurse","Medical-Surgical Nurse","Geriatric Nurse","Psychiatric/Mental Health Nurse","Home Health Nurse","Public Health Nurse","School Nurse","Perioperative Nurse (Operating Room Nurse)","Rehabilitation Nurse","Hospice Nurse / Palliative Care Nurse","Forensic Nurse","Travel Nurse","Infusion Nurse","Nephrology Nurse","Diabetic Nurse","Dermatology Nurse","Gastroenterology Nurse","Orthopedic Nurse","Urology Nurse","Wound Care Nurse","Ostomy Care Nurse","Informatics Nurse","Research Nurse","Case Management Nurse","Nurse Educator","Nurse Administrator/Manager","Occupational Health Nurse","Flight Nurse / Transport Nurse","Correctional Nurse","IV Therapy Nurse","Transplant Nurse","Genetics Nurse","Pain Management Nurse","Military Nurse","Ambulatory Care Nurse","Endoscopy Nurse","Plastic Surgery Nurse","Rural Health Nurse","Parish Nurse / Faith Community Nurse","Camp Nurse","Hyperbaric Nurse","Legal Nurse Consultant","Integrative Health Nurse"],Mo=["Select your nursing field...",...hP.sort()];function Sv(r){const e=r.toLowerCase();for(const t of cP)if(e.includes(t))return{isValid:!1,message:"Content contains inappropriate language."};return r.length>Cf?{isValid:!1,message:`Content exceeds ${Cf} character limit.`}:{isValid:!0,message:"Content is valid."}}let dP=class extends ci.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ReviewsHubPage ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?_.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-120px)] p-4 bg-red-100 text-red-800 rounded-lg shadow-md",children:[_.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong."}),_.jsx("p",{className:"text-lg text-center mb-2",children:"We're sorry, but there was an error loading this section."}),_.jsx("p",{className:"text-sm text-red-600 text-center",children:this.state.error&&this.state.error.toString()}),_.jsxs("details",{className:"mt-4 text-left text-sm p-2 bg-red-50 rounded-md",children:[_.jsx("summary",{className:"font-semibold cursor-pointer",children:"Error Details"}),_.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words text-red-700",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),_.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"mt-6 px-6 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-colors",children:"Try Again"})]}):this.props.children}};const vw=()=>{const{db:r,currentUserId:e,currentUserIsAnonymous:t,authReady:i,appId:o,showMessage:l,setShowAuthModal:h}=L.useContext(oh),[f,g]=L.useState(""),[v,E]=L.useState([]),[I,x]=L.useState([]),[j,q]=L.useState(!0),[H,M]=L.useState(!1),[le,X]=L.useState(!1),[Q,de]=L.useState(20),[te,_e]=L.useState(null),[k,S]=L.useState(""),[C,P]=L.useState([]),[N,V]=L.useState([]),[A,qe]=L.useState(!1),[Ge,tt]=L.useState(!1),[Z,W]=L.useState(null),[oe,ie]=L.useState([]),[O,G]=L.useState(!1),[pe,we]=L.useState(!1),[be,Ae]=L.useState(""),[Le,Ne]=L.useState(0),[Ee,st]=L.useState(Mo[0]),[un,nn]=L.useState(""),[Sn,xn]=L.useState([]),[_r,Cn]=L.useState(!1),[wr,nr]=L.useState(!1),[Fn,Ie]=L.useState({}),[Qe,Rn]=L.useState({}),[Er,Ir]=L.useState(!1),[Tr,yt]=L.useState(""),[ct,Un]=L.useState(""),[qr,An]=L.useState(!1),[zn,Sr]=L.useState(""),[xr,Ei]=L.useState(""),Gr=ci.useRef(null),rr=ci.useRef(null),Kr=ci.useRef(null),Cr=ci.useRef(null),Qr=ci.useRef(null);console.log("ReviewsHubPage: Component rendered."),L.useEffect(()=>{let Y=()=>{};if(console.log("ReviewsHubPage: useEffect for hospital onSnapshot. DB, AppId Ready:",!!r,!!o),r&&o){q(!0),M(!1);const Pe=Ki(r,`artifacts/${o}/public/data/hospitals`);Y=Lo(Pe,xe=>{console.log("ReviewsHubPage: onSnapshot triggered for hospitals.");const Te=[];xe.forEach(Fe=>{const Ze=Fe.data();Ze.name&&Te.push({id:Fe.id,name:Ze.name,location:Ze.location||""})}),Te.sort((Fe,Ze)=>Fe.name.localeCompare(Ze.name)),console.log("ReviewsHubPage: Fetched Hospitals from snapshot:",Te.length),E(Te),q(!1),M(Te.length===0)},xe=>{console.error("ReviewsHubPage: Error fetching hospitals with onSnapshot:",xe),l("Error loading hospitals.","error"),q(!1),M(!0)})}else q(!0),E([]),x([]),M(!1),X(!1);return()=>{console.log("ReviewsHubPage: Cleaning up hospital onSnapshot listener."),Y()}},[r,o,Ki,Lo,l]);const Ii=L.useCallback(async Y=>{if(Y.preventDefault(),!e||t){l("You must be logged in to add a hospital. Please sign up or log in.","error"),h(!0);return}if(!r||!o){l("Firebase not ready to add a hospital.","error");return}if(!Tr.trim()||!ct.trim()){l("Please enter both hospital name and location.","error");return}try{const xe={id:Date.now().toString(),name:Tr.trim(),location:ct.trim()};E(Fe=>[...Fe,xe].sort((Ze,vt)=>Ze.name.localeCompare(vt.name))),yt(""),Un(""),Ir(!1);const Te=gr(Ki(r,`artifacts/${o}/public/data/hospitals`));await rl(Te,{name:xe.name,location:xe.location,createdAt:new Date().toISOString(),createdBy:e}),l("Hospital added successfully! You can now add doctors to it.","success"),Cr.current&&setTimeout(()=>{const Fe=document.querySelector(`button.bg-gray-100[data-hospital-name="${xe.name}"]`);Fe&&Fe.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(Pe){console.error("ReviewsHubPage: Error adding hospital:",Pe),l(`Error adding hospital: ${Pe.message}`,"error"),E(xe=>xe.filter(Te=>Te.id!==tempId))}},[e,t,r,o,Tr,ct,l,Ki,gr,rl,h]);L.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering hospitals triggered. HospitalInput:",f,"CurrentDisplayCount:",Q);const Y=f.trim().toLowerCase(),Pe=v.filter(xe=>xe.name.toLowerCase().includes(Y)||xe.location&&xe.location.toLowerCase().includes(Y));x(Pe.slice(0,Q)),X(Pe.length>Q),M(Pe.length===0&&!j)},[v,f,Q,j]);const cn=L.useCallback(()=>{de(Y=>Y+20)},[]),Bn=L.useCallback(async Y=>{if(console.log("ReviewsHubPage: handleHospitalSelect called for hospital:",Y.name),_e(Y),console.log("ReviewsHubPage: Populating hospitalInput with:",Y.name),g(Y.name),S(""),qe(!0),tt(!1),P([]),V([]),An(!1),!r||!o||!Y.id){l("Firebase or hospital ID missing for fetching doctors.","error"),qe(!1),tt(!0);return}const Pe=Ki(r,`artifacts/${o}/public/data/hospitals/${Y.id}/doctors`);return Lo(Pe,Te=>{console.log("ReviewsHubPage: onSnapshot triggered for doctors.");const Fe=[];Te.forEach(Ye=>{const Je=Ye.data(),hn=Je.ratings||[],dn=hn.length>0?hn.reduce((Yr,Pn)=>Yr+(Pn.stars||0),0)/hn.length:0;Je.name&&Fe.push({id:Ye.id,hospitalId:Y.id,...Je,averageRating:dn,numReviews:hn.length})}),Fe.sort((Ye,Je)=>Ye.name.localeCompare(Je.name)),console.log("ReviewsHubPage: Fetched Doctors from snapshot for selected hospital:",Fe.length),P(Fe),qe(!1),tt(Fe.length===0);const Ze=k.trim().toLowerCase(),vt=Fe.filter(Ye=>Ye.name.toLowerCase().includes(Ze)||Ye.specialty&&Ye.specialty.toLowerCase().includes(Ze));V(vt)},Te=>{console.error("ReviewsHubPage: Error fetching doctors with onSnapshot:",Te),l("Error loading doctors.","error"),qe(!1),tt(!0)})},[r,o,l,k,Ki,Lo]);L.useEffect(()=>{te&&Gr.current&&document.activeElement!==document.getElementById("hospital-input")&&(console.log("ReviewsHubPage: Scrolling useEffect triggered for doctor selection section."),setTimeout(()=>{requestAnimationFrame(()=>{Gr.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[te]),L.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering doctors triggered. DoctorInput:",k);const Y=k.trim().toLowerCase(),Pe=C.filter(xe=>xe.name.toLowerCase().includes(Y)||xe.specialty&&xe.specialty.toLowerCase().includes(Y));V(Pe)},[C,k]);const Ti=L.useCallback(async Y=>{if(Y.preventDefault(),!e||t){l("You must be logged in to add a doctor. Please sign up or log in.","error"),h(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!te||!te.id){l("Please select a hospital first to add a doctor.","error");return}if(!zn.trim()||!xr.trim()){l("Please enter both doctor name and specialty.","error");return}try{const xe={id:Date.now().toString(),hospitalId:te.id,name:zn.trim(),specialty:xr.trim(),ratings:[],averageRating:0,numReviews:0};P(Fe=>[...Fe,xe].sort((Ze,vt)=>Ze.name.localeCompare(vt.name))),Sr(""),Ei(""),An(!1);const Te=gr(Ki(r,`artifacts/${o}/public/data/hospitals/${te.id}/doctors`));await rl(Te,{name:xe.name,specialty:xe.specialty,ratings:[],createdAt:new Date().toISOString(),createdBy:e}),l(`Dr. ${xe.name} added successfully to ${te.name}!`,"success"),Qr.current&&setTimeout(()=>{const Fe=document.querySelector(`button.bg-gray-100[data-doctor-name="${xe.name}"]`);Fe&&Fe.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(Pe){console.error("ReviewsHubPage: Error adding doctor:",Pe),l(`Error adding doctor: ${Pe.message}`,"error"),P(xe=>xe.filter(Te=>Te.id!==tempId))}},[e,t,r,o,te,zn,xr,l,Ki,gr,rl,h]),Hn=L.useCallback(async Y=>{console.log("ReviewsHubPage: handleDoctorSelect called for doctor:",Y.name),W(Y),S(Y.name),G(!0),we(!1),window.innerWidth<1024?nr(!1):nr(!0),rr.current&&(console.log("ReviewsHubPage: Scrolling to doctor reviews display section."),setTimeout(()=>{rr.current.scrollIntoView({behavior:"smooth",block:"start"})},100))},[]);L.useEffect(()=>{let Y=()=>{};if(Z&&r&&o){const Pe=gr(r,`artifacts/${o}/public/data/hospitals/${Z.hospitalId}/doctors/${Z.id}`);console.log("ReviewsHubPage: Setting up onSnapshot for doctorDocRef:",Pe.path),Y=Lo(Pe,xe=>{var Te;if(console.log("ReviewsHubPage: onSnapshot triggered for doctorDocRef."),G(!1),!xe.exists()||!((Te=xe.data())!=null&&Te.ratings)||xe.data().ratings.length===0)console.log("ReviewsHubPage: No reviews or document data for this doctor found in snapshot."),we(!0),ie([]);else{we(!1);const Ze=xe.data().ratings||[];console.log("ReviewsHubPage: Fetched reviews from snapshot:",Ze.length),Ze.sort((Ye,Je)=>{const hn=Ye.date?Ye.date.seconds?Ye.date.seconds*1e3:new Date(Ye.date).getTime():0;return(Je.date?Je.date.seconds?Je.date.seconds*1e3:new Date(Je.date).getTime():0)-hn});const vt=Ze.map(Ye=>({...Ye,date:Ye.date&&typeof Ye.date.toDate=="function"?Ye.date.toDate():new Date(Ye.date),comments:Ye.comments?Ye.comments.map(Je=>({...Je,date:Je.date&&typeof Je.date.toDate=="function"?Je.date.toDate():new Date(Je.date)})):[]}));ie(vt),console.log("ReviewsHubPage: Reviews state updated. Current reviews count:",vt.length)}},xe=>{console.error("ReviewsHubPage: Error fetching reviews with onSnapshot:",xe),l("Error loading reviews.","error"),G(!1),we(!0)})}else ie([]),we(!1),G(!1);return()=>{console.log("ReviewsHubPage: Cleaning up onSnapshot listener."),Y()}},[Z,r,o,l,gr,Lo]);const _s=L.useCallback(async()=>{if(console.log("ReviewsHubPage: handleSubmitReview called."),!e||t){l("You must be logged in to submit a review. Please sign up or log in.","error"),h(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!te||!Z){l("Please select a hospital and doctor before submitting a review.","error");return}if(Ee===Mo[0]||Ee.trim()===""){l("Please select or type your nursing field.","error");return}const Y=Sv(be);if(!Y.isValid){l(Y.message,"error");return}if(Le===0){l("Please select a star rating.","error");return}try{const Pe=gr(r,`artifacts/${o}/public/data/hospitals/${te.id}/doctors/${Z.id}`),xe={stars:Le,comment:be,reviewerId:`RN-${e.substring(0,5)}`,date:new Date,hospitalName:te.name,doctorName:Z.name,nursingField:Ee,comments:[]};console.log("ReviewsHubPage: Submitting new review:",xe),await rc(Pe,{ratings:Iv(xe)}),Ae(""),Ne(0),st(Mo[0]),nn(""),l("Review submitted successfully!","success"),console.log("ReviewsHubPage: Review submitted successfully!")}catch(Pe){console.error("ReviewsHubPage: Error adding review: ",Pe),l(`Error submitting review: ${Pe.message}`,"error")}},[e,t,te,Z,be,Le,Ee,r,o,l,gr,rc,Iv,h]),Rr=L.useCallback(async(Y,Pe)=>{if(console.log("ReviewsHubPage: handleAddCommentToReview called."),!e||t){l("You must be logged in to add a comment. Please sign up or log in.","error"),h(!0);return}if(Pe.trim()===""){l("Comment cannot be empty.","error");return}if(!te||!Z){l("Hospital or doctor not selected.","error");return}const xe=Sv(Pe);if(!xe.isValid){l(xe.message,"error");return}try{console.log("ReviewsHubPage: Attempting to fetch doctor document for comment update.");const Te=gr(r,`artifacts/${o}/public/data/hospitals/${te.id}/doctors/${Z.id}`),Fe=await Ev(Te);if(Fe.exists()){let vt=[...Fe.data().ratings||[]];console.log("ReviewsHubPage: Current ratings from doc:",vt);const Ye=vt.findIndex(Je=>{const hn=Je.date?typeof Je.date.toDate=="function"?Je.date.toDate().getTime():new Date(Je.date).getTime():0;return console.log(`ReviewsHubPage: Comparing reviewDateMillis ${Y} with review date ${hn}`),hn===Y});if(Ye!==-1){const Je={text:Pe,userId:`RN-${e.substring(0,5)}`,date:new Date};vt[Ye].comments=vt[Ye].comments||[],vt[Ye].comments.push(Je),console.log("ReviewsHubPage: New comment added to array. Updated ratings structure:",vt),console.log("ReviewsHubPage: Updating doc with new comments array."),await rc(Te,{ratings:vt}),l("Comment added successfully!","success"),console.log("ReviewsHubPage: Comment added successfully to review index",Ye,"for doctor",Z.id),Ie({}),Rn({})}else l("Error posting comment: Could not find review to update.","error"),console.error("ReviewsHubPage: Error: Review not found by timestamp for doctor",Z.id)}else l("Error posting comment: Doctor document not found.","error"),console.error("ReviewsHubPage: Doctor document not found for comment addition:",Z.id)}catch(Te){console.error("ReviewsHubPage: Error adding comment to review: ",Te),l(`Error posting comment: ${Te.message}`,"error")}},[e,t,te,Z,r,o,l,gr,Ev,rc,h]),ws=L.useCallback(()=>{if(!e||t){l("You must be logged in to write a review. Please sign up or log in.","error"),h(!0);return}nr(!0),Kr.current&&Kr.current.scrollIntoView({behavior:"smooth",block:"start"})},[e,t,l,h]),ir=L.useCallback(()=>{nr(!1),rr.current&&rr.current.scrollIntoView({behavior:"smooth",block:"start"})},[]),Es=Y=>{const Pe=Y.target.value;if(nn(Pe),st(Pe),Pe.length>0){const xe=Mo.filter(Te=>Te.toLowerCase().includes(Pe.toLowerCase())&&Te!==Mo[0]);xn(xe),Cn(!0)}else xn([]),Cn(!1),st(Mo[0])},ft=Y=>{nn(Y),st(Y),Cn(!1),xn([])};return _.jsx(dP,{children:_.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8 pt-20",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:[" ",_.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:["Share Your RN",_.jsx("span",{className:"text-[#CC5500]",children:"Tea"}),"!"]}),_.jsxs("section",{id:"hospital-selection-section",className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[_.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Which hospital are you interested in?"}),_.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[_.jsx("input",{type:"text",id:"hospital-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Search for a hospital...",value:f,onChange:Y=>g(Y.target.value)}),_.jsx("button",{id:"search-hospital-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Hospital"})]}),_.jsxs("div",{className:"text-center mb-6",children:[_.jsx("button",{onClick:()=>{!e||t?(l("Login or Sign Up to add a hospital.","info"),h(!0)):Ir(Y=>!Y)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:Er&&e&&!t?"Hide Add Hospital Form":_.jsxs(_.Fragment,{children:["or ",_.jsx("span",{className:"text-[#CC5500]",children:"Add Hospital"})]})}),Er&&e&&!t&&_.jsxs("form",{ref:Cr,onSubmit:Ii,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[_.jsx("input",{type:"text",placeholder:"New Hospital Name",value:Tr,onChange:Y=>yt(Y.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),_.jsx("input",{type:"text",placeholder:"Location (e.g., Boston, MA)",value:ct,onChange:Y=>Un(Y.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),_.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Hospital"}),_.jsx("button",{type:"button",onClick:()=>Ir(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]}),Er&&(!e||t)&&_.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a hospital."})]}),_.jsxs("div",{className:"mb-4 mt-8",children:[_.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Hospitals with reviews:"}),_.jsxs("div",{id:"hospitals-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[" ",j&&_.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading hospitals..."}),H&&!j&&_.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No hospitals found yet. Be the first to add a review!"}),I.map(Y=>_.jsx("button",{"data-hospital-name":Y.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>Bn(Y),children:Y.name},Y.id))]}),le&&_.jsx("button",{id:"load-more-hospitals-btn",className:"mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 w-full btn-hover-scale",onClick:cn,children:"Load More Hospitals"})]})]}),_.jsxs("section",{id:"doctor-selection-section",ref:Gr,className:`bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${te?"":"hidden"}`,children:[_.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Select a doctor"}),_.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[_.jsx("input",{type:"text",id:"doctor-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"e.g., Dr. Sarah Lee",value:k,onChange:Y=>S(Y.target.value)}),_.jsx("button",{id:"select-doctor-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Doctor"})]}),_.jsxs("div",{className:"text-center mb-6",children:[_.jsx("button",{onClick:()=>{!e||t?(l("Login or Sign Up to add a doctor.","info"),h(!0)):An(Y=>!Y)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:qr&&e&&!t?"Hide Add Doctor Form":_.jsxs(_.Fragment,{children:["or ",_.jsx("span",{className:"text-[#CC5500]",children:"Add Doctor"})]})}),qr&&e&&!t&&_.jsxs("form",{ref:Qr,onSubmit:Ti,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[_.jsx("input",{type:"text",placeholder:"New Doctor Name",value:zn,onChange:Y=>Sr(Y.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),_.jsx("input",{type:"text",placeholder:"Specialty (e.g., Cardiologist)",value:xr,onChange:Y=>Ei(Y.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),_.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Doctor"}),_.jsx("button",{type:"button",onClick:()=>An(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]}),qr&&(!e||t)&&_.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a doctor."})]}),_.jsxs("div",{className:"mb-4",children:[_.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:["Doctors with reviews at ",_.jsx("span",{id:"display-selected-hospital",className:"text-gray-800",children:te==null?void 0:te.name}),":"]}),_.jsxs("div",{id:"doctors-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[" ",A&&_.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading doctors..."}),Ge&&!A&&_.jsx("p",{className:"text-500 italic w-full text-center",children:"No doctors found for this hospital yet."}),N.map(Y=>_.jsx("button",{"data-doctor-name":Y.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-custom-beige hover:text-gray-800 transition duration-200 btn-hover-scale",onClick:()=>Hn(Y),children:`${Y.name} (${Y.specialty||"N/A"}) - Avg. ${Y.averageRating.toFixed(1)}  (${Y.numReviews})`},Y.id))]})]})]}),_.jsxs("div",{id:"reviews-content-grid",className:`grid grid-cols-1 lg:grid-cols-3 gap-8 ${Z?"":"hidden"}`,children:[_.jsxs("section",{id:"review-submission-section",ref:Kr,className:`lg:col-span-1 bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${wr||window.innerWidth>=1024?"":"hidden"}`,children:[_.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:["Write a Review for ",_.jsx("span",{id:"display-selected-doctor-submission",className:"text-[#CC5500]",children:Z==null?void 0:Z.name})]}),_.jsxs("div",{className:"mb-4",children:[_.jsx("label",{htmlFor:"review-stars",className:"block text-gray-700 text-sm font-medium mb-2",children:"Rating"}),_.jsx(Tv,{rating:Le,onRatingChange:Ne})]}),_.jsxs("div",{className:"mb-4 relative",children:[" ",_.jsx("label",{htmlFor:"nursing-field-input",className:"block text-gray-700 text-sm font-medium mb-2",children:"Which field of Nursing are you?"}),_.jsx("input",{type:"text",id:"nursing-field-input",className:"w-full p-3 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Start typing your nursing field...",value:un,onChange:Es,onFocus:()=>Cn(!0),onBlur:()=>setTimeout(()=>Cn(!1),100)}),_r&&Sn.length>0&&_.jsx("ul",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto mt-1",children:Sn.map((Y,Pe)=>_.jsx("li",{className:"p-3 hover:bg-gray-100 cursor-pointer text-gray-800",onClick:()=>ft(Y),children:Y},Pe))})]}),_.jsx("textarea",{id:"review-text",className:"w-full p-3 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-custom-beige",rows:"6",placeholder:"Share your experience or review here...",value:be,onChange:Y=>Ae(Y.target.value),maxLength:Cf}),_.jsx("button",{id:"submit-review-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full btn-hover-scale",onClick:_s,children:"Submit Review"}),_.jsxs("div",{className:"text-sm text-gray-500 mt-4",children:["Your User ID: ",_.jsx("span",{id:"display-user-id",children:e})]}),window.innerWidth<1024&&_.jsx("button",{id:"cancel-review-mobile-btn",className:"bg-gray-400 text-white px-4 py-2 rounded-full mt-4 w-full",onClick:ir,children:"Cancel"})]}),_.jsxs("section",{id:"doctor-reviews-display",ref:rr,className:"lg:col-span-2 bg-custom-beige p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[_.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:["Reviews for ",_.jsx("span",{id:"display-selected-doctor-reviews",className:"text-[#CC5500] font-extrabold",children:Z&&Z.name?Z.name:""})]}),window.innerWidth<1024&&!wr&&_.jsxs("button",{id:"add-review-mobile-btn",className:"bg-[#001346] text-white px-5 py-2 rounded-md hover:bg-[#000A2C] transition duration-200 btn-hover-scale mb-4 w-full",onClick:ws,children:["Write a Review for ",Z==null?void 0:Z.name]}),O&&_.jsx("p",{className:"text-gray-700 italic text-center","aria-live":"polite",children:"Loading reviews..."})," ",pe&&!O&&_.jsx("p",{className:"text-gray-700 italic text-center","aria-live":"polite",children:"No reviews found for this doctor yet. Be the first to add one!"})," ",oe.length>0&&_.jsx("div",{id:"reviews-list",className:"space-y-6",children:oe.map((Y,Pe)=>{const xe={"@context":"https://schema.org","@type":"Review",itemReviewed:{"@type":"Physician",name:Z==null?void 0:Z.name,url:`https://www.myrntea.com/doctors/${Z==null?void 0:Z.id}`},reviewRating:{"@type":"Rating",ratingValue:Y.stars,bestRating:5},author:{"@type":"Person",name:Y.reviewerId},reviewBody:Y.comment,datePublished:Y.date instanceof Date?Y.date.toISOString():new Date(Y.date).toISOString()};return _.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-md border border-gray-200",children:[_.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(xe)}}),_.jsx("div",{className:"flex justify-between items-start mb-3",children:_.jsxs("div",{className:"min-w-0",children:[_.jsx(Tv,{rating:Y.stars,onRatingChange:()=>{},readOnly:!0}),_.jsxs("p",{className:"text-sm text-gray-500 mt-1 break-words",children:[Y.nursingField," on: ",Y.date instanceof Date?Y.date.toLocaleDateString():"N/A"]})]})}),_.jsx("p",{className:"text-gray-800 leading-relaxed mb-4",children:Y.comment}),_.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[_.jsxs("h4",{className:"text-md font-semibold text-gray-700 mb-3",children:["Comments (",Y.comments?Y.comments.length:0,")"]}),Y.comments&&Y.comments.length>0?_.jsx("div",{className:"space-y-3 mb-4",children:Y.comments.map((Te,Fe)=>_.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[_.jsx("p",{children:Te.text}),_.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["by ",Te.userId," on ",Te.date instanceof Date?Te.date.toLocaleDateString():"N/A"]})]},Te.date.getTime()+"_"+Fe))}):_.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"No comments yet. Be the first!"}),_.jsx("button",{onClick:()=>{!e||t?(l("Login or Sign Up to add a comment.","info"),h(!0)):Ie(Te=>({...Te,[Y.date.getTime()]:!Te[Y.date.getTime()]}))},className:"text-blue-500 hover:underline text-sm mb-3",children:Fn[Y.date.getTime()]&&e&&!t?"Cancel Comment":"Add a Comment"}),Fn[Y.date.getTime()]&&e&&!t&&_.jsxs("div",{className:"flex mt-2",children:[_.jsx("input",{type:"text",placeholder:"Write a comment...",className:"flex-grow p-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:Te=>{Te.key==="Enter"&&Te.target.value.trim()&&(Rr(Y.date.getTime(),Te.target.value),Te.target.value="")},value:Qe[Y.date.getTime()]||"",onChange:Te=>Rn(Fe=>({...Fe,[Y.date.getTime()]:Te.target.value}))}),_.jsx("button",{className:"submit-comment-btn bg-gray-600 text-white px-4 py-2 rounded-r-md hover:bg-gray-700 transition duration-200 btn-hover-scale",onClick:()=>{const Te=Qe[Y.date.getTime()];Rr(Y.date.getTime(),Te)},children:"Post"})]})]})]},Y.date.getTime()+Pe)})})]})]})]})})},fP=()=>{const r=ia(),{auth:e,showMessage:t,appId:i}=L.useContext(oh),[o,l]=L.useState(""),[h,f]=L.useState(""),[g,v]=L.useState(""),[E,I]=L.useState(""),[x,j]=L.useState(!1),[q,H]=L.useState(!1),M=L.useRef(null);L.useEffect(()=>{if(r.hash){const X=r.hash.substring(1),Q=document.getElementById(X);Q&&setTimeout(()=>{Q.scrollIntoView({behavior:"smooth",block:"start"})},100)}},[r.hash]),L.useEffect(()=>{const X=document.querySelectorAll(".revealable"),Q=new IntersectionObserver((de,te)=>{de.forEach(_e=>{_e.isIntersecting&&(_e.target.style.opacity=1,te.unobserve(_e.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return X.forEach(de=>{Q.observe(de)}),()=>{X.forEach(de=>{Q.unobserve(de)})}},[]),L.useEffect(()=>{const X=()=>{if(e&&!M.current&&window.grecaptcha&&window.grecaptcha.ready){console.log("grecaptcha is ready. Initializing reCAPTCHA Verifier for HomePage...");try{M.current=new O_(e,"recaptcha-container",{size:"invisible",callback:Q=>{console.log("reCAPTCHA callback fired on HomePage:",Q),H(!0)},"expired-callback":()=>{t("reCAPTCHA expired. Please try submitting the form again.","error"),console.log("reCAPTCHA expired on HomePage."),H(!1)}}),M.current.render().then(Q=>{console.log("reCAPTCHA rendered for HomePage with widget ID:",Q),H(!0)}).catch(Q=>{console.error("Error rendering reCAPTCHA for HomePage:",Q),t("Failed to load reCAPTCHA. Please refresh the page.","error"),H(!1)})}catch(Q){console.error("Error creating RecaptchaVerifier instance:",Q),t("Failed to initialize reCAPTCHA. Check console for details.","error"),H(!1)}}else console.log("Waiting for Firebase auth or grecaptcha to be ready...")};if(window.grecaptcha)window.grecaptcha.ready(X);else{console.warn("grecaptcha not found on window. Ensure the reCAPTCHA script is loaded.");const Q=setInterval(()=>{window.grecaptcha&&(window.grecaptcha.ready(X),clearInterval(Q))},200)}return()=>{M.current&&(console.log("Destroying reCAPTCHA Verifier for HomePage..."),M.current.clear(),M.current=null)}},[e,t]);const le=L.useCallback(async X=>{var de;if(X.preventDefault(),j(!0),!o.trim()||!h.trim()||!g.trim()||!E.trim()){t("Please fill in all required fields.","error"),j(!1);return}if(!M.current||!q){t("reCAPTCHA is not ready. Please try again in a moment or refresh the page.","error"),j(!1);return}let Q=null;try{Q=await M.current.execute(),console.log("reCAPTCHA token obtained:",Q)}catch(te){console.error("Error executing reCAPTCHA:",te),t(`reCAPTCHA verification failed: ${te.message}`,"error"),j(!1);return}try{const _e=`${`https://${i}.cloudfunctions.net`}/sendContactEmail`,k=await fetch(_e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{name:o,email:h,subject:g,message:E,recaptchaToken:Q}})}),S=await k.json();if(k.ok&&S.data.success)t("Your message has been sent successfully!","success"),l(""),f(""),v(""),I(""),M.current&&M.current.reset();else{const C=((de=S.data)==null?void 0:de.message)||"Failed to send message. Please try again.";t(`Error: ${C}`,"error")}}catch(te){console.error("Error submitting contact form:",te),t(`An unexpected error occurred: ${te.message}`,"error")}finally{j(!1)}},[o,h,g,E,t,i,e,q]);return _.jsxs(_.Fragment,{children:[_.jsxs("section",{id:"home",className:"relative bg-custom-beige text-gray-800 py-24 px-6 md:px-10 lg:px-16 text-center rounded-lg mx-4 mb-2 shadow-lg overflow-hidden animate-fade-in section-hover",children:[_.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:_.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[_.jsx("defs",{children:_.jsx("pattern",{id:"dot-pattern",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:_.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"#FFC982"})})}),_.jsx("rect",{x:"0",y:"0",width:"100",height:"100",fill:"url(#dot-pattern)"})]})}),_.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[_.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 leading-tight animate-fade-in-down drop-shadow-md",children:"RNTea: Rate, Navigate, Trust."}),_.jsx("p",{className:"text-xl md:text-2xl mb-10 text-gray-700 animate-fade-in-up",children:" Do you really trust your Doctors? Let's hear from experienced RNs for a change. "}),_.jsx(Qi,{to:"#full-reviews-hub",className:"bg-white text-gray-800 hover:bg-gray-100 font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 hover:shadow-2xl border border-gray-200 animate-fade-in-up antialiased",children:" View All Reviews "})]})]}),_.jsx("section",{id:"about",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 mt-2 mb-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:_.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-center gap-12",children:[_.jsx("div",{className:"md:w-1/2 flex justify-center order-2 md:order-1 animate-slide-in-left",children:_.jsx("img",{src:"/Express-collage.jpg",alt:"Collage of diverse medical professionals working together",className:"rounded-lg shadow-xl border-4 w-full max-w-md object-cover",onError:X=>{X.target.onerror=null,X.target.src="https://placehold.co/400x300/F0F0F0/888888?text=Image+Not+Loaded"}})}),_.jsxs("div",{className:"md:w-1/2 text-center md:text-left order-1 md:order-2 animate-slide-in-right",children:[_.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-6",children:"Our Philosophy"}),_.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-4 antialiased",children:"At RNTea, we believe in transparency and community to help you find the best care. Discover insights, share experiences, and make informed decisions with confidence."}),_.jsx("p",{className:"text-lg text-gray-700 leading-relaxed antialiased",children:"Our platform empowers Registered Nurses to share their honest experiences, providing a unique and invaluable perspective on healthcare providers. We aim to build a trusted resource for patients seeking reliable and empathetic care, while also helping nurses navigate career decisions whether it be short term travel contracts or a potential employer."}),_.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mt-4 font-semibold antialiased",children:"Now spill some RNTea!"})]})]})}),_.jsx("section",{id:"full-reviews-hub",className:"relative z-10 scroll-margin-top-adjusted revealable",children:_.jsx(vw,{})}),_.jsx("section",{id:"contact",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 my-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:_.jsxs("div",{className:"container mx-auto",children:[_.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 text-center mb-16 animate-fade-in-down",children:"Contact Us!"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[_.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-left group relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),_.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Send us a Message"}),_.jsxs("form",{onSubmit:le,children:[_.jsxs("div",{className:"mb-4",children:[_.jsx("label",{htmlFor:"your-name",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Name"}),_.jsx("input",{type:"text",id:"your-name",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"John Doe",value:o,onChange:X=>l(X.target.value),required:!0})]}),_.jsxs("div",{className:"mb-4",children:[_.jsx("label",{htmlFor:"your-email",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Email"}),_.jsx("input",{type:"email",id:"your-email",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"you@example.com",value:h,onChange:X=>f(X.target.value),required:!0})]}),_.jsxs("div",{className:"mb-4",children:[_.jsx("label",{htmlFor:"subject",className:"block text-gray-700 text-sm font-medium mb-2",children:"Subject"}),_.jsx("input",{type:"text",id:"subject",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Regarding a review...",value:g,onChange:X=>v(X.target.value),required:!0})]}),_.jsxs("div",{className:"mb-6",children:[_.jsxs("label",{htmlFor:"your-message",className:"block text-gray-700 text-sm font-medium mb-2",children:["Your Message ",_.jsx("span",{className:"text-gray-500",children:"(optional)"})]}),_.jsx("textarea",{id:"your-message",rows:"5",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Share your experience... (optional)",value:E,onChange:X=>I(X.target.value),required:!0})]}),_.jsx("div",{id:"recaptcha-container",className:"mt-4"}),_.jsx("button",{type:"submit",className:"bg-[#FFDEB5] hover:bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-md w-full transition duration-300 ease-in-out",disabled:x,children:x?"Sending...":"Send Message"})]})]}),_.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-right group relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),_.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Find Us"}),_.jsxs("div",{className:"mb-8",children:[_.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Email Addresses"}),_.jsxs("div",{className:"flex items-center mb-3",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-gray-700 font-medium",children:"General Questions"}),_.jsx("a",{href:"mailto:questions@rntea.com",className:"text-blue-600 hover:underline",children:"questions@rntea.com"})]})]}),_.jsxs("div",{className:"flex items-center",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15.75c-2.648 0-5.195-.429-7.669-1.245a2.793 2.793 0 01-1.342-2.934 11.233 11.233 0 013.744-6.436 2.922 2.922 0 011.644-1.018 10.38 10.38 0 015.894 0 2.922 2.922 0 011.644 1.018 11.233 11.233 0 013.744 6.436 2.793 2.793 0 01-1.342 2.934z"})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-gray-700 font-medium",children:"Business Inquiries"}),_.jsx("a",{href:"mailto:business@rntea.com",className:"text-blue-600 hover:underline",children:"business@rntea.com"})]})]})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Connect with Us"}),_.jsxs("div",{className:"flex space-x-6 justify-start",children:[_.jsx("a",{href:"https://facebook.com/rntea",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-600 hover:text-blue-700 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:_.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.271 0-4.192 1.552-4.192 4.615v3.385z"})})}),_.jsx("a",{href:"https://twitter.com/rntea_official",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-gray-800 hover:text-black transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:_.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 1200 1227",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",children:_.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 671.544L0 1226.37H105.866L515.414 750.206L852.076 1226.37H1200L714.163 519.284ZM569.165 687.828L521.617 619.927L144.036 79.6262H302.46L603.935 515.043L651.483 582.944L1055.03 1147.37H896.59L569.165 687.828Z"})})}),_.jsx("a",{href:"https://linkedin.com/company/rntea-4a8149371/",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-700 hover:text-blue-800 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:_.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),_.jsx("a",{href:"https://instagram.com/rntea_official",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-pink-500 hover:text-pink-600 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:_.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:_.jsx("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4c0 3.2-2.6 5.8-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8C2 4.6 4.6 2 7.8 2zm-.2 2A2.2 2.2 0 0 0 5.4 6.2v8.4c0 1.2.9 2.2 2.2 2.2h8.4a2.2 2.2 0 0 0 2.2-2.2V6.2A2.2 2.2 0 0 0 16.2 4H7.6zM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm6.5-3A1.5 1.5 0 1 0 18.5 7 1.5 1.5 0 0 0 18.5 4z"})})})]})]})]})]})]})})]})};function pP({onClose:r}){const e=L.useRef(null);return L.useEffect(()=>{const t=i=>{i.key==="Escape"&&r()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[r]),L.useEffect(()=>{const t=o=>{e.current&&!e.current.contains(o.target)&&r()},i=setTimeout(()=>{document.addEventListener("mousedown",t)},100);return()=>{clearTimeout(i),document.removeEventListener("mousedown",t)}},[r]),_.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:_.jsxs("div",{ref:e,className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative p-6 md:p-8",children:[_.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl font-bold leading-none","aria-label":"Close",children:""}),_.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-6 text-center",children:"The RNTea business Data Protection Protocol"}),_.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mt-8 mb-4 text-center",children:"Version 2.1 | Effective Date: July 12, 2025"}),_.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Preamble"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:'WHEREAS, RNTea business ("RNTea business," "we," "our") is a data-driven enterprise that values the trust placed in it by its users, clients, and partners ("Data Subjects," "you," "your");'}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the processing of personal data is a fundamental aspect of our operations;"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the protection of personal data is a fundamental right, as articulated in international and national legal frameworks, including but not limited to the GDPR (Regulation (EU) 2016/679) and the CCPA (California Civil Code  1798.100 et seq.), and other applicable data protection laws;"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, this Protocol is designed to be a comprehensive, transparent, and legally compliant framework governing our collection, use, retention, and disclosure of personal data;"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"THEREFORE, RNTea business hereby establishes this Data Protection Protocol, which applies to all processing of personal data by the company."}),_.jsx("hr",{className:"my-8 border-t border-gray-300"}),_.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article I: Foundational Principles of Data Processing"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business adheres to the following principles, which govern all data processing activities:"}),_.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[_.jsxs("li",{children:[_.jsx("strong",{children:"Lawfulness, Fairness, and Transparency:"})," We process personal data lawfully, fairly, and in a transparent manner. This Protocol serves as the primary instrument for achieving this transparency."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Purpose Limitation:"})," We collect personal data for specified, explicit, and legitimate purposes and do not process it in a manner incompatible with those purposes."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Data Minimization:"})," We collect only the personal data that is adequate, relevant, and limited to what is necessary in relation to the purposes for which it is processed."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Accuracy:"})," We take every reasonable step to ensure that personal data is accurate and, where necessary, kept up to date. Inaccurate personal data will be rectified or erased without undue delay."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Storage Limitation:"})," We retain personal data for no longer than is necessary for the purposes for which it is processed."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Integrity and Confidentiality:"})," We process personal data in a manner that ensures appropriate security, including protection against unauthorized or unlawful processing and against accidental loss, destruction, or damage, using appropriate technical and organizational measures."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Accountability:"})," As the data controller, RNTea business is responsible for, and must be able to demonstrate compliance with, the principles outlined in this Protocol."]})]}),_.jsx("hr",{className:"my-8 border-t border-gray-300"}),_.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article II: Categories of Personal Data Collected & Lawful Basis"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"The personal data we process falls into the following categories, with the corresponding lawful basis for processing:"}),_.jsx("div",{className:"overflow-x-auto mb-4",children:_.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Category of Data"}),_.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Examples of Data Collected"}),_.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Purpose of Processing"}),_.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Lawful Basis for Processing"})]})}),_.jsxs("tbody",{children:[_.jsxs("tr",{children:[_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Identity & Account Data"}),_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Name, email address, username, password (hashed), professional title"}),_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To create and manage your account, provide access to services, and communicate with you."}),_.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[_.jsx("strong",{children:"Contractual Necessity:"})," The processing is necessary for the performance of a contract to which you are a party."]})]}),_.jsxs("tr",{children:[_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Transactional Data"}),_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Billing address, payment information (tokenized), subscription history"}),_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To process payments, manage subscriptions, and maintain financial records."}),_.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[_.jsx("strong",{children:"Contractual Necessity:"})," Necessary to fulfill a transaction you initiated. ",_.jsx("strong",{children:"Legal Obligation:"})," To comply with tax and accounting laws."]})]}),_.jsxs("tr",{children:[_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Technical & Usage Data"}),_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"IP address, browser type, operating system, pages visited, time spent, clickstream data"}),_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To ensure the security and stability of our platform, analyze usage patterns, and improve our services."}),_.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[_.jsx("strong",{children:"Legitimate Interest:"})," Our legitimate interest in securing our platform, preventing fraud, and understanding user behavior to enhance our products."]})]}),_.jsxs("tr",{children:[_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Correspondence & Support Data"}),_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Content of emails, chat messages, or support tickets"}),_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To respond to your inquiries, provide customer support, and resolve disputes."}),_.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[_.jsx("strong",{children:"Legitimate Interest:"})," To provide effective customer service. ",_.jsx("strong",{children:"Contractual Necessity:"})," To assist with issues related to our service."]})]}),_.jsxs("tr",{children:[_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Voluntarily Provided Data"}),_.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Your professional bio, profile picture, or survey responses"}),_.jsxs("td",{className:"py-2 px-4 text-gray-700",children:[_.jsx("strong",{children:"Consent:"})," Your explicit consent is requested and may be withdrawn at any time."]})]})]})]})}),_.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[_.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Legitimate Interest Balancing Test"}),_.jsx("br",{}),`The use of "Legitimate Interest" as a lawful basis is subject to a strict balancing test under the GDPR. A data controller must demonstrate that its interests in processing the data (e.g., security, service improvement) are not overridden by the fundamental rights and freedoms of the Data Subject. This requires a formal assessment and is a point of frequent legal scrutiny. In this model, we assert that the processing of technical data for security purposes is a legitimate interest vital to protecting all users, and a user's reasonable expectation is that such data would be processed for platform integrity.`]}),_.jsx("hr",{className:"my-8 border-t border-gray-300"}),_.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article III: Data Sharing and Disclosure"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"We may share your personal data with the following categories of recipients, always under the principles of data minimization and purpose limitation:"}),_.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[_.jsxs("li",{children:[_.jsx("strong",{children:"Service Providers:"})," We engage third-party service providers (data processors) who perform functions on our behalf, such as cloud hosting, payment processing, and analytics. These providers are bound by contractual obligations to protect your data and are prohibited from using it for any purpose other than providing their service to us."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Legal and Regulatory Authorities:"})," We will disclose your data when legally required to do so, such as in response to a subpoena, court order, or governmental request."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Business Transfers:"})," In the event of a merger, acquisition, or sale of assets, your personal data may be transferred as part of the business transaction, subject to the recipient agreeing to abide by a privacy policy consistent with this Protocol."]})]}),_.jsx("hr",{className:"my-8 border-t border-gray-300"}),_.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article IV: Data Subject Rights"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"You have the following rights concerning your personal data. To exercise these rights, please contact our Data Protection Officer at the address provided in Article VIII."}),_.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[_.jsxs("li",{children:[_.jsx("strong",{children:"Right to Access:"}),' You have the right to request a copy of the personal data we hold about you (a "Subject Access Request").']}),_.jsxs("li",{children:[_.jsx("strong",{children:"Right to Rectification:"})," You have the right to request the correction of inaccurate or incomplete personal data."]}),_.jsxs("li",{children:[_.jsx("strong",{children:'Right to Erasure ("Right to be Forgotten"):'})," You have the right to request the deletion of your personal data under certain circumstances (e.g., if the data is no longer necessary for the purposes for which it was collected)."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Right to Restrict Processing:"})," You have the right to request that we cease or limit the processing of your personal data under specific conditions."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Right to Data Portability:"})," You have the right to receive your personal data in a structured, commonly used, and machine-readable format and to transmit that data to another data controller."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Right to Object:"})," You have the right to object to the processing of your personal data based on legitimate interest or for direct marketing purposes."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Right to Withdraw Consent:"})," Where processing is based on your consent, you have the right to withdraw that consent at any time."]})]}),_.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[_.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Practicality of Rights"}),_.jsx("br",{}),'While these rights are fundamental, their implementation is not absolute. For instance, the "Right to Erasure" may be overridden by a legal obligation to retain data (e.g., financial records for tax purposes) or if the data is required for the establishment, exercise, or defense of legal claims. A robust privacy policy must manage user expectations by clarifying these limitations.']}),_.jsx("hr",{className:"my-8 border-t border-gray-300"}),_.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article V: Data Security"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business implements appropriate technical and organizational measures to ensure a level of security appropriate to the risk. These measures include:"}),_.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[_.jsxs("li",{children:[_.jsx("strong",{children:"Pseudonymization and Encryption:"})," Where feasible, data is pseudonymized and sensitive data is encrypted both in transit and at rest."]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Access Controls:"}),' Access to personal data is restricted to authorized personnel on a "need-to-know" basis.']}),_.jsxs("li",{children:[_.jsx("strong",{children:"Security Audits:"})," We conduct regular security audits and vulnerability assessments."]})]}),_.jsx("hr",{className:"my-8 border-t border-gray-300"}),_.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VI: International Data Transfers"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"As a global company, your data may be transferred to and processed in countries outside your own. We ensure that any such transfer is lawful and adequately protected. For transfers of personal data from the European Union, we rely on established mechanisms such as Standard Contractual Clauses (SCCs)."}),_.jsx("hr",{className:"my-8 border-t border-gray-300"}),_.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VII: Contact Information"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"For any questions, concerns, or to exercise your rights under this Protocol, please contact our designated Data Protection Officer (DPO):"}),_.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[_.jsxs("li",{children:[_.jsx("strong",{children:"DPO:"})," [Insert DPO Name]"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Email:"})," [Insert DPO Email]"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Mailing Address:"})," [Insert Mailing Address]"]})]}),_.jsx("hr",{className:"my-8 border-t border-gray-300"}),_.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VIII: Changes to This Protocol"}),_.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"This Protocol may be amended from time to time. We will notify you of any material changes by posting the new Protocol on our website or by other means of communication. Your continued use of our services after a change indicates your acceptance of the updated terms."})]})})}const mP=({message:r,type:e})=>{if(!r)return null;const t=e==="success"?"bg-green-100":"bg-red-100",i=e==="success"?"text-green-700":"text-red-700";return _.jsx("div",{className:`p-3 rounded-md ${t} ${i} my-4 message-box-fade show`,children:r})},gP=({onClose:r})=>{var Fn;const{signUpWithEmailPassword:e,signInWithEmailPassword:t,signInWithApple:i,linkAnonymousWithEmailPassword:o,linkAnonymousWithApple:l,auth:h,currentUserId:f,signInWithGoogle:g,db:v,appId:E}=L.useContext(oh),[I,x]=L.useState(!0),[j,q]=L.useState(""),[H,M]=L.useState(""),[le,X]=L.useState(""),[Q,de]=L.useState(""),[te,_e]=L.useState(""),[k,S]=L.useState(""),[C,P]=L.useState(0),[N,V]=L.useState(null),[A,qe]=L.useState(""),[Ge,tt]=L.useState(!1),[Z,W]=L.useState(!1),[oe,ie]=L.useState(""),[O,G]=L.useState(""),[pe,we]=L.useState(""),[be,Ae]=L.useState(""),[Le,Ne]=L.useState(""),Ee=L.useCallback((Ie,Qe)=>{_e(Ie),S(Qe),setTimeout(()=>{_e(""),S("")},5e3)},[]),st=(Fn=h==null?void 0:h.currentUser)==null?void 0:Fn.isAnonymous,un=L.useCallback(async Ie=>{if(console.log("checkEmailExists: Checking email:",Ie),console.log("checkEmailExists: Current auth object:",h),!h)return console.error("Firebase Auth not initialized for email check."),!1;try{const Qe=await P1(h,Ie);return console.log("checkEmailExists: Sign-in methods for email:",Qe),Qe.length>0}catch(Qe){return console.error("Error checking email existence:",Qe),console.error("Full error object:",JSON.stringify(Qe,null,2)),!1}},[h]);L.useEffect(()=>(!I&&C===2&&h&&!window.recaptchaVerifier&&(console.log("Initializing reCAPTCHA Verifier..."),window.recaptchaVerifier=new O_(h,"recaptcha-container",{size:"invisible",callback:Ie=>{console.log("reCAPTCHA callback fired:",Ie)},"expired-callback":()=>{Ee("reCAPTCHA expired. Please try sending the code again.","error"),V(null)}}),window.recaptchaVerifier.render().then(Ie=>{console.log("reCAPTCHA rendered with widget ID:",Ie)})),()=>{window.recaptchaVerifier&&(console.log("Destroying reCAPTCHA Verifier..."),delete window.recaptchaVerifier)}),[I,C,h,Ee]);const nn=L.useCallback(async()=>{if(_e(""),Ae(""),!Q.trim()){Ae("Please enter your phone number.");return}if(!Q.startsWith("+")||Q.trim().length<10){Ae('Phone number must start with a "+" and include country code (e.g., +11234567890).');return}if(!h){Ee("Authentication service not ready.","error");return}if(!window.recaptchaVerifier){Ee("reCAPTCHA not initialized. Please try again.","error");return}tt(!0);try{const Ie=await nx(h,Q,window.recaptchaVerifier);V(Ie),Ee("Verification code sent!","success")}catch(Ie){console.error("Error sending OTP:",Ie),Ee(`Failed to send code: ${Ie.message}`,"error"),V(null)}finally{tt(!1)}},[Q,h,Ee]),Sn=L.useCallback(async()=>{if(_e(""),Ne(""),!A.trim()){Ne("Please enter the verification code.");return}if(!N){Ee("No verification request found. Please send the code first.","error");return}W(!0);try{const Qe=(await N.confirm(A)).user;if(v&&Qe&&E)try{await rl(gr(v,"artifacts",E,"users",Qe.uid),{email:Qe.email,phoneNumber:Q},{merge:!0}),console.log("User profile with phone number info saved.")}catch(Rn){console.error("Error saving user phone number info:",Rn),Ee("Account created, but failed to save phone number.","warning")}else console.warn("Firestore DB, user, or appId not available, phone number info not saved.");Ee("Phone number verified and account created!","success"),r()}catch(Ie){console.error("Error verifying OTP:",Ie),Ee(`Failed to verify code: ${Ie.message}`,"error"),Ne("Invalid verification code. Please try again.")}finally{W(!1)}},[A,N,v,E,Q,Ee,r]),xn=L.useCallback(async Ie=>{if(Ie.preventDefault(),_e(""),ie(""),G(""),we(""),Ae(""),Ne(""),console.log("handleNextStep: Current step:",C,"isLogin:",I),C===0){if(!j){ie("Please enter your email.");return}if(!I){const Qe=await un(j);if(console.log("handleNextStep: Email exists check result:",Qe),Qe){ie("This email is already registered. Please sign in or use a different email.");return}}}else if(C===1){if(!H){G("Please enter your password.");return}if(!le){we("Please confirm your password.");return}if(H!==le){we("Passwords do not match.");return}}else if(C===2){if(!Q.trim()){Ae("Please enter your phone number.");return}N||await nn();return}C<2&&P(Qe=>Qe+1)},[j,H,le,Q,C,I,un,nn,N]),_r=L.useCallback(()=>{_e(""),ie(""),G(""),we(""),Ae(""),Ne(""),C>0&&(P(Ie=>Ie-1),V(null),qe(""))},[C]),Cn=async Ie=>{if(Ie.preventDefault(),_e(""),ie(""),G(""),we(""),Ae(""),Ne(""),I){if(!j){ie("Please enter your email.");return}if(!H){G("Please enter your password.");return}if(st)if(await o(j,H))Ee("Anonymous account linked and signed in!","success"),r();else try{const Rn=await signInWithEmailAndPassword(h,j,H);Ee("Signed in successfully!","success"),r()}catch(Rn){Ee(`Login Failed: ${Rn.message}`,"error")}else await t(j,H)?(Ee("Signed in successfully!","success"),r()):Ee("Login Failed: Invalid credentials or account not found.","error")}else C<2?await xn(Ie):C===2&&!N?await nn():C===2&&N&&await Sn()},wr=async()=>{await g()&&r()},nr=L.useCallback(()=>{x(Ie=>!Ie),q(""),M(""),X(""),de(""),_e(""),S(""),P(0),V(null),qe(""),ie(""),G(""),we(""),Ae(""),Ne(""),window.recaptchaVerifier&&(window.recaptchaVerifier.clear(),delete window.recaptchaVerifier)},[]);return _.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4 font-inter",children:_.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md relative animate-scale-in",children:[_.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold transition-transform duration-200 transform hover:scale-110",children:""}),_.jsx("h2",{className:"text-3xl font-extrabold text-gray-800 mb-6 text-center",children:I?"Sign In":"Sign Up"}),te&&_.jsx("div",{className:`p-3 mb-4 rounded-md text-center text-sm font-medium
                        ${k==="error"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:te}),_.jsxs("form",{onSubmit:Cn,className:"space-y-4 flex flex-col items-center",children:[_.jsx("div",{className:"overflow-hidden w-full",children:_.jsxs("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${C*100}%)`},children:[_.jsx("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:_.jsxs("div",{children:[_.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Email"}),_.jsx("input",{type:"email",id:"email",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${oe?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com",value:j,onChange:Ie=>{q(Ie.target.value),ie("")}}),oe&&_.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:oe})]})}),_.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Password"}),_.jsx("input",{type:"password",id:"password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${O?"border-red-500":"border-gray-300"}`,placeholder:"********",value:H,onChange:Ie=>{M(Ie.target.value),G("")}}),O&&_.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:O})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"confirm-password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Confirm Password"}),_.jsx("input",{type:"password",id:"confirm-password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${pe?"border-red-500":"border-gray-300"}`,placeholder:"********",value:le,onChange:Ie=>{X(Ie.target.value),we("")}}),pe&&_.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:pe})]})]}),_.jsx("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:N?_.jsxs("div",{className:"relative",children:[_.jsx("label",{htmlFor:"otp",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Enter Verification Code"}),_.jsx("input",{type:"text",id:"otp",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${Le?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 123456",value:A,onChange:Ie=>{qe(Ie.target.value),Ne("")},disabled:Z}),Le&&_.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:Le}),_.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-left",children:["Code sent to ",Q,"."]}),_.jsx("button",{type:"button",onClick:nn,disabled:Ge||Z,className:"w-full bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105 mt-2",children:Ge?"Sending...":"Resend Code"})]}):_.jsxs("div",{className:"relative",children:[_.jsx("label",{htmlFor:"phoneNumber",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Phone Number"}),_.jsx("input",{type:"tel",id:"phoneNumber",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${be?"border-red-500":"border-gray-300"}`,placeholder:"e.g., +11234567890",value:Q,onChange:Ie=>{de(Ie.target.value),Ae("")},disabled:Ge}),_.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"For human verification purposes only! Include country code (e.g., +1)."}),_.jsx("div",{id:"recaptcha-container",className:"mt-4"})]})})]})}),!I&&_.jsx("div",{className:"flex justify-center space-x-2 mt-4",children:[0,1,2].map(Ie=>_.jsx("span",{className:`block w-3 h-3 rounded-full transition-colors duration-300
                                        ${C===Ie?"bg-[#CC5500] scale-125":"bg-gray-300 hover:bg-gray-400 cursor-pointer"}`,onClick:()=>P(Ie),"aria-label":`Go to step ${Ie+1}`},Ie))}),!I&&_.jsx("div",{className:"flex justify-start mt-4 w-full px-4",children:C>0&&_.jsx("button",{type:"button",onClick:_r,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105",children:"Previous"})}),_.jsx("button",{type:"submit",className:`w-full font-bold py-3 px-6 rounded-full transition duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 mt-4
                            ${I?"bg-[#FFDEB5] text-gray-800 hover:bg-[#FFC982]":"bg-[#CC5500] text-white hover:bg-[#A84500]"}`,disabled:I&&(Ge||Z)||!I&&C===2&&!N&&Ge||!I&&C===2&&N&&Z,children:I?"Sign In":C===0||C===1?"Next":C===2&&!N?Ge?"Sending Code...":"Send Code":Z?"Verifying...":"Verify Code"})]}),_.jsxs("div",{className:"mt-6 text-center",children:[_.jsxs("p",{className:"text-gray-600",children:[I?"Don't have an account? ":"Already have an account? ",_.jsx("button",{onClick:nr,className:"text-[#CC5500] hover:underline font-semibold transition-colors duration-200",children:I?"Sign Up":"Sign In"})]}),I&&_.jsx("button",{onClick:()=>Ee("Password reset functionality not yet implemented.","info"),className:"text-[#CC5500] hover:underline text-sm mt-2 transition-colors duration-200",children:"Forgot Password?"})]}),_.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6 space-y-4",children:[_.jsx("p",{className:"text-center text-gray-600",children:"Or continue with"}),_.jsx("div",{className:"flex justify-center gap-4",children:_.jsxs("button",{onClick:wr,className:"flex items-center justify-center w-1/2 bg-white border border-gray-300 text-gray-800 py-3 px-4 rounded-full shadow-md hover:bg-gray-50 transition duration-300 transform hover:scale-105",children:[_.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:[_.jsx("path",{d:"M12.0003 4.75C14.0273 4.75 15.8053 5.438 17.1523 6.694L18.9643 4.882C17.0183 3.033 14.6063 2 12.0003 2C8.87533 2 6.07133 3.453 4.38633 5.859L6.04633 7.153C6.88233 5.761 8.39633 4.75 12.0003 4.75Z",fill:"#EA4335"}),_.jsx("path",{d:"M23.4999 12.272C23.4999 11.492 23.4249 10.721 23.2999 9.969H12.2009V14.51H18.7959C18.5919 15.534 17.9739 16.395 17.1199 16.989L18.7959 18.293C19.8669 17.335 20.6699 16.035 21.1899 14.51L23.4999 12.272Z",fill:"#4285F4"}),_.jsx("path",{d:"M6.04625 16.847L4.38625 18.141C5.97125 20.547 8.87525 22 12.0003 22C14.5943 22 17.0003 20.967 18.9353 19.14L17.1433 17.714C15.8053 18.528 14.0273 19.002 12.0003 19.002C8.39633 19.002 6.88233 17.991 6.04625 16.847Z",fill:"#34A853"}),_.jsx("path",{d:"M4.70725 14.51L2.39725 16.75C1.61525 15.226 1.12725 13.626 1.12725 12C1.12725 10.374 1.61525 8.774 2.39725 7.25L4.70725 9.488C4.24925 10.492 3.99925 11.25 3.99925 12C3.99925 12.75 4.24925 13.508 4.70725 14.51Z",fill:"#FBBC04"})]}),"Google"]})})]})]})})},yP={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_BUILD_TARGET:"main",VITE_FIREBASE_API_KEY:"AIzaSyBEwSVX9UY7-MNxeYwdbY0ZmDuXzYyt56g",VITE_FIREBASE_APP_ID:"1:806310857835:web:b03b05847c818ee4fe352e",VITE_FIREBASE_AUTH_DOMAIN:"rntea-cca78.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-ZKBPS9FGE",VITE_FIREBASE_MESSAGING_SENDER_ID:"806310857835",VITE_FIREBASE_PROJECT_ID:"rntea-cca78",VITE_FIREBASE_STORAGE_BUCKET:"rntea-cca78.appspot.com"},oh=L.createContext(null),Qa=null,vP=null;class _P extends ci.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("App.jsx ErrorBoundary: Uncaught error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?_.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-100 text-red-800 p-4 rounded-lg shadow-lg m-4",children:[_.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong in App.jsx!"}),_.jsx("p",{className:"text-lg mb-2 text-center",children:"We're sorry, but there was an issue rendering the application. Details below:"}),_.jsxs("details",{className:"mt-4 text-left p-4 bg-red-50 rounded-lg border border-red-200 overflow-auto max-w-lg",children:[_.jsx("summary",{className:"font-semibold cursor-pointer text-red-700",children:"Click for Error Details"}),_.jsx("pre",{className:"mt-2 text-sm whitespace-pre-wrap break-words font-mono text-red-900",children:this.state.error&&this.state.error.toString()}),this.state.errorInfo&&_.jsxs("pre",{className:"mt-2 text-xs text-red-600 font-mono whitespace-pre-wrap break-words",children:["Component Stack: ",this.state.errorInfo.componentStack]})]})]}):this.props.children}}function wP(){const[r,e]=L.useState(null),[t,i]=L.useState(null),[o,l]=L.useState(null),[h,f]=L.useState(null),[g,v]=L.useState(!1),[E,I]=L.useState(!0),[x,j]=L.useState({text:"",type:""}),[q,H]=L.useState(!1),[M,le]=L.useState(!1),X=ia();Lv();const[Q,de]=L.useState(!1),te=L.useCallback((Z,W)=>{j({text:Z,type:W}),setTimeout(()=>j({text:"",type:""}),5e3)},[]);L.useEffect(()=>{console.log("App.jsx: useEffect for Firebase Initialization triggered."),console.log("App.jsx: Current path detected by React Router:",X.pathname),(async()=>{try{console.log("App.jsx: Loading Firebase...");let W=null,oe="Unknown";const ie={apiKey:"AIzaSyBEwSVX9UY7-MNxeYwdbY0ZmDuXzYyt56g",authDomain:"rntea-cca78.firebaseapp.com",projectId:"rntea-cca78",storageBucket:"rntea-cca78.appspot.com",messagingSenderId:"806310857835",appId:"1:806310857835:web:b03b05847c818ee4fe352e",measurementId:"G-ZKBPS9FGE"};if(console.log("App.jsx DEBUG: Raw import.meta.env:",yP),console.log("App.jsx DEBUG: Constructed viteConfig:",ie),ie.apiKey&&ie.projectId&&ie.appId)W=ie,oe="Vite Environment Variables (import.meta.env)";else if(!(Qa&&Qa.apiKey&&Qa.projectId&&Qa.appId))throw new Error("Firebase configuration is incomplete or missing from both Vite environment variables and Canvas setup. Please ensure either .env file is correct or Canvas variables are provided.");if(console.log(`App.jsx: Firebase config source: ${oe}`),console.log("App.jsx: Firebase config being used (sensitive parts masked):",{apiKey:W!=null&&W.apiKey?"********":"N/A",authDomain:W==null?void 0:W.authDomain,projectId:W==null?void 0:W.projectId,storageBucket:W==null?void 0:W.storageBucket,messagingSenderId:W==null?void 0:W.messagingSenderId,appId:W!=null&&W.appId?"********":"N/A",measurementId:W==null?void 0:W.measurementId}),!W||!W.apiKey||!W.projectId||!W.appId)throw new Error(`Firebase configuration is incomplete from ${oe}. Missing apiKey, projectId, or appId. This should not happen if previous checks passed.`);const O=Jv(W),G=Xx(O),pe=QA(O);e(O),l(G),i(pe),console.log("App.jsx: Firebase Loaded, Awaiting Auth...");const we=N1(G,async be=>{var Ae,Le;if(console.log("App.jsx: onAuthStateChanged - User status changed. User:",be),be)f(be.uid);else{console.log("App.jsx: No user found. Checking for custom token.");let Ne=null;try{Ne=typeof __initial_auth_token<"u"?__initial_auth_token:null}catch(Ee){console.warn("App.jsx: __initial_auth_token is not declared or accessible:",Ee)}if(Ne){console.log("App.jsx: Signing in with custom token...");try{await x1(G,Ne),f((Ae=G.currentUser)==null?void 0:Ae.uid),console.log("App.jsx: Custom token sign-in successful. Current user ID:",(Le=G.currentUser)==null?void 0:Le.uid)}catch(Ee){console.error("App.jsx: Error during custom token authentication:",Ee),te(`Authentication failed: ${Ee.message}`,"error"),f(null)}}else console.log("App.jsx: No custom token found. User remains signed out by default."),f(null)}v(!0),I(!1),console.log("App.jsx: Firebase initialization complete. AuthReady:",!0,"LoadingFirebase:",!1)});return()=>{console.log("App.jsx: useEffect cleanup - Unsubscribing from auth state changes."),we()}}catch(W){console.error("App.jsx: FATAL ERROR: Failed to initialize Firebase application:",W),te("Failed to initialize application. Please try again later.","error"),I(!1),v(!1)}})()},[X.pathname,Qa,te]);const _e=L.useCallback(async(Z,W)=>{if(!o)return te("Firebase Auth not initialized.","error"),null;try{const oe=await C1(o,Z,W);return te("Account created successfully!","success"),H(!1),oe.user}catch(oe){throw console.error("Error signing up with email/password:",oe),te(`Sign Up Failed: ${oe.message}`,"error"),oe}},[o,te]),k=L.useCallback(async(Z,W)=>{if(!o)return te("Firebase Auth not initialized.","error"),null;try{const oe=await R1(o,Z,W);return te("Signed in successfully!","success"),H(!1),oe.user}catch(oe){return console.error("Error signing in with email/password:",oe),te(`Sign In Failed: ${oe.message}`,"error"),null}},[o,te]),S=L.useCallback(async()=>{if(!o)return te("Firebase Auth not initialized.","error"),null;try{const Z=new hi;let W;return o.currentUser&&o.currentUser.isAnonymous?(W=await Yu(o.currentUser,await Ju(o,Z).then(oe=>oe.credential)),te("Anonymous account linked with Google!","success")):(W=await Ju(o,Z),te("Signed in with Google successfully!","success")),H(!1),W.user}catch(Z){return console.error("Error signing in with Google:",Z),Z.code==="auth/account-exists-with-different-credential"?te("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):te(`Google Sign In Failed: ${Z.message}`,"error"),null}},[o,te,H]),C=L.useCallback(async()=>{if(!o)return te("Firebase Auth not initialized.","error"),null;try{const Z=new qo("apple.com");let W;return o.currentUser&&o.currentUser.isAnonymous?(W=await Yu(o.currentUser,await Ju(o,Z).then(oe=>oe.credential)),te("Anonymous account linked with Apple!","success")):(W=await Ju(o,Z),te("Signed in with Apple successfully!","success")),H(!1),W.user}catch(Z){return console.error("Error signing in with Apple:",Z),Z.code==="auth/account-exists-with-different-credential"?te("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):te(`Apple Sign In Failed: ${Z.message}`,"error"),null}},[o,te]),P=L.useCallback(async()=>{if(!o){te("Firebase Auth not initialized.","error");return}try{await D1(o),f(null),te("Signed out successfully!","success")}catch(Z){console.error("Error signing out:",Z),te(`Sign Out Failed: ${Z.message}`,"error")}},[o,te]),N=L.useCallback(async(Z,W)=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return te("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const oe=Js.credential(Z,W),ie=await Yu(o.currentUser,oe);return te("Anonymous account linked with email/password!","success"),H(!1),ie.user}catch(oe){return console.error("Error linking anonymous account with email/password:",oe),te(`Linking Failed: ${oe.message}`,"error"),null}},[o,te]),V=L.useCallback(async()=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return te("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const Z=new qo("apple.com"),W=await Yu(o.currentUser,Z);return te("Anonymous account linked with Apple!","success"),H(!1),W.user}catch(Z){return console.error("Error linking anonymous account with Apple:",Z),te(`Linking Failed: ${Z.message}`,"error"),null}},[o,te]),A=L.useMemo(()=>({app:r,db:t,auth:o,currentUserId:h,authReady:g,appId:"rntea-cca78",showMessage:te,signUpWithEmailPassword:_e,signInWithEmailPassword:k,signInWithGoogle:S,signInWithApple:C,signOutUser:P,linkAnonymousWithEmailPassword:N,linkAnonymousWithApple:V,setShowAuthModal:H}),[r,t,o,h,g,vP,te,_e,k,S,C,P,N,V,H]),qe=L.useCallback(()=>{de(Z=>!Z),document.body.style.overflow=Q?"":"hidden"},[Q]),Ge=L.useCallback(()=>{de(!1),document.body.style.overflow=""},[]),tt=L.useCallback(Z=>{if(Z==="/")return X.pathname==="/";if(Z==="/reviews")return X.pathname==="/reviews";if(Z.startsWith("/#")){const W=Z.substring(2);return X.pathname==="/"&&X.hash===`#${W}`}return!1},[X.pathname,X.hash]);return _.jsxs("div",{className:"min-h-screen flex flex-col",children:[_.jsxs("header",{className:"bg-white shadow-sm py-8 px-6 md:px-10 lg:px-16 flex justify-between items-center rounded-b-lg fixed top-0 w-full z-30",children:[_.jsx(Qi,{to:"/",className:"text-3xl font-bold text-gray-800 rntea-brand",children:"RNTea"}),_.jsx("nav",{className:"hidden md:block",children:_.jsxs("ul",{className:"flex space-x-6 items-center",children:[_.jsx("li",{children:_.jsx(Qi,{to:"/#about",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${tt("/#about")?"font-bold":""}`,children:_.jsxs("span",{className:"relative inline-block",children:["About",_.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),_.jsx("li",{children:_.jsx(Qi,{to:"/reviews",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${tt("/reviews")?"font-bold":""}`,children:_.jsxs("span",{className:"relative inline-block",children:["Reviews",_.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),_.jsx("li",{children:_.jsx(Qi,{to:"/#contact",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${tt("/#contact")?"font-bold":""}`,children:_.jsxs("span",{className:"relative inline-block",children:["Contact",_.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),_.jsx("li",{children:h?_.jsx("button",{onClick:P,className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):_.jsx("button",{onClick:()=>H(!0),className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})})]})}),_.jsxs("div",{className:`hamburger-menu md:hidden flex flex-col justify-around w-8 h-6 cursor-pointer z-50 ${Q?"open":""}`,id:"hamburger-menu",onClick:qe,children:[_.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),_.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),_.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"})]})]}),_.jsxs("div",{className:`mobile-nav-overlay md:hidden fixed top-0 left-0 w-full h-full bg-white bg-opacity-98 z-40 flex flex-col justify-center items-center transition-transform duration-400 ease-in-out ${Q?"open":""}`,id:"mobile-nav-overlay",children:[_.jsx("button",{className:"absolute top-6 right-6 text-gray-800 hover:text-gray-600 text-4xl focus:outline-none z-50",onClick:Ge,"aria-label":"Close navigation menu",children:""}),_.jsx(Qi,{to:"/#about",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Ge,style:{animationDelay:"0.1s"},children:_.jsxs("span",{className:"relative inline-block",children:["About",_.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),_.jsx(Qi,{to:"/reviews",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Ge,style:{animationDelay:"0.2s"},children:_.jsxs("span",{className:"relative inline-block",children:["Reviews",_.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),_.jsx(Qi,{to:"/#contact",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Ge,style:{animationDelay:"0.3s"},children:_.jsxs("span",{className:"relative inline-block",children:["Contact",_.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),h?_.jsx("button",{onClick:()=>{P(),Ge()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):_.jsx("button",{onClick:()=>{H(!0),Ge()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})]}),_.jsxs("main",{className:"flex-grow w-full flex flex-col mt-[120px]",children:[_.jsx(mP,{message:x.text,type:x.type}),_.jsx(_P,{children:E?_.jsx("p",{className:"text-center text-gray-500 py-8",children:"App.jsx: Initializing application and Firebase..."}):_.jsxs(oh.Provider,{value:A,children:[_.jsxs(TI,{children:[console.log(`App.jsx: Route matched for path: ${X.pathname}`),_.jsx(ic,{path:"/",element:_.jsx(fP,{})}),_.jsx(ic,{path:"/reviews",element:_.jsx(vw,{})}),_.jsx(ic,{path:"/test-route",element:_.jsx("h2",{className:"text-center text-2xl text-center mt-8",children:"This is a Test Route."})})]}),q&&_.jsx(gP,{onClose:()=>H(!1)})]})})]}),_.jsx("footer",{className:"bg-white py-4 px-6 md:px-10 lg:px-16 border-t border-gray-200 text-center text-gray-600",children:_.jsxs("p",{className:"text-sm",children:[" ",new Date().getFullYear()," RNTea business. All Rights Reserved.",_.jsx("button",{onClick:()=>le(!0),className:"ml-1 text-blue-600 hover:underline focus:outline-none",children:"Privacy Policy"})]})}),M&&_.jsx(pP,{onClose:()=>le(!1)})]})}const xv=document.getElementById("root");xv?(console.log("main.jsx: Root element found. Attempting to mount React App with Router..."),NE.createRoot(xv).render(_.jsx(ci.StrictMode,{children:_.jsx(bI,{children:_.jsx(wP,{})})})),console.log("main.jsx: React App with Router mount instruction sent.")):console.error("main.jsx: ERROR - Root element not found in DOM. Cannot mount React App.");
