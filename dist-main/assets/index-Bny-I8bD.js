function VE(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Lv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Oh={exports:{}},Xa={},Lh={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function OE(){if(Lg)return He;Lg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=I&&L[I]||L["@@iterator"],typeof L=="function"?L:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,$={};function M(L,G,ye){this.props=L,this.context=G,this.refs=$,this.updater=ye||j}M.prototype.isReactComponent={},M.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},M.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ee(){}ee.prototype=M.prototype;function oe(L,G,ye){this.props=L,this.context=G,this.refs=$,this.updater=ye||j}var J=oe.prototype=new ee;J.constructor=oe,H(J,M.prototype),J.isPureReactComponent=!0;var Ie=Array.isArray,_e=Object.prototype.hasOwnProperty,we={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function C(L,G,ye){var Ae,ke={},Ne=null,Ue=null;if(G!=null)for(Ae in G.ref!==void 0&&(Ue=G.ref),G.key!==void 0&&(Ne=""+G.key),G)_e.call(G,Ae)&&!N.hasOwnProperty(Ae)&&(ke[Ae]=G[Ae]);var Oe=arguments.length-2;if(Oe===1)ke.children=ye;else if(1<Oe){for(var Le=Array(Oe),Ge=0;Ge<Oe;Ge++)Le[Ge]=arguments[Ge+2];ke.children=Le}if(L&&L.defaultProps)for(Ae in Oe=L.defaultProps,Oe)ke[Ae]===void 0&&(ke[Ae]=Oe[Ae]);return{$$typeof:r,type:L,key:Ne,ref:Ue,props:ke,_owner:we.current}}function S(L,G){return{$$typeof:r,type:L.type,key:G,ref:L.ref,props:L.props,_owner:L._owner}}function P(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function k(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ye){return G[ye]})}var O=/\/+/g;function A(L,G){return typeof L=="object"&&L!==null&&L.key!=null?k(""+L.key):G.toString(36)}function Xe(L,G,ye,Ae,ke){var Ne=typeof L;(Ne==="undefined"||Ne==="boolean")&&(L=null);var Ue=!1;if(L===null)Ue=!0;else switch(Ne){case"string":case"number":Ue=!0;break;case"object":switch(L.$$typeof){case r:case e:Ue=!0}}if(Ue)return Ue=L,ke=ke(Ue),L=Ae===""?"."+A(Ue,0):Ae,Ie(ke)?(ye="",L!=null&&(ye=L.replace(O,"$&/")+"/"),Xe(ke,G,ye,"",function(Ge){return Ge})):ke!=null&&(P(ke)&&(ke=S(ke,ye+(!ke.key||Ue&&Ue.key===ke.key?"":(""+ke.key).replace(O,"$&/")+"/")+L)),G.push(ke)),1;if(Ue=0,Ae=Ae===""?".":Ae+":",Ie(L))for(var Oe=0;Oe<L.length;Oe++){Ne=L[Oe];var Le=Ae+A(Ne,Oe);Ue+=Xe(Ne,G,ye,Le,ke)}else if(Le=x(L),typeof Le=="function")for(L=Le.call(L),Oe=0;!(Ne=L.next()).done;)Ne=Ne.value,Le=Ae+A(Ne,Oe++),Ue+=Xe(Ne,G,ye,Le,ke);else if(Ne==="object")throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ue}function it(L,G,ye){if(L==null)return L;var Ae=[],ke=0;return Xe(L,Ae,"","",function(Ne){return G.call(ye,Ne,ke++)}),Ae}function lt(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(ye){(L._status===0||L._status===-1)&&(L._status=1,L._result=ye)},function(ye){(L._status===0||L._status===-1)&&(L._status=2,L._result=ye)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var le={current:null},q={transition:null},me={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:q,ReactCurrentOwner:we};function ie(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:it,forEach:function(L,G,ye){it(L,function(){G.apply(this,arguments)},ye)},count:function(L){var G=0;return it(L,function(){G++}),G},toArray:function(L){return it(L,function(G){return G})||[]},only:function(L){if(!P(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},He.Component=M,He.Fragment=t,He.Profiler=o,He.PureComponent=oe,He.StrictMode=s,He.Suspense=p,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,He.act=ie,He.cloneElement=function(L,G,ye){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ae=H({},L.props),ke=L.key,Ne=L.ref,Ue=L._owner;if(G!=null){if(G.ref!==void 0&&(Ne=G.ref,Ue=we.current),G.key!==void 0&&(ke=""+G.key),L.type&&L.type.defaultProps)var Oe=L.type.defaultProps;for(Le in G)_e.call(G,Le)&&!N.hasOwnProperty(Le)&&(Ae[Le]=G[Le]===void 0&&Oe!==void 0?Oe[Le]:G[Le])}var Le=arguments.length-2;if(Le===1)Ae.children=ye;else if(1<Le){Oe=Array(Le);for(var Ge=0;Ge<Le;Ge++)Oe[Ge]=arguments[Ge+2];Ae.children=Oe}return{$$typeof:r,type:L.type,key:ke,ref:Ne,props:Ae,_owner:Ue}},He.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},He.createElement=C,He.createFactory=function(L){var G=C.bind(null,L);return G.type=L,G},He.createRef=function(){return{current:null}},He.forwardRef=function(L){return{$$typeof:f,render:L}},He.isValidElement=P,He.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:lt}},He.memo=function(L,G){return{$$typeof:v,type:L,compare:G===void 0?null:G}},He.startTransition=function(L){var G=q.transition;q.transition={};try{L()}finally{q.transition=G}},He.unstable_act=ie,He.useCallback=function(L,G){return le.current.useCallback(L,G)},He.useContext=function(L){return le.current.useContext(L)},He.useDebugValue=function(){},He.useDeferredValue=function(L){return le.current.useDeferredValue(L)},He.useEffect=function(L,G){return le.current.useEffect(L,G)},He.useId=function(){return le.current.useId()},He.useImperativeHandle=function(L,G,ye){return le.current.useImperativeHandle(L,G,ye)},He.useInsertionEffect=function(L,G){return le.current.useInsertionEffect(L,G)},He.useLayoutEffect=function(L,G){return le.current.useLayoutEffect(L,G)},He.useMemo=function(L,G){return le.current.useMemo(L,G)},He.useReducer=function(L,G,ye){return le.current.useReducer(L,G,ye)},He.useRef=function(L){return le.current.useRef(L)},He.useState=function(L){return le.current.useState(L)},He.useSyncExternalStore=function(L,G,ye){return le.current.useSyncExternalStore(L,G,ye)},He.useTransition=function(){return le.current.useTransition()},He.version="18.3.1",He}var jg;function Df(){return jg||(jg=1,Lh.exports=OE()),Lh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function LE(){if(Mg)return Xa;Mg=1;var r=Df(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(f,p,v){var E,I={},x=null,j=null;v!==void 0&&(x=""+v),p.key!==void 0&&(x=""+p.key),p.ref!==void 0&&(j=p.ref);for(E in p)s.call(p,E)&&!l.hasOwnProperty(E)&&(I[E]=p[E]);if(f&&f.defaultProps)for(E in p=f.defaultProps,p)I[E]===void 0&&(I[E]=p[E]);return{$$typeof:e,type:f,key:x,ref:j,props:I,_owner:o.current}}return Xa.Fragment=t,Xa.jsx=d,Xa.jsxs=d,Xa}var Fg;function jE(){return Fg||(Fg=1,Oh.exports=LE()),Oh.exports}var y=jE(),D=Df();const ps=Lv(D),ME=VE({__proto__:null,default:ps},[D]);var Zu={},jh={exports:{}},kn={},Mh={exports:{}},Fh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function FE(){return Ug||(Ug=1,function(r){function e(q,me){var ie=q.length;q.push(me);e:for(;0<ie;){var L=ie-1>>>1,G=q[L];if(0<o(G,me))q[L]=me,q[ie]=G,ie=L;else break e}}function t(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var me=q[0],ie=q.pop();if(ie!==me){q[0]=ie;e:for(var L=0,G=q.length,ye=G>>>1;L<ye;){var Ae=2*(L+1)-1,ke=q[Ae],Ne=Ae+1,Ue=q[Ne];if(0>o(ke,ie))Ne<G&&0>o(Ue,ke)?(q[L]=Ue,q[Ne]=ie,L=Ne):(q[L]=ke,q[Ae]=ie,L=Ae);else if(Ne<G&&0>o(Ue,ie))q[L]=Ue,q[Ne]=ie,L=Ne;else break e}}return me}function o(q,me){var ie=q.sortIndex-me.sortIndex;return ie!==0?ie:q.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var p=[],v=[],E=1,I=null,x=3,j=!1,H=!1,$=!1,M=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(q){for(var me=t(v);me!==null;){if(me.callback===null)s(v);else if(me.startTime<=q)s(v),me.sortIndex=me.expirationTime,e(p,me);else break;me=t(v)}}function Ie(q){if($=!1,J(q),!H)if(t(p)!==null)H=!0,lt(_e);else{var me=t(v);me!==null&&le(Ie,me.startTime-q)}}function _e(q,me){H=!1,$&&($=!1,ee(C),C=-1),j=!0;var ie=x;try{for(J(me),I=t(p);I!==null&&(!(I.expirationTime>me)||q&&!k());){var L=I.callback;if(typeof L=="function"){I.callback=null,x=I.priorityLevel;var G=L(I.expirationTime<=me);me=r.unstable_now(),typeof G=="function"?I.callback=G:I===t(p)&&s(p),J(me)}else s(p);I=t(p)}if(I!==null)var ye=!0;else{var Ae=t(v);Ae!==null&&le(Ie,Ae.startTime-me),ye=!1}return ye}finally{I=null,x=ie,j=!1}}var we=!1,N=null,C=-1,S=5,P=-1;function k(){return!(r.unstable_now()-P<S)}function O(){if(N!==null){var q=r.unstable_now();P=q;var me=!0;try{me=N(!0,q)}finally{me?A():(we=!1,N=null)}}else we=!1}var A;if(typeof oe=="function")A=function(){oe(O)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,it=Xe.port2;Xe.port1.onmessage=O,A=function(){it.postMessage(null)}}else A=function(){M(O,0)};function lt(q){N=q,we||(we=!0,A())}function le(q,me){C=M(function(){q(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_continueExecution=function(){H||j||(H=!0,lt(_e))},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(q){switch(x){case 1:case 2:case 3:var me=3;break;default:me=x}var ie=x;x=me;try{return q()}finally{x=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(q,me){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ie=x;x=q;try{return me()}finally{x=ie}},r.unstable_scheduleCallback=function(q,me,ie){var L=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?L+ie:L):ie=L,q){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ie+G,q={id:E++,callback:me,priorityLevel:q,startTime:ie,expirationTime:G,sortIndex:-1},ie>L?(q.sortIndex=ie,e(v,q),t(p)===null&&q===t(v)&&($?(ee(C),C=-1):$=!0,le(Ie,ie-L))):(q.sortIndex=G,e(p,q),H||j||(H=!0,lt(_e))),q},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(q){var me=x;return function(){var ie=x;x=me;try{return q.apply(this,arguments)}finally{x=ie}}}}(Fh)),Fh}var zg;function UE(){return zg||(zg=1,Mh.exports=FE()),Mh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function zE(){if(Bg)return kn;Bg=1;var r=Df(),e=UE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){d(n,i),d(n+"Capture",i)}function d(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function x(n){return p.call(I,n)?!0:p.call(E,n)?!1:v.test(n)?I[n]=!0:(E[n]=!0,!1)}function j(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function H(n,i,a,c){if(i===null||typeof i>"u"||j(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function $(n,i,a,c,h,g,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=w}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){M[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];M[i]=new $(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){M[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){M[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){M[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){M[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){M[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){M[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){M[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function oe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(ee,oe);M[i]=new $(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(ee,oe);M[i]=new $(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(ee,oe);M[i]=new $(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){M[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),M.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){M[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function J(n,i,a,c){var h=M.hasOwnProperty(i)?M[i]:null;(h!==null?h.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(H(i,a,h,c)&&(a=null),c||h===null?x(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(i=h.attributeName,c=h.attributeNamespace,a===null?n.removeAttribute(i):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var Ie=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_e=Symbol.for("react.element"),we=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Xe=Symbol.for("react.suspense_list"),it=Symbol.for("react.memo"),lt=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),q=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=q&&n[q]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,L;function G(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var ye=!1;function Ae(n,i){if(!n||ye)return"";ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var h=B.stack.split(`
`),g=c.stack.split(`
`),w=h.length-1,R=g.length-1;1<=w&&0<=R&&h[w]!==g[R];)R--;for(;1<=w&&0<=R;w--,R--)if(h[w]!==g[R]){if(w!==1||R!==1)do if(w--,R--,0>R||h[w]!==g[R]){var b=`
`+h[w].replace(" at new "," at ");return n.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",n.displayName)),b}while(1<=w&&0<=R);break}}}finally{ye=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function ke(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function Ne(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case we:return"Portal";case S:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case Xe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case it:return i=n.displayName||null,i!==null?i:Ne(n.type)||"Memo";case lt:i=n._payload,n=n._init;try{return Ne(n(i))}catch{}}return null}function Ue(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(i);case 8:return i===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Oe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Le(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ge(n){var i=Le(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return h.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function wt(n){n._valueTracker||(n._valueTracker=Ge(n))}function ue(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Le(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function ne(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function de(n,i){var a=i.checked;return ie({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function je(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Oe(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Gt(n,i){i=i.checked,i!=null&&J(n,"checked",i,!1)}function Kt(n,i){Gt(n,i);var a=Oe(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Kn(n,i.type,a):i.hasOwnProperty("defaultValue")&&Kn(n,i.type,Oe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function wn(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Kn(n,i,a){(i!=="number"||ne(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Pt=Array.isArray;function Qt(n,i,a,c){if(n=n.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=i.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Oe(a),i=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}i!==null||n[h].disabled||(i=n[h])}i!==null&&(i.selected=!0)}}function Ln(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function En(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Pt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Oe(a)}}function In(n,i){var a=Oe(i.value),c=Oe(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function pn(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function tt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?tt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var xe,Qn=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,h){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,h)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(xe=xe||document.createElement("div"),xe.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=xe.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function dr(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yn=["Webkit","ms","Moz","O"];Object.keys(hr).forEach(function(n){Yn.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),hr[i]=hr[n]})});function Rr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||hr.hasOwnProperty(n)&&hr[n]?(""+i).trim():i+"px"}function Ss(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=Rr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,h):n[a]=h}}var Pr=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cs(n,i){if(i){if(Pr[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function As(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jn=null;function br(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Jn=null,rn=null,Mn=null;function Qr(n){if(n=ja(n)){if(typeof Jn!="function")throw Error(t(280));var i=n.stateNode;i&&(i=pu(i),Jn(n.stateNode,n.type,i))}}function Xn(n){rn?Mn?Mn.push(n):Mn=[n]:rn=n}function Rs(){if(rn){var n=rn,i=Mn;if(Mn=rn=null,Qr(n),i)for(n=0;n<i.length;n++)Qr(i[n])}}function Yr(n,i){return n(i)}function Ti(){}var fr=!1;function xi(n,i,a){if(fr)return n(i,a);fr=!0;try{return Yr(n,i,a)}finally{fr=!1,(rn!==null||Mn!==null)&&(Ti(),Rs())}}function gt(n,i){var a=n.stateNode;if(a===null)return null;var c=pu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Ps=!1;if(f)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{Ps=!1}function Jr(n,i,a,c,h,g,w,R,b){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(Z){this.onError(Z)}}var K=!1,ze=null,Se=!1,Ce=null,Be={onError:function(n){K=!0,ze=n}};function rt(n,i,a,c,h,g,w,R,b){K=!1,ze=null,Jr.apply(Be,arguments)}function bt(n,i,a,c,h,g,w,R,b){if(rt.apply(this,arguments),K){if(K){var B=ze;K=!1,ze=null}else throw Error(t(198));Se||(Se=!0,Ce=B)}}function Qe(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function ot(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function yt(n){if(Qe(n)!==n)throw Error(t(188))}function Tn(n){var i=n.alternate;if(!i){if(i=Qe(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var h=a.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===a)return yt(h),n;if(g===c)return yt(h),i;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=h,c=g;else{for(var w=!1,R=h.child;R;){if(R===a){w=!0,a=h,c=g;break}if(R===c){w=!0,c=h,a=g;break}R=R.sibling}if(!w){for(R=g.child;R;){if(R===a){w=!0,a=g,c=h;break}if(R===c){w=!0,c=g,a=h;break}R=R.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Xr(n){return n=Tn(n),n!==null?ut(n):null}function ut(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=ut(n);if(i!==null)return i;n=n.sibling}return null}var Zr=e.unstable_scheduleCallback,io=e.unstable_cancelCallback,Si=e.unstable_shouldYield,_a=e.unstable_requestPaint,ct=e.unstable_now,Bl=e.unstable_getCurrentPriorityLevel,Ci=e.unstable_ImmediatePriority,bs=e.unstable_UserBlockingPriority,Zn=e.unstable_NormalPriority,wa=e.unstable_LowPriority,$l=e.unstable_IdlePriority,Ai=null,Un=null;function Hl(n){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(Ai,n,void 0,(n.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:ql,Ea=Math.log,Wl=Math.LN2;function ql(n){return n>>>=0,n===0?32:31-(Ea(n)/Wl|0)|0}var oo=64,ao=4194304;function ks(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ri(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,h=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var R=w&~h;R!==0?c=ks(R):(g&=w,g!==0&&(c=ks(g)))}else w=a&~h,w!==0?c=ks(w):g!==0&&(c=ks(g));if(c===0)return 0;if(i!==0&&i!==c&&(i&h)===0&&(h=c&-c,g=i&-i,h>=g||h===16&&(g&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-mn(i),h=1<<a,c|=n[a],i&=~h;return c}function dd(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function es(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-mn(g),R=1<<w,b=h[w];b===-1?((R&a)===0||(R&c)!==0)&&(h[w]=dd(R,i)):b<=i&&(n.expiredLanes|=R),g&=~R}}function zn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Pi(){var n=oo;return oo<<=1,(oo&4194240)===0&&(oo=64),n}function Ns(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ds(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-mn(i),n[i]=a}function at(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-mn(a),g=1<<h;i[h]=0,c[h]=-1,n[h]=-1,a&=~g}}function Vs(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-mn(a),h=1<<c;h&i|n[c]&i&&(n[c]|=i),a&=~h}}var Ke=0;function Os(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Gl,lo,Kl,Ql,Yl,Ia=!1,kr=[],Yt=null,pr=null,mr=null,Ls=new Map,er=new Map,Nr=[],hd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jl(n,i){switch(n){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Ls.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(i.pointerId)}}function xn(n,i,a,c,h,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},i!==null&&(i=ja(i),i!==null&&lo(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),n)}function fd(n,i,a,c,h){switch(i){case"focusin":return Yt=xn(Yt,n,i,a,c,h),!0;case"dragenter":return pr=xn(pr,n,i,a,c,h),!0;case"mouseover":return mr=xn(mr,n,i,a,c,h),!0;case"pointerover":var g=h.pointerId;return Ls.set(g,xn(Ls.get(g)||null,n,i,a,c,h)),!0;case"gotpointercapture":return g=h.pointerId,er.set(g,xn(er.get(g)||null,n,i,a,c,h)),!0}return!1}function Xl(n){var i=Vi(n.target);if(i!==null){var a=Qe(i);if(a!==null){if(i=a.tag,i===13){if(i=ot(a),i!==null){n.blockedOn=i,Yl(n.priority,function(){Kl(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ts(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=uo(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);jn=c,a.target.dispatchEvent(c),jn=null}else return i=ja(a),i!==null&&lo(i),n.blockedOn=a,!1;i.shift()}return!0}function bi(n,i,a){ts(n)&&a.delete(i)}function Zl(){Ia=!1,Yt!==null&&ts(Yt)&&(Yt=null),pr!==null&&ts(pr)&&(pr=null),mr!==null&&ts(mr)&&(mr=null),Ls.forEach(bi),er.forEach(bi)}function gr(n,i){n.blockedOn===i&&(n.blockedOn=null,Ia||(Ia=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zl)))}function yr(n){function i(h){return gr(h,n)}if(0<kr.length){gr(kr[0],n);for(var a=1;a<kr.length;a++){var c=kr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Yt!==null&&gr(Yt,n),pr!==null&&gr(pr,n),mr!==null&&gr(mr,n),Ls.forEach(i),er.forEach(i),a=0;a<Nr.length;a++)c=Nr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Nr.length&&(a=Nr[0],a.blockedOn===null);)Xl(a),a.blockedOn===null&&Nr.shift()}var ns=Ie.ReactCurrentBatchConfig,js=!0;function vt(n,i,a,c){var h=Ke,g=ns.transition;ns.transition=null;try{Ke=1,Ta(n,i,a,c)}finally{Ke=h,ns.transition=g}}function pd(n,i,a,c){var h=Ke,g=ns.transition;ns.transition=null;try{Ke=4,Ta(n,i,a,c)}finally{Ke=h,ns.transition=g}}function Ta(n,i,a,c){if(js){var h=uo(n,i,a,c);if(h===null)Sd(n,i,c,ki,a),Jl(n,c);else if(fd(h,n,i,a,c))c.stopPropagation();else if(Jl(n,c),i&4&&-1<hd.indexOf(n)){for(;h!==null;){var g=ja(h);if(g!==null&&Gl(g),g=uo(n,i,a,c),g===null&&Sd(n,i,c,ki,a),g===h)break;h=g}h!==null&&c.stopPropagation()}else Sd(n,i,c,null,a)}}var ki=null;function uo(n,i,a,c){if(ki=null,n=br(c),n=Vi(n),n!==null)if(i=Qe(n),i===null)n=null;else if(a=i.tag,a===13){if(n=ot(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return ki=n,null}function xa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bl()){case Ci:return 1;case bs:return 4;case Zn:case wa:return 16;case $l:return 536870912;default:return 16}default:return 16}}var Bn=null,co=null,Sn=null;function Sa(){if(Sn)return Sn;var n,i=co,a=i.length,c,h="value"in Bn?Bn.value:Bn.textContent,g=h.length;for(n=0;n<a&&i[n]===h[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===h[g-c];c++);return Sn=h.slice(n,1<c?1-c:void 0)}function ho(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Dr(){return!0}function Ca(){return!1}function Jt(n){function i(a,c,h,g,w){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(a=n[R],this[R]=a?a(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Dr:Ca,this.isPropagationStopped=Ca,this}return ie(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),i}var vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fo=Jt(vr),Vr=ie({},vr,{view:0,detail:0}),md=Jt(Vr),po,rs,Ms,Ni=ie({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Or,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ms&&(Ms&&n.type==="mousemove"?(po=n.screenX-Ms.screenX,rs=n.screenY-Ms.screenY):rs=po=0,Ms=n),po)},movementY:function(n){return"movementY"in n?n.movementY:rs}}),mo=Jt(Ni),Aa=ie({},Ni,{dataTransfer:0}),eu=Jt(Aa),go=ie({},Vr,{relatedTarget:0}),yo=Jt(go),tu=ie({},vr,{animationName:0,elapsedTime:0,pseudoElement:0}),ss=Jt(tu),nu=ie({},vr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ru=Jt(nu),su=ie({},vr,{data:0}),Ra=Jt(su),vo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ou(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=iu[n])?!!i[n]:!1}function Or(){return ou}var u=ie({},Vr,{key:function(n){if(n.key){var i=vo[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ho(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?gn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Or,charCode:function(n){return n.type==="keypress"?ho(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ho(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Jt(u),_=ie({},Ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Jt(_),F=ie({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Or}),W=Jt(F),ae=ie({},vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),st=Jt(ae),Mt=ie({},Ni,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ye=Jt(Mt),Bt=[9,13,27,32],kt=f&&"CompositionEvent"in window,tr=null;f&&"documentMode"in document&&(tr=document.documentMode);var $n=f&&"TextEvent"in window&&!tr,Di=f&&(!kt||tr&&8<tr&&11>=tr),_o=" ",bp=!1;function kp(n,i){switch(n){case"keyup":return Bt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Np(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wo=!1;function kw(n,i){switch(n){case"compositionend":return Np(i);case"keypress":return i.which!==32?null:(bp=!0,_o);case"textInput":return n=i.data,n===_o&&bp?null:n;default:return null}}function Nw(n,i){if(wo)return n==="compositionend"||!kt&&kp(n,i)?(n=Sa(),Sn=co=Bn=null,wo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Di&&i.locale!=="ko"?null:i.data;default:return null}}var Dw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Dw[n.type]:i==="textarea"}function Vp(n,i,a,c){Xn(c),i=du(i,"onChange"),0<i.length&&(a=new fo("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Pa=null,ba=null;function Vw(n){Xp(n,0)}function au(n){var i=So(n);if(ue(i))return n}function Ow(n,i){if(n==="change")return i}var Op=!1;if(f){var gd;if(f){var yd="oninput"in document;if(!yd){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),yd=typeof Lp.oninput=="function"}gd=yd}else gd=!1;Op=gd&&(!document.documentMode||9<document.documentMode)}function jp(){Pa&&(Pa.detachEvent("onpropertychange",Mp),ba=Pa=null)}function Mp(n){if(n.propertyName==="value"&&au(ba)){var i=[];Vp(i,ba,n,br(n)),xi(Vw,i)}}function Lw(n,i,a){n==="focusin"?(jp(),Pa=i,ba=a,Pa.attachEvent("onpropertychange",Mp)):n==="focusout"&&jp()}function jw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return au(ba)}function Mw(n,i){if(n==="click")return au(i)}function Fw(n,i){if(n==="input"||n==="change")return au(i)}function Uw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var _r=typeof Object.is=="function"?Object.is:Uw;function ka(n,i){if(_r(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!p.call(i,h)||!_r(n[h],i[h]))return!1}return!0}function Fp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Up(n,i){var a=Fp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fp(a)}}function zp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?zp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Bp(){for(var n=window,i=ne();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=ne(n.document)}return i}function vd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function zw(n){var i=Bp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&zp(a.ownerDocument.documentElement,a)){if(c!==null&&vd(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,g=Math.min(c.start,h);c=c.end===void 0?g:Math.min(c.end,h),!n.extend&&g>c&&(h=c,c=g,g=h),h=Up(a,g);var w=Up(a,c);h&&w&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(h.node,h.offset),n.removeAllRanges(),g>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Bw=f&&"documentMode"in document&&11>=document.documentMode,Eo=null,_d=null,Na=null,wd=!1;function $p(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wd||Eo==null||Eo!==ne(c)||(c=Eo,"selectionStart"in c&&vd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Na&&ka(Na,c)||(Na=c,c=du(_d,"onSelect"),0<c.length&&(i=new fo("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Eo)))}function lu(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Io={animationend:lu("Animation","AnimationEnd"),animationiteration:lu("Animation","AnimationIteration"),animationstart:lu("Animation","AnimationStart"),transitionend:lu("Transition","TransitionEnd")},Ed={},Hp={};f&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function uu(n){if(Ed[n])return Ed[n];if(!Io[n])return n;var i=Io[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Hp)return Ed[n]=i[a];return n}var Wp=uu("animationend"),qp=uu("animationiteration"),Gp=uu("animationstart"),Kp=uu("transitionend"),Qp=new Map,Yp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(n,i){Qp.set(n,i),l(i,[n])}for(var Id=0;Id<Yp.length;Id++){var Td=Yp[Id],$w=Td.toLowerCase(),Hw=Td[0].toUpperCase()+Td.slice(1);Fs($w,"on"+Hw)}Fs(Wp,"onAnimationEnd"),Fs(qp,"onAnimationIteration"),Fs(Gp,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(Kp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ww=new Set("cancel close invalid load scroll toggle".split(" ").concat(Da));function Jp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,bt(c,i,void 0,n),n.currentTarget=null}function Xp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var w=c.length-1;0<=w;w--){var R=c[w],b=R.instance,B=R.currentTarget;if(R=R.listener,b!==g&&h.isPropagationStopped())break e;Jp(h,R,B),g=b}else for(w=0;w<c.length;w++){if(R=c[w],b=R.instance,B=R.currentTarget,R=R.listener,b!==g&&h.isPropagationStopped())break e;Jp(h,R,B),g=b}}}if(Se)throw n=Ce,Se=!1,Ce=null,n}function ft(n,i){var a=i[kd];a===void 0&&(a=i[kd]=new Set);var c=n+"__bubble";a.has(c)||(Zp(i,n,2,!1),a.add(c))}function xd(n,i,a){var c=0;i&&(c|=4),Zp(a,n,c,i)}var cu="_reactListening"+Math.random().toString(36).slice(2);function Va(n){if(!n[cu]){n[cu]=!0,s.forEach(function(a){a!=="selectionchange"&&(Ww.has(a)||xd(a,!1,n),xd(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[cu]||(i[cu]=!0,xd("selectionchange",!1,i))}}function Zp(n,i,a,c){switch(xa(i)){case 1:var h=vt;break;case 4:h=pd;break;default:h=Ta}a=h.bind(null,i,a,n),h=void 0,!Ps||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(i,a,{capture:!0,passive:h}):n.addEventListener(i,a,!0):h!==void 0?n.addEventListener(i,a,{passive:h}):n.addEventListener(i,a,!1)}function Sd(n,i,a,c,h){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===h||R.nodeType===8&&R.parentNode===h)break;if(w===4)for(w=c.return;w!==null;){var b=w.tag;if((b===3||b===4)&&(b=w.stateNode.containerInfo,b===h||b.nodeType===8&&b.parentNode===h))return;w=w.return}for(;R!==null;){if(w=Vi(R),w===null)return;if(b=w.tag,b===5||b===6){c=g=w;continue e}R=R.parentNode}}c=c.return}xi(function(){var B=g,Z=br(a),te=[];e:{var X=Qp.get(n);if(X!==void 0){var fe=fo,ve=n;switch(n){case"keypress":if(ho(a)===0)break e;case"keydown":case"keyup":fe=m;break;case"focusin":ve="focus",fe=yo;break;case"focusout":ve="blur",fe=yo;break;case"beforeblur":case"afterblur":fe=yo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=mo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=W;break;case Wp:case qp:case Gp:fe=ss;break;case Kp:fe=st;break;case"scroll":fe=md;break;case"wheel":fe=Ye;break;case"copy":case"cut":case"paste":fe=ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=T}var Ee=(i&4)!==0,At=!Ee&&n==="scroll",U=Ee?X!==null?X+"Capture":null:X;Ee=[];for(var V=B,z;V!==null;){z=V;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,U!==null&&(re=gt(V,U),re!=null&&Ee.push(Oa(V,re,z)))),At)break;V=V.return}0<Ee.length&&(X=new fe(X,ve,null,a,Z),te.push({event:X,listeners:Ee}))}}if((i&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",fe=n==="mouseout"||n==="pointerout",X&&a!==jn&&(ve=a.relatedTarget||a.fromElement)&&(Vi(ve)||ve[is]))break e;if((fe||X)&&(X=Z.window===Z?Z:(X=Z.ownerDocument)?X.defaultView||X.parentWindow:window,fe?(ve=a.relatedTarget||a.toElement,fe=B,ve=ve?Vi(ve):null,ve!==null&&(At=Qe(ve),ve!==At||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(fe=null,ve=B),fe!==ve)){if(Ee=mo,re="onMouseLeave",U="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Ee=T,re="onPointerLeave",U="onPointerEnter",V="pointer"),At=fe==null?X:So(fe),z=ve==null?X:So(ve),X=new Ee(re,V+"leave",fe,a,Z),X.target=At,X.relatedTarget=z,re=null,Vi(Z)===B&&(Ee=new Ee(U,V+"enter",ve,a,Z),Ee.target=z,Ee.relatedTarget=At,re=Ee),At=re,fe&&ve)t:{for(Ee=fe,U=ve,V=0,z=Ee;z;z=To(z))V++;for(z=0,re=U;re;re=To(re))z++;for(;0<V-z;)Ee=To(Ee),V--;for(;0<z-V;)U=To(U),z--;for(;V--;){if(Ee===U||U!==null&&Ee===U.alternate)break t;Ee=To(Ee),U=To(U)}Ee=null}else Ee=null;fe!==null&&em(te,X,fe,Ee,!1),ve!==null&&At!==null&&em(te,At,ve,Ee,!0)}}e:{if(X=B?So(B):window,fe=X.nodeName&&X.nodeName.toLowerCase(),fe==="select"||fe==="input"&&X.type==="file")var Te=Ow;else if(Dp(X))if(Op)Te=Fw;else{Te=jw;var Pe=Lw}else(fe=X.nodeName)&&fe.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(Te=Mw);if(Te&&(Te=Te(n,B))){Vp(te,Te,a,Z);break e}Pe&&Pe(n,X,B),n==="focusout"&&(Pe=X._wrapperState)&&Pe.controlled&&X.type==="number"&&Kn(X,"number",X.value)}switch(Pe=B?So(B):window,n){case"focusin":(Dp(Pe)||Pe.contentEditable==="true")&&(Eo=Pe,_d=B,Na=null);break;case"focusout":Na=_d=Eo=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,$p(te,a,Z);break;case"selectionchange":if(Bw)break;case"keydown":case"keyup":$p(te,a,Z)}var be;if(kt)e:{switch(n){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else wo?kp(n,a)&&(Ve="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(Di&&a.locale!=="ko"&&(wo||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&wo&&(be=Sa()):(Bn=Z,co="value"in Bn?Bn.value:Bn.textContent,wo=!0)),Pe=du(B,Ve),0<Pe.length&&(Ve=new Ra(Ve,n,null,a,Z),te.push({event:Ve,listeners:Pe}),be?Ve.data=be:(be=Np(a),be!==null&&(Ve.data=be)))),(be=$n?kw(n,a):Nw(n,a))&&(B=du(B,"onBeforeInput"),0<B.length&&(Z=new Ra("onBeforeInput","beforeinput",null,a,Z),te.push({event:Z,listeners:B}),Z.data=be))}Xp(te,i)})}function Oa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function du(n,i){for(var a=i+"Capture",c=[];n!==null;){var h=n,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=gt(n,a),g!=null&&c.unshift(Oa(n,g,h)),g=gt(n,i),g!=null&&c.push(Oa(n,g,h))),n=n.return}return c}function To(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function em(n,i,a,c,h){for(var g=i._reactName,w=[];a!==null&&a!==c;){var R=a,b=R.alternate,B=R.stateNode;if(b!==null&&b===c)break;R.tag===5&&B!==null&&(R=B,h?(b=gt(a,g),b!=null&&w.unshift(Oa(a,b,R))):h||(b=gt(a,g),b!=null&&w.push(Oa(a,b,R)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var qw=/\r\n?/g,Gw=/\u0000|\uFFFD/g;function tm(n){return(typeof n=="string"?n:""+n).replace(qw,`
`).replace(Gw,"")}function hu(n,i,a){if(i=tm(i),tm(n)!==i&&a)throw Error(t(425))}function fu(){}var Cd=null,Ad=null;function Rd(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Pd=typeof setTimeout=="function"?setTimeout:void 0,Kw=typeof clearTimeout=="function"?clearTimeout:void 0,nm=typeof Promise=="function"?Promise:void 0,Qw=typeof queueMicrotask=="function"?queueMicrotask:typeof nm<"u"?function(n){return nm.resolve(null).then(n).catch(Yw)}:Pd;function Yw(n){setTimeout(function(){throw n})}function bd(n,i){var a=i,c=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){n.removeChild(h),yr(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);yr(i)}function Us(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function rm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var xo=Math.random().toString(36).slice(2),Lr="__reactFiber$"+xo,La="__reactProps$"+xo,is="__reactContainer$"+xo,kd="__reactEvents$"+xo,Jw="__reactListeners$"+xo,Xw="__reactHandles$"+xo;function Vi(n){var i=n[Lr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[is]||a[Lr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=rm(n);n!==null;){if(a=n[Lr])return a;n=rm(n)}return i}n=a,a=n.parentNode}return null}function ja(n){return n=n[Lr]||n[is],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function So(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function pu(n){return n[La]||null}var Nd=[],Co=-1;function zs(n){return{current:n}}function pt(n){0>Co||(n.current=Nd[Co],Nd[Co]=null,Co--)}function dt(n,i){Co++,Nd[Co]=n.current,n.current=i}var Bs={},sn=zs(Bs),Cn=zs(!1),Oi=Bs;function Ao(n,i){var a=n.type.contextTypes;if(!a)return Bs;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in a)h[g]=i[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=h),h}function An(n){return n=n.childContextTypes,n!=null}function mu(){pt(Cn),pt(sn)}function sm(n,i,a){if(sn.current!==Bs)throw Error(t(168));dt(sn,i),dt(Cn,a)}function im(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in i))throw Error(t(108,Ue(n)||"Unknown",h));return ie({},a,c)}function gu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Bs,Oi=sn.current,dt(sn,n),dt(Cn,Cn.current),!0}function om(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=im(n,i,Oi),c.__reactInternalMemoizedMergedChildContext=n,pt(Cn),pt(sn),dt(sn,n)):pt(Cn),dt(Cn,a)}var os=null,yu=!1,Dd=!1;function am(n){os===null?os=[n]:os.push(n)}function Zw(n){yu=!0,am(n)}function $s(){if(!Dd&&os!==null){Dd=!0;var n=0,i=Ke;try{var a=os;for(Ke=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}os=null,yu=!1}catch(h){throw os!==null&&(os=os.slice(n+1)),Zr(Ci,$s),h}finally{Ke=i,Dd=!1}}return null}var Ro=[],Po=0,vu=null,_u=0,nr=[],rr=0,Li=null,as=1,ls="";function ji(n,i){Ro[Po++]=_u,Ro[Po++]=vu,vu=n,_u=i}function lm(n,i,a){nr[rr++]=as,nr[rr++]=ls,nr[rr++]=Li,Li=n;var c=as;n=ls;var h=32-mn(c)-1;c&=~(1<<h),a+=1;var g=32-mn(i)+h;if(30<g){var w=h-h%5;g=(c&(1<<w)-1).toString(32),c>>=w,h-=w,as=1<<32-mn(i)+h|a<<h|c,ls=g+n}else as=1<<g|a<<h|c,ls=n}function Vd(n){n.return!==null&&(ji(n,1),lm(n,1,0))}function Od(n){for(;n===vu;)vu=Ro[--Po],Ro[Po]=null,_u=Ro[--Po],Ro[Po]=null;for(;n===Li;)Li=nr[--rr],nr[rr]=null,ls=nr[--rr],nr[rr]=null,as=nr[--rr],nr[rr]=null}var Hn=null,Wn=null,_t=!1,wr=null;function um(n,i){var a=ar(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function cm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Hn=n,Wn=Us(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Hn=n,Wn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Li!==null?{id:as,overflow:ls}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=ar(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,Hn=n,Wn=null,!0):!1;default:return!1}}function Ld(n){return(n.mode&1)!==0&&(n.flags&128)===0}function jd(n){if(_t){var i=Wn;if(i){var a=i;if(!cm(n,i)){if(Ld(n))throw Error(t(418));i=Us(a.nextSibling);var c=Hn;i&&cm(n,i)?um(c,a):(n.flags=n.flags&-4097|2,_t=!1,Hn=n)}}else{if(Ld(n))throw Error(t(418));n.flags=n.flags&-4097|2,_t=!1,Hn=n}}}function dm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Hn=n}function wu(n){if(n!==Hn)return!1;if(!_t)return dm(n),_t=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Rd(n.type,n.memoizedProps)),i&&(i=Wn)){if(Ld(n))throw hm(),Error(t(418));for(;i;)um(n,i),i=Us(i.nextSibling)}if(dm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Wn=Us(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Wn=null}}else Wn=Hn?Us(n.stateNode.nextSibling):null;return!0}function hm(){for(var n=Wn;n;)n=Us(n.nextSibling)}function bo(){Wn=Hn=null,_t=!1}function Md(n){wr===null?wr=[n]:wr.push(n)}var eE=Ie.ReactCurrentBatchConfig;function Ma(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var h=c,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(w){var R=h.refs;w===null?delete R[g]:R[g]=w},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Eu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function fm(n){var i=n._init;return i(n._payload)}function pm(n){function i(U,V){if(n){var z=U.deletions;z===null?(U.deletions=[V],U.flags|=16):z.push(V)}}function a(U,V){if(!n)return null;for(;V!==null;)i(U,V),V=V.sibling;return null}function c(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function h(U,V){return U=Js(U,V),U.index=0,U.sibling=null,U}function g(U,V,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<V?(U.flags|=2,V):z):(U.flags|=2,V)):(U.flags|=1048576,V)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function R(U,V,z,re){return V===null||V.tag!==6?(V=Ph(z,U.mode,re),V.return=U,V):(V=h(V,z),V.return=U,V)}function b(U,V,z,re){var Te=z.type;return Te===N?Z(U,V,z.props.children,re,z.key):V!==null&&(V.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===lt&&fm(Te)===V.type)?(re=h(V,z.props),re.ref=Ma(U,V,z),re.return=U,re):(re=Wu(z.type,z.key,z.props,null,U.mode,re),re.ref=Ma(U,V,z),re.return=U,re)}function B(U,V,z,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=bh(z,U.mode,re),V.return=U,V):(V=h(V,z.children||[]),V.return=U,V)}function Z(U,V,z,re,Te){return V===null||V.tag!==7?(V=Wi(z,U.mode,re,Te),V.return=U,V):(V=h(V,z),V.return=U,V)}function te(U,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Ph(""+V,U.mode,z),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case _e:return z=Wu(V.type,V.key,V.props,null,U.mode,z),z.ref=Ma(U,null,V),z.return=U,z;case we:return V=bh(V,U.mode,z),V.return=U,V;case lt:var re=V._init;return te(U,re(V._payload),z)}if(Pt(V)||me(V))return V=Wi(V,U.mode,z,null),V.return=U,V;Eu(U,V)}return null}function X(U,V,z,re){var Te=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Te!==null?null:R(U,V,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case _e:return z.key===Te?b(U,V,z,re):null;case we:return z.key===Te?B(U,V,z,re):null;case lt:return Te=z._init,X(U,V,Te(z._payload),re)}if(Pt(z)||me(z))return Te!==null?null:Z(U,V,z,re,null);Eu(U,z)}return null}function fe(U,V,z,re,Te){if(typeof re=="string"&&re!==""||typeof re=="number")return U=U.get(z)||null,R(V,U,""+re,Te);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case _e:return U=U.get(re.key===null?z:re.key)||null,b(V,U,re,Te);case we:return U=U.get(re.key===null?z:re.key)||null,B(V,U,re,Te);case lt:var Pe=re._init;return fe(U,V,z,Pe(re._payload),Te)}if(Pt(re)||me(re))return U=U.get(z)||null,Z(V,U,re,Te,null);Eu(V,re)}return null}function ve(U,V,z,re){for(var Te=null,Pe=null,be=V,Ve=V=0,Wt=null;be!==null&&Ve<z.length;Ve++){be.index>Ve?(Wt=be,be=null):Wt=be.sibling;var et=X(U,be,z[Ve],re);if(et===null){be===null&&(be=Wt);break}n&&be&&et.alternate===null&&i(U,be),V=g(et,V,Ve),Pe===null?Te=et:Pe.sibling=et,Pe=et,be=Wt}if(Ve===z.length)return a(U,be),_t&&ji(U,Ve),Te;if(be===null){for(;Ve<z.length;Ve++)be=te(U,z[Ve],re),be!==null&&(V=g(be,V,Ve),Pe===null?Te=be:Pe.sibling=be,Pe=be);return _t&&ji(U,Ve),Te}for(be=c(U,be);Ve<z.length;Ve++)Wt=fe(be,U,Ve,z[Ve],re),Wt!==null&&(n&&Wt.alternate!==null&&be.delete(Wt.key===null?Ve:Wt.key),V=g(Wt,V,Ve),Pe===null?Te=Wt:Pe.sibling=Wt,Pe=Wt);return n&&be.forEach(function(Xs){return i(U,Xs)}),_t&&ji(U,Ve),Te}function Ee(U,V,z,re){var Te=me(z);if(typeof Te!="function")throw Error(t(150));if(z=Te.call(z),z==null)throw Error(t(151));for(var Pe=Te=null,be=V,Ve=V=0,Wt=null,et=z.next();be!==null&&!et.done;Ve++,et=z.next()){be.index>Ve?(Wt=be,be=null):Wt=be.sibling;var Xs=X(U,be,et.value,re);if(Xs===null){be===null&&(be=Wt);break}n&&be&&Xs.alternate===null&&i(U,be),V=g(Xs,V,Ve),Pe===null?Te=Xs:Pe.sibling=Xs,Pe=Xs,be=Wt}if(et.done)return a(U,be),_t&&ji(U,Ve),Te;if(be===null){for(;!et.done;Ve++,et=z.next())et=te(U,et.value,re),et!==null&&(V=g(et,V,Ve),Pe===null?Te=et:Pe.sibling=et,Pe=et);return _t&&ji(U,Ve),Te}for(be=c(U,be);!et.done;Ve++,et=z.next())et=fe(be,U,Ve,et.value,re),et!==null&&(n&&et.alternate!==null&&be.delete(et.key===null?Ve:et.key),V=g(et,V,Ve),Pe===null?Te=et:Pe.sibling=et,Pe=et);return n&&be.forEach(function(DE){return i(U,DE)}),_t&&ji(U,Ve),Te}function At(U,V,z,re){if(typeof z=="object"&&z!==null&&z.type===N&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case _e:e:{for(var Te=z.key,Pe=V;Pe!==null;){if(Pe.key===Te){if(Te=z.type,Te===N){if(Pe.tag===7){a(U,Pe.sibling),V=h(Pe,z.props.children),V.return=U,U=V;break e}}else if(Pe.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===lt&&fm(Te)===Pe.type){a(U,Pe.sibling),V=h(Pe,z.props),V.ref=Ma(U,Pe,z),V.return=U,U=V;break e}a(U,Pe);break}else i(U,Pe);Pe=Pe.sibling}z.type===N?(V=Wi(z.props.children,U.mode,re,z.key),V.return=U,U=V):(re=Wu(z.type,z.key,z.props,null,U.mode,re),re.ref=Ma(U,V,z),re.return=U,U=re)}return w(U);case we:e:{for(Pe=z.key;V!==null;){if(V.key===Pe)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(U,V.sibling),V=h(V,z.children||[]),V.return=U,U=V;break e}else{a(U,V);break}else i(U,V);V=V.sibling}V=bh(z,U.mode,re),V.return=U,U=V}return w(U);case lt:return Pe=z._init,At(U,V,Pe(z._payload),re)}if(Pt(z))return ve(U,V,z,re);if(me(z))return Ee(U,V,z,re);Eu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(U,V.sibling),V=h(V,z),V.return=U,U=V):(a(U,V),V=Ph(z,U.mode,re),V.return=U,U=V),w(U)):a(U,V)}return At}var ko=pm(!0),mm=pm(!1),Iu=zs(null),Tu=null,No=null,Fd=null;function Ud(){Fd=No=Tu=null}function zd(n){var i=Iu.current;pt(Iu),n._currentValue=i}function Bd(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function Do(n,i){Tu=n,Fd=No=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Rn=!0),n.firstContext=null)}function sr(n){var i=n._currentValue;if(Fd!==n)if(n={context:n,memoizedValue:i,next:null},No===null){if(Tu===null)throw Error(t(308));No=n,Tu.dependencies={lanes:0,firstContext:n}}else No=No.next=n;return i}var Mi=null;function $d(n){Mi===null?Mi=[n]:Mi.push(n)}function gm(n,i,a,c){var h=i.interleaved;return h===null?(a.next=a,$d(i)):(a.next=h.next,h.next=a),i.interleaved=a,us(n,c)}function us(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Hs=!1;function Hd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function cs(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Ws(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ze&2)!==0){var h=c.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),c.pending=i,us(n,a)}return h=c.interleaved,h===null?(i.next=i,$d(c)):(i.next=h.next,h.next=i),c.interleaved=i,us(n,a)}function xu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Vs(n,a)}}function vm(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?h=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?h=g=i:g=g.next=i}else h=g=i;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Su(n,i,a,c){var h=n.updateQueue;Hs=!1;var g=h.firstBaseUpdate,w=h.lastBaseUpdate,R=h.shared.pending;if(R!==null){h.shared.pending=null;var b=R,B=b.next;b.next=null,w===null?g=B:w.next=B,w=b;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,R=Z.lastBaseUpdate,R!==w&&(R===null?Z.firstBaseUpdate=B:R.next=B,Z.lastBaseUpdate=b))}if(g!==null){var te=h.baseState;w=0,Z=B=b=null,R=g;do{var X=R.lane,fe=R.eventTime;if((c&X)===X){Z!==null&&(Z=Z.next={eventTime:fe,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ve=n,Ee=R;switch(X=i,fe=a,Ee.tag){case 1:if(ve=Ee.payload,typeof ve=="function"){te=ve.call(fe,te,X);break e}te=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ee.payload,X=typeof ve=="function"?ve.call(fe,te,X):ve,X==null)break e;te=ie({},te,X);break e;case 2:Hs=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,X=h.effects,X===null?h.effects=[R]:X.push(R))}else fe={eventTime:fe,lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Z===null?(B=Z=fe,b=te):Z=Z.next=fe,w|=X;if(R=R.next,R===null){if(R=h.shared.pending,R===null)break;X=R,R=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);if(Z===null&&(b=te),h.baseState=b,h.firstBaseUpdate=B,h.lastBaseUpdate=Z,i=h.shared.interleaved,i!==null){h=i;do w|=h.lane,h=h.next;while(h!==i)}else g===null&&(h.shared.lanes=0);zi|=w,n.lanes=w,n.memoizedState=te}}function _m(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(t(191,h));h.call(c)}}}var Fa={},jr=zs(Fa),Ua=zs(Fa),za=zs(Fa);function Fi(n){if(n===Fa)throw Error(t(174));return n}function Wd(n,i){switch(dt(za,i),dt(Ua,n),dt(jr,Fa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:se(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=se(i,n)}pt(jr),dt(jr,i)}function Vo(){pt(jr),pt(Ua),pt(za)}function wm(n){Fi(za.current);var i=Fi(jr.current),a=se(i,n.type);i!==a&&(dt(Ua,n),dt(jr,a))}function qd(n){Ua.current===n&&(pt(jr),pt(Ua))}var Et=zs(0);function Cu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Gd=[];function Kd(){for(var n=0;n<Gd.length;n++)Gd[n]._workInProgressVersionPrimary=null;Gd.length=0}var Au=Ie.ReactCurrentDispatcher,Qd=Ie.ReactCurrentBatchConfig,Ui=0,It=null,Ft=null,$t=null,Ru=!1,Ba=!1,$a=0,tE=0;function on(){throw Error(t(321))}function Yd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!_r(n[a],i[a]))return!1;return!0}function Jd(n,i,a,c,h,g){if(Ui=g,It=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Au.current=n===null||n.memoizedState===null?iE:oE,n=a(c,h),Ba){g=0;do{if(Ba=!1,$a=0,25<=g)throw Error(t(301));g+=1,$t=Ft=null,i.updateQueue=null,Au.current=aE,n=a(c,h)}while(Ba)}if(Au.current=ku,i=Ft!==null&&Ft.next!==null,Ui=0,$t=Ft=It=null,Ru=!1,i)throw Error(t(300));return n}function Xd(){var n=$a!==0;return $a=0,n}function Mr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?It.memoizedState=$t=n:$t=$t.next=n,$t}function ir(){if(Ft===null){var n=It.alternate;n=n!==null?n.memoizedState:null}else n=Ft.next;var i=$t===null?It.memoizedState:$t.next;if(i!==null)$t=i,Ft=n;else{if(n===null)throw Error(t(310));Ft=n,n={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},$t===null?It.memoizedState=$t=n:$t=$t.next=n}return $t}function Ha(n,i){return typeof i=="function"?i(n):i}function Zd(n){var i=ir(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Ft,h=c.baseQueue,g=a.pending;if(g!==null){if(h!==null){var w=h.next;h.next=g.next,g.next=w}c.baseQueue=h=g,a.pending=null}if(h!==null){g=h.next,c=c.baseState;var R=w=null,b=null,B=g;do{var Z=B.lane;if((Ui&Z)===Z)b!==null&&(b=b.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var te={lane:Z,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};b===null?(R=b=te,w=c):b=b.next=te,It.lanes|=Z,zi|=Z}B=B.next}while(B!==null&&B!==g);b===null?w=c:b.next=R,_r(c,i.memoizedState)||(Rn=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=b,a.lastRenderedState=c}if(n=a.interleaved,n!==null){h=n;do g=h.lane,It.lanes|=g,zi|=g,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function eh(n){var i=ir(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,g=i.memoizedState;if(h!==null){a.pending=null;var w=h=h.next;do g=n(g,w.action),w=w.next;while(w!==h);_r(g,i.memoizedState)||(Rn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function Em(){}function Im(n,i){var a=It,c=ir(),h=i(),g=!_r(c.memoizedState,h);if(g&&(c.memoizedState=h,Rn=!0),c=c.queue,th(Sm.bind(null,a,c,n),[n]),c.getSnapshot!==i||g||$t!==null&&$t.memoizedState.tag&1){if(a.flags|=2048,Wa(9,xm.bind(null,a,c,h,i),void 0,null),Ht===null)throw Error(t(349));(Ui&30)!==0||Tm(a,i,h)}return h}function Tm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=It.updateQueue,i===null?(i={lastEffect:null,stores:null},It.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function xm(n,i,a,c){i.value=a,i.getSnapshot=c,Cm(i)&&Am(n)}function Sm(n,i,a){return a(function(){Cm(i)&&Am(n)})}function Cm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!_r(n,a)}catch{return!0}}function Am(n){var i=us(n,1);i!==null&&xr(i,n,1,-1)}function Rm(n){var i=Mr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:n},i.queue=n,n=n.dispatch=sE.bind(null,It,n),[i.memoizedState,n]}function Wa(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=It.updateQueue,i===null?(i={lastEffect:null,stores:null},It.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Pm(){return ir().memoizedState}function Pu(n,i,a,c){var h=Mr();It.flags|=n,h.memoizedState=Wa(1|i,a,void 0,c===void 0?null:c)}function bu(n,i,a,c){var h=ir();c=c===void 0?null:c;var g=void 0;if(Ft!==null){var w=Ft.memoizedState;if(g=w.destroy,c!==null&&Yd(c,w.deps)){h.memoizedState=Wa(i,a,g,c);return}}It.flags|=n,h.memoizedState=Wa(1|i,a,g,c)}function bm(n,i){return Pu(8390656,8,n,i)}function th(n,i){return bu(2048,8,n,i)}function km(n,i){return bu(4,2,n,i)}function Nm(n,i){return bu(4,4,n,i)}function Dm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Vm(n,i,a){return a=a!=null?a.concat([n]):null,bu(4,4,Dm.bind(null,i,n),a)}function nh(){}function Om(n,i){var a=ir();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Yd(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Lm(n,i){var a=ir();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Yd(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function jm(n,i,a){return(Ui&21)===0?(n.baseState&&(n.baseState=!1,Rn=!0),n.memoizedState=a):(_r(a,i)||(a=Pi(),It.lanes|=a,zi|=a,n.baseState=!0),i)}function nE(n,i){var a=Ke;Ke=a!==0&&4>a?a:4,n(!0);var c=Qd.transition;Qd.transition={};try{n(!1),i()}finally{Ke=a,Qd.transition=c}}function Mm(){return ir().memoizedState}function rE(n,i,a){var c=Qs(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Fm(n))Um(i,a);else if(a=gm(n,i,a,c),a!==null){var h=vn();xr(a,n,c,h),zm(a,i,c)}}function sE(n,i,a){var c=Qs(n),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fm(n))Um(i,h);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var w=i.lastRenderedState,R=g(w,a);if(h.hasEagerState=!0,h.eagerState=R,_r(R,w)){var b=i.interleaved;b===null?(h.next=h,$d(i)):(h.next=b.next,b.next=h),i.interleaved=h;return}}catch{}finally{}a=gm(n,i,h,c),a!==null&&(h=vn(),xr(a,n,c,h),zm(a,i,c))}}function Fm(n){var i=n.alternate;return n===It||i!==null&&i===It}function Um(n,i){Ba=Ru=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function zm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Vs(n,a)}}var ku={readContext:sr,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},iE={readContext:sr,useCallback:function(n,i){return Mr().memoizedState=[n,i===void 0?null:i],n},useContext:sr,useEffect:bm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Pu(4194308,4,Dm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Pu(4194308,4,n,i)},useInsertionEffect:function(n,i){return Pu(4,2,n,i)},useMemo:function(n,i){var a=Mr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Mr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=rE.bind(null,It,n),[c.memoizedState,n]},useRef:function(n){var i=Mr();return n={current:n},i.memoizedState=n},useState:Rm,useDebugValue:nh,useDeferredValue:function(n){return Mr().memoizedState=n},useTransition:function(){var n=Rm(!1),i=n[0];return n=nE.bind(null,n[1]),Mr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=It,h=Mr();if(_t){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Ht===null)throw Error(t(349));(Ui&30)!==0||Tm(c,i,a)}h.memoizedState=a;var g={value:a,getSnapshot:i};return h.queue=g,bm(Sm.bind(null,c,g,n),[n]),c.flags|=2048,Wa(9,xm.bind(null,c,g,a,i),void 0,null),a},useId:function(){var n=Mr(),i=Ht.identifierPrefix;if(_t){var a=ls,c=as;a=(c&~(1<<32-mn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=$a++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=tE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},oE={readContext:sr,useCallback:Om,useContext:sr,useEffect:th,useImperativeHandle:Vm,useInsertionEffect:km,useLayoutEffect:Nm,useMemo:Lm,useReducer:Zd,useRef:Pm,useState:function(){return Zd(Ha)},useDebugValue:nh,useDeferredValue:function(n){var i=ir();return jm(i,Ft.memoizedState,n)},useTransition:function(){var n=Zd(Ha)[0],i=ir().memoizedState;return[n,i]},useMutableSource:Em,useSyncExternalStore:Im,useId:Mm,unstable_isNewReconciler:!1},aE={readContext:sr,useCallback:Om,useContext:sr,useEffect:th,useImperativeHandle:Vm,useInsertionEffect:km,useLayoutEffect:Nm,useMemo:Lm,useReducer:eh,useRef:Pm,useState:function(){return eh(Ha)},useDebugValue:nh,useDeferredValue:function(n){var i=ir();return Ft===null?i.memoizedState=n:jm(i,Ft.memoizedState,n)},useTransition:function(){var n=eh(Ha)[0],i=ir().memoizedState;return[n,i]},useMutableSource:Em,useSyncExternalStore:Im,useId:Mm,unstable_isNewReconciler:!1};function Er(n,i){if(n&&n.defaultProps){i=ie({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function rh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ie({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Nu={isMounted:function(n){return(n=n._reactInternals)?Qe(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=vn(),h=Qs(n),g=cs(c,h);g.payload=i,a!=null&&(g.callback=a),i=Ws(n,g,h),i!==null&&(xr(i,n,h,c),xu(i,n,h))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=vn(),h=Qs(n),g=cs(c,h);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Ws(n,g,h),i!==null&&(xr(i,n,h,c),xu(i,n,h))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=vn(),c=Qs(n),h=cs(a,c);h.tag=2,i!=null&&(h.callback=i),i=Ws(n,h,c),i!==null&&(xr(i,n,c,a),xu(i,n,c))}};function Bm(n,i,a,c,h,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):i.prototype&&i.prototype.isPureReactComponent?!ka(a,c)||!ka(h,g):!0}function $m(n,i,a){var c=!1,h=Bs,g=i.contextType;return typeof g=="object"&&g!==null?g=sr(g):(h=An(i)?Oi:sn.current,c=i.contextTypes,g=(c=c!=null)?Ao(n,h):Bs),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Nu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=g),i}function Hm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Nu.enqueueReplaceState(i,i.state,null)}function sh(n,i,a,c){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},Hd(n);var g=i.contextType;typeof g=="object"&&g!==null?h.context=sr(g):(g=An(i)?Oi:sn.current,h.context=Ao(n,g)),h.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(rh(n,i,g,a),h.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(i=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),i!==h.state&&Nu.enqueueReplaceState(h,h.state,null),Su(n,a,h,c),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function Oo(n,i){try{var a="",c=i;do a+=ke(c),c=c.return;while(c);var h=a}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:h,digest:null}}function ih(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function oh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var lE=typeof WeakMap=="function"?WeakMap:Map;function Wm(n,i,a){a=cs(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Fu||(Fu=!0,Eh=c),oh(n,i)},a}function qm(n,i,a){a=cs(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=i.value;a.payload=function(){return c(h)},a.callback=function(){oh(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){oh(n,i),typeof c!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Gm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new lE;var h=new Set;c.set(i,h)}else h=c.get(i),h===void 0&&(h=new Set,c.set(i,h));h.has(a)||(h.add(a),n=IE.bind(null,n,i,a),i.then(n,n))}function Km(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Qm(n,i,a,c,h){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=cs(-1,1),i.tag=2,Ws(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var uE=Ie.ReactCurrentOwner,Rn=!1;function yn(n,i,a,c){i.child=n===null?mm(i,null,a,c):ko(i,n.child,a,c)}function Ym(n,i,a,c,h){a=a.render;var g=i.ref;return Do(i,h),c=Jd(n,i,a,c,g,h),a=Xd(),n!==null&&!Rn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,ds(n,i,h)):(_t&&a&&Vd(i),i.flags|=1,yn(n,i,c,h),i.child)}function Jm(n,i,a,c,h){if(n===null){var g=a.type;return typeof g=="function"&&!Rh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Xm(n,i,g,c,h)):(n=Wu(a.type,null,c,i,i.mode,h),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&h)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:ka,a(w,c)&&n.ref===i.ref)return ds(n,i,h)}return i.flags|=1,n=Js(g,c),n.ref=i.ref,n.return=i,i.child=n}function Xm(n,i,a,c,h){if(n!==null){var g=n.memoizedProps;if(ka(g,c)&&n.ref===i.ref)if(Rn=!1,i.pendingProps=c=g,(n.lanes&h)!==0)(n.flags&131072)!==0&&(Rn=!0);else return i.lanes=n.lanes,ds(n,i,h)}return ah(n,i,a,c,h)}function Zm(n,i,a){var c=i.pendingProps,h=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(jo,qn),qn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,dt(jo,qn),qn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,dt(jo,qn),qn|=c}else g!==null?(c=g.baseLanes|a,i.memoizedState=null):c=a,dt(jo,qn),qn|=c;return yn(n,i,h,a),i.child}function eg(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function ah(n,i,a,c,h){var g=An(a)?Oi:sn.current;return g=Ao(i,g),Do(i,h),a=Jd(n,i,a,c,g,h),c=Xd(),n!==null&&!Rn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,ds(n,i,h)):(_t&&c&&Vd(i),i.flags|=1,yn(n,i,a,h),i.child)}function tg(n,i,a,c,h){if(An(a)){var g=!0;gu(i)}else g=!1;if(Do(i,h),i.stateNode===null)Vu(n,i),$m(i,a,c),sh(i,a,c,h),c=!0;else if(n===null){var w=i.stateNode,R=i.memoizedProps;w.props=R;var b=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=sr(B):(B=An(a)?Oi:sn.current,B=Ao(i,B));var Z=a.getDerivedStateFromProps,te=typeof Z=="function"||typeof w.getSnapshotBeforeUpdate=="function";te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==c||b!==B)&&Hm(i,w,c,B),Hs=!1;var X=i.memoizedState;w.state=X,Su(i,c,w,h),b=i.memoizedState,R!==c||X!==b||Cn.current||Hs?(typeof Z=="function"&&(rh(i,a,Z,c),b=i.memoizedState),(R=Hs||Bm(i,a,R,c,X,b,B))?(te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=b),w.props=c,w.state=b,w.context=B,c=R):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,ym(n,i),R=i.memoizedProps,B=i.type===i.elementType?R:Er(i.type,R),w.props=B,te=i.pendingProps,X=w.context,b=a.contextType,typeof b=="object"&&b!==null?b=sr(b):(b=An(a)?Oi:sn.current,b=Ao(i,b));var fe=a.getDerivedStateFromProps;(Z=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==te||X!==b)&&Hm(i,w,c,b),Hs=!1,X=i.memoizedState,w.state=X,Su(i,c,w,h);var ve=i.memoizedState;R!==te||X!==ve||Cn.current||Hs?(typeof fe=="function"&&(rh(i,a,fe,c),ve=i.memoizedState),(B=Hs||Bm(i,a,B,c,X,ve,b)||!1)?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ve,b),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ve,b)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ve),w.props=c,w.state=ve,w.context=b,c=B):(typeof w.componentDidUpdate!="function"||R===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),c=!1)}return lh(n,i,a,c,g,h)}function lh(n,i,a,c,h,g){eg(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return h&&om(i,a,!1),ds(n,i,g);c=i.stateNode,uE.current=i;var R=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=ko(i,n.child,null,g),i.child=ko(i,null,R,g)):yn(n,i,R,g),i.memoizedState=c.state,h&&om(i,a,!0),i.child}function ng(n){var i=n.stateNode;i.pendingContext?sm(n,i.pendingContext,i.pendingContext!==i.context):i.context&&sm(n,i.context,!1),Wd(n,i.containerInfo)}function rg(n,i,a,c,h){return bo(),Md(h),i.flags|=256,yn(n,i,a,c),i.child}var uh={dehydrated:null,treeContext:null,retryLane:0};function ch(n){return{baseLanes:n,cachePool:null,transitions:null}}function sg(n,i,a){var c=i.pendingProps,h=Et.current,g=!1,w=(i.flags&128)!==0,R;if((R=w)||(R=n!==null&&n.memoizedState===null?!1:(h&2)!==0),R?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),dt(Et,h&1),n===null)return jd(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,g?(c=i.mode,g=i.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=qu(w,c,0,null),n=Wi(n,c,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=ch(a),i.memoizedState=uh,n):dh(i,w));if(h=n.memoizedState,h!==null&&(R=h.dehydrated,R!==null))return cE(n,i,w,c,R,h,a);if(g){g=c.fallback,w=i.mode,h=n.child,R=h.sibling;var b={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==h?(c=i.child,c.childLanes=0,c.pendingProps=b,i.deletions=null):(c=Js(h,b),c.subtreeFlags=h.subtreeFlags&14680064),R!==null?g=Js(R,g):(g=Wi(g,w,a,null),g.flags|=2),g.return=i,c.return=i,c.sibling=g,i.child=c,c=g,g=i.child,w=n.child.memoizedState,w=w===null?ch(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,i.memoizedState=uh,c}return g=n.child,n=g.sibling,c=Js(g,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function dh(n,i){return i=qu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Du(n,i,a,c){return c!==null&&Md(c),ko(i,n.child,null,a),n=dh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function cE(n,i,a,c,h,g,w){if(a)return i.flags&256?(i.flags&=-257,c=ih(Error(t(422))),Du(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=c.fallback,h=i.mode,c=qu({mode:"visible",children:c.children},h,0,null),g=Wi(g,h,w,null),g.flags|=2,c.return=i,g.return=i,c.sibling=g,i.child=c,(i.mode&1)!==0&&ko(i,n.child,null,w),i.child.memoizedState=ch(w),i.memoizedState=uh,g);if((i.mode&1)===0)return Du(n,i,w,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var R=c.dgst;return c=R,g=Error(t(419)),c=ih(g,c,void 0),Du(n,i,w,c)}if(R=(w&n.childLanes)!==0,Rn||R){if(c=Ht,c!==null){switch(w&-w){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|w))!==0?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,us(n,h),xr(c,n,h,-1))}return Ah(),c=ih(Error(t(421))),Du(n,i,w,c)}return h.data==="$?"?(i.flags|=128,i.child=n.child,i=TE.bind(null,n),h._reactRetry=i,null):(n=g.treeContext,Wn=Us(h.nextSibling),Hn=i,_t=!0,wr=null,n!==null&&(nr[rr++]=as,nr[rr++]=ls,nr[rr++]=Li,as=n.id,ls=n.overflow,Li=i),i=dh(i,c.children),i.flags|=4096,i)}function ig(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Bd(n.return,i,a)}function hh(n,i,a,c,h){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=h)}function og(n,i,a){var c=i.pendingProps,h=c.revealOrder,g=c.tail;if(yn(n,i,c.children,a),c=Et.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ig(n,a,i);else if(n.tag===19)ig(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(dt(Et,c),(i.mode&1)===0)i.memoizedState=null;else switch(h){case"forwards":for(a=i.child,h=null;a!==null;)n=a.alternate,n!==null&&Cu(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),hh(i,!1,h,a,g);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(n=h.alternate,n!==null&&Cu(n)===null){i.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}hh(i,!0,a,null,g);break;case"together":hh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Vu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function ds(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),zi|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Js(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Js(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function dE(n,i,a){switch(i.tag){case 3:ng(i),bo();break;case 5:wm(i);break;case 1:An(i.type)&&gu(i);break;case 4:Wd(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,h=i.memoizedProps.value;dt(Iu,c._currentValue),c._currentValue=h;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(dt(Et,Et.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?sg(n,i,a):(dt(Et,Et.current&1),n=ds(n,i,a),n!==null?n.sibling:null);dt(Et,Et.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return og(n,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),dt(Et,Et.current),c)break;return null;case 22:case 23:return i.lanes=0,Zm(n,i,a)}return ds(n,i,a)}var ag,fh,lg,ug;ag=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},fh=function(){},lg=function(n,i,a,c){var h=n.memoizedProps;if(h!==c){n=i.stateNode,Fi(jr.current);var g=null;switch(a){case"input":h=de(n,h),c=de(n,c),g=[];break;case"select":h=ie({},h,{value:void 0}),c=ie({},c,{value:void 0}),g=[];break;case"textarea":h=Ln(n,h),c=Ln(n,c),g=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=fu)}Cs(a,c);var w;a=null;for(B in h)if(!c.hasOwnProperty(B)&&h.hasOwnProperty(B)&&h[B]!=null)if(B==="style"){var R=h[B];for(w in R)R.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in c){var b=c[B];if(R=h!=null?h[B]:void 0,c.hasOwnProperty(B)&&b!==R&&(b!=null||R!=null))if(B==="style")if(R){for(w in R)!R.hasOwnProperty(w)||b&&b.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in b)b.hasOwnProperty(w)&&R[w]!==b[w]&&(a||(a={}),a[w]=b[w])}else a||(g||(g=[]),g.push(B,a)),a=b;else B==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,R=R?R.__html:void 0,b!=null&&R!==b&&(g=g||[]).push(B,b)):B==="children"?typeof b!="string"&&typeof b!="number"||(g=g||[]).push(B,""+b):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(b!=null&&B==="onScroll"&&ft("scroll",n),g||R===b||(g=[])):(g=g||[]).push(B,b))}a&&(g=g||[]).push("style",a);var B=g;(i.updateQueue=B)&&(i.flags|=4)}},ug=function(n,i,a,c){a!==c&&(i.flags|=4)};function qa(n,i){if(!_t)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function an(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function hE(n,i,a){var c=i.pendingProps;switch(Od(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(i),null;case 1:return An(i.type)&&mu(),an(i),null;case 3:return c=i.stateNode,Vo(),pt(Cn),pt(sn),Kd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(wu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,wr!==null&&(xh(wr),wr=null))),fh(n,i),an(i),null;case 5:qd(i);var h=Fi(za.current);if(a=i.type,n!==null&&i.stateNode!=null)lg(n,i,a,c,h),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return an(i),null}if(n=Fi(jr.current),wu(i)){c=i.stateNode,a=i.type;var g=i.memoizedProps;switch(c[Lr]=i,c[La]=g,n=(i.mode&1)!==0,a){case"dialog":ft("cancel",c),ft("close",c);break;case"iframe":case"object":case"embed":ft("load",c);break;case"video":case"audio":for(h=0;h<Da.length;h++)ft(Da[h],c);break;case"source":ft("error",c);break;case"img":case"image":case"link":ft("error",c),ft("load",c);break;case"details":ft("toggle",c);break;case"input":je(c,g),ft("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},ft("invalid",c);break;case"textarea":En(c,g),ft("invalid",c)}Cs(a,g),h=null;for(var w in g)if(g.hasOwnProperty(w)){var R=g[w];w==="children"?typeof R=="string"?c.textContent!==R&&(g.suppressHydrationWarning!==!0&&hu(c.textContent,R,n),h=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(g.suppressHydrationWarning!==!0&&hu(c.textContent,R,n),h=["children",""+R]):o.hasOwnProperty(w)&&R!=null&&w==="onScroll"&&ft("scroll",c)}switch(a){case"input":wt(c),wn(c,g,!0);break;case"textarea":wt(c),pn(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=fu)}c=h,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=tt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Lr]=i,n[La]=c,ag(n,i,!1,!1),i.stateNode=n;e:{switch(w=As(a,c),a){case"dialog":ft("cancel",n),ft("close",n),h=c;break;case"iframe":case"object":case"embed":ft("load",n),h=c;break;case"video":case"audio":for(h=0;h<Da.length;h++)ft(Da[h],n);h=c;break;case"source":ft("error",n),h=c;break;case"img":case"image":case"link":ft("error",n),ft("load",n),h=c;break;case"details":ft("toggle",n),h=c;break;case"input":je(n,c),h=de(n,c),ft("invalid",n);break;case"option":h=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},h=ie({},c,{value:void 0}),ft("invalid",n);break;case"textarea":En(n,c),h=Ln(n,c),ft("invalid",n);break;default:h=c}Cs(a,h),R=h;for(g in R)if(R.hasOwnProperty(g)){var b=R[g];g==="style"?Ss(n,b):g==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&Qn(n,b)):g==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&dr(n,b):typeof b=="number"&&dr(n,""+b):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?b!=null&&g==="onScroll"&&ft("scroll",n):b!=null&&J(n,g,b,w))}switch(a){case"input":wt(n),wn(n,c,!1);break;case"textarea":wt(n),pn(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Oe(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?Qt(n,!!c.multiple,g,!1):c.defaultValue!=null&&Qt(n,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=fu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return an(i),null;case 6:if(n&&i.stateNode!=null)ug(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Fi(za.current),Fi(jr.current),wu(i)){if(c=i.stateNode,a=i.memoizedProps,c[Lr]=i,(g=c.nodeValue!==a)&&(n=Hn,n!==null))switch(n.tag){case 3:hu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&hu(c.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Lr]=i,i.stateNode=c}return an(i),null;case 13:if(pt(Et),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(_t&&Wn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)hm(),bo(),i.flags|=98560,g=!1;else if(g=wu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Lr]=i}else bo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;an(i),g=!1}else wr!==null&&(xh(wr),wr=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(Et.current&1)!==0?Ut===0&&(Ut=3):Ah())),i.updateQueue!==null&&(i.flags|=4),an(i),null);case 4:return Vo(),fh(n,i),n===null&&Va(i.stateNode.containerInfo),an(i),null;case 10:return zd(i.type._context),an(i),null;case 17:return An(i.type)&&mu(),an(i),null;case 19:if(pt(Et),g=i.memoizedState,g===null)return an(i),null;if(c=(i.flags&128)!==0,w=g.rendering,w===null)if(c)qa(g,!1);else{if(Ut!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Cu(n),w!==null){for(i.flags|=128,qa(g,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)g=a,n=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return dt(Et,Et.current&1|2),i.child}n=n.sibling}g.tail!==null&&ct()>Mo&&(i.flags|=128,c=!0,qa(g,!1),i.lanes=4194304)}else{if(!c)if(n=Cu(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),qa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!_t)return an(i),null}else 2*ct()-g.renderingStartTime>Mo&&a!==1073741824&&(i.flags|=128,c=!0,qa(g,!1),i.lanes=4194304);g.isBackwards?(w.sibling=i.child,i.child=w):(a=g.last,a!==null?a.sibling=w:i.child=w,g.last=w)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=ct(),i.sibling=null,a=Et.current,dt(Et,c?a&1|2:a&1),i):(an(i),null);case 22:case 23:return Ch(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(qn&1073741824)!==0&&(an(i),i.subtreeFlags&6&&(i.flags|=8192)):an(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function fE(n,i){switch(Od(i),i.tag){case 1:return An(i.type)&&mu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Vo(),pt(Cn),pt(sn),Kd(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return qd(i),null;case 13:if(pt(Et),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));bo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return pt(Et),null;case 4:return Vo(),null;case 10:return zd(i.type._context),null;case 22:case 23:return Ch(),null;case 24:return null;default:return null}}var Ou=!1,ln=!1,pE=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Lo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){St(n,i,c)}else a.current=null}function ph(n,i,a){try{a()}catch(c){St(n,i,c)}}var cg=!1;function mE(n,i){if(Cd=js,n=Bp(),vd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,R=-1,b=-1,B=0,Z=0,te=n,X=null;t:for(;;){for(var fe;te!==a||h!==0&&te.nodeType!==3||(R=w+h),te!==g||c!==0&&te.nodeType!==3||(b=w+c),te.nodeType===3&&(w+=te.nodeValue.length),(fe=te.firstChild)!==null;)X=te,te=fe;for(;;){if(te===n)break t;if(X===a&&++B===h&&(R=w),X===g&&++Z===c&&(b=w),(fe=te.nextSibling)!==null)break;te=X,X=te.parentNode}te=fe}a=R===-1||b===-1?null:{start:R,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ad={focusedElem:n,selectionRange:a},js=!1,ge=i;ge!==null;)if(i=ge,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ge=n;else for(;ge!==null;){i=ge;try{var ve=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var Ee=ve.memoizedProps,At=ve.memoizedState,U=i.stateNode,V=U.getSnapshotBeforeUpdate(i.elementType===i.type?Ee:Er(i.type,Ee),At);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){St(i,i.return,re)}if(n=i.sibling,n!==null){n.return=i.return,ge=n;break}ge=i.return}return ve=cg,cg=!1,ve}function Ga(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&n)===n){var g=h.destroy;h.destroy=void 0,g!==void 0&&ph(i,a,g)}h=h.next}while(h!==c)}}function Lu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function mh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function dg(n){var i=n.alternate;i!==null&&(n.alternate=null,dg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Lr],delete i[La],delete i[kd],delete i[Jw],delete i[Xw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hg(n){return n.tag===5||n.tag===3||n.tag===4}function fg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function gh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=fu));else if(c!==4&&(n=n.child,n!==null))for(gh(n,i,a),n=n.sibling;n!==null;)gh(n,i,a),n=n.sibling}function yh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(yh(n,i,a),n=n.sibling;n!==null;)yh(n,i,a),n=n.sibling}var Xt=null,Ir=!1;function qs(n,i,a){for(a=a.child;a!==null;)pg(n,i,a),a=a.sibling}function pg(n,i,a){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(Ai,a)}catch{}switch(a.tag){case 5:ln||Lo(a,i);case 6:var c=Xt,h=Ir;Xt=null,qs(n,i,a),Xt=c,Ir=h,Xt!==null&&(Ir?(n=Xt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Xt.removeChild(a.stateNode));break;case 18:Xt!==null&&(Ir?(n=Xt,a=a.stateNode,n.nodeType===8?bd(n.parentNode,a):n.nodeType===1&&bd(n,a),yr(n)):bd(Xt,a.stateNode));break;case 4:c=Xt,h=Ir,Xt=a.stateNode.containerInfo,Ir=!0,qs(n,i,a),Xt=c,Ir=h;break;case 0:case 11:case 14:case 15:if(!ln&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var g=h,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&ph(a,i,w),h=h.next}while(h!==c)}qs(n,i,a);break;case 1:if(!ln&&(Lo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){St(a,i,R)}qs(n,i,a);break;case 21:qs(n,i,a);break;case 22:a.mode&1?(ln=(c=ln)||a.memoizedState!==null,qs(n,i,a),ln=c):qs(n,i,a);break;default:qs(n,i,a)}}function mg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new pE),i.forEach(function(c){var h=xE.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}}function Tr(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var g=n,w=i,R=w;e:for(;R!==null;){switch(R.tag){case 5:Xt=R.stateNode,Ir=!1;break e;case 3:Xt=R.stateNode.containerInfo,Ir=!0;break e;case 4:Xt=R.stateNode.containerInfo,Ir=!0;break e}R=R.return}if(Xt===null)throw Error(t(160));pg(g,w,h),Xt=null,Ir=!1;var b=h.alternate;b!==null&&(b.return=null),h.return=null}catch(B){St(h,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)gg(i,n),i=i.sibling}function gg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Tr(i,n),Fr(n),c&4){try{Ga(3,n,n.return),Lu(3,n)}catch(Ee){St(n,n.return,Ee)}try{Ga(5,n,n.return)}catch(Ee){St(n,n.return,Ee)}}break;case 1:Tr(i,n),Fr(n),c&512&&a!==null&&Lo(a,a.return);break;case 5:if(Tr(i,n),Fr(n),c&512&&a!==null&&Lo(a,a.return),n.flags&32){var h=n.stateNode;try{dr(h,"")}catch(Ee){St(n,n.return,Ee)}}if(c&4&&(h=n.stateNode,h!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,R=n.type,b=n.updateQueue;if(n.updateQueue=null,b!==null)try{R==="input"&&g.type==="radio"&&g.name!=null&&Gt(h,g),As(R,w);var B=As(R,g);for(w=0;w<b.length;w+=2){var Z=b[w],te=b[w+1];Z==="style"?Ss(h,te):Z==="dangerouslySetInnerHTML"?Qn(h,te):Z==="children"?dr(h,te):J(h,Z,te,B)}switch(R){case"input":Kt(h,g);break;case"textarea":In(h,g);break;case"select":var X=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var fe=g.value;fe!=null?Qt(h,!!g.multiple,fe,!1):X!==!!g.multiple&&(g.defaultValue!=null?Qt(h,!!g.multiple,g.defaultValue,!0):Qt(h,!!g.multiple,g.multiple?[]:"",!1))}h[La]=g}catch(Ee){St(n,n.return,Ee)}}break;case 6:if(Tr(i,n),Fr(n),c&4){if(n.stateNode===null)throw Error(t(162));h=n.stateNode,g=n.memoizedProps;try{h.nodeValue=g}catch(Ee){St(n,n.return,Ee)}}break;case 3:if(Tr(i,n),Fr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{yr(i.containerInfo)}catch(Ee){St(n,n.return,Ee)}break;case 4:Tr(i,n),Fr(n);break;case 13:Tr(i,n),Fr(n),h=n.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(wh=ct())),c&4&&mg(n);break;case 22:if(Z=a!==null&&a.memoizedState!==null,n.mode&1?(ln=(B=ln)||Z,Tr(i,n),ln=B):Tr(i,n),Fr(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!Z&&(n.mode&1)!==0)for(ge=n,Z=n.child;Z!==null;){for(te=ge=Z;ge!==null;){switch(X=ge,fe=X.child,X.tag){case 0:case 11:case 14:case 15:Ga(4,X,X.return);break;case 1:Lo(X,X.return);var ve=X.stateNode;if(typeof ve.componentWillUnmount=="function"){c=X,a=X.return;try{i=c,ve.props=i.memoizedProps,ve.state=i.memoizedState,ve.componentWillUnmount()}catch(Ee){St(c,a,Ee)}}break;case 5:Lo(X,X.return);break;case 22:if(X.memoizedState!==null){_g(te);continue}}fe!==null?(fe.return=X,ge=fe):_g(te)}Z=Z.sibling}e:for(Z=null,te=n;;){if(te.tag===5){if(Z===null){Z=te;try{h=te.stateNode,B?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(R=te.stateNode,b=te.memoizedProps.style,w=b!=null&&b.hasOwnProperty("display")?b.display:null,R.style.display=Rr("display",w))}catch(Ee){St(n,n.return,Ee)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=B?"":te.memoizedProps}catch(Ee){St(n,n.return,Ee)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Tr(i,n),Fr(n),c&4&&mg(n);break;case 21:break;default:Tr(i,n),Fr(n)}}function Fr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(hg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(dr(h,""),c.flags&=-33);var g=fg(n);yh(n,g,h);break;case 3:case 4:var w=c.stateNode.containerInfo,R=fg(n);gh(n,R,w);break;default:throw Error(t(161))}}catch(b){St(n,n.return,b)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function gE(n,i,a){ge=n,yg(n)}function yg(n,i,a){for(var c=(n.mode&1)!==0;ge!==null;){var h=ge,g=h.child;if(h.tag===22&&c){var w=h.memoizedState!==null||Ou;if(!w){var R=h.alternate,b=R!==null&&R.memoizedState!==null||ln;R=Ou;var B=ln;if(Ou=w,(ln=b)&&!B)for(ge=h;ge!==null;)w=ge,b=w.child,w.tag===22&&w.memoizedState!==null?wg(h):b!==null?(b.return=w,ge=b):wg(h);for(;g!==null;)ge=g,yg(g),g=g.sibling;ge=h,Ou=R,ln=B}vg(n)}else(h.subtreeFlags&8772)!==0&&g!==null?(g.return=h,ge=g):vg(n)}}function vg(n){for(;ge!==null;){var i=ge;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ln||Lu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!ln)if(a===null)c.componentDidMount();else{var h=i.elementType===i.type?a.memoizedProps:Er(i.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&_m(i,g,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}_m(i,w,a)}break;case 5:var R=i.stateNode;if(a===null&&i.flags&4){a=R;var b=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var Z=B.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&yr(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ln||i.flags&512&&mh(i)}catch(X){St(i,i.return,X)}}if(i===n){ge=null;break}if(a=i.sibling,a!==null){a.return=i.return,ge=a;break}ge=i.return}}function _g(n){for(;ge!==null;){var i=ge;if(i===n){ge=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ge=a;break}ge=i.return}}function wg(n){for(;ge!==null;){var i=ge;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Lu(4,i)}catch(b){St(i,a,b)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var h=i.return;try{c.componentDidMount()}catch(b){St(i,h,b)}}var g=i.return;try{mh(i)}catch(b){St(i,g,b)}break;case 5:var w=i.return;try{mh(i)}catch(b){St(i,w,b)}}}catch(b){St(i,i.return,b)}if(i===n){ge=null;break}var R=i.sibling;if(R!==null){R.return=i.return,ge=R;break}ge=i.return}}var yE=Math.ceil,ju=Ie.ReactCurrentDispatcher,vh=Ie.ReactCurrentOwner,or=Ie.ReactCurrentBatchConfig,Ze=0,Ht=null,Nt=null,Zt=0,qn=0,jo=zs(0),Ut=0,Ka=null,zi=0,Mu=0,_h=0,Qa=null,Pn=null,wh=0,Mo=1/0,hs=null,Fu=!1,Eh=null,Gs=null,Uu=!1,Ks=null,zu=0,Ya=0,Ih=null,Bu=-1,$u=0;function vn(){return(Ze&6)!==0?ct():Bu!==-1?Bu:Bu=ct()}function Qs(n){return(n.mode&1)===0?1:(Ze&2)!==0&&Zt!==0?Zt&-Zt:eE.transition!==null?($u===0&&($u=Pi()),$u):(n=Ke,n!==0||(n=window.event,n=n===void 0?16:xa(n.type)),n)}function xr(n,i,a,c){if(50<Ya)throw Ya=0,Ih=null,Error(t(185));Ds(n,a,c),((Ze&2)===0||n!==Ht)&&(n===Ht&&((Ze&2)===0&&(Mu|=a),Ut===4&&Ys(n,Zt)),bn(n,c),a===1&&Ze===0&&(i.mode&1)===0&&(Mo=ct()+500,yu&&$s()))}function bn(n,i){var a=n.callbackNode;es(n,i);var c=Ri(n,n===Ht?Zt:0);if(c===0)a!==null&&io(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&io(a),i===1)n.tag===0?Zw(Ig.bind(null,n)):am(Ig.bind(null,n)),Qw(function(){(Ze&6)===0&&$s()}),a=null;else{switch(Os(c)){case 1:a=Ci;break;case 4:a=bs;break;case 16:a=Zn;break;case 536870912:a=$l;break;default:a=Zn}a=bg(a,Eg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Eg(n,i){if(Bu=-1,$u=0,(Ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Fo()&&n.callbackNode!==a)return null;var c=Ri(n,n===Ht?Zt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Hu(n,c);else{i=c;var h=Ze;Ze|=2;var g=xg();(Ht!==n||Zt!==i)&&(hs=null,Mo=ct()+500,$i(n,i));do try{wE();break}catch(R){Tg(n,R)}while(!0);Ud(),ju.current=g,Ze=h,Nt!==null?i=0:(Ht=null,Zt=0,i=Ut)}if(i!==0){if(i===2&&(h=zn(n),h!==0&&(c=h,i=Th(n,h))),i===1)throw a=Ka,$i(n,0),Ys(n,c),bn(n,ct()),a;if(i===6)Ys(n,c);else{if(h=n.current.alternate,(c&30)===0&&!vE(h)&&(i=Hu(n,c),i===2&&(g=zn(n),g!==0&&(c=g,i=Th(n,g))),i===1))throw a=Ka,$i(n,0),Ys(n,c),bn(n,ct()),a;switch(n.finishedWork=h,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Hi(n,Pn,hs);break;case 3:if(Ys(n,c),(c&130023424)===c&&(i=wh+500-ct(),10<i)){if(Ri(n,0)!==0)break;if(h=n.suspendedLanes,(h&c)!==c){vn(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=Pd(Hi.bind(null,n,Pn,hs),i);break}Hi(n,Pn,hs);break;case 4:if(Ys(n,c),(c&4194240)===c)break;for(i=n.eventTimes,h=-1;0<c;){var w=31-mn(c);g=1<<w,w=i[w],w>h&&(h=w),c&=~g}if(c=h,c=ct()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*yE(c/1960))-c,10<c){n.timeoutHandle=Pd(Hi.bind(null,n,Pn,hs),c);break}Hi(n,Pn,hs);break;case 5:Hi(n,Pn,hs);break;default:throw Error(t(329))}}}return bn(n,ct()),n.callbackNode===a?Eg.bind(null,n):null}function Th(n,i){var a=Qa;return n.current.memoizedState.isDehydrated&&($i(n,i).flags|=256),n=Hu(n,i),n!==2&&(i=Pn,Pn=a,i!==null&&xh(i)),n}function xh(n){Pn===null?Pn=n:Pn.push.apply(Pn,n)}function vE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],g=h.getSnapshot;h=h.value;try{if(!_r(g(),h))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ys(n,i){for(i&=~_h,i&=~Mu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-mn(i),c=1<<a;n[a]=-1,i&=~c}}function Ig(n){if((Ze&6)!==0)throw Error(t(327));Fo();var i=Ri(n,0);if((i&1)===0)return bn(n,ct()),null;var a=Hu(n,i);if(n.tag!==0&&a===2){var c=zn(n);c!==0&&(i=c,a=Th(n,c))}if(a===1)throw a=Ka,$i(n,0),Ys(n,i),bn(n,ct()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Hi(n,Pn,hs),bn(n,ct()),null}function Sh(n,i){var a=Ze;Ze|=1;try{return n(i)}finally{Ze=a,Ze===0&&(Mo=ct()+500,yu&&$s())}}function Bi(n){Ks!==null&&Ks.tag===0&&(Ze&6)===0&&Fo();var i=Ze;Ze|=1;var a=or.transition,c=Ke;try{if(or.transition=null,Ke=1,n)return n()}finally{Ke=c,or.transition=a,Ze=i,(Ze&6)===0&&$s()}}function Ch(){qn=jo.current,pt(jo)}function $i(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Kw(a)),Nt!==null)for(a=Nt.return;a!==null;){var c=a;switch(Od(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&mu();break;case 3:Vo(),pt(Cn),pt(sn),Kd();break;case 5:qd(c);break;case 4:Vo();break;case 13:pt(Et);break;case 19:pt(Et);break;case 10:zd(c.type._context);break;case 22:case 23:Ch()}a=a.return}if(Ht=n,Nt=n=Js(n.current,null),Zt=qn=i,Ut=0,Ka=null,_h=Mu=zi=0,Pn=Qa=null,Mi!==null){for(i=0;i<Mi.length;i++)if(a=Mi[i],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=h,c.next=w}a.pending=c}Mi=null}return n}function Tg(n,i){do{var a=Nt;try{if(Ud(),Au.current=ku,Ru){for(var c=It.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Ru=!1}if(Ui=0,$t=Ft=It=null,Ba=!1,$a=0,vh.current=null,a===null||a.return===null){Ut=1,Ka=i,Nt=null;break}e:{var g=n,w=a.return,R=a,b=i;if(i=Zt,R.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var B=b,Z=R,te=Z.tag;if((Z.mode&1)===0&&(te===0||te===11||te===15)){var X=Z.alternate;X?(Z.updateQueue=X.updateQueue,Z.memoizedState=X.memoizedState,Z.lanes=X.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var fe=Km(w);if(fe!==null){fe.flags&=-257,Qm(fe,w,R,g,i),fe.mode&1&&Gm(g,B,i),i=fe,b=B;var ve=i.updateQueue;if(ve===null){var Ee=new Set;Ee.add(b),i.updateQueue=Ee}else ve.add(b);break e}else{if((i&1)===0){Gm(g,B,i),Ah();break e}b=Error(t(426))}}else if(_t&&R.mode&1){var At=Km(w);if(At!==null){(At.flags&65536)===0&&(At.flags|=256),Qm(At,w,R,g,i),Md(Oo(b,R));break e}}g=b=Oo(b,R),Ut!==4&&(Ut=2),Qa===null?Qa=[g]:Qa.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var U=Wm(g,b,i);vm(g,U);break e;case 1:R=b;var V=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Gs===null||!Gs.has(z)))){g.flags|=65536,i&=-i,g.lanes|=i;var re=qm(g,R,i);vm(g,re);break e}}g=g.return}while(g!==null)}Cg(a)}catch(Te){i=Te,Nt===a&&a!==null&&(Nt=a=a.return);continue}break}while(!0)}function xg(){var n=ju.current;return ju.current=ku,n===null?ku:n}function Ah(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Ht===null||(zi&268435455)===0&&(Mu&268435455)===0||Ys(Ht,Zt)}function Hu(n,i){var a=Ze;Ze|=2;var c=xg();(Ht!==n||Zt!==i)&&(hs=null,$i(n,i));do try{_E();break}catch(h){Tg(n,h)}while(!0);if(Ud(),Ze=a,ju.current=c,Nt!==null)throw Error(t(261));return Ht=null,Zt=0,Ut}function _E(){for(;Nt!==null;)Sg(Nt)}function wE(){for(;Nt!==null&&!Si();)Sg(Nt)}function Sg(n){var i=Pg(n.alternate,n,qn);n.memoizedProps=n.pendingProps,i===null?Cg(n):Nt=i,vh.current=null}function Cg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=hE(a,i,qn),a!==null){Nt=a;return}}else{if(a=fE(a,i),a!==null){a.flags&=32767,Nt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ut=6,Nt=null;return}}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=n}while(i!==null);Ut===0&&(Ut=5)}function Hi(n,i,a){var c=Ke,h=or.transition;try{or.transition=null,Ke=1,EE(n,i,a,c)}finally{or.transition=h,Ke=c}return null}function EE(n,i,a,c){do Fo();while(Ks!==null);if((Ze&6)!==0)throw Error(t(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(at(n,g),n===Ht&&(Nt=Ht=null,Zt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Uu||(Uu=!0,bg(Zn,function(){return Fo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=or.transition,or.transition=null;var w=Ke;Ke=1;var R=Ze;Ze|=4,vh.current=null,mE(n,a),gg(a,n),zw(Ad),js=!!Cd,Ad=Cd=null,n.current=a,gE(a),_a(),Ze=R,Ke=w,or.transition=g}else n.current=a;if(Uu&&(Uu=!1,Ks=n,zu=h),g=n.pendingLanes,g===0&&(Gs=null),Hl(a.stateNode),bn(n,ct()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)h=i[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(Fu)throw Fu=!1,n=Eh,Eh=null,n;return(zu&1)!==0&&n.tag!==0&&Fo(),g=n.pendingLanes,(g&1)!==0?n===Ih?Ya++:(Ya=0,Ih=n):Ya=0,$s(),null}function Fo(){if(Ks!==null){var n=Os(zu),i=or.transition,a=Ke;try{if(or.transition=null,Ke=16>n?16:n,Ks===null)var c=!1;else{if(n=Ks,Ks=null,zu=0,(Ze&6)!==0)throw Error(t(331));var h=Ze;for(Ze|=4,ge=n.current;ge!==null;){var g=ge,w=g.child;if((ge.flags&16)!==0){var R=g.deletions;if(R!==null){for(var b=0;b<R.length;b++){var B=R[b];for(ge=B;ge!==null;){var Z=ge;switch(Z.tag){case 0:case 11:case 15:Ga(8,Z,g)}var te=Z.child;if(te!==null)te.return=Z,ge=te;else for(;ge!==null;){Z=ge;var X=Z.sibling,fe=Z.return;if(dg(Z),Z===B){ge=null;break}if(X!==null){X.return=fe,ge=X;break}ge=fe}}}var ve=g.alternate;if(ve!==null){var Ee=ve.child;if(Ee!==null){ve.child=null;do{var At=Ee.sibling;Ee.sibling=null,Ee=At}while(Ee!==null)}}ge=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,ge=w;else e:for(;ge!==null;){if(g=ge,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ga(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,ge=U;break e}ge=g.return}}var V=n.current;for(ge=V;ge!==null;){w=ge;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,ge=z;else e:for(w=V;ge!==null;){if(R=ge,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Lu(9,R)}}catch(Te){St(R,R.return,Te)}if(R===w){ge=null;break e}var re=R.sibling;if(re!==null){re.return=R.return,ge=re;break e}ge=R.return}}if(Ze=h,$s(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(Ai,n)}catch{}c=!0}return c}finally{Ke=a,or.transition=i}}return!1}function Ag(n,i,a){i=Oo(a,i),i=Wm(n,i,1),n=Ws(n,i,1),i=vn(),n!==null&&(Ds(n,1,i),bn(n,i))}function St(n,i,a){if(n.tag===3)Ag(n,n,a);else for(;i!==null;){if(i.tag===3){Ag(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Gs===null||!Gs.has(c))){n=Oo(a,n),n=qm(i,n,1),i=Ws(i,n,1),n=vn(),i!==null&&(Ds(i,1,n),bn(i,n));break}}i=i.return}}function IE(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=vn(),n.pingedLanes|=n.suspendedLanes&a,Ht===n&&(Zt&a)===a&&(Ut===4||Ut===3&&(Zt&130023424)===Zt&&500>ct()-wh?$i(n,0):_h|=a),bn(n,i)}function Rg(n,i){i===0&&((n.mode&1)===0?i=1:(i=ao,ao<<=1,(ao&130023424)===0&&(ao=4194304)));var a=vn();n=us(n,i),n!==null&&(Ds(n,i,a),bn(n,a))}function TE(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Rg(n,a)}function xE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Rg(n,a)}var Pg;Pg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Cn.current)Rn=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Rn=!1,dE(n,i,a);Rn=(n.flags&131072)!==0}else Rn=!1,_t&&(i.flags&1048576)!==0&&lm(i,_u,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Vu(n,i),n=i.pendingProps;var h=Ao(i,sn.current);Do(i,a),h=Jd(null,i,c,n,h,a);var g=Xd();return i.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,An(c)?(g=!0,gu(i)):g=!1,i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Hd(i),h.updater=Nu,i.stateNode=h,h._reactInternals=i,sh(i,c,n,a),i=lh(null,i,c,!0,g,a)):(i.tag=0,_t&&g&&Vd(i),yn(null,i,h,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Vu(n,i),n=i.pendingProps,h=c._init,c=h(c._payload),i.type=c,h=i.tag=CE(c),n=Er(c,n),h){case 0:i=ah(null,i,c,n,a);break e;case 1:i=tg(null,i,c,n,a);break e;case 11:i=Ym(null,i,c,n,a);break e;case 14:i=Jm(null,i,c,Er(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Er(c,h),ah(n,i,c,h,a);case 1:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Er(c,h),tg(n,i,c,h,a);case 3:e:{if(ng(i),n===null)throw Error(t(387));c=i.pendingProps,g=i.memoizedState,h=g.element,ym(n,i),Su(i,c,null,a);var w=i.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){h=Oo(Error(t(423)),i),i=rg(n,i,c,a,h);break e}else if(c!==h){h=Oo(Error(t(424)),i),i=rg(n,i,c,a,h);break e}else for(Wn=Us(i.stateNode.containerInfo.firstChild),Hn=i,_t=!0,wr=null,a=mm(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(bo(),c===h){i=ds(n,i,a);break e}yn(n,i,c,a)}i=i.child}return i;case 5:return wm(i),n===null&&jd(i),c=i.type,h=i.pendingProps,g=n!==null?n.memoizedProps:null,w=h.children,Rd(c,h)?w=null:g!==null&&Rd(c,g)&&(i.flags|=32),eg(n,i),yn(n,i,w,a),i.child;case 6:return n===null&&jd(i),null;case 13:return sg(n,i,a);case 4:return Wd(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=ko(i,null,c,a):yn(n,i,c,a),i.child;case 11:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Er(c,h),Ym(n,i,c,h,a);case 7:return yn(n,i,i.pendingProps,a),i.child;case 8:return yn(n,i,i.pendingProps.children,a),i.child;case 12:return yn(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,h=i.pendingProps,g=i.memoizedProps,w=h.value,dt(Iu,c._currentValue),c._currentValue=w,g!==null)if(_r(g.value,w)){if(g.children===h.children&&!Cn.current){i=ds(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var R=g.dependencies;if(R!==null){w=g.child;for(var b=R.firstContext;b!==null;){if(b.context===c){if(g.tag===1){b=cs(-1,a&-a),b.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var Z=B.pending;Z===null?b.next=b:(b.next=Z.next,Z.next=b),B.pending=b}}g.lanes|=a,b=g.alternate,b!==null&&(b.lanes|=a),Bd(g.return,a,i),R.lanes|=a;break}b=b.next}}else if(g.tag===10)w=g.type===i.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,R=w.alternate,R!==null&&(R.lanes|=a),Bd(w,a,i),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===i){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}yn(n,i,h.children,a),i=i.child}return i;case 9:return h=i.type,c=i.pendingProps.children,Do(i,a),h=sr(h),c=c(h),i.flags|=1,yn(n,i,c,a),i.child;case 14:return c=i.type,h=Er(c,i.pendingProps),h=Er(c.type,h),Jm(n,i,c,h,a);case 15:return Xm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Er(c,h),Vu(n,i),i.tag=1,An(c)?(n=!0,gu(i)):n=!1,Do(i,a),$m(i,c,h),sh(i,c,h,a),lh(null,i,c,!0,n,a);case 19:return og(n,i,a);case 22:return Zm(n,i,a)}throw Error(t(156,i.tag))};function bg(n,i){return Zr(n,i)}function SE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(n,i,a,c){return new SE(n,i,a,c)}function Rh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function CE(n){if(typeof n=="function")return Rh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===it)return 14}return 2}function Js(n,i){var a=n.alternate;return a===null?(a=ar(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Wu(n,i,a,c,h,g){var w=2;if(c=n,typeof n=="function")Rh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case N:return Wi(a.children,h,g,i);case C:w=8,h|=8;break;case S:return n=ar(12,a,i,h|2),n.elementType=S,n.lanes=g,n;case A:return n=ar(13,a,i,h),n.elementType=A,n.lanes=g,n;case Xe:return n=ar(19,a,i,h),n.elementType=Xe,n.lanes=g,n;case le:return qu(a,h,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:w=10;break e;case k:w=9;break e;case O:w=11;break e;case it:w=14;break e;case lt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=ar(w,a,i,h),i.elementType=n,i.type=c,i.lanes=g,i}function Wi(n,i,a,c){return n=ar(7,n,c,i),n.lanes=a,n}function qu(n,i,a,c){return n=ar(22,n,c,i),n.elementType=le,n.lanes=a,n.stateNode={isHidden:!1},n}function Ph(n,i,a){return n=ar(6,n,null,i),n.lanes=a,n}function bh(n,i,a){return i=ar(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function AE(n,i,a,c,h){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ns(0),this.expirationTimes=Ns(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ns(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function kh(n,i,a,c,h,g,w,R,b){return n=new AE(n,i,a,R,b),i===1?(i=1,g===!0&&(i|=8)):i=0,g=ar(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hd(g),n}function RE(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:we,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function kg(n){if(!n)return Bs;n=n._reactInternals;e:{if(Qe(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(An(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(An(a))return im(n,a,i)}return i}function Ng(n,i,a,c,h,g,w,R,b){return n=kh(a,c,!0,n,h,g,w,R,b),n.context=kg(null),a=n.current,c=vn(),h=Qs(a),g=cs(c,h),g.callback=i??null,Ws(a,g,h),n.current.lanes=h,Ds(n,h,c),bn(n,c),n}function Gu(n,i,a,c){var h=i.current,g=vn(),w=Qs(h);return a=kg(a),i.context===null?i.context=a:i.pendingContext=a,i=cs(g,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Ws(h,i,w),n!==null&&(xr(n,h,w,g),xu(n,h,w)),w}function Ku(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Dg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Nh(n,i){Dg(n,i),(n=n.alternate)&&Dg(n,i)}function PE(){return null}var Vg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Dh(n){this._internalRoot=n}Qu.prototype.render=Dh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Gu(n,i,null,null)},Qu.prototype.unmount=Dh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Bi(function(){Gu(null,n,null,null)}),i[is]=null}};function Qu(n){this._internalRoot=n}Qu.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ql();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Nr.length&&i!==0&&i<Nr[a].priority;a++);Nr.splice(a,0,n),a===0&&Xl(n)}};function Vh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Yu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Og(){}function bE(n,i,a,c,h){if(h){if(typeof c=="function"){var g=c;c=function(){var B=Ku(w);g.call(B)}}var w=Ng(i,c,n,0,null,!1,!1,"",Og);return n._reactRootContainer=w,n[is]=w.current,Va(n.nodeType===8?n.parentNode:n),Bi(),w}for(;h=n.lastChild;)n.removeChild(h);if(typeof c=="function"){var R=c;c=function(){var B=Ku(b);R.call(B)}}var b=kh(n,0,!1,null,null,!1,!1,"",Og);return n._reactRootContainer=b,n[is]=b.current,Va(n.nodeType===8?n.parentNode:n),Bi(function(){Gu(i,b,a,c)}),b}function Ju(n,i,a,c,h){var g=a._reactRootContainer;if(g){var w=g;if(typeof h=="function"){var R=h;h=function(){var b=Ku(w);R.call(b)}}Gu(i,w,n,h)}else w=bE(a,i,n,h,c);return Ku(w)}Gl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=ks(i.pendingLanes);a!==0&&(Vs(i,a|1),bn(i,ct()),(Ze&6)===0&&(Mo=ct()+500,$s()))}break;case 13:Bi(function(){var c=us(n,1);if(c!==null){var h=vn();xr(c,n,1,h)}}),Nh(n,1)}},lo=function(n){if(n.tag===13){var i=us(n,134217728);if(i!==null){var a=vn();xr(i,n,134217728,a)}Nh(n,134217728)}},Kl=function(n){if(n.tag===13){var i=Qs(n),a=us(n,i);if(a!==null){var c=vn();xr(a,n,i,c)}Nh(n,i)}},Ql=function(){return Ke},Yl=function(n,i){var a=Ke;try{return Ke=n,i()}finally{Ke=a}},Jn=function(n,i,a){switch(i){case"input":if(Kt(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var h=pu(c);if(!h)throw Error(t(90));ue(c),Kt(c,h)}}}break;case"textarea":In(n,a);break;case"select":i=a.value,i!=null&&Qt(n,!!a.multiple,i,!1)}},Yr=Sh,Ti=Bi;var kE={usingClientEntryPoint:!1,Events:[ja,So,pu,Xn,Rs,Sh]},Ja={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NE={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Xr(n),n===null?null:n.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||PE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xu.isDisabled&&Xu.supportsFiber)try{Ai=Xu.inject(NE),Un=Xu}catch{}}return kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kE,kn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vh(i))throw Error(t(200));return RE(n,i,null,a)},kn.createRoot=function(n,i){if(!Vh(n))throw Error(t(299));var a=!1,c="",h=Vg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),i=kh(n,1,!1,null,null,a,!1,c,h),n[is]=i.current,Va(n.nodeType===8?n.parentNode:n),new Dh(i)},kn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Xr(i),n=n===null?null:n.stateNode,n},kn.flushSync=function(n){return Bi(n)},kn.hydrate=function(n,i,a){if(!Yu(i))throw Error(t(200));return Ju(null,n,i,!0,a)},kn.hydrateRoot=function(n,i,a){if(!Vh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,h=!1,g="",w=Vg;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Ng(i,null,n,1,a??null,h,!1,g,w),n[is]=i.current,Va(n),c)for(n=0;n<c.length;n++)a=c[n],h=a._getVersion,h=h(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,h]:i.mutableSourceEagerHydrationData.push(a,h);return new Qu(i)},kn.render=function(n,i,a){if(!Yu(i))throw Error(t(200));return Ju(null,n,i,!1,a)},kn.unmountComponentAtNode=function(n){if(!Yu(n))throw Error(t(40));return n._reactRootContainer?(Bi(function(){Ju(null,null,n,!1,function(){n._reactRootContainer=null,n[is]=null})}),!0):!1},kn.unstable_batchedUpdates=Sh,kn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Yu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Ju(n,i,a,!1,c)},kn.version="18.3.1-next-f1338f8080-20240426",kn}var $g;function jv(){if($g)return jh.exports;$g=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jh.exports=zE(),jh.exports}var Hg;function BE(){if(Hg)return Zu;Hg=1;var r=jv();return Zu.createRoot=r.createRoot,Zu.hydrateRoot=r.hydrateRoot,Zu}var $E=BE();const HE=Lv($E);jv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wl(){return wl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},wl.apply(this,arguments)}var ri;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ri||(ri={}));const Wg="popstate";function WE(r){r===void 0&&(r={});function e(s,o){let{pathname:l,search:d,hash:f}=s.location;return nf("",{pathname:l,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:_c(o)}return GE(e,t,null,r)}function jt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Mv(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qE(){return Math.random().toString(36).substr(2,8)}function qg(r,e){return{usr:r.state,key:r.key,idx:e}}function nf(r,e,t,s){return t===void 0&&(t=null),wl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?aa(e):e,{state:t,key:e&&e.key||s||qE()})}function _c(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function aa(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function GE(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,d=o.history,f=ri.Pop,p=null,v=E();v==null&&(v=0,d.replaceState(wl({},d.state,{idx:v}),""));function E(){return(d.state||{idx:null}).idx}function I(){f=ri.Pop;let M=E(),ee=M==null?null:M-v;v=M,p&&p({action:f,location:$.location,delta:ee})}function x(M,ee){f=ri.Push;let oe=nf($.location,M,ee);v=E()+1;let J=qg(oe,v),Ie=$.createHref(oe);try{d.pushState(J,"",Ie)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;o.location.assign(Ie)}l&&p&&p({action:f,location:$.location,delta:1})}function j(M,ee){f=ri.Replace;let oe=nf($.location,M,ee);v=E();let J=qg(oe,v),Ie=$.createHref(oe);d.replaceState(J,"",Ie),l&&p&&p({action:f,location:$.location,delta:0})}function H(M){let ee=o.location.origin!=="null"?o.location.origin:o.location.href,oe=typeof M=="string"?M:_c(M);return oe=oe.replace(/ $/,"%20"),jt(ee,"No window.location.(origin|href) available to create URL for href: "+oe),new URL(oe,ee)}let $={get action(){return f},get location(){return r(o,d)},listen(M){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Wg,I),p=M,()=>{o.removeEventListener(Wg,I),p=null}},createHref(M){return e(o,M)},createURL:H,encodeLocation(M){let ee=H(M);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:x,replace:j,go(M){return d.go(M)}};return $}var Gg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Gg||(Gg={}));function KE(r,e,t){return t===void 0&&(t="/"),QE(r,e,t)}function QE(r,e,t,s){let o=typeof e=="string"?aa(e):e,l=Vf(o.pathname||"/",t);if(l==null)return null;let d=Fv(r);YE(d);let f=null;for(let p=0;f==null&&p<d.length;++p){let v=lI(l);f=iI(d[p],v)}return f}function Fv(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,d,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};p.relativePath.startsWith("/")&&(jt(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let v=ii([s,p.relativePath]),E=t.concat(p);l.children&&l.children.length>0&&(jt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Fv(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:rI(v,l.index),routesMeta:E})};return r.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,d);else for(let p of Uv(l.path))o(l,d,p)}),e}function Uv(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let d=Uv(s.join("/")),f=[];return f.push(...d.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...d),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function YE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:sI(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const JE=/^:[\w-]+$/,XE=3,ZE=2,eI=1,tI=10,nI=-2,Kg=r=>r==="*";function rI(r,e){let t=r.split("/"),s=t.length;return t.some(Kg)&&(s+=nI),e&&(s+=ZE),t.filter(o=>!Kg(o)).reduce((o,l)=>o+(JE.test(l)?XE:l===""?eI:tI),s)}function sI(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function iI(r,e,t){let{routesMeta:s}=r,o={},l="/",d=[];for(let f=0;f<s.length;++f){let p=s[f],v=f===s.length-1,E=l==="/"?e:e.slice(l.length)||"/",I=oI({path:p.relativePath,caseSensitive:p.caseSensitive,end:v},E),x=p.route;if(!I)return null;Object.assign(o,I.params),d.push({params:o,pathname:ii([l,I.pathname]),pathnameBase:hI(ii([l,I.pathnameBase])),route:x}),I.pathnameBase!=="/"&&(l=ii([l,I.pathnameBase]))}return d}function oI(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=aI(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((v,E,I)=>{let{paramName:x,isOptional:j}=E;if(x==="*"){let $=f[I]||"";d=l.slice(0,l.length-$.length).replace(/(.)\/+$/,"$1")}const H=f[I];return j&&!H?v[x]=void 0:v[x]=(H||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:r}}function aI(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Mv(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function lI(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mv(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Vf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function uI(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?aa(r):r;return{pathname:t?t.startsWith("/")?t:cI(t,e):e,search:fI(s),hash:pI(o)}}function cI(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Uh(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dI(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function zv(r,e){let t=dI(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Bv(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=aa(r):(o=wl({},r),jt(!o.pathname||!o.pathname.includes("?"),Uh("?","pathname","search",o)),jt(!o.pathname||!o.pathname.includes("#"),Uh("#","pathname","hash",o)),jt(!o.search||!o.search.includes("#"),Uh("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,f;if(d==null)f=t;else{let I=e.length-1;if(!s&&d.startsWith("..")){let x=d.split("/");for(;x[0]==="..";)x.shift(),I-=1;o.pathname=x.join("/")}f=I>=0?e[I]:"/"}let p=uI(o,f),v=d&&d!=="/"&&d.endsWith("/"),E=(l||d===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(v||E)&&(p.pathname+="/"),p}const ii=r=>r.join("/").replace(/\/\/+/g,"/"),hI=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),fI=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,pI=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function mI(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const $v=["post","put","patch","delete"];new Set($v);const gI=["get",...$v];new Set(gI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function El(){return El=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},El.apply(this,arguments)}const Of=D.createContext(null),yI=D.createContext(null),Zi=D.createContext(null),Uc=D.createContext(null),eo=D.createContext({outlet:null,matches:[],isDataRoute:!1}),Hv=D.createContext(null);function vI(r,e){let{relative:t}=e===void 0?{}:e;kl()||jt(!1);let{basename:s,navigator:o}=D.useContext(Zi),{hash:l,pathname:d,search:f}=Gv(r,{relative:t}),p=d;return s!=="/"&&(p=d==="/"?s:ii([s,d])),o.createHref({pathname:p,search:f,hash:l})}function kl(){return D.useContext(Uc)!=null}function la(){return kl()||jt(!1),D.useContext(Uc).location}function Wv(r){D.useContext(Zi).static||D.useLayoutEffect(r)}function qv(){let{isDataRoute:r}=D.useContext(eo);return r?kI():_I()}function _I(){kl()||jt(!1);let r=D.useContext(Of),{basename:e,future:t,navigator:s}=D.useContext(Zi),{matches:o}=D.useContext(eo),{pathname:l}=la(),d=JSON.stringify(zv(o,t.v7_relativeSplatPath)),f=D.useRef(!1);return Wv(()=>{f.current=!0}),D.useCallback(function(v,E){if(E===void 0&&(E={}),!f.current)return;if(typeof v=="number"){s.go(v);return}let I=Bv(v,JSON.parse(d),l,E.relative==="path");r==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:ii([e,I.pathname])),(E.replace?s.replace:s.push)(I,E.state,E)},[e,s,d,l,r])}function Gv(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=D.useContext(Zi),{matches:o}=D.useContext(eo),{pathname:l}=la(),d=JSON.stringify(zv(o,s.v7_relativeSplatPath));return D.useMemo(()=>Bv(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function wI(r,e){return EI(r,e)}function EI(r,e,t,s){kl()||jt(!1);let{navigator:o}=D.useContext(Zi),{matches:l}=D.useContext(eo),d=l[l.length-1],f=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let v=la(),E;if(e){var I;let M=typeof e=="string"?aa(e):e;p==="/"||(I=M.pathname)!=null&&I.startsWith(p)||jt(!1),E=M}else E=v;let x=E.pathname||"/",j=x;if(p!=="/"){let M=p.replace(/^\//,"").split("/");j="/"+x.replace(/^\//,"").split("/").slice(M.length).join("/")}let H=KE(r,{pathname:j}),$=CI(H&&H.map(M=>Object.assign({},M,{params:Object.assign({},f,M.params),pathname:ii([p,o.encodeLocation?o.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?p:ii([p,o.encodeLocation?o.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,t,s);return e&&$?D.createElement(Uc.Provider,{value:{location:El({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:ri.Pop}},$):$}function II(){let r=bI(),e=mI(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:o},t):null,null)}const TI=D.createElement(II,null);class xI extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?D.createElement(eo.Provider,{value:this.props.routeContext},D.createElement(Hv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SI(r){let{routeContext:e,match:t,children:s}=r,o=D.useContext(Of);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),D.createElement(eo.Provider,{value:e},s)}function CI(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let E=d.findIndex(I=>I.route.id&&(f==null?void 0:f[I.route.id])!==void 0);E>=0||jt(!1),d=d.slice(0,Math.min(d.length,E+1))}let p=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let E=0;E<d.length;E++){let I=d[E];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(v=E),I.route.id){let{loaderData:x,errors:j}=t,H=I.route.loader&&x[I.route.id]===void 0&&(!j||j[I.route.id]===void 0);if(I.route.lazy||H){p=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((E,I,x)=>{let j,H=!1,$=null,M=null;t&&(j=f&&I.route.id?f[I.route.id]:void 0,$=I.route.errorElement||TI,p&&(v<0&&x===0?(NI("route-fallback"),H=!0,M=null):v===x&&(H=!0,M=I.route.hydrateFallbackElement||null)));let ee=e.concat(d.slice(0,x+1)),oe=()=>{let J;return j?J=$:H?J=M:I.route.Component?J=D.createElement(I.route.Component,null):I.route.element?J=I.route.element:J=E,D.createElement(SI,{match:I,routeContext:{outlet:E,matches:ee,isDataRoute:t!=null},children:J})};return t&&(I.route.ErrorBoundary||I.route.errorElement||x===0)?D.createElement(xI,{location:t.location,revalidation:t.revalidation,component:$,error:j,children:oe(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):oe()},null)}var Kv=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Kv||{}),Qv=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Qv||{});function AI(r){let e=D.useContext(Of);return e||jt(!1),e}function RI(r){let e=D.useContext(yI);return e||jt(!1),e}function PI(r){let e=D.useContext(eo);return e||jt(!1),e}function Yv(r){let e=PI(),t=e.matches[e.matches.length-1];return t.route.id||jt(!1),t.route.id}function bI(){var r;let e=D.useContext(Hv),t=RI(),s=Yv();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function kI(){let{router:r}=AI(Kv.UseNavigateStable),e=Yv(Qv.UseNavigateStable),t=D.useRef(!1);return Wv(()=>{t.current=!0}),D.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,El({fromRouteId:e},l)))},[r,e])}const Qg={};function NI(r,e,t){Qg[r]||(Qg[r]=!0)}function DI(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function tl(r){jt(!1)}function VI(r){let{basename:e="/",children:t=null,location:s,navigationType:o=ri.Pop,navigator:l,static:d=!1,future:f}=r;kl()&&jt(!1);let p=e.replace(/^\/*/,"/"),v=D.useMemo(()=>({basename:p,navigator:l,static:d,future:El({v7_relativeSplatPath:!1},f)}),[p,f,l,d]);typeof s=="string"&&(s=aa(s));let{pathname:E="/",search:I="",hash:x="",state:j=null,key:H="default"}=s,$=D.useMemo(()=>{let M=Vf(E,p);return M==null?null:{location:{pathname:M,search:I,hash:x,state:j,key:H},navigationType:o}},[p,E,I,x,j,H,o]);return $==null?null:D.createElement(Zi.Provider,{value:v},D.createElement(Uc.Provider,{children:t,value:$}))}function OI(r){let{children:e,location:t}=r;return wI(rf(e),t)}new Promise(()=>{});function rf(r,e){e===void 0&&(e=[]);let t=[];return D.Children.forEach(r,(s,o)=>{if(!D.isValidElement(s))return;let l=[...e,o];if(s.type===D.Fragment){t.push.apply(t,rf(s.props.children,l));return}s.type!==tl&&jt(!1),!s.props.index||!s.props.children||jt(!1);let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=rf(s.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sf(){return sf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},sf.apply(this,arguments)}function LI(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function jI(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function MI(r,e){return r.button===0&&(!e||e==="_self")&&!jI(r)}const FI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],UI="6";try{window.__reactRouterVersion=UI}catch{}const zI="startTransition",Yg=ME[zI];function BI(r){let{basename:e,children:t,future:s,window:o}=r,l=D.useRef();l.current==null&&(l.current=WE({window:o,v5Compat:!0}));let d=l.current,[f,p]=D.useState({action:d.action,location:d.location}),{v7_startTransition:v}=s||{},E=D.useCallback(I=>{v&&Yg?Yg(()=>p(I)):p(I)},[p,v]);return D.useLayoutEffect(()=>d.listen(E),[d,E]),D.useEffect(()=>DI(s),[s]),D.createElement(VI,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:d,future:s})}const $I=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ur=D.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:d,state:f,target:p,to:v,preventScrollReset:E,viewTransition:I}=e,x=LI(e,FI),{basename:j}=D.useContext(Zi),H,$=!1;if(typeof v=="string"&&HI.test(v)&&(H=v,$I))try{let J=new URL(window.location.href),Ie=v.startsWith("//")?new URL(J.protocol+v):new URL(v),_e=Vf(Ie.pathname,j);Ie.origin===J.origin&&_e!=null?v=_e+Ie.search+Ie.hash:$=!0}catch{}let M=vI(v,{relative:o}),ee=WI(v,{replace:d,state:f,target:p,preventScrollReset:E,relative:o,viewTransition:I});function oe(J){s&&s(J),J.defaultPrevented||ee(J)}return D.createElement("a",sf({},x,{href:H||M,onClick:$||l?s:oe,ref:t,target:p}))});var Jg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Jg||(Jg={}));var Xg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Xg||(Xg={}));function WI(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:d,viewTransition:f}=e===void 0?{}:e,p=qv(),v=la(),E=Gv(r,{relative:d});return D.useCallback(I=>{if(MI(I,t)){I.preventDefault();let x=s!==void 0?s:_c(v)===_c(E);p(r,{replace:x,state:o,preventScrollReset:l,relative:d,viewTransition:f})}},[v,p,E,s,o,t,r,l,d,f])}const qI=()=>{};var Zg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},GI=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],f=r[t++],p=((o&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],d=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Xv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,f=d?r[o+1]:0,p=o+2<r.length,v=p?r[o+2]:0,E=l>>2,I=(l&3)<<4|f>>4;let x=(f&15)<<2|v>>6,j=v&63;p||(j=64,d||(x=64)),s.push(t[E],t[I],t[x],t[j])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Jv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):GI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||v==null||I==null)throw new KI;const x=l<<2|f>>4;if(s.push(x),v!==64){const j=f<<4&240|v>>2;if(s.push(j),I!==64){const H=v<<6&192|I;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class KI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QI=function(r){const e=Jv(r);return Xv.encodeByteArray(e,!0)},wc=function(r){return QI(r).replace(/\./g,"")},Zv=function(r){try{return Xv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=()=>YI().__FIREBASE_DEFAULTS__,XI=()=>{if(typeof process>"u"||typeof Zg>"u")return;const r=Zg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},ZI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Zv(r[1]);return e&&JSON.parse(e)},zc=()=>{try{return qI()||JI()||XI()||ZI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},e0=r=>{var e,t;return(t=(e=zc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},eT=r=>{const e=e0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},t0=()=>{var r;return(r=zc())===null||r===void 0?void 0:r.config},n0=r=>{var e;return(e=zc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function r0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[wc(JSON.stringify(t)),wc(JSON.stringify(d)),""].join(".")}const dl={};function rT(){const r={prod:[],emulator:[]};for(const e of Object.keys(dl))dl[e]?r.emulator.push(e):r.prod.push(e);return r}function sT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ey=!1;function s0(r,e){if(typeof window>"u"||typeof document>"u"||!ua(window.location.host)||dl[r]===e||dl[r]||ey)return;dl[r]=e;function t(x){return`__firebase__banner__${x}`}const s="__firebase__banner",l=rT().prod.length>0;function d(){const x=document.getElementById(s);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,j){x.setAttribute("width","24"),x.setAttribute("id",j),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function v(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{ey=!0,d()},x}function E(x,j){x.setAttribute("id",j),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function I(){const x=sT(s),j=t("text"),H=document.getElementById(j)||document.createElement("span"),$=t("learnmore"),M=document.getElementById($)||document.createElement("a"),ee=t("preprendIcon"),oe=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const J=x.element;f(J),E(M,$);const Ie=v();p(oe,ee),J.append(oe,H,M,Ie),document.body.appendChild(J)}l?(H.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function oT(){var r;const e=(r=zc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function uT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cT(){const r=hn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function dT(){return!oT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hT(){try{return typeof indexedDB=="object"}catch{return!1}}function fT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="FirebaseError";class Ts extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=pT,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?mT(l,s):"Error",f=`${this.serviceName}: ${d} (${o}).`;return new Ts(o,f,s)}}function mT(r,e){return r.replace(gT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const gT=/\{\$([^}]+)}/g;function yT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function hi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],d=e[o];if(ty(l)&&ty(d)){if(!hi(l,d))return!1}else if(l!==d)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function ty(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function nl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function rl(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function vT(r,e){const t=new _T(r,e);return t.subscribe.bind(t)}class _T{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");wT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=zh),o.error===void 0&&(o.error=zh),o.complete===void 0&&(o.complete=zh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function zh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(r){return r&&r._delegate?r._delegate:r}class Yi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new tT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TT(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&d.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:IT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IT(r){return r===qi?void 0:r}function TT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ET(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(We||(We={}));const ST={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},CT=We.INFO,AT={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},RT=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=AT[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lf{constructor(e){this.name=e,this._logLevel=CT,this._logHandler=RT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ST[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const PT=(r,e)=>e.some(t=>r instanceof t);let ny,ry;function bT(){return ny||(ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kT(){return ry||(ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i0=new WeakMap,of=new WeakMap,o0=new WeakMap,Bh=new WeakMap,jf=new WeakMap;function NT(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(oi(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&i0.set(t,r)}).catch(()=>{}),jf.set(e,r),e}function DT(r){if(of.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});of.set(r,e)}let af={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return of.get(r);if(e==="objectStoreNames")return r.objectStoreNames||o0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return oi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function VT(r){af=r(af)}function OT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call($h(this),e,...t);return o0.set(s,e.sort?e.sort():[e]),oi(s)}:kT().includes(r)?function(...e){return r.apply($h(this),e),oi(i0.get(this))}:function(...e){return oi(r.apply($h(this),e))}}function LT(r){return typeof r=="function"?OT(r):(r instanceof IDBTransaction&&DT(r),PT(r,bT())?new Proxy(r,af):r)}function oi(r){if(r instanceof IDBRequest)return NT(r);if(Bh.has(r))return Bh.get(r);const e=LT(r);return e!==r&&(Bh.set(r,e),jf.set(e,r)),e}const $h=r=>jf.get(r);function jT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),f=oi(d);return s&&d.addEventListener("upgradeneeded",p=>{s(oi(d.result),p.oldVersion,p.newVersion,oi(d.transaction),p)}),t&&d.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const MT=["get","getKey","getAll","getAllKeys","count"],FT=["put","add","delete","clear"],Hh=new Map;function sy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Hh.get(e))return Hh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=FT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||MT.includes(t)))return;const l=async function(d,...f){const p=this.transaction(d,o?"readwrite":"readonly");let v=p.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&p.done]))[0]};return Hh.set(e,l),l}VT(r=>({...r,get:(e,t,s)=>sy(e,t)||r.get(e,t,s),has:(e,t)=>!!sy(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function zT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lf="@firebase/app",iy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new Lf("@firebase/app"),BT="@firebase/app-compat",$T="@firebase/analytics-compat",HT="@firebase/analytics",WT="@firebase/app-check-compat",qT="@firebase/app-check",GT="@firebase/auth",KT="@firebase/auth-compat",QT="@firebase/database",YT="@firebase/data-connect",JT="@firebase/database-compat",XT="@firebase/functions",ZT="@firebase/functions-compat",ex="@firebase/installations",tx="@firebase/installations-compat",nx="@firebase/messaging",rx="@firebase/messaging-compat",sx="@firebase/performance",ix="@firebase/performance-compat",ox="@firebase/remote-config",ax="@firebase/remote-config-compat",lx="@firebase/storage",ux="@firebase/storage-compat",cx="@firebase/firestore",dx="@firebase/ai",hx="@firebase/firestore-compat",fx="firebase",px="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="[DEFAULT]",mx={[lf]:"fire-core",[BT]:"fire-core-compat",[HT]:"fire-analytics",[$T]:"fire-analytics-compat",[qT]:"fire-app-check",[WT]:"fire-app-check-compat",[GT]:"fire-auth",[KT]:"fire-auth-compat",[QT]:"fire-rtdb",[YT]:"fire-data-connect",[JT]:"fire-rtdb-compat",[XT]:"fire-fn",[ZT]:"fire-fn-compat",[ex]:"fire-iid",[tx]:"fire-iid-compat",[nx]:"fire-fcm",[rx]:"fire-fcm-compat",[sx]:"fire-perf",[ix]:"fire-perf-compat",[ox]:"fire-rc",[ax]:"fire-rc-compat",[lx]:"fire-gcs",[ux]:"fire-gcs-compat",[cx]:"fire-fst",[hx]:"fire-fst-compat",[dx]:"fire-vertex","fire-js":"fire-js",[fx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Map,gx=new Map,cf=new Map;function oy(r,e){try{r.container.addComponent(e)}catch(t){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Xo(r){const e=r.name;if(cf.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;cf.set(e,r);for(const t of Ec.values())oy(t,r);for(const t of gx.values())oy(t,r);return!0}function Mf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function _n(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ai=new Nl("app","Firebase",yx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=px;function a0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:uf,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw ai.create("bad-app-name",{appName:String(o)});if(t||(t=t0()),!t)throw ai.create("no-options");const l=Ec.get(o);if(l){if(hi(t,l.options)&&hi(s,l.config))return l;throw ai.create("duplicate-app",{appName:o})}const d=new xT(o);for(const p of cf.values())d.addComponent(p);const f=new vx(t,s,d);return Ec.set(o,f),f}function l0(r=uf){const e=Ec.get(r);if(!e&&r===uf&&t0())return a0();if(!e)throw ai.create("no-app",{appName:r});return e}function li(r,e,t){var s;let o=(s=mx[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(f.join(" "));return}Xo(new Yi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="firebase-heartbeat-database",wx=1,Il="firebase-heartbeat-store";let Wh=null;function u0(){return Wh||(Wh=jT(_x,wx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Il)}catch(t){console.warn(t)}}}}).catch(r=>{throw ai.create("idb-open",{originalErrorMessage:r.message})})),Wh}async function Ex(r){try{const t=(await u0()).transaction(Il),s=await t.objectStore(Il).get(c0(r));return await t.done,s}catch(e){if(e instanceof Ts)vs.warn(e.message);else{const t=ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vs.warn(t.message)}}}async function ay(r,e){try{const s=(await u0()).transaction(Il,"readwrite");await s.objectStore(Il).put(e,c0(r)),await s.done}catch(t){if(t instanceof Ts)vs.warn(t.message);else{const s=ai.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});vs.warn(s.message)}}}function c0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=1024,Tx=30;class xx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Cx(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ly();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>Tx){const d=Ax(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){vs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ly(),{heartbeatsToSend:s,unsentEntries:o}=Sx(this._heartbeatsCache.heartbeats),l=wc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return vs.warn(t),""}}}function ly(){return new Date().toISOString().substring(0,10)}function Sx(r,e=Ix){const t=[];let s=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),uy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),uy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Cx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hT()?fT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ex(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ay(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ay(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function uy(r){return wc(JSON.stringify({version:2,heartbeats:r})).length}function Ax(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(r){Xo(new Yi("platform-logger",e=>new UT(e),"PRIVATE")),Xo(new Yi("heartbeat",e=>new xx(e),"PRIVATE")),li(lf,iy,r),li(lf,iy,"esm2017"),li("fire-js","")}Rx("");var Px="firebase",bx="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(Px,bx,"app");function Ff(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function d0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kx=d0,h0=new Nl("auth","Firebase",d0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Lf("@firebase/auth");function Nx(r,...e){Ic.logLevel<=We.WARN&&Ic.warn(`Auth (${da}): ${r}`,...e)}function lc(r,...e){Ic.logLevel<=We.ERROR&&Ic.error(`Auth (${da}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(r,...e){throw zf(r,...e)}function Vn(r,...e){return zf(r,...e)}function Uf(r,e,t){const s=Object.assign(Object.assign({},kx()),{[e]:t});return new Nl("auth","Firebase",s).create(e,{appName:r.name})}function Cr(r){return Uf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dx(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&ur(r,"argument-error"),Uf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return h0.create(r,...e)}function he(r,e,...t){if(!r)throw zf(e,...t)}function gs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw lc(e),new Error(e)}function _s(r,e){r||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function Bf(){return cy()==="http:"||cy()==="https:"}function cy(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bf()||lT()||"connection"in navigator)?navigator.onLine:!0}function Ox(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t){this.shortDelay=e,this.longDelay=t,_s(t>e,"Short delay should be less than long delay!"),this.isMobile=iT()||uT()}get(){return Vx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(r,e){_s(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Mx=new Dl(3e4,6e4);function fn(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function On(r,e,t,s,o={}){return p0(r,o,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const f=ca(Object.assign({key:r.config.apiKey},d)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:p},l);return aT()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&ua(r.emulatorConfig.host)&&(v.credentials="include"),f0.fetch()(await m0(r,r.config.apiHost,t,f),v)})}async function p0(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},Lx),e);try{const o=new Ux(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw sl(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const f=l.ok?d.errorMessage:d.error.message,[p,v]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw sl(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw sl(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw sl(r,"user-disabled",d);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Uf(r,E,v);ur(r,E)}}catch(o){if(o instanceof Ts)throw o;ur(r,"network-request-failed",{message:String(o)})}}async function xs(r,e,t,s,o={}){const l=await On(r,e,t,s,o);return"mfaPendingCredential"in l&&ur(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function m0(r,e,t,s){const o=`${e}${t}?${s}`,l=r,d=l.config.emulator?$f(r.config,o):`${r.config.apiScheme}://${o}`;return jx.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function Fx(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ux{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Vn(this.auth,"network-request-failed")),Mx.get())})}}function sl(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Vn(r,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(r){return r!==void 0&&r.getResponse!==void 0}function hy(r){return r!==void 0&&r.enterprise!==void 0}class g0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Fx(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(r){return(await On(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function y0(r,e){return On(r,"GET","/v2/recaptchaConfig",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bx(r,e){return On(r,"POST","/v1/accounts:delete",e)}async function xc(r,e){return On(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $x(r,e=!1){const t=Tt(r),s=await t.getIdToken(e),o=Hf(s);he(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:hl(qh(o.auth_time)),issuedAtTime:hl(qh(o.iat)),expirationTime:hl(qh(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function qh(r){return Number(r)*1e3}function Hf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return lc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Zv(t);return o?JSON.parse(o):(lc("Failed to decode base64 JWT payload"),null)}catch(o){return lc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function fy(r){const e=Hf(r);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ts&&Hx(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Hx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hl(this.lastLoginAt),this.creationTime=hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(r){var e;const t=r.auth,s=await r.getIdToken(),o=await Zo(r,xc(t,{idToken:s}));he(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?v0(l.providerUserInfo):[],f=Gx(r.providerData,d),p=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),E=p?v:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new df(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,I)}async function qx(r){const e=Tt(r);await Tl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gx(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function v0(r){return r.map(e=>{var{providerId:t}=e,s=Ff(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kx(r,e){const t=await p0(r,{},async()=>{const s=ca({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await m0(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return r.emulatorConfig&&ua(r.emulatorConfig.host)&&(p.credentials="include"),f0.fetch()(d,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Qx(r,e){return On(r,"POST","/v2/accounts:revokeToken",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=fy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await Kx(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,d=new Wo;return s&&(he(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(he(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(he(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wo,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(r,e){he(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Sr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=Ff(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new df(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Zo(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $x(this,e)}reload(){return qx(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Tl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await Zo(this,Bx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,d,f,p,v,E;const I=(s=t.displayName)!==null&&s!==void 0?s:void 0,x=(o=t.email)!==null&&o!==void 0?o:void 0,j=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,H=(d=t.photoURL)!==null&&d!==void 0?d:void 0,$=(f=t.tenantId)!==null&&f!==void 0?f:void 0,M=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,ee=(v=t.createdAt)!==null&&v!==void 0?v:void 0,oe=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:J,emailVerified:Ie,isAnonymous:_e,providerData:we,stsTokenManager:N}=t;he(J&&N,e,"internal-error");const C=Wo.fromJSON(this.name,N);he(typeof J=="string",e,"internal-error"),Zs(I,e.name),Zs(x,e.name),he(typeof Ie=="boolean",e,"internal-error"),he(typeof _e=="boolean",e,"internal-error"),Zs(j,e.name),Zs(H,e.name),Zs($,e.name),Zs(M,e.name),Zs(ee,e.name),Zs(oe,e.name);const S=new Sr({uid:J,auth:e,email:x,emailVerified:Ie,displayName:I,isAnonymous:_e,photoURL:H,phoneNumber:j,tenantId:$,stsTokenManager:C,createdAt:ee,lastLoginAt:oe});return we&&Array.isArray(we)&&(S.providerData=we.map(P=>Object.assign({},P))),M&&(S._redirectEventId=M),S}static async _fromIdTokenResponse(e,t,s=!1){const o=new Wo;o.updateFromServerResponse(t);const l=new Sr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Tl(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];he(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?v0(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Wo;f.updateFromIdToken(s);const p=new Sr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new df(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,v),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=new Map;function ys(r){_s(r instanceof Function,"Expected a class definition");let e=py.get(r);return e?(_s(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,py.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_0.type="NONE";const my=_0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(r,e,t){return`firebase:${r}:${e}:${t}`}class qo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=uc(this.userKey,o.apiKey,l),this.fullPersistenceKey=uc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xc(this.auth,{idToken:e}).catch(()=>{});return t?Sr._fromGetAccountInfoResponse(this.auth,t,e):null}return Sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new qo(ys(my),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||ys(my);const d=uc(s,e.config.apiKey,e.name);let f=null;for(const v of t)try{const E=await v._get(d);if(E){let I;if(typeof E=="string"){const x=await xc(e,{idToken:E}).catch(()=>{});if(!x)break;I=await Sr._fromGetAccountInfoResponse(e,x,E)}else I=Sr._fromJSON(e,E);v!==l&&(f=I),l=v;break}}catch{}const p=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new qo(l,e,s):(l=p[0],f&&await l._set(d,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new qo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S0(e))return"Blackberry";if(C0(e))return"Webos";if(E0(e))return"Safari";if((e.includes("chrome/")||I0(e))&&!e.includes("edge/"))return"Chrome";if(x0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function w0(r=hn()){return/firefox\//i.test(r)}function E0(r=hn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function I0(r=hn()){return/crios\//i.test(r)}function T0(r=hn()){return/iemobile/i.test(r)}function x0(r=hn()){return/android/i.test(r)}function S0(r=hn()){return/blackberry/i.test(r)}function C0(r=hn()){return/webos/i.test(r)}function Wf(r=hn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Yx(r=hn()){var e;return Wf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Jx(){return cT()&&document.documentMode===10}function A0(r=hn()){return Wf(r)||x0(r)||C0(r)||S0(r)||/windows phone/i.test(r)||T0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(r,e=[]){let t;switch(r){case"Browser":t=gy(hn());break;case"Worker":t=`${gy(hn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${da}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((d,f)=>{try{const p=e(l);d(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zx(r,e={}){return On(r,"GET","/v2/passwordPolicy",fn(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=6;class t1{constructor(e){var t,s,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:e1,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,d,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yy(this),this.idTokenSubscription=new yy(this),this.beforeStateQueue=new Xx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ys(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xc(this,{idToken:e}),s=await Sr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_n(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===f)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ox()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Cr(this));const t=e?Tt(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Zx(this),t=new t1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Qx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ys(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(f,this,"internal-error"),f.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(t);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=R0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Nx(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function cr(r){return Tt(r)}class yy{constructor(e){this.auth=e,this.observer=null,this.addObserver=vT(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function r1(r){Vl=r}function qf(r){return Vl.loadJS(r)}function s1(){return Vl.recaptchaV2Script}function i1(){return Vl.recaptchaEnterpriseScript}function o1(){return Vl.gapiScript}function P0(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=500,l1=6e4,ec=1e12;class u1{constructor(e){this.auth=e,this.counter=ec,this._widgets=new Map}render(e,t){const s=this.counter;return this._widgets.set(s,new h1(e,this.auth.name,t||{})),this.counter++,s}reset(e){var t;const s=e||ec;(t=this._widgets.get(s))===null||t===void 0||t.delete(),this._widgets.delete(s)}getResponse(e){var t;const s=e||ec;return((t=this._widgets.get(s))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const s=e||ec;return(t=this._widgets.get(s))===null||t===void 0||t.execute(),""}}class c1{constructor(){this.enterprise=new d1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class d1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class h1{constructor(e,t,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;he(o,"argument-error",{appName:t}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=f1(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},l1)},a1))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function f1(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<r;s++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const p1="recaptcha-enterprise",fl="NO_RECAPTCHA";class b0{constructor(e){this.type=p1,this.auth=cr(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,f)=>{y0(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new g0(p);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(p=>{f(p)})})}function o(l,d,f){const p=window.grecaptcha;hy(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(fl)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new c1().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{s(this.auth).then(f=>{if(!t&&hy(window.grecaptcha))o(f,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=i1();p.length!==0&&(p+=f),qf(p).then(()=>{o(f,l,d)}).catch(v=>{d(v)})}}).catch(f=>{d(f)})})}}async function Za(r,e,t,s=!1,o=!1){const l=new b0(r);let d;if(o)d=fl;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Go(r,e,t,s,o){var l,d;if(o==="EMAIL_PASSWORD_PROVIDER")if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Za(r,e,t,t==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await Za(r,e,t,t==="getOobCode");return s(r,p)}else return Promise.reject(f)});else if(o==="PHONE_PROVIDER")if(!((d=r._getRecaptchaConfig())===null||d===void 0)&&d.isProviderEnabled("PHONE_PROVIDER")){const f=await Za(r,e,t);return s(r,f).catch(async p=>{var v;if(((v=r._getRecaptchaConfig())===null||v===void 0?void 0:v.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(p.code==="auth/missing-recaptcha-token"||p.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const E=await Za(r,e,t,!1,!0);return s(r,E)}return Promise.reject(p)})}else{const f=await Za(r,e,t,!1,!0);return s(r,f)}else return Promise.reject(o+" provider is not supported.")}async function m1(r){const e=cr(r),t=await y0(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new g0(t);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new b0(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(r,e){const t=Mf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(hi(l,e??{}))return o;ur(o,"already-initialized")}return t.initialize({options:e})}function y1(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ys);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function v1(r,e,t){const s=cr(r);he(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=k0(e),{host:d,port:f}=_1(e),p=f===null?"":`:${f}`,v={url:`${l}//${d}${p}/`},E=Object.freeze({host:d,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){he(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),he(hi(v,s.config.emulator)&&hi(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,ua(d)?(r0(`${l}//${d}${p}`),s0("Auth",!0)):w1()}function k0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function _1(r){const e=k0(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:vy(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:vy(d)}}}function vy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function w1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,t){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function E1(r,e){return On(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(r,e){return xs(r,"POST","/v1/accounts:signInWithPassword",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(r,e){return xs(r,"POST","/v1/accounts:signInWithEmailLink",fn(r,e))}async function x1(r,e){return xs(r,"POST","/v1/accounts:signInWithEmailLink",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Bc{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new xl(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new xl(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Go(e,t,"signInWithPassword",I1,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return T1(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Go(e,s,"signUpPassword",E1,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return x1(e,{idToken:t,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(r,e){return xs(r,"POST","/v1/accounts:signInWithIdp",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="http://localhost";class ws extends Bc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=Ff(t,["providerId","signInMethod"]);if(!s||!o)return null;const d=new ws(s,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Ko(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ko(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ko(e,t)}buildRequest(){const e={requestUri:S1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ca(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _y(r,e){return On(r,"POST","/v1/accounts:sendVerificationCode",fn(r,e))}async function C1(r,e){return xs(r,"POST","/v1/accounts:signInWithPhoneNumber",fn(r,e))}async function A1(r,e){const t=await xs(r,"POST","/v1/accounts:signInWithPhoneNumber",fn(r,e));if(t.temporaryProof)throw sl(r,"account-exists-with-different-credential",t);return t}const R1={USER_NOT_FOUND:"user-not-found"};async function P1(r,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return xs(r,"POST","/v1/accounts:signInWithPhoneNumber",fn(r,t),R1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends Bc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new pl({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new pl({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return C1(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return A1(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return P1(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:l}=e;return!s&&!t&&!o&&!l?null:new pl({verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function k1(r){const e=nl(rl(r)).link,t=e?nl(rl(e)).deep_link_id:null,s=nl(rl(r)).deep_link_id;return(s?nl(rl(s)).link:null)||s||t||e||r}class Gf{constructor(e){var t,s,o,l,d,f;const p=nl(rl(e)),v=(t=p.apiKey)!==null&&t!==void 0?t:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,I=b1((o=p.mode)!==null&&o!==void 0?o:null);he(v&&E&&I,"argument-error"),this.apiKey=v,this.operation=I,this.code=E,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=p.lang)!==null&&d!==void 0?d:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=k1(e);try{return new Gf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.providerId=to.PROVIDER_ID}static credential(e,t){return xl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Gf.parseLink(t);return he(s,"argument-error"),xl._fromEmailAndCode(e,s.code,s.tenantId)}}to.PROVIDER_ID="password";to.EMAIL_PASSWORD_SIGN_IN_METHOD="password";to.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Kf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qo extends ha{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return he("providerId"in t&&"signInMethod"in t,"argument-error"),ws._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return he(e.idToken||e.accessToken,"argument-error"),ws._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Qo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Qo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:l,nonce:d,providerId:f}=e;if(!s&&!o&&!t&&!l||!f)return null;try{return new Qo(f)._credential({idToken:t,accessToken:s,nonce:d,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends ha{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends ha{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ws._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ms.credential(t,s)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends ha{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ti.credential(e.oauthAccessToken)}catch{return null}}}ti.GITHUB_SIGN_IN_METHOD="github.com";ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends ha{constructor(){super("twitter.com")}static credential(e,t){return ws._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ni.credential(t,s)}catch{return null}}}ni.TWITTER_SIGN_IN_METHOD="twitter.com";ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(r,e){return xs(r,"POST","/v1/accounts:signUp",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Sr._fromIdTokenResponse(e,s,o),d=wy(s);return new fi({user:l,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=wy(s);return new fi({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function wy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends Ts{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Sc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Sc(e,t,s,o)}}function N0(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Sc._fromErrorAndOperation(r,l,e,s):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}async function D0(r,e,t=!1){const s=await Zo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return fi._forOperation(r,"link",s)}async function V1(r,e,t){await Tl(e);const s=D1(e.providerData);he(s.has(t)===r,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(r,e,t=!1){const{auth:s}=r;if(_n(s.app))return Promise.reject(Cr(s));const o="reauthenticate";try{const l=await Zo(r,N0(s,o,e,r),t);he(l.idToken,s,"internal-error");const d=Hf(l.idToken);he(d,s,"internal-error");const{sub:f}=d;return he(r.uid===f,s,"user-mismatch"),fi._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ur(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V0(r,e,t=!1){if(_n(r.app))return Promise.reject(Cr(r));const s="signIn",o=await N0(r,s,e),l=await fi._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function O0(r,e){return V0(cr(r),e)}async function tc(r,e){const t=Tt(r);return await V1(!1,t,e.providerId),D0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(r,e){return xs(r,"POST","/v1/accounts:signInWithCustomToken",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(r,e){if(_n(r.app))return Promise.reject(Cr(r));const t=cr(r),s=await L1(t,{token:e,returnSecureToken:!0}),o=await fi._fromIdTokenResponse(t,"signIn",s);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L0(r){const e=cr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function j0(r,e,t){if(_n(r.app))return Promise.reject(Cr(r));const s=cr(r),d=await Go(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",N1,"EMAIL_PASSWORD_PROVIDER").catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&L0(r),p}),f=await fi._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function M1(r,e,t){return _n(r.app)?Promise.reject(Cr(r)):O0(Tt(r),to.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&L0(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F1(r,e){return On(r,"POST","/v1/accounts:createAuthUri",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U1(r,e){const t=Bf()?Tc():"http://localhost",s={identifier:e,continueUri:t},{signinMethods:o}=await F1(Tt(r),s);return o||[]}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(r,e){return On(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=Tt(r),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await Zo(s,z1(s.auth,l));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const f=s.providerData.find(({providerId:p})=>p==="password");f&&(f.displayName=s.displayName,f.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function $1(r,e,t,s){return Tt(r).onIdTokenChanged(e,t,s)}function H1(r,e,t){return Tt(r).beforeAuthStateChanged(e,t)}function W1(r,e,t,s){return Tt(r).onAuthStateChanged(e,t,s)}function q1(r){return Tt(r).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(r,e){return On(r,"POST","/v2/accounts/mfaEnrollment:start",fn(r,e))}const Cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cc,"1"),this.storage.removeItem(Cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=1e3,K1=10;class F0 extends M0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=A0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,p)=>{this.notifyListeners(d,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);Jx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,K1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},G1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}F0.type="LOCAL";const Q1=F0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0 extends M0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}U0.type="SESSION";const z0=U0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new $c(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(d).map(async v=>v(t.origin,l)),p=await Y1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$c.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((f,p)=>{const v=Qf("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(I){const x=I;if(x.data.eventId===v)switch(x.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(x.data.response);break;default:clearTimeout(E),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return window}function X1(r){Vt().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(){return typeof Vt().WorkerGlobalScope<"u"&&typeof Vt().importScripts=="function"}async function Z1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function tS(){return Yf()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="firebaseLocalStorageDb",nS=1,Ac="firebaseLocalStorage",$0="fbase_key";class Ol{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hc(r,e){return r.transaction([Ac],e?"readwrite":"readonly").objectStore(Ac)}function rS(){const r=indexedDB.deleteDatabase(B0);return new Ol(r).toPromise()}function hf(){const r=indexedDB.open(B0,nS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Ac,{keyPath:$0})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Ac)?e(s):(s.close(),await rS(),e(await hf()))})})}async function Iy(r,e,t){const s=Hc(r,!0).put({[$0]:e,value:t});return new Ol(s).toPromise()}async function sS(r,e){const t=Hc(r,!1).get(e),s=await new Ol(t).toPromise();return s===void 0?null:s.value}function Ty(r,e){const t=Hc(r,!0).delete(e);return new Ol(t).toPromise()}const iS=800,oS=3;class H0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>oS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$c._getInstance(tS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Z1(),!this.activeServiceWorker)return;this.sender=new J1(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hf();return await Iy(e,Cc,"1"),await Ty(e,Cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Iy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>sS(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ty(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Hc(o,!1).getAll();return new Ol(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}H0.type="LOCAL";const aS=H0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(r,e){return On(r,"POST","/v2/accounts/mfaSignIn:start",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=P0("rcb"),lS=new Dl(3e4,6e4);class uS{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Vt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return he(cS(t),e,"argument-error"),this.shouldResolveImmediately(t)&&dy(Vt().grecaptcha)?Promise.resolve(Vt().grecaptcha):new Promise((s,o)=>{const l=Vt().setTimeout(()=>{o(Vn(e,"network-request-failed"))},lS.get());Vt()[Gh]=()=>{Vt().clearTimeout(l),delete Vt()[Gh];const f=Vt().grecaptcha;if(!f||!dy(f)){o(Vn(e,"internal-error"));return}const p=f.render;f.render=(v,E)=>{const I=p(v,E);return this.counter++,I},this.hostLanguage=t,s(f)};const d=`${s1()}?${ca({onload:Gh,render:"explicit",hl:t})}`;qf(d).catch(()=>{clearTimeout(l),o(Vn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Vt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function cS(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}class dS{async load(e){return new u1(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml="recaptcha",hS={theme:"light",type:"image"};class W0{constructor(e,t,s=Object.assign({},hS)){this.parameters=s,this.type=ml,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cr(e),this.isInvisible=this.parameters.size==="invisible",he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof t=="string"?document.getElementById(t):t;he(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dS:new uS,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),s=t.getResponse(e);return s||new Promise(o=>{const l=d=>{d&&(this.tokenChangeListeners.delete(l),o(d))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(s=>s(t)),typeof e=="function")e(t);else if(typeof e=="string"){const s=Vt()[e];typeof s=="function"&&s(t)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){he(Bf()&&!Yf(),this.auth,"internal-error"),await fS(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await zx(this.auth);he(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function fS(){let r=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}r=()=>e(),window.addEventListener("load",r)}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=pl._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function mS(r,e,t){if(_n(r.app))return Promise.reject(Cr(r));const s=cr(r),o=await gS(s,e,Tt(t));return new pS(o,l=>O0(s,l))}async function gS(r,e,t){var s;if(!r._getRecaptchaConfig())try{await m1(r)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const l=o.session;if("phoneNumber"in o){he(l.type==="enroll",r,"internal-error");const d={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Go(r,d,"mfaSmsEnrollment",async(E,I)=>{if(I.phoneEnrollmentInfo.captchaResponse===fl){he((t==null?void 0:t.type)===ml,E,"argument-error");const x=await Kh(E,I,t);return Ey(E,x)}return Ey(E,I)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneSessionInfo.sessionInfo}else{he(l.type==="signin",r,"internal-error");const d=((s=o.multiFactorHint)===null||s===void 0?void 0:s.uid)||o.multiFactorUid;he(d,r,"missing-multi-factor-info");const f={mfaPendingCredential:l.credential,mfaEnrollmentId:d,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Go(r,f,"mfaSmsSignIn",async(I,x)=>{if(x.phoneSignInInfo.captchaResponse===fl){he((t==null?void 0:t.type)===ml,I,"argument-error");const j=await Kh(I,x,t);return xy(I,j)}return xy(I,x)},"PHONE_PROVIDER").catch(I=>Promise.reject(I))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Go(r,l,"sendVerificationCode",async(v,E)=>{if(E.captchaResponse===fl){he((t==null?void 0:t.type)===ml,v,"argument-error");const I=await Kh(v,E,t);return _y(v,I)}return _y(v,E)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).sessionInfo}}finally{t==null||t._reset()}}async function Kh(r,e,t){he(t.type===ml,r,"argument-error");const s=await t.verify();he(typeof s=="string",r,"argument-error");const o=Object.assign({},e);if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.captchaResponse,f=o.phoneEnrollmentInfo.clientType,p=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:s,captchaResponse:d,clientType:f,recaptchaVersion:p}}),o}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.captchaResponse,d=o.phoneSignInInfo.clientType,f=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:l,clientType:d,recaptchaVersion:f}}),o}else return Object.assign(o,{recaptchaToken:s}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(r,e){return e?ys(e):(he(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends Bc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yS(r){return V0(r.auth,new Jf(r),r.bypassAuthState)}function vS(r){const{auth:e,user:t}=r;return he(t,e,"internal-error"),O1(t,new Jf(r),r.bypassAuthState)}async function _S(r){const{auth:e,user:t}=r;return he(t,e,"internal-error"),D0(t,new Jf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:d,type:f}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yS;case"linkViaPopup":case"linkViaRedirect":return _S;case"reauthViaPopup":case"reauthViaRedirect":return vS;default:ur(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=new Dl(2e3,1e4);async function nc(r,e,t){if(_n(r.app))return Promise.reject(Vn(r,"operation-not-supported-in-this-environment"));const s=cr(r);Dx(r,e,Kf);const o=q0(s,t);return new Gi(s,"signInViaPopup",e,o).executeNotNull()}class Gi extends G0{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Gi.currentPopupAction&&Gi.currentPopupAction.cancel(),Gi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=Qf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wS.get())};e()}}Gi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="pendingRedirect",cc=new Map;class IS extends G0{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=cc.get(this.auth._key());if(!e){try{const s=await TS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}cc.set(this.auth._key(),e)}return this.bypassAuthState||cc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TS(r,e){const t=CS(e),s=SS(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function xS(r,e){cc.set(r._key(),e)}function SS(r){return ys(r._redirectPersistence)}function CS(r){return uc(ES,r.config.apiKey,r.name)}async function AS(r,e,t=!1){if(_n(r.app))return Promise.reject(Cr(r));const s=cr(r),o=q0(s,e),d=await new IS(s,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=10*60*1e3;class PS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!K0(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Vn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sy(e))}saveEventToCache(e){this.cachedEventUids.add(Sy(e)),this.lastProcessedEventTime=Date.now()}}function Sy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function K0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(r,e={}){return On(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DS=/^https?/;async function VS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await kS(r);for(const t of e)try{if(OS(t))return}catch{}ur(r,"unauthorized-domain")}function OS(r){const e=Tc(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!DS.test(t))return!1;if(NS.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=new Dl(3e4,6e4);function Cy(){const r=Vt().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function jS(r){return new Promise((e,t)=>{var s,o,l;function d(){Cy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cy(),t(Vn(r,"network-request-failed"))},timeout:LS.get()})}if(!((o=(s=Vt().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Vt().gapi)===null||l===void 0)&&l.load)d();else{const f=P0("iframefcb");return Vt()[f]=()=>{gapi.load?d():t(Vn(r,"network-request-failed"))},qf(`${o1()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw dc=null,e})}let dc=null;function MS(r){return dc=dc||jS(r),dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=new Dl(5e3,15e3),US="__/auth/iframe",zS="emulator/auth/iframe",BS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$S=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HS(r){const e=r.config;he(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?$f(e,zS):`https://${r.config.authDomain}/${US}`,s={apiKey:e.apiKey,appName:r.name,v:da},o=$S.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ca(s).slice(1)}`}async function WS(r){const e=await MS(r),t=Vt().gapi;return he(t,r,"internal-error"),e.open({where:document.body,url:HS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BS,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const d=Vn(r,"network-request-failed"),f=Vt().setTimeout(()=>{l(d)},FS.get());function p(){Vt().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GS=500,KS=600,QS="_blank",YS="http://localhost";class Ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JS(r,e,t,s=GS,o=KS){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p=Object.assign(Object.assign({},qS),{width:s.toString(),height:o.toString(),top:l,left:d}),v=hn().toLowerCase();t&&(f=I0(v)?QS:t),w0(v)&&(e=e||YS,p.scrollbars="yes");const E=Object.entries(p).reduce((x,[j,H])=>`${x}${j}=${H},`,"");if(Yx(v)&&f!=="_self")return XS(e||"",f),new Ay(null);const I=window.open(e||"",f,E);he(I,r,"popup-blocked");try{I.focus()}catch{}return new Ay(I)}function XS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="__/auth/handler",eC="emulator/auth/handler",tC=encodeURIComponent("fac");async function Ry(r,e,t,s,o,l){he(r.config.authDomain,r,"auth-domain-config-required"),he(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:da,eventId:o};if(e instanceof Kf){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",yT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))d[E]=I}if(e instanceof ha){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const p=await r._getAppCheckToken(),v=p?`#${tC}=${encodeURIComponent(p)}`:"";return`${nC(r)}?${ca(f).slice(1)}${v}`}function nC({config:r}){return r.emulator?$f(r,eC):`https://${r.authDomain}/${ZS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="webStorageSupport";class rC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=z0,this._completeRedirectFn=AS,this._overrideRedirectResult=xS}async _openPopup(e,t,s,o){var l;_s((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await Ry(e,t,s,Tc(),o);return JS(e,d,Qf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Ry(e,t,s,Tc(),o);return X1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(_s(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await WS(e),s=new PS(e);return t.register("authEvent",o=>(he(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qh,{type:Qh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Qh];d!==void 0&&t(!!d),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return A0()||E0()||Wf()}}const sC=rC;var Py="@firebase/auth",by="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aC(r){Xo(new Yi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;he(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:R0(r)},v=new n1(s,o,l,p);return y1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Xo(new Yi("auth-internal",e=>{const t=cr(e.getProvider("auth").getImmediate());return(s=>new iC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(Py,by,oC(r)),li(Py,by,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=5*60,uC=n0("authIdTokenMaxAge")||lC;let ky=null;const cC=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>uC)return;const o=t==null?void 0:t.token;ky!==o&&(ky=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function dC(r=l0()){const e=Mf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=g1(r,{popupRedirectResolver:sC,persistence:[aS,Q1,z0]}),s=n0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=cC(l.toString());H1(t,d,()=>d(t.currentUser)),$1(t,f=>d(f))}}const o=e0("auth");return o&&v1(t,`http://${o}`),t}function hC(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}r1({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Vn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",hC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aC("Browser");var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ui,Q0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,C){function S(){}S.prototype=C.prototype,N.D=C.prototype,N.prototype=new S,N.prototype.constructor=N,N.C=function(P,k,O){for(var A=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)A[Xe-2]=arguments[Xe];return C.prototype[k].apply(P,A)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,C,S){S||(S=0);var P=Array(16);if(typeof C=="string")for(var k=0;16>k;++k)P[k]=C.charCodeAt(S++)|C.charCodeAt(S++)<<8|C.charCodeAt(S++)<<16|C.charCodeAt(S++)<<24;else for(k=0;16>k;++k)P[k]=C[S++]|C[S++]<<8|C[S++]<<16|C[S++]<<24;C=N.g[0],S=N.g[1],k=N.g[2];var O=N.g[3],A=C+(O^S&(k^O))+P[0]+3614090360&4294967295;C=S+(A<<7&4294967295|A>>>25),A=O+(k^C&(S^k))+P[1]+3905402710&4294967295,O=C+(A<<12&4294967295|A>>>20),A=k+(S^O&(C^S))+P[2]+606105819&4294967295,k=O+(A<<17&4294967295|A>>>15),A=S+(C^k&(O^C))+P[3]+3250441966&4294967295,S=k+(A<<22&4294967295|A>>>10),A=C+(O^S&(k^O))+P[4]+4118548399&4294967295,C=S+(A<<7&4294967295|A>>>25),A=O+(k^C&(S^k))+P[5]+1200080426&4294967295,O=C+(A<<12&4294967295|A>>>20),A=k+(S^O&(C^S))+P[6]+2821735955&4294967295,k=O+(A<<17&4294967295|A>>>15),A=S+(C^k&(O^C))+P[7]+4249261313&4294967295,S=k+(A<<22&4294967295|A>>>10),A=C+(O^S&(k^O))+P[8]+1770035416&4294967295,C=S+(A<<7&4294967295|A>>>25),A=O+(k^C&(S^k))+P[9]+2336552879&4294967295,O=C+(A<<12&4294967295|A>>>20),A=k+(S^O&(C^S))+P[10]+4294925233&4294967295,k=O+(A<<17&4294967295|A>>>15),A=S+(C^k&(O^C))+P[11]+2304563134&4294967295,S=k+(A<<22&4294967295|A>>>10),A=C+(O^S&(k^O))+P[12]+1804603682&4294967295,C=S+(A<<7&4294967295|A>>>25),A=O+(k^C&(S^k))+P[13]+4254626195&4294967295,O=C+(A<<12&4294967295|A>>>20),A=k+(S^O&(C^S))+P[14]+2792965006&4294967295,k=O+(A<<17&4294967295|A>>>15),A=S+(C^k&(O^C))+P[15]+1236535329&4294967295,S=k+(A<<22&4294967295|A>>>10),A=C+(k^O&(S^k))+P[1]+4129170786&4294967295,C=S+(A<<5&4294967295|A>>>27),A=O+(S^k&(C^S))+P[6]+3225465664&4294967295,O=C+(A<<9&4294967295|A>>>23),A=k+(C^S&(O^C))+P[11]+643717713&4294967295,k=O+(A<<14&4294967295|A>>>18),A=S+(O^C&(k^O))+P[0]+3921069994&4294967295,S=k+(A<<20&4294967295|A>>>12),A=C+(k^O&(S^k))+P[5]+3593408605&4294967295,C=S+(A<<5&4294967295|A>>>27),A=O+(S^k&(C^S))+P[10]+38016083&4294967295,O=C+(A<<9&4294967295|A>>>23),A=k+(C^S&(O^C))+P[15]+3634488961&4294967295,k=O+(A<<14&4294967295|A>>>18),A=S+(O^C&(k^O))+P[4]+3889429448&4294967295,S=k+(A<<20&4294967295|A>>>12),A=C+(k^O&(S^k))+P[9]+568446438&4294967295,C=S+(A<<5&4294967295|A>>>27),A=O+(S^k&(C^S))+P[14]+3275163606&4294967295,O=C+(A<<9&4294967295|A>>>23),A=k+(C^S&(O^C))+P[3]+4107603335&4294967295,k=O+(A<<14&4294967295|A>>>18),A=S+(O^C&(k^O))+P[8]+1163531501&4294967295,S=k+(A<<20&4294967295|A>>>12),A=C+(k^O&(S^k))+P[13]+2850285829&4294967295,C=S+(A<<5&4294967295|A>>>27),A=O+(S^k&(C^S))+P[2]+4243563512&4294967295,O=C+(A<<9&4294967295|A>>>23),A=k+(C^S&(O^C))+P[7]+1735328473&4294967295,k=O+(A<<14&4294967295|A>>>18),A=S+(O^C&(k^O))+P[12]+2368359562&4294967295,S=k+(A<<20&4294967295|A>>>12),A=C+(S^k^O)+P[5]+4294588738&4294967295,C=S+(A<<4&4294967295|A>>>28),A=O+(C^S^k)+P[8]+2272392833&4294967295,O=C+(A<<11&4294967295|A>>>21),A=k+(O^C^S)+P[11]+1839030562&4294967295,k=O+(A<<16&4294967295|A>>>16),A=S+(k^O^C)+P[14]+4259657740&4294967295,S=k+(A<<23&4294967295|A>>>9),A=C+(S^k^O)+P[1]+2763975236&4294967295,C=S+(A<<4&4294967295|A>>>28),A=O+(C^S^k)+P[4]+1272893353&4294967295,O=C+(A<<11&4294967295|A>>>21),A=k+(O^C^S)+P[7]+4139469664&4294967295,k=O+(A<<16&4294967295|A>>>16),A=S+(k^O^C)+P[10]+3200236656&4294967295,S=k+(A<<23&4294967295|A>>>9),A=C+(S^k^O)+P[13]+681279174&4294967295,C=S+(A<<4&4294967295|A>>>28),A=O+(C^S^k)+P[0]+3936430074&4294967295,O=C+(A<<11&4294967295|A>>>21),A=k+(O^C^S)+P[3]+3572445317&4294967295,k=O+(A<<16&4294967295|A>>>16),A=S+(k^O^C)+P[6]+76029189&4294967295,S=k+(A<<23&4294967295|A>>>9),A=C+(S^k^O)+P[9]+3654602809&4294967295,C=S+(A<<4&4294967295|A>>>28),A=O+(C^S^k)+P[12]+3873151461&4294967295,O=C+(A<<11&4294967295|A>>>21),A=k+(O^C^S)+P[15]+530742520&4294967295,k=O+(A<<16&4294967295|A>>>16),A=S+(k^O^C)+P[2]+3299628645&4294967295,S=k+(A<<23&4294967295|A>>>9),A=C+(k^(S|~O))+P[0]+4096336452&4294967295,C=S+(A<<6&4294967295|A>>>26),A=O+(S^(C|~k))+P[7]+1126891415&4294967295,O=C+(A<<10&4294967295|A>>>22),A=k+(C^(O|~S))+P[14]+2878612391&4294967295,k=O+(A<<15&4294967295|A>>>17),A=S+(O^(k|~C))+P[5]+4237533241&4294967295,S=k+(A<<21&4294967295|A>>>11),A=C+(k^(S|~O))+P[12]+1700485571&4294967295,C=S+(A<<6&4294967295|A>>>26),A=O+(S^(C|~k))+P[3]+2399980690&4294967295,O=C+(A<<10&4294967295|A>>>22),A=k+(C^(O|~S))+P[10]+4293915773&4294967295,k=O+(A<<15&4294967295|A>>>17),A=S+(O^(k|~C))+P[1]+2240044497&4294967295,S=k+(A<<21&4294967295|A>>>11),A=C+(k^(S|~O))+P[8]+1873313359&4294967295,C=S+(A<<6&4294967295|A>>>26),A=O+(S^(C|~k))+P[15]+4264355552&4294967295,O=C+(A<<10&4294967295|A>>>22),A=k+(C^(O|~S))+P[6]+2734768916&4294967295,k=O+(A<<15&4294967295|A>>>17),A=S+(O^(k|~C))+P[13]+1309151649&4294967295,S=k+(A<<21&4294967295|A>>>11),A=C+(k^(S|~O))+P[4]+4149444226&4294967295,C=S+(A<<6&4294967295|A>>>26),A=O+(S^(C|~k))+P[11]+3174756917&4294967295,O=C+(A<<10&4294967295|A>>>22),A=k+(C^(O|~S))+P[2]+718787259&4294967295,k=O+(A<<15&4294967295|A>>>17),A=S+(O^(k|~C))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+O&4294967295}s.prototype.u=function(N,C){C===void 0&&(C=N.length);for(var S=C-this.blockSize,P=this.B,k=this.h,O=0;O<C;){if(k==0)for(;O<=S;)o(this,N,O),O+=this.blockSize;if(typeof N=="string"){for(;O<C;)if(P[k++]=N.charCodeAt(O++),k==this.blockSize){o(this,P),k=0;break}}else for(;O<C;)if(P[k++]=N[O++],k==this.blockSize){o(this,P),k=0;break}}this.h=k,this.o+=C},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;var S=8*this.o;for(C=N.length-8;C<N.length;++C)N[C]=S&255,S/=256;for(this.u(N),N=Array(16),C=S=0;4>C;++C)for(var P=0;32>P;P+=8)N[S++]=this.g[C]>>>P&255;return N};function l(N,C){var S=f;return Object.prototype.hasOwnProperty.call(S,N)?S[N]:S[N]=C(N)}function d(N,C){this.h=C;for(var S=[],P=!0,k=N.length-1;0<=k;k--){var O=N[k]|0;P&&O==C||(S[k]=O,P=!1)}this.g=S}var f={};function p(N){return-128<=N&&128>N?l(N,function(C){return new d([C|0],0>C?-1:0)}):new d([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return I;if(0>N)return M(v(-N));for(var C=[],S=1,P=0;N>=S;P++)C[P]=N/S|0,S*=4294967296;return new d(C,0)}function E(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return M(E(N.substring(1),C));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=v(Math.pow(C,8)),P=I,k=0;k<N.length;k+=8){var O=Math.min(8,N.length-k),A=parseInt(N.substring(k,k+O),C);8>O?(O=v(Math.pow(C,O)),P=P.j(O).add(v(A))):(P=P.j(S),P=P.add(v(A)))}return P}var I=p(0),x=p(1),j=p(16777216);r=d.prototype,r.m=function(){if($(this))return-M(this).m();for(var N=0,C=1,S=0;S<this.g.length;S++){var P=this.i(S);N+=(0<=P?P:4294967296+P)*C,C*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(H(this))return"0";if($(this))return"-"+M(this).toString(N);for(var C=v(Math.pow(N,6)),S=this,P="";;){var k=Ie(S,C).g;S=ee(S,k.j(C));var O=((0<S.g.length?S.g[0]:S.h)>>>0).toString(N);if(S=k,H(S))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function H(N){if(N.h!=0)return!1;for(var C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function $(N){return N.h==-1}r.l=function(N){return N=ee(this,N),$(N)?-1:H(N)?0:1};function M(N){for(var C=N.g.length,S=[],P=0;P<C;P++)S[P]=~N.g[P];return new d(S,~N.h).add(x)}r.abs=function(){return $(this)?M(this):this},r.add=function(N){for(var C=Math.max(this.g.length,N.g.length),S=[],P=0,k=0;k<=C;k++){var O=P+(this.i(k)&65535)+(N.i(k)&65535),A=(O>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);P=A>>>16,O&=65535,A&=65535,S[k]=A<<16|O}return new d(S,S[S.length-1]&-2147483648?-1:0)};function ee(N,C){return N.add(M(C))}r.j=function(N){if(H(this)||H(N))return I;if($(this))return $(N)?M(this).j(M(N)):M(M(this).j(N));if($(N))return M(this.j(M(N)));if(0>this.l(j)&&0>N.l(j))return v(this.m()*N.m());for(var C=this.g.length+N.g.length,S=[],P=0;P<2*C;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(var k=0;k<N.g.length;k++){var O=this.i(P)>>>16,A=this.i(P)&65535,Xe=N.i(k)>>>16,it=N.i(k)&65535;S[2*P+2*k]+=A*it,oe(S,2*P+2*k),S[2*P+2*k+1]+=O*it,oe(S,2*P+2*k+1),S[2*P+2*k+1]+=A*Xe,oe(S,2*P+2*k+1),S[2*P+2*k+2]+=O*Xe,oe(S,2*P+2*k+2)}for(P=0;P<C;P++)S[P]=S[2*P+1]<<16|S[2*P];for(P=C;P<2*C;P++)S[P]=0;return new d(S,0)};function oe(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function J(N,C){this.g=N,this.h=C}function Ie(N,C){if(H(C))throw Error("division by zero");if(H(N))return new J(I,I);if($(N))return C=Ie(M(N),C),new J(M(C.g),M(C.h));if($(C))return C=Ie(N,M(C)),new J(M(C.g),C.h);if(30<N.g.length){if($(N)||$(C))throw Error("slowDivide_ only works with positive integers.");for(var S=x,P=C;0>=P.l(N);)S=_e(S),P=_e(P);var k=we(S,1),O=we(P,1);for(P=we(P,2),S=we(S,2);!H(P);){var A=O.add(P);0>=A.l(N)&&(k=k.add(S),O=A),P=we(P,1),S=we(S,1)}return C=ee(N,k.j(C)),new J(k,C)}for(k=I;0<=N.l(C);){for(S=Math.max(1,Math.floor(N.m()/C.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=v(S),A=O.j(C);$(A)||0<A.l(N);)S-=P,O=v(S),A=O.j(C);H(O)&&(O=x),k=k.add(O),N=ee(N,A)}return new J(k,N)}r.A=function(N){return Ie(this,N).h},r.and=function(N){for(var C=Math.max(this.g.length,N.g.length),S=[],P=0;P<C;P++)S[P]=this.i(P)&N.i(P);return new d(S,this.h&N.h)},r.or=function(N){for(var C=Math.max(this.g.length,N.g.length),S=[],P=0;P<C;P++)S[P]=this.i(P)|N.i(P);return new d(S,this.h|N.h)},r.xor=function(N){for(var C=Math.max(this.g.length,N.g.length),S=[],P=0;P<C;P++)S[P]=this.i(P)^N.i(P);return new d(S,this.h^N.h)};function _e(N){for(var C=N.g.length+1,S=[],P=0;P<C;P++)S[P]=N.i(P)<<1|N.i(P-1)>>>31;return new d(S,N.h)}function we(N,C){var S=C>>5;C%=32;for(var P=N.g.length-S,k=[],O=0;O<P;O++)k[O]=0<C?N.i(O+S)>>>C|N.i(O+S+1)<<32-C:N.i(O+S);return new d(k,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Q0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=E,ui=d}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Y0,il,J0,hc,ff,X0,Z0,e_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rc=="object"&&rc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,T=!1,F={next:function(){if(!T&&_<u.length){var W=_++;return{value:m(W,u[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function I(u,m,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),u.apply(m,F)}}return function(){return u.apply(m,arguments)}}function x(u,m,_){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,x.apply(null,arguments)}function j(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function H(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,F,W){for(var ae=Array(arguments.length-2),st=2;st<arguments.length;st++)ae[st-2]=arguments[st];return m.prototype[F].apply(T,ae)}}function $(u){const m=u.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function M(u,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(p(T)){const F=u.length||0,W=T.length||0;u.length=F+W;for(let ae=0;ae<W;ae++)u[F+ae]=T[ae]}else u.push(T)}}class ee{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function oe(u){return/^[\s\xa0]*$/.test(u)}function J(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function Ie(u){return Ie[" "](u),u}Ie[" "]=function(){};var _e=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function we(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function N(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function C(u){const m={};for(const _ in u)m[_]=u[_];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,m){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let W=0;W<S.length;W++)_=S[W],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function k(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function O(u){f.setTimeout(()=>{throw u},0)}function A(){var u=me;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Xe{constructor(){this.h=this.g=null}add(m,_){const T=it.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var it=new ee(()=>new lt,u=>u.reset());class lt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let le,q=!1,me=new Xe,ie=()=>{const u=f.Promise.resolve(void 0);le=()=>{u.then(L)}};var L=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(_){O(_)}var m=it;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}q=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,m),f.removeEventListener("test",_,m)}catch{}return u}();function ke(u,m){if(ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(_e){e:{try{Ie(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ne[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ke.aa.h.call(this)}}H(ke,ye);var Ne={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function Le(u,m,_,T,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=F,this.key=++Oe,this.da=this.fa=!1}function Ge(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function wt(u){this.src=u,this.g={},this.h=0}wt.prototype.add=function(u,m,_,T,F){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ae=ne(u,m,T,F);return-1<ae?(m=u[ae],_||(m.fa=!1)):(m=new Le(m,this.src,W,!!T,F),m.fa=_,u.push(m)),m};function ue(u,m){var _=m.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,m,void 0),W;(W=0<=F)&&Array.prototype.splice.call(T,F,1),W&&(Ge(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ne(u,m,_,T){for(var F=0;F<u.length;++F){var W=u[F];if(!W.da&&W.listener==m&&W.capture==!!_&&W.ha==T)return F}return-1}var de="closure_lm_"+(1e6*Math.random()|0),je={};function Gt(u,m,_,T,F){if(Array.isArray(m)){for(var W=0;W<m.length;W++)Gt(u,m[W],_,T,F);return null}return _=pn(_),u&&u[Ue]?u.K(m,_,v(T)?!!T.capture:!1,F):Kt(u,m,_,!1,T,F)}function Kt(u,m,_,T,F,W){if(!m)throw Error("Invalid event type");var ae=v(F)?!!F.capture:!!F,st=En(u);if(st||(u[de]=st=new wt(u)),_=st.add(m,_,T,ae,W),_.proxy)return _;if(T=wn(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Ae||(F=ae),F===void 0&&(F=!1),u.addEventListener(m.toString(),T,F);else if(u.attachEvent)u.attachEvent(Qt(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function wn(){function u(_){return m.call(u.src,u.listener,_)}const m=Ln;return u}function Kn(u,m,_,T,F){if(Array.isArray(m))for(var W=0;W<m.length;W++)Kn(u,m[W],_,T,F);else T=v(T)?!!T.capture:!!T,_=pn(_),u&&u[Ue]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],_=ne(W,_,T,F),-1<_&&(Ge(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=En(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ne(m,_,T,F)),(_=-1<u?m[u]:null)&&Pt(_))}function Pt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ue])ue(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(Qt(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=En(m))?(ue(_,u),_.h==0&&(_.src=null,m[de]=null)):Ge(u)}}}function Qt(u){return u in je?je[u]:je[u]="on"+u}function Ln(u,m){if(u.da)u=!0;else{m=new ke(m,this);var _=u.listener,T=u.ha||u.src;u.fa&&Pt(u),u=_.call(T,m)}return u}function En(u){return u=u[de],u instanceof wt?u:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function pn(u){return typeof u=="function"?u:(u[In]||(u[In]=function(m){return u.handleEvent(m)}),u[In])}function tt(){G.call(this),this.i=new wt(this),this.M=this,this.F=null}H(tt,G),tt.prototype[Ue]=!0,tt.prototype.removeEventListener=function(u,m,_,T){Kn(this,u,m,_,T)};function se(u,m){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new ye(m,u);else if(m instanceof ye)m.target=m.target||u;else{var F=m;m=new ye(T,u),P(m,F)}if(F=!0,_)for(var W=_.length-1;0<=W;W--){var ae=m.g=_[W];F=xe(ae,T,!0,m)&&F}if(ae=m.g=u,F=xe(ae,T,!0,m)&&F,F=xe(ae,T,!1,m)&&F,_)for(W=0;W<_.length;W++)ae=m.g=_[W],F=xe(ae,T,!1,m)&&F}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],T=0;T<_.length;T++)Ge(_[T]);delete u.g[m],u.h--}}this.F=null},tt.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},tt.prototype.L=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function xe(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,W=0;W<m.length;++W){var ae=m[W];if(ae&&!ae.da&&ae.capture==_){var st=ae.listener,Mt=ae.ha||ae.src;ae.fa&&ue(u.i,ae),F=st.call(Mt,T)!==!1&&F}}return F&&!T.defaultPrevented}function Qn(u,m,_){if(typeof u=="function")_&&(u=x(u,_));else if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:f.setTimeout(u,m||0)}function dr(u){u.g=Qn(()=>{u.g=null,u.i&&(u.i=!1,dr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class hr extends G{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:dr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(u){G.call(this),this.h=u,this.g={}}H(Yn,G);var Rr=[];function Ss(u){we(u.g,function(m,_){this.g.hasOwnProperty(_)&&Pt(m)},u),u.g={}}Yn.prototype.N=function(){Yn.aa.N.call(this),Ss(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pr=f.JSON.stringify,Cs=f.JSON.parse,As=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function jn(){}jn.prototype.h=null;function br(u){return u.h||(u.h=u.i())}function Jn(){}var rn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mn(){ye.call(this,"d")}H(Mn,ye);function Qr(){ye.call(this,"c")}H(Qr,ye);var Xn={},Rs=null;function Yr(){return Rs=Rs||new tt}Xn.La="serverreachability";function Ti(u){ye.call(this,Xn.La,u)}H(Ti,ye);function fr(u){const m=Yr();se(m,new Ti(m))}Xn.STAT_EVENT="statevent";function xi(u,m){ye.call(this,Xn.STAT_EVENT,u),this.stat=m}H(xi,ye);function gt(u){const m=Yr();se(m,new xi(m,u))}Xn.Ma="timingevent";function Ps(u,m){ye.call(this,Xn.Ma,u),this.size=m}H(Ps,ye);function Fn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function Jr(){this.g=!0}Jr.prototype.xa=function(){this.g=!1};function K(u,m,_,T,F,W){u.info(function(){if(u.g)if(W)for(var ae="",st=W.split("&"),Mt=0;Mt<st.length;Mt++){var Ye=st[Mt].split("=");if(1<Ye.length){var Bt=Ye[0];Ye=Ye[1];var kt=Bt.split("_");ae=2<=kt.length&&kt[1]=="type"?ae+(Bt+"="+Ye+"&"):ae+(Bt+"=redacted&")}}else ae=null;else ae=W;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+m+`
`+_+`
`+ae})}function ze(u,m,_,T,F,W,ae){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+m+`
`+_+`
`+W+" "+ae})}function Se(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Be(u,_)+(T?" "+T:"")})}function Ce(u,m){u.info(function(){return"TIMEOUT: "+m})}Jr.prototype.info=function(){};function Be(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ae=1;ae<F.length;ae++)F[ae]=""}}}}return Pr(_)}catch{return m}}var rt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qe;function ot(){}H(ot,jn),ot.prototype.g=function(){return new XMLHttpRequest},ot.prototype.i=function(){return{}},Qe=new ot;function yt(u,m,_,T){this.j=u,this.i=m,this.l=_,this.R=T||1,this.U=new Yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tn}function Tn(){this.i=null,this.g="",this.h=!1}var Xr={},ut={};function Zr(u,m,_){u.L=1,u.v=Vs(zn(m)),u.m=_,u.P=!0,io(u,null)}function io(u,m){u.F=Date.now(),ct(u),u.A=zn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Ls(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Tn,u.g=su(u.j,_?m:null,!u.m),0<u.O&&(u.M=new hr(x(u.Y,u,u.g),u.O)),m=u.U,_=u.g,T=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(Rr[0]=F.toString()),F=Rr);for(var W=0;W<F.length;W++){var ae=Gt(_,F[W],T||m.handleEvent,!1,m.h||m);if(!ae)break;m.g[ae.key]=ae}m=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),fr(),K(u.i,u.u,u.A,u.l,u.R,u.m)}yt.prototype.ca=function(u){u=u.target;const m=this.M;m&&Sn(u)==3?m.j():this.Y(u)},yt.prototype.Y=function(u){try{if(u==this.g)e:{const kt=Sn(this.g);var m=this.g.Ba();const tr=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Sa(this.g)))){this.J||kt!=4||m==7||(m==8||0>=tr?fr(3):fr(2)),Ci(this);var _=this.g.Z();this.X=_;t:if(Si(this)){var T=Sa(this.g);u="";var F=T.length,W=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zn(this),bs(this);var ae="";break t}this.h.i=new f.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(W&&m==F-1)});T.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,ze(this.i,this.u,this.A,this.l,this.R,kt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var st,Mt=this.g;if((st=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(st)){var Ye=st;break t}}Ye=null}if(_=Ye)Se(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wa(this,_);else{this.o=!1,this.s=3,gt(12),Zn(this),bs(this);break e}}if(this.P){_=!0;let $n;for(;!this.J&&this.C<ae.length;)if($n=_a(this,ae),$n==ut){kt==4&&(this.s=4,gt(14),_=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}else if($n==Xr){this.s=4,gt(15),Se(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else Se(this.i,this.l,$n,null),wa(this,$n);if(Si(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ae.length!=0||this.h.h||(this.s=1,gt(16),_=!1),this.o=this.o&&_,!_)Se(this.i,this.l,ae,"[Invalid Chunked Response]"),Zn(this),bs(this);else if(0<ae.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Aa(Bt),Bt.M=!0,gt(11))}}else Se(this.i,this.l,ae,null),wa(this,ae);kt==4&&Zn(this),this.o&&!this.J&&(kt==4?yo(this.j,this):(this.o=!1,ct(this)))}else ho(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Zn(this),bs(this)}}}catch{}finally{}};function Si(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function _a(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?ut:(_=Number(m.substring(_,T)),isNaN(_)?Xr:(T+=1,T+_>m.length?ut:(m=m.slice(T,T+_),u.C=T+_,m)))}yt.prototype.cancel=function(){this.J=!0,Zn(this)};function ct(u){u.S=Date.now()+u.I,Bl(u,u.I)}function Bl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Fn(x(u.ba,u),m)}function Ci(u){u.B&&(f.clearTimeout(u.B),u.B=null)}yt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ce(this.i,this.A),this.L!=2&&(fr(),gt(17)),Zn(this),this.s=2,bs(this)):Bl(this,this.S-u)};function bs(u){u.j.G==0||u.J||yo(u.j,u)}function Zn(u){Ci(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Ss(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function wa(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||mn(_.h,u))){if(!u.K&&mn(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)go(_),vr(_);else break e;mo(_),gt(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=Fn(x(_.Za,_),6e3));if(1>=Hl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ss(_,11)}else if((u.K||_.g==u)&&go(_),!oe(m))for(F=_.Da.g.parse(m),m=0;m<F.length;m++){let Ye=F[m];if(_.T=Ye[0],Ye=Ye[1],_.G==2)if(Ye[0]=="c"){_.K=Ye[1],_.ia=Ye[2];const Bt=Ye[3];Bt!=null&&(_.la=Bt,_.j.info("VER="+_.la));const kt=Ye[4];kt!=null&&(_.Aa=kt,_.j.info("SVER="+_.Aa));const tr=Ye[5];tr!=null&&typeof tr=="number"&&0<tr&&(T=1.5*tr,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const $n=u.g;if($n){const Di=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Di){var W=T.h;W.g||Di.indexOf("spdy")==-1&&Di.indexOf("quic")==-1&&Di.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ea(W,W.h),W.h=null))}if(T.D){const _o=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;_o&&(T.ya=_o,at(T.I,T.D,_o))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var ae=u;if(T.qa=ru(T,T.J?T.ia:null,T.W),ae.K){Wl(T.h,ae);var st=ae,Mt=T.L;Mt&&(st.I=Mt),st.B&&(Ci(st),ct(st)),T.g=ae}else Ni(T);0<_.i.length&&Vr(_)}else Ye[0]!="stop"&&Ye[0]!="close"||ss(_,7);else _.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ss(_,7):Jt(_):Ye[0]!="noop"&&_.l&&_.l.ta(Ye),_.v=0)}}fr(4)}catch{}}var $l=class{constructor(u,m){this.g=u,this.map=m}};function Ai(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Un(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Hl(u){return u.h?1:u.g?u.g.size:0}function mn(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ea(u,m){u.g?u.g.add(m):u.h=m}function Wl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ai.prototype.cancel=function(){if(this.i=ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ql(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return $(u.i)}function oo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,T=0;T<_;T++)m.push(u[T]);return m}m=[],_=0;for(T in u)m[_++]=u[T];return m}function ao(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const T in u)m[_++]=T;return m}}}function ks(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=ao(u),T=oo(u),F=T.length,W=0;W<F;W++)m.call(void 0,T[W],_&&_[W],u)}var Ri=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dd(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),F=null;if(0<=T){var W=u[_].substring(0,T);F=u[_].substring(T+1)}else W=u[_];m(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function es(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof es){this.h=u.h,Pi(this,u.j),this.o=u.o,this.g=u.g,Ns(this,u.s),this.l=u.l;var m=u.i,_=new kr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Ds(this,_),this.m=u.m}else u&&(m=String(u).match(Ri))?(this.h=!1,Pi(this,m[1]||"",!0),this.o=Ke(m[2]||""),this.g=Ke(m[3]||"",!0),Ns(this,m[4]),this.l=Ke(m[5]||"",!0),Ds(this,m[6]||"",!0),this.m=Ke(m[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}es.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Os(m,lo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Os(m,lo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Os(_,_.charAt(0)=="/"?Ql:Kl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Os(_,Ia)),u.join("")};function zn(u){return new es(u)}function Pi(u,m,_){u.j=_?Ke(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Ns(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ds(u,m,_){m instanceof kr?(u.i=m,Nr(u.i,u.h)):(_||(m=Os(m,Yl)),u.i=new kr(m,u.h))}function at(u,m,_){u.i.set(m,_)}function Vs(u){return at(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ke(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Os(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Gl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Gl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var lo=/[#\/\?@]/g,Kl=/[#\?:]/g,Ql=/[#\?]/g,Yl=/[#\?@]/g,Ia=/#/g;function kr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Yt(u){u.g||(u.g=new Map,u.h=0,u.i&&dd(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=kr.prototype,r.add=function(u,m){Yt(this),this.i=null,u=er(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function pr(u,m){Yt(u),m=er(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function mr(u,m){return Yt(u),m=er(u,m),u.g.has(m)}r.forEach=function(u,m){Yt(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(m,F,T,this)},this)},this)},r.na=function(){Yt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const F=u[T];for(let W=0;W<F.length;W++)_.push(m[T])}return _},r.V=function(u){Yt(this);let m=[];if(typeof u=="string")mr(this,u)&&(m=m.concat(this.g.get(er(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Yt(this),this.i=null,u=er(this,u),mr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Ls(u,m,_){pr(u,m),0<_.length&&(u.i=null,u.g.set(er(u,m),$(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const W=encodeURIComponent(String(T)),ae=this.V(T);for(T=0;T<ae.length;T++){var F=W;ae[T]!==""&&(F+="="+encodeURIComponent(String(ae[T]))),u.push(F)}}return this.i=u.join("&")};function er(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Nr(u,m){m&&!u.j&&(Yt(u),u.i=null,u.g.forEach(function(_,T){var F=T.toLowerCase();T!=F&&(pr(this,T),Ls(this,F,_))},u)),u.j=m}function hd(u,m){const _=new Jr;if(f.Image){const T=new Image;T.onload=j(xn,_,"TestLoadImage: loaded",!0,m,T),T.onerror=j(xn,_,"TestLoadImage: error",!1,m,T),T.onabort=j(xn,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=j(xn,_,"TestLoadImage: timeout",!1,m,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Jl(u,m){const _=new Jr,T=new AbortController,F=setTimeout(()=>{T.abort(),xn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(W=>{clearTimeout(F),W.ok?xn(_,"TestPingServer: ok",!0,m):xn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),xn(_,"TestPingServer: error",!1,m)})}function xn(u,m,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function fd(){this.g=new As}function Xl(u,m,_){const T=_||"";try{ks(u,function(F,W){let ae=F;v(F)&&(ae=Pr(F)),m.push(T+W+"="+encodeURIComponent(ae))})}catch(F){throw m.push(T+"type="+encodeURIComponent("_badmap")),F}}function ts(u){this.l=u.Ub||null,this.j=u.eb||!1}H(ts,jn),ts.prototype.g=function(){return new bi(this.l,this.j)},ts.prototype.i=function(u){return function(){return u}}({});function bi(u,m){tt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(bi,tt),r=bi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,yr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||f).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,yr(this)),this.g&&(this.readyState=3,yr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?gr(this):yr(this),this.readyState==3&&Zl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,gr(this))},r.Qa=function(u){this.g&&(this.response=u,gr(this))},r.ga=function(){this.g&&gr(this)};function gr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,yr(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function yr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ns(u){let m="";return we(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function js(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=ns(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):at(u,m,_))}function vt(u){tt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(vt,tt);var pd=/^https?$/i,Ta=["POST","PUT"];r=vt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qe.g(),this.v=this.o?br(this.o):br(Qe),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){ki(this,W);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())_.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Ta,m,void 0))||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ae]of _)this.g.setRequestHeader(W,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{co(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){ki(this,W)}};function ki(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,uo(u),Bn(u)}function uo(u){u.A||(u.A=!0,se(u,"complete"),se(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,se(this,"complete"),se(this,"abort"),Bn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),vt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?xa(this):this.bb())},r.bb=function(){xa(this)};function xa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Sn(u)!=4||u.Z()!=2)){if(u.u&&Sn(u)==4)Qn(u.Ea,0,u);else if(se(u,"readystatechange"),Sn(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=ae===0){var F=String(u.D).match(Ri)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),T=!pd.test(F?F.toLowerCase():"")}_=T}if(_)se(u,"complete"),se(u,"success");else{u.m=6;try{var W=2<Sn(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",uo(u)}}finally{Bn(u)}}}}function Bn(u,m){if(u.g){co(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||se(u,"ready");try{_.onreadystatechange=T}catch{}}}function co(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Sn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Cs(m)}};function Sa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ho(u){const m={};u=(u.g&&2<=Sn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(oe(u[T]))continue;var _=k(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=m[F]||[];m[F]=W,W.push(_)}N(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Ca(u){this.Aa=0,this.i=[],this.j=new Jr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dr("baseRetryDelayMs",5e3,u),this.cb=Dr("retryDelaySeedMs",1e4,u),this.Wa=Dr("forwardChannelMaxRetries",2,u),this.wa=Dr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ai(u&&u.concurrentRequestLimit),this.Da=new fd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ca.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,T){gt(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=ru(this,null,this.W),Vr(this)};function Jt(u){if(fo(u),u.G==3){var m=u.U++,_=zn(u.I);if(at(_,"SID",u.K),at(_,"RID",m),at(_,"TYPE","terminate"),rs(u,_),m=new yt(u,u.j,m),m.L=2,m.v=Vs(zn(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=m.v,_=!0),_||(m.g=su(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ct(m)}nu(u)}function vr(u){u.g&&(Aa(u),u.g.cancel(),u.g=null)}function fo(u){vr(u),u.u&&(f.clearTimeout(u.u),u.u=null),go(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Vr(u){if(!Un(u.h)&&!u.s){u.s=!0;var m=u.Ga;le||ie(),q||(le(),q=!0),me.add(m,u),u.B=0}}function md(u,m){return Hl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Fn(x(u.Ga,u,m),tu(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new yt(this,this.j,u);let W=this.o;if(this.S&&(W?(W=C(W),P(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Ms(this,F,m),_=zn(this.I),at(_,"RID",u),at(_,"CVER",22),this.D&&at(_,"X-HTTP-Session-Id",this.D),rs(this,_),W&&(this.O?m="headers="+encodeURIComponent(String(ns(W)))+"&"+m:this.m&&js(_,this.m,W)),Ea(this.h,F),this.Ua&&at(_,"TYPE","init"),this.P?(at(_,"$req",m),at(_,"SID","null"),F.T=!0,Zr(F,_,null)):Zr(F,_,m),this.G=2}}else this.G==3&&(u?po(this,u):this.i.length==0||Un(this.h)||po(this))};function po(u,m){var _;m?_=m.l:_=u.U++;const T=zn(u.I);at(T,"SID",u.K),at(T,"RID",_),at(T,"AID",u.T),rs(u,T),u.m&&u.o&&js(T,u.m,u.o),_=new yt(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ms(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ea(u.h,_),Zr(_,T,m)}function rs(u,m){u.H&&we(u.H,function(_,T){at(m,T,_)}),u.l&&ks({},function(_,T){at(m,T,_)})}function Ms(u,m,_){_=Math.min(u.i.length,_);var T=u.l?x(u.l.Na,u.l,u):null;e:{var F=u.i;let W=-1;for(;;){const ae=["count="+_];W==-1?0<_?(W=F[0].g,ae.push("ofs="+W)):W=0:ae.push("ofs="+W);let st=!0;for(let Mt=0;Mt<_;Mt++){let Ye=F[Mt].g;const Bt=F[Mt].map;if(Ye-=W,0>Ye)W=Math.max(0,F[Mt].g-100),st=!1;else try{Xl(Bt,ae,"req"+Ye+"_")}catch{T&&T(Bt)}}if(st){T=ae.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,T}function Ni(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;le||ie(),q||(le(),q=!0),me.add(m,u),u.v=0}}function mo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Fn(x(u.Fa,u),tu(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Fn(x(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),vr(this),eu(this))};function Aa(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function eu(u){u.g=new yt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=zn(u.qa);at(m,"RID","rpc"),at(m,"SID",u.K),at(m,"AID",u.T),at(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&at(m,"TO",u.ja),at(m,"TYPE","xmlhttp"),rs(u,m),u.m&&u.o&&js(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Vs(zn(m)),_.m=null,_.P=!0,io(_,u)}r.Za=function(){this.C!=null&&(this.C=null,vr(this),mo(this),gt(19))};function go(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function yo(u,m){var _=null;if(u.g==m){go(u),Aa(u),u.g=null;var T=2}else if(mn(u.h,m))_=m.D,Wl(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var F=u.B;T=Yr(),se(T,new Ps(T,_)),Vr(u)}else Ni(u);else if(F=m.s,F==3||F==0&&0<m.X||!(T==1&&md(u,m)||T==2&&mo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),F){case 1:ss(u,5);break;case 4:ss(u,10);break;case 3:ss(u,6);break;default:ss(u,2)}}}function tu(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function ss(u,m){if(u.j.info("Error code "+m),m==2){var _=x(u.fb,u),T=u.Xa;const F=!T;T=new es(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Pi(T,"https"),Vs(T),F?hd(T.toString(),_):Jl(T.toString(),_)}else gt(2);u.G=0,u.l&&u.l.sa(m),nu(u),fo(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function nu(u){if(u.G=0,u.ka=[],u.l){const m=ql(u.h);(m.length!=0||u.i.length!=0)&&(M(u.ka,m),M(u.ka,u.i),u.h.i.length=0,$(u.i),u.i.length=0),u.l.ra()}}function ru(u,m,_){var T=_ instanceof es?zn(_):new es(_);if(T.g!="")m&&(T.g=m+"."+T.g),Ns(T,T.s);else{var F=f.location;T=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var W=new es(null);T&&Pi(W,T),m&&(W.g=m),F&&Ns(W,F),_&&(W.l=_),T=W}return _=u.D,m=u.ya,_&&m&&at(T,_,m),at(T,"VER",u.la),rs(u,T),T}function su(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new vt(new ts({eb:_})):new vt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ra(){}r=Ra.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function vo(){}vo.prototype.g=function(u,m){return new gn(u,m)};function gn(u,m){tt.call(this),this.g=new Ca(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!oe(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!oe(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Or(this)}H(gn,tt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Jt(this.g)},gn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Pr(u),u=_);m.i.push(new $l(m.Ya++,u)),m.G==3&&Vr(m)},gn.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,gn.aa.N.call(this)};function iu(u){Mn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}H(iu,Mn);function ou(){Qr.call(this),this.status=1}H(ou,Qr);function Or(u){this.g=u}H(Or,Ra),Or.prototype.ua=function(){se(this.g,"a")},Or.prototype.ta=function(u){se(this.g,new iu(u))},Or.prototype.sa=function(u){se(this.g,new ou)},Or.prototype.ra=function(){se(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,e_=function(){return new vo},Z0=function(){return Yr()},X0=Xn,ff={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,hc=rt,bt.COMPLETE="complete",J0=bt,Jn.EventType=rn,rn.OPEN="a",rn.CLOSE="b",rn.ERROR="c",rn.MESSAGE="d",tt.prototype.listen=tt.prototype.K,il=Jn,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,Y0=vt}).apply(typeof rc<"u"?rc:typeof self<"u"?self:typeof window<"u"?window:{});const Dy="@firebase/firestore",Vy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Lf("@firebase/firestore");function zo(){return Ji.logLevel}function pe(r,...e){if(Ji.logLevel<=We.DEBUG){const t=e.map(Xf);Ji.debug(`Firestore (${fa}): ${r}`,...t)}}function Es(r,...e){if(Ji.logLevel<=We.ERROR){const t=e.map(Xf);Ji.error(`Firestore (${fa}): ${r}`,...t)}}function pi(r,...e){if(Ji.logLevel<=We.WARN){const t=e.map(Xf);Ji.warn(`Firestore (${fa}): ${r}`,...t)}}function Xf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,t_(r,s,t)}function t_(r,e,t){let s=`FIRESTORE (${fa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Es(s),new Error(s)}function nt(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||t_(e,o,s)}function Fe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Ts{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}}class pC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mC{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ci,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},f=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ci)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string",31837,{l:s}),new n_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class gC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new gC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const s=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Oy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=_C(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function $e(r,e){return r<e?-1:r>e?1:0}function pf(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return $e(s,o);{const l=r_(),d=wC(l.encode(Ly(r,t)),l.encode(Ly(e,t)));return d!==0?d:$e(s,o)}}t+=s>65535?2:1}return $e(r.length,e.length)}function Ly(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function wC(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return $e(r[t],e[t]);return $e(r.length,e.length)}function ea(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="__name__";class zr{constructor(e,t,s){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&De(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=zr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return $e(e.length,t.length)}static compareSegments(e,t){const s=zr.isNumericId(e),o=zr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?zr.extractNumericId(e).compare(zr.extractNumericId(t)):pf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ui.fromString(e.substring(4,e.length-2))}}class ht extends zr{construct(e,t,s){return new ht(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new ht(t)}static emptyPath(){return new ht([])}}const EC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends zr{construct(e,t,s){return new tn(e,t,s)}static isValidIdentifier(e){return EC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jy}static keyField(){return new tn([jy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ce(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(d=!d,o++):f!=="."||d?(s+=f,o++):(l(),o++)}if(l(),d)throw new ce(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(ht.fromString(e))}static fromName(e){return new Re(ht.fromString(e).popFirst(5))}static empty(){return new Re(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(r,e,t){if(!t)throw new ce(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function IC(r,e,t,s){if(e===!0&&s===!0)throw new ce(Q.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function My(r){if(!Re.isDocumentKey(r))throw new ce(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Fy(r){if(Re.isDocumentKey(r))throw new ce(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function i_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Wc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":De(12329,{type:typeof r})}function Br(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wc(r);throw new ce(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ll(r,e){if(!i_(r))throw new ce(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(o&&typeof d!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ce(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=-62135596800,zy=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*zy);return new mt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Uy)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zy}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ll(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Uy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Lt("string",mt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new mt(0,0))}static max(){return new Me(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=-1;function TC(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Me.fromTimestamp(s===1e9?new mt(t+1,0):new mt(t,s));return new mi(o,Re.empty(),e)}function xC(r){return new mi(r.readTime,r.key,Sl)}class mi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new mi(Me.min(),Re.empty(),Sl)}static max(){return new mi(Me.max(),Re.empty(),Sl)}}function SC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(r.documentKey,e.documentKey),t!==0?t:$e(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pa(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==CC)throw r;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,s)=>{t(e)})}static reject(e){return new Y((t,s)=>{s(e)})}static waitFor(e){return new Y((t,s)=>{let o=0,l=0,d=!1;e.forEach(f=>{++o,f.next(()=>{++l,d&&l===o&&t()},p=>s(p))}),d=!0,l===o&&t()})}static or(e){let t=Y.resolve(!1);for(const s of e)t=t.next(o=>o?Y.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new Y((s,o)=>{const l=e.length,d=new Array(l);let f=0;for(let p=0;p<l;p++){const v=p;t(e[v]).next(E=>{d[v]=E,++f,f===l&&s(d)},E=>o(E))}})}static doWhile(e,t){return new Y((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function RC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ma(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}qc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=-1;function Gc(r){return r==null}function Rc(r){return r===0&&1/r==-1/0}function PC(r){return typeof r=="number"&&Number.isInteger(r)&&!Rc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="";function bC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=By(e)),e=kC(r.get(t),e);return By(e)}function kC(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case o_:t+="";break;default:t+=l}}return t}function By(r){return r+o_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ei(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function a_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sc(this.root,e,this.comparator,!0)}}class sc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??en.RED,this.left=o??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new en(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hy(this.data.getIterator())}getIteratorFrom(e){return new Hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class Hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new zt(tn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new l_("Invalid base64 string: "+l):l}}(e);return new nn(t)}static fromUint8Array(e){const t=function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const NC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(r){if(nt(!!r,39018),typeof r=="string"){let e=0;const t=NC.exec(r);if(nt(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Rt(r.seconds),nanos:Rt(r.nanos)}}function Rt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function yi(r){return typeof r=="string"?nn.fromBase64String(r):nn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="server_timestamp",c_="__type__",d_="__previous_value__",h_="__local_write_time__";function tp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[c_])===null||t===void 0?void 0:t.stringValue)===u_}function Kc(r){const e=r.mapValue.fields[d_];return tp(e)?Kc(e):e}function Cl(r){const e=gi(r.mapValue.fields[h_].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t,s,o,l,d,f,p,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=E}}const Pc="(default)";class Al{constructor(e,t){this.projectId=e,this.database=t||Pc}static empty(){return new Al("","")}get isDefaultDatabase(){return this.database===Pc}isEqual(e){return e instanceof Al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="__type__",VC="__max__",ic={mapValue:{}},p_="__vector__",bc="value";function vi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?tp(r)?4:LC(r)?9007199254740991:OC(r)?10:11:De(28295,{value:r})}function Kr(r,e){if(r===e)return!0;const t=vi(r);if(t!==vi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Cl(r).isEqual(Cl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=gi(o.timestampValue),f=gi(l.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return yi(o.bytesValue).isEqual(yi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return Rt(o.geoPointValue.latitude)===Rt(l.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Rt(o.integerValue)===Rt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=Rt(o.doubleValue),f=Rt(l.doubleValue);return d===f?Rc(d)===Rc(f):isNaN(d)&&isNaN(f)}return!1}(r,e);case 9:return ea(r.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return function(o,l){const d=o.mapValue.fields||{},f=l.mapValue.fields||{};if($y(d)!==$y(f))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(f[p]===void 0||!Kr(d[p],f[p])))return!1;return!0}(r,e);default:return De(52216,{left:r})}}function Rl(r,e){return(r.values||[]).find(t=>Kr(t,e))!==void 0}function ta(r,e){if(r===e)return 0;const t=vi(r),s=vi(e);if(t!==s)return $e(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(r.booleanValue,e.booleanValue);case 2:return function(l,d){const f=Rt(l.integerValue||l.doubleValue),p=Rt(d.integerValue||d.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(r,e);case 3:return Wy(r.timestampValue,e.timestampValue);case 4:return Wy(Cl(r),Cl(e));case 5:return pf(r.stringValue,e.stringValue);case 6:return function(l,d){const f=yi(l),p=yi(d);return f.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,d){const f=l.split("/"),p=d.split("/");for(let v=0;v<f.length&&v<p.length;v++){const E=$e(f[v],p[v]);if(E!==0)return E}return $e(f.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,d){const f=$e(Rt(l.latitude),Rt(d.latitude));return f!==0?f:$e(Rt(l.longitude),Rt(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return qy(r.arrayValue,e.arrayValue);case 10:return function(l,d){var f,p,v,E;const I=l.fields||{},x=d.fields||{},j=(f=I[bc])===null||f===void 0?void 0:f.arrayValue,H=(p=x[bc])===null||p===void 0?void 0:p.arrayValue,$=$e(((v=j==null?void 0:j.values)===null||v===void 0?void 0:v.length)||0,((E=H==null?void 0:H.values)===null||E===void 0?void 0:E.length)||0);return $!==0?$:qy(j,H)}(r.mapValue,e.mapValue);case 11:return function(l,d){if(l===ic.mapValue&&d===ic.mapValue)return 0;if(l===ic.mapValue)return 1;if(d===ic.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),v=d.fields||{},E=Object.keys(v);p.sort(),E.sort();for(let I=0;I<p.length&&I<E.length;++I){const x=pf(p[I],E[I]);if(x!==0)return x;const j=ta(f[p[I]],v[E[I]]);if(j!==0)return j}return $e(p.length,E.length)}(r.mapValue,e.mapValue);default:throw De(23264,{le:t})}}function Wy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return $e(r,e);const t=gi(r),s=gi(e),o=$e(t.seconds,s.seconds);return o!==0?o:$e(t.nanos,s.nanos)}function qy(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=ta(t[o],s[o]);if(l)return l}return $e(t.length,s.length)}function na(r){return mf(r)}function mf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=gi(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return yi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Re.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=mf(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of s)l?l=!1:o+=",",o+=`${d}:${mf(t.fields[d])}`;return o+"}"}(r.mapValue):De(61005,{value:r})}function fc(r){switch(vi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kc(r);return e?16+fc(e):16;case 5:return 2*r.stringValue.length;case 6:return yi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+fc(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Ei(s.fields,(l,d)=>{o+=l.length+fc(d)}),o}(r.mapValue);default:throw De(13486,{value:r})}}function Gy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function gf(r){return!!r&&"integerValue"in r}function np(r){return!!r&&"arrayValue"in r}function Ky(r){return!!r&&"nullValue"in r}function Qy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function pc(r){return!!r&&"mapValue"in r}function OC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[f_])===null||t===void 0?void 0:t.stringValue)===p_}function gl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ei(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=gl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function LC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===VC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!pc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gl(t)}setAll(e){let t=tn.emptyPath(),s={},o=[];e.forEach((d,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=f.popLast()}d?s[f.lastSegment()]=gl(d):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());pc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];pc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ei(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new Dn(gl(this.value))}}function m_(r){const e=[];return Ei(r.fields,(t,s)=>{const o=new tn([t]);if(pc(s)){const l=m_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,s,o,l,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=d,this.documentState=f}static newInvalidDocument(e){return new dn(e,0,Me.min(),Me.min(),Me.min(),Dn.empty(),0)}static newFoundDocument(e,t,s,o){return new dn(e,1,t,Me.min(),s,o,0)}static newNoDocument(e,t){return new dn(e,2,t,Me.min(),Me.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Me.min(),Me.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t){this.position=e,this.inclusive=t}}function Yy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?s=Re.comparator(Re.fromName(d.referenceValue),t.key):s=ta(d,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Jy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Kr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,t="asc"){this.field=e,this.dir=t}}function jC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{}class Ot extends g_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new FC(e,t,s):t==="array-contains"?new BC(e,s):t==="in"?new $C(e,s):t==="not-in"?new HC(e,s):t==="array-contains-any"?new WC(e,s):new Ot(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new UC(e,s):new zC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ta(t,this.value)):t!==null&&vi(this.value)===vi(t)&&this.matchesComparison(ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends g_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ar(e,t)}matches(e){return y_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function y_(r){return r.op==="and"}function v_(r){return MC(r)&&y_(r)}function MC(r){for(const e of r.filters)if(e instanceof Ar)return!1;return!0}function yf(r){if(r instanceof Ot)return r.field.canonicalString()+r.op.toString()+na(r.value);if(v_(r))return r.filters.map(e=>yf(e)).join(",");{const e=r.filters.map(t=>yf(t)).join(",");return`${r.op}(${e})`}}function __(r,e){return r instanceof Ot?function(s,o){return o instanceof Ot&&s.op===o.op&&s.field.isEqual(o.field)&&Kr(s.value,o.value)}(r,e):r instanceof Ar?function(s,o){return o instanceof Ar&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,d,f)=>l&&__(d,o.filters[f]),!0):!1}(r,e):void De(19439)}function w_(r){return r instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${na(t.value)}`}(r):r instanceof Ar?function(t){return t.op.toString()+" {"+t.getFilters().map(w_).join(" ,")+"}"}(r):"Filter"}class FC extends Ot{constructor(e,t,s){super(e,t,s),this.key=Re.fromName(s.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class UC extends Ot{constructor(e,t){super(e,"in",t),this.keys=E_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zC extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=E_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function E_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Re.fromName(s.referenceValue))}class BC extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return np(t)&&Rl(t.arrayValue,this.value)}}class $C extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rl(this.value.arrayValue,t)}}class HC extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rl(this.value.arrayValue,t)}}class WC extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!np(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Rl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,t=null,s=[],o=[],l=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=d,this.endAt=f,this.Pe=null}}function Xy(r,e=null,t=[],s=[],o=null,l=null,d=null){return new qC(r,e,t,s,o,l,d)}function rp(r){const e=Fe(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>yf(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),Gc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>na(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>na(s)).join(",")),e.Pe=t}return e.Pe}function sp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!jC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!__(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Jy(r.startAt,e.startAt)&&Jy(r.endAt,e.endAt)}function vf(r){return Re.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t=null,s=[],o=[],l=null,d="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function GC(r,e,t,s,o,l,d,f){return new ga(r,e,t,s,o,l,d,f)}function Qc(r){return new ga(r)}function Zy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function I_(r){return r.collectionGroup!==null}function yl(r){const e=Fe(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new zt(tn.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(v=>{v.isInequality()&&(f=f.add(v.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Pl(l,s))}),t.has(tn.keyField().canonicalString())||e.Te.push(new Pl(tn.keyField(),s))}return e.Te}function $r(r){const e=Fe(r);return e.Ie||(e.Ie=KC(e,yl(r))),e.Ie}function KC(r,e){if(r.limitType==="F")return Xy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Pl(o.field,l)});const t=r.endAt?new kc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new kc(r.startAt.position,r.startAt.inclusive):null;return Xy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function _f(r,e){const t=r.filters.concat([e]);return new ga(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function wf(r,e,t){return new ga(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Yc(r,e){return sp($r(r),$r(e))&&r.limitType===e.limitType}function T_(r){return`${rp($r(r))}|lt:${r.limitType}`}function Bo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>w_(o)).join(", ")}]`),Gc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>na(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>na(o)).join(",")),`Target(${s})`}($r(r))}; limitType=${r.limitType})`}function Jc(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Re.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of yl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(d,f,p){const v=Yy(d,f,p);return d.inclusive?v<=0:v<0}(s.startAt,yl(s),o)||s.endAt&&!function(d,f,p){const v=Yy(d,f,p);return d.inclusive?v>=0:v>0}(s.endAt,yl(s),o))}(r,e)}function QC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function x_(r){return(e,t)=>{let s=!1;for(const o of yl(r)){const l=YC(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function YC(r,e,t){const s=r.field.isKeyField()?Re.comparator(e.key,t.key):function(l,d,f){const p=d.data.field(l),v=f.data.field(l);return p!==null&&v!==null?ta(p,v):De(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return De(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return a_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new xt(Re.comparator);function Is(){return JC}const S_=new xt(Re.comparator);function ol(...r){let e=S_;for(const t of r)e=e.insert(t.key,t);return e}function C_(r){let e=S_;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Ki(){return vl()}function A_(){return vl()}function vl(){return new no(r=>r.toString(),(r,e)=>r.isEqual(e))}const XC=new xt(Re.comparator),ZC=new zt(Re.comparator);function qe(...r){let e=ZC;for(const t of r)e=e.add(t);return e}const eA=new zt($e);function tA(){return eA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(e)?"-0":e}}function R_(r){return{integerValue:""+r}}function nA(r,e){return PC(e)?R_(e):ip(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this._=void 0}}function rA(r,e,t){return r instanceof Nc?function(o,l){const d={fields:{[c_]:{stringValue:u_},[h_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&tp(l)&&(l=Kc(l)),l&&(d.fields[d_]=l),{mapValue:d}}(t,e):r instanceof ra?b_(r,e):r instanceof bl?k_(r,e):function(o,l){const d=P_(o,l),f=ev(d)+ev(o.Ee);return gf(d)&&gf(o.Ee)?R_(f):ip(o.serializer,f)}(r,e)}function sA(r,e,t){return r instanceof ra?b_(r,e):r instanceof bl?k_(r,e):t}function P_(r,e){return r instanceof Dc?function(s){return gf(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Nc extends Xc{}class ra extends Xc{constructor(e){super(),this.elements=e}}function b_(r,e){const t=N_(e);for(const s of r.elements)t.some(o=>Kr(o,s))||t.push(s);return{arrayValue:{values:t}}}class bl extends Xc{constructor(e){super(),this.elements=e}}function k_(r,e){let t=N_(e);for(const s of r.elements)t=t.filter(o=>!Kr(o,s));return{arrayValue:{values:t}}}class Dc extends Xc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function ev(r){return Rt(r.integerValue||r.doubleValue)}function N_(r){return np(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t){this.field=e,this.transform=t}}function oA(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof ra&&o instanceof ra||s instanceof bl&&o instanceof bl?ea(s.elements,o.elements,Kr):s instanceof Dc&&o instanceof Dc?Kr(s.Ee,o.Ee):s instanceof Nc&&o instanceof Nc}(r.transform,e.transform)}class aA{constructor(e,t){this.version=e,this.transformResults=t}}class Hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hr}static exists(e){return new Hr(void 0,e)}static updateTime(e){return new Hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Zc{}function D_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new O_(r.key,Hr.none()):new jl(r.key,r.data,Hr.none());{const t=r.data,s=Dn.empty();let o=new zt(tn.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?s.delete(l):s.set(l,d),o=o.add(l)}return new Ii(r.key,s,new Gn(o.toArray()),Hr.none())}}function lA(r,e,t){r instanceof jl?function(o,l,d){const f=o.value.clone(),p=nv(o.fieldTransforms,l,d.transformResults);f.setAll(p),l.convertToFoundDocument(d.version,f).setHasCommittedMutations()}(r,e,t):r instanceof Ii?function(o,l,d){if(!mc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const f=nv(o.fieldTransforms,l,d.transformResults),p=l.data;p.setAll(V_(o)),p.setAll(f),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(r,e,t):function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function _l(r,e,t,s){return r instanceof jl?function(l,d,f,p){if(!mc(l.precondition,d))return f;const v=l.value.clone(),E=rv(l.fieldTransforms,p,d);return v.setAll(E),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ii?function(l,d,f,p){if(!mc(l.precondition,d))return f;const v=rv(l.fieldTransforms,p,d),E=d.data;return E.setAll(V_(l)),E.setAll(v),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(I=>I.field))}(r,e,t,s):function(l,d,f){return mc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f}(r,e,t)}function uA(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=P_(s.transform,o||null);l!=null&&(t===null&&(t=Dn.empty()),t.set(s.field,l))}return t||null}function tv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ea(s,o,(l,d)=>oA(l,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class jl extends Zc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ii extends Zc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function V_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function nv(r,e,t){const s=new Map;nt(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,f=e.data.field(l.field);s.set(l.field,sA(d,f,t[o]))}return s}function rv(r,e,t){const s=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);s.set(o.field,rA(l,d,e))}return s}class O_ extends Zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cA extends Zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&lA(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=_l(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=_l(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=A_();return this.mutations.forEach(o=>{const l=e.get(o.key),d=l.overlayedDocument;let f=this.applyToLocalView(d,l.mutatedFields);f=t.has(o.key)?null:f;const p=D_(d,f);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(Me.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qe())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,(t,s)=>tv(t,s))&&ea(this.baseMutations,e.baseMutations,(t,s)=>tv(t,s))}}class op{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){nt(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=function(){return XC}();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,s[d].version);return new op(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Je;function pA(r){switch(r){case Q.OK:return De(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return De(15467,{code:r})}}function L_(r){if(r===void 0)return Es("GRPC error has no .code"),Q.UNKNOWN;switch(r){case Dt.OK:return Q.OK;case Dt.CANCELLED:return Q.CANCELLED;case Dt.UNKNOWN:return Q.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return Q.INTERNAL;case Dt.UNAVAILABLE:return Q.UNAVAILABLE;case Dt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Dt.NOT_FOUND:return Q.NOT_FOUND;case Dt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Dt.ABORTED:return Q.ABORTED;case Dt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Dt.DATA_LOSS:return Q.DATA_LOSS;default:return De(39323,{code:r})}}(Je=Dt||(Dt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new ui([4294967295,4294967295],0);function sv(r){const e=r_().encode(r),t=new Q0;return t.update(e),new Uint8Array(t.digest())}function iv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ui([t,s],0),new ui([o,l],0)]}class ap{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new al(`Invalid padding: ${t}`);if(s<0)throw new al(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new al(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new al(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ui.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(ui.fromNumber(s)));return o.compare(mA)===1&&(o=new ui([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=sv(e),[s,o]=iv(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(s,o,l);if(!this.ye(d))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new ap(l,o,t);return s.forEach(f=>d.insert(f)),d}insert(e){if(this.fe===0)return;const t=sv(e),[s,o]=iv(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(s,o,l);this.we(d)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ed(Me.min(),o,new xt($e),Is(),qe())}}class Ml{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ml(s,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class j_{constructor(e,t){this.targetId=e,this.De=t}}class M_{constructor(e,t,s=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class ov{constructor(){this.ve=0,this.Ce=av(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=qe(),t=qe(),s=qe();return this.Ce.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:De(38017,{changeType:l})}}),new Ml(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=av()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class gA{constructor(e){this.We=e,this.Ge=new Map,this.ze=Is(),this.je=oc(),this.Je=oc(),this.He=new xt($e)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:De(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((s,o)=>{this.nt(o)&&t(o)})}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const l=o.target;if(vf(l))if(s===0){const d=new Re(l.path);this.Xe(t,d,dn.newNoDocument(d,Me.min()))}else nt(s===1,20013,{expectedCount:s});else{const d=this.ot(t);if(d!==s){const f=this._t(e),p=f?this.ut(f,e,d):1;if(p!==0){this.rt(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let d,f;try{d=yi(s).toUint8Array()}catch(p){if(p instanceof l_)return pi("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new ap(d,o,l)}catch(p){return pi(p instanceof al?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.fe===0?null:f}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const d=this.We.lt(),f=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)}),o}Pt(e){const t=new Map;this.Ge.forEach((l,d)=>{const f=this.st(d);if(f){if(l.current&&vf(f.target)){const p=new Re(f.target.path);this.Tt(p).has(d)||this.It(d,p)||this.Xe(d,p,dn.newNoDocument(p,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}});let s=qe();this.Je.forEach((l,d)=>{let f=!0;d.forEachWhile(p=>{const v=this.st(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.ze.forEach((l,d)=>d.setReadTime(e));const o=new ed(e,t,this.He,this.ze,s);return this.ze=Is(),this.je=oc(),this.Je=oc(),this.He=new xt($e),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new ov,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new zt($e),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new zt($e),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ov),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function oc(){return new xt(Re.comparator)}function av(){return new xt(Re.comparator)}const yA={asc:"ASCENDING",desc:"DESCENDING"},vA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_A={and:"AND",or:"OR"};class wA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ef(r,e){return r.useProto3Json||Gc(e)?e:{value:e}}function Vc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function EA(r,e){return Vc(r,e.toTimestamp())}function Wr(r){return nt(!!r,49232),Me.fromTimestamp(function(t){const s=gi(t);return new mt(s.seconds,s.nanos)}(r))}function lp(r,e){return If(r,e).canonicalString()}function If(r,e){const t=function(o){return new ht(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function U_(r){const e=ht.fromString(r);return nt(W_(e),10190,{key:e.toString()}),e}function Tf(r,e){return lp(r.databaseId,e.path)}function Yh(r,e){const t=U_(e);if(t.get(1)!==r.databaseId.projectId)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Re(B_(t))}function z_(r,e){return lp(r.databaseId,e)}function IA(r){const e=U_(r);return e.length===4?ht.emptyPath():B_(e)}function xf(r){return new ht(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function B_(r){return nt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function lv(r,e,t){return{name:Tf(r,e),fields:t.value.mapValue.fields}}function TA(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:De(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,E){return v.useProto3Json?(nt(E===void 0||typeof E=="string",58123),nn.fromBase64String(E||"")):(nt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),nn.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&function(v){const E=v.code===void 0?Q.UNKNOWN:L_(v.code);return new ce(E,v.message||"")}(d);t=new M_(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Yh(r,s.document.name),l=Wr(s.document.updateTime),d=s.document.createTime?Wr(s.document.createTime):Me.min(),f=new Dn({mapValue:{fields:s.document.fields}}),p=dn.newFoundDocument(o,l,d,f),v=s.targetIds||[],E=s.removedTargetIds||[];t=new gc(v,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Yh(r,s.document),l=s.readTime?Wr(s.readTime):Me.min(),d=dn.newNoDocument(o,l),f=s.removedTargetIds||[];t=new gc([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Yh(r,s.document),l=s.removedTargetIds||[];t=new gc([],l,o,null)}else{if(!("filter"in e))return De(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,d=new fA(o,l),f=s.targetId;t=new j_(f,d)}}return t}function xA(r,e){let t;if(e instanceof jl)t={update:lv(r,e.key,e.value)};else if(e instanceof O_)t={delete:Tf(r,e.key)};else if(e instanceof Ii)t={update:lv(r,e.key,e.data),updateMask:DA(e.fieldMask)};else{if(!(e instanceof cA))return De(16599,{Rt:e.type});t={verify:Tf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,d){const f=d.transform;if(f instanceof Nc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ra)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof bl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Dc)return{fieldPath:d.field.canonicalString(),increment:f.Ee};throw De(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:EA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:De(27497)}(r,e.precondition)),t}function SA(r,e){return r&&r.length>0?(nt(e!==void 0,14353),r.map(t=>function(o,l){let d=o.updateTime?Wr(o.updateTime):Wr(l);return d.isEqual(Me.min())&&(d=Wr(l)),new aA(d,o.transformResults||[])}(t,e))):[]}function CA(r,e){return{documents:[z_(r,e.path)]}}function AA(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=z_(r,o);const l=function(v){if(v.length!==0)return H_(Ar.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const d=function(v){if(v.length!==0)return v.map(E=>function(x){return{field:$o(x.field),direction:bA(x.dir)}}(E))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Ef(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{Vt:t,parent:o}}function RA(r){let e=IA(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){nt(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(I){const x=$_(I);return x instanceof Ar&&v_(x)?x.getFilters():[x]}(t.where));let d=[];t.orderBy&&(d=function(I){return I.map(x=>function(H){return new Pl(Ho(H.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(H.direction))}(x))}(t.orderBy));let f=null;t.limit&&(f=function(I){let x;return x=typeof I=="object"?I.value:I,Gc(x)?null:x}(t.limit));let p=null;t.startAt&&(p=function(I){const x=!!I.before,j=I.values||[];return new kc(j,x)}(t.startAt));let v=null;return t.endAt&&(v=function(I){const x=!I.before,j=I.values||[];return new kc(j,x)}(t.endAt)),GC(e,o,d,l,f,"F",p,v)}function PA(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Ho(t.unaryFilter.field);return Ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ho(t.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ho(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ho(t.unaryFilter.field);return Ot.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}}(r):r.fieldFilter!==void 0?function(t){return Ot.create(Ho(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Ar.create(t.compositeFilter.filters.map(s=>$_(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return De(1026)}}(t.compositeFilter.op))}(r):De(30097,{filter:r})}function bA(r){return yA[r]}function kA(r){return vA[r]}function NA(r){return _A[r]}function $o(r){return{fieldPath:r.canonicalString()}}function Ho(r){return tn.fromServerFormat(r.fieldPath)}function H_(r){return r instanceof Ot?function(t){if(t.op==="=="){if(Qy(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NAN"}};if(Ky(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Qy(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NAN"}};if(Ky(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(t.field),op:kA(t.op),value:t.value}}}(r):r instanceof Ar?function(t){const s=t.getFilters().map(o=>H_(o));return s.length===1?s[0]:{compositeFilter:{op:NA(t.op),filters:s}}}(r):De(54877,{filter:r})}function DA(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function W_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t,s,o,l=Me.min(),d=Me.min(),f=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.gt=e}}function OA(r){const e=RA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?wf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this.Dn=new jA}addToCollectionParentIndex(e,t){return this.Dn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(mi.min())}updateCollectionGroup(e,t,s){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class jA{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new zt(ht.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q_=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(q_,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new sa(0)}static ur(){return new sa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="LruGarbageCollector",MA=1048576;function dv([r,e],[t,s]){const o=$e(r,t);return o===0?$e(e,s):o}class FA{constructor(e){this.Tr=e,this.buffer=new zt(dv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();dv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UA{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){pe(cv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ma(t)?pe(cv,"Ignoring IndexedDB error during garbage collection: ",t):await pa(t)}await this.Rr(3e5)})}}class zA{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(qc.ue);const s=new FA(t);return this.Vr.forEachTarget(e,o=>s.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>s.Er(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(uv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uv):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,l,d,f,p,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,d=Date.now(),this.nthSequenceNumber(e,o))).next(I=>(s=I,f=Date.now(),this.removeTargets(e,s,t))).next(I=>(l=I,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(I=>(v=Date.now(),zo()<=We.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(f-d)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${I} documents in `+(v-p)+`ms
Total Duration: ${v-E}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I})))}}function BA(r,e){return new zA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.changes=new no(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Y.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&_l(s.mutation,o,Gn.empty(),mt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,qe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=qe()){const o=Ki();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let d=ol();return l.forEach((f,p)=>{d=d.insert(f,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const s=Ki();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,qe()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((d,f)=>{t.set(d,f)})})}computeViews(e,t,s,o){let l=Is();const d=vl(),f=function(){return vl()}();return t.forEach((p,v)=>{const E=s.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Ii)?l=l.insert(v.key,v):E!==void 0?(d.set(v.key,E.mutation.getFieldMask()),_l(E.mutation,v,E.mutation.getFieldMask(),mt.now())):d.set(v.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((v,E)=>d.set(v,E)),t.forEach((v,E)=>{var I;return f.set(v,new HA(E,(I=d.get(v))!==null&&I!==void 0?I:null))}),f))}recalculateAndSaveOverlays(e,t){const s=vl();let o=new xt((d,f)=>d-f),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const f of d)f.keys().forEach(p=>{const v=t.get(p);if(v===null)return;let E=s.get(p)||Gn.empty();E=f.applyToLocalView(v,E),s.set(p,E);const I=(o.get(f.batchId)||qe()).add(p);o=o.insert(f.batchId,I)})}).next(()=>{const d=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),v=p.key,E=p.value,I=A_();E.forEach(x=>{if(!l.has(x)){const j=D_(t.get(x),s.get(x));j!==null&&I.set(x,j),l=l.add(x)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,I))}return Y.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(d){return Re.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):I_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):Y.resolve(Ki());let f=Sl,p=l;return d.next(v=>Y.forEach(v,(E,I)=>(f<I.largestBatchId&&(f=I.largestBatchId),l.get(E)?Y.resolve():this.remoteDocumentCache.getEntry(e,E).next(x=>{p=p.insert(E,x)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,p,v,qe())).next(E=>({batchId:f,changes:C_(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next(s=>{let o=ol();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let d=ol();return this.indexManager.getCollectionParents(e,l).next(f=>Y.forEach(f,p=>{const v=function(I,x){return new ga(x,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next(E=>{E.forEach((I,x)=>{d=d.insert(I,x)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(d=>{l.forEach((p,v)=>{const E=v.getKey();d.get(E)===null&&(d=d.insert(E,dn.newInvalidDocument(E)))});let f=ol();return d.forEach((p,v)=>{const E=l.get(p);E!==void 0&&_l(E.mutation,v,Gn.empty(),mt.now()),Jc(t,v)&&(f=f.insert(p,v))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Y.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Wr(o.createTime)}}(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(o){return{name:o.name,query:OA(o.bundledQuery),readTime:Wr(o.readTime)}}(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.overlays=new xt(Re.comparator),this.kr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ki();return Y.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.wt(e,t,l)}),Y.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(s)),Y.resolve()}getOverlaysForCollection(e,t,s){const o=Ki(),l=t.length+1,d=new Re(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const p=f.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return Y.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new xt((v,E)=>v-E);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let E=l.get(v.largestBatchId);E===null&&(E=Ki(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const f=Ki(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,E)=>f.set(v,E)),!(f.size()>=o)););return Y.resolve(f)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new hA(t,s));let l=this.kr.get(t);l===void 0&&(l=qe(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.qr=new zt(qt.Qr),this.$r=new zt(qt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new qt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Wr(new qt(e,t))}Gr(e,t){e.forEach(s=>this.removeReference(s,t))}zr(e){const t=new Re(new ht([])),s=new qt(t,e),o=new qt(t,e+1),l=[];return this.$r.forEachInRange([s,o],d=>{this.Wr(d),l.push(d.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Re(new ht([])),s=new qt(t,e),o=new qt(t,e+1);let l=qe();return this.$r.forEachInRange([s,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new qt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class qt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Re.comparator(e.key,t.key)||$e(e.Hr,t.Hr)}static Ur(e,t){return $e(e.Hr,t.Hr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new zt(qt.Qr)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new dA(l,t,s,o);this.mutationQueue.push(d);for(const f of o)this.Yr=this.Yr.add(new qt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Y.resolve(d)}lookupMutationBatch(e,t){return Y.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return Y.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?ep:this.er-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new qt(t,0),o=new qt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,o],d=>{const f=this.Zr(d.Hr);l.push(f)}),Y.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new zt($e);return t.forEach(o=>{const l=new qt(o,0),d=new qt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],f=>{s=s.add(f.Hr)})}),Y.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Re.isDocumentKey(l)||(l=l.child(""));const d=new qt(new Re(l),0);let f=new zt($e);return this.Yr.forEachWhile(p=>{const v=p.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(f=f.add(p.Hr)),!0)},d),Y.resolve(this.ei(f))}ei(e){const t=[];return e.forEach(s=>{const o=this.Zr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){nt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return Y.forEach(t.mutations,o=>{const l=new qt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,t){const s=new qt(t,0),o=this.Yr.firstAfterOrEqual(s);return Y.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.ni=e,this.docs=function(){return new xt(Re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,d=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Y.resolve(s?s.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let s=Is();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():dn.newInvalidDocument(o))}),Y.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Is();const d=t.path,f=new Re(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:v,value:{document:E}}=p.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||SC(xC(E),s)<=0||(o.has(E.key)||Jc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Y.resolve(l)}getAllFromCollectionGroup(e,t,s,o){De(9500)}ri(e,t){return Y.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new JA(this)}getSize(e){return Y.resolve(this.size)}}class JA extends $A{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)}),Y.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.persistence=e,this.ii=new no(t=>rp(t),sp),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.si=0,this.oi=new up,this.targetCount=0,this._i=sa.ar()}forEachTarget(e,t){return this.ii.forEach((s,o)=>t(o)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),Y.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new sa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.hr(t),Y.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ii.forEach((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),Y.waitFor(l).next(()=>o)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return Y.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),Y.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),Y.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return Y.resolve(s)}containsKey(e,t){return Y.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,t){this.ai={},this.overlays={},this.ui=new qc(0),this.ci=!1,this.ci=!0,this.li=new KA,this.referenceDelegate=e(this),this.hi=new XA(this),this.indexManager=new LA,this.remoteDocumentCache=function(o){return new YA(o)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new VA(t),this.Ti=new qA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new QA(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){pe("MemoryPersistence","Starting transaction:",e);const o=new ZA(this.ui.next());return this.referenceDelegate.Ii(),s(o).next(l=>this.referenceDelegate.di(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ei(e,t){return Y.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,t)))}}class ZA extends AC{constructor(e){super(),this.currentSequenceNumber=e}}class cp{constructor(e){this.persistence=e,this.Ai=new up,this.Ri=null}static Vi(e){return new cp(e)}get mi(){if(this.Ri)return this.Ri;throw De(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),Y.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(o=>this.mi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.mi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.mi,s=>{const o=Re.fromPath(s);return this.fi(e,o).next(l=>{l||t.removeEntry(o,Me.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Y.or([()=>Y.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Oc{constructor(e,t){this.persistence=e,this.gi=new no(s=>bC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=BA(this,t)}static Vi(e,t){return new Oc(e,t)}Ii(){}di(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}yr(e){let t=0;return this.gr(e,s=>{t++}).next(()=>t)}gr(e,t){return Y.forEach(this.gi,(s,o)=>this.Sr(e,s,o).next(l=>l?Y.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,d=>this.Sr(e,d,t).next(f=>{f||(s++,l.removeEntry(d,Me.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Y.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=fc(e.data.value)),t}Sr(e,t,s){return Y.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return Y.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=qe(),o=qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new dp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return dT()?8:RC(hn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ps(e,t).next(d=>{l.result=d}).next(()=>{if(!l.result)return this.ys(e,t,o,s).next(d=>{l.result=d})}).next(()=>{if(l.result)return;const d=new eR;return this.ws(e,t,d).next(f=>{if(l.result=f,this.Rs)return this.Ss(e,t,d,f.size)})}).next(()=>l.result)}Ss(e,t,s,o){return s.documentReadCount<this.Vs?(zo()<=We.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Y.resolve()):(zo()<=We.DEBUG&&pe("QueryEngine","Query:",Bo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(zo()<=We.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(t))):Y.resolve())}ps(e,t){if(Zy(t))return Y.resolve(null);let s=$r(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=wf(t,null,"F"),s=$r(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const d=qe(...l);return this.gs.getDocuments(e,d).next(f=>this.indexManager.getMinOffset(e,s).next(p=>{const v=this.bs(t,f);return this.Ds(t,v,d,p.readTime)?this.ps(e,wf(t,null,"F")):this.vs(e,v,t,p)}))})))}ys(e,t,s,o){return Zy(t)||o.isEqual(Me.min())?Y.resolve(null):this.gs.getDocuments(e,s).next(l=>{const d=this.bs(t,l);return this.Ds(t,d,s,o)?Y.resolve(null):(zo()<=We.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Bo(t)),this.vs(e,d,t,TC(o,Sl)).next(f=>f))})}bs(e,t){let s=new zt(x_(e));return t.forEach((o,l)=>{Jc(e,l)&&(s=s.add(l))}),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,s){return zo()<=We.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Bo(t)),this.gs.getDocumentsMatchingQuery(e,t,mi.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(d=>{l=l.insert(d.key,d)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="LocalStore",nR=3e8;class rR{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new xt($e),this.Ms=new no(l=>rp(l),sp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WA(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function sR(r,e,t,s){return new rR(r,e,t,s)}async function K_(r,e){const t=Fe(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const d=[],f=[];let p=qe();for(const v of o){d.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}for(const v of l){f.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(s,p).next(v=>({Bs:v,removedBatchIds:d,addedBatchIds:f}))})})}function iR(r,e){const t=Fe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(f,p,v,E){const I=v.batch,x=I.keys();let j=Y.resolve();return x.forEach(H=>{j=j.next(()=>E.getEntry(p,H)).next($=>{const M=v.docVersions.get(H);nt(M!==null,48541),$.version.compareTo(M)<0&&(I.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),E.addEntry($)))})}),j.next(()=>f.mutationQueue.removeMutationBatch(p,I))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let p=qe();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(p=p.add(f.batch.mutations[v].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function Q_(r){const e=Fe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function oR(r,e){const t=Fe(r),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach((E,I)=>{const x=o.get(I);if(!x)return;f.push(t.hi.removeMatchingKeys(l,E.removedDocuments,I).next(()=>t.hi.addMatchingKeys(l,E.addedDocuments,I)));let j=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?j=j.withResumeToken(nn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):E.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(E.resumeToken,s)),o=o.insert(I,j),function($,M,ee){return $.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=nR?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0}(x,j,E)&&f.push(t.hi.updateTargetData(l,j))});let p=Is(),v=qe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),f.push(aR(l,d,e.documentUpdates).next(E=>{p=E.Ls,v=E.ks})),!s.isEqual(Me.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next(I=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(E)}return Y.waitFor(f).next(()=>d.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,v)).next(()=>p)}).then(l=>(t.Fs=o,l))}function aR(r,e,t){let s=qe(),o=qe();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let d=Is();return t.forEach((f,p)=>{const v=l.get(f);p.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Me.min())?(e.removeEntry(f,p.readTime),d=d.insert(f,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),d=d.insert(f,p)):pe(hp,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",p.version)}),{Ls:d,ks:o}})}function lR(r,e){const t=Fe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=ep),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function uR(r,e){const t=Fe(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.hi.getTargetData(s,e).next(l=>l?(o=l,Y.resolve(o)):t.hi.allocateTargetId(s).next(d=>(o=new si(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s})}async function Sf(r,e,t){const s=Fe(r),o=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!ma(d))throw d;pe(hp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function hv(r,e,t){const s=Fe(r);let o=Me.min(),l=qe();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,v,E){const I=Fe(p),x=I.Ms.get(E);return x!==void 0?Y.resolve(I.Fs.get(x)):I.hi.getTargetData(v,E)}(s,d,$r(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(d,f.targetId).next(p=>{l=p})}).next(()=>s.Cs.getDocumentsMatchingQuery(d,e,t?o:Me.min(),t?l:qe())).next(f=>(cR(s,QC(e),f),{documents:f,qs:l})))}function cR(r,e,t){let s=r.xs.get(e)||Me.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.xs.set(e,s)}class fv{constructor(){this.activeTargetIds=tA()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dR{constructor(){this.Fo=new fv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new fv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="ConnectivityMonitor";class mv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){pe(pv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){pe(pv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac=null;function Cf(){return ac===null?ac=function(){return 268435456+Math.round(2147483648*Math.random())}():ac++,"0x"+ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="RestConnection",fR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===Pc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const d=Cf(),f=this.Go(e,t.toUriEncodedString());pe(Jh,`Sending RPC '${e}' ${d}:`,f,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:v}=new URL(f),E=ua(v);return this.jo(e,f,p,s,E).then(I=>(pe(Jh,`Received RPC '${e}' ${d}: `,I),I),I=>{throw pi(Jh,`RPC '${e}' ${d} failed with error: `,I,"url: ",f,"request:",s),I})}Jo(e,t,s,o,l,d){return this.Wo(e,t,s,o,l)}zo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),s&&s.headers.forEach((o,l)=>e[l]=o)}Go(e,t){const s=fR[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class gR extends pR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,l){const d=Cf();return new Promise((f,p)=>{const v=new Y0;v.setWithCredentials(!0),v.listenOnce(J0.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case hc.NO_ERROR:const I=v.getResponseJson();pe(un,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),f(I);break;case hc.TIMEOUT:pe(un,`RPC '${e}' ${d} timed out`),p(new ce(Q.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:const x=v.getStatus();if(pe(un,`RPC '${e}' ${d} failed with status:`,x,"response text:",v.getResponseText()),x>0){let j=v.getResponseJson();Array.isArray(j)&&(j=j[0]);const H=j==null?void 0:j.error;if(H&&H.status&&H.message){const $=function(ee){const oe=ee.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(oe)>=0?oe:Q.UNKNOWN}(H.status);p(new ce($,H.message))}else p(new ce(Q.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new ce(Q.UNAVAILABLE,"Connection failed."));break;default:De(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{pe(un,`RPC '${e}' ${d} completed.`)}});const E=JSON.stringify(o);pe(un,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",E,s,15)})}P_(e,t,s){const o=Cf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=e_(),f=Z0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const E=l.join("");pe(un,`Creating RPC '${e}' stream ${o}: ${E}`,p);const I=d.createWebChannel(E,p);this.T_(I);let x=!1,j=!1;const H=new mR({Ho:M=>{j?pe(un,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(x||(pe(un,`Opening RPC '${e}' stream ${o} transport.`),I.open(),x=!0),pe(un,`RPC '${e}' stream ${o} sending:`,M),I.send(M))},Yo:()=>I.close()}),$=(M,ee,oe)=>{M.listen(ee,J=>{try{oe(J)}catch(Ie){setTimeout(()=>{throw Ie},0)}})};return $(I,il.EventType.OPEN,()=>{j||(pe(un,`RPC '${e}' stream ${o} transport opened.`),H.s_())}),$(I,il.EventType.CLOSE,()=>{j||(j=!0,pe(un,`RPC '${e}' stream ${o} transport closed`),H.__(),this.I_(I))}),$(I,il.EventType.ERROR,M=>{j||(j=!0,pi(un,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),H.__(new ce(Q.UNAVAILABLE,"The operation could not be completed")))}),$(I,il.EventType.MESSAGE,M=>{var ee;if(!j){const oe=M.data[0];nt(!!oe,16349);const J=oe,Ie=(J==null?void 0:J.error)||((ee=J[0])===null||ee===void 0?void 0:ee.error);if(Ie){pe(un,`RPC '${e}' stream ${o} received error:`,Ie);const _e=Ie.status;let we=function(S){const P=Dt[S];if(P!==void 0)return L_(P)}(_e),N=Ie.message;we===void 0&&(we=Q.INTERNAL,N="Unknown error status: "+_e+" with message "+Ie.message),j=!0,H.__(new ce(we,N)),I.close()}else pe(un,`RPC '${e}' stream ${o} received:`,oe),H.a_(oe)}}),$(f,X0.STAT_EVENT,M=>{M.stat===ff.PROXY?pe(un,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===ff.NOPROXY&&pe(un,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{H.o_()},0),H}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(r){return new wA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="PersistentStream";class J_{constructor(e,t,s,o,l,d,f,p){this.Fi=e,this.w_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Y_(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(Es(t.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.b_===t&&this.W_(s,o)},s=>{e(()=>{const o=new ce(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)})})}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{s(()=>this.G_(o))}),this.stream.onMessage(o=>{s(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return pe(gv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(pe(gv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yR extends J_{constructor(e,t,s,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=TA(this.serializer,e),s=function(l){if(!("targetChange"in l))return Me.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Me.min():d.readTime?Wr(d.readTime):Me.min()}(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=xf(this.serializer),t.addTarget=function(l,d){let f;const p=d.target;if(f=vf(p)?{documents:CA(l,p)}:{query:AA(l,p).Vt},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=F_(l,d.resumeToken);const v=Ef(l,d.expectedCount);v!==null&&(f.expectedCount=v)}else if(d.snapshotVersion.compareTo(Me.min())>0){f.readTime=Vc(l,d.snapshotVersion.toTimestamp());const v=Ef(l,d.expectedCount);v!==null&&(f.expectedCount=v)}return f}(this.serializer,e);const s=PA(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=xf(this.serializer),t.removeTarget=e,this.k_(t)}}class vR extends J_{constructor(e,t,s,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=SA(e.writeResults,e.commitTime),s=Wr(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=xf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>xA(this.serializer,s))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{}class wR extends _R{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Wo(e,If(t,s),o,l,d)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(Q.UNKNOWN,l.toString())})}Jo(e,t,s,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,f])=>this.connection.Jo(e,If(t,s),o,d,f,l)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ce(Q.UNKNOWN,d.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class ER{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Es(t),this._a=!1):pe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="RemoteStore";class IR{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(d=>{s.enqueueAndForget(async()=>{ro(this)&&(pe(Xi,"Restarting streams for network reachability change."),await async function(p){const v=Fe(p);v.Ia.add(4),await Fl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await nd(v)}(this))})}),this.Aa=new ER(s,o)}}async function nd(r){if(ro(r))for(const e of r.da)await e(!0)}async function Fl(r){for(const e of r.da)await e(!1)}function X_(r,e){const t=Fe(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),gp(t)?mp(t):ya(t).x_()&&pp(t,e))}function fp(r,e){const t=Fe(r),s=ya(t);t.Ta.delete(e),s.x_()&&Z_(t,e),t.Ta.size===0&&(s.x_()?s.B_():ro(t)&&t.Aa.set("Unknown"))}function pp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ya(r).H_(e)}function Z_(r,e){r.Ra.$e(e),ya(r).Y_(e)}function mp(r){r.Ra=new gA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),ya(r).start(),r.Aa.aa()}function gp(r){return ro(r)&&!ya(r).M_()&&r.Ta.size>0}function ro(r){return Fe(r).Ia.size===0}function ew(r){r.Ra=void 0}async function TR(r){r.Aa.set("Online")}async function xR(r){r.Ta.forEach((e,t)=>{pp(r,e)})}async function SR(r,e){ew(r),gp(r)?(r.Aa.la(e),mp(r)):r.Aa.set("Unknown")}async function CR(r,e,t){if(r.Aa.set("Online"),e instanceof M_&&e.state===2&&e.cause)try{await async function(o,l){const d=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,d),o.Ta.delete(f),o.Ra.removeTarget(f))}(r,e)}catch(s){pe(Xi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Lc(r,s)}else if(e instanceof gc?r.Ra.Ye(e):e instanceof j_?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Me.min()))try{const s=await Q_(r.localStore);t.compareTo(s)>=0&&await function(l,d){const f=l.Ra.Pt(d);return f.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const E=l.Ta.get(v);E&&l.Ta.set(v,E.withResumeToken(p.resumeToken,d))}}),f.targetMismatches.forEach((p,v)=>{const E=l.Ta.get(p);if(!E)return;l.Ta.set(p,E.withResumeToken(nn.EMPTY_BYTE_STRING,E.snapshotVersion)),Z_(l,p);const I=new si(E.target,p,v,E.sequenceNumber);pp(l,I)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){pe(Xi,"Failed to raise snapshot:",s),await Lc(r,s)}}async function Lc(r,e,t){if(!ma(e))throw e;r.Ia.add(1),await Fl(r),r.Aa.set("Offline"),t||(t=()=>Q_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{pe(Xi,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await nd(r)})}function tw(r,e){return e().catch(t=>Lc(r,t,e))}async function rd(r){const e=Fe(r),t=_i(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ep;for(;AR(e);)try{const o=await lR(e.localStore,s);if(o===null){e.Pa.length===0&&t.B_();break}s=o.batchId,RR(e,o)}catch(o){await Lc(e,o)}nw(e)&&rw(e)}function AR(r){return ro(r)&&r.Pa.length<10}function RR(r,e){r.Pa.push(e);const t=_i(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function nw(r){return ro(r)&&!_i(r).M_()&&r.Pa.length>0}function rw(r){_i(r).start()}async function PR(r){_i(r).na()}async function bR(r){const e=_i(r);for(const t of r.Pa)e.X_(t.mutations)}async function kR(r,e,t){const s=r.Pa.shift(),o=op.from(s,e,t);await tw(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await rd(r)}async function NR(r,e){e&&_i(r).Z_&&await async function(s,o){if(function(d){return pA(d)&&d!==Q.ABORTED}(o.code)){const l=s.Pa.shift();_i(s).N_(),await tw(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await rd(s)}}(r,e),nw(r)&&rw(r)}async function yv(r,e){const t=Fe(r);t.asyncQueue.verifyOperationInProgress(),pe(Xi,"RemoteStore received new credentials");const s=ro(t);t.Ia.add(3),await Fl(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await nd(t)}async function DR(r,e){const t=Fe(r);e?(t.Ia.delete(2),await nd(t)):e||(t.Ia.add(2),await Fl(t),t.Aa.set("Unknown"))}function ya(r){return r.Va||(r.Va=function(t,s,o){const l=Fe(t);return l.ia(),new yR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:TR.bind(null,r),e_:xR.bind(null,r),n_:SR.bind(null,r),J_:CR.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),gp(r)?mp(r):r.Aa.set("Unknown")):(await r.Va.stop(),ew(r))})),r.Va}function _i(r){return r.ma||(r.ma=function(t,s,o){const l=Fe(t);return l.ia(),new vR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:PR.bind(null,r),n_:NR.bind(null,r),ea:bR.bind(null,r),ta:kR.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await rd(r)):(await r.ma.stop(),r.Pa.length>0&&(pe(Xi,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const d=Date.now()+s,f=new yp(e,t,d,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(r,e){if(Es("AsyncQueue",`${e}: ${r}`),ma(r))return new ce(Q.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{static emptySet(e){return new Yo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Re.comparator(t.key,s.key):(t,s)=>Re.comparator(t.key,s.key),this.keyedMap=ol(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Yo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.fa=new xt(Re.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):De(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,s)=>{e.push(s)}),e}}class ia{constructor(e,t,s,o,l,d,f,p,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,l){const d=[];return t.forEach(f=>{d.push({type:0,doc:f})}),new ia(e,t,Yo.emptySet(t),d,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class OR{constructor(){this.queries=_v(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=Fe(t),l=o.queries;o.queries=_v(),l.forEach((d,f)=>{for(const p of f.wa)p.onError(s)})})(this,new ce(Q.ABORTED,"Firestore shutting down"))}}function _v(){return new no(r=>T_(r),Yc)}async function sw(r,e){const t=Fe(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(s=2):(l=new VR,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const f=vp(d,`Initialization of query '${Bo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&_p(t)}async function iw(r,e){const t=Fe(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function LR(r,e){const t=Fe(r);let s=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const f of d.wa)f.Ca(o)&&(s=!0);d.ya=o}}s&&_p(t)}function jR(r,e,t){const s=Fe(r),o=s.queries.get(e);if(o)for(const l of o.wa)l.onError(t);s.queries.delete(e)}function _p(r){r.Da.forEach(e=>{e.next()})}var Af,wv;(wv=Af||(Af={})).Fa="default",wv.Cache="cache";class ow{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ia(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Af.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this.key=e}}class lw{constructor(e){this.key=e}}class MR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=qe(),this.mutatedKeys=qe(),this.Xa=x_(e),this.eu=new Yo(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new vv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,I)=>{const x=o.get(E),j=Jc(this.query,I)?I:null,H=!!x&&this.mutatedKeys.has(x.key),$=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let M=!1;x&&j?x.data.isEqual(j.data)?H!==$&&(s.track({type:3,doc:j}),M=!0):this.iu(x,j)||(s.track({type:2,doc:j}),M=!0,(p&&this.Xa(j,p)>0||v&&this.Xa(j,v)<0)&&(f=!0)):!x&&j?(s.track({type:0,doc:j}),M=!0):x&&!j&&(s.track({type:1,doc:x}),M=!0,(p||v)&&(f=!0)),M&&(j?(d=d.add(j),l=$?l.add(E):l.delete(E)):(d=d.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{eu:d,ru:s,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort((E,I)=>function(j,H){const $=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{At:M})}};return $(j)-$(H)}(E.type,I.type)||this.Xa(E.doc,I.doc)),this.su(s),o=o!=null&&o;const f=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,v=p!==this.Ya;return this.Ya=p,d.length!==0||v?{snapshot:new ia(this.query,e.eu,l,d,e.mutatedKeys,p===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new vv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=qe(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const t=[];return e.forEach(s=>{this.Za.has(s)||t.push(new lw(s))}),this.Za.forEach(s=>{e.has(s)||t.push(new aw(s))}),t}uu(e){this.Ha=e.qs,this.Za=qe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ia.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const wp="SyncEngine";class FR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class UR{constructor(e){this.key=e,this.lu=!1}}class zR{constructor(e,t,s,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new no(f=>T_(f),Yc),this.Tu=new Map,this.Iu=new Set,this.du=new xt(Re.comparator),this.Eu=new Map,this.Au=new up,this.Ru={},this.Vu=new Map,this.mu=sa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function BR(r,e,t=!0){const s=pw(r);let o;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await uw(s,e,t,!0),o}async function $R(r,e){const t=pw(r);await uw(t,e,!0,!1)}async function uw(r,e,t,s){const o=await uR(r.localStore,$r(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await HR(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&X_(r.remoteStore,o),f}async function HR(r,e,t,s,o){r.gu=(I,x,j)=>async function($,M,ee,oe){let J=M.view.nu(ee);J.Ds&&(J=await hv($.localStore,M.query,!1).then(({documents:N})=>M.view.nu(N,J)));const Ie=oe&&oe.targetChanges.get(M.targetId),_e=oe&&oe.targetMismatches.get(M.targetId)!=null,we=M.view.applyChanges(J,$.isPrimaryClient,Ie,_e);return Iv($,M.targetId,we._u),we.snapshot}(r,I,x,j);const l=await hv(r.localStore,e,!0),d=new MR(e,l.qs),f=d.nu(l.documents),p=Ml.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),v=d.applyChanges(f,r.isPrimaryClient,p);Iv(r,t,v._u);const E=new FR(e,t,d);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function WR(r,e,t){const s=Fe(r),o=s.Pu.get(e),l=s.Tu.get(o.targetId);if(l.length>1)return s.Tu.set(o.targetId,l.filter(d=>!Yc(d,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Sf(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&fp(s.remoteStore,o.targetId),Rf(s,o.targetId)}).catch(pa)):(Rf(s,o.targetId),await Sf(s.localStore,o.targetId,!0))}async function qR(r,e){const t=Fe(r),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),fp(t.remoteStore,s.targetId))}async function GR(r,e,t){const s=eP(r);try{const o=await function(d,f){const p=Fe(d),v=mt.now(),E=f.reduce((j,H)=>j.add(H.key),qe());let I,x;return p.persistence.runTransaction("Locally write mutations","readwrite",j=>{let H=Is(),$=qe();return p.Os.getEntries(j,E).next(M=>{H=M,H.forEach((ee,oe)=>{oe.isValidDocument()||($=$.add(ee))})}).next(()=>p.localDocuments.getOverlayedDocuments(j,H)).next(M=>{I=M;const ee=[];for(const oe of f){const J=uA(oe,I.get(oe.key).overlayedDocument);J!=null&&ee.push(new Ii(oe.key,J,m_(J.value.mapValue),Hr.exists(!0)))}return p.mutationQueue.addMutationBatch(j,v,ee,f)}).next(M=>{x=M;const ee=M.applyToLocalDocumentSet(I,$);return p.documentOverlayCache.saveOverlays(j,M.batchId,ee)})}).then(()=>({batchId:x.batchId,changes:C_(I)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,f,p){let v=d.Ru[d.currentUser.toKey()];v||(v=new xt($e)),v=v.insert(f,p),d.Ru[d.currentUser.toKey()]=v}(s,o.batchId,t),await Ul(s,o.changes),await rd(s.remoteStore)}catch(o){const l=vp(o,"Failed to persist write");t.reject(l)}}async function cw(r,e){const t=Fe(r);try{const s=await oR(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.Eu.get(l);d&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?nt(d.lu,14607):o.removedDocuments.size>0&&(nt(d.lu,42227),d.lu=!1))}),await Ul(t,s,e)}catch(s){await pa(s)}}function Ev(r,e,t){const s=Fe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach((l,d)=>{const f=d.view.va(e);f.snapshot&&o.push(f.snapshot)}),function(d,f){const p=Fe(d);p.onlineState=f;let v=!1;p.queries.forEach((E,I)=>{for(const x of I.wa)x.va(f)&&(v=!0)}),v&&_p(p)}(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function KR(r,e,t){const s=Fe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let d=new xt(Re.comparator);d=d.insert(l,dn.newNoDocument(l,Me.min()));const f=qe().add(l),p=new ed(Me.min(),new Map,new xt($e),d,f);await cw(s,p),s.du=s.du.remove(l),s.Eu.delete(e),Ep(s)}else await Sf(s.localStore,e,!1).then(()=>Rf(s,e,t)).catch(pa)}async function QR(r,e){const t=Fe(r),s=e.batch.batchId;try{const o=await iR(t.localStore,e);hw(t,s,null),dw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ul(t,o)}catch(o){await pa(o)}}async function YR(r,e,t){const s=Fe(r);try{const o=await function(d,f){const p=Fe(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return p.mutationQueue.lookupMutationBatch(v,f).next(I=>(nt(I!==null,37113),E=I.keys(),p.mutationQueue.removeMutationBatch(v,I))).next(()=>p.mutationQueue.performConsistencyCheck(v)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(v,E,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>p.localDocuments.getDocuments(v,E))})}(s.localStore,e);hw(s,e,t),dw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ul(s,o)}catch(o){await pa(o)}}function dw(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function hw(r,e,t){const s=Fe(r);let o=s.Ru[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function Rf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Tu.get(e))r.Pu.delete(s),t&&r.hu.pu(s,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(s=>{r.Au.containsKey(s)||fw(r,s)})}function fw(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(fp(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),Ep(r))}function Iv(r,e,t){for(const s of t)s instanceof aw?(r.Au.addReference(s.key,e),JR(r,s)):s instanceof lw?(pe(wp,"Document no longer in limbo: "+s.key),r.Au.removeReference(s.key,e),r.Au.containsKey(s.key)||fw(r,s.key)):De(19791,{yu:s})}function JR(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Iu.has(s)||(pe(wp,"New document in limbo: "+t),r.Iu.add(s),Ep(r))}function Ep(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Re(ht.fromString(e)),s=r.mu.next();r.Eu.set(s,new UR(t)),r.du=r.du.insert(t,s),X_(r.remoteStore,new si($r(Qc(t.path)),s,"TargetPurposeLimboResolution",qc.ue))}}async function Ul(r,e,t){const s=Fe(r),o=[],l=[],d=[];s.Pu.isEmpty()||(s.Pu.forEach((f,p)=>{d.push(s.gu(p,e,t).then(v=>{var E;if((v||t)&&s.isPrimaryClient){const I=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,I?"current":"not-current")}if(v){o.push(v);const I=dp.Es(p.targetId,v);l.push(I)}}))}),await Promise.all(d),s.hu.J_(o),await async function(p,v){const E=Fe(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>Y.forEach(v,x=>Y.forEach(x.Is,j=>E.persistence.referenceDelegate.addReference(I,x.targetId,j)).next(()=>Y.forEach(x.ds,j=>E.persistence.referenceDelegate.removeReference(I,x.targetId,j)))))}catch(I){if(!ma(I))throw I;pe(hp,"Failed to update sequence numbers: "+I)}for(const I of v){const x=I.targetId;if(!I.fromCache){const j=E.Fs.get(x),H=j.snapshotVersion,$=j.withLastLimboFreeSnapshotVersion(H);E.Fs=E.Fs.insert(x,$)}}}(s.localStore,l))}async function XR(r,e){const t=Fe(r);if(!t.currentUser.isEqual(e)){pe(wp,"User change. New user:",e.toKey());const s=await K_(t.localStore,e);t.currentUser=e,function(l,d){l.Vu.forEach(f=>{f.forEach(p=>{p.reject(new ce(Q.CANCELLED,d))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ul(t,s.Bs)}}function ZR(r,e){const t=Fe(r),s=t.Eu.get(e);if(s&&s.lu)return qe().add(s.key);{let o=qe();const l=t.Tu.get(e);if(!l)return o;for(const d of l){const f=t.Pu.get(d);o=o.unionWith(f.view.tu)}return o}}function pw(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=cw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KR.bind(null,e),e.hu.J_=LR.bind(null,e.eventManager),e.hu.pu=jR.bind(null,e.eventManager),e}function eP(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YR.bind(null,e),e}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=td(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return sR(this.persistence,new tR,e.initialUser,this.serializer)}Du(e){return new G_(cp.Vi,this.serializer)}bu(e){return new dR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class tP extends jc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){nt(this.persistence.referenceDelegate instanceof Oc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new UA(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new G_(s=>Oc.Vi(s,t),this.serializer)}}class Pf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ev(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=XR.bind(null,this.syncEngine),await DR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OR}()}createDatastore(e){const t=td(e.databaseInfo.databaseId),s=function(l){return new gR(l)}(e.databaseInfo);return function(l,d,f,p){return new wR(l,d,f,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,d,f){return new IR(s,o,l,d,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Ev(this.syncEngine,t,0),function(){return mv.C()?new mv:new hR}())}createSyncEngine(e,t){return function(o,l,d,f,p,v,E){const I=new zR(o,l,d,f,p,v);return E&&(I.fu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Fe(o);pe(Xi,"RemoteStore shutting down."),l.Ia.add(5),await Fl(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Pf.provider={build:()=>new Pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="FirestoreClient";class nP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=Zf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async d=>{pe(wi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(pe(wi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=vp(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Zh(r,e){r.asyncQueue.verifyOperationInProgress(),pe(wi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await K_(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>{pi("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{pe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{pi("Terminating Firestore due to IndexedDb database deletion failed",o)})}),r._offlineComponents=e}async function Tv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await rP(r);pe(wi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>yv(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>yv(e.remoteStore,o)),r._onlineComponents=e}async function rP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pe(wi,"Using user provided OfflineComponentProvider");try{await Zh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;pi("Error using user provided cache. Falling back to memory cache: "+t),await Zh(r,new jc)}}else pe(wi,"Using default OfflineComponentProvider"),await Zh(r,new tP(void 0));return r._offlineComponents}async function gw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pe(wi,"Using user provided OnlineComponentProvider"),await Tv(r,r._uninitializedComponentsProvider._online)):(pe(wi,"Using default OnlineComponentProvider"),await Tv(r,new Pf))),r._onlineComponents}function sP(r){return gw(r).then(e=>e.syncEngine)}async function bf(r){const e=await gw(r),t=e.eventManager;return t.onListen=BR.bind(null,e.syncEngine),t.onUnlisten=WR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$R.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qR.bind(null,e.syncEngine),t}function iP(r,e,t={}){const s=new ci;return r.asyncQueue.enqueueAndForget(async()=>function(l,d,f,p,v){const E=new mw({next:x=>{E.Ou(),d.enqueueAndForget(()=>iw(l,I));const j=x.docs.has(f);!j&&x.fromCache?v.reject(new ce(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&x.fromCache&&p&&p.source==="server"?v.reject(new ce(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),I=new ow(Qc(f.path),E,{includeMetadataChanges:!0,ka:!0});return sw(l,I)}(await bf(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="firestore.googleapis.com",Sv=!0;class Cv{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vw,this.ssl=Sv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Sv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MA)throw new ce(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sd{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new fC;switch(s.type){case"firstParty":return new yC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=xv.get(t);s&&(pe("ComponentProvider","Removing Datastore"),xv.delete(t),s.terminate())}(this),Promise.resolve()}}function oP(r,e,t,s={}){var o;r=Br(r,sd);const l=ua(e),d=r._getSettings(),f=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${t}`;l&&(r0(`https://${p}`),s0("Firestore",!0)),d.host!==vw&&d.host!==p&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:p,ssl:l,emulatorOptions:s});if(!hi(v,f)&&(r._setSettings(v),s.mockUserToken)){let E,I;if(typeof s.mockUserToken=="string")E=s.mockUserToken,I=cn.MOCK_USER;else{E=nT(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new ce(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new cn(x)}r._authCredentials=new pC(new n_(E,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new so(this.firestore,e,this._query)}}class Ct{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ll(t,Ct._jsonSchema))return new Ct(e,s||null,new Re(ht.fromString(t.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:Lt("string",Ct._jsonSchemaVersion),referencePath:Lt("string")};class di extends so{constructor(e,t,s){super(e,t,Qc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new Re(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function ll(r,e,...t){if(r=Tt(r),s_("collection","path",e),r instanceof sd){const s=ht.fromString(e,...t);return Fy(s),new di(r,null,s)}{if(!(r instanceof Ct||r instanceof di))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ht.fromString(e,...t));return Fy(s),new di(r.firestore,null,s)}}function fs(r,e,...t){if(r=Tt(r),arguments.length===1&&(e=Zf.newId()),s_("doc","path",e),r instanceof sd){const s=ht.fromString(e,...t);return My(s),new Ct(r,null,new Re(s))}{if(!(r instanceof Ct||r instanceof di))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ht.fromString(e,...t));return My(s),new Ct(r.firestore,r instanceof di?r.converter:null,new Re(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="AsyncQueue";class Rv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Y_(this,"async_queue_retry"),this.oc=()=>{const s=Xh();s&&pe(Av,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Xh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Xh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new ci;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ma(e))throw e;pe(Av,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,Es("INTERNAL UNHANDLED ERROR: ",Pv(s)),s}).then(s=>(this.nc=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=yp.createAndSchedule(this,e,t,s,l=>this.lc(l));return this.ec.push(o),o}ac(){this.tc&&De(47125,{hc:Pv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Pv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class oa extends sd{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Rv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rv(e),this._firestoreClient=void 0,await e}}}function aP(r,e){const t=typeof r=="object"?r:l0(),s=typeof r=="string"?r:Pc,o=Mf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=eT("firestore");l&&oP(o,...l)}return o}function Ip(r){if(r._terminated)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||lP(r),r._firestoreClient}function lP(r){var e,t,s;const o=r._freezeSettings(),l=function(f,p,v,E){return new DC(f,p,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,yw(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new nP(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(nn.fromBase64String(e))}catch(t){throw new ce(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lr(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ll(e,lr._jsonSchema))return lr.fromBase64String(e.bytes)}}lr._jsonSchemaVersion="firestore/bytes/1.0",lr._jsonSchema={type:Lt("string",lr._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qr._jsonSchemaVersion}}static fromJSON(e){if(Ll(e,qr._jsonSchema))return new qr(e.latitude,e.longitude)}}qr._jsonSchemaVersion="firestore/geoPoint/1.0",qr._jsonSchema={type:Lt("string",qr._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ll(e,Gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Gr(e.vectorValues);throw new ce(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gr._jsonSchemaVersion="firestore/vectorValue/1.0",Gr._jsonSchema={type:Lt("string",Gr._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=/^__.*__$/;class cP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,t,this.fieldTransforms):new jl(e,this.data,t,this.fieldTransforms)}}class _w{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ii(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ww(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ec:r})}}class ad{constructor(e,t,s,o,l,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ad(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Mc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ww(this.Ec)&&uP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class dP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||td(e)}Dc(e,t,s,o=!1){return new ad({Ec:e,methodName:t,bc:s,path:tn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tp(r){const e=r._freezeSettings(),t=td(r._databaseId);return new dP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function hP(r,e,t,s,o,l={}){const d=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);Sp("Data must be an object, but it was:",d,s);const f=Ew(s,d);let p,v;if(l.merge)p=new Gn(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const E=[];for(const I of l.mergeFields){const x=kf(e,I,t);if(!d.contains(x))throw new ce(Q.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Tw(E,x)||E.push(x)}p=new Gn(E),v=d.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,v=d.fieldTransforms;return new cP(new Dn(f),p,v)}class ld extends od{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ld}}function fP(r,e,t){return new ad({Ec:3,bc:e.settings.bc,methodName:r._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xp extends od{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=fP(this,e,!0),s=this.vc.map(l=>va(l,t)),o=new ra(s);return new iA(e.path,o)}isEqual(e){return e instanceof xp&&hi(this.vc,e.vc)}}function pP(r,e,t,s){const o=r.Dc(1,e,t);Sp("Data must be an object, but it was:",o,s);const l=[],d=Dn.empty();Ei(s,(p,v)=>{const E=Cp(e,p,t);v=Tt(v);const I=o.gc(E);if(v instanceof ld)l.push(E);else{const x=va(v,I);x!=null&&(l.push(E),d.set(E,x))}});const f=new Gn(l);return new _w(d,f,o.fieldTransforms)}function mP(r,e,t,s,o,l){const d=r.Dc(1,e,t),f=[kf(e,s,t)],p=[o];if(l.length%2!=0)throw new ce(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)f.push(kf(e,l[x])),p.push(l[x+1]);const v=[],E=Dn.empty();for(let x=f.length-1;x>=0;--x)if(!Tw(v,f[x])){const j=f[x];let H=p[x];H=Tt(H);const $=d.gc(j);if(H instanceof ld)v.push(j);else{const M=va(H,$);M!=null&&(v.push(j),E.set(j,M))}}const I=new Gn(v);return new _w(E,I,d.fieldTransforms)}function gP(r,e,t,s=!1){return va(t,r.Dc(s?4:3,e))}function va(r,e){if(Iw(r=Tt(r)))return Sp("Unsupported field value:",e,r),Ew(r,e);if(r instanceof od)return function(s,o){if(!ww(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,o){const l=[];let d=0;for(const f of s){let p=va(f,o.yc(d));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),d++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=Tt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return nA(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=mt.fromDate(s);return{timestampValue:Vc(o.serializer,l)}}if(s instanceof mt){const l=new mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Vc(o.serializer,l)}}if(s instanceof qr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof lr)return{bytesValue:F_(o.serializer,s._byteString)};if(s instanceof Ct){const l=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:lp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Gr)return function(d,f){return{mapValue:{fields:{[f_]:{stringValue:p_},[bc]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw f.wc("VectorValues must only contain numeric values.");return ip(f.serializer,v)})}}}}}}(s,o);throw o.wc(`Unsupported field value: ${Wc(s)}`)}(r,e)}function Ew(r,e){const t={};return a_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(r,(s,o)=>{const l=va(o,e.Vc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function Iw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof mt||r instanceof qr||r instanceof lr||r instanceof Ct||r instanceof od||r instanceof Gr)}function Sp(r,e,t){if(!Iw(t)||!i_(t)){const s=Wc(t);throw s==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+s)}}function kf(r,e,t){if((e=Tt(e))instanceof id)return e._internalPath;if(typeof e=="string")return Cp(r,e);throw Mc("Field path arguments must be of type string or ",r,!1,void 0,t)}const yP=new RegExp("[~\\*/\\[\\]]");function Cp(r,e,t){if(e.search(yP)>=0)throw Mc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new id(...e.split("."))._internalPath}catch{throw Mc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Mc(r,e,t,s,o){const l=s&&!s.isEmpty(),d=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||d)&&(p+=" (found",l&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new ce(Q.INVALID_ARGUMENT,f+r+p)}function Tw(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ud("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vP extends xw{data(){return super.data()}}function ud(r,e){return typeof e=="string"?Cp(r,e):e instanceof id?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}class Sw extends Ap{}function wP(r,e,...t){let s=[];e instanceof Ap&&s.push(e),s=s.concat(t),function(l){const d=l.filter(p=>p instanceof Rp).length,f=l.filter(p=>p instanceof cd).length;if(d>1||d>0&&f>0)throw new ce(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class cd extends Sw{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new cd(e,t,s)}_apply(e){const t=this._parse(e);return Cw(e._query,t),new so(e.firestore,e.converter,_f(e._query,t))}_parse(e){const t=Tp(e.firestore);return function(l,d,f,p,v,E,I){let x;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Nv(I,E);const H=[];for(const $ of I)H.push(kv(p,l,$));x={arrayValue:{values:H}}}else x=kv(p,l,I)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Nv(I,E),x=gP(f,d,I,E==="in"||E==="not-in");return Ot.create(v,E,x)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function EP(r,e,t){const s=e,o=ud("where",r);return cd._create(o,s,t)}class Rp extends Ap{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Rp(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let d=o;const f=l.getFlattenedFilters();for(const p of f)Cw(d,p),d=_f(d,p)}(e._query,t),new so(e.firestore,e.converter,_f(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pp extends Sw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Pp(e,t)}_apply(e){const t=function(o,l,d){if(o.startAt!==null)throw new ce(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pl(l,d)}(e._query,this._field,this._direction);return new so(e.firestore,e.converter,function(o,l){const d=o.explicitOrderBy.concat([l]);return new ga(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function IP(r,e="asc"){const t=e,s=ud("orderBy",r);return Pp._create(s,t)}function kv(r,e,t){if(typeof(t=Tt(t))=="string"){if(t==="")throw new ce(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!I_(e)&&t.indexOf("/")!==-1)throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ht.fromString(t));if(!Re.isDocumentKey(s))throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Gy(r,new Re(s))}if(t instanceof Ct)return Gy(r,t._key);throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wc(t)}.`)}function Nv(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Cw(r,e){const t=function(o,l){for(const d of o)for(const f of d.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class TP{convertValue(e,t="none"){switch(vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ei(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[bc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>Rt(d.doubleValue));return new Gr(l)}convertGeoPoint(e){return new qr(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Kc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Cl(e));default:return null}}convertTimestamp(e){const t=gi(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ht.fromString(e);nt(W_(s),9688,{name:e});const o=new Al(s.get(1),s.get(3)),l=new Re(s.popFirst(5));return o.isEqual(t)||Es(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class ul{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qi extends xw{constructor(e,t,s,o,l,d){super(e,t,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(ud("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Qi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qi._jsonSchema={type:Lt("string",Qi._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class yc extends Qi{data(e={}){return super.data(e)}}class Jo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ul(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new yc(this._firestore,this._userDataWriter,s.key,s,new ul(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(f=>{const p=new yc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new ul(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const p=new yc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new ul(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return f.type!==0&&(v=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),E=d.indexOf(f.doc.key)),{type:SP(f.type),doc:p,oldIndex:v,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(r){r=Br(r,Ct);const e=Br(r.firestore,oa);return iP(Ip(e),r._key).then(t=>Pw(e,r,t))}Jo._jsonSchemaVersion="firestore/querySnapshot/1.0",Jo._jsonSchema={type:Lt("string",Jo._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Aw extends TP{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function cl(r,e,t){r=Br(r,Ct);const s=Br(r.firestore,oa),o=xP(r.converter,e,t);return Rw(s,[hP(Tp(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Hr.none())])}function tf(r,e,t,...s){r=Br(r,Ct);const o=Br(r.firestore,oa),l=Tp(o);let d;return d=typeof(e=Tt(e))=="string"||e instanceof id?mP(l,"updateDoc",r._key,e,t,s):pP(l,"updateDoc",r._key,e),Rw(o,[d.toMutation(r._key,Hr.exists(!0))])}function vc(r,...e){var t,s,o;r=Tt(r);let l={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||bv(e[d])||(l=e[d++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(bv(e[d])){const I=e[d];e[d]=(t=I.next)===null||t===void 0?void 0:t.bind(I),e[d+1]=(s=I.error)===null||s===void 0?void 0:s.bind(I),e[d+2]=(o=I.complete)===null||o===void 0?void 0:o.bind(I)}let p,v,E;if(r instanceof Ct)v=Br(r.firestore,oa),E=Qc(r._key.path),p={next:I=>{e[d]&&e[d](Pw(v,r,I))},error:e[d+1],complete:e[d+2]};else{const I=Br(r,so);v=Br(I.firestore,oa),E=I._query;const x=new Aw(v);p={next:j=>{e[d]&&e[d](new Jo(v,x,I,j))},error:e[d+1],complete:e[d+2]},_P(r._query)}return function(x,j,H,$){const M=new mw($),ee=new ow(j,M,H);return x.asyncQueue.enqueueAndForget(async()=>sw(await bf(x),ee)),()=>{M.Ou(),x.asyncQueue.enqueueAndForget(async()=>iw(await bf(x),ee))}}(Ip(v),E,f,p)}function Rw(r,e){return function(s,o){const l=new ci;return s.asyncQueue.enqueueAndForget(async()=>GR(await sP(s),o,l)),l.promise}(Ip(r),e)}function Pw(r,e,t){const s=t.docs.get(e._key),o=new Aw(r);return new Qi(r,o,e._key,s,new ul(t.hasPendingWrites,t.fromCache),e.converter)}function Dv(...r){return new xp("arrayUnion",r)}(function(e,t=!0){(function(o){fa=o})(da),Xo(new Yi("firestore",(s,{instanceIdentifier:o,options:l})=>{const d=s.getProvider("app").getImmediate(),f=new oa(new mC(s.getProvider("auth-internal")),new vC(d,s.getProvider("app-check-internal")),function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ce(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(v.options.projectId,E)}(d,o),d);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),li(Dy,Vy,e),li(Dy,Vy,"esm2017")})();const Nf=({rating:r,onRatingChange:e,readOnly:t=!1})=>{const s=[1,2,3,4,5];return y.jsx("div",{className:"star-rating",children:s.map(o=>y.jsx("span",{className:`star ${o<=r?"filled":""}`,"data-value":o,onClick:()=>!t&&e(o),onMouseOver:l=>{if(!t){const d=l.currentTarget;Array.from(d.parentNode.children).forEach(p=>{parseInt(p.dataset.value)<=o?p.classList.add("filled"):p.classList.remove("filled")})}},onMouseOut:l=>{if(!t){const d=l.currentTarget;Array.from(d.parentNode.children).forEach(p=>{parseInt(p.dataset.value)<=r?p.classList.add("filled"):p.classList.remove("filled")})}},style:{cursor:t?"default":"pointer"},children:"★"},o))})},CP=({message:r,type:e})=>{if(!r)return null;const t=e==="success"?"bg-green-100":"bg-red-100",s=e==="success"?"text-green-700":"text-red-700";return y.jsx("div",{className:`p-3 rounded-md ${t} ${s} my-4 message-box-fade show`,children:r})},AP=({onClose:r})=>{var tt;const{signUpWithEmailPassword:e,signInWithEmailPassword:t,signInWithApple:s,linkAnonymousWithEmailPassword:o,linkAnonymousWithApple:l,auth:d,currentUserId:f,signInWithGoogle:p,db:v,appId:E}=D.useContext(zl),[I,x]=D.useState(!0),[j,H]=D.useState(""),[$,M]=D.useState(""),[ee,oe]=D.useState(""),[J,Ie]=D.useState(""),[_e,we]=D.useState(""),[N,C]=D.useState(""),[S,P]=D.useState(0),[k,O]=D.useState(null),[A,Xe]=D.useState(""),[it,lt]=D.useState(!1),[le,q]=D.useState(!1),[me,ie]=D.useState(""),[L,G]=D.useState(""),[ye,Ae]=D.useState(""),[ke,Ne]=D.useState(""),[Ue,Oe]=D.useState(""),[Le,Ge]=D.useState(""),[wt,ue]=D.useState(""),ne=D.useRef(null),de=D.useRef(null),je=D.useCallback((se,xe)=>{we(se),C(xe),setTimeout(()=>{we(""),C("")},5e3)},[]),Gt=(tt=d==null?void 0:d.currentUser)==null?void 0:tt.isAnonymous,Kt=D.useCallback(async se=>{if(console.log("checkEmailExists: Checking email:",se),console.log("checkEmailExists: Current auth object:",d),!d)return console.error("Firebase Auth not initialized for email check."),!1;try{const xe=await U1(d,se);return console.log("checkEmailExists: Sign-in methods for email:",xe),xe.length>0}catch(xe){return console.error("Error checking email existence:",xe),console.error("Full error object:",JSON.stringify(xe,null,2)),!1}},[d]);D.useEffect(()=>{if(!I&&S===2&&d&&!ne.current){if(console.log("AuthModal: Initializing reCAPTCHA Verifier..."),typeof window.grecaptcha>"u"||!window.grecaptcha.ready){console.warn("AuthModal: grecaptcha script not fully loaded yet. Retrying initialization...");const se=setTimeout(()=>{P(xe=>xe)},500);return()=>clearTimeout(se)}window.grecaptcha.ready(()=>{if(ne.current){console.log("AuthModal: reCAPTCHA Verifier already exists, skipping re-initialization.");return}console.log("AuthModal: grecaptcha is ready. Creating RecaptchaVerifier...");try{const se=new W0(d,"recaptcha-container",{size:"invisible",callback:xe=>{console.log("AuthModal: reCAPTCHA callback fired (solved):",xe)},"expired-callback":()=>{console.log("AuthModal: reCAPTCHA expired."),je("Verification expired. Please try again.","error"),O(null)},"error-callback":xe=>{console.error("AuthModal: reCAPTCHA error callback:",xe),je("Verification error. Please try again.","error"),O(null)}});ne.current=se,se.render().then(xe=>{console.log("AuthModal: reCAPTCHA rendered with widget ID:",xe),de.current=xe}).catch(xe=>{console.error("AuthModal: Error rendering reCAPTCHA:",xe),je("Failed to initialize verification. Please refresh.","error"),ne.current=null,de.current=null})}catch(se){console.error("AuthModal: Error creating RecaptchaVerifier instance:",se),je("Failed to initialize verification. Check console.","error")}})}return()=>{ne.current&&(console.log("AuthModal: Cleaning up reCAPTCHA Verifier on component unmount."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),ne.current=null,de.current=null)}},[I,S,d,je]);const wn=D.useCallback(async()=>{if(we(""),Ne(""),ue(""),!Le.trim()){ue("Please enter a username.");return}if(!J.trim()){Ne("Please enter your phone number.");return}if(!J.startsWith("+")||J.trim().length<10){Ne('Phone number must start with a "+" and include country code (e.g., +11234567890).');return}if(!d){je("Authentication service not ready.","error");return}if(!ne.current){je("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available.");return}lt(!0);try{ne.current.size==="invisible"&&de.current!==null&&await window.grecaptcha.execute(de.current);const se=await mS(d,J,ne.current);O(se),je("Verification code sent! Please check your phone.","success")}catch(se){console.error("Error sending OTP:",se);let xe="Failed to send code. Please try again.";se.code==="auth/invalid-phone-number"?xe="Invalid phone number format. Please ensure it includes the country code (e.g., +11234567890).":se.code==="auth/too-many-requests"?xe="Too many requests. Please try again later.":se.code==="auth/captcha-check-failed"&&(xe="Security check failed. Please try again."),je(xe,"error"),O(null)}finally{lt(!1)}},[J,Le,d,je]),Kn=D.useCallback(async()=>{if(we(""),Oe(""),!A.trim()){Oe("Please enter the verification code.");return}if(!k){je("No verification request found. Please send the code first.","error");return}q(!0);try{let se;I?se=await k.confirm(A):j&&$?se=await j0(d,j,$):se=await k.confirm(A);const xe=se.user;if(xe&&Le.trim()&&(await B1(xe,{displayName:Le.trim()}),console.log("User display name updated after sign-up/link:",Le)),v&&xe&&E)try{await cl(fs(v,"artifacts",E,"users",xe.uid),{email:xe.email||null,phoneNumber:J,username:Le,createdAt:new Date},{merge:!0}),console.log("User profile with phone number and username info saved.")}catch(Qn){console.error("Error saving user phone number and username info:",Qn),je("Account created, but failed to save phone number and username.","warning")}else console.warn("Firestore DB, user, or appId not available, phone number and username info not saved.");je("Account created and phone number verified!","success"),ne.current&&(window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),ne.current=null,de.current=null),r()}catch(se){console.error("Error verifying OTP or creating user:",se);let xe="Failed to verify code. Please try again.";se.code==="auth/invalid-verification-code"?xe="Invalid verification code. Please check the code and try again.":se.code==="auth/code-expired"?xe="The verification code has expired. Please resend the code.":se.message==="No reCAPTCHA clients."?xe="Security verification failed. Please try to send the code again.":se.code==="auth/email-already-in-use"&&(xe="This email is already registered. Please sign in or use a different email."),je(xe,"error"),Oe("Verification failed. Please try again.")}finally{q(!1)}},[A,k,v,E,J,Le,je,r,d,I,j,$]),Pt=D.useCallback(async se=>{if(se.preventDefault(),we(""),ie(""),G(""),Ae(""),Ne(""),Oe(""),ue(""),console.log("handleNextStep: Current step BEFORE update:",S,"isLogin:",I),S===0){if(!j){ie("Please enter your email.");return}if(!Le.trim()){ue("Please enter a username.");return}if(!I){const xe=await Kt(j);if(console.log("handleNextStep: Email exists check result:",xe),xe){ie("This email is already registered. Please sign in or use a different email.");return}}P(xe=>xe+1)}else if(S===1){if(!$){G("Please enter your password.");return}if($.length<6){G("Password must be at least 6 characters long.");return}if(!ee){Ae("Please confirm your password.");return}if($!==ee){Ae("Passwords do not match.");return}P(xe=>xe+1)}else if(S===2){if(!J.trim()){Ne("Please enter your phone number.");return}if(!k){if(!ne.current){je("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available in handleNextStep.");return}await wn()}}console.log("handleNextStep: Current step AFTER update:",S)},[j,$,ee,J,Le,S,I,Kt,wn,k,je]),Qt=D.useCallback(()=>{we(""),ie(""),G(""),Ae(""),Ne(""),Oe(""),ue(""),console.log("handlePrevStep: Current step BEFORE update:",S),S>0&&(P(se=>se-1),O(null),Xe(""),S===2&&ne.current&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current)),console.log("handlePrevStep: Current step AFTER update:",S)},[S]),Ln=async se=>{if(se.preventDefault(),we(""),ie(""),G(""),Ae(""),Ne(""),Oe(""),ue(""),I){if(!j){ie("Please enter your email.");return}if(!$){G("Please enter your password.");return}try{Gt?await o(j,$):await t(j,$),ne.current&&(window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),ne.current=null,de.current=null)}catch(xe){console.error("Unexpected error during sign-in process:",xe),je(`An unexpected error occurred: ${xe.message}`,"error")}}else if(S<2)await Pt(se);else if(S===2)if(k)await Kn();else{if(!ne.current){je("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available in handleAuthAction.");return}await wn()}},En=async()=>{await p()&&(r(),ne.current&&(window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),ne.current=null,de.current=null))},In=D.useCallback(()=>{x(se=>!se),H(""),M(""),oe(""),Ie(""),Ge(""),we(""),C(""),P(0),O(null),Xe(""),ie(""),G(""),Ae(""),Ne(""),Oe(""),ue(""),ne.current&&(console.log("AuthModal: Clearing and deleting reCAPTCHA Verifier on mode toggle."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),ne.current=null,de.current=null)},[]),pn=D.useCallback(()=>{ne.current&&(console.log("AuthModal: Cleaning up reCAPTCHA Verifier on modal close."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),ne.current=null,de.current=null),r()},[r]);return y.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4 font-inter",children:y.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md relative animate-scale-in",children:[y.jsx("button",{onClick:pn,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold transition-transform duration-200 transform hover:scale-110",children:"×"}),y.jsx("h2",{className:"text-3xl font-extrabold text-gray-800 mb-6 text-center",children:I?"Sign In":"Sign Up"}),_e&&y.jsx("div",{className:`p-3 mb-4 rounded-md text-center text-sm font-medium
                        ${N==="error"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:_e}),y.jsxs("form",{onSubmit:Ln,className:"space-y-4 flex flex-col items-center",children:[y.jsx("div",{className:"overflow-hidden w-full",children:y.jsxs("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${I?0:S*100}%)`},children:[I&&y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Email"}),y.jsx("input",{type:"email",id:"email",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${me?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com",value:j,onChange:se=>{H(se.target.value),ie("")}}),me&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:me})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Password"}),y.jsx("input",{type:"password",id:"password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${L?"border-red-500":"border-gray-300"}`,placeholder:"********",value:$,onChange:se=>{M(se.target.value),G("")}}),L&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:L})]})]}),!I&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Email"}),y.jsx("input",{type:"email",id:"email",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${me?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com",value:j,onChange:se=>{H(se.target.value),ie("")}}),me&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:me})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"username-email-signup",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Username"}),y.jsx("input",{type:"text",id:"username-email-signup",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${wt?"border-red-500":"border-gray-300"}`,placeholder:"Choose a username",value:Le,onChange:se=>{Ge(se.target.value),ue("")}}),wt&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:wt})]})]}),y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Password"}),y.jsx("input",{type:"password",id:"password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${L?"border-red-500":"border-gray-300"}`,placeholder:"********",value:$,onChange:se=>{M(se.target.value),G("")}}),L&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:L})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"confirm-password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Confirm Password"}),y.jsx("input",{type:"password",id:"confirm-password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${ye?"border-red-500":"border-gray-300"}`,placeholder:"********",value:ee,onChange:se=>{oe(se.target.value),Ae("")}}),ye&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:ye})]})]}),y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[S===2&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"username-phone-signup",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Username"}),y.jsx("input",{type:"text",id:"username-phone-signup",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${wt?"border-red-500":"border-gray-300"}`,placeholder:"Choose a username",value:Le,onChange:se=>{Ge(se.target.value),ue("")},disabled:it||k}),wt&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:wt})]}),k?y.jsxs("div",{className:"relative",children:[y.jsx("label",{htmlFor:"otp",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Enter Verification Code"}),y.jsx("input",{type:"text",id:"otp",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${Ue?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 123456",value:A,onChange:se=>{Xe(se.target.value),Oe("")},disabled:le}),Ue&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:Ue}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-left",children:["Code sent to ",J,"."]}),y.jsx("button",{type:"button",onClick:wn,disabled:it||le,className:"w-full bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105 mt-2",children:it?"Sending...":"Resend Code"})]}):y.jsxs("div",{className:"relative",children:[y.jsx("label",{htmlFor:"phoneNumber",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Phone Number"}),y.jsx("input",{type:"tel",id:"phoneNumber",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${ke?"border-red-500":"border-gray-300"}`,placeholder:"e.g., +11234567890",value:J,onChange:se=>{Ie(se.target.value),Ne("")},disabled:it}),y.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"For human verification purposes only! Include country code (e.g., +1)."}),y.jsx("div",{id:"recaptcha-container",className:"mt-4"})]})]})]})]})}),!I&&y.jsx("div",{className:"flex justify-center space-x-2 mt-4",children:[0,1,2].map(se=>y.jsx("span",{className:`block w-3 h-3 rounded-full transition-colors duration-300
                                        ${S===se?"bg-[#CC5500] scale-125":"bg-gray-300 hover:bg-gray-400 cursor-pointer"}`,onClick:()=>P(se),role:"button",tabIndex:"0","aria-label":`Go to step ${se+1}`},se))}),y.jsxs("div",{className:"flex justify-between items-center mt-4 w-full px-4",children:[!I&&S>0&&y.jsx("button",{type:"button",onClick:Qt,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105 min-w-[100px]",children:"Previous"}),!I&&S===0&&y.jsx("div",{className:"flex-grow"}),y.jsx("button",{type:"submit",className:`font-bold py-3 px-6 rounded-full transition duration-300 shadow-lg hover:shadow-xl transform hover:scale-105
                                ${I?"bg-[#FFDEB5] text-gray-800 hover:bg-[#FFC982] w-full":"bg-[#CC5500] text-white hover:bg-[#A84500] w-auto ml-auto"}`,disabled:I&&(it||le)||!I&&S===2&&!k&&it||!I&&S===2&&k&&le,children:I?"Sign In":S===0||S===1?"Next":S===2&&!k?it?"Sending Code...":"Send Code":le?"Verifying...":"Verify Code"})]})]}),y.jsxs("div",{className:"mt-6 text-center",children:[y.jsxs("p",{className:"text-gray-600",children:[I?"Don't have an account? ":"Already have an account? ",y.jsx("button",{onClick:In,className:"text-[#CC5500] hover:underline font-semibold transition-colors duration-200",children:I?"Sign Up":"Sign In"})]}),I&&y.jsx("button",{onClick:()=>je("Password reset functionality not yet implemented.","info"),className:"text-[#CC5500] hover:underline text-sm mt-2 transition-colors duration-200",children:"Forgot Password?"})]}),y.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6 space-y-4",children:[y.jsx("p",{className:"text-center text-gray-600",children:"Or continue with"}),y.jsx("div",{className:"flex justify-center gap-4",children:y.jsxs("button",{onClick:En,className:"flex items-center justify-center w-1/2 bg-white border border-gray-300 text-gray-800 py-3 px-4 rounded-full shadow-md hover:bg-gray-50 transition duration-300 transform hover:scale-105",children:[y.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{d:"M12.0003 4.75C14.0273 4.75 15.8053 5.438 17.1523 6.694L18.9643 4.882C17.0183 3.033 14.6063 2 12.0003 2C8.87533 2 6.07133 3.453 4.38633 5.859L6.04633 7.153C6.88233 5.761 8.39633 4.75 12.0003 4.75Z",fill:"#EA4335"}),y.jsx("path",{d:"M23.4999 12.272C23.4999 11.492 23.4249 10.721 23.2999 9.969H12.2009V14.51H18.7959C18.5919 15.534 17.9739 16.395 17.1199 16.989L18.7959 18.293C19.8669 17.335 20.6699 16.035 21.1899 14.51L23.4999 12.272Z",fill:"#4285F4"}),y.jsx("path",{d:"M6.04625 16.847L4.38625 18.141C5.97125 20.547 8.87525 22 12.0003 22C14.5943 22 17.0003 20.967 18.9353 19.14L17.1433 17.714C15.8053 18.528 14.0273 19.002 12.0003 19.002C8.39633 19.002 6.88233 17.991 6.04625 16.847Z",fill:"#34A853"}),y.jsx("path",{d:"M4.70725 14.51L2.39725 16.75C1.61525 15.226 1.12725 13.626 1.12725 12C1.12725 10.374 1.61525 8.774 2.39725 7.25L4.70725 9.488C4.24925 10.492 3.99925 11.25 3.99925 12C3.99925 12.75 4.24925 13.508 4.70725 14.51Z",fill:"#FBBC04"})]}),"Google"]})})]})]})})},RP=["fuck","shit","asshole","bitch","cunt","damn","hell"],Fc=250,PP=["Certified Nursing Assistant (CNA)","Licensed Practical Nurse (LPN) / Licensed Vocational Nurse (LVN)","Registered Nurse (RN)","Nurse Practitioner (NP)","Family Nurse Practitioner (FNP)","Adult-Gerontology Nurse Practitioner (AGNP)","Pediatric Nurse Practitioner (PNP)","Psychiatric Mental Health Nurse Practitioner (PMHNP)","Acute Care Nurse Practitioner (ACNP)","Women's Health Nurse Practitioner (WHNP)","Certified Registered Nurse Anesthetist (CRNA)","Clinical Nurse Specialist (CNS)","Certified Nurse-Midwife (CNM)","Cardiac Nurse","Critical Care Nurse (ICU Nurse)","Emergency Nurse (ER Nurse)","Oncology Nurse","Pediatric Nurse","Labor and Delivery Nurse","Neonatal Intensive Care Unit (NICU) Nurse","Medical-Surgical Nurse","Geriatric Nurse","Psychiatric/Mental Health Nurse","Home Health Nurse","Public Health Nurse","School Nurse","Perioperative Nurse (Operating Room Nurse)","Rehabilitation Nurse","Hospice Nurse / Palliative Care Nurse","Forensic Nurse","Travel Nurse","Infusion Nurse","Nephrology Nurse","Diabetic Nurse","Dermatology Nurse","Gastroenterology Nurse","Orthopedic Nurse","Urology Nurse","Wound Care Nurse","Ostomy Care Nurse","Informatics Nurse","Research Nurse","Case Management Nurse","Nurse Educator","Nurse Administrator/Manager","Occupational Health Nurse","Flight Nurse / Transport Nurse","Correctional Nurse","IV Therapy Nurse","Transplant Nurse","Genetics Nurse","Pain Management Nurse","Military Nurse","Ambulatory Care Nurse","Endoscopy Nurse","Plastic Surgery Nurse","Rural Health Nurse","Parish Nurse / Faith Community Nurse","Camp Nurse","Hyperbaric Nurse","Legal Nurse Consultant","Integrative Health Nurse"],Uo=["Select your nursing field...",...PP.sort()];function Vv(r){const e=r.toLowerCase();for(const t of RP)if(e.includes(t))return{isValid:!1,message:"Content contains inappropriate language."};return r.length>Fc?{isValid:!1,message:`Content exceeds ${Fc} character limit.`}:{isValid:!0,message:"Content is valid."}}let bP=class extends ps.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ReviewsHubPage ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-120px)] p-4 bg-red-100 text-red-800 rounded-lg shadow-md",children:[y.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong."}),y.jsx("p",{className:"text-lg text-center mb-2",children:"We're sorry, but there was an error loading this section."}),y.jsx("p",{className:"text-sm text-red-600 text-center",children:this.state.error&&this.state.error.toString()}),y.jsxs("details",{className:"mt-4 text-left text-sm p-2 bg-red-50 rounded-md",children:[y.jsx("summary",{className:"font-semibold cursor-pointer",children:"Error Details"}),y.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words text-red-700",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),y.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"mt-6 px-6 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-colors",children:"Try Again"})]}):this.props.children}};const bw=()=>{const{db:r,auth:e,currentUserId:t,currentUserIsAnonymous:s,appId:o,showMessage:l,setShowAuthModal:d}=D.useContext(zl),[f,p]=D.useState(""),[v,E]=D.useState([]),[I,x]=D.useState([]),[j,H]=D.useState(!0),[$,M]=D.useState(!1),[ee,oe]=D.useState(!1),[J,Ie]=D.useState(20),[_e,we]=D.useState(null),[N,C]=D.useState(""),[S,P]=D.useState([]),[k,O]=D.useState([]),[A,Xe]=D.useState(!1),[it,lt]=D.useState(!1),[le,q]=D.useState(null),[me,ie]=D.useState([]),[L,G]=D.useState(!1),[ye,Ae]=D.useState(!1),[ke,Ne]=D.useState(""),[Ue,Oe]=D.useState(0),[Le,Ge]=D.useState(Uo[0]),[wt,ue]=D.useState(""),[ne,de]=D.useState([]),[je,Gt]=D.useState(!1),[Kt,wn]=D.useState(!1),[Kn,Pt]=D.useState({}),[Qt,Ln]=D.useState({}),[En,In]=D.useState({}),[pn,tt]=D.useState(!1),[se,xe]=D.useState(""),[Qn,dr]=D.useState(""),[hr,Yn]=D.useState(!1),[Rr,Ss]=D.useState(""),[Pr,Cs]=D.useState(""),[As,jn]=D.useState(!0),br=ps.useRef(null),Jn=ps.useRef(null),rn=ps.useRef(null),Mn=ps.useRef(null),Qr=ps.useRef(null);console.log("ReviewsHubPage: Component rendered."),D.useEffect(()=>{let K=()=>{};if(console.log("ReviewsHubPage: useEffect for hospital onSnapshot. DB, AppId Ready:",!!r,!!o),r&&o){H(!0),M(!1);const ze=ll(r,`artifacts/${o}/public/data/hospitals`);K=vc(ze,Se=>{console.log("ReviewsHubPage: onSnapshot triggered for hospitals.");const Ce=[];Se.forEach(Be=>{const rt=Be.data();rt.name&&Ce.push({id:Be.id,name:rt.name,location:rt.location||""})}),Ce.sort((Be,rt)=>Be.name.localeCompare(rt.name)),console.log("ReviewsHubPage: Fetched Hospitals from snapshot:",Ce.length),E(Ce),H(!1),M(Ce.length===0)},Se=>{console.error("ReviewsHubPage: Error fetching hospitals with onSnapshot:",Se),l("Error loading hospitals.","error"),H(!1),M(!0)})}else H(!0),E([]),x([]),M(!1),oe(!1);return()=>{console.log("ReviewsHubPage: Cleaning up hospital onSnapshot listener."),K()}},[r,o,l]);const Xn=D.useCallback(async K=>{if(K.preventDefault(),!t||s){l("You must be logged in to add a hospital. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready to add a hospital.","error");return}if(!se.trim()||!Qn.trim()){l("Please enter both hospital name and location.","error");return}try{const Se={id:Date.now().toString(),name:se.trim(),location:Qn.trim()};E(Be=>[...Be,Se].sort((rt,bt)=>rt.name.localeCompare(bt.name))),xe(""),dr(""),tt(!1);const Ce=fs(ll(r,`artifacts/${o}/public/data/hospitals`));await cl(Ce,{name:Se.name,location:Se.location,createdAt:new Date().toISOString(),createdBy:t}),l("Hospital added successfully! You can now add doctors to it.","success"),Mn.current&&setTimeout(()=>{const Be=document.querySelector(`button.bg-gray-100[data-hospital-name="${Se.name}"]`);Be&&Be.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(ze){console.error("ReviewsHubPage: Error adding hospital:",ze),l(`Error adding hospital: ${ze.message}`,"error"),E(Se=>Se.filter(Ce=>Ce.id!==tempId))}},[t,s,r,o,se,Qn,l,d]);D.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering hospitals triggered. HospitalInput:",f,"CurrentDisplayCount:",J);const K=f.trim().toLowerCase(),ze=v.filter(Se=>Se.name.toLowerCase().includes(K)||Se.location&&Se.location.toLowerCase().includes(K));x(ze.slice(0,J)),oe(ze.length>J),M(ze.length===0&&!j)},[v,f,J,j]);const Rs=D.useCallback(()=>{Ie(K=>K+20)},[]),Yr=D.useCallback(async K=>{if(console.log("ReviewsHubPage: handleHospitalSelect called for hospital:",K.name),we(K),console.log("ReviewsHubPage: Populating hospitalInput with:",K.name),p(K.name),C(""),Xe(!0),lt(!1),P([]),O([]),Yn(!1),!r||!o||!K.id){l("Firebase or hospital ID missing for fetching doctors.","error"),Xe(!1),lt(!0);return}const ze=ll(r,`artifacts/${o}/public/data/hospitals/${K.id}/doctors`);return vc(ze,Ce=>{console.log("ReviewsHubPage: onSnapshot triggered for doctors.");const Be=[];Ce.forEach(Qe=>{const ot=Qe.data(),yt=ot.ratings||[],Tn=yt.length>0?yt.reduce((Xr,ut)=>Xr+(ut.stars||0),0)/yt.length:0;ot.name&&Be.push({id:Qe.id,hospitalId:K.id,...ot,averageRating:Tn,numReviews:yt.length})}),Be.sort((Qe,ot)=>Qe.name.localeCompare(ot.name)),console.log("ReviewsHubPage: Fetched Doctors from snapshot for selected hospital:",Be.length),P(Be),Xe(!1),lt(Be.length===0);const rt=N.trim().toLowerCase(),bt=Be.filter(Qe=>Qe.name.toLowerCase().includes(rt)||Qe.specialty&&Qe.specialty.toLowerCase().includes(rt));O(bt)},Ce=>{console.error("ReviewsHubPage: Error fetching doctors with onSnapshot:",Ce),l("Error loading doctors.","error"),Xe(!1),lt(!0)})},[r,o,l,N]);D.useEffect(()=>{_e&&br.current&&document.activeElement!==document.getElementById("hospital-input")&&(console.log("ReviewsHubPage: Scrolling useEffect triggered for doctor selection section."),setTimeout(()=>{requestAnimationFrame(()=>{br.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[_e]),D.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering doctors triggered. DoctorInput:",N);const K=N.trim().toLowerCase(),ze=S.filter(Se=>Se.name.toLowerCase().includes(K)||Se.specialty&&Se.specialty.toLowerCase().includes(K));O(ze)},[S,N]);const Ti=D.useCallback(async K=>{if(K.preventDefault(),!t||s){l("You must be logged in to add a doctor. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!_e||!_e.id){l("Please select a hospital first to add a doctor.","error");return}if(!Rr.trim()||!Pr.trim()){l("Please enter both doctor name and specialty.","error");return}try{const Se={id:Date.now().toString(),hospitalId:_e.id,name:Rr.trim(),specialty:Pr.trim(),ratings:[],averageRating:0,numReviews:0};P(Be=>[...Be,Se].sort((rt,bt)=>rt.name.localeCompare(bt.name))),Ss(""),Cs(""),Yn(!1);const Ce=fs(ll(r,`artifacts/${o}/public/data/hospitals/${_e.id}/doctors`));await cl(Ce,{name:Se.name,specialty:Se.specialty,ratings:[],createdAt:new Date().toISOString(),createdBy:t}),l(`Dr. ${Se.name} added successfully to ${_e.name}!`,"success"),Qr.current&&setTimeout(()=>{const Be=document.querySelector(`button.bg-gray-100[data-doctor-name="${Se.name}"]`);Be&&Be.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(ze){console.error("ReviewsHubPage: Error adding doctor:",ze),l(`Error adding doctor: ${ze.message}`,"error"),P(Se=>Se.filter(Ce=>Ce.id!==tempId))}},[t,s,r,o,_e,Rr,Pr,l,d]),fr=D.useCallback(async K=>{console.log("ReviewsHubPage: handleDoctorSelect called for doctor:",K.name),q(K),C(K.name),G(!0),Ae(!1),jn(!0),Jn.current&&(console.log("ReviewsHubPage: Scrolling to doctor reviews display section."),setTimeout(()=>{requestAnimationFrame(()=>{Jn.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[]);D.useEffect(()=>{let K=()=>{};if(le&&r&&o){const ze=fs(r,`artifacts/${o}/public/data/hospitals/${le.hospitalId}/doctors/${le.id}`);console.log("ReviewsHubPage: Setting up onSnapshot for doctorDocRef:",ze.path),K=vc(ze,Se=>{var Ce;if(console.log("ReviewsHubPage: onSnapshot triggered for doctorDocRef."),G(!1),!Se.exists()||!((Ce=Se.data())!=null&&Ce.ratings)||Se.data().ratings.length===0)console.log("ReviewsHubPage: No reviews or document data for this doctor found in snapshot."),Ae(!0),ie([]);else{Ae(!1);const rt=Se.data().ratings||[];console.log("ReviewsHubPage: Fetched reviews from snapshot:",rt.length),rt.sort((Qe,ot)=>{const yt=ut=>ut&&typeof ut.toDate=="function"?ut.toDate().getTime():ut instanceof Date?ut.getTime():typeof ut=="string"?new Date(ut).getTime():0,Tn=yt(Qe.date);return yt(ot.date)-Tn});const bt=rt.map(Qe=>({...Qe,id:Qe.id||crypto.randomUUID(),date:Qe.date&&typeof Qe.date.toDate=="function"?Qe.date.toDate():new Date(Qe.date),comments:Qe.comments?Qe.comments.map(ot=>({...ot,date:ot.date&&typeof ot.date.toDate=="function"?ot.date.toDate():new Date(ot.date)})):[]}));ie(bt),console.log("ReviewsHubPage: Reviews state updated. Current reviews count:",bt.length)}},Se=>{console.error("ReviewsHubPage: Error fetching reviews with onSnapshot:",Se),l("Error loading reviews.","error"),G(!1),Ae(!0)})}else ie([]),Ae(!1),G(!1);return()=>{console.log("ReviewsHubPage: Cleaning up onSnapshot listener."),K()}},[le,r,o,l]);const xi=D.useCallback(async()=>{var ze,Se;if(console.log("ReviewsHubPage: handleSubmitReview called."),!t||s){l("You must be logged in to submit a review. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!_e||!le){l("Please select a hospital and doctor before submitting a review.","error");return}if(Le===Uo[0]||Le.trim()===""){l("Please select or type your nursing field.","error");return}const K=Vv(ke);if(!K.isValid){l(K.message,"error");return}if(Ue===0){l("Please select a star rating.","error");return}console.log("ReviewsHubPage: auth.currentUser?.displayName at submission:",(ze=e.currentUser)==null?void 0:ze.displayName);try{const Ce=fs(r,`artifacts/${o}/public/data/hospitals/${_e.id}/doctors/${le.id}`),Be=crypto.randomUUID(),rt=new Date,bt={id:Be,stars:Ue,comment:ke,reviewerId:((Se=e.currentUser)==null?void 0:Se.displayName)||`RN-${t.substring(0,5)}`,date:rt,hospitalName:_e.name,doctorName:le.name,nursingField:Le,comments:[]};console.log("ReviewsHubPage: Submitting new review:",bt),await tf(Ce,{ratings:Dv(bt)});const Qe=fs(r,`artifacts/${o}/users/${t}/myReviews/${Be}`);await cl(Qe,{...bt,userId:t,hospitalId:_e.id,doctorId:le.id}),Ne(""),Oe(0),Ge(Uo[0]),ue(""),l("Review submitted successfully!","success"),console.log("ReviewsHubPage: Review submitted successfully!"),jn(!0)}catch(Ce){console.error("ReviewsHubPage: Error adding review: ",Ce),l(`Error submitting review: ${Ce.message}`,"error")}},[t,s,_e,le,ke,Ue,Le,r,o,l,d,e]),gt=D.useCallback(async(K,ze)=>{var Ce;if(console.log("ReviewsHubPage: handleAddCommentToReview called for reviewId:",K),!t||s){l("You must be logged in to add a comment. Please sign up or log in.","error"),d(!0);return}if(ze.trim()===""){l("Comment cannot be empty.","error");return}if(!_e||!le){l("Hospital or doctor not selected.","error");return}const Se=Vv(ze);if(!Se.isValid){l(Se.message,"error");return}try{const Be=fs(r,`artifacts/${o}/public/data/hospitals/${_e.id}/doctors/${le.id}`),rt={text:ze,userId:((Ce=e.currentUser)==null?void 0:Ce.displayName)||`RN-${t.substring(0,5)}`,date:new Date},bt=await ef(Be);if(bt.exists()){let ot=[...bt.data().ratings||[]];const yt=ot.findIndex(Tn=>Tn.id===K);if(yt!==-1){ot[yt].comments=ot[yt].comments||[],ot[yt].comments.push(rt),await tf(Be,{ratings:ot}),console.log("ReviewsHubPage: Comment added successfully to doctor review.");const Tn=fs(r,`artifacts/${o}/users/${t}/myReviews/${K}`);if((await ef(Tn)).exists())await tf(Tn,{comments:Dv(rt)}),console.log("ReviewsHubPage: Comment added successfully to existing user review.");else{const ut=fs(r,`artifacts/${o}/public/data/hospitals/${le.hospitalId}/doctors/${le.id}`),Zr=await ef(ut);if(Zr.exists()){const Si=(Zr.data().ratings||[]).find(_a=>_a.id===K);Si?(await cl(Tn,{...Si,userId:t,hospitalId:le.hospitalId,doctorId:le.id,comments:[rt]}),console.log("ReviewsHubPage: New user review document created with comment.")):console.warn("ReviewsHubPage: Could not find relevant review in public data to create user review entry.")}else console.warn("ReviewsHubPage: Public doctor document not found when trying to create user review entry for comment.")}Ln(ut=>({...ut,[K]:""})),In(ut=>({...ut,[K]:"Comment posted successfully!"})),setTimeout(()=>{Pt(ut=>({...ut,[K]:!1})),In(ut=>({...ut,[K]:""}))},1500)}else console.error("ReviewsHubPage: Error: Review not found by ID in doctor ratings array.",K),l("Failed to post comment: Review not found.","error")}else console.error("ReviewsHubPage: Doctor document not found for comment addition:",le.id),l("Failed to post comment: Doctor not found.","error")}catch(Be){console.error("ReviewsHubPage: Error adding comment to review: ",Be),l(`Error posting comment: ${Be.message}`,"error")}},[t,s,_e,le,r,o,l,d,e]),Ps=D.useCallback(()=>{if(!t||s){l("You must be logged in to write a review. Please sign up or log in.","error"),d(!0);return}wn(!0),jn(!1),rn.current&&rn.current.scrollIntoView({behavior:"smooth",block:"start"})},[t,s,l,d]);D.useCallback(()=>{wn(!1),jn(!0),Jn.current&&Jn.current.scrollIntoView({behavior:"smooth",block:"start"})},[]);const Fn=K=>{const ze=K.target.value;if(ue(ze),Ge(ze),ze.length>0){const Se=Uo.filter(Ce=>Ce.toLowerCase().includes(ze.toLowerCase())&&Ce!==Uo[0]);de(Se),Gt(!0)}else de([]),Gt(!1),Ge(Uo[0])},Jr=K=>{ue(K),Ge(K),Gt(!1),de([])};return y.jsx(bP,{children:y.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8 pt-20",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:[y.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:["Share Your RN",y.jsx("span",{className:"text-[#CC5500]",children:"Tea"}),"!"]}),y.jsxs("section",{id:"hospital-selection-section",className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[y.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Which hospital are you interested in?"}),y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[y.jsx("input",{type:"text",id:"hospital-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Search for a hospital...",value:f,onChange:K=>p(K.target.value)}),y.jsx("button",{id:"search-hospital-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Hospital"})]}),y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a hospital.","info"),d(!0)):tt(K=>!K)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:pn&&t&&!s?"Hide Add Hospital Form":y.jsxs(y.Fragment,{children:["or ",y.jsx("span",{className:"text-[#CC5500]",children:"Add Hospital"})]})}),pn&&(!t||s)&&y.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a hospital."}),pn&&t&&!s&&y.jsxs("form",{ref:Mn,onSubmit:Xn,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[y.jsx("input",{type:"text",placeholder:"New Hospital Name",value:se,onChange:K=>xe(K.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("input",{type:"text",placeholder:"Location (e.g., Boston, MA)",value:Qn,onChange:K=>dr(K.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Hospital"}),y.jsx("button",{type:"button",onClick:()=>tt(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]})]}),y.jsxs("div",{className:"mb-4 mt-8",children:[y.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Hospitals with reviews:"}),y.jsxs("div",{id:"hospitals-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[j&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading hospitals..."}),$&&!j&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No hospitals found yet. Be the first to add a review!"}),I.map(K=>y.jsx("button",{"data-hospital-name":K.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>Yr(K),children:K.name},K.id))]}),ee&&y.jsx("button",{id:"load-more-hospitals-btn",className:"mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 w-full btn-hover-scale",onClick:Rs,children:"Load More Hospitals"})]})]}),y.jsxs("section",{id:"doctor-selection-section",ref:br,className:`bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${_e?"":"hidden"}`,children:[y.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Select a doctor"}),y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[y.jsx("input",{type:"text",id:"doctor-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"e.g., Dr. Sarah Lee",value:N,onChange:K=>C(K.target.value)}),y.jsx("button",{id:"select-doctor-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Doctor"})]}),y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a doctor.","info"),d(!0)):Yn(K=>!K)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:hr&&t&&!s?"Hide Add Doctor Form":y.jsxs(y.Fragment,{children:["or ",y.jsx("span",{className:"text-[#CC5500]",children:"Add Doctor"})]})}),hr&&(!t||s)&&y.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a doctor."}),hr&&t&&!s&&y.jsxs("form",{ref:Qr,onSubmit:Ti,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[y.jsx("input",{type:"text",placeholder:"New Doctor Name",value:Rr,onChange:K=>Ss(K.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("input",{type:"text",placeholder:"Specialty (e.g., Cardiologist)",value:Pr,onChange:K=>Cs(K.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Doctor"}),y.jsx("button",{type:"button",onClick:()=>Yn(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Doctors with reviews:"}),y.jsxs("div",{id:"doctors-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[A&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading doctors..."}),it&&!A&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No doctors found for this hospital yet."}),k.map(K=>y.jsx("button",{"data-doctor-name":K.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>fr(K),children:`${K.name} (${K.specialty||"N/A"}) - Avg. ${K.averageRating.toFixed(1)} ★ (${K.numReviews})`},K.id))]}),ee&&y.jsx("button",{id:"load-more-hospitals-btn",className:"mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 w-full btn-hover-scale",onClick:Rs,children:"Load More Hospitals "})]})]}),y.jsxs("div",{id:"reviews-content-grid",className:`grid grid-cols-1 gap-8 ${le?"":"hidden"}`,children:[t&&!s&&y.jsxs("section",{id:"review-submission-section",ref:rn,className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6 cursor-pointer",onClick:()=>jn(K=>!K),children:[y.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:["Share Some Tea for ",y.jsx("span",{className:"text-[#CC5500]",children:le==null?void 0:le.name})]}),y.jsx("button",{className:"text-gray-600 hover:text-[#CC5500] transition-colors",children:As?y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]}),!As&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"review-stars",className:"block text-gray-700 text-sm font-medium mb-2",children:"Rating"}),y.jsx(Nf,{rating:Ue,onRatingChange:Oe})]}),y.jsxs("div",{className:"mb-4 relative",children:[y.jsx("label",{htmlFor:"nursing-field-input",className:"block text-gray-700 text-sm font-medium mb-2",children:"Which field of Nursing are you?"}),y.jsx("input",{type:"text",id:"nursing-field-input",className:"w-full p-3 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Start typing your nursing field...",value:wt,onChange:Fn,onFocus:()=>Gt(!0),onBlur:()=>setTimeout(()=>Gt(!1),100)}),je&&ne.length>0&&y.jsx("ul",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto mt-1",children:ne.map((K,ze)=>y.jsx("li",{className:"p-3 hover:bg-gray-100 cursor-pointer text-gray-800",onMouseDown:Se=>Se.preventDefault(),onClick:()=>Jr(K),children:K},ze))})]}),y.jsx("textarea",{id:"review-text",className:"w-full p-3 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-custom-beige",rows:"6",placeholder:"Share your experience or review here...",value:ke,onChange:K=>Ne(K.target.value),maxLength:Fc}),y.jsx("button",{id:"submit-review-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full btn-hover-scale",onClick:xi,children:"Submit Review"})]})]}),y.jsxs("section",{id:"doctor-reviews-display",ref:Jn,className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[y.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:["Here's the tea on ",y.jsx("span",{id:"display-selected-doctor-reviews",className:"text-[#CC5500] font-extrabold",children:le&&le.name?le.name:""})]}),window.innerWidth<1024&&t&&!s&&y.jsxs("button",{id:"add-review-mobile-btn",className:"bg-[#001346] text-white px-5 py-2 rounded-md hover:bg-[#000A2C] transition duration-200 btn-hover-scale mb-4 w-full",onClick:Ps,children:["Write a Review for ",le==null?void 0:le.name]}),L&&y.jsx("p",{className:"text-gray-700 italic text-center","aria-live":"polite",children:"Loading reviews..."}),ye&&!L&&y.jsx("p",{className:"text-gray-700 italic text-center","aria-live":"polite",children:"No reviews found for this doctor yet. Be the first to add one!"}),me.length>0&&y.jsx("div",{id:"reviews-list",className:"space-y-6",children:me.map((K,ze)=>{const Se={"@context":"https://schema.org","@type":"Review",itemReviewed:{"@type":"Physician",name:le==null?void 0:le.name,url:`https://www.myrntea.com/doctors/${le==null?void 0:le.id}`},reviewRating:{"@type":"Rating",ratingValue:K.stars,bestRating:5},author:{"@type":"Person",name:K.reviewerId},reviewBody:K.comment,datePublished:K.date instanceof Date?K.date.toISOString():new Date(K.date).toISOString()};return y.jsxs("div",{className:"p-5 rounded-xl shadow-lg border border-gray-100",style:{backgroundColor:"#fff8e7"},children:[y.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(Se)}}),y.jsxs("div",{className:"flex items-center mb-4",children:[y.jsx("div",{className:"w-10 h-10 bg-custom-beige rounded-full flex items-center justify-center text-gray-800 font-bold text-lg mr-3 shadow-sm",children:K.reviewerId?K.reviewerId.charAt(0).toUpperCase():"RN"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-gray-800",children:K.reviewerId}),y.jsx("p",{className:"text-sm text-gray-600",children:K.nursingField}),y.jsx("p",{className:"text-xs text-gray-500",children:K.date instanceof Date?K.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),y.jsx("div",{className:"ml-auto",children:y.jsx(Nf,{rating:K.stars,onRatingChange:()=>{},readOnly:!0})})]}),y.jsx("p",{className:"text-gray-800 leading-relaxed mb-4 text-base",children:K.comment}),y.jsxs("div",{className:"flex items-center gap-4 border-t border-gray-100 pt-3 mt-3",children:[y.jsxs("button",{className:"flex items-center text-gray-600 hover:text-blue-500 transition-colors",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Like (0)"]}),y.jsxs("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a comment.","info"),d(!0)):Pt(Ce=>({...Ce,[K.id]:!Ce[K.id]}))},className:"flex items-center text-gray-600 hover:text-green-500 transition-colors",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Comment (",K.comments?K.comments.length:0,")"]})]}),y.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[y.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Comments on this review:"})," ",K.comments&&K.comments.length>0?y.jsx("div",{className:"space-y-3",children:K.comments.map((Ce,Be)=>y.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[y.jsxs("div",{className:"flex items-center mb-1",children:[y.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-800 text-xs font-semibold mr-2",children:Ce.userId?Ce.userId.charAt(0).toUpperCase():"U"}),y.jsx("p",{className:"font-medium text-gray-800",children:Ce.userId}),y.jsx("p",{className:"text-xs text-gray-500 ml-auto",children:Ce.date instanceof Date?Ce.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),y.jsx("p",{className:"ml-8 text-gray-700",children:Ce.text})]},Ce.date.getTime()+"_"+Be))}):y.jsx("p",{className:"text-sm text-gray-500",children:"No comments on this review yet."}),Kn[K.id]&&t&&!s&&y.jsxs("div",{className:"flex mt-2",children:[y.jsx("input",{type:"text",placeholder:"Write a comment...",className:"flex-grow p-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:Ce=>{Ce.key==="Enter"&&Ce.target.value.trim()&&(gt(K.id,Ce.target.value),Ce.target.value="")},value:Qt[K.id]||"",onChange:Ce=>Ln(Be=>({...Be,[K.id]:Ce.target.value})),maxLength:Fc}),y.jsx("button",{className:"submit-comment-btn bg-custom-beige text-gray-800 px-4 py-2 rounded-r-md hover:opacity-90 transition duration-200 btn-hover-scale",onClick:()=>{const Ce=Qt[K.id];gt(K.id,Ce)},children:"Post"})]}),En[K.id]&&y.jsx("p",{className:"text-green-600 text-sm mt-2",children:En[K.id]})]})]},K.id)})})]})]})]})})},kP=()=>{const r=la(),{auth:e,showMessage:t,appId:s}=D.useContext(zl),[o,l]=D.useState(""),[d,f]=D.useState(""),[p,v]=D.useState(""),[E,I]=D.useState(""),[x,j]=D.useState(""),[H,$]=D.useState(!1);D.useEffect(()=>{if(r.hash){const ee=r.hash.substring(1),oe=document.getElementById(ee);oe&&setTimeout(()=>{oe.scrollIntoView({behavior:"smooth",block:"start"})},100)}},[r.hash]),D.useEffect(()=>{const ee=document.querySelectorAll(".revealable"),oe=new IntersectionObserver((J,Ie)=>{J.forEach(_e=>{_e.isIntersecting&&(_e.target.style.opacity=1,Ie.unobserve(_e.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return ee.forEach(J=>{oe.observe(J)}),()=>{ee.forEach(J=>{oe.unobserve(J)})}},[]);const M=D.useCallback(async ee=>{var oe;if(ee.preventDefault(),$(!0),x){console.warn("Honeypot field filled. Likely a bot submission. Discarding."),t("Thank you for your message!","success"),$(!1);return}if(!o.trim()||!d.trim()||!p.trim()||!E.trim()){t("Please fill in all required fields.","error"),$(!1);return}try{const Ie=`${`https://${s}.cloudfunctions.net`}/sendContactEmail`,_e=await fetch(Ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{name:o,email:d,subject:p,message:E}})}),we=await _e.json();if(_e.ok&&we.data.success)t("Your message has been sent successfully!","success"),l(""),f(""),v(""),I(""),j("");else{const N=((oe=we.data)==null?void 0:oe.message)||"Failed to send message. Please try again.";t(`Error: ${N}`,"error")}}catch(J){console.error("Error submitting contact form:",J),t(`An unexpected error occurred: ${J.message}`,"error")}finally{$(!1)}},[o,d,p,E,x,t,s]);return y.jsxs(y.Fragment,{children:[y.jsxs("section",{id:"home",className:"relative bg-custom-beige text-gray-800 py-24 px-6 md:px-10 lg:px-16 text-center rounded-lg mx-4 mb-2 shadow-lg overflow-hidden animate-fade-in section-hover",children:[y.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:y.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[y.jsx("defs",{children:y.jsx("pattern",{id:"dot-pattern",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:y.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"#FFC982"})})}),y.jsx("rect",{x:"0",y:"0",width:"100",height:"100",fill:"url(#dot-pattern)"})]})}),y.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[y.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 leading-tight animate-fade-in-down drop-shadow-md",children:"RNTea: Rate, Navigate, Trust."}),y.jsx("p",{className:"text-xl md:text-2xl mb-10 text-gray-700 animate-fade-in-up",children:" Do you really trust your Doctors? Let's hear from experienced RNs for a change. "}),y.jsx(Ur,{to:"#full-reviews-hub",className:"bg-white text-gray-800 hover:bg-gray-100 font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 hover:shadow-2xl border border-gray-200 animate-fade-in-up antialiased",children:" View All Reviews "})]})]}),y.jsx("section",{id:"about",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 mt-2 mb-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:y.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-center gap-12",children:[y.jsx("div",{className:"md:w-1/2 flex justify-center order-2 md:order-1 animate-slide-in-left",children:y.jsx("img",{src:"/Express-collage.jpg",alt:"Collage of diverse medical professionals working together",className:"rounded-lg shadow-xl border-4 w-full max-w-md object-cover",onError:ee=>{ee.target.onerror=null,ee.target.src="https://placehold.co/400x300/F0F0F0/888888?text=Image+Not+Loaded"}})}),y.jsxs("div",{className:"md:w-1/2 text-center md:text-left order-1 md:order-2 animate-slide-in-right",children:[y.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-6",children:"Our Philosophy"}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-4 antialiased",children:"At RNTea, we believe in transparency and community to help you find the best care. Discover insights, share experiences, and make informed decisions with confidence."}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed antialiased",children:"Our platform empowers Registered Nurses to share their honest experiences, providing a unique and invaluable perspective on healthcare providers. We aim to build a trusted resource for patients seeking reliable and empathetic care, while also helping nurses navigate career decisions whether it be short term travel contracts or a potential employer."}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mt-4 font-semibold antialiased",children:"Now spill some RNTea!"})]})]})}),y.jsx("section",{id:"full-reviews-hub",className:"relative z-10 scroll-margin-top-adjusted revealable",children:y.jsx(bw,{})}),y.jsx("section",{id:"contact",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 my-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:y.jsxs("div",{className:"container mx-auto",children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 text-center mb-16 animate-fade-in-down",children:"Contact Us!"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[y.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-left group relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),y.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Send us a Message"}),y.jsxs("form",{onSubmit:M,children:[y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"your-name",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Name"}),y.jsx("input",{type:"text",id:"your-name",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"John Doe",value:o,onChange:ee=>l(ee.target.value),required:!0})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"your-email",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Email"}),y.jsx("input",{type:"email",id:"your-email",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"you@example.com",value:d,onChange:ee=>f(ee.target.value),required:!0})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"subject",className:"block text-gray-700 text-sm font-medium mb-2",children:"Subject"}),y.jsx("input",{type:"text",id:"subject",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Regarding a review...",value:p,onChange:ee=>v(ee.target.value),required:!0})]}),y.jsxs("div",{className:"mb-6",children:[y.jsxs("label",{htmlFor:"your-message",className:"block text-gray-700 text-sm font-medium mb-2",children:["Your Message ",y.jsx("span",{className:"text-gray-500",children:"(optional)"})]}),y.jsx("textarea",{id:"your-message",rows:"5",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Share your experience... (optional)",value:E,onChange:ee=>I(ee.target.value),required:!0})]}),y.jsxs("div",{style:{display:"none"},children:[y.jsx("label",{htmlFor:"honeypot-field",children:"Leave this field blank"}),y.jsx("input",{type:"text",id:"honeypot-field",name:"honeypot",value:x,onChange:ee=>j(ee.target.value),tabIndex:"-1",autoComplete:"off"})]}),y.jsx("button",{type:"submit",className:"bg-[#FFDEB5] hover:bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-md w-full transition duration-300 ease-in-out",disabled:H,children:H?"Sending...":"Send Message"})]})]}),y.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-right group relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),y.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Find Us"}),y.jsxs("div",{className:"mb-8",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Email Addresses"}),y.jsxs("div",{className:"flex items-center mb-3",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-700 font-medium",children:"General Questions"}),y.jsx("a",{href:"mailto:questions@rntea.com",className:"text-blue-600 hover:underline",children:"questions@rntea.com"})]})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15.75c-2.648 0-5.195-.429-7.669-1.245a2.793 2.793 0 01-1.342-2.934 11.233 11.233 0 013.744-6.436 2.922 2.922 0 011.644-1.018 10.38 10.38 0 015.894 0 2.922 2.922 0 011.644 1.018 11.233 11.233 0 013.744 6.436 2.793 2.793 0 01-1.342 2.934z"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-700 font-medium",children:"Business Inquiries"}),y.jsx("a",{href:"mailto:business@rntea.com",className:"text-blue-600 hover:underline",children:"business@rntea.com"})]})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Connect with Us"}),y.jsxs("div",{className:"flex space-x-6 justify-start",children:[y.jsx("a",{href:"https://facebook.com/rntea",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-600 hover:text-blue-700 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.271 0-4.192 1.552-4.192 4.615v3.385z"})})}),y.jsx("a",{href:"https://twitter.com/rntea_official",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-gray-800 hover:text-black transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 1200 1227",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 671.544L0 1226.37H105.866L515.414 750.206L852.076 1226.37H1200L714.163 519.284ZM569.165 687.828L521.617 619.927L144.036 79.6262H302.46L603.935 515.043L651.483 582.944L1055.03 1147.37H896.59L569.165 687.828Z"})})}),y.jsx("a",{href:"https://linkedin.com/company/rntea-4a8149371/",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-700 hover:text-blue-800 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),y.jsx("a",{href:"https://instagram.com/rntea_official",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-pink-500 hover:text-pink-600 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4c0 3.2-2.6 5.8-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8C2 4.6 4.6 2 7.8 2zm-.2 2A2.2 2.2 0 0 0 5.4 6.2v8.4c0 1.2.9 2.2 2.2 2.2h8.4a2.2 2.2 0 0 0 2.2-2.2V6.2A2.2 2.2 0 0 0 16.2 4H7.6zM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm6.5-3A1.5 1.5 0 1 0 18.5 7 1.5 1.5 0 0 0 18.5 4z"})})})]})]})]})]})]})})]})},NP=()=>{const{db:r,currentUserId:e,appId:t,showMessage:s}=D.useContext(zl),[o,l]=D.useState([]),[d,f]=D.useState(!0);return D.useEffect(()=>{if(!r||!t||!e){f(!1);return}f(!0);const p=ll(r,`artifacts/${t}/users/${e}/myReviews`),v=wP(p,EP("userId","==",e),IP("date","desc")),E=vc(v,I=>{const x=[];I.forEach(j=>{const H=j.data();x.push({id:j.id,...H,date:H.date&&typeof H.date.toDate=="function"?H.date.toDate():new Date(H.date),comments:H.comments?H.comments.map($=>({...$,date:$.date&&typeof $.date.toDate=="function"?$.date.toDate():new Date($.date)})):[]})}),l(x),f(!1),console.log("MyReviewsDisplay: Fetched user reviews:",x.length)},I=>{console.error("MyReviewsDisplay: Error fetching user's reviews:",I),s("Error loading your reviews.","error"),f(!1)});return()=>{console.log("MyReviewsDisplay: Cleaning up onSnapshot listener."),E()}},[r,t,e,s]),d?y.jsx("div",{className:"flex justify-center items-center h-48",children:y.jsx("p",{className:"text-center text-gray-500 italic",children:"Loading your reviews..."})}):o.length===0?y.jsx("div",{className:"flex justify-center items-center h-48",children:y.jsx("p",{className:"text-center text-gray-500 italic",children:"You haven't posted any reviews yet. Share your first tea!"})}):y.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:"My Tea"}),y.jsx("p",{className:"text-lg text-gray-700 text-center mb-6",children:"Here's a look at the reviews you've shared and the engagement they've received."}),y.jsx("div",{className:"space-y-8",children:o.map(p=>y.jsxs("div",{className:"p-6 rounded-xl shadow-lg border border-gray-100 bg-white",children:[y.jsxs("div",{className:"flex items-center mb-4",children:[y.jsx("div",{className:"w-10 h-10 bg-custom-beige rounded-full flex items-center justify-center text-gray-800 font-bold text-lg mr-3 shadow-sm",children:p.reviewerId?p.reviewerId.charAt(0).toUpperCase():"RN"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-gray-800",children:p.reviewerId}),y.jsx("p",{className:"text-sm text-gray-600",children:p.nursingField}),y.jsx("p",{className:"text-xs text-gray-500",children:p.date instanceof Date?p.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),y.jsx("div",{className:"ml-auto",children:y.jsx(Nf,{rating:p.stars,readOnly:!0})})]}),y.jsx("p",{className:"text-gray-800 leading-relaxed mb-4 text-base",children:p.comment}),y.jsxs("div",{className:"flex items-center gap-4 border-t border-gray-100 pt-3 mt-3",children:[y.jsxs("span",{className:"flex items-center text-gray-600",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Likes (0)"]}),y.jsxs("span",{className:"flex items-center text-gray-600",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Comments (",p.comments?p.comments.length:0,")"]})]}),y.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[y.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Comments on your review:"}),p.comments&&p.comments.length>0?y.jsx("div",{className:"space-y-3",children:p.comments.map((v,E)=>y.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[y.jsxs("div",{className:"flex items-center mb-1",children:[y.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-800 text-xs font-semibold mr-2",children:v.userId?v.userId.charAt(0).toUpperCase():"U"}),y.jsx("p",{className:"font-medium text-gray-800",children:v.userId}),y.jsx("p",{className:"text-xs text-gray-500 ml-auto",children:v.date instanceof Date?v.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),y.jsx("p",{className:"ml-8 text-gray-700",children:v.text})]},v.date.getTime()+"_"+E))}):y.jsx("p",{className:"text-sm text-gray-500",children:"No comments on this review yet."})]})]},p.id))})]})};function DP({onClose:r}){const e=D.useRef(null);return D.useEffect(()=>{const t=s=>{s.key==="Escape"&&r()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[r]),D.useEffect(()=>{const t=o=>{e.current&&!e.current.contains(o.target)&&r()},s=setTimeout(()=>{document.addEventListener("mousedown",t)},100);return()=>{clearTimeout(s),document.removeEventListener("mousedown",t)}},[r]),y.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{ref:e,className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative p-6 md:p-8",children:[y.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl font-bold leading-none","aria-label":"Close",children:"×"}),y.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-6 text-center",children:"The RNTea business Data Protection Protocol"}),y.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mt-8 mb-4 text-center",children:"Version 2.1 | Effective Date: July 12, 2025"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Preamble"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:'WHEREAS, RNTea business ("RNTea business," "we," "our") is a data-driven enterprise that values the trust placed in it by its users, clients, and partners ("Data Subjects," "you," "your");'}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the processing of personal data is a fundamental aspect of our operations;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the protection of personal data is a fundamental right, as articulated in international and national legal frameworks, including but not limited to the GDPR (Regulation (EU) 2016/679) and the CCPA (California Civil Code § 1798.100 et seq.), and other applicable data protection laws;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, this Protocol is designed to be a comprehensive, transparent, and legally compliant framework governing our collection, use, retention, and disclosure of personal data;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"THEREFORE, RNTea business hereby establishes this Data Protection Protocol, which applies to all processing of personal data by the company."}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article I: Foundational Principles of Data Processing"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business adheres to the following principles, which govern all data processing activities:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Lawfulness, Fairness, and Transparency:"})," We process personal data lawfully, fairly, and in a transparent manner. This Protocol serves as the primary instrument for achieving this transparency."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Purpose Limitation:"})," We collect personal data for specified, explicit, and legitimate purposes and do not process it in a manner incompatible with those purposes."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Data Minimization:"})," We collect only the personal data that is adequate, relevant, and limited to what is necessary in relation to the purposes for which it is processed."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Accuracy:"})," We take every reasonable step to ensure that personal data is accurate and, where necessary, kept up to date. Inaccurate personal data will be rectified or erased without undue delay."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Storage Limitation:"})," We retain personal data for no longer than is necessary for the purposes for which it is processed."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Integrity and Confidentiality:"})," We process personal data in a manner that ensures appropriate security, including protection against unauthorized or unlawful processing and against accidental loss, destruction, or damage, using appropriate technical and organizational measures."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Accountability:"})," As the data controller, RNTea business is responsible for, and must be able to demonstrate compliance with, the principles outlined in this Protocol."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article II: Categories of Personal Data Collected & Lawful Basis"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"The personal data we process falls into the following categories, with the corresponding lawful basis for processing:"}),y.jsx("div",{className:"overflow-x-auto mb-4",children:y.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Category of Data"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Examples of Data Collected"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Purpose of Processing"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Lawful Basis for Processing"})]})}),y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Identity & Account Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Name, email address, username, password (hashed), professional title"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To create and manage your account, provide access to services, and communicate with you."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Contractual Necessity:"})," The processing is necessary for the performance of a contract to which you are a party."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Transactional Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Billing address, payment information (tokenized), subscription history"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To process payments, manage subscriptions, and maintain financial records."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Contractual Necessity:"})," Necessary to fulfill a transaction you initiated. ",y.jsx("strong",{children:"Legal Obligation:"})," To comply with tax and accounting laws."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Technical & Usage Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"IP address, browser type, operating system, pages visited, time spent, clickstream data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To ensure the security and stability of our platform, analyze usage patterns, and improve our services."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Legitimate Interest:"})," Our legitimate interest in securing our platform, preventing fraud, and understanding user behavior to enhance our products."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Correspondence & Support Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Content of emails, chat messages, or support tickets"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To respond to your inquiries, provide customer support, and resolve disputes."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Legitimate Interest:"})," To provide effective customer service. ",y.jsx("strong",{children:"Contractual Necessity:"})," To assist with issues related to our service."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Voluntarily Provided Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Your professional bio, profile picture, or survey responses"}),y.jsxs("td",{className:"py-2 px-4 text-gray-700",children:[y.jsx("strong",{children:"Consent:"})," Your explicit consent is requested and may be withdrawn at any time."]})]})]})]})}),y.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[y.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Legitimate Interest Balancing Test"}),y.jsx("br",{}),`The use of "Legitimate Interest" as a lawful basis is subject to a strict balancing test under the GDPR. A data controller must demonstrate that its interests in processing the data (e.g., security, service improvement) are not overridden by the fundamental rights and freedoms of the Data Subject. This requires a formal assessment and is a point of frequent legal scrutiny. In this model, we assert that the processing of technical data for security purposes is a legitimate interest vital to protecting all users, and a user's reasonable expectation is that such data would be processed for platform integrity.`]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article III: Data Sharing and Disclosure"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"We may share your personal data with the following categories of recipients, always under the principles of data minimization and purpose limitation:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Service Providers:"})," We engage third-party service providers (data processors) who perform functions on our behalf, such as cloud hosting, payment processing, and analytics. These providers are bound by contractual obligations to protect your data and are prohibited from using it for any purpose other than providing their service to us."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Legal and Regulatory Authorities:"})," We will disclose your data when legally required to do so, such as in response to a subpoena, court order, or governmental request."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Business Transfers:"})," In the event of a merger, acquisition, or sale of assets, your personal data may be transferred as part of the business transaction, subject to the recipient agreeing to abide by a privacy policy consistent with this Protocol."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article IV: Data Subject Rights"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"You have the following rights concerning your personal data. To exercise these rights, please contact our Data Protection Officer at the address provided in Article VIII."}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Access:"}),' You have the right to request a copy of the personal data we hold about you (a "Subject Access Request").']}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Rectification:"})," You have the right to request the correction of inaccurate or incomplete personal data."]}),y.jsxs("li",{children:[y.jsx("strong",{children:'Right to Erasure ("Right to be Forgotten"):'})," You have the right to request the deletion of your personal data under certain circumstances (e.g., if the data is no longer necessary for the purposes for which it was collected)."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Restrict Processing:"})," You have the right to request that we cease or limit the processing of your personal data under specific conditions."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Data Portability:"})," You have the right to receive your personal data in a structured, commonly used, and machine-readable format and to transmit that data to another data controller."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Object:"})," You have the right to object to the processing of your personal data based on legitimate interest or for direct marketing purposes."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Withdraw Consent:"})," Where processing is based on your consent, you have the right to withdraw that consent at any time."]})]}),y.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[y.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Practicality of Rights"}),y.jsx("br",{}),'While these rights are fundamental, their implementation is not absolute. For instance, the "Right to Erasure" may be overridden by a legal obligation to retain data (e.g., financial records for tax purposes) or if the data is required for the establishment, exercise, or defense of legal claims. A robust privacy policy must manage user expectations by clarifying these limitations.']}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article V: Data Security"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business implements appropriate technical and organizational measures to ensure a level of security appropriate to the risk. These measures include:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Pseudonymization and Encryption:"})," Where feasible, data is pseudonymized and sensitive data is encrypted both in transit and at rest."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Access Controls:"}),' Access to personal data is restricted to authorized personnel on a "need-to-know" basis.']}),y.jsxs("li",{children:[y.jsx("strong",{children:"Security Audits:"})," We conduct regular security audits and vulnerability assessments."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VI: International Data Transfers"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"As a global company, your data may be transferred to and processed in countries outside your own. We ensure that any such transfer is lawful and adequately protected. For transfers of personal data from the European Union, we rely on established mechanisms such as Standard Contractual Clauses (SCCs)."}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VII: Contact Information"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"For any questions, concerns, or to exercise your rights under this Protocol, please contact our designated Data Protection Officer (DPO):"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"DPO:"})," [Insert DPO Name]"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Email:"})," [Insert DPO Email]"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Mailing Address:"})," [Insert Mailing Address]"]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VIII: Changes to This Protocol"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"This Protocol may be amended from time to time. We will notify you of any material changes by posting the new Protocol on our website or by other means of communication. Your continued use of our services after a change indicates your acceptance of the updated terms."})]})})}const zl=D.createContext(null),el=null,VP=null;class OP extends ps.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("App.jsx ErrorBoundary: Uncaught error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-100 text-red-800 p-4 rounded-lg shadow-lg m-4",children:[y.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong in App.jsx!"}),y.jsx("p",{className:"text-lg mb-2 text-center",children:"We're sorry, but there was an issue rendering the application. Details below:"}),y.jsxs("details",{className:"mt-4 text-left p-4 bg-red-50 rounded-lg border border-red-200 overflow-auto max-w-lg",children:[y.jsx("summary",{className:"font-semibold cursor-pointer text-red-700",children:"Click for Error Details"}),y.jsx("pre",{className:"mt-2 text-sm whitespace-pre-wrap break-words font-mono text-red-900",children:this.state.error&&this.state.error.toString()}),this.state.errorInfo&&y.jsxs("pre",{className:"mt-2 text-xs text-red-600 font-mono whitespace-pre-wrap break-words",children:["Component Stack: ",this.state.errorInfo.componentStack]})]})]}):this.props.children}}function LP(){const[r,e]=D.useState(null),[t,s]=D.useState(null),[o,l]=D.useState(null),[d,f]=D.useState(null),[p,v]=D.useState(!0),[E,I]=D.useState(null),[x,j]=D.useState(!1),[H,$]=D.useState(!0),[M,ee]=D.useState({text:"",type:""}),[oe,J]=D.useState(!1),[Ie,_e]=D.useState(!1),we=la();qv();const[N,C]=D.useState(!1),[S,P]=D.useState(null),k=D.useRef(null),[O,A]=D.useState(!1),[Xe,it]=D.useState(!1),[lt,le]=D.useState(0),q=D.useCallback((ue,ne)=>{ee({text:ue,type:ne}),setTimeout(()=>ee({text:"",type:""}),5e3)},[]);D.useEffect(()=>{console.log("App.jsx: useEffect for Firebase Initialization triggered."),console.log("App.jsx: Current path detected by React Router:",we.pathname),(async()=>{try{console.log("App.jsx: Loading Firebase...");let ne=null,de="Unknown";const je={apiKey:"AIzaSyBEwSVX9UY7-MNxeYwdbY0ZmDuXzYyt56g",authDomain:"rntea-cca78.firebaseapp.com",projectId:"rntea-cca78",storageBucket:"rntea-cca78.appspot.com",messagingSenderId:"806310857835",appId:"1:806310857835:web:b03b05847c818ee4fe352e",measurementId:"G-ZKBPS9FGE"};if(console.log("App.jsx DEBUG: Constructed viteConfig:",je),je.apiKey&&je.projectId&&je.appId)ne=je,de="Vite Environment Variables (import.meta.env)";else if(!(el&&el.apiKey&&el.projectId&&el.appId))throw new Error("Firebase configuration is incomplete or missing from both Vite environment variables and Canvas setup. Please ensure either .env file is correct or Canvas variables are provided.");if(console.log(`App.jsx: Firebase config source: ${de}`),console.log("App.jsx: Firebase config being used (sensitive parts masked):",{apiKey:ne!=null&&ne.apiKey?"********":"N/A",authDomain:ne==null?void 0:ne.authDomain,projectId:ne==null?void 0:ne.projectId,storageBucket:ne==null?void 0:ne.storageBucket,messagingSenderId:ne==null?void 0:ne.messagingSenderId,appId:ne!=null&&ne.appId?"********":"N/A",measurementId:ne==null?void 0:ne.measurementId}),!ne||!ne.apiKey||!ne.projectId||!ne.appId)throw new Error(`Firebase configuration is incomplete from ${de}. Missing apiKey, projectId, or appId. This should not happen if previous checks passed.`);const Gt=a0(ne),Kt=dC(Gt),wn=aP(Gt);e(Gt),l(Kt),s(wn),console.log("App.jsx: Firebase Loaded, Awaiting Auth...");const Kn=W1(Kt,async Pt=>{var Qt,Ln,En,In;if(console.log("App.jsx: onAuthStateChanged - User status changed. User:",Pt),Pt)f(Pt.uid),v(Pt.isAnonymous),I(Pt.displayName);else{console.log("App.jsx: No user found. Checking for custom token.");let pn=null;try{pn=typeof __initial_auth_token<"u"?__initial_auth_token:null}catch(tt){console.warn("App.jsx: __initial_auth_token is not declared or accessible:",tt)}if(pn){console.log("App.jsx: Signing in with custom token...");try{await j1(Kt,pn),f((Qt=Kt.currentUser)==null?void 0:Qt.uid),v(((Ln=Kt.currentUser)==null?void 0:Ln.isAnonymous)||!1),I((En=Kt.currentUser)==null?void 0:En.displayName),console.log("App.jsx: Custom token sign-in successful. Current user ID:",(In=Kt.currentUser)==null?void 0:In.uid)}catch(tt){console.error("App.jsx: Error during custom token authentication:",tt),q(`Authentication failed: ${tt.message}`,"error"),f(null),v(!0),I(null)}}else console.log("App.jsx: No custom token found. User remains signed out by default."),f(null),v(!0),I(null)}j(!0),$(!1),console.log("App.jsx: Firebase initialization complete. AuthReady:",!0,"LoadingFirebase:",!1)});return()=>{console.log("App.jsx: useEffect cleanup - Unsubscribing from auth state changes."),Kn()}}catch(ne){console.error("App.jsx: FATAL ERROR: Failed to initialize Firebase application:",ne),q("Failed to initialize application. Please try again later.","error"),$(!1),j(!1)}})()},[we.pathname,el,q]),window.onloadCallback=()=>{console.log("App.jsx: window.onloadCallback triggered from reCAPTCHA script."),it(!0)},D.useEffect(()=>{x&&o&&Xe&&typeof window.grecaptcha<"u"&&window.grecaptcha.ready&&!S?(console.log("App.jsx: All prerequisites met. Initializing RecaptchaVerifier..."),window.grecaptcha.ready(()=>{if(S){console.log("App.jsx: RecaptchaVerifier already exists in state, skipping re-initialization."),A(!0);return}console.log("App.jsx: Creating and rendering RecaptchaVerifier instance...");try{if(!document.getElementById("recaptcha-container-app")){console.error("App.jsx: Central reCAPTCHA container 'recaptcha-container-app' not found!"),q("reCAPTCHA container missing. Phone verification may fail.","error");return}const ne=new W0(o,"recaptcha-container-app",{size:"invisible",callback:de=>{console.log("App.jsx: Central reCAPTCHA callback fired (solved):",de),A(!0),le(je=>je+1)},"expired-callback":()=>{console.log("App.jsx: Central reCAPTCHA expired."),q("Verification expired. Please try again.","error"),A(!1),k.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset(k.current),le(de=>de+1)},"error-callback":de=>{console.error("App.jsx: reCAPTCHA error callback:",de),q("Failed to load verification. Please refresh.","error"),A(!1),le(je=>je+1)}});ne.render().then(de=>{console.log("App.jsx: Central reCAPTCHA rendered with widget ID:",de),k.current=de,P(ne),ne.size==="invisible"&&A(!0),console.log("App.jsx: recaptchaVerifierState set and isRecaptchaReadyForUse true."),le(je=>je+1)}).catch(de=>{console.error("App.jsx: Error rendering central reCAPTCHA:",de),q("Failed to initialize verification. Please refresh.","error"),A(!1),le(je=>je+1)})}catch(ue){console.error("App.jsx: Error creating central RecaptchaVerifier instance:",ue),q("Failed to initialize verification. Check console.","error"),A(!1),le(ne=>ne+1)}})):S&&S.size==="invisible"&&(O||(A(!0),le(ue=>ue+1)))},[x,o,Xe,q,O,S]),D.useEffect(()=>()=>{S&&(console.log("App.jsx: Cleaning up central reCAPTCHA Verifier..."),k.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"?window.grecaptcha.reset(k.current):window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&(console.warn("App.jsx: Attempting general reCAPTCHA reset as widget ID is null."),window.grecaptcha.reset()),S.clear(),P(null),k.current=null,A(!1),le(ue=>ue+1))},[S]);const me=D.useCallback(async()=>{if(!O||!S||typeof S.execute!="function")throw console.error("App.jsx: reCAPTCHA Verifier not ready for execution. isReady:",O,"instance:",S),q("Verification not ready. Please try again.","error"),new Error("reCAPTCHA not ready.");try{const ue=await S.execute();return console.log("App.jsx: reCAPTCHA token obtained:",ue),ue}catch(ue){throw console.error("App.jsx: Error executing reCAPTCHA:",ue),q(`Verification failed: ${ue.message}`,"error"),ue}},[q,O,S]),ie=D.useCallback(()=>{k.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"?(console.log("App.jsx: Resetting central reCAPTCHA widget with ID."),window.grecaptcha.reset(k.current)):window.grecaptcha&&typeof window.grecaptcha.reset=="function"?(console.warn("App.jsx: Attempting general reCAPTCHA reset as widget ID is null."),window.grecaptcha.reset()):console.warn("App.jsx: Cannot reset reCAPTCHA: grecaptcha or reset function not available."),A(!1)},[]),L=D.useCallback(async(ue,ne)=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const de=await j0(o,ue,ne);return q("Account created successfully!","success"),J(!1),de.user}catch(de){throw console.error("Error signing up with email/password:",de),q(`Sign Up Failed: ${de.message}`,"error"),de}},[o,q]),G=D.useCallback(async(ue,ne)=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const de=await M1(o,ue,ne);return q("Signed in successfully!","success"),J(!1),de.user}catch(de){return console.error("Error signing in with email/password:",de),q(`Sign In Failed: ${de.message}`,"error"),null}},[o,q]),ye=D.useCallback(async()=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const ue=new ms;let ne;return o.currentUser&&o.currentUser.isAnonymous?(ne=await tc(o.currentUser,await nc(o,ue).then(de=>de.credential)),q("Anonymous account linked with Google!","success")):(ne=await nc(o,ue),q("Signed in with Google successfully!","success")),J(!1),ne.user}catch(ue){return console.error("Error signing in with Google:",ue),ue.code==="auth/account-exists-with-different-credential"?q("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):q(`Google Sign In Failed: ${ue.message}`,"error"),null}},[o,q,J]),Ae=D.useCallback(async()=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const ue=new Qo("apple.com");let ne;return o.currentUser&&o.currentUser.isAnonymous?(ne=await tc(o.currentUser,await nc(o,ue).then(de=>de.credential)),q("Anonymous account linked with Apple!","success")):(ne=await nc(o,ue),q("Signed in with Apple successfully!","success")),J(!1),ne.user}catch(ue){return console.error("Error signing in with Apple:",ue),ue.code==="auth/account-exists-with-different-credential"?q("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):q(`Apple Sign In Failed: ${ue.message}`,"error"),null}},[o,q]),ke=D.useCallback(async()=>{if(!o){q("Firebase Auth not initialized.","error");return}try{await q1(o),f(null),v(!0),I(null),q("Signed out successfully!","success")}catch(ue){console.error("Error signing out:",ue),q(`Sign Out Failed: ${ue.message}`,"error")}},[o,q]),Ne=D.useCallback(async(ue,ne)=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return q("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const de=to.credential(ue,ne),je=await tc(o.currentUser,de);return q("Anonymous account linked with email/password!","success"),J(!1),je.user}catch(de){return console.error("Error linking anonymous account with email/password:",de),q(`Linking Failed: ${de.message}`,"error"),null}},[o,q]),Ue=D.useCallback(async()=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return q("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const ue=new Qo("apple.com"),ne=await tc(o.currentUser,ue);return q("Anonymous account linked with Apple!","success"),J(!1),ne.user}catch(ue){return console.error("Error linking anonymous account with Apple:",ue),q(`Linking Failed: ${ue.message}`,"error"),null}},[o,q]),Oe=D.useMemo(()=>({app:r,db:t,auth:o,currentUserId:d,currentUserIsAnonymous:p,authReady:x,appId:"rntea-cca78",showMessage:q,signUpWithEmailPassword:L,signInWithEmailPassword:G,signInWithGoogle:ye,signInWithApple:Ae,signOutUser:ke,linkAnonymousWithEmailPassword:Ne,linkAnonymousWithApple:Ue,setShowAuthModal:J,executeRecaptcha:me,resetRecaptcha:ie,isRecaptchaReadyForUse:O,recaptchaVerifier:S,currentUserDisplayName:E}),[r,t,o,d,p,x,VP,q,L,G,ye,Ae,ke,Ne,Ue,J,me,ie,O,S,E]),Le=D.useCallback(()=>{C(ue=>!ue),document.body.style.overflow=N?"":"hidden"},[N]),Ge=D.useCallback(()=>{C(!1),document.body.style.overflow=""},[]),wt=D.useCallback(ue=>{if(ue==="/")return we.pathname==="/";if(ue==="/reviews")return we.pathname==="/reviews";if(ue==="/my-tea")return we.pathname==="/my-tea";if(ue.startsWith("/#")){const ne=ue.substring(2);return we.pathname==="/"&&we.hash===`#${ne}`}return!1},[we.pathname,we.hash]);return y.jsxs("div",{className:"min-h-screen flex flex-col",children:[y.jsxs("header",{className:"bg-white shadow-sm py-8 px-6 md:px-10 lg:px-16 flex justify-between items-center rounded-b-lg fixed top-0 w-full z-30",children:[y.jsx(Ur,{to:"/",className:"text-3xl font-bold text-gray-800 rntea-brand",children:"RNTea"}),y.jsx("nav",{className:"hidden md:block",children:y.jsxs("ul",{className:"flex space-x-6 items-center",children:[y.jsx("li",{children:y.jsx(Ur,{to:"/#about",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${wt("/#about")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["About",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:y.jsx(Ur,{to:"/reviews",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${wt("/reviews")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["Reviews",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),d&&!p&&y.jsx("li",{children:y.jsx(Ur,{to:"/my-tea",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${wt("/my-tea")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["My Tea",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:y.jsx(Ur,{to:"/#contact",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${wt("/#contact")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["Contact",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:d?y.jsx("button",{onClick:ke,className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):y.jsx("button",{onClick:()=>J(!0),className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})})]})}),y.jsxs("div",{className:`hamburger-menu md:hidden flex flex-col justify-around w-8 h-6 cursor-pointer z-50 ${N?"open":""}`,id:"hamburger-menu",onClick:Le,children:[y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"})]})]}),y.jsxs("div",{className:`mobile-nav-overlay md:hidden fixed top-0 left-0 w-full h-full bg-white bg-opacity-98 z-40 flex flex-col justify-center items-center transition-transform duration-400 ease-in-out ${N?"open":""}`,id:"mobile-nav-overlay",children:[y.jsx("button",{className:"absolute top-6 right-6 text-gray-800 hover:text-gray-600 text-4xl focus:outline-none z-50",onClick:Ge,"aria-label":"Close navigation menu",children:"×"}),y.jsx(Ur,{to:"/#about",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Ge,style:{animationDelay:"0.1s"},children:y.jsxs("span",{className:"relative inline-block",children:["About",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),y.jsx(Ur,{to:"/reviews",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Ge,style:{animationDelay:"0.2s"},children:y.jsxs("span",{className:"relative inline-block",children:["Reviews",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),d&&!p&&y.jsx(Ur,{to:"/my-tea",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Ge,style:{animationDelay:"0.25s"},children:y.jsxs("span",{className:"relative inline-block",children:["My Tea",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),y.jsx(Ur,{to:"/#contact",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Ge,style:{animationDelay:"0.3s"},children:y.jsxs("span",{className:"relative inline-block",children:["Contact",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),d?y.jsx("button",{onClick:()=>{ke(),Ge()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):y.jsx("button",{onClick:()=>{J(!0),Ge()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})]}),y.jsxs("main",{className:"flex-grow w-full flex flex-col mt-[120px]",children:[y.jsx(CP,{message:M.text,type:M.type}),y.jsx("div",{id:"recaptcha-container-app",className:"hidden"}),y.jsx(OP,{children:H?y.jsx("p",{className:"text-center text-gray-500 py-8",children:"App.jsx: Initializing application and Firebase..."}):y.jsxs(zl.Provider,{value:Oe,children:[y.jsxs(OI,{children:[console.log(`App.jsx: Route matched for path: ${we.pathname}`),y.jsx(tl,{path:"/",element:y.jsx(kP,{})}),y.jsx(tl,{path:"/reviews",element:y.jsx(bw,{})}),y.jsx(tl,{path:"/my-tea",element:y.jsx(NP,{})})," ",y.jsx(tl,{path:"/test-route",element:y.jsx("h2",{className:"text-center text-2xl text-center mt-8",children:"This is a Test Route."})})]}),oe&&y.jsx(AP,{onClose:()=>J(!1)},`${lt}-${O}`)]})})]}),y.jsx("footer",{className:"bg-white py-4 px-6 md:px-10 lg:px-16 border-t border-gray-200 text-center text-gray-600",children:y.jsxs("p",{className:"text-sm",children:["© ",new Date().getFullYear()," RNTea business. All Rights Reserved.",y.jsx("button",{onClick:()=>_e(!0),className:"ml-1 text-blue-600 hover:underline focus:outline-none",children:"Privacy Policy"})]})}),Ie&&y.jsx(DP,{onClose:()=>_e(!1)})]})}const Ov=document.getElementById("root");Ov?(console.log("main.jsx: Root element found. Attempting to mount React App with Router..."),HE.createRoot(Ov).render(y.jsx(ps.StrictMode,{children:y.jsx(BI,{children:y.jsx(LP,{})})})),console.log("main.jsx: React App with Router mount instruction sent.")):console.error("main.jsx: ERROR - Root element not found in DOM. Cannot mount React App.");
