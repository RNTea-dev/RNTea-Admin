function LE(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Mv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Mh={exports:{}},Ja={},Fh={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function jE(){if(Mg)return qe;Mg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,H={};function M(j,G,Te){this.props=j,this.context=G,this.refs=H,this.updater=Te||L}M.prototype.isReactComponent={},M.prototype.setState=function(j,G){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,G,"setState")},M.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function ee(){}ee.prototype=M.prototype;function re(j,G,Te){this.props=j,this.context=G,this.refs=H,this.updater=Te||L}var Y=re.prototype=new ee;Y.constructor=re,$(Y,M.prototype),Y.isPureReactComponent=!0;var ce=Array.isArray,le=Object.prototype.hasOwnProperty,de={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function R(j,G,Te){var Ae,Ve={},Oe=null,ze=null;if(G!=null)for(Ae in G.ref!==void 0&&(ze=G.ref),G.key!==void 0&&(Oe=""+G.key),G)le.call(G,Ae)&&!N.hasOwnProperty(Ae)&&(Ve[Ae]=G[Ae]);var je=arguments.length-2;if(je===1)Ve.children=Te;else if(1<je){for(var Be=Array(je),et=0;et<je;et++)Be[et]=arguments[et+2];Ve.children=Be}if(j&&j.defaultProps)for(Ae in je=j.defaultProps,je)Ve[Ae]===void 0&&(Ve[Ae]=je[Ae]);return{$$typeof:r,type:j,key:Oe,ref:ze,props:Ve,_owner:de.current}}function S(j,G){return{$$typeof:r,type:j.type,key:G,ref:j.ref,props:j.props,_owner:j._owner}}function b(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function P(j){var G={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Te){return G[Te]})}var D=/\/+/g;function C(j,G){return typeof j=="object"&&j!==null&&j.key!=null?P(""+j.key):G.toString(36)}function He(j,G,Te,Ae,Ve){var Oe=typeof j;(Oe==="undefined"||Oe==="boolean")&&(j=null);var ze=!1;if(j===null)ze=!0;else switch(Oe){case"string":case"number":ze=!0;break;case"object":switch(j.$$typeof){case r:case e:ze=!0}}if(ze)return ze=j,Ve=Ve(ze),j=Ae===""?"."+C(ze,0):Ae,ce(Ve)?(Te="",j!=null&&(Te=j.replace(D,"$&/")+"/"),He(Ve,G,Te,"",function(et){return et})):Ve!=null&&(b(Ve)&&(Ve=S(Ve,Te+(!Ve.key||ze&&ze.key===Ve.key?"":(""+Ve.key).replace(D,"$&/")+"/")+j)),G.push(Ve)),1;if(ze=0,Ae=Ae===""?".":Ae+":",ce(j))for(var je=0;je<j.length;je++){Oe=j[je];var Be=Ae+C(Oe,je);ze+=He(Oe,G,Te,Be,Ve)}else if(Be=x(j),typeof Be=="function")for(j=Be.call(j),je=0;!(Oe=j.next()).done;)Oe=Oe.value,Be=Ae+C(Oe,je++),ze+=He(Oe,G,Te,Be,Ve);else if(Oe==="object")throw G=String(j),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return ze}function at(j,G,Te){if(j==null)return j;var Ae=[],Ve=0;return He(j,Ae,"","",function(Oe){return G.call(Te,Oe,Ve++)}),Ae}function ut(j){if(j._status===-1){var G=j._result;G=G(),G.then(function(Te){(j._status===0||j._status===-1)&&(j._status=1,j._result=Te)},function(Te){(j._status===0||j._status===-1)&&(j._status=2,j._result=Te)}),j._status===-1&&(j._status=0,j._result=G)}if(j._status===1)return j._result.default;throw j._result}var ue={current:null},q={transition:null},_e={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:q,ReactCurrentOwner:de};function oe(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:at,forEach:function(j,G,Te){at(j,function(){G.apply(this,arguments)},Te)},count:function(j){var G=0;return at(j,function(){G++}),G},toArray:function(j){return at(j,function(G){return G})||[]},only:function(j){if(!b(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},qe.Component=M,qe.Fragment=t,qe.Profiler=o,qe.PureComponent=re,qe.StrictMode=s,qe.Suspense=m,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,qe.act=oe,qe.cloneElement=function(j,G,Te){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Ae=$({},j.props),Ve=j.key,Oe=j.ref,ze=j._owner;if(G!=null){if(G.ref!==void 0&&(Oe=G.ref,ze=de.current),G.key!==void 0&&(Ve=""+G.key),j.type&&j.type.defaultProps)var je=j.type.defaultProps;for(Be in G)le.call(G,Be)&&!N.hasOwnProperty(Be)&&(Ae[Be]=G[Be]===void 0&&je!==void 0?je[Be]:G[Be])}var Be=arguments.length-2;if(Be===1)Ae.children=Te;else if(1<Be){je=Array(Be);for(var et=0;et<Be;et++)je[et]=arguments[et+2];Ae.children=je}return{$$typeof:r,type:j.type,key:Ve,ref:Oe,props:Ae,_owner:ze}},qe.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},qe.createElement=R,qe.createFactory=function(j){var G=R.bind(null,j);return G.type=j,G},qe.createRef=function(){return{current:null}},qe.forwardRef=function(j){return{$$typeof:f,render:j}},qe.isValidElement=b,qe.lazy=function(j){return{$$typeof:T,_payload:{_status:-1,_result:j},_init:ut}},qe.memo=function(j,G){return{$$typeof:v,type:j,compare:G===void 0?null:G}},qe.startTransition=function(j){var G=q.transition;q.transition={};try{j()}finally{q.transition=G}},qe.unstable_act=oe,qe.useCallback=function(j,G){return ue.current.useCallback(j,G)},qe.useContext=function(j){return ue.current.useContext(j)},qe.useDebugValue=function(){},qe.useDeferredValue=function(j){return ue.current.useDeferredValue(j)},qe.useEffect=function(j,G){return ue.current.useEffect(j,G)},qe.useId=function(){return ue.current.useId()},qe.useImperativeHandle=function(j,G,Te){return ue.current.useImperativeHandle(j,G,Te)},qe.useInsertionEffect=function(j,G){return ue.current.useInsertionEffect(j,G)},qe.useLayoutEffect=function(j,G){return ue.current.useLayoutEffect(j,G)},qe.useMemo=function(j,G){return ue.current.useMemo(j,G)},qe.useReducer=function(j,G,Te){return ue.current.useReducer(j,G,Te)},qe.useRef=function(j){return ue.current.useRef(j)},qe.useState=function(j){return ue.current.useState(j)},qe.useSyncExternalStore=function(j,G,Te){return ue.current.useSyncExternalStore(j,G,Te)},qe.useTransition=function(){return ue.current.useTransition()},qe.version="18.3.1",qe}var Fg;function Nf(){return Fg||(Fg=1,Fh.exports=jE()),Fh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function ME(){if(Ug)return Ja;Ug=1;var r=Nf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,v){var T,E={},x=null,L=null;v!==void 0&&(x=""+v),m.key!==void 0&&(x=""+m.key),m.ref!==void 0&&(L=m.ref);for(T in m)s.call(m,T)&&!l.hasOwnProperty(T)&&(E[T]=m[T]);if(f&&f.defaultProps)for(T in m=f.defaultProps,m)E[T]===void 0&&(E[T]=m[T]);return{$$typeof:e,type:f,key:x,ref:L,props:E,_owner:o.current}}return Ja.Fragment=t,Ja.jsx=d,Ja.jsxs=d,Ja}var zg;function FE(){return zg||(zg=1,Mh.exports=ME()),Mh.exports}var y=FE(),O=Nf();const li=Mv(O),UE=LE({__proto__:null,default:li},[O]);var tc={},Uh={exports:{}},zn={},zh={exports:{}},Bh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function zE(){return Bg||(Bg=1,function(r){function e(q,_e){var oe=q.length;q.push(_e);e:for(;0<oe;){var j=oe-1>>>1,G=q[j];if(0<o(G,_e))q[j]=_e,q[oe]=G,oe=j;else break e}}function t(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var _e=q[0],oe=q.pop();if(oe!==_e){q[0]=oe;e:for(var j=0,G=q.length,Te=G>>>1;j<Te;){var Ae=2*(j+1)-1,Ve=q[Ae],Oe=Ae+1,ze=q[Oe];if(0>o(Ve,oe))Oe<G&&0>o(ze,Ve)?(q[j]=ze,q[Oe]=oe,j=Oe):(q[j]=Ve,q[Ae]=oe,j=Ae);else if(Oe<G&&0>o(ze,oe))q[j]=ze,q[Oe]=oe,j=Oe;else break e}}return _e}function o(q,_e){var oe=q.sortIndex-_e.sortIndex;return oe!==0?oe:q.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var m=[],v=[],T=1,E=null,x=3,L=!1,$=!1,H=!1,M=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(q){for(var _e=t(v);_e!==null;){if(_e.callback===null)s(v);else if(_e.startTime<=q)s(v),_e.sortIndex=_e.expirationTime,e(m,_e);else break;_e=t(v)}}function ce(q){if(H=!1,Y(q),!$)if(t(m)!==null)$=!0,ut(le);else{var _e=t(v);_e!==null&&ue(ce,_e.startTime-q)}}function le(q,_e){$=!1,H&&(H=!1,ee(R),R=-1),L=!0;var oe=x;try{for(Y(_e),E=t(m);E!==null&&(!(E.expirationTime>_e)||q&&!P());){var j=E.callback;if(typeof j=="function"){E.callback=null,x=E.priorityLevel;var G=j(E.expirationTime<=_e);_e=r.unstable_now(),typeof G=="function"?E.callback=G:E===t(m)&&s(m),Y(_e)}else s(m);E=t(m)}if(E!==null)var Te=!0;else{var Ae=t(v);Ae!==null&&ue(ce,Ae.startTime-_e),Te=!1}return Te}finally{E=null,x=oe,L=!1}}var de=!1,N=null,R=-1,S=5,b=-1;function P(){return!(r.unstable_now()-b<S)}function D(){if(N!==null){var q=r.unstable_now();b=q;var _e=!0;try{_e=N(!0,q)}finally{_e?C():(de=!1,N=null)}}else de=!1}var C;if(typeof re=="function")C=function(){re(D)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,at=He.port2;He.port1.onmessage=D,C=function(){at.postMessage(null)}}else C=function(){M(D,0)};function ut(q){N=q,de||(de=!0,C())}function ue(q,_e){R=M(function(){q(r.unstable_now())},_e)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_continueExecution=function(){$||L||($=!0,ut(le))},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(q){switch(x){case 1:case 2:case 3:var _e=3;break;default:_e=x}var oe=x;x=_e;try{return q()}finally{x=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(q,_e){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var oe=x;x=q;try{return _e()}finally{x=oe}},r.unstable_scheduleCallback=function(q,_e,oe){var j=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?j+oe:j):oe=j,q){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=oe+G,q={id:T++,callback:_e,priorityLevel:q,startTime:oe,expirationTime:G,sortIndex:-1},oe>j?(q.sortIndex=oe,e(v,q),t(m)===null&&q===t(v)&&(H?(ee(R),R=-1):H=!0,ue(ce,oe-j))):(q.sortIndex=G,e(m,q),$||L||($=!0,ut(le))),q},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(q){var _e=x;return function(){var oe=x;x=_e;try{return q.apply(this,arguments)}finally{x=oe}}}}(Bh)),Bh}var $g;function BE(){return $g||($g=1,zh.exports=zE()),zh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function $E(){if(Hg)return zn;Hg=1;var r=Nf(),e=BE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){d(n,i),d(n+"Capture",i)}function d(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T={},E={};function x(n){return m.call(E,n)?!0:m.call(T,n)?!1:v.test(n)?E[n]=!0:(T[n]=!0,!1)}function L(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,i,a,c){if(i===null||typeof i>"u"||L(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function H(n,i,a,c,h,g,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=w}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){M[n]=new H(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];M[i]=new H(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){M[n]=new H(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){M[n]=new H(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){M[n]=new H(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){M[n]=new H(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){M[n]=new H(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){M[n]=new H(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){M[n]=new H(n,5,!1,n.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function re(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(ee,re);M[i]=new H(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(ee,re);M[i]=new H(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(ee,re);M[i]=new H(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){M[n]=new H(n,1,!1,n.toLowerCase(),null,!1,!1)}),M.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){M[n]=new H(n,1,!1,n.toLowerCase(),null,!0,!0)});function Y(n,i,a,c){var h=M.hasOwnProperty(i)?M[i]:null;(h!==null?h.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&($(i,a,h,c)&&(a=null),c||h===null?x(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(i=h.attributeName,c=h.attributeNamespace,a===null?n.removeAttribute(i):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var ce=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),de=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),P=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),at=Symbol.for("react.memo"),ut=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),q=Symbol.iterator;function _e(n){return n===null||typeof n!="object"?null:(n=q&&n[q]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,j;function G(n){if(j===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);j=i&&i[1]||""}return`
`+j+n}var Te=!1;function Ae(n,i){if(!n||Te)return"";Te=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var h=B.stack.split(`
`),g=c.stack.split(`
`),w=h.length-1,A=g.length-1;1<=w&&0<=A&&h[w]!==g[A];)A--;for(;1<=w&&0<=A;w--,A--)if(h[w]!==g[A]){if(w!==1||A!==1)do if(w--,A--,0>A||h[w]!==g[A]){var k=`
`+h[w].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=w&&0<=A);break}}}finally{Te=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function Ve(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function Oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case de:return"Portal";case S:return"Profiler";case R:return"StrictMode";case C:return"Suspense";case He:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case P:return(n.displayName||"Context")+".Consumer";case b:return(n._context.displayName||"Context")+".Provider";case D:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case at:return i=n.displayName||null,i!==null?i:Oe(n.type)||"Memo";case ut:i=n._payload,n=n._init;try{return Oe(n(i))}catch{}}return null}function ze(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(i);case 8:return i===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function je(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function et(n){var i=Be(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return h.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Rt(n){n._valueTracker||(n._valueTracker=et(n))}function he(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function se(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ge(n,i){var a=i.checked;return oe({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ue(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=je(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function An(n,i){i=i.checked,i!=null&&Y(n,"checked",i,!1)}function Ut(n,i){An(n,i);var a=je(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Gn(n,i.type,a):i.hasOwnProperty("defaultValue")&&Gn(n,i.type,je(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Pn(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Gn(n,i,a){(i!=="number"||se(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Nt=Array.isArray;function Wt(n,i,a,c){if(n=n.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=i.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+je(a),i=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}i!==null||n[h].disabled||(i=n[h])}i!==null&&(i.selected=!0)}}function bn(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function an(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Nt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:je(a)}}function kn(n,i){var a=je(i.value),c=je(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Xt(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ie(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ie(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ln,jr=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,h){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,h)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(ln=ln||document.createElement("div"),ln.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ln.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Er(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mr=["Webkit","ms","Moz","O"];Object.keys(ir).forEach(function(n){Mr.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),ir[i]=ir[n]})});function ns(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||ir.hasOwnProperty(n)&&ir[n]?(""+i).trim():i+"px"}function or(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=ns(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,h):n[a]=h}}var rs=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kn(n,i){if(i){if(rs[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ps(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fr=null;function bs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ks=null,Nn=null,ar=null;function Ns(n){if(n=La(n)){if(typeof ks!="function")throw Error(t(280));var i=n.stateNode;i&&(i=gu(i),ks(n.stateNode,n.type,i))}}function lr(n){Nn?ar?ar.push(n):ar=[n]:Nn=n}function Ds(){if(Nn){var n=Nn,i=ar;if(ar=Nn=null,Ns(n),i)for(n=0;n<i.length;n++)Ns(i[n])}}function ss(n,i){return n(i)}function Ai(){}var Tr=!1;function K(n,i,a){if(Tr)return n(i,a);Tr=!0;try{return ss(n,i,a)}finally{Tr=!1,(Nn!==null||ar!==null)&&(Ai(),Ds())}}function we(n,i){var a=n.stateNode;if(a===null)return null;var c=gu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Pe=!1;if(f)try{var be={};Object.defineProperty(be,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",be,be),window.removeEventListener("test",be,be)}catch{Pe=!1}function Se(n,i,a,c,h,g,w,A,k){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(Z){this.onError(Z)}}var $e=!1,ht=null,Ge=!1,nt=null,ft={onError:function(n){$e=!0,ht=n}};function rt(n,i,a,c,h,g,w,A,k){$e=!1,ht=null,Se.apply(ft,arguments)}function Dn(n,i,a,c,h,g,w,A,k){if(rt.apply(this,arguments),$e){if($e){var B=ht;$e=!1,ht=null}else throw Error(t(198));Ge||(Ge=!0,nt=B)}}function At(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function un(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function yt(n){if(At(n)!==n)throw Error(t(188))}function vt(n){var i=n.alternate;if(!i){if(i=At(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var h=a.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===a)return yt(h),n;if(g===c)return yt(h),i;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=h,c=g;else{for(var w=!1,A=h.child;A;){if(A===a){w=!0,a=h,c=g;break}if(A===c){w=!0,c=h,a=g;break}A=A.sibling}if(!w){for(A=g.child;A;){if(A===a){w=!0,a=g,c=h;break}if(A===c){w=!0,c=g,a=h;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function vn(n){return n=vt(n),n!==null?ur(n):null}function ur(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=ur(n);if(i!==null)return i;n=n.sibling}return null}var St=e.unstable_scheduleCallback,_n=e.unstable_cancelCallback,Ur=e.unstable_shouldYield,fd=e.unstable_requestPaint,ct=e.unstable_now,Hl=e.unstable_getCurrentPriorityLevel,Pi=e.unstable_ImmediatePriority,Vs=e.unstable_UserBlockingPriority,cr=e.unstable_NormalPriority,_a=e.unstable_LowPriority,Wl=e.unstable_IdlePriority,bi=null,Qn=null;function ql(n){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(bi,n,void 0,(n.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:Kl,wa=Math.log,Gl=Math.LN2;function Kl(n){return n>>>=0,n===0?32:31-(wa(n)/Gl|0)|0}var co=64,ho=4194304;function Os(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ki(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,h=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var A=w&~h;A!==0?c=Os(A):(g&=w,g!==0&&(c=Os(g)))}else w=a&~h,w!==0?c=Os(w):g!==0&&(c=Os(g));if(c===0)return 0;if(i!==0&&i!==c&&(i&h)===0&&(h=c&-c,g=i&-i,h>=g||h===16&&(g&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-wn(i),h=1<<a,c|=n[a],i&=~h;return c}function pd(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function is(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-wn(g),A=1<<w,k=h[w];k===-1?((A&a)===0||(A&c)!==0)&&(h[w]=pd(A,i)):k<=i&&(n.expiredLanes|=A),g&=~A}}function Yn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ni(){var n=co;return co<<=1,(co&4194240)===0&&(co=64),n}function Ls(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function js(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-wn(i),n[i]=a}function lt(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-wn(a),g=1<<h;i[h]=0,c[h]=-1,n[h]=-1,a&=~g}}function Ms(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-wn(a),h=1<<c;h&i|n[c]&i&&(n[c]|=i),a&=~h}}var Ye=0;function Fs(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ql,fo,Yl,Jl,Xl,Ea=!1,zr=[],Zt=null,Ir=null,xr=null,Us=new Map,dr=new Map,Br=[],md="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zl(n,i){switch(n){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Us.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dr.delete(i.pointerId)}}function Vn(n,i,a,c,h,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},i!==null&&(i=La(i),i!==null&&fo(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),n)}function gd(n,i,a,c,h){switch(i){case"focusin":return Zt=Vn(Zt,n,i,a,c,h),!0;case"dragenter":return Ir=Vn(Ir,n,i,a,c,h),!0;case"mouseover":return xr=Vn(xr,n,i,a,c,h),!0;case"pointerover":var g=h.pointerId;return Us.set(g,Vn(Us.get(g)||null,n,i,a,c,h)),!0;case"gotpointercapture":return g=h.pointerId,dr.set(g,Vn(dr.get(g)||null,n,i,a,c,h)),!0}return!1}function eu(n){var i=ji(n.target);if(i!==null){var a=At(i);if(a!==null){if(i=a.tag,i===13){if(i=un(a),i!==null){n.blockedOn=i,Xl(n.priority,function(){Yl(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function os(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=po(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Fr=c,a.target.dispatchEvent(c),Fr=null}else return i=La(a),i!==null&&fo(i),n.blockedOn=a,!1;i.shift()}return!0}function Di(n,i,a){os(n)&&a.delete(i)}function tu(){Ea=!1,Zt!==null&&os(Zt)&&(Zt=null),Ir!==null&&os(Ir)&&(Ir=null),xr!==null&&os(xr)&&(xr=null),Us.forEach(Di),dr.forEach(Di)}function Sr(n,i){n.blockedOn===i&&(n.blockedOn=null,Ea||(Ea=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tu)))}function Cr(n){function i(h){return Sr(h,n)}if(0<zr.length){Sr(zr[0],n);for(var a=1;a<zr.length;a++){var c=zr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Zt!==null&&Sr(Zt,n),Ir!==null&&Sr(Ir,n),xr!==null&&Sr(xr,n),Us.forEach(i),dr.forEach(i),a=0;a<Br.length;a++)c=Br[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Br.length&&(a=Br[0],a.blockedOn===null);)eu(a),a.blockedOn===null&&Br.shift()}var as=ce.ReactCurrentBatchConfig,zs=!0;function _t(n,i,a,c){var h=Ye,g=as.transition;as.transition=null;try{Ye=1,Ta(n,i,a,c)}finally{Ye=h,as.transition=g}}function yd(n,i,a,c){var h=Ye,g=as.transition;as.transition=null;try{Ye=4,Ta(n,i,a,c)}finally{Ye=h,as.transition=g}}function Ta(n,i,a,c){if(zs){var h=po(n,i,a,c);if(h===null)Ad(n,i,c,Vi,a),Zl(n,c);else if(gd(h,n,i,a,c))c.stopPropagation();else if(Zl(n,c),i&4&&-1<md.indexOf(n)){for(;h!==null;){var g=La(h);if(g!==null&&Ql(g),g=po(n,i,a,c),g===null&&Ad(n,i,c,Vi,a),g===h)break;h=g}h!==null&&c.stopPropagation()}else Ad(n,i,c,null,a)}}var Vi=null;function po(n,i,a,c){if(Vi=null,n=bs(c),n=ji(n),n!==null)if(i=At(n),i===null)n=null;else if(a=i.tag,a===13){if(n=un(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Vi=n,null}function Ia(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hl()){case Pi:return 1;case Vs:return 4;case cr:case _a:return 16;case Wl:return 536870912;default:return 16}default:return 16}}var Jn=null,mo=null,On=null;function xa(){if(On)return On;var n,i=mo,a=i.length,c,h="value"in Jn?Jn.value:Jn.textContent,g=h.length;for(n=0;n<a&&i[n]===h[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===h[g-c];c++);return On=h.slice(n,1<c?1-c:void 0)}function go(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function $r(){return!0}function Sa(){return!1}function en(n){function i(a,c,h,g,w){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?$r:Sa,this.isPropagationStopped=Sa,this}return oe(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),i}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yo=en(Rr),Hr=oe({},Rr,{view:0,detail:0}),vd=en(Hr),vo,ls,Bs,Oi=oe({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bs&&(Bs&&n.type==="mousemove"?(vo=n.screenX-Bs.screenX,ls=n.screenY-Bs.screenY):ls=vo=0,Bs=n),vo)},movementY:function(n){return"movementY"in n?n.movementY:ls}}),_o=en(Oi),Ca=oe({},Oi,{dataTransfer:0}),nu=en(Ca),wo=oe({},Hr,{relatedTarget:0}),Eo=en(wo),ru=oe({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),us=en(ru),su=oe({},Rr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),iu=en(su),ou=oe({},Rr,{data:0}),Ra=en(ou),To={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lu(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=au[n])?!!i[n]:!1}function Wr(){return lu}var u=oe({},Hr,{key:function(n){if(n.key){var i=To[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=go(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?En[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wr,charCode:function(n){return n.type==="keypress"?go(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?go(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=en(u),_=oe({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=en(_),F=oe({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wr}),W=en(F),ae=oe({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),it=en(ae),zt=oe({},Oi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Je=en(zt),qt=[9,13,27,32],Dt=f&&"CompositionEvent"in window,hr=null;f&&"documentMode"in document&&(hr=document.documentMode);var Xn=f&&"TextEvent"in window&&!hr,Li=f&&(!Dt||hr&&8<hr&&11>=hr),Io=" ",Np=!1;function Dp(n,i){switch(n){case"keyup":return qt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xo=!1;function Dw(n,i){switch(n){case"compositionend":return Vp(i);case"keypress":return i.which!==32?null:(Np=!0,Io);case"textInput":return n=i.data,n===Io&&Np?null:n;default:return null}}function Vw(n,i){if(xo)return n==="compositionend"||!Dt&&Dp(n,i)?(n=xa(),On=mo=Jn=null,xo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Li&&i.locale!=="ko"?null:i.data;default:return null}}var Ow={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Op(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ow[n.type]:i==="textarea"}function Lp(n,i,a,c){lr(c),i=fu(i,"onChange"),0<i.length&&(a=new yo("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Aa=null,Pa=null;function Lw(n){em(n,0)}function uu(n){var i=Po(n);if(he(i))return n}function jw(n,i){if(n==="change")return i}var jp=!1;if(f){var _d;if(f){var wd="oninput"in document;if(!wd){var Mp=document.createElement("div");Mp.setAttribute("oninput","return;"),wd=typeof Mp.oninput=="function"}_d=wd}else _d=!1;jp=_d&&(!document.documentMode||9<document.documentMode)}function Fp(){Aa&&(Aa.detachEvent("onpropertychange",Up),Pa=Aa=null)}function Up(n){if(n.propertyName==="value"&&uu(Pa)){var i=[];Lp(i,Pa,n,bs(n)),K(Lw,i)}}function Mw(n,i,a){n==="focusin"?(Fp(),Aa=i,Pa=a,Aa.attachEvent("onpropertychange",Up)):n==="focusout"&&Fp()}function Fw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return uu(Pa)}function Uw(n,i){if(n==="click")return uu(i)}function zw(n,i){if(n==="input"||n==="change")return uu(i)}function Bw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Ar=typeof Object.is=="function"?Object.is:Bw;function ba(n,i){if(Ar(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!m.call(i,h)||!Ar(n[h],i[h]))return!1}return!0}function zp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bp(n,i){var a=zp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=zp(a)}}function $p(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?$p(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Hp(){for(var n=window,i=se();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=se(n.document)}return i}function Ed(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function $w(n){var i=Hp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&$p(a.ownerDocument.documentElement,a)){if(c!==null&&Ed(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,g=Math.min(c.start,h);c=c.end===void 0?g:Math.min(c.end,h),!n.extend&&g>c&&(h=c,c=g,g=h),h=Bp(a,g);var w=Bp(a,c);h&&w&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(h.node,h.offset),n.removeAllRanges(),g>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Hw=f&&"documentMode"in document&&11>=document.documentMode,So=null,Td=null,ka=null,Id=!1;function Wp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Id||So==null||So!==se(c)||(c=So,"selectionStart"in c&&Ed(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ka&&ba(ka,c)||(ka=c,c=fu(Td,"onSelect"),0<c.length&&(i=new yo("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=So)))}function cu(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Co={animationend:cu("Animation","AnimationEnd"),animationiteration:cu("Animation","AnimationIteration"),animationstart:cu("Animation","AnimationStart"),transitionend:cu("Transition","TransitionEnd")},xd={},qp={};f&&(qp=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function du(n){if(xd[n])return xd[n];if(!Co[n])return n;var i=Co[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in qp)return xd[n]=i[a];return n}var Gp=du("animationend"),Kp=du("animationiteration"),Qp=du("animationstart"),Yp=du("transitionend"),Jp=new Map,Xp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(n,i){Jp.set(n,i),l(i,[n])}for(var Sd=0;Sd<Xp.length;Sd++){var Cd=Xp[Sd],Ww=Cd.toLowerCase(),qw=Cd[0].toUpperCase()+Cd.slice(1);$s(Ww,"on"+qw)}$s(Gp,"onAnimationEnd"),$s(Kp,"onAnimationIteration"),$s(Qp,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(Yp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Na));function Zp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,Dn(c,i,void 0,n),n.currentTarget=null}function em(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var w=c.length-1;0<=w;w--){var A=c[w],k=A.instance,B=A.currentTarget;if(A=A.listener,k!==g&&h.isPropagationStopped())break e;Zp(h,A,B),g=k}else for(w=0;w<c.length;w++){if(A=c[w],k=A.instance,B=A.currentTarget,A=A.listener,k!==g&&h.isPropagationStopped())break e;Zp(h,A,B),g=k}}}if(Ge)throw n=nt,Ge=!1,nt=null,n}function pt(n,i){var a=i[Vd];a===void 0&&(a=i[Vd]=new Set);var c=n+"__bubble";a.has(c)||(tm(i,n,2,!1),a.add(c))}function Rd(n,i,a){var c=0;i&&(c|=4),tm(a,n,c,i)}var hu="_reactListening"+Math.random().toString(36).slice(2);function Da(n){if(!n[hu]){n[hu]=!0,s.forEach(function(a){a!=="selectionchange"&&(Gw.has(a)||Rd(a,!1,n),Rd(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[hu]||(i[hu]=!0,Rd("selectionchange",!1,i))}}function tm(n,i,a,c){switch(Ia(i)){case 1:var h=_t;break;case 4:h=yd;break;default:h=Ta}a=h.bind(null,i,a,n),h=void 0,!Pe||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(i,a,{capture:!0,passive:h}):n.addEventListener(i,a,!0):h!==void 0?n.addEventListener(i,a,{passive:h}):n.addEventListener(i,a,!1)}function Ad(n,i,a,c,h){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var A=c.stateNode.containerInfo;if(A===h||A.nodeType===8&&A.parentNode===h)break;if(w===4)for(w=c.return;w!==null;){var k=w.tag;if((k===3||k===4)&&(k=w.stateNode.containerInfo,k===h||k.nodeType===8&&k.parentNode===h))return;w=w.return}for(;A!==null;){if(w=ji(A),w===null)return;if(k=w.tag,k===5||k===6){c=g=w;continue e}A=A.parentNode}}c=c.return}K(function(){var B=g,Z=bs(a),te=[];e:{var X=Jp.get(n);if(X!==void 0){var ye=yo,Ie=n;switch(n){case"keypress":if(go(a)===0)break e;case"keydown":case"keyup":ye=p;break;case"focusin":Ie="focus",ye=Eo;break;case"focusout":Ie="blur",ye=Eo;break;case"beforeblur":case"afterblur":ye=Eo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=_o;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=W;break;case Gp:case Kp:case Qp:ye=us;break;case Yp:ye=it;break;case"scroll":ye=vd;break;case"wheel":ye=Je;break;case"copy":case"cut":case"paste":ye=iu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=I}var xe=(i&4)!==0,Pt=!xe&&n==="scroll",U=xe?X!==null?X+"Capture":null:X;xe=[];for(var V=B,z;V!==null;){z=V;var ne=z.stateNode;if(z.tag===5&&ne!==null&&(z=ne,U!==null&&(ne=we(V,U),ne!=null&&xe.push(Va(V,ne,z)))),Pt)break;V=V.return}0<xe.length&&(X=new ye(X,Ie,null,a,Z),te.push({event:X,listeners:xe}))}}if((i&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ye=n==="mouseout"||n==="pointerout",X&&a!==Fr&&(Ie=a.relatedTarget||a.fromElement)&&(ji(Ie)||Ie[cs]))break e;if((ye||X)&&(X=Z.window===Z?Z:(X=Z.ownerDocument)?X.defaultView||X.parentWindow:window,ye?(Ie=a.relatedTarget||a.toElement,ye=B,Ie=Ie?ji(Ie):null,Ie!==null&&(Pt=At(Ie),Ie!==Pt||Ie.tag!==5&&Ie.tag!==6)&&(Ie=null)):(ye=null,Ie=B),ye!==Ie)){if(xe=_o,ne="onMouseLeave",U="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(xe=I,ne="onPointerLeave",U="onPointerEnter",V="pointer"),Pt=ye==null?X:Po(ye),z=Ie==null?X:Po(Ie),X=new xe(ne,V+"leave",ye,a,Z),X.target=Pt,X.relatedTarget=z,ne=null,ji(Z)===B&&(xe=new xe(U,V+"enter",Ie,a,Z),xe.target=z,xe.relatedTarget=Pt,ne=xe),Pt=ne,ye&&Ie)t:{for(xe=ye,U=Ie,V=0,z=xe;z;z=Ro(z))V++;for(z=0,ne=U;ne;ne=Ro(ne))z++;for(;0<V-z;)xe=Ro(xe),V--;for(;0<z-V;)U=Ro(U),z--;for(;V--;){if(xe===U||U!==null&&xe===U.alternate)break t;xe=Ro(xe),U=Ro(U)}xe=null}else xe=null;ye!==null&&nm(te,X,ye,xe,!1),Ie!==null&&Pt!==null&&nm(te,Pt,Ie,xe,!0)}}e:{if(X=B?Po(B):window,ye=X.nodeName&&X.nodeName.toLowerCase(),ye==="select"||ye==="input"&&X.type==="file")var Ce=jw;else if(Op(X))if(jp)Ce=zw;else{Ce=Fw;var Ne=Mw}else(ye=X.nodeName)&&ye.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(Ce=Uw);if(Ce&&(Ce=Ce(n,B))){Lp(te,Ce,a,Z);break e}Ne&&Ne(n,X,B),n==="focusout"&&(Ne=X._wrapperState)&&Ne.controlled&&X.type==="number"&&Gn(X,"number",X.value)}switch(Ne=B?Po(B):window,n){case"focusin":(Op(Ne)||Ne.contentEditable==="true")&&(So=Ne,Td=B,ka=null);break;case"focusout":ka=Td=So=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,Wp(te,a,Z);break;case"selectionchange":if(Hw)break;case"keydown":case"keyup":Wp(te,a,Z)}var De;if(Dt)e:{switch(n){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else xo?Dp(n,a)&&(Me="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(Li&&a.locale!=="ko"&&(xo||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&xo&&(De=xa()):(Jn=Z,mo="value"in Jn?Jn.value:Jn.textContent,xo=!0)),Ne=fu(B,Me),0<Ne.length&&(Me=new Ra(Me,n,null,a,Z),te.push({event:Me,listeners:Ne}),De?Me.data=De:(De=Vp(a),De!==null&&(Me.data=De)))),(De=Xn?Dw(n,a):Vw(n,a))&&(B=fu(B,"onBeforeInput"),0<B.length&&(Z=new Ra("onBeforeInput","beforeinput",null,a,Z),te.push({event:Z,listeners:B}),Z.data=De))}em(te,i)})}function Va(n,i,a){return{instance:n,listener:i,currentTarget:a}}function fu(n,i){for(var a=i+"Capture",c=[];n!==null;){var h=n,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=we(n,a),g!=null&&c.unshift(Va(n,g,h)),g=we(n,i),g!=null&&c.push(Va(n,g,h))),n=n.return}return c}function Ro(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function nm(n,i,a,c,h){for(var g=i._reactName,w=[];a!==null&&a!==c;){var A=a,k=A.alternate,B=A.stateNode;if(k!==null&&k===c)break;A.tag===5&&B!==null&&(A=B,h?(k=we(a,g),k!=null&&w.unshift(Va(a,k,A))):h||(k=we(a,g),k!=null&&w.push(Va(a,k,A)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var Kw=/\r\n?/g,Qw=/\u0000|\uFFFD/g;function rm(n){return(typeof n=="string"?n:""+n).replace(Kw,`
`).replace(Qw,"")}function pu(n,i,a){if(i=rm(i),rm(n)!==i&&a)throw Error(t(425))}function mu(){}var Pd=null,bd=null;function kd(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nd=typeof setTimeout=="function"?setTimeout:void 0,Yw=typeof clearTimeout=="function"?clearTimeout:void 0,sm=typeof Promise=="function"?Promise:void 0,Jw=typeof queueMicrotask=="function"?queueMicrotask:typeof sm<"u"?function(n){return sm.resolve(null).then(n).catch(Xw)}:Nd;function Xw(n){setTimeout(function(){throw n})}function Dd(n,i){var a=i,c=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){n.removeChild(h),Cr(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);Cr(i)}function Hs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function im(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Ao=Math.random().toString(36).slice(2),qr="__reactFiber$"+Ao,Oa="__reactProps$"+Ao,cs="__reactContainer$"+Ao,Vd="__reactEvents$"+Ao,Zw="__reactListeners$"+Ao,eE="__reactHandles$"+Ao;function ji(n){var i=n[qr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[cs]||a[qr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=im(n);n!==null;){if(a=n[qr])return a;n=im(n)}return i}n=a,a=n.parentNode}return null}function La(n){return n=n[qr]||n[cs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Po(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function gu(n){return n[Oa]||null}var Od=[],bo=-1;function Ws(n){return{current:n}}function mt(n){0>bo||(n.current=Od[bo],Od[bo]=null,bo--)}function dt(n,i){bo++,Od[bo]=n.current,n.current=i}var qs={},cn=Ws(qs),Ln=Ws(!1),Mi=qs;function ko(n,i){var a=n.type.contextTypes;if(!a)return qs;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in a)h[g]=i[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=h),h}function jn(n){return n=n.childContextTypes,n!=null}function yu(){mt(Ln),mt(cn)}function om(n,i,a){if(cn.current!==qs)throw Error(t(168));dt(cn,i),dt(Ln,a)}function am(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in i))throw Error(t(108,ze(n)||"Unknown",h));return oe({},a,c)}function vu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||qs,Mi=cn.current,dt(cn,n),dt(Ln,Ln.current),!0}function lm(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=am(n,i,Mi),c.__reactInternalMemoizedMergedChildContext=n,mt(Ln),mt(cn),dt(cn,n)):mt(Ln),dt(Ln,a)}var ds=null,_u=!1,Ld=!1;function um(n){ds===null?ds=[n]:ds.push(n)}function tE(n){_u=!0,um(n)}function Gs(){if(!Ld&&ds!==null){Ld=!0;var n=0,i=Ye;try{var a=ds;for(Ye=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}ds=null,_u=!1}catch(h){throw ds!==null&&(ds=ds.slice(n+1)),St(Pi,Gs),h}finally{Ye=i,Ld=!1}}return null}var No=[],Do=0,wu=null,Eu=0,fr=[],pr=0,Fi=null,hs=1,fs="";function Ui(n,i){No[Do++]=Eu,No[Do++]=wu,wu=n,Eu=i}function cm(n,i,a){fr[pr++]=hs,fr[pr++]=fs,fr[pr++]=Fi,Fi=n;var c=hs;n=fs;var h=32-wn(c)-1;c&=~(1<<h),a+=1;var g=32-wn(i)+h;if(30<g){var w=h-h%5;g=(c&(1<<w)-1).toString(32),c>>=w,h-=w,hs=1<<32-wn(i)+h|a<<h|c,fs=g+n}else hs=1<<g|a<<h|c,fs=n}function jd(n){n.return!==null&&(Ui(n,1),cm(n,1,0))}function Md(n){for(;n===wu;)wu=No[--Do],No[Do]=null,Eu=No[--Do],No[Do]=null;for(;n===Fi;)Fi=fr[--pr],fr[pr]=null,fs=fr[--pr],fr[pr]=null,hs=fr[--pr],fr[pr]=null}var Zn=null,er=null,wt=!1,Pr=null;function dm(n,i){var a=vr(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function hm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Zn=n,er=Hs(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Zn=n,er=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Fi!==null?{id:hs,overflow:fs}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=vr(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,Zn=n,er=null,!0):!1;default:return!1}}function Fd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ud(n){if(wt){var i=er;if(i){var a=i;if(!hm(n,i)){if(Fd(n))throw Error(t(418));i=Hs(a.nextSibling);var c=Zn;i&&hm(n,i)?dm(c,a):(n.flags=n.flags&-4097|2,wt=!1,Zn=n)}}else{if(Fd(n))throw Error(t(418));n.flags=n.flags&-4097|2,wt=!1,Zn=n}}}function fm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Zn=n}function Tu(n){if(n!==Zn)return!1;if(!wt)return fm(n),wt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!kd(n.type,n.memoizedProps)),i&&(i=er)){if(Fd(n))throw pm(),Error(t(418));for(;i;)dm(n,i),i=Hs(i.nextSibling)}if(fm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){er=Hs(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}er=null}}else er=Zn?Hs(n.stateNode.nextSibling):null;return!0}function pm(){for(var n=er;n;)n=Hs(n.nextSibling)}function Vo(){er=Zn=null,wt=!1}function zd(n){Pr===null?Pr=[n]:Pr.push(n)}var nE=ce.ReactCurrentBatchConfig;function ja(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var h=c,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(w){var A=h.refs;w===null?delete A[g]:A[g]=w},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Iu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function mm(n){var i=n._init;return i(n._payload)}function gm(n){function i(U,V){if(n){var z=U.deletions;z===null?(U.deletions=[V],U.flags|=16):z.push(V)}}function a(U,V){if(!n)return null;for(;V!==null;)i(U,V),V=V.sibling;return null}function c(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function h(U,V){return U=ti(U,V),U.index=0,U.sibling=null,U}function g(U,V,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<V?(U.flags|=2,V):z):(U.flags|=2,V)):(U.flags|=1048576,V)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function A(U,V,z,ne){return V===null||V.tag!==6?(V=Nh(z,U.mode,ne),V.return=U,V):(V=h(V,z),V.return=U,V)}function k(U,V,z,ne){var Ce=z.type;return Ce===N?Z(U,V,z.props.children,ne,z.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ut&&mm(Ce)===V.type)?(ne=h(V,z.props),ne.ref=ja(U,V,z),ne.return=U,ne):(ne=Gu(z.type,z.key,z.props,null,U.mode,ne),ne.ref=ja(U,V,z),ne.return=U,ne)}function B(U,V,z,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Dh(z,U.mode,ne),V.return=U,V):(V=h(V,z.children||[]),V.return=U,V)}function Z(U,V,z,ne,Ce){return V===null||V.tag!==7?(V=Ki(z,U.mode,ne,Ce),V.return=U,V):(V=h(V,z),V.return=U,V)}function te(U,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Nh(""+V,U.mode,z),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case le:return z=Gu(V.type,V.key,V.props,null,U.mode,z),z.ref=ja(U,null,V),z.return=U,z;case de:return V=Dh(V,U.mode,z),V.return=U,V;case ut:var ne=V._init;return te(U,ne(V._payload),z)}if(Nt(V)||_e(V))return V=Ki(V,U.mode,z,null),V.return=U,V;Iu(U,V)}return null}function X(U,V,z,ne){var Ce=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Ce!==null?null:A(U,V,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case le:return z.key===Ce?k(U,V,z,ne):null;case de:return z.key===Ce?B(U,V,z,ne):null;case ut:return Ce=z._init,X(U,V,Ce(z._payload),ne)}if(Nt(z)||_e(z))return Ce!==null?null:Z(U,V,z,ne,null);Iu(U,z)}return null}function ye(U,V,z,ne,Ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return U=U.get(z)||null,A(V,U,""+ne,Ce);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case le:return U=U.get(ne.key===null?z:ne.key)||null,k(V,U,ne,Ce);case de:return U=U.get(ne.key===null?z:ne.key)||null,B(V,U,ne,Ce);case ut:var Ne=ne._init;return ye(U,V,z,Ne(ne._payload),Ce)}if(Nt(ne)||_e(ne))return U=U.get(z)||null,Z(V,U,ne,Ce,null);Iu(V,ne)}return null}function Ie(U,V,z,ne){for(var Ce=null,Ne=null,De=V,Me=V=0,Qt=null;De!==null&&Me<z.length;Me++){De.index>Me?(Qt=De,De=null):Qt=De.sibling;var st=X(U,De,z[Me],ne);if(st===null){De===null&&(De=Qt);break}n&&De&&st.alternate===null&&i(U,De),V=g(st,V,Me),Ne===null?Ce=st:Ne.sibling=st,Ne=st,De=Qt}if(Me===z.length)return a(U,De),wt&&Ui(U,Me),Ce;if(De===null){for(;Me<z.length;Me++)De=te(U,z[Me],ne),De!==null&&(V=g(De,V,Me),Ne===null?Ce=De:Ne.sibling=De,Ne=De);return wt&&Ui(U,Me),Ce}for(De=c(U,De);Me<z.length;Me++)Qt=ye(De,U,Me,z[Me],ne),Qt!==null&&(n&&Qt.alternate!==null&&De.delete(Qt.key===null?Me:Qt.key),V=g(Qt,V,Me),Ne===null?Ce=Qt:Ne.sibling=Qt,Ne=Qt);return n&&De.forEach(function(ni){return i(U,ni)}),wt&&Ui(U,Me),Ce}function xe(U,V,z,ne){var Ce=_e(z);if(typeof Ce!="function")throw Error(t(150));if(z=Ce.call(z),z==null)throw Error(t(151));for(var Ne=Ce=null,De=V,Me=V=0,Qt=null,st=z.next();De!==null&&!st.done;Me++,st=z.next()){De.index>Me?(Qt=De,De=null):Qt=De.sibling;var ni=X(U,De,st.value,ne);if(ni===null){De===null&&(De=Qt);break}n&&De&&ni.alternate===null&&i(U,De),V=g(ni,V,Me),Ne===null?Ce=ni:Ne.sibling=ni,Ne=ni,De=Qt}if(st.done)return a(U,De),wt&&Ui(U,Me),Ce;if(De===null){for(;!st.done;Me++,st=z.next())st=te(U,st.value,ne),st!==null&&(V=g(st,V,Me),Ne===null?Ce=st:Ne.sibling=st,Ne=st);return wt&&Ui(U,Me),Ce}for(De=c(U,De);!st.done;Me++,st=z.next())st=ye(De,U,Me,st.value,ne),st!==null&&(n&&st.alternate!==null&&De.delete(st.key===null?Me:st.key),V=g(st,V,Me),Ne===null?Ce=st:Ne.sibling=st,Ne=st);return n&&De.forEach(function(OE){return i(U,OE)}),wt&&Ui(U,Me),Ce}function Pt(U,V,z,ne){if(typeof z=="object"&&z!==null&&z.type===N&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case le:e:{for(var Ce=z.key,Ne=V;Ne!==null;){if(Ne.key===Ce){if(Ce=z.type,Ce===N){if(Ne.tag===7){a(U,Ne.sibling),V=h(Ne,z.props.children),V.return=U,U=V;break e}}else if(Ne.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ut&&mm(Ce)===Ne.type){a(U,Ne.sibling),V=h(Ne,z.props),V.ref=ja(U,Ne,z),V.return=U,U=V;break e}a(U,Ne);break}else i(U,Ne);Ne=Ne.sibling}z.type===N?(V=Ki(z.props.children,U.mode,ne,z.key),V.return=U,U=V):(ne=Gu(z.type,z.key,z.props,null,U.mode,ne),ne.ref=ja(U,V,z),ne.return=U,U=ne)}return w(U);case de:e:{for(Ne=z.key;V!==null;){if(V.key===Ne)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(U,V.sibling),V=h(V,z.children||[]),V.return=U,U=V;break e}else{a(U,V);break}else i(U,V);V=V.sibling}V=Dh(z,U.mode,ne),V.return=U,U=V}return w(U);case ut:return Ne=z._init,Pt(U,V,Ne(z._payload),ne)}if(Nt(z))return Ie(U,V,z,ne);if(_e(z))return xe(U,V,z,ne);Iu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(U,V.sibling),V=h(V,z),V.return=U,U=V):(a(U,V),V=Nh(z,U.mode,ne),V.return=U,U=V),w(U)):a(U,V)}return Pt}var Oo=gm(!0),ym=gm(!1),xu=Ws(null),Su=null,Lo=null,Bd=null;function $d(){Bd=Lo=Su=null}function Hd(n){var i=xu.current;mt(xu),n._currentValue=i}function Wd(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function jo(n,i){Su=n,Bd=Lo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Mn=!0),n.firstContext=null)}function mr(n){var i=n._currentValue;if(Bd!==n)if(n={context:n,memoizedValue:i,next:null},Lo===null){if(Su===null)throw Error(t(308));Lo=n,Su.dependencies={lanes:0,firstContext:n}}else Lo=Lo.next=n;return i}var zi=null;function qd(n){zi===null?zi=[n]:zi.push(n)}function vm(n,i,a,c){var h=i.interleaved;return h===null?(a.next=a,qd(i)):(a.next=h.next,h.next=a),i.interleaved=a,ps(n,c)}function ps(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Ks=!1;function Gd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _m(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ms(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Qs(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var h=c.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),c.pending=i,ps(n,a)}return h=c.interleaved,h===null?(i.next=i,qd(c)):(i.next=h.next,h.next=i),c.interleaved=i,ps(n,a)}function Cu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Ms(n,a)}}function wm(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?h=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?h=g=i:g=g.next=i}else h=g=i;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Ru(n,i,a,c){var h=n.updateQueue;Ks=!1;var g=h.firstBaseUpdate,w=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var k=A,B=k.next;k.next=null,w===null?g=B:w.next=B,w=k;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==w&&(A===null?Z.firstBaseUpdate=B:A.next=B,Z.lastBaseUpdate=k))}if(g!==null){var te=h.baseState;w=0,Z=B=k=null,A=g;do{var X=A.lane,ye=A.eventTime;if((c&X)===X){Z!==null&&(Z=Z.next={eventTime:ye,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Ie=n,xe=A;switch(X=i,ye=a,xe.tag){case 1:if(Ie=xe.payload,typeof Ie=="function"){te=Ie.call(ye,te,X);break e}te=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=xe.payload,X=typeof Ie=="function"?Ie.call(ye,te,X):Ie,X==null)break e;te=oe({},te,X);break e;case 2:Ks=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,X=h.effects,X===null?h.effects=[A]:X.push(A))}else ye={eventTime:ye,lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?(B=Z=ye,k=te):Z=Z.next=ye,w|=X;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;X=A,A=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);if(Z===null&&(k=te),h.baseState=k,h.firstBaseUpdate=B,h.lastBaseUpdate=Z,i=h.shared.interleaved,i!==null){h=i;do w|=h.lane,h=h.next;while(h!==i)}else g===null&&(h.shared.lanes=0);Hi|=w,n.lanes=w,n.memoizedState=te}}function Em(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(t(191,h));h.call(c)}}}var Ma={},Gr=Ws(Ma),Fa=Ws(Ma),Ua=Ws(Ma);function Bi(n){if(n===Ma)throw Error(t(174));return n}function Kd(n,i){switch(dt(Ua,i),dt(Fa,n),dt(Gr,Ma),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:fe(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=fe(i,n)}mt(Gr),dt(Gr,i)}function Mo(){mt(Gr),mt(Fa),mt(Ua)}function Tm(n){Bi(Ua.current);var i=Bi(Gr.current),a=fe(i,n.type);i!==a&&(dt(Fa,n),dt(Gr,a))}function Qd(n){Fa.current===n&&(mt(Gr),mt(Fa))}var Tt=Ws(0);function Au(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Yd=[];function Jd(){for(var n=0;n<Yd.length;n++)Yd[n]._workInProgressVersionPrimary=null;Yd.length=0}var Pu=ce.ReactCurrentDispatcher,Xd=ce.ReactCurrentBatchConfig,$i=0,It=null,Bt=null,Gt=null,bu=!1,za=!1,Ba=0,rE=0;function dn(){throw Error(t(321))}function Zd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Ar(n[a],i[a]))return!1;return!0}function eh(n,i,a,c,h,g){if($i=g,It=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Pu.current=n===null||n.memoizedState===null?aE:lE,n=a(c,h),za){g=0;do{if(za=!1,Ba=0,25<=g)throw Error(t(301));g+=1,Gt=Bt=null,i.updateQueue=null,Pu.current=uE,n=a(c,h)}while(za)}if(Pu.current=Du,i=Bt!==null&&Bt.next!==null,$i=0,Gt=Bt=It=null,bu=!1,i)throw Error(t(300));return n}function th(){var n=Ba!==0;return Ba=0,n}function Kr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?It.memoizedState=Gt=n:Gt=Gt.next=n,Gt}function gr(){if(Bt===null){var n=It.alternate;n=n!==null?n.memoizedState:null}else n=Bt.next;var i=Gt===null?It.memoizedState:Gt.next;if(i!==null)Gt=i,Bt=n;else{if(n===null)throw Error(t(310));Bt=n,n={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Gt===null?It.memoizedState=Gt=n:Gt=Gt.next=n}return Gt}function $a(n,i){return typeof i=="function"?i(n):i}function nh(n){var i=gr(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Bt,h=c.baseQueue,g=a.pending;if(g!==null){if(h!==null){var w=h.next;h.next=g.next,g.next=w}c.baseQueue=h=g,a.pending=null}if(h!==null){g=h.next,c=c.baseState;var A=w=null,k=null,B=g;do{var Z=B.lane;if(($i&Z)===Z)k!==null&&(k=k.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var te={lane:Z,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};k===null?(A=k=te,w=c):k=k.next=te,It.lanes|=Z,Hi|=Z}B=B.next}while(B!==null&&B!==g);k===null?w=c:k.next=A,Ar(c,i.memoizedState)||(Mn=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=k,a.lastRenderedState=c}if(n=a.interleaved,n!==null){h=n;do g=h.lane,It.lanes|=g,Hi|=g,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function rh(n){var i=gr(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,g=i.memoizedState;if(h!==null){a.pending=null;var w=h=h.next;do g=n(g,w.action),w=w.next;while(w!==h);Ar(g,i.memoizedState)||(Mn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function Im(){}function xm(n,i){var a=It,c=gr(),h=i(),g=!Ar(c.memoizedState,h);if(g&&(c.memoizedState=h,Mn=!0),c=c.queue,sh(Rm.bind(null,a,c,n),[n]),c.getSnapshot!==i||g||Gt!==null&&Gt.memoizedState.tag&1){if(a.flags|=2048,Ha(9,Cm.bind(null,a,c,h,i),void 0,null),Kt===null)throw Error(t(349));($i&30)!==0||Sm(a,i,h)}return h}function Sm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=It.updateQueue,i===null?(i={lastEffect:null,stores:null},It.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Cm(n,i,a,c){i.value=a,i.getSnapshot=c,Am(i)&&Pm(n)}function Rm(n,i,a){return a(function(){Am(i)&&Pm(n)})}function Am(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Ar(n,a)}catch{return!0}}function Pm(n){var i=ps(n,1);i!==null&&Dr(i,n,1,-1)}function bm(n){var i=Kr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:n},i.queue=n,n=n.dispatch=oE.bind(null,It,n),[i.memoizedState,n]}function Ha(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=It.updateQueue,i===null?(i={lastEffect:null,stores:null},It.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function km(){return gr().memoizedState}function ku(n,i,a,c){var h=Kr();It.flags|=n,h.memoizedState=Ha(1|i,a,void 0,c===void 0?null:c)}function Nu(n,i,a,c){var h=gr();c=c===void 0?null:c;var g=void 0;if(Bt!==null){var w=Bt.memoizedState;if(g=w.destroy,c!==null&&Zd(c,w.deps)){h.memoizedState=Ha(i,a,g,c);return}}It.flags|=n,h.memoizedState=Ha(1|i,a,g,c)}function Nm(n,i){return ku(8390656,8,n,i)}function sh(n,i){return Nu(2048,8,n,i)}function Dm(n,i){return Nu(4,2,n,i)}function Vm(n,i){return Nu(4,4,n,i)}function Om(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Lm(n,i,a){return a=a!=null?a.concat([n]):null,Nu(4,4,Om.bind(null,i,n),a)}function ih(){}function jm(n,i){var a=gr();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Zd(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Mm(n,i){var a=gr();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Zd(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Fm(n,i,a){return($i&21)===0?(n.baseState&&(n.baseState=!1,Mn=!0),n.memoizedState=a):(Ar(a,i)||(a=Ni(),It.lanes|=a,Hi|=a,n.baseState=!0),i)}function sE(n,i){var a=Ye;Ye=a!==0&&4>a?a:4,n(!0);var c=Xd.transition;Xd.transition={};try{n(!1),i()}finally{Ye=a,Xd.transition=c}}function Um(){return gr().memoizedState}function iE(n,i,a){var c=Zs(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},zm(n))Bm(i,a);else if(a=vm(n,i,a,c),a!==null){var h=In();Dr(a,n,c,h),$m(a,i,c)}}function oE(n,i,a){var c=Zs(n),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(zm(n))Bm(i,h);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var w=i.lastRenderedState,A=g(w,a);if(h.hasEagerState=!0,h.eagerState=A,Ar(A,w)){var k=i.interleaved;k===null?(h.next=h,qd(i)):(h.next=k.next,k.next=h),i.interleaved=h;return}}catch{}finally{}a=vm(n,i,h,c),a!==null&&(h=In(),Dr(a,n,c,h),$m(a,i,c))}}function zm(n){var i=n.alternate;return n===It||i!==null&&i===It}function Bm(n,i){za=bu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function $m(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Ms(n,a)}}var Du={readContext:mr,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},aE={readContext:mr,useCallback:function(n,i){return Kr().memoizedState=[n,i===void 0?null:i],n},useContext:mr,useEffect:Nm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,ku(4194308,4,Om.bind(null,i,n),a)},useLayoutEffect:function(n,i){return ku(4194308,4,n,i)},useInsertionEffect:function(n,i){return ku(4,2,n,i)},useMemo:function(n,i){var a=Kr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Kr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=iE.bind(null,It,n),[c.memoizedState,n]},useRef:function(n){var i=Kr();return n={current:n},i.memoizedState=n},useState:bm,useDebugValue:ih,useDeferredValue:function(n){return Kr().memoizedState=n},useTransition:function(){var n=bm(!1),i=n[0];return n=sE.bind(null,n[1]),Kr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=It,h=Kr();if(wt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Kt===null)throw Error(t(349));($i&30)!==0||Sm(c,i,a)}h.memoizedState=a;var g={value:a,getSnapshot:i};return h.queue=g,Nm(Rm.bind(null,c,g,n),[n]),c.flags|=2048,Ha(9,Cm.bind(null,c,g,a,i),void 0,null),a},useId:function(){var n=Kr(),i=Kt.identifierPrefix;if(wt){var a=fs,c=hs;a=(c&~(1<<32-wn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ba++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=rE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},lE={readContext:mr,useCallback:jm,useContext:mr,useEffect:sh,useImperativeHandle:Lm,useInsertionEffect:Dm,useLayoutEffect:Vm,useMemo:Mm,useReducer:nh,useRef:km,useState:function(){return nh($a)},useDebugValue:ih,useDeferredValue:function(n){var i=gr();return Fm(i,Bt.memoizedState,n)},useTransition:function(){var n=nh($a)[0],i=gr().memoizedState;return[n,i]},useMutableSource:Im,useSyncExternalStore:xm,useId:Um,unstable_isNewReconciler:!1},uE={readContext:mr,useCallback:jm,useContext:mr,useEffect:sh,useImperativeHandle:Lm,useInsertionEffect:Dm,useLayoutEffect:Vm,useMemo:Mm,useReducer:rh,useRef:km,useState:function(){return rh($a)},useDebugValue:ih,useDeferredValue:function(n){var i=gr();return Bt===null?i.memoizedState=n:Fm(i,Bt.memoizedState,n)},useTransition:function(){var n=rh($a)[0],i=gr().memoizedState;return[n,i]},useMutableSource:Im,useSyncExternalStore:xm,useId:Um,unstable_isNewReconciler:!1};function br(n,i){if(n&&n.defaultProps){i=oe({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function oh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:oe({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Vu={isMounted:function(n){return(n=n._reactInternals)?At(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=In(),h=Zs(n),g=ms(c,h);g.payload=i,a!=null&&(g.callback=a),i=Qs(n,g,h),i!==null&&(Dr(i,n,h,c),Cu(i,n,h))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=In(),h=Zs(n),g=ms(c,h);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Qs(n,g,h),i!==null&&(Dr(i,n,h,c),Cu(i,n,h))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=In(),c=Zs(n),h=ms(a,c);h.tag=2,i!=null&&(h.callback=i),i=Qs(n,h,c),i!==null&&(Dr(i,n,c,a),Cu(i,n,c))}};function Hm(n,i,a,c,h,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):i.prototype&&i.prototype.isPureReactComponent?!ba(a,c)||!ba(h,g):!0}function Wm(n,i,a){var c=!1,h=qs,g=i.contextType;return typeof g=="object"&&g!==null?g=mr(g):(h=jn(i)?Mi:cn.current,c=i.contextTypes,g=(c=c!=null)?ko(n,h):qs),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Vu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=g),i}function qm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Vu.enqueueReplaceState(i,i.state,null)}function ah(n,i,a,c){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},Gd(n);var g=i.contextType;typeof g=="object"&&g!==null?h.context=mr(g):(g=jn(i)?Mi:cn.current,h.context=ko(n,g)),h.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(oh(n,i,g,a),h.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(i=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),i!==h.state&&Vu.enqueueReplaceState(h,h.state,null),Ru(n,a,h,c),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function Fo(n,i){try{var a="",c=i;do a+=Ve(c),c=c.return;while(c);var h=a}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:h,digest:null}}function lh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function uh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var cE=typeof WeakMap=="function"?WeakMap:Map;function Gm(n,i,a){a=ms(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){zu||(zu=!0,xh=c),uh(n,i)},a}function Km(n,i,a){a=ms(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=i.value;a.payload=function(){return c(h)},a.callback=function(){uh(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){uh(n,i),typeof c!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Qm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new cE;var h=new Set;c.set(i,h)}else h=c.get(i),h===void 0&&(h=new Set,c.set(i,h));h.has(a)||(h.add(a),n=xE.bind(null,n,i,a),i.then(n,n))}function Ym(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Jm(n,i,a,c,h){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=ms(-1,1),i.tag=2,Qs(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var dE=ce.ReactCurrentOwner,Mn=!1;function Tn(n,i,a,c){i.child=n===null?ym(i,null,a,c):Oo(i,n.child,a,c)}function Xm(n,i,a,c,h){a=a.render;var g=i.ref;return jo(i,h),c=eh(n,i,a,c,g,h),a=th(),n!==null&&!Mn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,gs(n,i,h)):(wt&&a&&jd(i),i.flags|=1,Tn(n,i,c,h),i.child)}function Zm(n,i,a,c,h){if(n===null){var g=a.type;return typeof g=="function"&&!kh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,eg(n,i,g,c,h)):(n=Gu(a.type,null,c,i,i.mode,h),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&h)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:ba,a(w,c)&&n.ref===i.ref)return gs(n,i,h)}return i.flags|=1,n=ti(g,c),n.ref=i.ref,n.return=i,i.child=n}function eg(n,i,a,c,h){if(n!==null){var g=n.memoizedProps;if(ba(g,c)&&n.ref===i.ref)if(Mn=!1,i.pendingProps=c=g,(n.lanes&h)!==0)(n.flags&131072)!==0&&(Mn=!0);else return i.lanes=n.lanes,gs(n,i,h)}return ch(n,i,a,c,h)}function tg(n,i,a){var c=i.pendingProps,h=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(zo,tr),tr|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,dt(zo,tr),tr|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,dt(zo,tr),tr|=c}else g!==null?(c=g.baseLanes|a,i.memoizedState=null):c=a,dt(zo,tr),tr|=c;return Tn(n,i,h,a),i.child}function ng(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function ch(n,i,a,c,h){var g=jn(a)?Mi:cn.current;return g=ko(i,g),jo(i,h),a=eh(n,i,a,c,g,h),c=th(),n!==null&&!Mn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,gs(n,i,h)):(wt&&c&&jd(i),i.flags|=1,Tn(n,i,a,h),i.child)}function rg(n,i,a,c,h){if(jn(a)){var g=!0;vu(i)}else g=!1;if(jo(i,h),i.stateNode===null)Lu(n,i),Wm(i,a,c),ah(i,a,c,h),c=!0;else if(n===null){var w=i.stateNode,A=i.memoizedProps;w.props=A;var k=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=mr(B):(B=jn(a)?Mi:cn.current,B=ko(i,B));var Z=a.getDerivedStateFromProps,te=typeof Z=="function"||typeof w.getSnapshotBeforeUpdate=="function";te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==c||k!==B)&&qm(i,w,c,B),Ks=!1;var X=i.memoizedState;w.state=X,Ru(i,c,w,h),k=i.memoizedState,A!==c||X!==k||Ln.current||Ks?(typeof Z=="function"&&(oh(i,a,Z,c),k=i.memoizedState),(A=Ks||Hm(i,a,A,c,X,k,B))?(te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=k),w.props=c,w.state=k,w.context=B,c=A):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,_m(n,i),A=i.memoizedProps,B=i.type===i.elementType?A:br(i.type,A),w.props=B,te=i.pendingProps,X=w.context,k=a.contextType,typeof k=="object"&&k!==null?k=mr(k):(k=jn(a)?Mi:cn.current,k=ko(i,k));var ye=a.getDerivedStateFromProps;(Z=typeof ye=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==te||X!==k)&&qm(i,w,c,k),Ks=!1,X=i.memoizedState,w.state=X,Ru(i,c,w,h);var Ie=i.memoizedState;A!==te||X!==Ie||Ln.current||Ks?(typeof ye=="function"&&(oh(i,a,ye,c),Ie=i.memoizedState),(B=Ks||Hm(i,a,B,c,X,Ie,k)||!1)?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,Ie,k),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,Ie,k)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Ie),w.props=c,w.state=Ie,w.context=k,c=B):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),c=!1)}return dh(n,i,a,c,g,h)}function dh(n,i,a,c,h,g){ng(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return h&&lm(i,a,!1),gs(n,i,g);c=i.stateNode,dE.current=i;var A=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=Oo(i,n.child,null,g),i.child=Oo(i,null,A,g)):Tn(n,i,A,g),i.memoizedState=c.state,h&&lm(i,a,!0),i.child}function sg(n){var i=n.stateNode;i.pendingContext?om(n,i.pendingContext,i.pendingContext!==i.context):i.context&&om(n,i.context,!1),Kd(n,i.containerInfo)}function ig(n,i,a,c,h){return Vo(),zd(h),i.flags|=256,Tn(n,i,a,c),i.child}var hh={dehydrated:null,treeContext:null,retryLane:0};function fh(n){return{baseLanes:n,cachePool:null,transitions:null}}function og(n,i,a){var c=i.pendingProps,h=Tt.current,g=!1,w=(i.flags&128)!==0,A;if((A=w)||(A=n!==null&&n.memoizedState===null?!1:(h&2)!==0),A?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),dt(Tt,h&1),n===null)return Ud(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,g?(c=i.mode,g=i.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Ku(w,c,0,null),n=Ki(n,c,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=fh(a),i.memoizedState=hh,n):ph(i,w));if(h=n.memoizedState,h!==null&&(A=h.dehydrated,A!==null))return hE(n,i,w,c,A,h,a);if(g){g=c.fallback,w=i.mode,h=n.child,A=h.sibling;var k={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==h?(c=i.child,c.childLanes=0,c.pendingProps=k,i.deletions=null):(c=ti(h,k),c.subtreeFlags=h.subtreeFlags&14680064),A!==null?g=ti(A,g):(g=Ki(g,w,a,null),g.flags|=2),g.return=i,c.return=i,c.sibling=g,i.child=c,c=g,g=i.child,w=n.child.memoizedState,w=w===null?fh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,i.memoizedState=hh,c}return g=n.child,n=g.sibling,c=ti(g,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function ph(n,i){return i=Ku({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Ou(n,i,a,c){return c!==null&&zd(c),Oo(i,n.child,null,a),n=ph(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function hE(n,i,a,c,h,g,w){if(a)return i.flags&256?(i.flags&=-257,c=lh(Error(t(422))),Ou(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=c.fallback,h=i.mode,c=Ku({mode:"visible",children:c.children},h,0,null),g=Ki(g,h,w,null),g.flags|=2,c.return=i,g.return=i,c.sibling=g,i.child=c,(i.mode&1)!==0&&Oo(i,n.child,null,w),i.child.memoizedState=fh(w),i.memoizedState=hh,g);if((i.mode&1)===0)return Ou(n,i,w,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var A=c.dgst;return c=A,g=Error(t(419)),c=lh(g,c,void 0),Ou(n,i,w,c)}if(A=(w&n.childLanes)!==0,Mn||A){if(c=Kt,c!==null){switch(w&-w){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|w))!==0?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,ps(n,h),Dr(c,n,h,-1))}return bh(),c=lh(Error(t(421))),Ou(n,i,w,c)}return h.data==="$?"?(i.flags|=128,i.child=n.child,i=SE.bind(null,n),h._reactRetry=i,null):(n=g.treeContext,er=Hs(h.nextSibling),Zn=i,wt=!0,Pr=null,n!==null&&(fr[pr++]=hs,fr[pr++]=fs,fr[pr++]=Fi,hs=n.id,fs=n.overflow,Fi=i),i=ph(i,c.children),i.flags|=4096,i)}function ag(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Wd(n.return,i,a)}function mh(n,i,a,c,h){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=h)}function lg(n,i,a){var c=i.pendingProps,h=c.revealOrder,g=c.tail;if(Tn(n,i,c.children,a),c=Tt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ag(n,a,i);else if(n.tag===19)ag(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(dt(Tt,c),(i.mode&1)===0)i.memoizedState=null;else switch(h){case"forwards":for(a=i.child,h=null;a!==null;)n=a.alternate,n!==null&&Au(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),mh(i,!1,h,a,g);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(n=h.alternate,n!==null&&Au(n)===null){i.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}mh(i,!0,a,null,g);break;case"together":mh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Lu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function gs(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Hi|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ti(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ti(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function fE(n,i,a){switch(i.tag){case 3:sg(i),Vo();break;case 5:Tm(i);break;case 1:jn(i.type)&&vu(i);break;case 4:Kd(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,h=i.memoizedProps.value;dt(xu,c._currentValue),c._currentValue=h;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(dt(Tt,Tt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?og(n,i,a):(dt(Tt,Tt.current&1),n=gs(n,i,a),n!==null?n.sibling:null);dt(Tt,Tt.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return lg(n,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),dt(Tt,Tt.current),c)break;return null;case 22:case 23:return i.lanes=0,tg(n,i,a)}return gs(n,i,a)}var ug,gh,cg,dg;ug=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},gh=function(){},cg=function(n,i,a,c){var h=n.memoizedProps;if(h!==c){n=i.stateNode,Bi(Gr.current);var g=null;switch(a){case"input":h=ge(n,h),c=ge(n,c),g=[];break;case"select":h=oe({},h,{value:void 0}),c=oe({},c,{value:void 0}),g=[];break;case"textarea":h=bn(n,h),c=bn(n,c),g=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=mu)}Kn(a,c);var w;a=null;for(B in h)if(!c.hasOwnProperty(B)&&h.hasOwnProperty(B)&&h[B]!=null)if(B==="style"){var A=h[B];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in c){var k=c[B];if(A=h!=null?h[B]:void 0,c.hasOwnProperty(B)&&k!==A&&(k!=null||A!=null))if(B==="style")if(A){for(w in A)!A.hasOwnProperty(w)||k&&k.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in k)k.hasOwnProperty(w)&&A[w]!==k[w]&&(a||(a={}),a[w]=k[w])}else a||(g||(g=[]),g.push(B,a)),a=k;else B==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,A=A?A.__html:void 0,k!=null&&A!==k&&(g=g||[]).push(B,k)):B==="children"?typeof k!="string"&&typeof k!="number"||(g=g||[]).push(B,""+k):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(k!=null&&B==="onScroll"&&pt("scroll",n),g||A===k||(g=[])):(g=g||[]).push(B,k))}a&&(g=g||[]).push("style",a);var B=g;(i.updateQueue=B)&&(i.flags|=4)}},dg=function(n,i,a,c){a!==c&&(i.flags|=4)};function Wa(n,i){if(!wt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function hn(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function pE(n,i,a){var c=i.pendingProps;switch(Md(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(i),null;case 1:return jn(i.type)&&yu(),hn(i),null;case 3:return c=i.stateNode,Mo(),mt(Ln),mt(cn),Jd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Tu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pr!==null&&(Rh(Pr),Pr=null))),gh(n,i),hn(i),null;case 5:Qd(i);var h=Bi(Ua.current);if(a=i.type,n!==null&&i.stateNode!=null)cg(n,i,a,c,h),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return hn(i),null}if(n=Bi(Gr.current),Tu(i)){c=i.stateNode,a=i.type;var g=i.memoizedProps;switch(c[qr]=i,c[Oa]=g,n=(i.mode&1)!==0,a){case"dialog":pt("cancel",c),pt("close",c);break;case"iframe":case"object":case"embed":pt("load",c);break;case"video":case"audio":for(h=0;h<Na.length;h++)pt(Na[h],c);break;case"source":pt("error",c);break;case"img":case"image":case"link":pt("error",c),pt("load",c);break;case"details":pt("toggle",c);break;case"input":Ue(c,g),pt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},pt("invalid",c);break;case"textarea":an(c,g),pt("invalid",c)}Kn(a,g),h=null;for(var w in g)if(g.hasOwnProperty(w)){var A=g[w];w==="children"?typeof A=="string"?c.textContent!==A&&(g.suppressHydrationWarning!==!0&&pu(c.textContent,A,n),h=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&pu(c.textContent,A,n),h=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&pt("scroll",c)}switch(a){case"input":Rt(c),Pn(c,g,!0);break;case"textarea":Rt(c),Xt(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=mu)}c=h,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ie(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[qr]=i,n[Oa]=c,ug(n,i,!1,!1),i.stateNode=n;e:{switch(w=Ps(a,c),a){case"dialog":pt("cancel",n),pt("close",n),h=c;break;case"iframe":case"object":case"embed":pt("load",n),h=c;break;case"video":case"audio":for(h=0;h<Na.length;h++)pt(Na[h],n);h=c;break;case"source":pt("error",n),h=c;break;case"img":case"image":case"link":pt("error",n),pt("load",n),h=c;break;case"details":pt("toggle",n),h=c;break;case"input":Ue(n,c),h=ge(n,c),pt("invalid",n);break;case"option":h=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},h=oe({},c,{value:void 0}),pt("invalid",n);break;case"textarea":an(n,c),h=bn(n,c),pt("invalid",n);break;default:h=c}Kn(a,h),A=h;for(g in A)if(A.hasOwnProperty(g)){var k=A[g];g==="style"?or(n,k):g==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&jr(n,k)):g==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&Er(n,k):typeof k=="number"&&Er(n,""+k):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?k!=null&&g==="onScroll"&&pt("scroll",n):k!=null&&Y(n,g,k,w))}switch(a){case"input":Rt(n),Pn(n,c,!1);break;case"textarea":Rt(n),Xt(n);break;case"option":c.value!=null&&n.setAttribute("value",""+je(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?Wt(n,!!c.multiple,g,!1):c.defaultValue!=null&&Wt(n,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=mu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return hn(i),null;case 6:if(n&&i.stateNode!=null)dg(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Bi(Ua.current),Bi(Gr.current),Tu(i)){if(c=i.stateNode,a=i.memoizedProps,c[qr]=i,(g=c.nodeValue!==a)&&(n=Zn,n!==null))switch(n.tag){case 3:pu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&pu(c.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[qr]=i,i.stateNode=c}return hn(i),null;case 13:if(mt(Tt),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(wt&&er!==null&&(i.mode&1)!==0&&(i.flags&128)===0)pm(),Vo(),i.flags|=98560,g=!1;else if(g=Tu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[qr]=i}else Vo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;hn(i),g=!1}else Pr!==null&&(Rh(Pr),Pr=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(Tt.current&1)!==0?$t===0&&($t=3):bh())),i.updateQueue!==null&&(i.flags|=4),hn(i),null);case 4:return Mo(),gh(n,i),n===null&&Da(i.stateNode.containerInfo),hn(i),null;case 10:return Hd(i.type._context),hn(i),null;case 17:return jn(i.type)&&yu(),hn(i),null;case 19:if(mt(Tt),g=i.memoizedState,g===null)return hn(i),null;if(c=(i.flags&128)!==0,w=g.rendering,w===null)if(c)Wa(g,!1);else{if($t!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Au(n),w!==null){for(i.flags|=128,Wa(g,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)g=a,n=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return dt(Tt,Tt.current&1|2),i.child}n=n.sibling}g.tail!==null&&ct()>Bo&&(i.flags|=128,c=!0,Wa(g,!1),i.lanes=4194304)}else{if(!c)if(n=Au(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Wa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!wt)return hn(i),null}else 2*ct()-g.renderingStartTime>Bo&&a!==1073741824&&(i.flags|=128,c=!0,Wa(g,!1),i.lanes=4194304);g.isBackwards?(w.sibling=i.child,i.child=w):(a=g.last,a!==null?a.sibling=w:i.child=w,g.last=w)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=ct(),i.sibling=null,a=Tt.current,dt(Tt,c?a&1|2:a&1),i):(hn(i),null);case 22:case 23:return Ph(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(tr&1073741824)!==0&&(hn(i),i.subtreeFlags&6&&(i.flags|=8192)):hn(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function mE(n,i){switch(Md(i),i.tag){case 1:return jn(i.type)&&yu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Mo(),mt(Ln),mt(cn),Jd(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Qd(i),null;case 13:if(mt(Tt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Vo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return mt(Tt),null;case 4:return Mo(),null;case 10:return Hd(i.type._context),null;case 22:case 23:return Ph(),null;case 24:return null;default:return null}}var ju=!1,fn=!1,gE=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Uo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Ct(n,i,c)}else a.current=null}function yh(n,i,a){try{a()}catch(c){Ct(n,i,c)}}var hg=!1;function yE(n,i){if(Pd=zs,n=Hp(),Ed(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,A=-1,k=-1,B=0,Z=0,te=n,X=null;t:for(;;){for(var ye;te!==a||h!==0&&te.nodeType!==3||(A=w+h),te!==g||c!==0&&te.nodeType!==3||(k=w+c),te.nodeType===3&&(w+=te.nodeValue.length),(ye=te.firstChild)!==null;)X=te,te=ye;for(;;){if(te===n)break t;if(X===a&&++B===h&&(A=w),X===g&&++Z===c&&(k=w),(ye=te.nextSibling)!==null)break;te=X,X=te.parentNode}te=ye}a=A===-1||k===-1?null:{start:A,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(bd={focusedElem:n,selectionRange:a},zs=!1,Ee=i;Ee!==null;)if(i=Ee,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ee=n;else for(;Ee!==null;){i=Ee;try{var Ie=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Ie!==null){var xe=Ie.memoizedProps,Pt=Ie.memoizedState,U=i.stateNode,V=U.getSnapshotBeforeUpdate(i.elementType===i.type?xe:br(i.type,xe),Pt);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){Ct(i,i.return,ne)}if(n=i.sibling,n!==null){n.return=i.return,Ee=n;break}Ee=i.return}return Ie=hg,hg=!1,Ie}function qa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&n)===n){var g=h.destroy;h.destroy=void 0,g!==void 0&&yh(i,a,g)}h=h.next}while(h!==c)}}function Mu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function vh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function fg(n){var i=n.alternate;i!==null&&(n.alternate=null,fg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[qr],delete i[Oa],delete i[Vd],delete i[Zw],delete i[eE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function pg(n){return n.tag===5||n.tag===3||n.tag===4}function mg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function _h(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=mu));else if(c!==4&&(n=n.child,n!==null))for(_h(n,i,a),n=n.sibling;n!==null;)_h(n,i,a),n=n.sibling}function wh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(wh(n,i,a),n=n.sibling;n!==null;)wh(n,i,a),n=n.sibling}var tn=null,kr=!1;function Ys(n,i,a){for(a=a.child;a!==null;)gg(n,i,a),a=a.sibling}function gg(n,i,a){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(bi,a)}catch{}switch(a.tag){case 5:fn||Uo(a,i);case 6:var c=tn,h=kr;tn=null,Ys(n,i,a),tn=c,kr=h,tn!==null&&(kr?(n=tn,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):tn.removeChild(a.stateNode));break;case 18:tn!==null&&(kr?(n=tn,a=a.stateNode,n.nodeType===8?Dd(n.parentNode,a):n.nodeType===1&&Dd(n,a),Cr(n)):Dd(tn,a.stateNode));break;case 4:c=tn,h=kr,tn=a.stateNode.containerInfo,kr=!0,Ys(n,i,a),tn=c,kr=h;break;case 0:case 11:case 14:case 15:if(!fn&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var g=h,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&yh(a,i,w),h=h.next}while(h!==c)}Ys(n,i,a);break;case 1:if(!fn&&(Uo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){Ct(a,i,A)}Ys(n,i,a);break;case 21:Ys(n,i,a);break;case 22:a.mode&1?(fn=(c=fn)||a.memoizedState!==null,Ys(n,i,a),fn=c):Ys(n,i,a);break;default:Ys(n,i,a)}}function yg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new gE),i.forEach(function(c){var h=CE.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}}function Nr(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var g=n,w=i,A=w;e:for(;A!==null;){switch(A.tag){case 5:tn=A.stateNode,kr=!1;break e;case 3:tn=A.stateNode.containerInfo,kr=!0;break e;case 4:tn=A.stateNode.containerInfo,kr=!0;break e}A=A.return}if(tn===null)throw Error(t(160));gg(g,w,h),tn=null,kr=!1;var k=h.alternate;k!==null&&(k.return=null),h.return=null}catch(B){Ct(h,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)vg(i,n),i=i.sibling}function vg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Nr(i,n),Qr(n),c&4){try{qa(3,n,n.return),Mu(3,n)}catch(xe){Ct(n,n.return,xe)}try{qa(5,n,n.return)}catch(xe){Ct(n,n.return,xe)}}break;case 1:Nr(i,n),Qr(n),c&512&&a!==null&&Uo(a,a.return);break;case 5:if(Nr(i,n),Qr(n),c&512&&a!==null&&Uo(a,a.return),n.flags&32){var h=n.stateNode;try{Er(h,"")}catch(xe){Ct(n,n.return,xe)}}if(c&4&&(h=n.stateNode,h!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,A=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&An(h,g),Ps(A,w);var B=Ps(A,g);for(w=0;w<k.length;w+=2){var Z=k[w],te=k[w+1];Z==="style"?or(h,te):Z==="dangerouslySetInnerHTML"?jr(h,te):Z==="children"?Er(h,te):Y(h,Z,te,B)}switch(A){case"input":Ut(h,g);break;case"textarea":kn(h,g);break;case"select":var X=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var ye=g.value;ye!=null?Wt(h,!!g.multiple,ye,!1):X!==!!g.multiple&&(g.defaultValue!=null?Wt(h,!!g.multiple,g.defaultValue,!0):Wt(h,!!g.multiple,g.multiple?[]:"",!1))}h[Oa]=g}catch(xe){Ct(n,n.return,xe)}}break;case 6:if(Nr(i,n),Qr(n),c&4){if(n.stateNode===null)throw Error(t(162));h=n.stateNode,g=n.memoizedProps;try{h.nodeValue=g}catch(xe){Ct(n,n.return,xe)}}break;case 3:if(Nr(i,n),Qr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Cr(i.containerInfo)}catch(xe){Ct(n,n.return,xe)}break;case 4:Nr(i,n),Qr(n);break;case 13:Nr(i,n),Qr(n),h=n.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(Ih=ct())),c&4&&yg(n);break;case 22:if(Z=a!==null&&a.memoizedState!==null,n.mode&1?(fn=(B=fn)||Z,Nr(i,n),fn=B):Nr(i,n),Qr(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!Z&&(n.mode&1)!==0)for(Ee=n,Z=n.child;Z!==null;){for(te=Ee=Z;Ee!==null;){switch(X=Ee,ye=X.child,X.tag){case 0:case 11:case 14:case 15:qa(4,X,X.return);break;case 1:Uo(X,X.return);var Ie=X.stateNode;if(typeof Ie.componentWillUnmount=="function"){c=X,a=X.return;try{i=c,Ie.props=i.memoizedProps,Ie.state=i.memoizedState,Ie.componentWillUnmount()}catch(xe){Ct(c,a,xe)}}break;case 5:Uo(X,X.return);break;case 22:if(X.memoizedState!==null){Eg(te);continue}}ye!==null?(ye.return=X,Ee=ye):Eg(te)}Z=Z.sibling}e:for(Z=null,te=n;;){if(te.tag===5){if(Z===null){Z=te;try{h=te.stateNode,B?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=te.stateNode,k=te.memoizedProps.style,w=k!=null&&k.hasOwnProperty("display")?k.display:null,A.style.display=ns("display",w))}catch(xe){Ct(n,n.return,xe)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=B?"":te.memoizedProps}catch(xe){Ct(n,n.return,xe)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Nr(i,n),Qr(n),c&4&&yg(n);break;case 21:break;default:Nr(i,n),Qr(n)}}function Qr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(pg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(Er(h,""),c.flags&=-33);var g=mg(n);wh(n,g,h);break;case 3:case 4:var w=c.stateNode.containerInfo,A=mg(n);_h(n,A,w);break;default:throw Error(t(161))}}catch(k){Ct(n,n.return,k)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function vE(n,i,a){Ee=n,_g(n)}function _g(n,i,a){for(var c=(n.mode&1)!==0;Ee!==null;){var h=Ee,g=h.child;if(h.tag===22&&c){var w=h.memoizedState!==null||ju;if(!w){var A=h.alternate,k=A!==null&&A.memoizedState!==null||fn;A=ju;var B=fn;if(ju=w,(fn=k)&&!B)for(Ee=h;Ee!==null;)w=Ee,k=w.child,w.tag===22&&w.memoizedState!==null?Tg(h):k!==null?(k.return=w,Ee=k):Tg(h);for(;g!==null;)Ee=g,_g(g),g=g.sibling;Ee=h,ju=A,fn=B}wg(n)}else(h.subtreeFlags&8772)!==0&&g!==null?(g.return=h,Ee=g):wg(n)}}function wg(n){for(;Ee!==null;){var i=Ee;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:fn||Mu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!fn)if(a===null)c.componentDidMount();else{var h=i.elementType===i.type?a.memoizedProps:br(i.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&Em(i,g,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Em(i,w,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var k=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var Z=B.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&Cr(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}fn||i.flags&512&&vh(i)}catch(X){Ct(i,i.return,X)}}if(i===n){Ee=null;break}if(a=i.sibling,a!==null){a.return=i.return,Ee=a;break}Ee=i.return}}function Eg(n){for(;Ee!==null;){var i=Ee;if(i===n){Ee=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Ee=a;break}Ee=i.return}}function Tg(n){for(;Ee!==null;){var i=Ee;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Mu(4,i)}catch(k){Ct(i,a,k)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var h=i.return;try{c.componentDidMount()}catch(k){Ct(i,h,k)}}var g=i.return;try{vh(i)}catch(k){Ct(i,g,k)}break;case 5:var w=i.return;try{vh(i)}catch(k){Ct(i,w,k)}}}catch(k){Ct(i,i.return,k)}if(i===n){Ee=null;break}var A=i.sibling;if(A!==null){A.return=i.return,Ee=A;break}Ee=i.return}}var _E=Math.ceil,Fu=ce.ReactCurrentDispatcher,Eh=ce.ReactCurrentOwner,yr=ce.ReactCurrentBatchConfig,tt=0,Kt=null,Vt=null,nn=0,tr=0,zo=Ws(0),$t=0,Ga=null,Hi=0,Uu=0,Th=0,Ka=null,Fn=null,Ih=0,Bo=1/0,ys=null,zu=!1,xh=null,Js=null,Bu=!1,Xs=null,$u=0,Qa=0,Sh=null,Hu=-1,Wu=0;function In(){return(tt&6)!==0?ct():Hu!==-1?Hu:Hu=ct()}function Zs(n){return(n.mode&1)===0?1:(tt&2)!==0&&nn!==0?nn&-nn:nE.transition!==null?(Wu===0&&(Wu=Ni()),Wu):(n=Ye,n!==0||(n=window.event,n=n===void 0?16:Ia(n.type)),n)}function Dr(n,i,a,c){if(50<Qa)throw Qa=0,Sh=null,Error(t(185));js(n,a,c),((tt&2)===0||n!==Kt)&&(n===Kt&&((tt&2)===0&&(Uu|=a),$t===4&&ei(n,nn)),Un(n,c),a===1&&tt===0&&(i.mode&1)===0&&(Bo=ct()+500,_u&&Gs()))}function Un(n,i){var a=n.callbackNode;is(n,i);var c=ki(n,n===Kt?nn:0);if(c===0)a!==null&&_n(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&_n(a),i===1)n.tag===0?tE(xg.bind(null,n)):um(xg.bind(null,n)),Jw(function(){(tt&6)===0&&Gs()}),a=null;else{switch(Fs(c)){case 1:a=Pi;break;case 4:a=Vs;break;case 16:a=cr;break;case 536870912:a=Wl;break;default:a=cr}a=Ng(a,Ig.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Ig(n,i){if(Hu=-1,Wu=0,(tt&6)!==0)throw Error(t(327));var a=n.callbackNode;if($o()&&n.callbackNode!==a)return null;var c=ki(n,n===Kt?nn:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=qu(n,c);else{i=c;var h=tt;tt|=2;var g=Cg();(Kt!==n||nn!==i)&&(ys=null,Bo=ct()+500,qi(n,i));do try{TE();break}catch(A){Sg(n,A)}while(!0);$d(),Fu.current=g,tt=h,Vt!==null?i=0:(Kt=null,nn=0,i=$t)}if(i!==0){if(i===2&&(h=Yn(n),h!==0&&(c=h,i=Ch(n,h))),i===1)throw a=Ga,qi(n,0),ei(n,c),Un(n,ct()),a;if(i===6)ei(n,c);else{if(h=n.current.alternate,(c&30)===0&&!wE(h)&&(i=qu(n,c),i===2&&(g=Yn(n),g!==0&&(c=g,i=Ch(n,g))),i===1))throw a=Ga,qi(n,0),ei(n,c),Un(n,ct()),a;switch(n.finishedWork=h,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Gi(n,Fn,ys);break;case 3:if(ei(n,c),(c&130023424)===c&&(i=Ih+500-ct(),10<i)){if(ki(n,0)!==0)break;if(h=n.suspendedLanes,(h&c)!==c){In(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=Nd(Gi.bind(null,n,Fn,ys),i);break}Gi(n,Fn,ys);break;case 4:if(ei(n,c),(c&4194240)===c)break;for(i=n.eventTimes,h=-1;0<c;){var w=31-wn(c);g=1<<w,w=i[w],w>h&&(h=w),c&=~g}if(c=h,c=ct()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*_E(c/1960))-c,10<c){n.timeoutHandle=Nd(Gi.bind(null,n,Fn,ys),c);break}Gi(n,Fn,ys);break;case 5:Gi(n,Fn,ys);break;default:throw Error(t(329))}}}return Un(n,ct()),n.callbackNode===a?Ig.bind(null,n):null}function Ch(n,i){var a=Ka;return n.current.memoizedState.isDehydrated&&(qi(n,i).flags|=256),n=qu(n,i),n!==2&&(i=Fn,Fn=a,i!==null&&Rh(i)),n}function Rh(n){Fn===null?Fn=n:Fn.push.apply(Fn,n)}function wE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],g=h.getSnapshot;h=h.value;try{if(!Ar(g(),h))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ei(n,i){for(i&=~Th,i&=~Uu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-wn(i),c=1<<a;n[a]=-1,i&=~c}}function xg(n){if((tt&6)!==0)throw Error(t(327));$o();var i=ki(n,0);if((i&1)===0)return Un(n,ct()),null;var a=qu(n,i);if(n.tag!==0&&a===2){var c=Yn(n);c!==0&&(i=c,a=Ch(n,c))}if(a===1)throw a=Ga,qi(n,0),ei(n,i),Un(n,ct()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Gi(n,Fn,ys),Un(n,ct()),null}function Ah(n,i){var a=tt;tt|=1;try{return n(i)}finally{tt=a,tt===0&&(Bo=ct()+500,_u&&Gs())}}function Wi(n){Xs!==null&&Xs.tag===0&&(tt&6)===0&&$o();var i=tt;tt|=1;var a=yr.transition,c=Ye;try{if(yr.transition=null,Ye=1,n)return n()}finally{Ye=c,yr.transition=a,tt=i,(tt&6)===0&&Gs()}}function Ph(){tr=zo.current,mt(zo)}function qi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Yw(a)),Vt!==null)for(a=Vt.return;a!==null;){var c=a;switch(Md(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&yu();break;case 3:Mo(),mt(Ln),mt(cn),Jd();break;case 5:Qd(c);break;case 4:Mo();break;case 13:mt(Tt);break;case 19:mt(Tt);break;case 10:Hd(c.type._context);break;case 22:case 23:Ph()}a=a.return}if(Kt=n,Vt=n=ti(n.current,null),nn=tr=i,$t=0,Ga=null,Th=Uu=Hi=0,Fn=Ka=null,zi!==null){for(i=0;i<zi.length;i++)if(a=zi[i],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=h,c.next=w}a.pending=c}zi=null}return n}function Sg(n,i){do{var a=Vt;try{if($d(),Pu.current=Du,bu){for(var c=It.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}bu=!1}if($i=0,Gt=Bt=It=null,za=!1,Ba=0,Eh.current=null,a===null||a.return===null){$t=1,Ga=i,Vt=null;break}e:{var g=n,w=a.return,A=a,k=i;if(i=nn,A.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var B=k,Z=A,te=Z.tag;if((Z.mode&1)===0&&(te===0||te===11||te===15)){var X=Z.alternate;X?(Z.updateQueue=X.updateQueue,Z.memoizedState=X.memoizedState,Z.lanes=X.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ye=Ym(w);if(ye!==null){ye.flags&=-257,Jm(ye,w,A,g,i),ye.mode&1&&Qm(g,B,i),i=ye,k=B;var Ie=i.updateQueue;if(Ie===null){var xe=new Set;xe.add(k),i.updateQueue=xe}else Ie.add(k);break e}else{if((i&1)===0){Qm(g,B,i),bh();break e}k=Error(t(426))}}else if(wt&&A.mode&1){var Pt=Ym(w);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),Jm(Pt,w,A,g,i),zd(Fo(k,A));break e}}g=k=Fo(k,A),$t!==4&&($t=2),Ka===null?Ka=[g]:Ka.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var U=Gm(g,k,i);wm(g,U);break e;case 1:A=k;var V=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Js===null||!Js.has(z)))){g.flags|=65536,i&=-i,g.lanes|=i;var ne=Km(g,A,i);wm(g,ne);break e}}g=g.return}while(g!==null)}Ag(a)}catch(Ce){i=Ce,Vt===a&&a!==null&&(Vt=a=a.return);continue}break}while(!0)}function Cg(){var n=Fu.current;return Fu.current=Du,n===null?Du:n}function bh(){($t===0||$t===3||$t===2)&&($t=4),Kt===null||(Hi&268435455)===0&&(Uu&268435455)===0||ei(Kt,nn)}function qu(n,i){var a=tt;tt|=2;var c=Cg();(Kt!==n||nn!==i)&&(ys=null,qi(n,i));do try{EE();break}catch(h){Sg(n,h)}while(!0);if($d(),tt=a,Fu.current=c,Vt!==null)throw Error(t(261));return Kt=null,nn=0,$t}function EE(){for(;Vt!==null;)Rg(Vt)}function TE(){for(;Vt!==null&&!Ur();)Rg(Vt)}function Rg(n){var i=kg(n.alternate,n,tr);n.memoizedProps=n.pendingProps,i===null?Ag(n):Vt=i,Eh.current=null}function Ag(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=pE(a,i,tr),a!==null){Vt=a;return}}else{if(a=mE(a,i),a!==null){a.flags&=32767,Vt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{$t=6,Vt=null;return}}if(i=i.sibling,i!==null){Vt=i;return}Vt=i=n}while(i!==null);$t===0&&($t=5)}function Gi(n,i,a){var c=Ye,h=yr.transition;try{yr.transition=null,Ye=1,IE(n,i,a,c)}finally{yr.transition=h,Ye=c}return null}function IE(n,i,a,c){do $o();while(Xs!==null);if((tt&6)!==0)throw Error(t(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(lt(n,g),n===Kt&&(Vt=Kt=null,nn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Bu||(Bu=!0,Ng(cr,function(){return $o(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=yr.transition,yr.transition=null;var w=Ye;Ye=1;var A=tt;tt|=4,Eh.current=null,yE(n,a),vg(a,n),$w(bd),zs=!!Pd,bd=Pd=null,n.current=a,vE(a),fd(),tt=A,Ye=w,yr.transition=g}else n.current=a;if(Bu&&(Bu=!1,Xs=n,$u=h),g=n.pendingLanes,g===0&&(Js=null),ql(a.stateNode),Un(n,ct()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)h=i[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(zu)throw zu=!1,n=xh,xh=null,n;return($u&1)!==0&&n.tag!==0&&$o(),g=n.pendingLanes,(g&1)!==0?n===Sh?Qa++:(Qa=0,Sh=n):Qa=0,Gs(),null}function $o(){if(Xs!==null){var n=Fs($u),i=yr.transition,a=Ye;try{if(yr.transition=null,Ye=16>n?16:n,Xs===null)var c=!1;else{if(n=Xs,Xs=null,$u=0,(tt&6)!==0)throw Error(t(331));var h=tt;for(tt|=4,Ee=n.current;Ee!==null;){var g=Ee,w=g.child;if((Ee.flags&16)!==0){var A=g.deletions;if(A!==null){for(var k=0;k<A.length;k++){var B=A[k];for(Ee=B;Ee!==null;){var Z=Ee;switch(Z.tag){case 0:case 11:case 15:qa(8,Z,g)}var te=Z.child;if(te!==null)te.return=Z,Ee=te;else for(;Ee!==null;){Z=Ee;var X=Z.sibling,ye=Z.return;if(fg(Z),Z===B){Ee=null;break}if(X!==null){X.return=ye,Ee=X;break}Ee=ye}}}var Ie=g.alternate;if(Ie!==null){var xe=Ie.child;if(xe!==null){Ie.child=null;do{var Pt=xe.sibling;xe.sibling=null,xe=Pt}while(xe!==null)}}Ee=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,Ee=w;else e:for(;Ee!==null;){if(g=Ee,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:qa(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,Ee=U;break e}Ee=g.return}}var V=n.current;for(Ee=V;Ee!==null;){w=Ee;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,Ee=z;else e:for(w=V;Ee!==null;){if(A=Ee,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Mu(9,A)}}catch(Ce){Ct(A,A.return,Ce)}if(A===w){Ee=null;break e}var ne=A.sibling;if(ne!==null){ne.return=A.return,Ee=ne;break e}Ee=A.return}}if(tt=h,Gs(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(bi,n)}catch{}c=!0}return c}finally{Ye=a,yr.transition=i}}return!1}function Pg(n,i,a){i=Fo(a,i),i=Gm(n,i,1),n=Qs(n,i,1),i=In(),n!==null&&(js(n,1,i),Un(n,i))}function Ct(n,i,a){if(n.tag===3)Pg(n,n,a);else for(;i!==null;){if(i.tag===3){Pg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Js===null||!Js.has(c))){n=Fo(a,n),n=Km(i,n,1),i=Qs(i,n,1),n=In(),i!==null&&(js(i,1,n),Un(i,n));break}}i=i.return}}function xE(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=In(),n.pingedLanes|=n.suspendedLanes&a,Kt===n&&(nn&a)===a&&($t===4||$t===3&&(nn&130023424)===nn&&500>ct()-Ih?qi(n,0):Th|=a),Un(n,i)}function bg(n,i){i===0&&((n.mode&1)===0?i=1:(i=ho,ho<<=1,(ho&130023424)===0&&(ho=4194304)));var a=In();n=ps(n,i),n!==null&&(js(n,i,a),Un(n,a))}function SE(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),bg(n,a)}function CE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),bg(n,a)}var kg;kg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Ln.current)Mn=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Mn=!1,fE(n,i,a);Mn=(n.flags&131072)!==0}else Mn=!1,wt&&(i.flags&1048576)!==0&&cm(i,Eu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Lu(n,i),n=i.pendingProps;var h=ko(i,cn.current);jo(i,a),h=eh(null,i,c,n,h,a);var g=th();return i.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,jn(c)?(g=!0,vu(i)):g=!1,i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Gd(i),h.updater=Vu,i.stateNode=h,h._reactInternals=i,ah(i,c,n,a),i=dh(null,i,c,!0,g,a)):(i.tag=0,wt&&g&&jd(i),Tn(null,i,h,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Lu(n,i),n=i.pendingProps,h=c._init,c=h(c._payload),i.type=c,h=i.tag=AE(c),n=br(c,n),h){case 0:i=ch(null,i,c,n,a);break e;case 1:i=rg(null,i,c,n,a);break e;case 11:i=Xm(null,i,c,n,a);break e;case 14:i=Zm(null,i,c,br(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:br(c,h),ch(n,i,c,h,a);case 1:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:br(c,h),rg(n,i,c,h,a);case 3:e:{if(sg(i),n===null)throw Error(t(387));c=i.pendingProps,g=i.memoizedState,h=g.element,_m(n,i),Ru(i,c,null,a);var w=i.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){h=Fo(Error(t(423)),i),i=ig(n,i,c,a,h);break e}else if(c!==h){h=Fo(Error(t(424)),i),i=ig(n,i,c,a,h);break e}else for(er=Hs(i.stateNode.containerInfo.firstChild),Zn=i,wt=!0,Pr=null,a=ym(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Vo(),c===h){i=gs(n,i,a);break e}Tn(n,i,c,a)}i=i.child}return i;case 5:return Tm(i),n===null&&Ud(i),c=i.type,h=i.pendingProps,g=n!==null?n.memoizedProps:null,w=h.children,kd(c,h)?w=null:g!==null&&kd(c,g)&&(i.flags|=32),ng(n,i),Tn(n,i,w,a),i.child;case 6:return n===null&&Ud(i),null;case 13:return og(n,i,a);case 4:return Kd(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Oo(i,null,c,a):Tn(n,i,c,a),i.child;case 11:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:br(c,h),Xm(n,i,c,h,a);case 7:return Tn(n,i,i.pendingProps,a),i.child;case 8:return Tn(n,i,i.pendingProps.children,a),i.child;case 12:return Tn(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,h=i.pendingProps,g=i.memoizedProps,w=h.value,dt(xu,c._currentValue),c._currentValue=w,g!==null)if(Ar(g.value,w)){if(g.children===h.children&&!Ln.current){i=gs(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var A=g.dependencies;if(A!==null){w=g.child;for(var k=A.firstContext;k!==null;){if(k.context===c){if(g.tag===1){k=ms(-1,a&-a),k.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var Z=B.pending;Z===null?k.next=k:(k.next=Z.next,Z.next=k),B.pending=k}}g.lanes|=a,k=g.alternate,k!==null&&(k.lanes|=a),Wd(g.return,a,i),A.lanes|=a;break}k=k.next}}else if(g.tag===10)w=g.type===i.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),Wd(w,a,i),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===i){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Tn(n,i,h.children,a),i=i.child}return i;case 9:return h=i.type,c=i.pendingProps.children,jo(i,a),h=mr(h),c=c(h),i.flags|=1,Tn(n,i,c,a),i.child;case 14:return c=i.type,h=br(c,i.pendingProps),h=br(c.type,h),Zm(n,i,c,h,a);case 15:return eg(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:br(c,h),Lu(n,i),i.tag=1,jn(c)?(n=!0,vu(i)):n=!1,jo(i,a),Wm(i,c,h),ah(i,c,h,a),dh(null,i,c,!0,n,a);case 19:return lg(n,i,a);case 22:return tg(n,i,a)}throw Error(t(156,i.tag))};function Ng(n,i){return St(n,i)}function RE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(n,i,a,c){return new RE(n,i,a,c)}function kh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function AE(n){if(typeof n=="function")return kh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===D)return 11;if(n===at)return 14}return 2}function ti(n,i){var a=n.alternate;return a===null?(a=vr(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Gu(n,i,a,c,h,g){var w=2;if(c=n,typeof n=="function")kh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case N:return Ki(a.children,h,g,i);case R:w=8,h|=8;break;case S:return n=vr(12,a,i,h|2),n.elementType=S,n.lanes=g,n;case C:return n=vr(13,a,i,h),n.elementType=C,n.lanes=g,n;case He:return n=vr(19,a,i,h),n.elementType=He,n.lanes=g,n;case ue:return Ku(a,h,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:w=10;break e;case P:w=9;break e;case D:w=11;break e;case at:w=14;break e;case ut:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=vr(w,a,i,h),i.elementType=n,i.type=c,i.lanes=g,i}function Ki(n,i,a,c){return n=vr(7,n,c,i),n.lanes=a,n}function Ku(n,i,a,c){return n=vr(22,n,c,i),n.elementType=ue,n.lanes=a,n.stateNode={isHidden:!1},n}function Nh(n,i,a){return n=vr(6,n,null,i),n.lanes=a,n}function Dh(n,i,a){return i=vr(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function PE(n,i,a,c,h){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ls(0),this.expirationTimes=Ls(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Vh(n,i,a,c,h,g,w,A,k){return n=new PE(n,i,a,A,k),i===1?(i=1,g===!0&&(i|=8)):i=0,g=vr(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gd(g),n}function bE(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Dg(n){if(!n)return qs;n=n._reactInternals;e:{if(At(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(jn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(jn(a))return am(n,a,i)}return i}function Vg(n,i,a,c,h,g,w,A,k){return n=Vh(a,c,!0,n,h,g,w,A,k),n.context=Dg(null),a=n.current,c=In(),h=Zs(a),g=ms(c,h),g.callback=i??null,Qs(a,g,h),n.current.lanes=h,js(n,h,c),Un(n,c),n}function Qu(n,i,a,c){var h=i.current,g=In(),w=Zs(h);return a=Dg(a),i.context===null?i.context=a:i.pendingContext=a,i=ms(g,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Qs(h,i,w),n!==null&&(Dr(n,h,w,g),Cu(n,h,w)),w}function Yu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Og(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Oh(n,i){Og(n,i),(n=n.alternate)&&Og(n,i)}function kE(){return null}var Lg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Lh(n){this._internalRoot=n}Ju.prototype.render=Lh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Qu(n,i,null,null)},Ju.prototype.unmount=Lh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Wi(function(){Qu(null,n,null,null)}),i[cs]=null}};function Ju(n){this._internalRoot=n}Ju.prototype.unstable_scheduleHydration=function(n){if(n){var i=Jl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Br.length&&i!==0&&i<Br[a].priority;a++);Br.splice(a,0,n),a===0&&eu(n)}};function jh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Xu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function jg(){}function NE(n,i,a,c,h){if(h){if(typeof c=="function"){var g=c;c=function(){var B=Yu(w);g.call(B)}}var w=Vg(i,c,n,0,null,!1,!1,"",jg);return n._reactRootContainer=w,n[cs]=w.current,Da(n.nodeType===8?n.parentNode:n),Wi(),w}for(;h=n.lastChild;)n.removeChild(h);if(typeof c=="function"){var A=c;c=function(){var B=Yu(k);A.call(B)}}var k=Vh(n,0,!1,null,null,!1,!1,"",jg);return n._reactRootContainer=k,n[cs]=k.current,Da(n.nodeType===8?n.parentNode:n),Wi(function(){Qu(i,k,a,c)}),k}function Zu(n,i,a,c,h){var g=a._reactRootContainer;if(g){var w=g;if(typeof h=="function"){var A=h;h=function(){var k=Yu(w);A.call(k)}}Qu(i,w,n,h)}else w=NE(a,i,n,h,c);return Yu(w)}Ql=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Os(i.pendingLanes);a!==0&&(Ms(i,a|1),Un(i,ct()),(tt&6)===0&&(Bo=ct()+500,Gs()))}break;case 13:Wi(function(){var c=ps(n,1);if(c!==null){var h=In();Dr(c,n,1,h)}}),Oh(n,1)}},fo=function(n){if(n.tag===13){var i=ps(n,134217728);if(i!==null){var a=In();Dr(i,n,134217728,a)}Oh(n,134217728)}},Yl=function(n){if(n.tag===13){var i=Zs(n),a=ps(n,i);if(a!==null){var c=In();Dr(a,n,i,c)}Oh(n,i)}},Jl=function(){return Ye},Xl=function(n,i){var a=Ye;try{return Ye=n,i()}finally{Ye=a}},ks=function(n,i,a){switch(i){case"input":if(Ut(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var h=gu(c);if(!h)throw Error(t(90));he(c),Ut(c,h)}}}break;case"textarea":kn(n,a);break;case"select":i=a.value,i!=null&&Wt(n,!!a.multiple,i,!1)}},ss=Ah,Ai=Wi;var DE={usingClientEntryPoint:!1,Events:[La,Po,gu,lr,Ds,Ah]},Ya={findFiberByHostInstance:ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VE={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=vn(n),n===null?null:n.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||kE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{bi=ec.inject(VE),Qn=ec}catch{}}return zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DE,zn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jh(i))throw Error(t(200));return bE(n,i,null,a)},zn.createRoot=function(n,i){if(!jh(n))throw Error(t(299));var a=!1,c="",h=Lg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),i=Vh(n,1,!1,null,null,a,!1,c,h),n[cs]=i.current,Da(n.nodeType===8?n.parentNode:n),new Lh(i)},zn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=vn(i),n=n===null?null:n.stateNode,n},zn.flushSync=function(n){return Wi(n)},zn.hydrate=function(n,i,a){if(!Xu(i))throw Error(t(200));return Zu(null,n,i,!0,a)},zn.hydrateRoot=function(n,i,a){if(!jh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,h=!1,g="",w=Lg;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Vg(i,null,n,1,a??null,h,!1,g,w),n[cs]=i.current,Da(n),c)for(n=0;n<c.length;n++)a=c[n],h=a._getVersion,h=h(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,h]:i.mutableSourceEagerHydrationData.push(a,h);return new Ju(i)},zn.render=function(n,i,a){if(!Xu(i))throw Error(t(200));return Zu(null,n,i,!1,a)},zn.unmountComponentAtNode=function(n){if(!Xu(n))throw Error(t(40));return n._reactRootContainer?(Wi(function(){Zu(null,null,n,!1,function(){n._reactRootContainer=null,n[cs]=null})}),!0):!1},zn.unstable_batchedUpdates=Ah,zn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Xu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Zu(n,i,a,!1,c)},zn.version="18.3.1-next-f1338f8080-20240426",zn}var Wg;function Fv(){if(Wg)return Uh.exports;Wg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Uh.exports=$E(),Uh.exports}var qg;function HE(){if(qg)return tc;qg=1;var r=Fv();return tc.createRoot=r.createRoot,tc.hydrateRoot=r.hydrateRoot,tc}var WE=HE();const qE=Mv(WE);Fv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vl(){return vl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},vl.apply(this,arguments)}var ui;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ui||(ui={}));const Gg="popstate";function GE(r){r===void 0&&(r={});function e(s,o){let{pathname:l,search:d,hash:f}=s.location;return rf("",{pathname:l,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:wc(o)}return QE(e,t,null,r)}function Ft(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Uv(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KE(){return Math.random().toString(36).substr(2,8)}function Kg(r,e){return{usr:r.state,key:r.key,idx:e}}function rf(r,e,t,s){return t===void 0&&(t=null),vl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ua(e):e,{state:t,key:e&&e.key||s||KE()})}function wc(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ua(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function QE(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,d=o.history,f=ui.Pop,m=null,v=T();v==null&&(v=0,d.replaceState(vl({},d.state,{idx:v}),""));function T(){return(d.state||{idx:null}).idx}function E(){f=ui.Pop;let M=T(),ee=M==null?null:M-v;v=M,m&&m({action:f,location:H.location,delta:ee})}function x(M,ee){f=ui.Push;let re=rf(H.location,M,ee);v=T()+1;let Y=Kg(re,v),ce=H.createHref(re);try{d.pushState(Y,"",ce)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(ce)}l&&m&&m({action:f,location:H.location,delta:1})}function L(M,ee){f=ui.Replace;let re=rf(H.location,M,ee);v=T();let Y=Kg(re,v),ce=H.createHref(re);d.replaceState(Y,"",ce),l&&m&&m({action:f,location:H.location,delta:0})}function $(M){let ee=o.location.origin!=="null"?o.location.origin:o.location.href,re=typeof M=="string"?M:wc(M);return re=re.replace(/ $/,"%20"),Ft(ee,"No window.location.(origin|href) available to create URL for href: "+re),new URL(re,ee)}let H={get action(){return f},get location(){return r(o,d)},listen(M){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Gg,E),m=M,()=>{o.removeEventListener(Gg,E),m=null}},createHref(M){return e(o,M)},createURL:$,encodeLocation(M){let ee=$(M);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:x,replace:L,go(M){return d.go(M)}};return H}var Qg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Qg||(Qg={}));function YE(r,e,t){return t===void 0&&(t="/"),JE(r,e,t)}function JE(r,e,t,s){let o=typeof e=="string"?ua(e):e,l=Df(o.pathname||"/",t);if(l==null)return null;let d=zv(r);XE(d);let f=null;for(let m=0;f==null&&m<d.length;++m){let v=cT(l);f=aT(d[m],v)}return f}function zv(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,d,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};m.relativePath.startsWith("/")&&(Ft(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let v=di([s,m.relativePath]),T=t.concat(m);l.children&&l.children.length>0&&(Ft(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),zv(l.children,e,T,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:iT(v,l.index),routesMeta:T})};return r.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,d);else for(let m of Bv(l.path))o(l,d,m)}),e}function Bv(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let d=Bv(s.join("/")),f=[];return f.push(...d.map(m=>m===""?l:[l,m].join("/"))),o&&f.push(...d),f.map(m=>r.startsWith("/")&&m===""?"/":m)}function XE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:oT(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const ZE=/^:[\w-]+$/,eT=3,tT=2,nT=1,rT=10,sT=-2,Yg=r=>r==="*";function iT(r,e){let t=r.split("/"),s=t.length;return t.some(Yg)&&(s+=sT),e&&(s+=tT),t.filter(o=>!Yg(o)).reduce((o,l)=>o+(ZE.test(l)?eT:l===""?nT:rT),s)}function oT(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function aT(r,e,t){let{routesMeta:s}=r,o={},l="/",d=[];for(let f=0;f<s.length;++f){let m=s[f],v=f===s.length-1,T=l==="/"?e:e.slice(l.length)||"/",E=lT({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},T),x=m.route;if(!E)return null;Object.assign(o,E.params),d.push({params:o,pathname:di([l,E.pathname]),pathnameBase:pT(di([l,E.pathnameBase])),route:x}),E.pathnameBase!=="/"&&(l=di([l,E.pathnameBase]))}return d}function lT(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=uT(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((v,T,E)=>{let{paramName:x,isOptional:L}=T;if(x==="*"){let H=f[E]||"";d=l.slice(0,l.length-H.length).replace(/(.)\/+$/,"$1")}const $=f[E];return L&&!$?v[x]=void 0:v[x]=($||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:r}}function uT(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Uv(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,m)=>(s.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function cT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uv(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Df(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function dT(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?ua(r):r;return{pathname:t?t.startsWith("/")?t:hT(t,e):e,search:mT(s),hash:gT(o)}}function hT(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function $h(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $v(r,e){let t=fT(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Hv(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=ua(r):(o=vl({},r),Ft(!o.pathname||!o.pathname.includes("?"),$h("?","pathname","search",o)),Ft(!o.pathname||!o.pathname.includes("#"),$h("#","pathname","hash",o)),Ft(!o.search||!o.search.includes("#"),$h("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,f;if(d==null)f=t;else{let E=e.length-1;if(!s&&d.startsWith("..")){let x=d.split("/");for(;x[0]==="..";)x.shift(),E-=1;o.pathname=x.join("/")}f=E>=0?e[E]:"/"}let m=dT(o,f),v=d&&d!=="/"&&d.endsWith("/"),T=(l||d===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(v||T)&&(m.pathname+="/"),m}const di=r=>r.join("/").replace(/\/\/+/g,"/"),pT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),mT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,gT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function yT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Wv=["post","put","patch","delete"];new Set(Wv);const vT=["get",...Wv];new Set(vT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _l(){return _l=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},_l.apply(this,arguments)}const Vf=O.createContext(null),_T=O.createContext(null),so=O.createContext(null),Hc=O.createContext(null),io=O.createContext({outlet:null,matches:[],isDataRoute:!1}),qv=O.createContext(null);function wT(r,e){let{relative:t}=e===void 0?{}:e;bl()||Ft(!1);let{basename:s,navigator:o}=O.useContext(so),{hash:l,pathname:d,search:f}=Qv(r,{relative:t}),m=d;return s!=="/"&&(m=d==="/"?s:di([s,d])),o.createHref({pathname:m,search:f,hash:l})}function bl(){return O.useContext(Hc)!=null}function ca(){return bl()||Ft(!1),O.useContext(Hc).location}function Gv(r){O.useContext(so).static||O.useLayoutEffect(r)}function Kv(){let{isDataRoute:r}=O.useContext(io);return r?DT():ET()}function ET(){bl()||Ft(!1);let r=O.useContext(Vf),{basename:e,future:t,navigator:s}=O.useContext(so),{matches:o}=O.useContext(io),{pathname:l}=ca(),d=JSON.stringify($v(o,t.v7_relativeSplatPath)),f=O.useRef(!1);return Gv(()=>{f.current=!0}),O.useCallback(function(v,T){if(T===void 0&&(T={}),!f.current)return;if(typeof v=="number"){s.go(v);return}let E=Hv(v,JSON.parse(d),l,T.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:di([e,E.pathname])),(T.replace?s.replace:s.push)(E,T.state,T)},[e,s,d,l,r])}function Qv(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=O.useContext(so),{matches:o}=O.useContext(io),{pathname:l}=ca(),d=JSON.stringify($v(o,s.v7_relativeSplatPath));return O.useMemo(()=>Hv(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function TT(r,e){return IT(r,e)}function IT(r,e,t,s){bl()||Ft(!1);let{navigator:o}=O.useContext(so),{matches:l}=O.useContext(io),d=l[l.length-1],f=d?d.params:{};d&&d.pathname;let m=d?d.pathnameBase:"/";d&&d.route;let v=ca(),T;if(e){var E;let M=typeof e=="string"?ua(e):e;m==="/"||(E=M.pathname)!=null&&E.startsWith(m)||Ft(!1),T=M}else T=v;let x=T.pathname||"/",L=x;if(m!=="/"){let M=m.replace(/^\//,"").split("/");L="/"+x.replace(/^\//,"").split("/").slice(M.length).join("/")}let $=YE(r,{pathname:L}),H=AT($&&$.map(M=>Object.assign({},M,{params:Object.assign({},f,M.params),pathname:di([m,o.encodeLocation?o.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?m:di([m,o.encodeLocation?o.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,t,s);return e&&H?O.createElement(Hc.Provider,{value:{location:_l({pathname:"/",search:"",hash:"",state:null,key:"default"},T),navigationType:ui.Pop}},H):H}function xT(){let r=NT(),e=yT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:o},t):null,null)}const ST=O.createElement(xT,null);class CT extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?O.createElement(io.Provider,{value:this.props.routeContext},O.createElement(qv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RT(r){let{routeContext:e,match:t,children:s}=r,o=O.useContext(Vf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),O.createElement(io.Provider,{value:e},s)}function AT(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let T=d.findIndex(E=>E.route.id&&(f==null?void 0:f[E.route.id])!==void 0);T>=0||Ft(!1),d=d.slice(0,Math.min(d.length,T+1))}let m=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let T=0;T<d.length;T++){let E=d[T];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(v=T),E.route.id){let{loaderData:x,errors:L}=t,$=E.route.loader&&x[E.route.id]===void 0&&(!L||L[E.route.id]===void 0);if(E.route.lazy||$){m=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((T,E,x)=>{let L,$=!1,H=null,M=null;t&&(L=f&&E.route.id?f[E.route.id]:void 0,H=E.route.errorElement||ST,m&&(v<0&&x===0?(VT("route-fallback"),$=!0,M=null):v===x&&($=!0,M=E.route.hydrateFallbackElement||null)));let ee=e.concat(d.slice(0,x+1)),re=()=>{let Y;return L?Y=H:$?Y=M:E.route.Component?Y=O.createElement(E.route.Component,null):E.route.element?Y=E.route.element:Y=T,O.createElement(RT,{match:E,routeContext:{outlet:T,matches:ee,isDataRoute:t!=null},children:Y})};return t&&(E.route.ErrorBoundary||E.route.errorElement||x===0)?O.createElement(CT,{location:t.location,revalidation:t.revalidation,component:H,error:L,children:re(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):re()},null)}var Yv=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Yv||{}),Jv=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Jv||{});function PT(r){let e=O.useContext(Vf);return e||Ft(!1),e}function bT(r){let e=O.useContext(_T);return e||Ft(!1),e}function kT(r){let e=O.useContext(io);return e||Ft(!1),e}function Xv(r){let e=kT(),t=e.matches[e.matches.length-1];return t.route.id||Ft(!1),t.route.id}function NT(){var r;let e=O.useContext(qv),t=bT(),s=Xv();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function DT(){let{router:r}=PT(Yv.UseNavigateStable),e=Xv(Jv.UseNavigateStable),t=O.useRef(!1);return Gv(()=>{t.current=!0}),O.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,_l({fromRouteId:e},l)))},[r,e])}const Jg={};function VT(r,e,t){Jg[r]||(Jg[r]=!0)}function OT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function el(r){Ft(!1)}function LT(r){let{basename:e="/",children:t=null,location:s,navigationType:o=ui.Pop,navigator:l,static:d=!1,future:f}=r;bl()&&Ft(!1);let m=e.replace(/^\/*/,"/"),v=O.useMemo(()=>({basename:m,navigator:l,static:d,future:_l({v7_relativeSplatPath:!1},f)}),[m,f,l,d]);typeof s=="string"&&(s=ua(s));let{pathname:T="/",search:E="",hash:x="",state:L=null,key:$="default"}=s,H=O.useMemo(()=>{let M=Df(T,m);return M==null?null:{location:{pathname:M,search:E,hash:x,state:L,key:$},navigationType:o}},[m,T,E,x,L,$,o]);return H==null?null:O.createElement(so.Provider,{value:v},O.createElement(Hc.Provider,{children:t,value:H}))}function jT(r){let{children:e,location:t}=r;return TT(sf(e),t)}new Promise(()=>{});function sf(r,e){e===void 0&&(e=[]);let t=[];return O.Children.forEach(r,(s,o)=>{if(!O.isValidElement(s))return;let l=[...e,o];if(s.type===O.Fragment){t.push.apply(t,sf(s.props.children,l));return}s.type!==el&&Ft(!1),!s.props.index||!s.props.children||Ft(!1);let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=sf(s.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function of(){return of=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},of.apply(this,arguments)}function MT(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function FT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function UT(r,e){return r.button===0&&(!e||e==="_self")&&!FT(r)}const zT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],BT="6";try{window.__reactRouterVersion=BT}catch{}const $T="startTransition",Xg=UE[$T];function HT(r){let{basename:e,children:t,future:s,window:o}=r,l=O.useRef();l.current==null&&(l.current=GE({window:o,v5Compat:!0}));let d=l.current,[f,m]=O.useState({action:d.action,location:d.location}),{v7_startTransition:v}=s||{},T=O.useCallback(E=>{v&&Xg?Xg(()=>m(E)):m(E)},[m,v]);return O.useLayoutEffect(()=>d.listen(T),[d,T]),O.useEffect(()=>OT(s),[s]),O.createElement(LT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:d,future:s})}const WT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$n=O.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:d,state:f,target:m,to:v,preventScrollReset:T,viewTransition:E}=e,x=MT(e,zT),{basename:L}=O.useContext(so),$,H=!1;if(typeof v=="string"&&qT.test(v)&&($=v,WT))try{let Y=new URL(window.location.href),ce=v.startsWith("//")?new URL(Y.protocol+v):new URL(v),le=Df(ce.pathname,L);ce.origin===Y.origin&&le!=null?v=le+ce.search+ce.hash:H=!0}catch{}let M=wT(v,{relative:o}),ee=GT(v,{replace:d,state:f,target:m,preventScrollReset:T,relative:o,viewTransition:E});function re(Y){s&&s(Y),Y.defaultPrevented||ee(Y)}return O.createElement("a",of({},x,{href:$||M,onClick:H||l?s:re,ref:t,target:m}))});var Zg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Zg||(Zg={}));var ey;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(ey||(ey={}));function GT(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:d,viewTransition:f}=e===void 0?{}:e,m=Kv(),v=ca(),T=Qv(r,{relative:d});return O.useCallback(E=>{if(UT(E,t)){E.preventDefault();let x=s!==void 0?s:wc(v)===wc(T);m(r,{replace:x,state:o,preventScrollReset:l,relative:d,viewTransition:f})}},[v,m,T,s,o,t,r,l,d,f])}const KT=()=>{};var ty={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},QT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],f=r[t++],m=((o&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],d=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},e0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,f=d?r[o+1]:0,m=o+2<r.length,v=m?r[o+2]:0,T=l>>2,E=(l&3)<<4|f>>4;let x=(f&15)<<2|v>>6,L=v&63;m||(L=64,d||(x=64)),s.push(t[T],t[E],t[x],t[L])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Zv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):QT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||v==null||E==null)throw new YT;const x=l<<2|f>>4;if(s.push(x),v!==64){const L=f<<4&240|v>>2;if(s.push(L),E!==64){const $=v<<6&192|E;s.push($)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class YT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JT=function(r){const e=Zv(r);return e0.encodeByteArray(e,!0)},Ec=function(r){return JT(r).replace(/\./g,"")},t0=function(r){try{return e0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=()=>XT().__FIREBASE_DEFAULTS__,eI=()=>{if(typeof process>"u"||typeof ty>"u")return;const r=ty.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},tI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&t0(r[1]);return e&&JSON.parse(e)},Wc=()=>{try{return KT()||ZT()||eI()||tI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},n0=r=>{var e,t;return(t=(e=Wc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},nI=r=>{const e=n0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},r0=()=>{var r;return(r=Wc())===null||r===void 0?void 0:r.config},s0=r=>{var e;return(e=Wc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function i0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ec(JSON.stringify(t)),Ec(JSON.stringify(d)),""].join(".")}const ll={};function iI(){const r={prod:[],emulator:[]};for(const e of Object.keys(ll))ll[e]?r.emulator.push(e):r.prod.push(e);return r}function oI(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ny=!1;function o0(r,e){if(typeof window>"u"||typeof document>"u"||!da(window.location.host)||ll[r]===e||ll[r]||ny)return;ll[r]=e;function t(x){return`__firebase__banner__${x}`}const s="__firebase__banner",l=iI().prod.length>0;function d(){const x=document.getElementById(s);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function m(x,L){x.setAttribute("width","24"),x.setAttribute("id",L),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function v(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{ny=!0,d()},x}function T(x,L){x.setAttribute("id",L),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function E(){const x=oI(s),L=t("text"),$=document.getElementById(L)||document.createElement("span"),H=t("learnmore"),M=document.getElementById(H)||document.createElement("a"),ee=t("preprendIcon"),re=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const Y=x.element;f(Y),T(M,H);const ce=v();m(re,ee),Y.append(re,$,M,ce),document.body.appendChild(Y)}l?($.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function lI(){var r;const e=(r=Wc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function dI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hI(){const r=gn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function fI(){return!lI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pI(){try{return typeof indexedDB=="object"}catch{return!1}}function mI(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="FirebaseError";class Rs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=gI,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kl.prototype.create)}}class kl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?yI(l,s):"Error",f=`${this.serviceName}: ${d} (${o}).`;return new Rs(o,f,s)}}function yI(r,e){return r.replace(vI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const vI=/\{\$([^}]+)}/g;function _I(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Zi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],d=e[o];if(ry(l)&&ry(d)){if(!Zi(l,d))return!1}else if(l!==d)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function ry(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function tl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function nl(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function wI(r,e){const t=new EI(r,e);return t.subscribe.bind(t)}class EI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");TI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Hh),o.error===void 0&&(o.error=Hh),o.complete===void 0&&(o.complete=Hh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Hh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(r){return r&&r._delegate?r._delegate:r}class eo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new rI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SI(e))try{this.getOrInitializeService({instanceIdentifier:Qi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qi){return this.instances.has(e)}getOptions(e=Qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&d.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:xI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qi){return this.component?this.component.multipleInstances?e:Qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xI(r){return r===Qi?void 0:r}function SI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new II(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const RI={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},AI=Ke.INFO,PI={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},bI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=PI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Of{constructor(e){this.name=e,this._logLevel=AI,this._logHandler=bI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const kI=(r,e)=>e.some(t=>r instanceof t);let sy,iy;function NI(){return sy||(sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DI(){return iy||(iy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a0=new WeakMap,af=new WeakMap,l0=new WeakMap,Wh=new WeakMap,Lf=new WeakMap;function VI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(hi(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&a0.set(t,r)}).catch(()=>{}),Lf.set(e,r),e}function OI(r){if(af.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});af.set(r,e)}let lf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return af.get(r);if(e==="objectStoreNames")return r.objectStoreNames||l0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function LI(r){lf=r(lf)}function jI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(qh(this),e,...t);return l0.set(s,e.sort?e.sort():[e]),hi(s)}:DI().includes(r)?function(...e){return r.apply(qh(this),e),hi(a0.get(this))}:function(...e){return hi(r.apply(qh(this),e))}}function MI(r){return typeof r=="function"?jI(r):(r instanceof IDBTransaction&&OI(r),kI(r,NI())?new Proxy(r,lf):r)}function hi(r){if(r instanceof IDBRequest)return VI(r);if(Wh.has(r))return Wh.get(r);const e=MI(r);return e!==r&&(Wh.set(r,e),Lf.set(e,r)),e}const qh=r=>Lf.get(r);function FI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),f=hi(d);return s&&d.addEventListener("upgradeneeded",m=>{s(hi(d.result),m.oldVersion,m.newVersion,hi(d.transaction),m)}),t&&d.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const UI=["get","getKey","getAll","getAllKeys","count"],zI=["put","add","delete","clear"],Gh=new Map;function oy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Gh.get(e))return Gh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=zI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||UI.includes(t)))return;const l=async function(d,...f){const m=this.transaction(d,o?"readwrite":"readonly");let v=m.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&m.done]))[0]};return Gh.set(e,l),l}LI(r=>({...r,get:(e,t,s)=>oy(e,t)||r.get(e,t,s),has:(e,t)=>!!oy(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($I(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function $I(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uf="@firebase/app",ay="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Of("@firebase/app"),HI="@firebase/app-compat",WI="@firebase/analytics-compat",qI="@firebase/analytics",GI="@firebase/app-check-compat",KI="@firebase/app-check",QI="@firebase/auth",YI="@firebase/auth-compat",JI="@firebase/database",XI="@firebase/data-connect",ZI="@firebase/database-compat",ex="@firebase/functions",tx="@firebase/functions-compat",nx="@firebase/installations",rx="@firebase/installations-compat",sx="@firebase/messaging",ix="@firebase/messaging-compat",ox="@firebase/performance",ax="@firebase/performance-compat",lx="@firebase/remote-config",ux="@firebase/remote-config-compat",cx="@firebase/storage",dx="@firebase/storage-compat",hx="@firebase/firestore",fx="@firebase/ai",px="@firebase/firestore-compat",mx="firebase",gx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="[DEFAULT]",yx={[uf]:"fire-core",[HI]:"fire-core-compat",[qI]:"fire-analytics",[WI]:"fire-analytics-compat",[KI]:"fire-app-check",[GI]:"fire-app-check-compat",[QI]:"fire-auth",[YI]:"fire-auth-compat",[JI]:"fire-rtdb",[XI]:"fire-data-connect",[ZI]:"fire-rtdb-compat",[ex]:"fire-fn",[tx]:"fire-fn-compat",[nx]:"fire-iid",[rx]:"fire-iid-compat",[sx]:"fire-fcm",[ix]:"fire-fcm-compat",[ox]:"fire-perf",[ax]:"fire-perf-compat",[lx]:"fire-rc",[ux]:"fire-rc-compat",[cx]:"fire-gcs",[dx]:"fire-gcs-compat",[hx]:"fire-fst",[px]:"fire-fst-compat",[fx]:"fire-vertex","fire-js":"fire-js",[mx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Map,vx=new Map,df=new Map;function ly(r,e){try{r.container.addComponent(e)}catch(t){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function na(r){const e=r.name;if(df.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;df.set(e,r);for(const t of Tc.values())ly(t,r);for(const t of vx.values())ly(t,r);return!0}function jf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Sn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new kl("app","Firebase",_x);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=gx;function u0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:cf,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw fi.create("bad-app-name",{appName:String(o)});if(t||(t=r0()),!t)throw fi.create("no-options");const l=Tc.get(o);if(l){if(Zi(t,l.options)&&Zi(s,l.config))return l;throw fi.create("duplicate-app",{appName:o})}const d=new CI(o);for(const m of df.values())d.addComponent(m);const f=new wx(t,s,d);return Tc.set(o,f),f}function c0(r=cf){const e=Tc.get(r);if(!e&&r===cf&&r0())return u0();if(!e)throw fi.create("no-app",{appName:r});return e}function pi(r,e,t){var s;let o=(s=yx[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(f.join(" "));return}na(new eo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="firebase-heartbeat-database",Tx=1,wl="firebase-heartbeat-store";let Kh=null;function d0(){return Kh||(Kh=FI(Ex,Tx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(wl)}catch(t){console.warn(t)}}}}).catch(r=>{throw fi.create("idb-open",{originalErrorMessage:r.message})})),Kh}async function Ix(r){try{const t=(await d0()).transaction(wl),s=await t.objectStore(wl).get(h0(r));return await t.done,s}catch(e){if(e instanceof Rs)Ts.warn(e.message);else{const t=fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ts.warn(t.message)}}}async function uy(r,e){try{const s=(await d0()).transaction(wl,"readwrite");await s.objectStore(wl).put(e,h0(r)),await s.done}catch(t){if(t instanceof Rs)Ts.warn(t.message);else{const s=fi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ts.warn(s.message)}}}function h0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=1024,Sx=30;class Cx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ax(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=cy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>Sx){const d=Px(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ts.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cy(),{heartbeatsToSend:s,unsentEntries:o}=Rx(this._heartbeatsCache.heartbeats),l=Ec(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ts.warn(t),""}}}function cy(){return new Date().toISOString().substring(0,10)}function Rx(r,e=xx){const t=[];let s=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),dy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),dy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Ax{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pI()?mI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ix(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return uy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return uy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function dy(r){return Ec(JSON.stringify({version:2,heartbeats:r})).length}function Px(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(r){na(new eo("platform-logger",e=>new BI(e),"PRIVATE")),na(new eo("heartbeat",e=>new Cx(e),"PRIVATE")),pi(uf,ay,r),pi(uf,ay,"esm2017"),pi("fire-js","")}bx("");var kx="firebase",Nx="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(kx,Nx,"app");function Mf(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function f0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dx=f0,p0=new kl("auth","Firebase",f0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Of("@firebase/auth");function Vx(r,...e){Ic.logLevel<=Ke.WARN&&Ic.warn(`Auth (${fa}): ${r}`,...e)}function cc(r,...e){Ic.logLevel<=Ke.ERROR&&Ic.error(`Auth (${fa}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(r,...e){throw Uf(r,...e)}function Wn(r,...e){return Uf(r,...e)}function Ff(r,e,t){const s=Object.assign(Object.assign({},Dx()),{[e]:t});return new kl("auth","Firebase",s).create(e,{appName:r.name})}function Or(r){return Ff(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ox(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&_r(r,"argument-error"),Ff(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return p0.create(r,...e)}function me(r,e,...t){if(!r)throw Uf(e,...t)}function _s(r){const e="INTERNAL ASSERTION FAILED: "+r;throw cc(e),new Error(e)}function Is(r,e){r||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function zf(){return hy()==="http:"||hy()==="https:"}function hy(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zf()||cI()||"connection"in navigator)?navigator.onLine:!0}function jx(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Is(t>e,"Short delay should be less than long delay!"),this.isMobile=aI()||dI()}get(){return Lx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(r,e){Is(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ux=new Nl(3e4,6e4);function yn(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function qn(r,e,t,s,o={}){return g0(r,o,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const f=ha(Object.assign({key:r.config.apiKey},d)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:m},l);return uI()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&da(r.emulatorConfig.host)&&(v.credentials="include"),m0.fetch()(await y0(r,r.config.apiHost,t,f),v)})}async function g0(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},Mx),e);try{const o=new Bx(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw rl(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const f=l.ok?d.errorMessage:d.error.message,[m,v]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw rl(r,"credential-already-in-use",d);if(m==="EMAIL_EXISTS")throw rl(r,"email-already-in-use",d);if(m==="USER_DISABLED")throw rl(r,"user-disabled",d);const T=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Ff(r,T,v);_r(r,T)}}catch(o){if(o instanceof Rs)throw o;_r(r,"network-request-failed",{message:String(o)})}}async function As(r,e,t,s,o={}){const l=await qn(r,e,t,s,o);return"mfaPendingCredential"in l&&_r(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function y0(r,e,t,s){const o=`${e}${t}?${s}`,l=r,d=l.config.emulator?Bf(r.config,o):`${r.config.apiScheme}://${o}`;return Fx.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function zx(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Bx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Wn(this.auth,"network-request-failed")),Ux.get())})}}function rl(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Wn(r,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(r){return r!==void 0&&r.getResponse!==void 0}function py(r){return r!==void 0&&r.enterprise!==void 0}class v0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zx(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(r){return(await qn(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function _0(r,e){return qn(r,"GET","/v2/recaptchaConfig",yn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx(r,e){return qn(r,"POST","/v1/accounts:delete",e)}async function Sc(r,e){return qn(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Wx(r,e=!1){const t=Et(r),s=await t.getIdToken(e),o=$f(s);me(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:ul(Qh(o.auth_time)),issuedAtTime:ul(Qh(o.iat)),expirationTime:ul(Qh(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Qh(r){return Number(r)*1e3}function $f(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{const o=t0(t);return o?JSON.parse(o):(cc("Failed to decode base64 JWT payload"),null)}catch(o){return cc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function my(r){const e=$f(r);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Rs&&qx(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function qx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ul(this.lastLoginAt),this.creationTime=ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(r){var e;const t=r.auth,s=await r.getIdToken(),o=await ra(r,Sc(t,{idToken:s}));me(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?w0(l.providerUserInfo):[],f=Qx(r.providerData,d),m=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),T=m?v:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new hf(l.createdAt,l.lastLoginAt),isAnonymous:T};Object.assign(r,E)}async function Kx(r){const e=Et(r);await El(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qx(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function w0(r){return r.map(e=>{var{providerId:t}=e,s=Mf(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(r,e){const t=await g0(r,{},async()=>{const s=ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await y0(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return r.emulatorConfig&&da(r.emulatorConfig.host)&&(m.credentials="include"),m0.fetch()(d,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Jx(r,e){return qn(r,"POST","/v2/accounts:revokeToken",yn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):my(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){me(e.length!==0,"internal-error");const t=my(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await Yx(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,d=new Yo;return s&&(me(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(me(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(me(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(r,e){me(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Vr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=Mf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new hf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ra(this,this.stsTokenManager.getToken(this.auth,e));return me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Wx(this,e)}reload(){return Kx(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await El(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(Or(this.auth));const e=await this.getIdToken();return await ra(this,Hx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,d,f,m,v,T;const E=(s=t.displayName)!==null&&s!==void 0?s:void 0,x=(o=t.email)!==null&&o!==void 0?o:void 0,L=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,$=(d=t.photoURL)!==null&&d!==void 0?d:void 0,H=(f=t.tenantId)!==null&&f!==void 0?f:void 0,M=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,ee=(v=t.createdAt)!==null&&v!==void 0?v:void 0,re=(T=t.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:Y,emailVerified:ce,isAnonymous:le,providerData:de,stsTokenManager:N}=t;me(Y&&N,e,"internal-error");const R=Yo.fromJSON(this.name,N);me(typeof Y=="string",e,"internal-error"),ri(E,e.name),ri(x,e.name),me(typeof ce=="boolean",e,"internal-error"),me(typeof le=="boolean",e,"internal-error"),ri(L,e.name),ri($,e.name),ri(H,e.name),ri(M,e.name),ri(ee,e.name),ri(re,e.name);const S=new Vr({uid:Y,auth:e,email:x,emailVerified:ce,displayName:E,isAnonymous:le,photoURL:$,phoneNumber:L,tenantId:H,stsTokenManager:R,createdAt:ee,lastLoginAt:re});return de&&Array.isArray(de)&&(S.providerData=de.map(b=>Object.assign({},b))),M&&(S._redirectEventId=M),S}static async _fromIdTokenResponse(e,t,s=!1){const o=new Yo;o.updateFromServerResponse(t);const l=new Vr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await El(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];me(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?w0(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Yo;f.updateFromIdToken(s);const m=new Vr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new hf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,v),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Map;function ws(r){Is(r instanceof Function,"Expected a class definition");let e=gy.get(r);return e?(Is(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,gy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}E0.type="NONE";const yy=E0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(r,e,t){return`firebase:${r}:${e}:${t}`}class Jo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=dc(this.userKey,o.apiKey,l),this.fullPersistenceKey=dc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Sc(this.auth,{idToken:e}).catch(()=>{});return t?Vr._fromGetAccountInfoResponse(this.auth,t,e):null}return Vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Jo(ws(yy),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||ws(yy);const d=dc(s,e.config.apiKey,e.name);let f=null;for(const v of t)try{const T=await v._get(d);if(T){let E;if(typeof T=="string"){const x=await Sc(e,{idToken:T}).catch(()=>{});if(!x)break;E=await Vr._fromGetAccountInfoResponse(e,x,T)}else E=Vr._fromJSON(e,T);v!==l&&(f=E),l=v;break}}catch{}const m=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Jo(l,e,s):(l=m[0],f&&await l._set(d,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new Jo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(T0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R0(e))return"Blackberry";if(A0(e))return"Webos";if(I0(e))return"Safari";if((e.includes("chrome/")||x0(e))&&!e.includes("edge/"))return"Chrome";if(C0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function T0(r=gn()){return/firefox\//i.test(r)}function I0(r=gn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function x0(r=gn()){return/crios\//i.test(r)}function S0(r=gn()){return/iemobile/i.test(r)}function C0(r=gn()){return/android/i.test(r)}function R0(r=gn()){return/blackberry/i.test(r)}function A0(r=gn()){return/webos/i.test(r)}function Hf(r=gn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Xx(r=gn()){var e;return Hf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Zx(){return hI()&&document.documentMode===10}function P0(r=gn()){return Hf(r)||C0(r)||A0(r)||R0(r)||/windows phone/i.test(r)||S0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(r,e=[]){let t;switch(r){case"Browser":t=vy(gn());break;case"Worker":t=`${vy(gn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((d,f)=>{try{const m=e(l);d(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(r,e={}){return qn(r,"GET","/v2/passwordPolicy",yn(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=6;class rS{constructor(e){var t,s,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:nS,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,d,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(d=m.containsNumericCharacter)!==null&&d!==void 0?d:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _y(this),this.idTokenSubscription=new _y(this),this.beforeStateQueue=new eS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ws(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Jo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Sc(this,{idToken:e}),s=await Vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Sn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!d||d===f)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await El(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(Or(this));const t=e?Et(e):null;return t&&me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(Or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(Or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tS(this),t=new rS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Jx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ws(e)||this._popupRedirectResolver;me(t,this,"argument-error"),this.redirectPersistenceManager=await Jo.create(this,[ws(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(f,this,"internal-error"),f.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,o);return()=>{d=!0,m()}}else{const m=e.addObserver(t);return()=>{d=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=b0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Vx(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function wr(r){return Et(r)}class _y{constructor(e){this.auth=e,this.observer=null,this.addObserver=wI(t=>this.observer=t)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iS(r){Dl=r}function Wf(r){return Dl.loadJS(r)}function oS(){return Dl.recaptchaV2Script}function aS(){return Dl.recaptchaEnterpriseScript}function lS(){return Dl.gapiScript}function k0(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=500,cS=6e4,nc=1e12;class dS{constructor(e){this.auth=e,this.counter=nc,this._widgets=new Map}render(e,t){const s=this.counter;return this._widgets.set(s,new pS(e,this.auth.name,t||{})),this.counter++,s}reset(e){var t;const s=e||nc;(t=this._widgets.get(s))===null||t===void 0||t.delete(),this._widgets.delete(s)}getResponse(e){var t;const s=e||nc;return((t=this._widgets.get(s))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const s=e||nc;return(t=this._widgets.get(s))===null||t===void 0||t.execute(),""}}class hS{constructor(){this.enterprise=new fS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class fS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pS{constructor(e,t,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;me(o,"argument-error",{appName:t}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=mS(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},cS)},uS))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function mS(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<r;s++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const gS="recaptcha-enterprise",cl="NO_RECAPTCHA";class N0{constructor(e){this.type=gS,this.auth=wr(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,f)=>{_0(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new v0(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(m=>{f(m)})})}function o(l,d,f){const m=window.grecaptcha;py(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(cl)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hS().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{s(this.auth).then(f=>{if(!t&&py(window.grecaptcha))o(f,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let m=aS();m.length!==0&&(m+=f),Wf(m).then(()=>{o(f,l,d)}).catch(v=>{d(v)})}}).catch(f=>{d(f)})})}}async function Xa(r,e,t,s=!1,o=!1){const l=new N0(r);let d;if(o)d=cl;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Xo(r,e,t,s,o){var l,d;if(o==="EMAIL_PASSWORD_PROVIDER")if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Xa(r,e,t,t==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Xa(r,e,t,t==="getOobCode");return s(r,m)}else return Promise.reject(f)});else if(o==="PHONE_PROVIDER")if(!((d=r._getRecaptchaConfig())===null||d===void 0)&&d.isProviderEnabled("PHONE_PROVIDER")){const f=await Xa(r,e,t);return s(r,f).catch(async m=>{var v;if(((v=r._getRecaptchaConfig())===null||v===void 0?void 0:v.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(m.code==="auth/missing-recaptcha-token"||m.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const T=await Xa(r,e,t,!1,!0);return s(r,T)}return Promise.reject(m)})}else{const f=await Xa(r,e,t,!1,!0);return s(r,f)}else return Promise.reject(o+" provider is not supported.")}async function yS(r){const e=wr(r),t=await _0(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new v0(t);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new N0(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(r,e){const t=jf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Zi(l,e??{}))return o;_r(o,"already-initialized")}return t.initialize({options:e})}function _S(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ws);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function wS(r,e,t){const s=wr(r);me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=D0(e),{host:d,port:f}=ES(e),m=f===null?"":`:${f}`,v={url:`${l}//${d}${m}/`},T=Object.freeze({host:d,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),me(Zi(v,s.config.emulator)&&Zi(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,da(d)?(i0(`${l}//${d}${m}`),o0("Auth",!0)):TS()}function D0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function ES(r){const e=D0(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:wy(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:wy(d)}}}function wy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function TS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,t){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}async function IS(r,e){return qn(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(r,e){return As(r,"POST","/v1/accounts:signInWithPassword",yn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(r,e){return As(r,"POST","/v1/accounts:signInWithEmailLink",yn(r,e))}async function CS(r,e){return As(r,"POST","/v1/accounts:signInWithEmailLink",yn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends qc{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Tl(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Tl(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xo(e,t,"signInWithPassword",xS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return SS(e,{email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xo(e,s,"signUpPassword",IS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return CS(e,{idToken:t,email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(r,e){return As(r,"POST","/v1/accounts:signInWithIdp",yn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="http://localhost";class xs extends qc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_r("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=Mf(t,["providerId","signInMethod"]);if(!s||!o)return null;const d=new xs(s,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Zo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Zo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zo(e,t)}buildRequest(){const e={requestUri:RS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ha(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ey(r,e){return qn(r,"POST","/v1/accounts:sendVerificationCode",yn(r,e))}async function AS(r,e){return As(r,"POST","/v1/accounts:signInWithPhoneNumber",yn(r,e))}async function PS(r,e){const t=await As(r,"POST","/v1/accounts:signInWithPhoneNumber",yn(r,e));if(t.temporaryProof)throw rl(r,"account-exists-with-different-credential",t);return t}const bS={USER_NOT_FOUND:"user-not-found"};async function kS(r,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return As(r,"POST","/v1/accounts:signInWithPhoneNumber",yn(r,t),bS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends qc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new dl({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new dl({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return AS(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return PS(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return kS(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:l}=e;return!s&&!t&&!o&&!l?null:new dl({verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DS(r){const e=tl(nl(r)).link,t=e?tl(nl(e)).deep_link_id:null,s=tl(nl(r)).deep_link_id;return(s?tl(nl(s)).link:null)||s||t||e||r}class qf{constructor(e){var t,s,o,l,d,f;const m=tl(nl(e)),v=(t=m.apiKey)!==null&&t!==void 0?t:null,T=(s=m.oobCode)!==null&&s!==void 0?s:null,E=NS((o=m.mode)!==null&&o!==void 0?o:null);me(v&&T&&E,"argument-error"),this.apiKey=v,this.operation=E,this.code=T,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=m.lang)!==null&&d!==void 0?d:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=DS(e);try{return new qf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.providerId=oo.PROVIDER_ID}static credential(e,t){return Tl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=qf.parseLink(t);return me(s,"argument-error"),Tl._fromEmailAndCode(e,s.code,s.tenantId)}}oo.PROVIDER_ID="password";oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends Gf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ea extends pa{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return me("providerId"in t&&"signInMethod"in t,"argument-error"),xs._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return me(e.idToken||e.accessToken,"argument-error"),xs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ea.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ea.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:l,nonce:d,providerId:f}=e;if(!s&&!o&&!t&&!l||!f)return null;try{return new ea(f)._credential({idToken:t,accessToken:s,nonce:d,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends pa{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.FACEBOOK_SIGN_IN_METHOD="facebook.com";si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends pa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xs._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return vs.credential(t,s)}catch{return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com";vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends pa{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ii.credential(e.oauthAccessToken)}catch{return null}}}ii.GITHUB_SIGN_IN_METHOD="github.com";ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends pa{constructor(){super("twitter.com")}static credential(e,t){return xs._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return oi.credential(t,s)}catch{return null}}}oi.TWITTER_SIGN_IN_METHOD="twitter.com";oi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(r,e){return As(r,"POST","/v1/accounts:signUp",yn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Vr._fromIdTokenResponse(e,s,o),d=Ty(s);return new vi({user:l,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Ty(s);return new vi({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Ty(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends Rs{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Cc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Cc(e,t,s,o)}}function V0(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Cc._fromErrorAndOperation(r,l,e,s):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}async function O0(r,e,t=!1){const s=await ra(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return vi._forOperation(r,"link",s)}async function LS(r,e,t){await El(e);const s=OS(e.providerData);me(s.has(t)===r,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(r,e,t=!1){const{auth:s}=r;if(Sn(s.app))return Promise.reject(Or(s));const o="reauthenticate";try{const l=await ra(r,V0(s,o,e,r),t);me(l.idToken,s,"internal-error");const d=$f(l.idToken);me(d,s,"internal-error");const{sub:f}=d;return me(r.uid===f,s,"user-mismatch"),vi._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&_r(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L0(r,e,t=!1){if(Sn(r.app))return Promise.reject(Or(r));const s="signIn",o=await V0(r,s,e),l=await vi._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function j0(r,e){return L0(wr(r),e)}async function rc(r,e){const t=Et(r);return await LS(!1,t,e.providerId),O0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(r,e){return As(r,"POST","/v1/accounts:signInWithCustomToken",yn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(r,e){if(Sn(r.app))return Promise.reject(Or(r));const t=wr(r),s=await MS(t,{token:e,returnSecureToken:!0}),o=await vi._fromIdTokenResponse(t,"signIn",s);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M0(r){const e=wr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function F0(r,e,t){if(Sn(r.app))return Promise.reject(Or(r));const s=wr(r),d=await Xo(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VS,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&M0(r),m}),f=await vi._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function US(r,e,t){return Sn(r.app)?Promise.reject(Or(r)):j0(Et(r),oo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&M0(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(r,e){return qn(r,"POST","/v1/accounts:createAuthUri",yn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(r,e){const t=zf()?xc():"http://localhost",s={identifier:e,continueUri:t},{signinMethods:o}=await zS(Et(r),s);return o||[]}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(r,e){return qn(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=Et(r),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await ra(s,$S(s.auth,l));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const f=s.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=s.displayName,f.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function WS(r,e,t,s){return Et(r).onIdTokenChanged(e,t,s)}function qS(r,e,t){return Et(r).beforeAuthStateChanged(e,t)}function GS(r,e,t,s){return Et(r).onAuthStateChanged(e,t,s)}function KS(r){return Et(r).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(r,e){return qn(r,"POST","/v2/accounts/mfaEnrollment:start",yn(r,e))}const Rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rc,"1"),this.storage.removeItem(Rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=1e3,YS=10;class z0 extends U0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=P0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,m)=>{this.notifyListeners(d,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);Zx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,YS):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},QS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}z0.type="LOCAL";const JS=z0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0 extends U0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}B0.type="SESSION";const $0=B0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Gc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(d).map(async v=>v(t.origin,l)),m=await XS(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((f,m)=>{const v=Kf("",20);o.port1.start();const T=setTimeout(()=>{m(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(E){const x=E;if(x.data.eventId===v)switch(x.data.status){case"ack":clearTimeout(T),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(x.data.response);break;default:clearTimeout(T),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return window}function e1(r){Lt().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(){return typeof Lt().WorkerGlobalScope<"u"&&typeof Lt().importScripts=="function"}async function t1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function r1(){return Qf()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="firebaseLocalStorageDb",s1=1,Ac="firebaseLocalStorage",W0="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kc(r,e){return r.transaction([Ac],e?"readwrite":"readonly").objectStore(Ac)}function i1(){const r=indexedDB.deleteDatabase(H0);return new Vl(r).toPromise()}function ff(){const r=indexedDB.open(H0,s1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Ac,{keyPath:W0})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Ac)?e(s):(s.close(),await i1(),e(await ff()))})})}async function xy(r,e,t){const s=Kc(r,!0).put({[W0]:e,value:t});return new Vl(s).toPromise()}async function o1(r,e){const t=Kc(r,!1).get(e),s=await new Vl(t).toPromise();return s===void 0?null:s.value}function Sy(r,e){const t=Kc(r,!0).delete(e);return new Vl(t).toPromise()}const a1=800,l1=3;class q0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ff(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>l1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gc._getInstance(r1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await t1(),!this.activeServiceWorker)return;this.sender=new ZS(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||n1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ff();return await xy(e,Rc,"1"),await Sy(e,Rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>xy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>o1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Sy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Kc(o,!1).getAll();return new Vl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),a1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}q0.type="LOCAL";const u1=q0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(r,e){return qn(r,"POST","/v2/accounts/mfaSignIn:start",yn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=k0("rcb"),c1=new Nl(3e4,6e4);class d1{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Lt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return me(h1(t),e,"argument-error"),this.shouldResolveImmediately(t)&&fy(Lt().grecaptcha)?Promise.resolve(Lt().grecaptcha):new Promise((s,o)=>{const l=Lt().setTimeout(()=>{o(Wn(e,"network-request-failed"))},c1.get());Lt()[Yh]=()=>{Lt().clearTimeout(l),delete Lt()[Yh];const f=Lt().grecaptcha;if(!f||!fy(f)){o(Wn(e,"internal-error"));return}const m=f.render;f.render=(v,T)=>{const E=m(v,T);return this.counter++,E},this.hostLanguage=t,s(f)};const d=`${oS()}?${ha({onload:Yh,render:"explicit",hl:t})}`;Wf(d).catch(()=>{clearTimeout(l),o(Wn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Lt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function h1(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}class f1{async load(e){return new dS(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl="recaptcha",p1={theme:"light",type:"image"};class G0{constructor(e,t,s=Object.assign({},p1)){this.parameters=s,this.type=hl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wr(e),this.isInvisible=this.parameters.size==="invisible",me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof t=="string"?document.getElementById(t):t;me(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new f1:new d1,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),s=t.getResponse(e);return s||new Promise(o=>{const l=d=>{d&&(this.tokenChangeListeners.delete(l),o(d))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){me(!this.parameters.sitekey,this.auth,"argument-error"),me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(s=>s(t)),typeof e=="function")e(t);else if(typeof e=="string"){const s=Lt()[e];typeof s=="function"&&s(t)}}}assertNotDestroyed(){me(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){me(zf()&&!Qf(),this.auth,"internal-error"),await m1(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await $x(this.auth);me(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function m1(){let r=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}r=()=>e(),window.addEventListener("load",r)}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=dl._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function y1(r,e,t){if(Sn(r.app))return Promise.reject(Or(r));const s=wr(r),o=await v1(s,e,Et(t));return new g1(o,l=>j0(s,l))}async function v1(r,e,t){var s;if(!r._getRecaptchaConfig())try{await yS(r)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const l=o.session;if("phoneNumber"in o){me(l.type==="enroll",r,"internal-error");const d={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Xo(r,d,"mfaSmsEnrollment",async(T,E)=>{if(E.phoneEnrollmentInfo.captchaResponse===cl){me((t==null?void 0:t.type)===hl,T,"argument-error");const x=await Jh(T,E,t);return Iy(T,x)}return Iy(T,E)},"PHONE_PROVIDER").catch(T=>Promise.reject(T))).phoneSessionInfo.sessionInfo}else{me(l.type==="signin",r,"internal-error");const d=((s=o.multiFactorHint)===null||s===void 0?void 0:s.uid)||o.multiFactorUid;me(d,r,"missing-multi-factor-info");const f={mfaPendingCredential:l.credential,mfaEnrollmentId:d,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Xo(r,f,"mfaSmsSignIn",async(E,x)=>{if(x.phoneSignInInfo.captchaResponse===cl){me((t==null?void 0:t.type)===hl,E,"argument-error");const L=await Jh(E,x,t);return Cy(E,L)}return Cy(E,x)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Xo(r,l,"sendVerificationCode",async(v,T)=>{if(T.captchaResponse===cl){me((t==null?void 0:t.type)===hl,v,"argument-error");const E=await Jh(v,T,t);return Ey(v,E)}return Ey(v,T)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).sessionInfo}}finally{t==null||t._reset()}}async function Jh(r,e,t){me(t.type===hl,r,"argument-error");const s=await t.verify();me(typeof s=="string",r,"argument-error");const o=Object.assign({},e);if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.captchaResponse,f=o.phoneEnrollmentInfo.clientType,m=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:s,captchaResponse:d,clientType:f,recaptchaVersion:m}}),o}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.captchaResponse,d=o.phoneSignInInfo.clientType,f=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:l,clientType:d,recaptchaVersion:f}}),o}else return Object.assign(o,{recaptchaToken:s}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(r,e){return e?ws(e):(me(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf extends qc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _1(r){return L0(r.auth,new Yf(r),r.bypassAuthState)}function w1(r){const{auth:e,user:t}=r;return me(t,e,"internal-error"),jS(t,new Yf(r),r.bypassAuthState)}async function E1(r){const{auth:e,user:t}=r;return me(t,e,"internal-error"),O0(t,new Yf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:d,type:f}=e;if(d){this.reject(d);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _1;case"linkViaPopup":case"linkViaRedirect":return E1;case"reauthViaPopup":case"reauthViaRedirect":return w1;default:_r(this.auth,"internal-error")}}resolve(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new Nl(2e3,1e4);async function sc(r,e,t){if(Sn(r.app))return Promise.reject(Wn(r,"operation-not-supported-in-this-environment"));const s=wr(r);Ox(r,e,Gf);const o=K0(s,t);return new Yi(s,"signInViaPopup",e,o).executeNotNull()}class Yi extends Q0{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Yi.currentPopupAction&&Yi.currentPopupAction.cancel(),Yi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Is(this.filter.length===1,"Popup operations only handle one event");const e=Kf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T1.get())};e()}}Yi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="pendingRedirect",hc=new Map;class x1 extends Q0{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=hc.get(this.auth._key());if(!e){try{const s=await S1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}hc.set(this.auth._key(),e)}return this.bypassAuthState||hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S1(r,e){const t=A1(e),s=R1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function C1(r,e){hc.set(r._key(),e)}function R1(r){return ws(r._redirectPersistence)}function A1(r){return dc(I1,r.config.apiKey,r.name)}async function P1(r,e,t=!1){if(Sn(r.app))return Promise.reject(Or(r));const s=wr(r),o=K0(s,e),d=await new x1(s,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=10*60*1e3;class k1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Y0(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Wn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=b1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ry(e))}saveEventToCache(e){this.cachedEventUids.add(Ry(e)),this.lastProcessedEventTime=Date.now()}}function Ry(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Y0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Y0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(r,e={}){return qn(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O1=/^https?/;async function L1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await D1(r);for(const t of e)try{if(j1(t))return}catch{}_r(r,"unauthorized-domain")}function j1(r){const e=xc(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!O1.test(t))return!1;if(V1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=new Nl(3e4,6e4);function Ay(){const r=Lt().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function F1(r){return new Promise((e,t)=>{var s,o,l;function d(){Ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ay(),t(Wn(r,"network-request-failed"))},timeout:M1.get()})}if(!((o=(s=Lt().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Lt().gapi)===null||l===void 0)&&l.load)d();else{const f=k0("iframefcb");return Lt()[f]=()=>{gapi.load?d():t(Wn(r,"network-request-failed"))},Wf(`${lS()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw fc=null,e})}let fc=null;function U1(r){return fc=fc||F1(r),fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Nl(5e3,15e3),B1="__/auth/iframe",$1="emulator/auth/iframe",H1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q1(r){const e=r.config;me(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Bf(e,$1):`https://${r.config.authDomain}/${B1}`,s={apiKey:e.apiKey,appName:r.name,v:fa},o=W1.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ha(s).slice(1)}`}async function G1(r){const e=await U1(r),t=Lt().gapi;return me(t,r,"internal-error"),e.open({where:document.body,url:q1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:H1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const d=Wn(r,"network-request-failed"),f=Lt().setTimeout(()=>{l(d)},z1.get());function m(){Lt().clearTimeout(f),o(s)}s.ping(m).then(m,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q1=500,Y1=600,J1="_blank",X1="http://localhost";class Py{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z1(r,e,t,s=Q1,o=Y1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m=Object.assign(Object.assign({},K1),{width:s.toString(),height:o.toString(),top:l,left:d}),v=gn().toLowerCase();t&&(f=x0(v)?J1:t),T0(v)&&(e=e||X1,m.scrollbars="yes");const T=Object.entries(m).reduce((x,[L,$])=>`${x}${L}=${$},`,"");if(Xx(v)&&f!=="_self")return eC(e||"",f),new Py(null);const E=window.open(e||"",f,T);me(E,r,"popup-blocked");try{E.focus()}catch{}return new Py(E)}function eC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="__/auth/handler",nC="emulator/auth/handler",rC=encodeURIComponent("fac");async function by(r,e,t,s,o,l){me(r.config.authDomain,r,"auth-domain-config-required"),me(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:fa,eventId:o};if(e instanceof Gf){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",_I(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,E]of Object.entries({}))d[T]=E}if(e instanceof pa){const T=e.getScopes().filter(E=>E!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const T of Object.keys(f))f[T]===void 0&&delete f[T];const m=await r._getAppCheckToken(),v=m?`#${rC}=${encodeURIComponent(m)}`:"";return`${sC(r)}?${ha(f).slice(1)}${v}`}function sC({config:r}){return r.emulator?Bf(r,nC):`https://${r.authDomain}/${tC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="webStorageSupport";class iC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$0,this._completeRedirectFn=P1,this._overrideRedirectResult=C1}async _openPopup(e,t,s,o){var l;Is((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await by(e,t,s,xc(),o);return Z1(e,d,Kf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await by(e,t,s,xc(),o);return e1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Is(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await G1(e),s=new k1(e);return t.register("authEvent",o=>(me(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xh,{type:Xh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Xh];d!==void 0&&t(!!d),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=L1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return P0()||I0()||Hf()}}const oC=iC;var ky="@firebase/auth",Ny="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uC(r){na(new eo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;me(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:b0(r)},v=new sS(s,o,l,m);return _S(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),na(new eo("auth-internal",e=>{const t=wr(e.getProvider("auth").getImmediate());return(s=>new aC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(ky,Ny,lC(r)),pi(ky,Ny,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=5*60,dC=s0("authIdTokenMaxAge")||cC;let Dy=null;const hC=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>dC)return;const o=t==null?void 0:t.token;Dy!==o&&(Dy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function fC(r=c0()){const e=jf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=vS(r,{popupRedirectResolver:oC,persistence:[u1,JS,$0]}),s=s0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=hC(l.toString());qS(t,d,()=>d(t.currentUser)),WS(t,f=>d(f))}}const o=n0("auth");return o&&wS(t,`http://${o}`),t}function pC(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}iS({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Wn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",pC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uC("Browser");var Vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mi,J0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,R){function S(){}S.prototype=R.prototype,N.D=R.prototype,N.prototype=new S,N.prototype.constructor=N,N.C=function(b,P,D){for(var C=Array(arguments.length-2),He=2;He<arguments.length;He++)C[He-2]=arguments[He];return R.prototype[P].apply(b,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,R,S){S||(S=0);var b=Array(16);if(typeof R=="string")for(var P=0;16>P;++P)b[P]=R.charCodeAt(S++)|R.charCodeAt(S++)<<8|R.charCodeAt(S++)<<16|R.charCodeAt(S++)<<24;else for(P=0;16>P;++P)b[P]=R[S++]|R[S++]<<8|R[S++]<<16|R[S++]<<24;R=N.g[0],S=N.g[1],P=N.g[2];var D=N.g[3],C=R+(D^S&(P^D))+b[0]+3614090360&4294967295;R=S+(C<<7&4294967295|C>>>25),C=D+(P^R&(S^P))+b[1]+3905402710&4294967295,D=R+(C<<12&4294967295|C>>>20),C=P+(S^D&(R^S))+b[2]+606105819&4294967295,P=D+(C<<17&4294967295|C>>>15),C=S+(R^P&(D^R))+b[3]+3250441966&4294967295,S=P+(C<<22&4294967295|C>>>10),C=R+(D^S&(P^D))+b[4]+4118548399&4294967295,R=S+(C<<7&4294967295|C>>>25),C=D+(P^R&(S^P))+b[5]+1200080426&4294967295,D=R+(C<<12&4294967295|C>>>20),C=P+(S^D&(R^S))+b[6]+2821735955&4294967295,P=D+(C<<17&4294967295|C>>>15),C=S+(R^P&(D^R))+b[7]+4249261313&4294967295,S=P+(C<<22&4294967295|C>>>10),C=R+(D^S&(P^D))+b[8]+1770035416&4294967295,R=S+(C<<7&4294967295|C>>>25),C=D+(P^R&(S^P))+b[9]+2336552879&4294967295,D=R+(C<<12&4294967295|C>>>20),C=P+(S^D&(R^S))+b[10]+4294925233&4294967295,P=D+(C<<17&4294967295|C>>>15),C=S+(R^P&(D^R))+b[11]+2304563134&4294967295,S=P+(C<<22&4294967295|C>>>10),C=R+(D^S&(P^D))+b[12]+1804603682&4294967295,R=S+(C<<7&4294967295|C>>>25),C=D+(P^R&(S^P))+b[13]+4254626195&4294967295,D=R+(C<<12&4294967295|C>>>20),C=P+(S^D&(R^S))+b[14]+2792965006&4294967295,P=D+(C<<17&4294967295|C>>>15),C=S+(R^P&(D^R))+b[15]+1236535329&4294967295,S=P+(C<<22&4294967295|C>>>10),C=R+(P^D&(S^P))+b[1]+4129170786&4294967295,R=S+(C<<5&4294967295|C>>>27),C=D+(S^P&(R^S))+b[6]+3225465664&4294967295,D=R+(C<<9&4294967295|C>>>23),C=P+(R^S&(D^R))+b[11]+643717713&4294967295,P=D+(C<<14&4294967295|C>>>18),C=S+(D^R&(P^D))+b[0]+3921069994&4294967295,S=P+(C<<20&4294967295|C>>>12),C=R+(P^D&(S^P))+b[5]+3593408605&4294967295,R=S+(C<<5&4294967295|C>>>27),C=D+(S^P&(R^S))+b[10]+38016083&4294967295,D=R+(C<<9&4294967295|C>>>23),C=P+(R^S&(D^R))+b[15]+3634488961&4294967295,P=D+(C<<14&4294967295|C>>>18),C=S+(D^R&(P^D))+b[4]+3889429448&4294967295,S=P+(C<<20&4294967295|C>>>12),C=R+(P^D&(S^P))+b[9]+568446438&4294967295,R=S+(C<<5&4294967295|C>>>27),C=D+(S^P&(R^S))+b[14]+3275163606&4294967295,D=R+(C<<9&4294967295|C>>>23),C=P+(R^S&(D^R))+b[3]+4107603335&4294967295,P=D+(C<<14&4294967295|C>>>18),C=S+(D^R&(P^D))+b[8]+1163531501&4294967295,S=P+(C<<20&4294967295|C>>>12),C=R+(P^D&(S^P))+b[13]+2850285829&4294967295,R=S+(C<<5&4294967295|C>>>27),C=D+(S^P&(R^S))+b[2]+4243563512&4294967295,D=R+(C<<9&4294967295|C>>>23),C=P+(R^S&(D^R))+b[7]+1735328473&4294967295,P=D+(C<<14&4294967295|C>>>18),C=S+(D^R&(P^D))+b[12]+2368359562&4294967295,S=P+(C<<20&4294967295|C>>>12),C=R+(S^P^D)+b[5]+4294588738&4294967295,R=S+(C<<4&4294967295|C>>>28),C=D+(R^S^P)+b[8]+2272392833&4294967295,D=R+(C<<11&4294967295|C>>>21),C=P+(D^R^S)+b[11]+1839030562&4294967295,P=D+(C<<16&4294967295|C>>>16),C=S+(P^D^R)+b[14]+4259657740&4294967295,S=P+(C<<23&4294967295|C>>>9),C=R+(S^P^D)+b[1]+2763975236&4294967295,R=S+(C<<4&4294967295|C>>>28),C=D+(R^S^P)+b[4]+1272893353&4294967295,D=R+(C<<11&4294967295|C>>>21),C=P+(D^R^S)+b[7]+4139469664&4294967295,P=D+(C<<16&4294967295|C>>>16),C=S+(P^D^R)+b[10]+3200236656&4294967295,S=P+(C<<23&4294967295|C>>>9),C=R+(S^P^D)+b[13]+681279174&4294967295,R=S+(C<<4&4294967295|C>>>28),C=D+(R^S^P)+b[0]+3936430074&4294967295,D=R+(C<<11&4294967295|C>>>21),C=P+(D^R^S)+b[3]+3572445317&4294967295,P=D+(C<<16&4294967295|C>>>16),C=S+(P^D^R)+b[6]+76029189&4294967295,S=P+(C<<23&4294967295|C>>>9),C=R+(S^P^D)+b[9]+3654602809&4294967295,R=S+(C<<4&4294967295|C>>>28),C=D+(R^S^P)+b[12]+3873151461&4294967295,D=R+(C<<11&4294967295|C>>>21),C=P+(D^R^S)+b[15]+530742520&4294967295,P=D+(C<<16&4294967295|C>>>16),C=S+(P^D^R)+b[2]+3299628645&4294967295,S=P+(C<<23&4294967295|C>>>9),C=R+(P^(S|~D))+b[0]+4096336452&4294967295,R=S+(C<<6&4294967295|C>>>26),C=D+(S^(R|~P))+b[7]+1126891415&4294967295,D=R+(C<<10&4294967295|C>>>22),C=P+(R^(D|~S))+b[14]+2878612391&4294967295,P=D+(C<<15&4294967295|C>>>17),C=S+(D^(P|~R))+b[5]+4237533241&4294967295,S=P+(C<<21&4294967295|C>>>11),C=R+(P^(S|~D))+b[12]+1700485571&4294967295,R=S+(C<<6&4294967295|C>>>26),C=D+(S^(R|~P))+b[3]+2399980690&4294967295,D=R+(C<<10&4294967295|C>>>22),C=P+(R^(D|~S))+b[10]+4293915773&4294967295,P=D+(C<<15&4294967295|C>>>17),C=S+(D^(P|~R))+b[1]+2240044497&4294967295,S=P+(C<<21&4294967295|C>>>11),C=R+(P^(S|~D))+b[8]+1873313359&4294967295,R=S+(C<<6&4294967295|C>>>26),C=D+(S^(R|~P))+b[15]+4264355552&4294967295,D=R+(C<<10&4294967295|C>>>22),C=P+(R^(D|~S))+b[6]+2734768916&4294967295,P=D+(C<<15&4294967295|C>>>17),C=S+(D^(P|~R))+b[13]+1309151649&4294967295,S=P+(C<<21&4294967295|C>>>11),C=R+(P^(S|~D))+b[4]+4149444226&4294967295,R=S+(C<<6&4294967295|C>>>26),C=D+(S^(R|~P))+b[11]+3174756917&4294967295,D=R+(C<<10&4294967295|C>>>22),C=P+(R^(D|~S))+b[2]+718787259&4294967295,P=D+(C<<15&4294967295|C>>>17),C=S+(D^(P|~R))+b[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+P&4294967295,N.g[3]=N.g[3]+D&4294967295}s.prototype.u=function(N,R){R===void 0&&(R=N.length);for(var S=R-this.blockSize,b=this.B,P=this.h,D=0;D<R;){if(P==0)for(;D<=S;)o(this,N,D),D+=this.blockSize;if(typeof N=="string"){for(;D<R;)if(b[P++]=N.charCodeAt(D++),P==this.blockSize){o(this,b),P=0;break}}else for(;D<R;)if(b[P++]=N[D++],P==this.blockSize){o(this,b),P=0;break}}this.h=P,this.o+=R},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;var S=8*this.o;for(R=N.length-8;R<N.length;++R)N[R]=S&255,S/=256;for(this.u(N),N=Array(16),R=S=0;4>R;++R)for(var b=0;32>b;b+=8)N[S++]=this.g[R]>>>b&255;return N};function l(N,R){var S=f;return Object.prototype.hasOwnProperty.call(S,N)?S[N]:S[N]=R(N)}function d(N,R){this.h=R;for(var S=[],b=!0,P=N.length-1;0<=P;P--){var D=N[P]|0;b&&D==R||(S[P]=D,b=!1)}this.g=S}var f={};function m(N){return-128<=N&&128>N?l(N,function(R){return new d([R|0],0>R?-1:0)}):new d([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return E;if(0>N)return M(v(-N));for(var R=[],S=1,b=0;N>=S;b++)R[b]=N/S|0,S*=4294967296;return new d(R,0)}function T(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return M(T(N.substring(1),R));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=v(Math.pow(R,8)),b=E,P=0;P<N.length;P+=8){var D=Math.min(8,N.length-P),C=parseInt(N.substring(P,P+D),R);8>D?(D=v(Math.pow(R,D)),b=b.j(D).add(v(C))):(b=b.j(S),b=b.add(v(C)))}return b}var E=m(0),x=m(1),L=m(16777216);r=d.prototype,r.m=function(){if(H(this))return-M(this).m();for(var N=0,R=1,S=0;S<this.g.length;S++){var b=this.i(S);N+=(0<=b?b:4294967296+b)*R,R*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if($(this))return"0";if(H(this))return"-"+M(this).toString(N);for(var R=v(Math.pow(N,6)),S=this,b="";;){var P=ce(S,R).g;S=ee(S,P.j(R));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(N);if(S=P,$(S))return D+b;for(;6>D.length;)D="0"+D;b=D+b}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function $(N){if(N.h!=0)return!1;for(var R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function H(N){return N.h==-1}r.l=function(N){return N=ee(this,N),H(N)?-1:$(N)?0:1};function M(N){for(var R=N.g.length,S=[],b=0;b<R;b++)S[b]=~N.g[b];return new d(S,~N.h).add(x)}r.abs=function(){return H(this)?M(this):this},r.add=function(N){for(var R=Math.max(this.g.length,N.g.length),S=[],b=0,P=0;P<=R;P++){var D=b+(this.i(P)&65535)+(N.i(P)&65535),C=(D>>>16)+(this.i(P)>>>16)+(N.i(P)>>>16);b=C>>>16,D&=65535,C&=65535,S[P]=C<<16|D}return new d(S,S[S.length-1]&-2147483648?-1:0)};function ee(N,R){return N.add(M(R))}r.j=function(N){if($(this)||$(N))return E;if(H(this))return H(N)?M(this).j(M(N)):M(M(this).j(N));if(H(N))return M(this.j(M(N)));if(0>this.l(L)&&0>N.l(L))return v(this.m()*N.m());for(var R=this.g.length+N.g.length,S=[],b=0;b<2*R;b++)S[b]=0;for(b=0;b<this.g.length;b++)for(var P=0;P<N.g.length;P++){var D=this.i(b)>>>16,C=this.i(b)&65535,He=N.i(P)>>>16,at=N.i(P)&65535;S[2*b+2*P]+=C*at,re(S,2*b+2*P),S[2*b+2*P+1]+=D*at,re(S,2*b+2*P+1),S[2*b+2*P+1]+=C*He,re(S,2*b+2*P+1),S[2*b+2*P+2]+=D*He,re(S,2*b+2*P+2)}for(b=0;b<R;b++)S[b]=S[2*b+1]<<16|S[2*b];for(b=R;b<2*R;b++)S[b]=0;return new d(S,0)};function re(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function Y(N,R){this.g=N,this.h=R}function ce(N,R){if($(R))throw Error("division by zero");if($(N))return new Y(E,E);if(H(N))return R=ce(M(N),R),new Y(M(R.g),M(R.h));if(H(R))return R=ce(N,M(R)),new Y(M(R.g),R.h);if(30<N.g.length){if(H(N)||H(R))throw Error("slowDivide_ only works with positive integers.");for(var S=x,b=R;0>=b.l(N);)S=le(S),b=le(b);var P=de(S,1),D=de(b,1);for(b=de(b,2),S=de(S,2);!$(b);){var C=D.add(b);0>=C.l(N)&&(P=P.add(S),D=C),b=de(b,1),S=de(S,1)}return R=ee(N,P.j(R)),new Y(P,R)}for(P=E;0<=N.l(R);){for(S=Math.max(1,Math.floor(N.m()/R.m())),b=Math.ceil(Math.log(S)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),D=v(S),C=D.j(R);H(C)||0<C.l(N);)S-=b,D=v(S),C=D.j(R);$(D)&&(D=x),P=P.add(D),N=ee(N,C)}return new Y(P,N)}r.A=function(N){return ce(this,N).h},r.and=function(N){for(var R=Math.max(this.g.length,N.g.length),S=[],b=0;b<R;b++)S[b]=this.i(b)&N.i(b);return new d(S,this.h&N.h)},r.or=function(N){for(var R=Math.max(this.g.length,N.g.length),S=[],b=0;b<R;b++)S[b]=this.i(b)|N.i(b);return new d(S,this.h|N.h)},r.xor=function(N){for(var R=Math.max(this.g.length,N.g.length),S=[],b=0;b<R;b++)S[b]=this.i(b)^N.i(b);return new d(S,this.h^N.h)};function le(N){for(var R=N.g.length+1,S=[],b=0;b<R;b++)S[b]=N.i(b)<<1|N.i(b-1)>>>31;return new d(S,N.h)}function de(N,R){var S=R>>5;R%=32;for(var b=N.g.length-S,P=[],D=0;D<b;D++)P[D]=0<R?N.i(D+S)>>>R|N.i(D+S+1)<<32-R:N.i(D+S);return new d(P,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,J0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=T,mi=d}).apply(typeof Vy<"u"?Vy:typeof self<"u"?self:typeof window<"u"?window:{});var ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X0,sl,Z0,pc,pf,e_,t_,n_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ic=="object"&&ic];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,p){if(p)e:{var _=s;u=u.split(".");for(var I=0;I<u.length-1;I++){var F=u[I];if(!(F in _))break e;_=_[F]}u=u[u.length-1],I=_[u],p=p(I),p!=I&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,I=!1,F={next:function(){if(!I&&_<u.length){var W=_++;return{value:p(W,u[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function m(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function T(u,p,_){return u.call.apply(u.bind,arguments)}function E(u,p,_){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,I),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function x(u,p,_){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:E,x.apply(null,arguments)}function L(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function $(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(I,F,W){for(var ae=Array(arguments.length-2),it=2;it<arguments.length;it++)ae[it-2]=arguments[it];return p.prototype[F].apply(I,ae)}}function H(u){const p=u.length;if(0<p){const _=Array(p);for(let I=0;I<p;I++)_[I]=u[I];return _}return[]}function M(u,p){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(m(I)){const F=u.length||0,W=I.length||0;u.length=F+W;for(let ae=0;ae<W;ae++)u[F+ae]=I[ae]}else u.push(I)}}class ee{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function re(u){return/^[\s\xa0]*$/.test(u)}function Y(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function ce(u){return ce[" "](u),u}ce[" "]=function(){};var le=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function de(u,p,_){for(const I in u)p.call(_,u[I],I,u)}function N(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function R(u){const p={};for(const _ in u)p[_]=u[_];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,p){let _,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(_ in I)u[_]=I[_];for(let W=0;W<S.length;W++)_=S[W],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function P(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function D(u){f.setTimeout(()=>{throw u},0)}function C(){var u=_e;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class He{constructor(){this.h=this.g=null}add(p,_){const I=at.get();I.set(p,_),this.h?this.h.next=I:this.g=I,this.h=I}}var at=new ee(()=>new ut,u=>u.reset());class ut{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,q=!1,_e=new He,oe=()=>{const u=f.Promise.resolve(void 0);ue=()=>{u.then(j)}};var j=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){D(_)}var p=at;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}q=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,p),f.removeEventListener("test",_,p)}catch{}return u}();function Ve(u,p){if(Te.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(le){e:{try{ce(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Oe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ve.aa.h.call(this)}}$(Ve,Te);var Oe={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),je=0;function Be(u,p,_,I,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!I,this.ha=F,this.key=++je,this.da=this.fa=!1}function et(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Rt(u){this.src=u,this.g={},this.h=0}Rt.prototype.add=function(u,p,_,I,F){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ae=se(u,p,I,F);return-1<ae?(p=u[ae],_||(p.fa=!1)):(p=new Be(p,this.src,W,!!I,F),p.fa=_,u.push(p)),p};function he(u,p){var _=p.type;if(_ in u.g){var I=u.g[_],F=Array.prototype.indexOf.call(I,p,void 0),W;(W=0<=F)&&Array.prototype.splice.call(I,F,1),W&&(et(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function se(u,p,_,I){for(var F=0;F<u.length;++F){var W=u[F];if(!W.da&&W.listener==p&&W.capture==!!_&&W.ha==I)return F}return-1}var ge="closure_lm_"+(1e6*Math.random()|0),Ue={};function An(u,p,_,I,F){if(Array.isArray(p)){for(var W=0;W<p.length;W++)An(u,p[W],_,I,F);return null}return _=Xt(_),u&&u[ze]?u.K(p,_,v(I)?!!I.capture:!1,F):Ut(u,p,_,!1,I,F)}function Ut(u,p,_,I,F,W){if(!p)throw Error("Invalid event type");var ae=v(F)?!!F.capture:!!F,it=an(u);if(it||(u[ge]=it=new Rt(u)),_=it.add(p,_,I,ae,W),_.proxy)return _;if(I=Pn(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)Ae||(F=ae),F===void 0&&(F=!1),u.addEventListener(p.toString(),I,F);else if(u.attachEvent)u.attachEvent(Wt(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Pn(){function u(_){return p.call(u.src,u.listener,_)}const p=bn;return u}function Gn(u,p,_,I,F){if(Array.isArray(p))for(var W=0;W<p.length;W++)Gn(u,p[W],_,I,F);else I=v(I)?!!I.capture:!!I,_=Xt(_),u&&u[ze]?(u=u.i,p=String(p).toString(),p in u.g&&(W=u.g[p],_=se(W,_,I,F),-1<_&&(et(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[p],u.h--)))):u&&(u=an(u))&&(p=u.g[p.toString()],u=-1,p&&(u=se(p,_,I,F)),(_=-1<u?p[u]:null)&&Nt(_))}function Nt(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ze])he(p.i,u);else{var _=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(_,I,u.capture):p.detachEvent?p.detachEvent(Wt(_),I):p.addListener&&p.removeListener&&p.removeListener(I),(_=an(p))?(he(_,u),_.h==0&&(_.src=null,p[ge]=null)):et(u)}}}function Wt(u){return u in Ue?Ue[u]:Ue[u]="on"+u}function bn(u,p){if(u.da)u=!0;else{p=new Ve(p,this);var _=u.listener,I=u.ha||u.src;u.fa&&Nt(u),u=_.call(I,p)}return u}function an(u){return u=u[ge],u instanceof Rt?u:null}var kn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xt(u){return typeof u=="function"?u:(u[kn]||(u[kn]=function(p){return u.handleEvent(p)}),u[kn])}function ie(){G.call(this),this.i=new Rt(this),this.M=this,this.F=null}$(ie,G),ie.prototype[ze]=!0,ie.prototype.removeEventListener=function(u,p,_,I){Gn(this,u,p,_,I)};function fe(u,p){var _,I=u.F;if(I)for(_=[];I;I=I.F)_.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new Te(p,u);else if(p instanceof Te)p.target=p.target||u;else{var F=p;p=new Te(I,u),b(p,F)}if(F=!0,_)for(var W=_.length-1;0<=W;W--){var ae=p.g=_[W];F=ln(ae,I,!0,p)&&F}if(ae=p.g=u,F=ln(ae,I,!0,p)&&F,F=ln(ae,I,!1,p)&&F,_)for(W=0;W<_.length;W++)ae=p.g=_[W],F=ln(ae,I,!1,p)&&F}ie.prototype.N=function(){if(ie.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],I=0;I<_.length;I++)et(_[I]);delete u.g[p],u.h--}}this.F=null},ie.prototype.K=function(u,p,_,I){return this.i.add(String(u),p,!1,_,I)},ie.prototype.L=function(u,p,_,I){return this.i.add(String(u),p,!0,_,I)};function ln(u,p,_,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,W=0;W<p.length;++W){var ae=p[W];if(ae&&!ae.da&&ae.capture==_){var it=ae.listener,zt=ae.ha||ae.src;ae.fa&&he(u.i,ae),F=it.call(zt,I)!==!1&&F}}return F&&!I.defaultPrevented}function jr(u,p,_){if(typeof u=="function")_&&(u=x(u,_));else if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function Er(u){u.g=jr(()=>{u.g=null,u.i&&(u.i=!1,Er(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class ir extends G{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Er(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mr(u){G.call(this),this.h=u,this.g={}}$(Mr,G);var ns=[];function or(u){de(u.g,function(p,_){this.g.hasOwnProperty(_)&&Nt(p)},u),u.g={}}Mr.prototype.N=function(){Mr.aa.N.call(this),or(this)},Mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rs=f.JSON.stringify,Kn=f.JSON.parse,Ps=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Fr(){}Fr.prototype.h=null;function bs(u){return u.h||(u.h=u.i())}function ks(){}var Nn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ar(){Te.call(this,"d")}$(ar,Te);function Ns(){Te.call(this,"c")}$(Ns,Te);var lr={},Ds=null;function ss(){return Ds=Ds||new ie}lr.La="serverreachability";function Ai(u){Te.call(this,lr.La,u)}$(Ai,Te);function Tr(u){const p=ss();fe(p,new Ai(p))}lr.STAT_EVENT="statevent";function K(u,p){Te.call(this,lr.STAT_EVENT,u),this.stat=p}$(K,Te);function we(u){const p=ss();fe(p,new K(p,u))}lr.Ma="timingevent";function Pe(u,p){Te.call(this,lr.Ma,u),this.size=p}$(Pe,Te);function be(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Se(){this.g=!0}Se.prototype.xa=function(){this.g=!1};function $e(u,p,_,I,F,W){u.info(function(){if(u.g)if(W)for(var ae="",it=W.split("&"),zt=0;zt<it.length;zt++){var Je=it[zt].split("=");if(1<Je.length){var qt=Je[0];Je=Je[1];var Dt=qt.split("_");ae=2<=Dt.length&&Dt[1]=="type"?ae+(qt+"="+Je+"&"):ae+(qt+"=redacted&")}}else ae=null;else ae=W;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+p+`
`+_+`
`+ae})}function ht(u,p,_,I,F,W,ae){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+p+`
`+_+`
`+W+" "+ae})}function Ge(u,p,_,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+ft(u,_)+(I?" "+I:"")})}function nt(u,p){u.info(function(){return"TIMEOUT: "+p})}Se.prototype.info=function(){};function ft(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var I=_[u];if(!(2>I.length)){var F=I[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ae=1;ae<F.length;ae++)F[ae]=""}}}}return rs(_)}catch{return p}}var rt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},At;function un(){}$(un,Fr),un.prototype.g=function(){return new XMLHttpRequest},un.prototype.i=function(){return{}},At=new un;function yt(u,p,_,I){this.j=u,this.i=p,this.l=_,this.R=I||1,this.U=new Mr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vt}function vt(){this.i=null,this.g="",this.h=!1}var vn={},ur={};function St(u,p,_){u.L=1,u.v=Ms(Yn(p)),u.m=_,u.P=!0,_n(u,null)}function _n(u,p){u.F=Date.now(),ct(u),u.A=Yn(u.v);var _=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Us(_.i,"t",I),u.C=0,_=u.j.J,u.h=new vt,u.g=ou(u.j,_?p:null,!u.m),0<u.O&&(u.M=new ir(x(u.Y,u,u.g),u.O)),p=u.U,_=u.g,I=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(ns[0]=F.toString()),F=ns);for(var W=0;W<F.length;W++){var ae=An(_,F[W],I||p.handleEvent,!1,p.h||p);if(!ae)break;p.g[ae.key]=ae}p=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Tr(),$e(u.i,u.u,u.A,u.l,u.R,u.m)}yt.prototype.ca=function(u){u=u.target;const p=this.M;p&&On(u)==3?p.j():this.Y(u)},yt.prototype.Y=function(u){try{if(u==this.g)e:{const Dt=On(this.g);var p=this.g.Ba();const hr=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||xa(this.g)))){this.J||Dt!=4||p==7||(p==8||0>=hr?Tr(3):Tr(2)),Pi(this);var _=this.g.Z();this.X=_;t:if(Ur(this)){var I=xa(this.g);u="";var F=I.length,W=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cr(this),Vs(this);var ae="";break t}this.h.i=new f.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(W&&p==F-1)});I.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,ht(this.i,this.u,this.A,this.l,this.R,Dt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var it,zt=this.g;if((it=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(it)){var Je=it;break t}}Je=null}if(_=Je)Ge(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,_);else{this.o=!1,this.s=3,we(12),cr(this),Vs(this);break e}}if(this.P){_=!0;let Xn;for(;!this.J&&this.C<ae.length;)if(Xn=fd(this,ae),Xn==ur){Dt==4&&(this.s=4,we(14),_=!1),Ge(this.i,this.l,null,"[Incomplete Response]");break}else if(Xn==vn){this.s=4,we(15),Ge(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else Ge(this.i,this.l,Xn,null),_a(this,Xn);if(Ur(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||ae.length!=0||this.h.h||(this.s=1,we(16),_=!1),this.o=this.o&&_,!_)Ge(this.i,this.l,ae,"[Invalid Chunked Response]"),cr(this),Vs(this);else if(0<ae.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Ca(qt),qt.M=!0,we(11))}}else Ge(this.i,this.l,ae,null),_a(this,ae);Dt==4&&cr(this),this.o&&!this.J&&(Dt==4?Eo(this.j,this):(this.o=!1,ct(this)))}else go(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,we(12)):(this.s=0,we(13)),cr(this),Vs(this)}}}catch{}finally{}};function Ur(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function fd(u,p){var _=u.C,I=p.indexOf(`
`,_);return I==-1?ur:(_=Number(p.substring(_,I)),isNaN(_)?vn:(I+=1,I+_>p.length?ur:(p=p.slice(I,I+_),u.C=I+_,p)))}yt.prototype.cancel=function(){this.J=!0,cr(this)};function ct(u){u.S=Date.now()+u.I,Hl(u,u.I)}function Hl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=be(x(u.ba,u),p)}function Pi(u){u.B&&(f.clearTimeout(u.B),u.B=null)}yt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(nt(this.i,this.A),this.L!=2&&(Tr(),we(17)),cr(this),this.s=2,Vs(this)):Hl(this,this.S-u)};function Vs(u){u.j.G==0||u.J||Eo(u.j,u)}function cr(u){Pi(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,or(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function _a(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||wn(_.h,u))){if(!u.K&&wn(_.h,u)&&_.G==3){try{var I=_.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)wo(_),Rr(_);else break e;_o(_),we(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=be(x(_.Za,_),6e3));if(1>=ql(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else us(_,11)}else if((u.K||_.g==u)&&wo(_),!re(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let Je=F[p];if(_.T=Je[0],Je=Je[1],_.G==2)if(Je[0]=="c"){_.K=Je[1],_.ia=Je[2];const qt=Je[3];qt!=null&&(_.la=qt,_.j.info("VER="+_.la));const Dt=Je[4];Dt!=null&&(_.Aa=Dt,_.j.info("SVER="+_.Aa));const hr=Je[5];hr!=null&&typeof hr=="number"&&0<hr&&(I=1.5*hr,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const Xn=u.g;if(Xn){const Li=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Li){var W=I.h;W.g||Li.indexOf("spdy")==-1&&Li.indexOf("quic")==-1&&Li.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(wa(W,W.h),W.h=null))}if(I.D){const Io=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Io&&(I.ya=Io,lt(I.I,I.D,Io))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var ae=u;if(I.qa=iu(I,I.J?I.ia:null,I.W),ae.K){Gl(I.h,ae);var it=ae,zt=I.L;zt&&(it.I=zt),it.B&&(Pi(it),ct(it)),I.g=ae}else Oi(I);0<_.i.length&&Hr(_)}else Je[0]!="stop"&&Je[0]!="close"||us(_,7);else _.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?us(_,7):en(_):Je[0]!="noop"&&_.l&&_.l.ta(Je),_.v=0)}}Tr(4)}catch{}}var Wl=class{constructor(u,p){this.g=u,this.map=p}};function bi(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ql(u){return u.h?1:u.g?u.g.size:0}function wn(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function wa(u,p){u.g?u.g.add(p):u.h=p}function Gl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}bi.prototype.cancel=function(){if(this.i=Kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Kl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return H(u.i)}function co(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var p=[],_=u.length,I=0;I<_;I++)p.push(u[I]);return p}p=[],_=0;for(I in u)p[_++]=u[I];return p}function ho(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const I in u)p[_++]=I;return p}}}function Os(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=ho(u),I=co(u),F=I.length,W=0;W<F;W++)p.call(void 0,I[W],_&&_[W],u)}var ki=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pd(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var I=u[_].indexOf("="),F=null;if(0<=I){var W=u[_].substring(0,I);F=u[_].substring(I+1)}else W=u[_];p(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function is(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof is){this.h=u.h,Ni(this,u.j),this.o=u.o,this.g=u.g,Ls(this,u.s),this.l=u.l;var p=u.i,_=new zr;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),js(this,_),this.m=u.m}else u&&(p=String(u).match(ki))?(this.h=!1,Ni(this,p[1]||"",!0),this.o=Ye(p[2]||""),this.g=Ye(p[3]||"",!0),Ls(this,p[4]),this.l=Ye(p[5]||"",!0),js(this,p[6]||"",!0),this.m=Ye(p[7]||"")):(this.h=!1,this.i=new zr(null,this.h))}is.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Fs(p,fo,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Fs(p,fo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Fs(_,_.charAt(0)=="/"?Jl:Yl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Fs(_,Ea)),u.join("")};function Yn(u){return new is(u)}function Ni(u,p,_){u.j=_?Ye(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ls(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function js(u,p,_){p instanceof zr?(u.i=p,Br(u.i,u.h)):(_||(p=Fs(p,Xl)),u.i=new zr(p,u.h))}function lt(u,p,_){u.i.set(p,_)}function Ms(u){return lt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ye(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Fs(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Ql),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ql(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var fo=/[#\/\?@]/g,Yl=/[#\?:]/g,Jl=/[#\?]/g,Xl=/[#\?@]/g,Ea=/#/g;function zr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Zt(u){u.g||(u.g=new Map,u.h=0,u.i&&pd(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=zr.prototype,r.add=function(u,p){Zt(this),this.i=null,u=dr(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Ir(u,p){Zt(u),p=dr(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function xr(u,p){return Zt(u),p=dr(u,p),u.g.has(p)}r.forEach=function(u,p){Zt(this),this.g.forEach(function(_,I){_.forEach(function(F){u.call(p,F,I,this)},this)},this)},r.na=function(){Zt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let I=0;I<p.length;I++){const F=u[I];for(let W=0;W<F.length;W++)_.push(p[I])}return _},r.V=function(u){Zt(this);let p=[];if(typeof u=="string")xr(this,u)&&(p=p.concat(this.g.get(dr(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},r.set=function(u,p){return Zt(this),this.i=null,u=dr(this,u),xr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Us(u,p,_){Ir(u,p),0<_.length&&(u.i=null,u.g.set(dr(u,p),H(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var I=p[_];const W=encodeURIComponent(String(I)),ae=this.V(I);for(I=0;I<ae.length;I++){var F=W;ae[I]!==""&&(F+="="+encodeURIComponent(String(ae[I]))),u.push(F)}}return this.i=u.join("&")};function dr(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Br(u,p){p&&!u.j&&(Zt(u),u.i=null,u.g.forEach(function(_,I){var F=I.toLowerCase();I!=F&&(Ir(this,I),Us(this,F,_))},u)),u.j=p}function md(u,p){const _=new Se;if(f.Image){const I=new Image;I.onload=L(Vn,_,"TestLoadImage: loaded",!0,p,I),I.onerror=L(Vn,_,"TestLoadImage: error",!1,p,I),I.onabort=L(Vn,_,"TestLoadImage: abort",!1,p,I),I.ontimeout=L(Vn,_,"TestLoadImage: timeout",!1,p,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function Zl(u,p){const _=new Se,I=new AbortController,F=setTimeout(()=>{I.abort(),Vn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(W=>{clearTimeout(F),W.ok?Vn(_,"TestPingServer: ok",!0,p):Vn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Vn(_,"TestPingServer: error",!1,p)})}function Vn(u,p,_,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(_)}catch{}}function gd(){this.g=new Ps}function eu(u,p,_){const I=_||"";try{Os(u,function(F,W){let ae=F;v(F)&&(ae=rs(F)),p.push(I+W+"="+encodeURIComponent(ae))})}catch(F){throw p.push(I+"type="+encodeURIComponent("_badmap")),F}}function os(u){this.l=u.Ub||null,this.j=u.eb||!1}$(os,Fr),os.prototype.g=function(){return new Di(this.l,this.j)},os.prototype.i=function(u){return function(){return u}}({});function Di(u,p){ie.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Di,ie),r=Di.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Cr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Cr(this)),this.g&&(this.readyState=3,Cr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function tu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Sr(this):Cr(this),this.readyState==3&&tu(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Sr(this))},r.Qa=function(u){this.g&&(this.response=u,Sr(this))},r.ga=function(){this.g&&Sr(this)};function Sr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Cr(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Cr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function as(u){let p="";return de(u,function(_,I){p+=I,p+=":",p+=_,p+=`\r
`}),p}function zs(u,p,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=as(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):lt(u,p,_))}function _t(u){ie.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(_t,ie);var yd=/^https?$/i,Ta=["POST","PUT"];r=_t.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():At.g(),this.v=this.o?bs(this.o):bs(At),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(W){Vi(this,W);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)_.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())_.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Ta,p,void 0))||I||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ae]of _)this.g.setRequestHeader(W,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mo(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Vi(this,W)}};function Vi(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,po(u),Jn(u)}function po(u){u.A||(u.A=!0,fe(u,"complete"),fe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,fe(this,"complete"),fe(this,"abort"),Jn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jn(this,!0)),_t.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ia(this):this.bb())},r.bb=function(){Ia(this)};function Ia(u){if(u.h&&typeof d<"u"&&(!u.v[1]||On(u)!=4||u.Z()!=2)){if(u.u&&On(u)==4)jr(u.Ea,0,u);else if(fe(u,"readystatechange"),On(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var I;if(I=ae===0){var F=String(u.D).match(ki)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),I=!yd.test(F?F.toLowerCase():"")}_=I}if(_)fe(u,"complete"),fe(u,"success");else{u.m=6;try{var W=2<On(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",po(u)}}finally{Jn(u)}}}}function Jn(u,p){if(u.g){mo(u);const _=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||fe(u,"ready");try{_.onreadystatechange=I}catch{}}}function mo(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function On(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Kn(p)}};function xa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function go(u){const p={};u=(u.g&&2<=On(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(re(u[I]))continue;var _=P(u[I]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=p[F]||[];p[F]=W,W.push(_)}N(p,function(I){return I.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Sa(u){this.Aa=0,this.i=[],this.j=new Se,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,u),this.cb=$r("retryDelaySeedMs",1e4,u),this.Wa=$r("forwardChannelMaxRetries",2,u),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new bi(u&&u.concurrentRequestLimit),this.Da=new gd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Sa.prototype,r.la=8,r.G=1,r.connect=function(u,p,_,I){we(0),this.W=u,this.H=p||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=iu(this,null,this.W),Hr(this)};function en(u){if(yo(u),u.G==3){var p=u.U++,_=Yn(u.I);if(lt(_,"SID",u.K),lt(_,"RID",p),lt(_,"TYPE","terminate"),ls(u,_),p=new yt(u,u.j,p),p.L=2,p.v=Ms(Yn(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=p.v,_=!0),_||(p.g=ou(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ct(p)}su(u)}function Rr(u){u.g&&(Ca(u),u.g.cancel(),u.g=null)}function yo(u){Rr(u),u.u&&(f.clearTimeout(u.u),u.u=null),wo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Hr(u){if(!Qn(u.h)&&!u.s){u.s=!0;var p=u.Ga;ue||oe(),q||(ue(),q=!0),_e.add(p,u),u.B=0}}function vd(u,p){return ql(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=be(x(u.Ga,u,p),ru(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new yt(this,this.j,u);let W=this.o;if(this.S&&(W?(W=R(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Bs(this,F,p),_=Yn(this.I),lt(_,"RID",u),lt(_,"CVER",22),this.D&&lt(_,"X-HTTP-Session-Id",this.D),ls(this,_),W&&(this.O?p="headers="+encodeURIComponent(String(as(W)))+"&"+p:this.m&&zs(_,this.m,W)),wa(this.h,F),this.Ua&&lt(_,"TYPE","init"),this.P?(lt(_,"$req",p),lt(_,"SID","null"),F.T=!0,St(F,_,null)):St(F,_,p),this.G=2}}else this.G==3&&(u?vo(this,u):this.i.length==0||Qn(this.h)||vo(this))};function vo(u,p){var _;p?_=p.l:_=u.U++;const I=Yn(u.I);lt(I,"SID",u.K),lt(I,"RID",_),lt(I,"AID",u.T),ls(u,I),u.m&&u.o&&zs(I,u.m,u.o),_=new yt(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Bs(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wa(u.h,_),St(_,I,p)}function ls(u,p){u.H&&de(u.H,function(_,I){lt(p,I,_)}),u.l&&Os({},function(_,I){lt(p,I,_)})}function Bs(u,p,_){_=Math.min(u.i.length,_);var I=u.l?x(u.l.Na,u.l,u):null;e:{var F=u.i;let W=-1;for(;;){const ae=["count="+_];W==-1?0<_?(W=F[0].g,ae.push("ofs="+W)):W=0:ae.push("ofs="+W);let it=!0;for(let zt=0;zt<_;zt++){let Je=F[zt].g;const qt=F[zt].map;if(Je-=W,0>Je)W=Math.max(0,F[zt].g-100),it=!1;else try{eu(qt,ae,"req"+Je+"_")}catch{I&&I(qt)}}if(it){I=ae.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,I}function Oi(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ue||oe(),q||(ue(),q=!0),_e.add(p,u),u.v=0}}function _o(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=be(x(u.Fa,u),ru(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=be(x(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,we(10),Rr(this),nu(this))};function Ca(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function nu(u){u.g=new yt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Yn(u.qa);lt(p,"RID","rpc"),lt(p,"SID",u.K),lt(p,"AID",u.T),lt(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&lt(p,"TO",u.ja),lt(p,"TYPE","xmlhttp"),ls(u,p),u.m&&u.o&&zs(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Ms(Yn(p)),_.m=null,_.P=!0,_n(_,u)}r.Za=function(){this.C!=null&&(this.C=null,Rr(this),_o(this),we(19))};function wo(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Eo(u,p){var _=null;if(u.g==p){wo(u),Ca(u),u.g=null;var I=2}else if(wn(u.h,p))_=p.D,Gl(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;I=ss(),fe(I,new Pe(I,_)),Hr(u)}else Oi(u);else if(F=p.s,F==3||F==0&&0<p.X||!(I==1&&vd(u,p)||I==2&&_o(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),F){case 1:us(u,5);break;case 4:us(u,10);break;case 3:us(u,6);break;default:us(u,2)}}}function ru(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function us(u,p){if(u.j.info("Error code "+p),p==2){var _=x(u.fb,u),I=u.Xa;const F=!I;I=new is(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ni(I,"https"),Ms(I),F?md(I.toString(),_):Zl(I.toString(),_)}else we(2);u.G=0,u.l&&u.l.sa(p),su(u),yo(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function su(u){if(u.G=0,u.ka=[],u.l){const p=Kl(u.h);(p.length!=0||u.i.length!=0)&&(M(u.ka,p),M(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function iu(u,p,_){var I=_ instanceof is?Yn(_):new is(_);if(I.g!="")p&&(I.g=p+"."+I.g),Ls(I,I.s);else{var F=f.location;I=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var W=new is(null);I&&Ni(W,I),p&&(W.g=p),F&&Ls(W,F),_&&(W.l=_),I=W}return _=u.D,p=u.ya,_&&p&&lt(I,_,p),lt(I,"VER",u.la),ls(u,I),I}function ou(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new _t(new os({eb:_})):new _t(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ra(){}r=Ra.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function To(){}To.prototype.g=function(u,p){return new En(u,p)};function En(u,p){ie.call(this),this.g=new Sa(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!re(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!re(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Wr(this)}$(En,ie),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){en(this.g)},En.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=rs(u),u=_);p.i.push(new Wl(p.Ya++,u)),p.G==3&&Hr(p)},En.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,En.aa.N.call(this)};function au(u){ar.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}$(au,ar);function lu(){Ns.call(this),this.status=1}$(lu,Ns);function Wr(u){this.g=u}$(Wr,Ra),Wr.prototype.ua=function(){fe(this.g,"a")},Wr.prototype.ta=function(u){fe(this.g,new au(u))},Wr.prototype.sa=function(u){fe(this.g,new lu)},Wr.prototype.ra=function(){fe(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,n_=function(){return new To},t_=function(){return ss()},e_=lr,pf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,pc=rt,Dn.COMPLETE="complete",Z0=Dn,ks.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",ie.prototype.listen=ie.prototype.K,sl=ks,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,X0=_t}).apply(typeof ic<"u"?ic:typeof self<"u"?self:typeof window<"u"?window:{});const Oy="@firebase/firestore",Ly="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ma="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new Of("@firebase/firestore");function Wo(){return to.logLevel}function ve(r,...e){if(to.logLevel<=Ke.DEBUG){const t=e.map(Jf);to.debug(`Firestore (${ma}): ${r}`,...t)}}function Ss(r,...e){if(to.logLevel<=Ke.ERROR){const t=e.map(Jf);to.error(`Firestore (${ma}): ${r}`,...t)}}function _i(r,...e){if(to.logLevel<=Ke.WARN){const t=e.map(Jf);to.warn(`Firestore (${ma}): ${r}`,...t)}}function Jf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,r_(r,s,t)}function r_(r,e,t){let s=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ss(s),new Error(s)}function Ze(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||r_(e,o,s)}function Fe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mn.UNAUTHENTICATED))}shutdown(){}}class gC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yC{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Es,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},f=m=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Es)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ze(typeof s.accessToken=="string",31837,{l:s}),new s_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class vC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _C{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new vC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const s=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=EC(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function We(r,e){return r<e?-1:r>e?1:0}function mf(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return We(s,o);{const l=i_(),d=TC(l.encode(My(r,t)),l.encode(My(e,t)));return d!==0?d:We(s,o)}}t+=s>65535?2:1}return We(r.length,e.length)}function My(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function TC(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return We(r[t],e[t]);return We(r.length,e.length)}function sa(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="__name__";class Yr{constructor(e,t,s){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ke(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Yr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Yr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return We(e.length,t.length)}static compareSegments(e,t){const s=Yr.isNumericId(e),o=Yr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Yr.extractNumericId(e).compare(Yr.extractNumericId(t)):mf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mi.fromString(e.substring(4,e.length-2))}}class ot extends Yr{construct(e,t,s){return new ot(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new ot(t)}static emptyPath(){return new ot([])}}const IC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Yr{construct(e,t,s){return new sn(e,t,s)}static isValidIdentifier(e){return IC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fy}static keyField(){return new sn([Fy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new pe(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new pe(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new pe(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else f==="`"?(d=!d,o++):f!=="."||d?(s+=f,o++):(l(),o++)}if(l(),d)throw new pe(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(t)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(ot.fromString(e))}static fromName(e){return new Re(ot.fromString(e).popFirst(5))}static empty(){return new Re(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(r,e,t){if(!t)throw new pe(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function xC(r,e,t,s){if(e===!0&&s===!0)throw new pe(Q.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Uy(r){if(!Re.isDocumentKey(r))throw new pe(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function zy(r){if(Re.isDocumentKey(r))throw new pe(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function a_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Qc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ke(12329,{type:typeof r})}function Jr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new pe(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qc(r);throw new pe(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ol(r,e){if(!a_(r))throw new pe(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(o&&typeof d!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new pe(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=-62135596800,$y=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*$y);return new gt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<By)throw new pe(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$y}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ol(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-By;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Mt("string",gt._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new gt(0,0))}static max(){return new Le(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=-1;function SC(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Le.fromTimestamp(s===1e9?new gt(t+1,0):new gt(t,s));return new wi(o,Re.empty(),e)}function CC(r){return new wi(r.readTime,r.key,Il)}class wi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new wi(Le.min(),Re.empty(),Il)}static max(){return new wi(Le.max(),Re.empty(),Il)}}function RC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(r.documentKey,e.documentKey),t!==0?t:We(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==AC)throw r;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,s)=>{t(e)})}static reject(e){return new J((t,s)=>{s(e)})}static waitFor(e){return new J((t,s)=>{let o=0,l=0,d=!1;e.forEach(f=>{++o,f.next(()=>{++l,d&&l===o&&t()},m=>s(m))}),d=!0,l===o&&t()})}static or(e){let t=J.resolve(!1);for(const s of e)t=t.next(o=>o?J.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new J((s,o)=>{const l=e.length,d=new Array(l);let f=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next(T=>{d[v]=T,++f,f===l&&s(d)},T=>o(T))}})}static doWhile(e,t){return new J((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function bC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ya(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Yc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=-1;function Ll(r){return r==null}function Pc(r){return r===0&&1/r==-1/0}function kC(r){return typeof r=="number"&&Number.isInteger(r)&&!Pc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="";function NC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Hy(e)),e=DC(r.get(t),e);return Hy(e)}function DC(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case l_:t+="";break;default:t+=l}}return t}function Hy(r){return r+l_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ci(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function u_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oc(this.root,e,this.comparator,!0)}}class oc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??rn.RED,this.left=o??rn.EMPTY,this.right=l??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new rn(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return rn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qy(this.data.getIterator())}getIteratorFrom(e){return new qy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class qy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new rr([])}unionWith(e){let t=new Ht(sn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new c_("Invalid base64 string: "+l):l}}(e);return new on(t)}static fromUint8Array(e){const t=function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l}(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const VC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(r){if(Ze(!!r,39018),typeof r=="string"){let e=0;const t=VC.exec(r);if(Ze(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:bt(r.seconds),nanos:bt(r.nanos)}}function bt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ti(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="server_timestamp",h_="__type__",f_="__previous_value__",p_="__local_write_time__";function ep(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[h_])===null||t===void 0?void 0:t.stringValue)===d_}function Jc(r){const e=r.mapValue.fields[f_];return ep(e)?Jc(e):e}function xl(r){const e=Ei(r.mapValue.fields[p_].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t,s,o,l,d,f,m,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=T}}const bc="(default)";class Sl{constructor(e,t){this.projectId=e,this.database=t||bc}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database===bc}isEqual(e){return e instanceof Sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="__type__",LC="__max__",ac={mapValue:{}},g_="__vector__",kc="value";function Ii(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ep(r)?4:MC(r)?9007199254740991:jC(r)?10:11:ke(28295,{value:r})}function ts(r,e){if(r===e)return!0;const t=Ii(r);if(t!==Ii(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return xl(r).isEqual(xl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Ei(o.timestampValue),f=Ei(l.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Ti(o.bytesValue).isEqual(Ti(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return bt(o.geoPointValue.latitude)===bt(l.geoPointValue.latitude)&&bt(o.geoPointValue.longitude)===bt(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return bt(o.integerValue)===bt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=bt(o.doubleValue),f=bt(l.doubleValue);return d===f?Pc(d)===Pc(f):isNaN(d)&&isNaN(f)}return!1}(r,e);case 9:return sa(r.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return function(o,l){const d=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Wy(d)!==Wy(f))return!1;for(const m in d)if(d.hasOwnProperty(m)&&(f[m]===void 0||!ts(d[m],f[m])))return!1;return!0}(r,e);default:return ke(52216,{left:r})}}function Cl(r,e){return(r.values||[]).find(t=>ts(t,e))!==void 0}function ia(r,e){if(r===e)return 0;const t=Ii(r),s=Ii(e);if(t!==s)return We(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(r.booleanValue,e.booleanValue);case 2:return function(l,d){const f=bt(l.integerValue||l.doubleValue),m=bt(d.integerValue||d.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(r,e);case 3:return Gy(r.timestampValue,e.timestampValue);case 4:return Gy(xl(r),xl(e));case 5:return mf(r.stringValue,e.stringValue);case 6:return function(l,d){const f=Ti(l),m=Ti(d);return f.compareTo(m)}(r.bytesValue,e.bytesValue);case 7:return function(l,d){const f=l.split("/"),m=d.split("/");for(let v=0;v<f.length&&v<m.length;v++){const T=We(f[v],m[v]);if(T!==0)return T}return We(f.length,m.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,d){const f=We(bt(l.latitude),bt(d.latitude));return f!==0?f:We(bt(l.longitude),bt(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Ky(r.arrayValue,e.arrayValue);case 10:return function(l,d){var f,m,v,T;const E=l.fields||{},x=d.fields||{},L=(f=E[kc])===null||f===void 0?void 0:f.arrayValue,$=(m=x[kc])===null||m===void 0?void 0:m.arrayValue,H=We(((v=L==null?void 0:L.values)===null||v===void 0?void 0:v.length)||0,((T=$==null?void 0:$.values)===null||T===void 0?void 0:T.length)||0);return H!==0?H:Ky(L,$)}(r.mapValue,e.mapValue);case 11:return function(l,d){if(l===ac.mapValue&&d===ac.mapValue)return 0;if(l===ac.mapValue)return 1;if(d===ac.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),v=d.fields||{},T=Object.keys(v);m.sort(),T.sort();for(let E=0;E<m.length&&E<T.length;++E){const x=mf(m[E],T[E]);if(x!==0)return x;const L=ia(f[m[E]],v[T[E]]);if(L!==0)return L}return We(m.length,T.length)}(r.mapValue,e.mapValue);default:throw ke(23264,{le:t})}}function Gy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return We(r,e);const t=Ei(r),s=Ei(e),o=We(t.seconds,s.seconds);return o!==0?o:We(t.nanos,s.nanos)}function Ky(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=ia(t[o],s[o]);if(l)return l}return We(t.length,s.length)}function oa(r){return gf(r)}function gf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Ei(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ti(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Re.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=gf(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of s)l?l=!1:o+=",",o+=`${d}:${gf(t.fields[d])}`;return o+"}"}(r.mapValue):ke(61005,{value:r})}function mc(r){switch(Ii(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jc(r);return e?16+mc(e):16;case 5:return 2*r.stringValue.length;case 6:return Ti(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+mc(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Ci(s.fields,(l,d)=>{o+=l.length+mc(d)}),o}(r.mapValue);default:throw ke(13486,{value:r})}}function Qy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function yf(r){return!!r&&"integerValue"in r}function tp(r){return!!r&&"arrayValue"in r}function Yy(r){return!!r&&"nullValue"in r}function Jy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function gc(r){return!!r&&"mapValue"in r}function jC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[m_])===null||t===void 0?void 0:t.stringValue)===g_}function fl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ci(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=fl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function MC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===LC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!gc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fl(t)}setAll(e){let t=sn.emptyPath(),s={},o=[];e.forEach((d,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,o),s={},o=[],t=f.popLast()}d?s[f.lastSegment()]=fl(d):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());gc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];gc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ci(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new Cn(fl(this.value))}}function y_(r){const e=[];return Ci(r.fields,(t,s)=>{const o=new sn([t]);if(gc(s)){const l=y_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t,s,o,l,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=d,this.documentState=f}static newInvalidDocument(e){return new Jt(e,0,Le.min(),Le.min(),Le.min(),Cn.empty(),0)}static newFoundDocument(e,t,s,o){return new Jt(e,1,t,Le.min(),s,o,0)}static newNoDocument(e,t){return new Jt(e,2,t,Le.min(),Le.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new Jt(e,3,t,Le.min(),Le.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t){this.position=e,this.inclusive=t}}function Xy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?s=Re.comparator(Re.fromName(d.referenceValue),t.key):s=ia(d,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Zy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ts(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t="asc"){this.field=e,this.dir=t}}function FC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{}class jt extends v_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new zC(e,t,s):t==="array-contains"?new HC(e,s):t==="in"?new WC(e,s):t==="not-in"?new qC(e,s):t==="array-contains-any"?new GC(e,s):new jt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new BC(e,s):new $C(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ia(t,this.value)):t!==null&&Ii(this.value)===Ii(t)&&this.matchesComparison(ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lr extends v_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Lr(e,t)}matches(e){return __(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function __(r){return r.op==="and"}function w_(r){return UC(r)&&__(r)}function UC(r){for(const e of r.filters)if(e instanceof Lr)return!1;return!0}function vf(r){if(r instanceof jt)return r.field.canonicalString()+r.op.toString()+oa(r.value);if(w_(r))return r.filters.map(e=>vf(e)).join(",");{const e=r.filters.map(t=>vf(t)).join(",");return`${r.op}(${e})`}}function E_(r,e){return r instanceof jt?function(s,o){return o instanceof jt&&s.op===o.op&&s.field.isEqual(o.field)&&ts(s.value,o.value)}(r,e):r instanceof Lr?function(s,o){return o instanceof Lr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,d,f)=>l&&E_(d,o.filters[f]),!0):!1}(r,e):void ke(19439)}function T_(r){return r instanceof jt?function(t){return`${t.field.canonicalString()} ${t.op} ${oa(t.value)}`}(r):r instanceof Lr?function(t){return t.op.toString()+" {"+t.getFilters().map(T_).join(" ,")+"}"}(r):"Filter"}class zC extends jt{constructor(e,t,s){super(e,t,s),this.key=Re.fromName(s.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class BC extends jt{constructor(e,t){super(e,"in",t),this.keys=I_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $C extends jt{constructor(e,t){super(e,"not-in",t),this.keys=I_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function I_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Re.fromName(s.referenceValue))}class HC extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tp(t)&&Cl(t.arrayValue,this.value)}}class WC extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cl(this.value.arrayValue,t)}}class qC extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cl(this.value.arrayValue,t)}}class GC extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Cl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t=null,s=[],o=[],l=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=d,this.endAt=f,this.Pe=null}}function ev(r,e=null,t=[],s=[],o=null,l=null,d=null){return new KC(r,e,t,s,o,l,d)}function np(r){const e=Fe(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>vf(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),Ll(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>oa(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>oa(s)).join(",")),e.Pe=t}return e.Pe}function rp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!FC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!E_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Zy(r.startAt,e.startAt)&&Zy(r.endAt,e.endAt)}function _f(r){return Re.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t=null,s=[],o=[],l=null,d="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function QC(r,e,t,s,o,l,d,f){return new jl(r,e,t,s,o,l,d,f)}function sp(r){return new jl(r)}function tv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function x_(r){return r.collectionGroup!==null}function pl(r){const e=Fe(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Ht(sn.comparator);return d.filters.forEach(m=>{m.getFlattenedFilters().forEach(v=>{v.isInequality()&&(f=f.add(v.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Dc(l,s))}),t.has(sn.keyField().canonicalString())||e.Te.push(new Dc(sn.keyField(),s))}return e.Te}function Xr(r){const e=Fe(r);return e.Ie||(e.Ie=YC(e,pl(r))),e.Ie}function YC(r,e){if(r.limitType==="F")return ev(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Dc(o.field,l)});const t=r.endAt?new Nc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Nc(r.startAt.position,r.startAt.inclusive):null;return ev(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function wf(r,e){const t=r.filters.concat([e]);return new jl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ef(r,e,t){return new jl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Xc(r,e){return rp(Xr(r),Xr(e))&&r.limitType===e.limitType}function S_(r){return`${np(Xr(r))}|lt:${r.limitType}`}function qo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>T_(o)).join(", ")}]`),Ll(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>oa(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>oa(o)).join(",")),`Target(${s})`}(Xr(r))}; limitType=${r.limitType})`}function Zc(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Re.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of pl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(d,f,m){const v=Xy(d,f,m);return d.inclusive?v<=0:v<0}(s.startAt,pl(s),o)||s.endAt&&!function(d,f,m){const v=Xy(d,f,m);return d.inclusive?v>=0:v>0}(s.endAt,pl(s),o))}(r,e)}function JC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function C_(r){return(e,t)=>{let s=!1;for(const o of pl(r)){const l=XC(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function XC(r,e,t){const s=r.field.isKeyField()?Re.comparator(e.key,t.key):function(l,d,f){const m=d.data.field(l),v=f.data.field(l);return m!==null&&v!==null?ia(m,v):ke(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return ke(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ci(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return u_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new xt(Re.comparator);function Cs(){return ZC}const R_=new xt(Re.comparator);function il(...r){let e=R_;for(const t of r)e=e.insert(t.key,t);return e}function A_(r){let e=R_;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Ji(){return ml()}function P_(){return ml()}function ml(){return new ao(r=>r.toString(),(r,e)=>r.isEqual(e))}const eR=new xt(Re.comparator),tR=new Ht(Re.comparator);function Qe(...r){let e=tR;for(const t of r)e=e.add(t);return e}const nR=new Ht(We);function rR(){return nR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pc(e)?"-0":e}}function b_(r){return{integerValue:""+r}}function sR(r,e){return kC(e)?b_(e):ip(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function iR(r,e,t){return r instanceof Vc?function(o,l){const d={fields:{[h_]:{stringValue:d_},[p_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&ep(l)&&(l=Jc(l)),l&&(d.fields[f_]=l),{mapValue:d}}(t,e):r instanceof Rl?N_(r,e):r instanceof Al?D_(r,e):function(o,l){const d=k_(o,l),f=nv(d)+nv(o.Ee);return yf(d)&&yf(o.Ee)?b_(f):ip(o.serializer,f)}(r,e)}function oR(r,e,t){return r instanceof Rl?N_(r,e):r instanceof Al?D_(r,e):t}function k_(r,e){return r instanceof Oc?function(s){return yf(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Vc extends ed{}class Rl extends ed{constructor(e){super(),this.elements=e}}function N_(r,e){const t=V_(e);for(const s of r.elements)t.some(o=>ts(o,s))||t.push(s);return{arrayValue:{values:t}}}class Al extends ed{constructor(e){super(),this.elements=e}}function D_(r,e){let t=V_(e);for(const s of r.elements)t=t.filter(o=>!ts(o,s));return{arrayValue:{values:t}}}class Oc extends ed{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function nv(r){return bt(r.integerValue||r.doubleValue)}function V_(r){return tp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function aR(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Rl&&o instanceof Rl||s instanceof Al&&o instanceof Al?sa(s.elements,o.elements,ts):s instanceof Oc&&o instanceof Oc?ts(s.Ee,o.Ee):s instanceof Vc&&o instanceof Vc}(r.transform,e.transform)}class lR{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class td{}function O_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new nd(r.key,Rn.none()):new Ml(r.key,r.data,Rn.none());{const t=r.data,s=Cn.empty();let o=new Ht(sn.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?s.delete(l):s.set(l,d),o=o.add(l)}return new Ri(r.key,s,new rr(o.toArray()),Rn.none())}}function uR(r,e,t){r instanceof Ml?function(o,l,d){const f=o.value.clone(),m=sv(o.fieldTransforms,l,d.transformResults);f.setAll(m),l.convertToFoundDocument(d.version,f).setHasCommittedMutations()}(r,e,t):r instanceof Ri?function(o,l,d){if(!yc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const f=sv(o.fieldTransforms,l,d.transformResults),m=l.data;m.setAll(L_(o)),m.setAll(f),l.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,t):function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function gl(r,e,t,s){return r instanceof Ml?function(l,d,f,m){if(!yc(l.precondition,d))return f;const v=l.value.clone(),T=iv(l.fieldTransforms,m,d);return v.setAll(T),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ri?function(l,d,f,m){if(!yc(l.precondition,d))return f;const v=iv(l.fieldTransforms,m,d),T=d.data;return T.setAll(L_(l)),T.setAll(v),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(r,e,t,s):function(l,d,f){return yc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f}(r,e,t)}function cR(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=k_(s.transform,o||null);l!=null&&(t===null&&(t=Cn.empty()),t.set(s.field,l))}return t||null}function rv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&sa(s,o,(l,d)=>aR(l,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ml extends td{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ri extends td{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function L_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function sv(r,e,t){const s=new Map;Ze(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,f=e.data.field(l.field);s.set(l.field,oR(d,f,t[o]))}return s}function iv(r,e,t){const s=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);s.set(o.field,iR(l,d,e))}return s}class nd extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j_ extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&uR(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=gl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=gl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=P_();return this.mutations.forEach(o=>{const l=e.get(o.key),d=l.overlayedDocument;let f=this.applyToLocalView(d,l.mutatedFields);f=t.has(o.key)?null:f;const m=O_(d,f);m!==null&&s.set(o.key,m),d.isValidDocument()||d.convertToNoDocument(Le.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qe())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,(t,s)=>rv(t,s))&&sa(this.baseMutations,e.baseMutations,(t,s)=>rv(t,s))}}class op{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ze(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=function(){return eR}();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,s[d].version);return new op(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Xe;function M_(r){switch(r){case Q.OK:return ke(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return ke(15467,{code:r})}}function F_(r){if(r===void 0)return Ss("GRPC error has no .code"),Q.UNKNOWN;switch(r){case Ot.OK:return Q.OK;case Ot.CANCELLED:return Q.CANCELLED;case Ot.UNKNOWN:return Q.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return Q.INTERNAL;case Ot.UNAVAILABLE:return Q.UNAVAILABLE;case Ot.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ot.NOT_FOUND:return Q.NOT_FOUND;case Ot.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ot.ABORTED:return Q.ABORTED;case Ot.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ot.DATA_LOSS:return Q.DATA_LOSS;default:return ke(39323,{code:r})}}(Xe=Ot||(Ot={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=new mi([4294967295,4294967295],0);function ov(r){const e=i_().encode(r),t=new J0;return t.update(e),new Uint8Array(t.digest())}function av(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new mi([t,s],0),new mi([o,l],0)]}class ap{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ol(`Invalid padding: ${t}`);if(s<0)throw new ol(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ol(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ol(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=mi.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(mi.fromNumber(s)));return o.compare(pR)===1&&(o=new mi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=ov(e),[s,o]=av(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(s,o,l);if(!this.ye(d))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new ap(l,o,t);return s.forEach(f=>d.insert(f)),d}insert(e){if(this.fe===0)return;const t=ov(e),[s,o]=av(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(s,o,l);this.we(d)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Fl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new rd(Le.min(),o,new xt(We),Cs(),Qe())}}class Fl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Fl(s,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class U_{constructor(e,t){this.targetId=e,this.De=t}}class z_{constructor(e,t,s=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class lv{constructor(){this.ve=0,this.Ce=uv(),this.Fe=on.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Qe(),t=Qe(),s=Qe();return this.Ce.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:ke(38017,{changeType:l})}}),new Fl(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=uv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class mR{constructor(e){this.We=e,this.Ge=new Map,this.ze=Cs(),this.je=lc(),this.Je=lc(),this.He=new xt(We)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:ke(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((s,o)=>{this.nt(o)&&t(o)})}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const l=o.target;if(_f(l))if(s===0){const d=new Re(l.path);this.Xe(t,d,Jt.newNoDocument(d,Le.min()))}else Ze(s===1,20013,{expectedCount:s});else{const d=this.ot(t);if(d!==s){const f=this._t(e),m=f?this.ut(f,e,d):1;if(m!==0){this.rt(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let d,f;try{d=Ti(s).toUint8Array()}catch(m){if(m instanceof c_)return _i("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new ap(d,o,l)}catch(m){return _i(m instanceof ol?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.fe===0?null:f}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const d=this.We.lt(),f=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)}),o}Pt(e){const t=new Map;this.Ge.forEach((l,d)=>{const f=this.st(d);if(f){if(l.current&&_f(f.target)){const m=new Re(f.target.path);this.Tt(m).has(d)||this.It(d,m)||this.Xe(d,m,Jt.newNoDocument(m,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}});let s=Qe();this.Je.forEach((l,d)=>{let f=!0;d.forEachWhile(m=>{const v=this.st(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.ze.forEach((l,d)=>d.setReadTime(e));const o=new rd(e,t,this.He,this.ze,s);return this.ze=Cs(),this.je=lc(),this.Je=lc(),this.He=new xt(We),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new lv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ht(We),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ht(We),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new lv),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function lc(){return new xt(Re.comparator)}function uv(){return new xt(Re.comparator)}const gR={asc:"ASCENDING",desc:"DESCENDING"},yR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vR={and:"AND",or:"OR"};class _R{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Tf(r,e){return r.useProto3Json||Ll(e)?e:{value:e}}function Lc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function wR(r,e){return Lc(r,e.toTimestamp())}function sr(r){return Ze(!!r,49232),Le.fromTimestamp(function(t){const s=Ei(t);return new gt(s.seconds,s.nanos)}(r))}function lp(r,e){return If(r,e).canonicalString()}function If(r,e){const t=function(o){return new ot(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function $_(r){const e=ot.fromString(r);return Ze(Q_(e),10190,{key:e.toString()}),e}function jc(r,e){return lp(r.databaseId,e.path)}function yl(r,e){const t=$_(e);if(t.get(1)!==r.databaseId.projectId)throw new pe(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new pe(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Re(W_(t))}function H_(r,e){return lp(r.databaseId,e)}function ER(r){const e=$_(r);return e.length===4?ot.emptyPath():W_(e)}function xf(r){return new ot(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function W_(r){return Ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function cv(r,e,t){return{name:jc(r,e),fields:t.value.mapValue.fields}}function TR(r,e){return"found"in e?function(s,o){Ze(!!o.found,43571),o.found.name,o.found.updateTime;const l=yl(s,o.found.name),d=sr(o.found.updateTime),f=o.found.createTime?sr(o.found.createTime):Le.min(),m=new Cn({mapValue:{fields:o.found.fields}});return Jt.newFoundDocument(l,d,f,m)}(r,e):"missing"in e?function(s,o){Ze(!!o.missing,3894),Ze(!!o.readTime,22933);const l=yl(s,o.missing),d=sr(o.readTime);return Jt.newNoDocument(l,d)}(r,e):ke(7234,{result:e})}function IR(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ke(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,T){return v.useProto3Json?(Ze(T===void 0||typeof T=="string",58123),on.fromBase64String(T||"")):(Ze(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),on.fromUint8Array(T||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&function(v){const T=v.code===void 0?Q.UNKNOWN:F_(v.code);return new pe(T,v.message||"")}(d);t=new z_(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=yl(r,s.document.name),l=sr(s.document.updateTime),d=s.document.createTime?sr(s.document.createTime):Le.min(),f=new Cn({mapValue:{fields:s.document.fields}}),m=Jt.newFoundDocument(o,l,d,f),v=s.targetIds||[],T=s.removedTargetIds||[];t=new vc(v,T,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=yl(r,s.document),l=s.readTime?sr(s.readTime):Le.min(),d=Jt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new vc([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=yl(r,s.document),l=s.removedTargetIds||[];t=new vc([],l,o,null)}else{if(!("filter"in e))return ke(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,d=new fR(o,l),f=s.targetId;t=new U_(f,d)}}return t}function q_(r,e){let t;if(e instanceof Ml)t={update:cv(r,e.key,e.value)};else if(e instanceof nd)t={delete:jc(r,e.key)};else if(e instanceof Ri)t={update:cv(r,e.key,e.data),updateMask:NR(e.fieldMask)};else{if(!(e instanceof j_))return ke(16599,{Rt:e.type});t={verify:jc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,d){const f=d.transform;if(f instanceof Vc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Rl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Al)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Oc)return{fieldPath:d.field.canonicalString(),increment:f.Ee};throw ke(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:wR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ke(27497)}(r,e.precondition)),t}function xR(r,e){return r&&r.length>0?(Ze(e!==void 0,14353),r.map(t=>function(o,l){let d=o.updateTime?sr(o.updateTime):sr(l);return d.isEqual(Le.min())&&(d=sr(l)),new lR(d,o.transformResults||[])}(t,e))):[]}function SR(r,e){return{documents:[H_(r,e.path)]}}function CR(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=H_(r,o);const l=function(v){if(v.length!==0)return K_(Lr.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const d=function(v){if(v.length!==0)return v.map(T=>function(x){return{field:Go(x.field),direction:PR(x.dir)}}(T))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Tf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{Vt:t,parent:o}}function RR(r){let e=ER(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ze(s===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=function(E){const x=G_(E);return x instanceof Lr&&w_(x)?x.getFilters():[x]}(t.where));let d=[];t.orderBy&&(d=function(E){return E.map(x=>function($){return new Dc(Ko($.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(x))}(t.orderBy));let f=null;t.limit&&(f=function(E){let x;return x=typeof E=="object"?E.value:E,Ll(x)?null:x}(t.limit));let m=null;t.startAt&&(m=function(E){const x=!!E.before,L=E.values||[];return new Nc(L,x)}(t.startAt));let v=null;return t.endAt&&(v=function(E){const x=!E.before,L=E.values||[];return new Nc(L,x)}(t.endAt)),QC(e,o,d,l,f,"F",m,v)}function AR(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function G_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Ko(t.unaryFilter.field);return jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ko(t.unaryFilter.field);return jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ko(t.unaryFilter.field);return jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ko(t.unaryFilter.field);return jt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}}(r):r.fieldFilter!==void 0?function(t){return jt.create(Ko(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Lr.create(t.compositeFilter.filters.map(s=>G_(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ke(1026)}}(t.compositeFilter.op))}(r):ke(30097,{filter:r})}function PR(r){return gR[r]}function bR(r){return yR[r]}function kR(r){return vR[r]}function Go(r){return{fieldPath:r.canonicalString()}}function Ko(r){return sn.fromServerFormat(r.fieldPath)}function K_(r){return r instanceof jt?function(t){if(t.op==="=="){if(Jy(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NAN"}};if(Yy(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Jy(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NAN"}};if(Yy(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(t.field),op:bR(t.op),value:t.value}}}(r):r instanceof Lr?function(t){const s=t.getFilters().map(o=>K_(o));return s.length===1?s[0]:{compositeFilter:{op:kR(t.op),filters:s}}}(r):ke(54877,{filter:r})}function NR(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Q_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t,s,o,l=Le.min(),d=Le.min(),f=on.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.gt=e}}function VR(r){const e=RR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ef(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.Dn=new LR}addToCollectionParentIndex(e,t){return this.Dn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(wi.min())}updateCollectionGroup(e,t,s){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class LR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ht(ot.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ht(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y_=41943040;class Hn{static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(Y_,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new aa(0)}static ur(){return new aa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="LruGarbageCollector",jR=1048576;function fv([r,e],[t,s]){const o=We(r,t);return o===0?We(e,s):o}class MR{constructor(e){this.Tr=e,this.buffer=new Ht(fv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();fv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ve(hv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ya(t)?ve(hv,"Ignoring IndexedDB error during garbage collection: ",t):await ga(t)}await this.Rr(3e5)})}}class UR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return J.resolve(Yc.ue);const s=new MR(t);return this.Vr.forEachTarget(e,o=>s.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>s.Er(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(dv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dv):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,l,d,f,m,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,d=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(s=E,f=Date.now(),this.removeTargets(e,s,t))).next(E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,s))).next(E=>(v=Date.now(),Wo()<=Ke.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(f-d)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(v-m)+`ms
Total Duration: ${v-T}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E})))}}function zR(r,e){return new UR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.changes=new ao(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?J.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&gl(s.mutation,o,rr.empty(),gt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Qe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Qe()){const o=Ji();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let d=il();return l.forEach((f,m)=>{d=d.insert(f,m.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const s=Ji();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Qe()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((d,f)=>{t.set(d,f)})})}computeViews(e,t,s,o){let l=Cs();const d=ml(),f=function(){return ml()}();return t.forEach((m,v)=>{const T=s.get(v.key);o.has(v.key)&&(T===void 0||T.mutation instanceof Ri)?l=l.insert(v.key,v):T!==void 0?(d.set(v.key,T.mutation.getFieldMask()),gl(T.mutation,v,T.mutation.getFieldMask(),gt.now())):d.set(v.key,rr.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((v,T)=>d.set(v,T)),t.forEach((v,T)=>{var E;return f.set(v,new $R(T,(E=d.get(v))!==null&&E!==void 0?E:null))}),f))}recalculateAndSaveOverlays(e,t){const s=ml();let o=new xt((d,f)=>d-f),l=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const f of d)f.keys().forEach(m=>{const v=t.get(m);if(v===null)return;let T=s.get(m)||rr.empty();T=f.applyToLocalView(v,T),s.set(m,T);const E=(o.get(f.batchId)||Qe()).add(m);o=o.insert(f.batchId,E)})}).next(()=>{const d=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,T=m.value,E=P_();T.forEach(x=>{if(!l.has(x)){const L=O_(t.get(x),s.get(x));L!==null&&E.set(x,L),l=l.add(x)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,E))}return J.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(d){return Re.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):x_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):J.resolve(Ji());let f=Il,m=l;return d.next(v=>J.forEach(v,(T,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(T)?J.resolve():this.remoteDocumentCache.getEntry(e,T).next(x=>{m=m.insert(T,x)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,m,v,Qe())).next(T=>({batchId:f,changes:A_(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next(s=>{let o=il();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let d=il();return this.indexManager.getCollectionParents(e,l).next(f=>J.forEach(f,m=>{const v=function(E,x){return new jl(x,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next(T=>{T.forEach((E,x)=>{d=d.insert(E,x)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(d=>{l.forEach((m,v)=>{const T=v.getKey();d.get(T)===null&&(d=d.insert(T,Jt.newInvalidDocument(T)))});let f=il();return d.forEach((m,v)=>{const T=l.get(m);T!==void 0&&gl(T.mutation,v,rr.empty(),gt.now()),Zc(t,v)&&(f=f.insert(m,v))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return J.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(o){return{id:o.id,version:o.version,createTime:sr(o.createTime)}}(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(o){return{name:o.name,query:VR(o.bundledQuery),readTime:sr(o.readTime)}}(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.overlays=new xt(Re.comparator),this.kr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ji();return J.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.wt(e,t,l)}),J.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(s)),J.resolve()}getOverlaysForCollection(e,t,s){const o=Ji(),l=t.length+1,d=new Re(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>s&&o.set(m.getKey(),m)}return J.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new xt((v,T)=>v-T);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let T=l.get(v.largestBatchId);T===null&&(T=Ji(),l=l.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const f=Ji(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,T)=>f.set(v,T)),!(f.size()>=o)););return J.resolve(f)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new hR(t,s));let l=this.kr.get(t);l===void 0&&(l=Qe(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.qr=new Ht(Yt.Qr),this.$r=new Ht(Yt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new Yt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Wr(new Yt(e,t))}Gr(e,t){e.forEach(s=>this.removeReference(s,t))}zr(e){const t=new Re(new ot([])),s=new Yt(t,e),o=new Yt(t,e+1),l=[];return this.$r.forEachInRange([s,o],d=>{this.Wr(d),l.push(d.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Re(new ot([])),s=new Yt(t,e),o=new Yt(t,e+1);let l=Qe();return this.$r.forEachInRange([s,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new Yt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Yt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Re.comparator(e.key,t.key)||We(e.Hr,t.Hr)}static Ur(e,t){return We(e.Hr,t.Hr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ht(Yt.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new dR(l,t,s,o);this.mutationQueue.push(d);for(const f of o)this.Yr=this.Yr.add(new Yt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return J.resolve(d)}lookupMutationBatch(e,t){return J.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return J.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Zf:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Yt(t,0),o=new Yt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,o],d=>{const f=this.Zr(d.Hr);l.push(f)}),J.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ht(We);return t.forEach(o=>{const l=new Yt(o,0),d=new Yt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],f=>{s=s.add(f.Hr)})}),J.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Re.isDocumentKey(l)||(l=l.child(""));const d=new Yt(new Re(l),0);let f=new Ht(We);return this.Yr.forEachWhile(m=>{const v=m.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(f=f.add(m.Hr)),!0)},d),J.resolve(this.ei(f))}ei(e){const t=[];return e.forEach(s=>{const o=this.Zr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ze(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return J.forEach(t.mutations,o=>{const l=new Yt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,t){const s=new Yt(t,0),o=this.Yr.firstAfterOrEqual(s);return J.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.ni=e,this.docs=function(){return new xt(Re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,d=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return J.resolve(s?s.document.mutableCopy():Jt.newInvalidDocument(t))}getEntries(e,t){let s=Cs();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Jt.newInvalidDocument(o))}),J.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Cs();const d=t.path,f=new Re(d.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:T}}=m.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||RC(CC(T),s)<=0||(o.has(T.key)||Zc(t,T))&&(l=l.insert(T.key,T.mutableCopy()))}return J.resolve(l)}getAllFromCollectionGroup(e,t,s,o){ke(9500)}ri(e,t){return J.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new YR(this)}getSize(e){return J.resolve(this.size)}}class YR extends BR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)}),J.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.persistence=e,this.ii=new ao(t=>np(t),rp),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.si=0,this.oi=new up,this.targetCount=0,this._i=aa.ar()}forEachTarget(e,t){return this.ii.forEach((s,o)=>t(o)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),J.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new aa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.hr(t),J.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ii.forEach((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),J.waitFor(l).next(()=>o)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return J.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),J.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),J.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return J.resolve(s)}containsKey(e,t){return J.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,t){this.ai={},this.overlays={},this.ui=new Yc(0),this.ci=!1,this.ci=!0,this.li=new GR,this.referenceDelegate=e(this),this.hi=new JR(this),this.indexManager=new OR,this.remoteDocumentCache=function(o){return new QR(o)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new DR(t),this.Ti=new WR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new KR(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){ve("MemoryPersistence","Starting transaction:",e);const o=new XR(this.ui.next());return this.referenceDelegate.Ii(),s(o).next(l=>this.referenceDelegate.di(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ei(e,t){return J.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,t)))}}class XR extends PC{constructor(e){super(),this.currentSequenceNumber=e}}class cp{constructor(e){this.persistence=e,this.Ai=new up,this.Ri=null}static Vi(e){return new cp(e)}get mi(){if(this.Ri)return this.Ri;throw ke(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),J.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(o=>this.mi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.mi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,s=>{const o=Re.fromPath(s);return this.fi(e,o).next(l=>{l||t.removeEntry(o,Le.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return J.or([()=>J.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Mc{constructor(e,t){this.persistence=e,this.gi=new ao(s=>NC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=zR(this,t)}static Vi(e,t){return new Mc(e,t)}Ii(){}di(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}yr(e){let t=0;return this.gr(e,s=>{t++}).next(()=>t)}gr(e,t){return J.forEach(this.gi,(s,o)=>this.Sr(e,s,o).next(l=>l?J.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,d=>this.Sr(e,d,t).next(f=>{f||(s++,l.removeEntry(d,Le.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mc(e.data.value)),t}Sr(e,t,s){return J.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return J.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=Qe(),o=Qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new dp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return fI()?8:bC(gn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ps(e,t).next(d=>{l.result=d}).next(()=>{if(!l.result)return this.ys(e,t,o,s).next(d=>{l.result=d})}).next(()=>{if(l.result)return;const d=new ZR;return this.ws(e,t,d).next(f=>{if(l.result=f,this.Rs)return this.Ss(e,t,d,f.size)})}).next(()=>l.result)}Ss(e,t,s,o){return s.documentReadCount<this.Vs?(Wo()<=Ke.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(Wo()<=Ke.DEBUG&&ve("QueryEngine","Query:",qo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(Wo()<=Ke.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xr(t))):J.resolve())}ps(e,t){if(tv(t))return J.resolve(null);let s=Xr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Ef(t,null,"F"),s=Xr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const d=Qe(...l);return this.gs.getDocuments(e,d).next(f=>this.indexManager.getMinOffset(e,s).next(m=>{const v=this.bs(t,f);return this.Ds(t,v,d,m.readTime)?this.ps(e,Ef(t,null,"F")):this.vs(e,v,t,m)}))})))}ys(e,t,s,o){return tv(t)||o.isEqual(Le.min())?J.resolve(null):this.gs.getDocuments(e,s).next(l=>{const d=this.bs(t,l);return this.Ds(t,d,s,o)?J.resolve(null):(Wo()<=Ke.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),qo(t)),this.vs(e,d,t,SC(o,Il)).next(f=>f))})}bs(e,t){let s=new Ht(C_(e));return t.forEach((o,l)=>{Zc(e,l)&&(s=s.add(l))}),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,s){return Wo()<=Ke.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",qo(t)),this.gs.getDocumentsMatchingQuery(e,t,wi.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(d=>{l=l.insert(d.key,d)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="LocalStore",tA=3e8;class nA{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new xt(We),this.Ms=new ao(l=>np(l),rp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function rA(r,e,t,s){return new nA(r,e,t,s)}async function X_(r,e){const t=Fe(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const d=[],f=[];let m=Qe();for(const v of o){d.push(v.batchId);for(const T of v.mutations)m=m.add(T.key)}for(const v of l){f.push(v.batchId);for(const T of v.mutations)m=m.add(T.key)}return t.localDocuments.getDocuments(s,m).next(v=>({Bs:v,removedBatchIds:d,addedBatchIds:f}))})})}function sA(r,e){const t=Fe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(f,m,v,T){const E=v.batch,x=E.keys();let L=J.resolve();return x.forEach($=>{L=L.next(()=>T.getEntry(m,$)).next(H=>{const M=v.docVersions.get($);Ze(M!==null,48541),H.version.compareTo(M)<0&&(E.applyToRemoteDocument(H,v),H.isValidDocument()&&(H.setReadTime(v.commitVersion),T.addEntry(H)))})}),L.next(()=>f.mutationQueue.removeMutationBatch(m,E))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let m=Qe();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(m=m.add(f.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function Z_(r){const e=Fe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function iA(r,e){const t=Fe(r),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach((T,E)=>{const x=o.get(E);if(!x)return;f.push(t.hi.removeMatchingKeys(l,T.removedDocuments,E).next(()=>t.hi.addMatchingKeys(l,T.addedDocuments,E)));let L=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?L=L.withResumeToken(on.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):T.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(T.resumeToken,s)),o=o.insert(E,L),function(H,M,ee){return H.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=tA?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0}(x,L,T)&&f.push(t.hi.updateTargetData(l,L))});let m=Cs(),v=Qe();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,T))}),f.push(oA(l,d,e.documentUpdates).next(T=>{m=T.Ls,v=T.ks})),!s.isEqual(Le.min())){const T=t.hi.getLastRemoteSnapshotVersion(l).next(E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(T)}return J.waitFor(f).next(()=>d.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,v)).next(()=>m)}).then(l=>(t.Fs=o,l))}function oA(r,e,t){let s=Qe(),o=Qe();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let d=Cs();return t.forEach((f,m)=>{const v=l.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(Le.min())?(e.removeEntry(f,m.readTime),d=d.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),d=d.insert(f,m)):ve(hp,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{Ls:d,ks:o}})}function aA(r,e){const t=Fe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Zf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function lA(r,e){const t=Fe(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.hi.getTargetData(s,e).next(l=>l?(o=l,J.resolve(o)):t.hi.allocateTargetId(s).next(d=>(o=new ci(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s})}async function Sf(r,e,t){const s=Fe(r),o=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!ya(d))throw d;ve(hp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function pv(r,e,t){const s=Fe(r);let o=Le.min(),l=Qe();return s.persistence.runTransaction("Execute query","readwrite",d=>function(m,v,T){const E=Fe(m),x=E.Ms.get(T);return x!==void 0?J.resolve(E.Fs.get(x)):E.hi.getTargetData(v,T)}(s,d,Xr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(d,f.targetId).next(m=>{l=m})}).next(()=>s.Cs.getDocumentsMatchingQuery(d,e,t?o:Le.min(),t?l:Qe())).next(f=>(uA(s,JC(e),f),{documents:f,qs:l})))}function uA(r,e,t){let s=r.xs.get(e)||Le.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.xs.set(e,s)}class mv{constructor(){this.activeTargetIds=rR()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cA{constructor(){this.Fo=new mv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new mv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="ConnectivityMonitor";class yv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ve(gv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ve(gv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=null;function Cf(){return uc===null?uc=function(){return 268435456+Math.round(2147483648*Math.random())}():uc++,"0x"+uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="RestConnection",hA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fA{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===bc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const d=Cf(),f=this.Go(e,t.toUriEncodedString());ve(Zh,`Sending RPC '${e}' ${d}:`,f,s);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,o,l);const{host:v}=new URL(f),T=da(v);return this.jo(e,f,m,s,T).then(E=>(ve(Zh,`Received RPC '${e}' ${d}: `,E),E),E=>{throw _i(Zh,`RPC '${e}' ${d} failed with error: `,E,"url: ",f,"request:",s),E})}Jo(e,t,s,o,l,d){return this.Wo(e,t,s,o,l)}zo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ma}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),s&&s.headers.forEach((o,l)=>e[l]=o)}Go(e,t){const s=hA[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class mA extends fA{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,l){const d=Cf();return new Promise((f,m)=>{const v=new X0;v.setWithCredentials(!0),v.listenOnce(Z0.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case pc.NO_ERROR:const E=v.getResponseJson();ve(pn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),f(E);break;case pc.TIMEOUT:ve(pn,`RPC '${e}' ${d} timed out`),m(new pe(Q.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:const x=v.getStatus();if(ve(pn,`RPC '${e}' ${d} failed with status:`,x,"response text:",v.getResponseText()),x>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const $=L==null?void 0:L.error;if($&&$.status&&$.message){const H=function(ee){const re=ee.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(re)>=0?re:Q.UNKNOWN}($.status);m(new pe(H,$.message))}else m(new pe(Q.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new pe(Q.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{ve(pn,`RPC '${e}' ${d} completed.`)}});const T=JSON.stringify(o);ve(pn,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",T,s,15)})}P_(e,t,s){const o=Cf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=n_(),f=t_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const T=l.join("");ve(pn,`Creating RPC '${e}' stream ${o}: ${T}`,m);const E=d.createWebChannel(T,m);this.T_(E);let x=!1,L=!1;const $=new pA({Ho:M=>{L?ve(pn,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(x||(ve(pn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),x=!0),ve(pn,`RPC '${e}' stream ${o} sending:`,M),E.send(M))},Yo:()=>E.close()}),H=(M,ee,re)=>{M.listen(ee,Y=>{try{re(Y)}catch(ce){setTimeout(()=>{throw ce},0)}})};return H(E,sl.EventType.OPEN,()=>{L||(ve(pn,`RPC '${e}' stream ${o} transport opened.`),$.s_())}),H(E,sl.EventType.CLOSE,()=>{L||(L=!0,ve(pn,`RPC '${e}' stream ${o} transport closed`),$.__(),this.I_(E))}),H(E,sl.EventType.ERROR,M=>{L||(L=!0,_i(pn,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),$.__(new pe(Q.UNAVAILABLE,"The operation could not be completed")))}),H(E,sl.EventType.MESSAGE,M=>{var ee;if(!L){const re=M.data[0];Ze(!!re,16349);const Y=re,ce=(Y==null?void 0:Y.error)||((ee=Y[0])===null||ee===void 0?void 0:ee.error);if(ce){ve(pn,`RPC '${e}' stream ${o} received error:`,ce);const le=ce.status;let de=function(S){const b=Ot[S];if(b!==void 0)return F_(b)}(le),N=ce.message;de===void 0&&(de=Q.INTERNAL,N="Unknown error status: "+le+" with message "+ce.message),L=!0,$.__(new pe(de,N)),E.close()}else ve(pn,`RPC '${e}' stream ${o} received:`,re),$.a_(re)}}),H(f,e_.STAT_EVENT,M=>{M.stat===pf.PROXY?ve(pn,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===pf.NOPROXY&&ve(pn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{$.o_()},0),$}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(r){return new _R(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="PersistentStream";class ew{constructor(e,t,s,o,l,d,f,m){this.Fi=e,this.w_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new fp(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(Ss(t.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.b_===t&&this.W_(s,o)},s=>{e(()=>{const o=new pe(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)})})}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{s(()=>this.G_(o))}),this.stream.onMessage(o=>{s(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ve(vv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ve(vv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gA extends ew{constructor(e,t,s,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=IR(this.serializer,e),s=function(l){if(!("targetChange"in l))return Le.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Le.min():d.readTime?sr(d.readTime):Le.min()}(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=xf(this.serializer),t.addTarget=function(l,d){let f;const m=d.target;if(f=_f(m)?{documents:SR(l,m)}:{query:CR(l,m).Vt},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=B_(l,d.resumeToken);const v=Tf(l,d.expectedCount);v!==null&&(f.expectedCount=v)}else if(d.snapshotVersion.compareTo(Le.min())>0){f.readTime=Lc(l,d.snapshotVersion.toTimestamp());const v=Tf(l,d.expectedCount);v!==null&&(f.expectedCount=v)}return f}(this.serializer,e);const s=AR(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=xf(this.serializer),t.removeTarget=e,this.k_(t)}}class yA extends ew{constructor(e,t,s,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=xR(e.writeResults,e.commitTime),s=sr(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=xf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>q_(this.serializer,s))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{}class _A extends vA{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new pe(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Wo(e,If(t,s),o,l,d)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(Q.UNKNOWN,l.toString())})}Jo(e,t,s,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,f])=>this.connection.Jo(e,If(t,s),o,d,f,l)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pe(Q.UNKNOWN,d.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class wA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ss(t),this._a=!1):ve("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="RemoteStore";class EA{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(d=>{s.enqueueAndForget(async()=>{lo(this)&&(ve(no,"Restarting streams for network reachability change."),await async function(m){const v=Fe(m);v.Ia.add(4),await Ul(v),v.Aa.set("Unknown"),v.Ia.delete(4),await id(v)}(this))})}),this.Aa=new wA(s,o)}}async function id(r){if(lo(r))for(const e of r.da)await e(!0)}async function Ul(r){for(const e of r.da)await e(!1)}function tw(r,e){const t=Fe(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),yp(t)?gp(t):va(t).x_()&&mp(t,e))}function pp(r,e){const t=Fe(r),s=va(t);t.Ta.delete(e),s.x_()&&nw(t,e),t.Ta.size===0&&(s.x_()?s.B_():lo(t)&&t.Aa.set("Unknown"))}function mp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}va(r).H_(e)}function nw(r,e){r.Ra.$e(e),va(r).Y_(e)}function gp(r){r.Ra=new mR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),va(r).start(),r.Aa.aa()}function yp(r){return lo(r)&&!va(r).M_()&&r.Ta.size>0}function lo(r){return Fe(r).Ia.size===0}function rw(r){r.Ra=void 0}async function TA(r){r.Aa.set("Online")}async function IA(r){r.Ta.forEach((e,t)=>{mp(r,e)})}async function xA(r,e){rw(r),yp(r)?(r.Aa.la(e),gp(r)):r.Aa.set("Unknown")}async function SA(r,e,t){if(r.Aa.set("Online"),e instanceof z_&&e.state===2&&e.cause)try{await async function(o,l){const d=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,d),o.Ta.delete(f),o.Ra.removeTarget(f))}(r,e)}catch(s){ve(no,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fc(r,s)}else if(e instanceof vc?r.Ra.Ye(e):e instanceof U_?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Le.min()))try{const s=await Z_(r.localStore);t.compareTo(s)>=0&&await function(l,d){const f=l.Ra.Pt(d);return f.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const T=l.Ta.get(v);T&&l.Ta.set(v,T.withResumeToken(m.resumeToken,d))}}),f.targetMismatches.forEach((m,v)=>{const T=l.Ta.get(m);if(!T)return;l.Ta.set(m,T.withResumeToken(on.EMPTY_BYTE_STRING,T.snapshotVersion)),nw(l,m);const E=new ci(T.target,m,v,T.sequenceNumber);mp(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){ve(no,"Failed to raise snapshot:",s),await Fc(r,s)}}async function Fc(r,e,t){if(!ya(e))throw e;r.Ia.add(1),await Ul(r),r.Aa.set("Offline"),t||(t=()=>Z_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ve(no,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await id(r)})}function sw(r,e){return e().catch(t=>Fc(r,t,e))}async function od(r){const e=Fe(r),t=xi(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Zf;for(;CA(e);)try{const o=await aA(e.localStore,s);if(o===null){e.Pa.length===0&&t.B_();break}s=o.batchId,RA(e,o)}catch(o){await Fc(e,o)}iw(e)&&ow(e)}function CA(r){return lo(r)&&r.Pa.length<10}function RA(r,e){r.Pa.push(e);const t=xi(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function iw(r){return lo(r)&&!xi(r).M_()&&r.Pa.length>0}function ow(r){xi(r).start()}async function AA(r){xi(r).na()}async function PA(r){const e=xi(r);for(const t of r.Pa)e.X_(t.mutations)}async function bA(r,e,t){const s=r.Pa.shift(),o=op.from(s,e,t);await sw(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await od(r)}async function kA(r,e){e&&xi(r).Z_&&await async function(s,o){if(function(d){return M_(d)&&d!==Q.ABORTED}(o.code)){const l=s.Pa.shift();xi(s).N_(),await sw(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await od(s)}}(r,e),iw(r)&&ow(r)}async function _v(r,e){const t=Fe(r);t.asyncQueue.verifyOperationInProgress(),ve(no,"RemoteStore received new credentials");const s=lo(t);t.Ia.add(3),await Ul(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await id(t)}async function NA(r,e){const t=Fe(r);e?(t.Ia.delete(2),await id(t)):e||(t.Ia.add(2),await Ul(t),t.Aa.set("Unknown"))}function va(r){return r.Va||(r.Va=function(t,s,o){const l=Fe(t);return l.ia(),new gA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:TA.bind(null,r),e_:IA.bind(null,r),n_:xA.bind(null,r),J_:SA.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),yp(r)?gp(r):r.Aa.set("Unknown")):(await r.Va.stop(),rw(r))})),r.Va}function xi(r){return r.ma||(r.ma=function(t,s,o){const l=Fe(t);return l.ia(),new yA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:AA.bind(null,r),n_:kA.bind(null,r),ea:PA.bind(null,r),ta:bA.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await od(r)):(await r.ma.stop(),r.Pa.length>0&&(ve(no,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const d=Date.now()+s,f=new vp(e,t,d,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _p(r,e){if(Ss("AsyncQueue",`${e}: ${r}`),ya(r))return new pe(Q.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{static emptySet(e){return new ta(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Re.comparator(t.key,s.key):(t,s)=>Re.comparator(t.key,s.key),this.keyedMap=il(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ta)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ta;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(){this.fa=new xt(Re.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ke(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,s)=>{e.push(s)}),e}}class la{constructor(e,t,s,o,l,d,f,m,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,l){const d=[];return t.forEach(f=>{d.push({type:0,doc:f})}),new la(e,t,ta.emptySet(t),d,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class VA{constructor(){this.queries=Ev(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=Fe(t),l=o.queries;o.queries=Ev(),l.forEach((d,f)=>{for(const m of f.wa)m.onError(s)})})(this,new pe(Q.ABORTED,"Firestore shutting down"))}}function Ev(){return new ao(r=>S_(r),Xc)}async function aw(r,e){const t=Fe(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(s=2):(l=new DA,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const f=_p(d,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&wp(t)}async function lw(r,e){const t=Fe(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function OA(r,e){const t=Fe(r);let s=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const f of d.wa)f.Ca(o)&&(s=!0);d.ya=o}}s&&wp(t)}function LA(r,e,t){const s=Fe(r),o=s.queries.get(e);if(o)for(const l of o.wa)l.onError(t);s.queries.delete(e)}function wp(r){r.Da.forEach(e=>{e.next()})}var Rf,Tv;(Tv=Rf||(Rf={})).Fa="default",Tv.Cache="cache";class uw{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new la(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=la.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Rf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.key=e}}class dw{constructor(e){this.key=e}}class jA{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Qe(),this.mutatedKeys=Qe(),this.Xa=C_(e),this.eu=new ta(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new wv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,E)=>{const x=o.get(T),L=Zc(this.query,E)?E:null,$=!!x&&this.mutatedKeys.has(x.key),H=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let M=!1;x&&L?x.data.isEqual(L.data)?$!==H&&(s.track({type:3,doc:L}),M=!0):this.iu(x,L)||(s.track({type:2,doc:L}),M=!0,(m&&this.Xa(L,m)>0||v&&this.Xa(L,v)<0)&&(f=!0)):!x&&L?(s.track({type:0,doc:L}),M=!0):x&&!L&&(s.track({type:1,doc:x}),M=!0,(m||v)&&(f=!0)),M&&(L?(d=d.add(L),l=H?l.add(T):l.delete(T)):(d=d.delete(T),l=l.delete(T)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),l=l.delete(T.key),s.track({type:1,doc:T})}return{eu:d,ru:s,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort((T,E)=>function(L,$){const H=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{At:M})}};return H(L)-H($)}(T.type,E.type)||this.Xa(T.doc,E.doc)),this.su(s),o=o!=null&&o;const f=t&&!o?this.ou():[],m=this.Za.size===0&&this.current&&!o?1:0,v=m!==this.Ya;return this.Ya=m,d.length!==0||v?{snapshot:new la(this.query,e.eu,l,d,e.mutatedKeys,m===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new wv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Qe(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const t=[];return e.forEach(s=>{this.Za.has(s)||t.push(new dw(s))}),this.Za.forEach(s=>{e.has(s)||t.push(new cw(s))}),t}uu(e){this.Ha=e.qs,this.Za=Qe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return la.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ep="SyncEngine";class MA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class FA{constructor(e){this.key=e,this.lu=!1}}class UA{constructor(e,t,s,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new ao(f=>S_(f),Xc),this.Tu=new Map,this.Iu=new Set,this.du=new xt(Re.comparator),this.Eu=new Map,this.Au=new up,this.Ru={},this.Vu=new Map,this.mu=aa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function zA(r,e,t=!0){const s=yw(r);let o;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await hw(s,e,t,!0),o}async function BA(r,e){const t=yw(r);await hw(t,e,!0,!1)}async function hw(r,e,t,s){const o=await lA(r.localStore,Xr(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await $A(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&tw(r.remoteStore,o),f}async function $A(r,e,t,s,o){r.gu=(E,x,L)=>async function(H,M,ee,re){let Y=M.view.nu(ee);Y.Ds&&(Y=await pv(H.localStore,M.query,!1).then(({documents:N})=>M.view.nu(N,Y)));const ce=re&&re.targetChanges.get(M.targetId),le=re&&re.targetMismatches.get(M.targetId)!=null,de=M.view.applyChanges(Y,H.isPrimaryClient,ce,le);return xv(H,M.targetId,de._u),de.snapshot}(r,E,x,L);const l=await pv(r.localStore,e,!0),d=new jA(e,l.qs),f=d.nu(l.documents),m=Fl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),v=d.applyChanges(f,r.isPrimaryClient,m);xv(r,t,v._u);const T=new MA(e,t,d);return r.Pu.set(e,T),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function HA(r,e,t){const s=Fe(r),o=s.Pu.get(e),l=s.Tu.get(o.targetId);if(l.length>1)return s.Tu.set(o.targetId,l.filter(d=>!Xc(d,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Sf(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&pp(s.remoteStore,o.targetId),Af(s,o.targetId)}).catch(ga)):(Af(s,o.targetId),await Sf(s.localStore,o.targetId,!0))}async function WA(r,e){const t=Fe(r),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),pp(t.remoteStore,s.targetId))}async function qA(r,e,t){const s=ZA(r);try{const o=await function(d,f){const m=Fe(d),v=gt.now(),T=f.reduce((L,$)=>L.add($.key),Qe());let E,x;return m.persistence.runTransaction("Locally write mutations","readwrite",L=>{let $=Cs(),H=Qe();return m.Os.getEntries(L,T).next(M=>{$=M,$.forEach((ee,re)=>{re.isValidDocument()||(H=H.add(ee))})}).next(()=>m.localDocuments.getOverlayedDocuments(L,$)).next(M=>{E=M;const ee=[];for(const re of f){const Y=cR(re,E.get(re.key).overlayedDocument);Y!=null&&ee.push(new Ri(re.key,Y,y_(Y.value.mapValue),Rn.exists(!0)))}return m.mutationQueue.addMutationBatch(L,v,ee,f)}).next(M=>{x=M;const ee=M.applyToLocalDocumentSet(E,H);return m.documentOverlayCache.saveOverlays(L,M.batchId,ee)})}).then(()=>({batchId:x.batchId,changes:A_(E)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,f,m){let v=d.Ru[d.currentUser.toKey()];v||(v=new xt(We)),v=v.insert(f,m),d.Ru[d.currentUser.toKey()]=v}(s,o.batchId,t),await zl(s,o.changes),await od(s.remoteStore)}catch(o){const l=_p(o,"Failed to persist write");t.reject(l)}}async function fw(r,e){const t=Fe(r);try{const s=await iA(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.Eu.get(l);d&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?Ze(d.lu,14607):o.removedDocuments.size>0&&(Ze(d.lu,42227),d.lu=!1))}),await zl(t,s,e)}catch(s){await ga(s)}}function Iv(r,e,t){const s=Fe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach((l,d)=>{const f=d.view.va(e);f.snapshot&&o.push(f.snapshot)}),function(d,f){const m=Fe(d);m.onlineState=f;let v=!1;m.queries.forEach((T,E)=>{for(const x of E.wa)x.va(f)&&(v=!0)}),v&&wp(m)}(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function GA(r,e,t){const s=Fe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let d=new xt(Re.comparator);d=d.insert(l,Jt.newNoDocument(l,Le.min()));const f=Qe().add(l),m=new rd(Le.min(),new Map,new xt(We),d,f);await fw(s,m),s.du=s.du.remove(l),s.Eu.delete(e),Tp(s)}else await Sf(s.localStore,e,!1).then(()=>Af(s,e,t)).catch(ga)}async function KA(r,e){const t=Fe(r),s=e.batch.batchId;try{const o=await sA(t.localStore,e);mw(t,s,null),pw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await zl(t,o)}catch(o){await ga(o)}}async function QA(r,e,t){const s=Fe(r);try{const o=await function(d,f){const m=Fe(d);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let T;return m.mutationQueue.lookupMutationBatch(v,f).next(E=>(Ze(E!==null,37113),T=E.keys(),m.mutationQueue.removeMutationBatch(v,E))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,T,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,T)).next(()=>m.localDocuments.getDocuments(v,T))})}(s.localStore,e);mw(s,e,t),pw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await zl(s,o)}catch(o){await ga(o)}}function pw(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function mw(r,e,t){const s=Fe(r);let o=s.Ru[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function Af(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Tu.get(e))r.Pu.delete(s),t&&r.hu.pu(s,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(s=>{r.Au.containsKey(s)||gw(r,s)})}function gw(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(pp(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),Tp(r))}function xv(r,e,t){for(const s of t)s instanceof cw?(r.Au.addReference(s.key,e),YA(r,s)):s instanceof dw?(ve(Ep,"Document no longer in limbo: "+s.key),r.Au.removeReference(s.key,e),r.Au.containsKey(s.key)||gw(r,s.key)):ke(19791,{yu:s})}function YA(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Iu.has(s)||(ve(Ep,"New document in limbo: "+t),r.Iu.add(s),Tp(r))}function Tp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Re(ot.fromString(e)),s=r.mu.next();r.Eu.set(s,new FA(t)),r.du=r.du.insert(t,s),tw(r.remoteStore,new ci(Xr(sp(t.path)),s,"TargetPurposeLimboResolution",Yc.ue))}}async function zl(r,e,t){const s=Fe(r),o=[],l=[],d=[];s.Pu.isEmpty()||(s.Pu.forEach((f,m)=>{d.push(s.gu(m,e,t).then(v=>{var T;if((v||t)&&s.isPrimaryClient){const E=v?!v.fromCache:(T=t==null?void 0:t.targetChanges.get(m.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(v){o.push(v);const E=dp.Es(m.targetId,v);l.push(E)}}))}),await Promise.all(d),s.hu.J_(o),await async function(m,v){const T=Fe(m);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>J.forEach(v,x=>J.forEach(x.Is,L=>T.persistence.referenceDelegate.addReference(E,x.targetId,L)).next(()=>J.forEach(x.ds,L=>T.persistence.referenceDelegate.removeReference(E,x.targetId,L)))))}catch(E){if(!ya(E))throw E;ve(hp,"Failed to update sequence numbers: "+E)}for(const E of v){const x=E.targetId;if(!E.fromCache){const L=T.Fs.get(x),$=L.snapshotVersion,H=L.withLastLimboFreeSnapshotVersion($);T.Fs=T.Fs.insert(x,H)}}}(s.localStore,l))}async function JA(r,e){const t=Fe(r);if(!t.currentUser.isEqual(e)){ve(Ep,"User change. New user:",e.toKey());const s=await X_(t.localStore,e);t.currentUser=e,function(l,d){l.Vu.forEach(f=>{f.forEach(m=>{m.reject(new pe(Q.CANCELLED,d))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await zl(t,s.Bs)}}function XA(r,e){const t=Fe(r),s=t.Eu.get(e);if(s&&s.lu)return Qe().add(s.key);{let o=Qe();const l=t.Tu.get(e);if(!l)return o;for(const d of l){const f=t.Pu.get(d);o=o.unionWith(f.view.tu)}return o}}function yw(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=fw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GA.bind(null,e),e.hu.J_=OA.bind(null,e.eventManager),e.hu.pu=LA.bind(null,e.eventManager),e}function ZA(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QA.bind(null,e),e}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return rA(this.persistence,new eA,e.initialUser,this.serializer)}Du(e){return new J_(cp.Vi,this.serializer)}bu(e){return new cA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class eP extends Uc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ze(this.persistence.referenceDelegate instanceof Mc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new FR(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new J_(s=>Mc.Vi(s,t),this.serializer)}}class Pf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Iv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=JA.bind(null,this.syncEngine),await NA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VA}()}createDatastore(e){const t=sd(e.databaseInfo.databaseId),s=function(l){return new mA(l)}(e.databaseInfo);return function(l,d,f,m){return new _A(l,d,f,m)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,d,f){return new EA(s,o,l,d,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Iv(this.syncEngine,t,0),function(){return yv.C()?new yv:new dA}())}createSyncEngine(e,t){return function(o,l,d,f,m,v,T){const E=new UA(o,l,d,f,m,v);return T&&(E.fu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Fe(o);ve(no,"RemoteStore shutting down."),l.Ia.add(5),await Ul(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Pf.provider={build:()=>new Pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(o,l){const d=Fe(o),f={documents:l.map(E=>jc(d.serializer,E))},m=await d.Jo("BatchGetDocuments",d.serializer.databaseId,ot.emptyPath(),f,l.length),v=new Map;m.forEach(E=>{const x=TR(d.serializer,E);v.set(x.key.toString(),x)});const T=[];return l.forEach(E=>{const x=v.get(E.toString());Ze(!!x,55234,{key:E}),T.push(x)}),T}(this.datastore,e);return t.forEach(s=>this.recordVersion(s)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new nd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,s)=>{const o=Re.fromPath(s);this.mutations.push(new j_(o,this.precondition(o)))}),await async function(s,o){const l=Fe(s),d={writes:o.map(f=>q_(l.serializer,f))};await l.Wo("Commit",l.serializer.databaseId,ot.emptyPath(),d)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ke(50498,{Wu:e.constructor.name});t=Le.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new pe(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Le.min())?Rn.exists(!1):Rn.updateTime(t):Rn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Le.min()))throw new pe(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(t)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,t,s,o,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=l,this.Gu=s.maxAttempts,this.F_=new fp(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new tP(this.datastore),t=this.Ju(e);t&&t.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(o=>{this.Hu(o)}))}).catch(s=>{this.Hu(s)})})}Ju(e){try{const t=this.updateFunction(e);return!Ll(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!M_(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class rP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=mn.UNAUTHENTICATED,this.clientId=Xf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async d=>{ve(Si,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(ve(Si,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=_p(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function tf(r,e){r.asyncQueue.verifyOperationInProgress(),ve(Si,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await X_(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>{_i("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{ve("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{_i("Terminating Firestore due to IndexedDb database deletion failed",o)})}),r._offlineComponents=e}async function Sv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await sP(r);ve(Si,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>_v(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>_v(e.remoteStore,o)),r._onlineComponents=e}async function sP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(Si,"Using user provided OfflineComponentProvider");try{await tf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;_i("Error using user provided cache. Falling back to memory cache: "+t),await tf(r,new Uc)}}else ve(Si,"Using default OfflineComponentProvider"),await tf(r,new eP(void 0));return r._offlineComponents}async function Ip(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(Si,"Using user provided OnlineComponentProvider"),await Sv(r,r._uninitializedComponentsProvider._online)):(ve(Si,"Using default OnlineComponentProvider"),await Sv(r,new Pf))),r._onlineComponents}function iP(r){return Ip(r).then(e=>e.syncEngine)}function oP(r){return Ip(r).then(e=>e.datastore)}async function bf(r){const e=await Ip(r),t=e.eventManager;return t.onListen=zA.bind(null,e.syncEngine),t.onUnlisten=HA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=WA.bind(null,e.syncEngine),t}function aP(r,e,t={}){const s=new Es;return r.asyncQueue.enqueueAndForget(async()=>function(l,d,f,m,v){const T=new vw({next:x=>{T.Ou(),d.enqueueAndForget(()=>lw(l,E)),x.fromCache&&m.source==="server"?v.reject(new pe(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(x)},error:x=>v.reject(x)}),E=new uw(f,T,{includeMetadataChanges:!0,ka:!0});return aw(l,E)}(await bf(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="firestore.googleapis.com",Rv=!0;class Av{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ww,this.ssl=Rv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Rv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Y_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jR)throw new pe(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_w((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new pe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new pe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new pe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ad{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Av({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Av(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new mC;switch(s.type){case"firstParty":return new _C(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Cv.get(t);s&&(ve("ComponentProvider","Removing Datastore"),Cv.delete(t),s.terminate())}(this),Promise.resolve()}}function lP(r,e,t,s={}){var o;r=Jr(r,ad);const l=da(e),d=r._getSettings(),f=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),m=`${e}:${t}`;l&&(i0(`https://${m}`),o0("Firestore",!0)),d.host!==ww&&d.host!==m&&_i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:m,ssl:l,emulatorOptions:s});if(!Zi(v,f)&&(r._setSettings(v),s.mockUserToken)){let T,E;if(typeof s.mockUserToken=="string")T=s.mockUserToken,E=mn.MOCK_USER;else{T=sI(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new pe(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new mn(x)}r._authCredentials=new gC(new s_(T,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new uo(this.firestore,e,this._query)}}class kt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ol(t,kt._jsonSchema))return new kt(e,s||null,new Re(ot.fromString(t.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:Mt("string",kt._jsonSchemaVersion),referencePath:Mt("string")};class gi extends uo{constructor(e,t,s){super(e,t,sp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Re(e))}withConverter(e){return new gi(this.firestore,e,this._path)}}function Bn(r,e,...t){if(r=Et(r),o_("collection","path",e),r instanceof ad){const s=ot.fromString(e,...t);return zy(s),new gi(r,null,s)}{if(!(r instanceof kt||r instanceof gi))throw new pe(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ot.fromString(e,...t));return zy(s),new gi(r.firestore,null,s)}}function xn(r,e,...t){if(r=Et(r),arguments.length===1&&(e=Xf.newId()),o_("doc","path",e),r instanceof ad){const s=ot.fromString(e,...t);return Uy(s),new kt(r,null,new Re(s))}{if(!(r instanceof kt||r instanceof gi))throw new pe(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ot.fromString(e,...t));return Uy(s),new kt(r.firestore,r instanceof gi?r.converter:null,new Re(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="AsyncQueue";class bv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new fp(this,"async_queue_retry"),this.oc=()=>{const s=ef();s&&ve(Pv,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=ef();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=ef();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Es;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ya(e))throw e;ve(Pv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,Ss("INTERNAL UNHANDLED ERROR: ",kv(s)),s}).then(s=>(this.nc=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=vp.createAndSchedule(this,e,t,s,l=>this.lc(l));return this.ec.push(o),o}ac(){this.tc&&ke(47125,{hc:kv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function kv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class ro extends ad{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new bv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bv(e),this._firestoreClient=void 0,await e}}}function uP(r,e){const t=typeof r=="object"?r:c0(),s=typeof r=="string"?r:bc,o=jf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=nI("firestore");l&&lP(o,...l)}return o}function ld(r){if(r._terminated)throw new pe(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||cP(r),r._firestoreClient}function cP(r){var e,t,s;const o=r._freezeSettings(),l=function(f,m,v,T){return new OC(f,m,v,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,_w(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new rP(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nr(on.fromBase64String(e))}catch(t){throw new pe(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nr(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ol(e,nr._jsonSchema))return nr.fromBase64String(e.bytes)}}nr._jsonSchemaVersion="firestore/bytes/1.0",nr._jsonSchema={type:Mt("string",nr._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zr._jsonSchemaVersion}}static fromJSON(e){if(Ol(e,Zr._jsonSchema))return new Zr(e.latitude,e.longitude)}}Zr._jsonSchemaVersion="firestore/geoPoint/1.0",Zr._jsonSchema={type:Mt("string",Zr._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ol(e,es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new es(e.vectorValues);throw new pe(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}es._jsonSchemaVersion="firestore/vectorValue/1.0",es._jsonSchema={type:Mt("string",es._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=/^__.*__$/;class hP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ml(e,this.data,t,this.fieldTransforms)}}class Ew{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ri(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Tw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ec:r})}}class Sp{constructor(e,t,s,o,l,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return zc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Tw(this.Ec)&&dP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class fP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||sd(e)}Dc(e,t,s,o=!1){return new Sp({Ec:e,methodName:t,bc:s,path:sn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cp(r){const e=r._freezeSettings(),t=sd(r._databaseId);return new fP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Iw(r,e,t,s,o,l={}){const d=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);Rp("Data must be an object, but it was:",d,s);const f=xw(s,d);let m,v;if(l.merge)m=new rr(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const T=[];for(const E of l.mergeFields){const x=kf(e,E,t);if(!d.contains(x))throw new pe(Q.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Cw(T,x)||T.push(x)}m=new rr(T),v=d.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,v=d.fieldTransforms;return new hP(new Cn(f),m,v)}class cd extends xp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}function pP(r,e,t,s){const o=r.Dc(1,e,t);Rp("Data must be an object, but it was:",o,s);const l=[],d=Cn.empty();Ci(s,(m,v)=>{const T=Ap(e,m,t);v=Et(v);const E=o.gc(T);if(v instanceof cd)l.push(T);else{const x=Bl(v,E);x!=null&&(l.push(T),d.set(T,x))}});const f=new rr(l);return new Ew(d,f,o.fieldTransforms)}function mP(r,e,t,s,o,l){const d=r.Dc(1,e,t),f=[kf(e,s,t)],m=[o];if(l.length%2!=0)throw new pe(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)f.push(kf(e,l[x])),m.push(l[x+1]);const v=[],T=Cn.empty();for(let x=f.length-1;x>=0;--x)if(!Cw(v,f[x])){const L=f[x];let $=m[x];$=Et($);const H=d.gc(L);if($ instanceof cd)v.push(L);else{const M=Bl($,H);M!=null&&(v.push(L),T.set(L,M))}}const E=new rr(v);return new Ew(T,E,d.fieldTransforms)}function gP(r,e,t,s=!1){return Bl(t,r.Dc(s?4:3,e))}function Bl(r,e){if(Sw(r=Et(r)))return Rp("Unsupported field value:",e,r),xw(r,e);if(r instanceof xp)return function(s,o){if(!Tw(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,o){const l=[];let d=0;for(const f of s){let m=Bl(f,o.yc(d));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),d++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=Et(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return sR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=gt.fromDate(s);return{timestampValue:Lc(o.serializer,l)}}if(s instanceof gt){const l=new gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Lc(o.serializer,l)}}if(s instanceof Zr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof nr)return{bytesValue:B_(o.serializer,s._byteString)};if(s instanceof kt){const l=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:lp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof es)return function(d,f){return{mapValue:{fields:{[m_]:{stringValue:g_},[kc]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw f.wc("VectorValues must only contain numeric values.");return ip(f.serializer,v)})}}}}}}(s,o);throw o.wc(`Unsupported field value: ${Qc(s)}`)}(r,e)}function xw(r,e){const t={};return u_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(r,(s,o)=>{const l=Bl(o,e.Vc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function Sw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof gt||r instanceof Zr||r instanceof nr||r instanceof kt||r instanceof xp||r instanceof es)}function Rp(r,e,t){if(!Sw(t)||!a_(t)){const s=Qc(t);throw s==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+s)}}function kf(r,e,t){if((e=Et(e))instanceof ud)return e._internalPath;if(typeof e=="string")return Ap(r,e);throw zc("Field path arguments must be of type string or ",r,!1,void 0,t)}const yP=new RegExp("[~\\*/\\[\\]]");function Ap(r,e,t){if(e.search(yP)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ud(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function zc(r,e,t,s,o){const l=s&&!s.isEmpty(),d=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||d)&&(m+=" (found",l&&(m+=` in field ${s}`),d&&(m+=` in document ${o}`),m+=")"),new pe(Q.INVALID_ARGUMENT,f+r+m)}function Cw(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vP extends Bc{data(){return super.data()}}function Pp(r,e){return typeof e=="string"?Ap(r,e):e instanceof ud?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bp{}class _P extends bp{}function wP(r,e,...t){let s=[];e instanceof bp&&s.push(e),s=s.concat(t),function(l){const d=l.filter(m=>m instanceof kp).length,f=l.filter(m=>m instanceof dd).length;if(d>1||d>0&&f>0)throw new pe(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class dd extends _P{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new dd(e,t,s)}_apply(e){const t=this._parse(e);return Aw(e._query,t),new uo(e.firestore,e.converter,wf(e._query,t))}_parse(e){const t=Cp(e.firestore);return function(l,d,f,m,v,T,E){let x;if(v.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new pe(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Vv(E,T);const $=[];for(const H of E)$.push(Dv(m,l,H));x={arrayValue:{values:$}}}else x=Dv(m,l,E)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Vv(E,T),x=gP(f,d,E,T==="in"||T==="not-in");return jt.create(v,T,x)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function EP(r,e,t){const s=e,o=Pp("where",r);return dd._create(o,s,t)}class kp extends bp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new kp(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Lr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let d=o;const f=l.getFlattenedFilters();for(const m of f)Aw(d,m),d=wf(d,m)}(e._query,t),new uo(e.firestore,e.converter,wf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Dv(r,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new pe(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x_(e)&&t.indexOf("/")!==-1)throw new pe(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ot.fromString(t));if(!Re.isDocumentKey(s))throw new pe(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Qy(r,new Re(s))}if(t instanceof kt)return Qy(r,t._key);throw new pe(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qc(t)}.`)}function Vv(r,e){if(!Array.isArray(r)||r.length===0)throw new pe(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Aw(r,e){const t=function(o,l){for(const d of o)for(const f of d.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new pe(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Pw{convertValue(e,t="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ci(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[kc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>bt(d.doubleValue));return new es(l)}convertGeoPoint(e){return new Zr(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Jc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(xl(e));default:return null}}convertTimestamp(e){const t=Ei(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ot.fromString(e);Ze(Q_(s),9688,{name:e});const o=new Sl(s.get(1),s.get(3)),l=new Re(s.popFirst(5));return o.isEqual(t)||Ss(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class TP extends Pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new nr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}class Qo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yi extends Bc{constructor(e,t,s,o,l,d){super(e,t,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Pp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=yi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}yi._jsonSchemaVersion="firestore/documentSnapshot/1.0",yi._jsonSchema={type:Mt("string",yi._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class _c extends yi{data(e={}){return super.data(e)}}class Xi{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Qo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new _c(this._firestore,this._userDataWriter,s.key,s,new Qo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(f=>{const m=new _c(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Qo(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new _c(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Qo(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,T=-1;return f.type!==0&&(v=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),T=d.indexOf(f.doc.key)),{type:IP(f.type),doc:m,oldIndex:v,newIndex:T}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:r})}}Xi._jsonSchemaVersion="firestore/querySnapshot/1.0",Xi._jsonSchema={type:Mt("string",Xi._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class hd extends Pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new nr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}function xP(r){r=Jr(r,uo);const e=Jr(r.firestore,ro),t=ld(e),s=new hd(e);return Rw(r._query),aP(t,r._query).then(o=>new Xi(e,s,r,o))}function Pl(r,e,t){r=Jr(r,kt);const s=Jr(r.firestore,ro),o=bw(r.converter,e,t);return kw(s,[Iw(Cp(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Rn.none())])}function Ov(r){return kw(Jr(r.firestore,ro),[new nd(r._key,Rn.none())])}function ai(r,...e){var t,s,o;r=Et(r);let l={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||Nv(e[d])||(l=e[d++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Nv(e[d])){const E=e[d];e[d]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[d+1]=(s=E.error)===null||s===void 0?void 0:s.bind(E),e[d+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let m,v,T;if(r instanceof kt)v=Jr(r.firestore,ro),T=sp(r._key.path),m={next:E=>{e[d]&&e[d](SP(v,r,E))},error:e[d+1],complete:e[d+2]};else{const E=Jr(r,uo);v=Jr(E.firestore,ro),T=E._query;const x=new hd(v);m={next:L=>{e[d]&&e[d](new Xi(v,x,E,L))},error:e[d+1],complete:e[d+2]},Rw(r._query)}return function(x,L,$,H){const M=new vw(H),ee=new uw(L,M,$);return x.asyncQueue.enqueueAndForget(async()=>aw(await bf(x),ee)),()=>{M.Ou(),x.asyncQueue.enqueueAndForget(async()=>lw(await bf(x),ee))}}(ld(v),T,f,m)}function kw(r,e){return function(s,o){const l=new Es;return s.asyncQueue.enqueueAndForget(async()=>qA(await iP(s),o,l)),l.promise}(ld(r),e)}function SP(r,e,t){const s=t.docs.get(e._key),o=new hd(r);return new yi(r,o,e._key,s,new Qo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP={maxAttempts:5};function al(r,e){if((r=Et(r)).firestore!==e)throw new pe(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cp(e)}get(e){const t=al(e,this._firestore),s=new TP(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||o.length!==1)return ke(24041);const l=o[0];if(l.isFoundDocument())return new Bc(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Bc(this._firestore,s,t._key,null,t.converter);throw ke(18433,{doc:l})})}set(e,t,s){const o=al(e,this._firestore),l=bw(o.converter,t,s),d=Iw(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,s);return this._transaction.set(o._key,d),this}update(e,t,s,...o){const l=al(e,this._firestore);let d;return d=typeof(t=Et(t))=="string"||t instanceof ud?mP(this._dataReader,"Transaction.update",l._key,t,s,o):pP(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,d),this}delete(e){const t=al(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP extends RP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=al(e,this._firestore),s=new hd(this._firestore);return super.get(e).then(o=>new yi(this._firestore,s,t._key,o._document,new Qo(!1,!1),t.converter))}}function nf(r,e,t){r=Jr(r,ro);const s=Object.assign(Object.assign({},CP),t);return function(l){if(l.maxAttempts<1)throw new pe(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(l,d,f){const m=new Es;return l.asyncQueue.enqueueAndForget(async()=>{const v=await oP(l);new nP(l.asyncQueue,v,f,d,m).zu()}),m.promise}(ld(r),o=>e(new AP(r,o)),s)}(function(e,t=!0){(function(o){ma=o})(fa),na(new eo("firestore",(s,{instanceIdentifier:o,options:l})=>{const d=s.getProvider("app").getImmediate(),f=new ro(new yC(s.getProvider("auth-internal")),new wC(d,s.getProvider("app-check-internal")),function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new pe(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(v.options.projectId,T)}(d,o),d);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),pi(Oy,Ly,e),pi(Oy,Ly,"esm2017")})();const PP=({message:r,type:e})=>{if(!r)return null;const t=e==="success"?"bg-green-100":"bg-red-100",s=e==="success"?"text-green-700":"text-red-700";return y.jsx("div",{className:`p-3 rounded-md ${t} ${s} my-4 message-box-fade show`,children:r})},bP=({onClose:r})=>{var Xt;const{signUpWithEmailPassword:e,signInWithEmailPassword:t,signInWithApple:s,linkAnonymousWithEmailPassword:o,linkAnonymousWithApple:l,auth:d,currentUserId:f,signInWithGoogle:m,db:v,appId:T}=O.useContext($l),[E,x]=O.useState(!0),[L,$]=O.useState(""),[H,M]=O.useState(""),[ee,re]=O.useState(""),[Y,ce]=O.useState("+1"),[le,de]=O.useState(""),[N,R]=O.useState(""),[S,b]=O.useState(0),[P,D]=O.useState(null),[C,He]=O.useState(""),[at,ut]=O.useState(!1),[ue,q]=O.useState(!1),[_e,oe]=O.useState(""),[j,G]=O.useState(""),[Te,Ae]=O.useState(""),[Ve,Oe]=O.useState(""),[ze,je]=O.useState(""),[Be,et]=O.useState(""),[Rt,he]=O.useState(""),se=O.useRef(null),ge=O.useRef(null),Ue=O.useCallback((ie,fe)=>{de(ie),R(fe),setTimeout(()=>{de(""),R("")},5e3)},[]),An=(Xt=d==null?void 0:d.currentUser)==null?void 0:Xt.isAnonymous,Ut=O.useCallback(async ie=>{if(console.log("checkEmailExists: Checking email:",ie),console.log("checkEmailExists: Current auth object:",d),!d)return console.error("Firebase Auth not initialized for email check."),!1;try{const fe=await BS(d,ie);return console.log("checkEmailExists: Sign-in methods for email:",fe),fe.length>0}catch(fe){return console.error("Error checking email existence:",fe),console.error("Full error object:",JSON.stringify(fe,null,2)),!1}},[d]);O.useEffect(()=>{if(!E&&S===2&&d&&!se.current){if(console.log("AuthModal: Initializing reCAPTCHA Verifier..."),typeof window.grecaptcha>"u"||!window.grecaptcha.ready){console.warn("AuthModal: grecaptcha script not fully loaded yet. Retrying initialization...");const ie=setTimeout(()=>{b(fe=>fe)},500);return()=>clearTimeout(ie)}window.grecaptcha.ready(()=>{if(se.current){console.log("AuthModal: reCAPTCHA Verifier already exists, skipping re-initialization.");return}console.log("AuthModal: grecaptcha is ready. Creating RecaptchaVerifier...");try{const ie=new G0(d,"recaptcha-container",{size:"invisible",callback:fe=>{console.log("AuthModal: reCAPTCHA callback fired (solved):",fe)},"expired-callback":()=>{console.log("AuthModal: reCAPTCHA expired."),Ue("Verification expired. Please try again.","error"),D(null)},"error-callback":fe=>{console.error("AuthModal: reCAPTCHA error callback:",fe),Ue("Verification error. Please try again.","error"),D(null)}});se.current=ie,ie.render().then(fe=>{console.log("AuthModal: reCAPTCHA rendered with widget ID:",fe),ge.current=fe}).catch(fe=>{console.error("AuthModal: Error rendering reCAPTCHA:",fe),Ue("Failed to initialize verification. Please refresh.","error"),se.current=null,ge.current=null})}catch(ie){console.error("AuthModal: Error creating RecaptchaVerifier instance:",ie),Ue("Failed to initialize verification. Check console.","error")}})}return()=>{se.current&&(console.log("AuthModal: Cleaning up reCAPTCHA Verifier on component unmount."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&ge.current!==null&&window.grecaptcha.reset(ge.current),se.current=null,ge.current=null)}},[E,S,d,Ue]);const Pn=O.useCallback(async()=>{if(de(""),Oe(""),he(""),!Be.trim()){he("Please enter a username.");return}if(!Y.trim()){Oe("Please enter your phone number.");return}if(!Y.startsWith("+1")||Y.trim().length<10){Oe('Phone number must start with "+1" and include at least 7 digits after.');return}if(!d){Ue("Authentication service not ready.","error");return}if(!se.current){Ue("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available.");return}ut(!0);try{se.current.size==="invisible"&&ge.current!==null&&await window.grecaptcha.execute(ge.current);const ie=await y1(d,Y,se.current);D(ie),Ue("Verification code sent! Please check your phone.","success")}catch(ie){console.error("Error sending OTP:",ie);let fe="Failed to send code. Please try again.";ie.code==="auth/invalid-phone-number"?fe="Invalid phone number format. Please ensure it includes the country code (e.g., +11234567890).":ie.code==="auth/too-many-requests"?fe="Too many requests. Please try again later.":ie.code==="auth/captcha-check-failed"&&(fe="Security check failed. Please try again."),Ue(fe,"error"),D(null)}finally{ut(!1)}},[Y,Be,d,Ue]),Gn=O.useCallback(async()=>{if(de(""),je(""),!C.trim()){je("Please enter the verification code.");return}if(!P){Ue("No verification request found. Please send the code first.","error");return}q(!0);try{let ie;E?ie=await P.confirm(C):L&&H?ie=await F0(d,L,H):ie=await P.confirm(C);const fe=ie.user;if(fe&&Be.trim()&&(await HS(fe,{displayName:Be.trim()}),console.log("User display name updated after sign-up/link:",Be)),v&&fe&&T)try{await Pl(xn(v,"artifacts",T,"users",fe.uid),{email:fe.email||null,phoneNumber:Y,username:Be,createdAt:new Date},{merge:!0}),console.log("User profile with phone number and username info saved.")}catch(ln){console.error("Error saving user phone number and username info:",ln),Ue("Account created, but failed to save phone number and username.","warning")}else console.warn("Firestore DB, user, or appId not available, phone number and username info not saved.");Ue("Account created and phone number verified!","success"),se.current&&(window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&ge.current!==null&&window.grecaptcha.reset(ge.current),se.current=null,ge.current=null),r()}catch(ie){console.error("Error verifying OTP or creating user:",ie);let fe="Failed to verify code. Please try again.";ie.code==="auth/invalid-verification-code"?fe="Invalid verification code. Please check the code and try again.":ie.code==="auth/code-expired"?fe="The verification code has expired. Please resend the code.":ie.message==="No reCAPTCHA clients."?fe="Security verification failed. Please try to send the code again.":ie.code==="auth/email-already-in-use"&&(fe="This email is already registered. Please sign in or use a different email."),Ue(fe,"error"),je("Verification failed. Please try again.")}finally{q(!1)}},[C,P,v,T,Y,Be,Ue,r,d,E,L,H]),Nt=O.useCallback(async ie=>{if(ie.preventDefault(),de(""),oe(""),G(""),Ae(""),Oe(""),je(""),he(""),console.log("handleNextStep: Current step BEFORE update:",S,"isLogin:",E),S===0){if(!L){oe("Please enter your email.");return}if(!Be.trim()){he("Please enter a username.");return}if(!E){const fe=await Ut(L);if(console.log("handleNextStep: Email exists check result:",fe),fe){oe("This email is already registered. Please sign in or use a different email.");return}}b(fe=>fe+1)}else if(S===1){if(!H){G("Please enter your password.");return}if(H.length<6){G("Password must be at least 6 characters long.");return}if(!ee){Ae("Please confirm your password.");return}if(H!==ee){Ae("Passwords do not match.");return}b(fe=>fe+1)}else if(S===2){if(!Y.trim()){Oe("Please enter your phone number.");return}if(!P){if(!se.current){Ue("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available in handleNextStep.");return}await Pn()}}console.log("handleNextStep: Current step AFTER update:",S)},[L,H,ee,Y,Be,S,E,Ut,Pn,P,Ue]),Wt=O.useCallback(()=>{de(""),oe(""),G(""),Ae(""),Oe(""),je(""),he(""),console.log("handlePrevStep: Current step BEFORE update:",S),S>0&&(b(ie=>ie-1),D(null),He(""),S===2&&se.current&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&ge.current!==null&&window.grecaptcha.reset(ge.current)),console.log("handlePrevStep: Current step AFTER update:",S)},[S]),bn=async ie=>{if(ie.preventDefault(),de(""),oe(""),G(""),Ae(""),Oe(""),je(""),he(""),E){if(!L){oe("Please enter your email.");return}if(!H){G("Please enter your password.");return}try{An?await o(L,H):await t(L,H),se.current&&(window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&ge.current!==null&&window.grecaptcha.reset(ge.current),se.current=null,ge.current=null)}catch(fe){console.error("Unexpected error during sign-in process:",fe),Ue(`An unexpected error occurred: ${fe.message}`,"error")}}else if(S<2)await Nt(ie);else if(S===2)if(P)await Gn();else{if(!se.current){Ue("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available in handleAuthAction.");return}await Pn()}},an=O.useCallback(()=>{x(ie=>!ie),$(""),M(""),re(""),ce("+1"),et(""),de(""),R(""),b(0),D(null),He(""),oe(""),G(""),Ae(""),Oe(""),je(""),he(""),se.current&&(console.log("AuthModal: Clearing and deleting reCAPTCHA Verifier on mode toggle."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&ge.current!==null&&window.grecaptcha.reset(ge.current),se.current=null,ge.current=null)},[]),kn=O.useCallback(()=>{se.current&&(console.log("AuthModal: Cleaning up reCAPTCHA Verifier on modal close."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&ge.current!==null&&window.grecaptcha.reset(ge.current),se.current=null,ge.current=null),r()},[r]);return y.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4 font-inter",children:y.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md relative animate-scale-in overflow-y-auto",children:[" ",y.jsx("button",{onClick:kn,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold transition-transform duration-200 transform hover:scale-110",children:""}),y.jsx("h2",{className:"text-3xl font-extrabold text-gray-800 mb-6 text-center",children:E?"Sign In":"Sign Up"}),le&&y.jsx("div",{className:`p-3 mb-4 rounded-md text-center text-sm font-medium
                        ${N==="error"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:le}),y.jsxs("form",{onSubmit:bn,className:"space-y-4 flex flex-col items-center",children:[y.jsxs("div",{className:"w-full overflow-hidden",children:[" ",y.jsxs("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${E?0:S*100}%)`},children:[E&&y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4 py-4",children:[" ",y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Email"}),y.jsx("input",{type:"email",id:"email",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${_e?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com",value:L,onChange:ie=>{$(ie.target.value),oe("")}}),_e&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:_e})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Password"}),y.jsx("input",{type:"password",id:"password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${j?"border-red-500":"border-gray-300"}`,placeholder:"********",value:H,onChange:ie=>{M(ie.target.value),G("")}}),j&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:j})]})]}),!E&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4 py-4",children:[" ",y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Email"}),y.jsx("input",{type:"email",id:"email",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${_e?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com",value:L,onChange:ie=>{$(ie.target.value),oe("")}}),_e&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:_e})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"username-email-signup",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Username"}),y.jsx("input",{type:"text",id:"username-email-signup",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${Rt?"border-red-500":"border-gray-300"}`,placeholder:"Choose a username",value:Be,onChange:ie=>{et(ie.target.value),he("")}}),Rt&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:Rt})]})]}),y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4 py-4",children:[" ",y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Password"}),y.jsx("input",{type:"password",id:"password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${j?"border-red-500":"border-gray-300"}`,placeholder:"********",value:H,onChange:ie=>{M(ie.target.value),G("")}}),j&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:j})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"confirm-password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Confirm Password"}),y.jsx("input",{type:"password",id:"confirm-password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${Te?"border-red-500":"border-gray-300"}`,placeholder:"********",value:ee,onChange:ie=>{re(ie.target.value),Ae("")}}),Te&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:Te})]})]}),y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4 py-4",children:[" ",P?y.jsxs("div",{className:"relative",children:[y.jsx("label",{htmlFor:"otp",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Enter Verification Code"}),y.jsx("input",{type:"text",id:"otp",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${ze?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 123456",value:C,onChange:ie=>{He(ie.target.value),je("")},disabled:ue}),ze&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:ze}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-left",children:["Code sent to ",Y,"."]}),y.jsx("button",{type:"button",onClick:Pn,disabled:at||ue,className:"w-full bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105 mt-2",children:at?"Sending...":"Resend Code"})]}):y.jsxs("div",{className:"relative",children:[y.jsx("label",{htmlFor:"phoneNumber",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Phone Number"}),y.jsx("input",{type:"tel",id:"phoneNumber",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${Ve?"border-red-500":"border-gray-300"}`,placeholder:"e.g., +11234567890",value:Y,onChange:ie=>{const fe=ie.target.value;fe.startsWith("+1")?ce(fe==="+"?"+1":fe):ce("+1"+fe.replace(/^\+?1?/,"")),Oe("")},disabled:at}),y.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"For human verification purposes only! Include country code (e.g., +1)."}),y.jsx("div",{id:"recaptcha-container",className:"mt-4"})]})]})]})]})]}),!E&&y.jsx("div",{className:"flex justify-center space-x-2 mt-4",children:[0,1,2].map(ie=>y.jsx("span",{className:`block w-3 h-3 rounded-full transition-colors duration-300
                                        ${S===ie?"bg-[#CC5500] scale-125":"bg-gray-300 hover:bg-gray-400 cursor-pointer"}`,onClick:()=>b(ie),role:"button",tabIndex:"0","aria-label":`Go to step ${ie+1}`},ie))}),y.jsxs("div",{className:"flex justify-between items-center mt-4 w-full px-4",children:[!E&&S>0&&y.jsx("button",{type:"button",onClick:Wt,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105 min-w-[100px]",children:"Previous"}),!E&&S===0&&y.jsx("div",{className:"flex-grow"}),y.jsx("button",{type:"submit",className:`font-bold py-3 px-6 rounded-full transition duration-300 shadow-lg hover:shadow-xl transform hover:scale-105
                                ${E?"bg-[#FFDEB5] text-gray-800 hover:bg-[#FFC982] w-full":"bg-[#CC5500] text-white hover:bg-[#A84500] w-auto ml-auto"}`,disabled:E&&(at||ue)||!E&&S===2&&!P&&at||!E&&S===2&&P&&ue,children:E?"Sign In":S===0||S===1?"Next":S===2&&!P?at?"Sending Code...":"Send Code":ue?"Verifying...":"Verify Code"})]})]}),y.jsxs("div",{className:"mt-6 text-center",children:[y.jsxs("p",{className:"text-gray-600",children:[E?"Don't have an account? ":"Already have an account? ",y.jsx("button",{onClick:an,className:"text-[#CC5500] hover:underline font-semibold transition-colors duration-200",children:E?"Sign Up":"Sign In"})]}),E&&y.jsx("button",{onClick:()=>Ue("Password reset functionality not yet implemented.","info"),className:"text-[#CC5500] hover:underline text-sm mt-2 transition-colors duration-200",children:"Forgot Password?"})]})]})})},kP=["fuck","shit","asshole","bitch","cunt","damn","hell"],$c=250,NP=["Certified Nursing Assistant (CNA)","Licensed Practical Nurse (LPN) / Licensed Vocational Nurse (LVN)","Registered Nurse (RN)","Nurse Practitioner (NP)","Family Nurse Practitioner (FNP)","Adult-Gerontology Nurse Practitioner (AGNP)","Pediatric Nurse Practitioner (PNP)","Psychiatric Mental Health Nurse Practitioner (PMHNP)","Acute Care Nurse Practitioner (ACNP)","Women's Health Nurse Practitioner (WHNP)","Certified Registered Nurse Anesthetist (CRNA)","Clinical Nurse Specialist (CNS)","Certified Nurse-Midwife (CNM)","Cardiac Nurse","Critical Care Nurse (ICU Nurse)","Emergency Nurse (ER Nurse)","Oncology Nurse","Pediatric Nurse","Labor and Delivery Nurse","Neonatal Intensive Care Unit (NICU) Nurse","Medical-Surgical Nurse","Geriatric Nurse","Psychiatric/Mental Health Nurse","Home Health Nurse","Public Health Nurse","School Nurse","Perioperative Nurse (Operating Room Nurse)","Rehabilitation Nurse","Hospice Nurse / Palliative Care Nurse","Forensic Nurse","Travel Nurse","Infusion Nurse","Nephrology Nurse","Diabetic Nurse","Dermatology Nurse","Gastroenterology Nurse","Orthopedic Nurse","Urology Nurse","Wound Care Nurse","Ostomy Care Nurse","Informatics Nurse","Research Nurse","Case Management Nurse","Nurse Educator","Nurse Administrator/Manager","Occupational Health Nurse","Flight Nurse / Transport Nurse","Correctional Nurse","IV Therapy Nurse","Transplant Nurse","Genetics Nurse","Pain Management Nurse","Military Nurse","Ambulatory Care Nurse","Endoscopy Nurse","Plastic Surgery Nurse","Rural Health Nurse","Parish Nurse / Faith Community Nurse","Camp Nurse","Hyperbaric Nurse","Legal Nurse Consultant","Integrative Health Nurse"],Ho=["Select your nursing field...",...NP.sort()];function Lv(r){const e=r.toLowerCase();for(const t of kP)if(e.includes(t))return{isValid:!1,message:"Content contains inappropriate language."};return r.length>$c?{isValid:!1,message:`Content exceeds ${$c} character limit.`}:{isValid:!0,message:"Content is valid."}}let DP=class extends li.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ReviewsHubPage ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(10vh-120px)] p-4 bg-red-100 text-red-800 rounded-lg shadow-md",children:[y.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong."}),y.jsx("p",{className:"text-lg text-center mb-2",children:"We're sorry, but there was an error loading this section."}),y.jsx("p",{className:"text-sm text-red-600 text-center",children:this.state.error&&this.state.error.toString()}),y.jsxs("details",{className:"mt-4 text-left text-sm p-2 bg-red-50 rounded-md",children:[y.jsx("summary",{className:"font-semibold cursor-pointer",children:"Error Details"}),y.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words text-red-700",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),y.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"mt-6 px-6 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-colors",children:"Try Again"})]}):this.props.children}};const Nw=()=>{const{db:r,auth:e,currentUserId:t,currentUserIsAnonymous:s,appId:o,showMessage:l,setShowAuthModal:d}=O.useContext($l),[f,m]=O.useState(""),[v,T]=O.useState([]),[E,x]=O.useState([]),[L,$]=O.useState(!0),[H,M]=O.useState(!1),[ee,re]=O.useState(!1),[Y,ce]=O.useState(20),[le,de]=O.useState(null),[N,R]=O.useState(""),[S,b]=O.useState([]),[P,D]=O.useState([]),[C,He]=O.useState(!1),[at,ut]=O.useState(!1),[ue,q]=O.useState(null),[_e,oe]=O.useState([]),[j,G]=O.useState(!1),[Te,Ae]=O.useState(!1),[Ve,Oe]=O.useState(""),[ze,je]=O.useState(Ho[0]),[Be,et]=O.useState(""),[Rt,he]=O.useState([]),[se,ge]=O.useState(!1),[Ue,An]=O.useState({}),[Ut,Pn]=O.useState({}),[Gn,Nt]=O.useState({}),[Wt,bn]=O.useState(!1),[an,kn]=O.useState(""),[Xt,ie]="",[fe,ln]=O.useState(!1),[jr,Er]=O.useState(""),[ir,Mr]=O.useState(""),[ns,or]=O.useState(!0),rs=li.useRef(null),Kn=li.useRef(null),Ps=li.useRef(null),Fr=li.useRef(null);console.log("ReviewsHubPage: Component rendered."),O.useEffect(()=>{let K=()=>{};if(console.log("ReviewsHubPage: useEffect for hospital onSnapshot. DB, AppId Ready:",!!r,!!o),r&&o){$(!0),M(!1);const we=Bn(r,`artifacts/${o}/public/data/hospitals`);K=ai(we,Pe=>{console.log("ReviewsHubPage: onSnapshot triggered for hospitals.");const be=[];Pe.forEach(Se=>{const $e=Se.data();$e.name&&be.push({id:Se.id,name:$e.name,location:$e.location||""})}),be.sort((Se,$e)=>Se.name.localeCompare($e.name)),console.log("ReviewsHubPage: Fetched Hospitals from snapshot:",be.length),T(be),$(!1),M(be.length===0)},Pe=>{console.error("ReviewsHubPage: Error fetching hospitals with onSnapshot:",Pe),l("Error loading hospitals.","error"),$(!1),M(!0)})}else $(!0),T([]),x([]),M(!1),re(!1);return()=>{console.log("ReviewsHubPage: Cleaning up hospital onSnapshot listener."),K()}},[r,o,l]);const bs=O.useCallback(async K=>{if(K.preventDefault(),!t||s){l("You must be logged in to add a hospital. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready to add a hospital.","error");return}if(!an.trim()||!Xt.trim()){l("Please enter both hospital name and location.","error");return}try{const Pe={id:Date.now().toString(),name:an.trim(),location:Xt.trim()};T(Se=>[...Se,Pe].sort(($e,ht)=>$e.name.localeCompare(ht.name))),kn(""),ie(""),bn(!1);const be=xn(Bn(r,`artifacts/${o}/public/data/hospitals`));await Pl(be,{name:Pe.name,location:Pe.location,createdAt:new Date().toISOString(),createdBy:t}),l("Hospital added successfully! You can now add doctors to it.","success"),Ps.current&&setTimeout(()=>{const Se=document.querySelector(`button.bg-gray-100[data-hospital-name="${Pe.name}"]`);Se&&Se.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(we){console.error("ReviewsHubPage: Error adding hospital:",we),l(`Error adding hospital: ${we.message}`,"error"),T(Pe=>Pe.filter(be=>be.id!==tempId))}},[t,s,r,o,an,Xt,l,d]);O.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering hospitals triggered. HospitalInput:",f,"CurrentDisplayCount:",Y);const K=f.trim().toLowerCase(),we=v.filter(Pe=>Pe.name.toLowerCase().includes(K)||Pe.location&&Pe.location.toLowerCase().includes(K));x(we.slice(0,Y)),re(we.length>Y),M(we.length===0&&!L)},[v,f,Y,L]);const ks=O.useCallback(()=>{ce(K=>K+20)},[]),Nn=O.useCallback(async K=>{if(console.log("ReviewsHubPage: handleHospitalSelect called for hospital:",K.name),de(K),console.log("ReviewsHubPage: Populating hospitalInput with:",K.name),m(K.name),R(""),He(!0),ut(!1),b([]),D([]),ln(!1),q(null),!r||!o||!K.id){l("Firebase or hospital ID missing for fetching doctors.","error"),He(!1),ut(!0);return}const we=Bn(r,`artifacts/${o}/public/data/hospitals/${K.id}/doctors`),Pe=ai(we,async be=>{console.log("ReviewsHubPage: onSnapshot triggered for doctors.");const Se=be.docs.map(async nt=>{const ft=nt.data(),rt=nt.id;let Dn=0;if(ft.name){try{Dn=(await xP(Bn(r,`artifacts/${o}/public/data/hospitals/${K.id}/doctors/${rt}/reviews`))).docs.length}catch(At){console.error(`ReviewsHubPage: Error fetching reviews count for doctor ${rt}:`,At)}return{id:rt,hospitalId:K.id,...ft,averageRating:ft.averageRating||0,numReviews:Dn,numComments:ft.numComments||0}}return null}),$e=(await Promise.all(Se)).filter(Boolean);$e.sort((nt,ft)=>nt.name.localeCompare(ft.name)),console.log("ReviewsHubPage: Fetched Doctors from snapshot for selected hospital:",$e.length),b($e),He(!1),ut($e.length===0);const ht=N.trim().toLowerCase(),Ge=$e.filter(nt=>nt.name.toLowerCase().includes(ht)||nt.specialty&&nt.specialty.toLowerCase().includes(ht));D(Ge)},be=>{console.error("ReviewsHubPage: Error fetching doctors with onSnapshot (outer listener):",be),l("Error loading doctors.","error"),He(!1),ut(!0)});return()=>{console.log("ReviewsHubPage: Cleaning up doctor onSnapshot listener for previous hospital."),Pe()}},[r,o,l,N]);O.useEffect(()=>{le&&rs.current&&document.activeElement!==document.getElementById("hospital-input")&&(console.log("ReviewsHubPage: Scrolling useEffect triggered for doctor selection section."),setTimeout(()=>{requestAnimationFrame(()=>{rs.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[le]),O.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering doctors triggered. DoctorInput:",N);const K=N.trim().toLowerCase(),we=S.filter(Pe=>Pe.name.toLowerCase().includes(K)||Pe.specialty&&Pe.specialty.toLowerCase().includes(K));D(we)},[S,N]);const ar=O.useCallback(async K=>{if(K.preventDefault(),!t||s){l("You must be logged in to add a doctor. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!le||!le.id){l("Please select a hospital first to add a doctor.","error");return}if(!jr.trim()||!ir.trim()){l("Please enter both doctor name and specialty.","error");return}try{const Pe={id:Date.now().toString(),hospitalId:le.id,name:jr.trim(),specialty:ir.trim(),averageRating:0,numReviews:0,numComments:0};b(Se=>[...Se,Pe].sort(($e,ht)=>$e.name.localeCompare(ht.name))),Er(""),Mr(""),ln(!1);const be=xn(Bn(r,`artifacts/${o}/public/data/hospitals/${le.id}/doctors`));await Pl(be,{name:Pe.name,specialty:Pe.specialty,createdAt:new Date().toISOString(),createdBy:t,averageRating:0,numReviews:0,numComments:0}),l(`Dr. ${Pe.name} added successfully to ${le.name}!`,"success"),Fr.current&&setTimeout(()=>{const Se=document.querySelector(`button.bg-gray-100[data-doctor-name="${Pe.name}"]`);Se&&Se.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(we){console.error("ReviewsHubPage: Error adding doctor:",we),l(`Error adding doctor: ${we.message}`,"error"),b(Pe=>Pe.filter(be=>be.id!==tempId))}},[t,s,r,o,le,jr,ir,l,d]),Ns=O.useCallback(async K=>{console.log("ReviewsHubPage: handleDoctorSelect called for doctor:",K.name),q(K),R(K.name),G(!0),Ae(!1),or(!0),Kn.current&&(console.log("ReviewsHubPage: Scrolling to doctor reviews display section."),setTimeout(()=>{requestAnimationFrame(()=>{Kn.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[]);O.useEffect(()=>{let K=()=>{};const we={},Pe={};if(ue&&r&&o){const be=Bn(r,`artifacts/${o}/public/data/hospitals/${ue.hospitalId}/doctors/${ue.id}/reviews`);console.log("ReviewsHubPage: Setting up onSnapshot for reviewsColRef:",be.path),K=ai(be,Se=>{console.log("ReviewsHubPage: onSnapshot triggered for reviewsColRef."),G(!1);const $e=[],ht={},Ge={};Se.forEach(nt=>{const ft=nt.data(),rt=nt.id,Dn=Bn(r,`artifacts/${o}/public/data/hospitals/${ue.hospitalId}/doctors/${ue.id}/reviews/${rt}/comments`);ht[rt]=ai(Dn,un=>{const yt=un.docs.map(vt=>({id:vt.id,...vt.data(),date:vt.data().date&&typeof vt.data().date.toDate=="function"?vt.data().date.toDate():new Date(vt.data().date)}));oe(vt=>{var ur;const vn=vt.map(St=>St.id===rt?{...St,comments:yt}:St);if(!vn.some(St=>St.id===rt)){const St=((ur=Se.docs.find(_n=>_n.id===rt))==null?void 0:ur.data())||ft;return[...vn,{...St,id:rt,comments:yt,likes:[]}].sort((_n,Ur)=>(Ur.date?Ur.date.getTime():0)-(_n.date?_n.date.getTime():0))}return vn})});const At=Bn(r,`artifacts/${o}/public/data/hospitals/${ue.hospitalId}/doctors/${ue.id}/reviews/${rt}/likes`);Ge[rt]=ai(At,un=>{const yt=un.docs.map(vt=>vt.id);oe(vt=>{var ur;const vn=vt.map(St=>St.id===rt?{...St,likes:yt}:St);if(!vn.some(St=>St.id===rt)){const St=((ur=Se.docs.find(_n=>_n.id===rt))==null?void 0:ur.data())||ft;return[...vn,{...St,id:rt,comments:[],likes:yt}].sort((_n,Ur)=>(Ur.date?Ur.date.getTime():0)-(_n.date?_n.date.getTime():0))}return vn})}),$e.push({id:rt,...ft,date:ft.date&&typeof ft.date.toDate=="function"?ft.date.toDate():new Date(ft.date),comments:[],likes:[]})}),Object.keys(we).forEach(nt=>{ht[nt]||we[nt]()}),Object.keys(Pe).forEach(nt=>{Ge[nt]||Pe[nt]()}),Object.assign(we,ht),Object.assign(Pe,Ge),$e.sort((nt,ft)=>{const rt=nt.date?nt.date.getTime():0;return(ft.date?ft.date.getTime():0)-rt}),oe($e),Ae($e.length===0),console.log("ReviewsHubPage: Reviews state updated. Current reviews count:",$e.length)},Se=>{console.error("ReviewsHubPage: Error fetching reviews with onSnapshot:",Se),l("Error loading reviews.","error"),G(!1),Ae(!0)})}else oe([]),Ae(!1),G(!1);return()=>{console.log("ReviewsHubPage: Cleaning up reviews onSnapshot listener."),K(),Object.values(we).forEach(be=>be()),Object.values(Pe).forEach(be=>be())}},[ue,r,o,l]);const lr=O.useCallback(async()=>{var we,Pe;if(console.log("ReviewsHubPage: handleSubmitReview called."),!t||s){l("You must be logged in to submit a review. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!le||!ue){l("Please select a hospital and doctor before submitting a review.","error");return}if(ze===Ho[0]||ze.trim()===""){l("Please select or type your nursing field.","error");return}const K=Lv(Ve);if(!K.isValid){l(K.message,"error");return}console.log("ReviewsHubPage: auth.currentUser?.displayName at submission:",(we=e.currentUser)==null?void 0:we.displayName);try{const be=Bn(r,`artifacts/${o}/public/data/hospitals/${le.id}/doctors/${ue.id}/reviews`),Se=xn(r,`artifacts/${o}/public/data/hospitals/${le.id}/doctors/${ue.id}`),$e={stars:0,comment:Ve,reviewerId:t,reviewerDisplayName:((Pe=e.currentUser)==null?void 0:Pe.displayName)||`RN-${t.substring(0,5)}`,date:new Date,nursingField:ze,hospitalId:le.id,doctorId:ue.id};console.log("ReviewsHubPage: Submitting new review data:",$e),await nf(r,async ht=>{const Ge=xn(be);ht.set(Ge,$e);const nt=Ge.id,ft=xn(r,`artifacts/${o}/users/${t}/myReviews/${nt}`);ht.set(ft,{...$e,id:nt,userId:t});const rt=await ht.get(Se);if(rt.exists()){const Dn=rt.data(),At=Dn.numReviews||0,un=(Dn.averageRating||0)*At,yt=At+1,vt=un+$e.stars,vn=yt>0?vt/yt:0;ht.update(Se,{numReviews:yt,averageRating:vn})}else console.warn("ReviewsHubPage: Doctor document not found for updating review counts.")}),Oe(""),je(Ho[0]),et(""),l("Review submitted successfully!","success"),console.log("ReviewsHubPage: Review submitted successfully!"),or(!0)}catch(be){console.error("ReviewsHubPage: Error adding review: ",be),l(`Error submitting review: ${be.message}`,"error")}},[t,s,le,ue,Ve,ze,r,o,l,d,e]),Ds=O.useCallback(async(K,we)=>{var be;if(console.log("ReviewsHubPage: handleAddCommentToReview called for reviewId:",K),!t||s){l("You must be logged in to add a comment. Please sign up or log in.","error"),d(!0);return}if(we.trim()===""){l("Comment cannot be empty.","error");return}if(!le||!ue){l("Hospital or doctor not selected.","error");return}const Pe=Lv(we);if(!Pe.isValid){l(Pe.message,"error");return}try{const Se=Bn(r,`artifacts/${o}/public/data/hospitals/${le.id}/doctors/${ue.id}/reviews/${K}/comments`),$e=xn(r,`artifacts/${o}/public/data/hospitals/${le.id}/doctors/${ue.id}`),ht={text:we,userId:t,userDisplayName:((be=e.currentUser)==null?void 0:be.displayName)||`RN-${t.substring(0,5)}`,date:new Date};await nf(r,async Ge=>{const nt=xn(Se);Ge.set(nt,ht);const ft=nt.id,rt=xn(r,`artifacts/${o}/users/${t}/myReviews/${K}`);if(!(await Ge.get(rt)).exists()){const yt=xn(r,`artifacts/${o}/public/data/hospitals/${le.id}/doctors/${ue.id}/reviews/${K}`),vt=await Ge.get(yt);vt.exists()&&Ge.set(rt,{...vt.data(),id:K,userId:t,hospitalId:le.id,doctorId:ue.id,comments:[],likes:[]})}const At=Bn(r,`artifacts/${o}/users/${t}/myReviews/${K}/comments`);Ge.set(xn(At,ft),ht);const un=await Ge.get($e);if(un.exists()){const vt=un.data().numComments||0;Ge.update($e,{numComments:vt+1})}else console.warn("ReviewsHubPage: Doctor document not found for updating comment counts.")}),Pn(Ge=>({...Ge,[K]:""})),Nt(Ge=>({...Ge,[K]:"Comment posted successfully!"})),setTimeout(()=>{An(Ge=>({...Ge,[K]:!1})),Nt(Ge=>({...Ge,[K]:""}))},1500)}catch(Se){console.error("ReviewsHubPage: Error adding comment to review: ",Se),l(`Error posting comment: ${Se.message}`,"error")}},[t,s,le,ue,r,o,l,d,e]),ss=O.useCallback(async K=>{if(console.log("ReviewsHubPage: handleLikeReview called for reviewId:",K),!t||s){l("You must be logged in to like a review. Please sign up or log in.","info"),d(!0);return}if(!r||!o||!le||!ue){l("Firebase or selected doctor/hospital data not ready.","error");return}try{const we=xn(r,`artifacts/${o}/public/data/hospitals/${le.id}/doctors/${ue.id}/reviews/${K}/likes/${t}`),Pe=xn(r,`artifacts/${o}/users/${t}/myReviews/${K}/likes/${t}`);await nf(r,async be=>{(await be.get(we)).exists()?(be.delete(we),be.delete(Pe),l("Review unliked.","info")):(be.set(we,{timestamp:new Date}),be.set(Pe,{timestamp:new Date}),l("Review liked!","success"))})}catch(we){console.error("ReviewsHubPage: Error liking/unliking review: ",we),l(`Error processing like: ${we.message}`,"error")}},[t,s,r,o,le,ue,l,d]);O.useCallback(()=>{if(!t||s){l("You must be logged in to write a review. Please sign up or log in.","error"),d(!0);return}if(or(!1),Kn.current){const K=Kn.current.querySelector("#review-submission-form-container");K&&K.scrollIntoView({behavior:"smooth",block:"start"})}},[t,s,l,d]),O.useCallback(()=>{or(!0),Kn.current&&Kn.current.scrollIntoView({behavior:"smooth",block:"start"})},[]);const Ai=K=>{const we=K.target.value;if(et(we),je(we),we.length>0){const Pe=Ho.filter(be=>be.toLowerCase().includes(we.toLowerCase())&&be!==Ho[0]);he(Pe),ge(!0)}else he([]),ge(!1),je(Ho[0])},Tr=K=>{et(K),je(K),ge(!1),he([])};return y.jsx(DP,{children:y.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8 pt-20",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:[y.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:["Share Your RN",y.jsx("span",{className:"text-[#CC5500]",children:"Tea"}),"!"]}),y.jsxs("section",{id:"hospital-selection-section",className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[y.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Find Your Hospital"}),y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[y.jsx("input",{type:"text",id:"hospital-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Search for a hospital...",value:f,onChange:K=>m(K.target.value)}),y.jsx("button",{id:"search-hospital-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Hospital"})]}),y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a hospital.","info"),d(!0)):bn(K=>!K)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:Wt&&t&&!s?"Hide Add Hospital Form":y.jsxs(y.Fragment,{children:["or ",y.jsx("span",{className:"text-[#CC5500]",children:"Add Hospital"})]})}),Wt&&(!t||s)&&y.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a hospital."}),Wt&&t&&!s&&y.jsxs("form",{ref:Ps,onSubmit:bs,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[y.jsx("input",{type:"text",placeholder:"New Hospital Name",value:an,onChange:K=>kn(K.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("input",{type:"text",placeholder:"Location (e.g., Boston, MA)",value:Xt,onChange:K=>ie(K.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Hospital"}),y.jsx("button",{type:"button",onClick:()=>bn(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]})]}),y.jsxs("div",{className:"mb-4 mt-8",children:[y.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Hospitals with reviews:"}),y.jsxs("div",{id:"hospitals-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[L&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading hospitals..."}),H&&!L&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No hospitals found yet. Be the first to add a review!"}),E.map(K=>y.jsx("button",{"data-hospital-name":K.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>Nn(K),children:K.name},K.id))]}),ee&&y.jsx("button",{id:"load-more-hospitals-btn",className:"mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 w-full btn-hover-scale",onClick:ks,children:"Load More Hospitals"})]})]}),y.jsxs("section",{id:"doctor-selection-section",ref:rs,className:`bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${le?"":"hidden"}`,children:[y.jsx("h2",{className:"2xl:text-3xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Select A Doctor"}),y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[y.jsx("input",{type:"text",id:"doctor-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"e.g., Dr. Sarah Lee",value:N,onChange:K=>R(K.target.value)}),y.jsx("button",{id:"select-doctor-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Doctor"})]}),y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a doctor.","info"),d(!0)):ln(K=>!K)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:fe&&t&&!s?"Hide Add Doctor Form":y.jsxs(y.Fragment,{children:["or ",y.jsx("span",{className:"text-[#CC5500]",children:"Add Doctor"})]})}),fe&&(!t||s)&&y.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a doctor."}),fe&&t&&!s&&y.jsxs("form",{ref:Fr,onSubmit:ar,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[y.jsx("input",{type:"text",placeholder:"New Doctor Name",value:jr,onChange:K=>Er(K.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("input",{type:"text",placeholder:"Specialty (e.g., Cardiologist)",value:ir,onChange:K=>Mr(K.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Doctor"}),y.jsx("button",{type:"button",onClick:()=>ln(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Doctors with reviews:"}),y.jsxs("div",{id:"doctors-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[C&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading doctors..."}),at&&!C&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No doctors found for this hospital yet."}),P.map(K=>y.jsx("button",{"data-doctor-name":K.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>Ns(K),children:`${K.name} (${K.numReviews})`},K.id))]})]})]}),y.jsxs("section",{id:"doctor-reviews-display",ref:Kn,className:`bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${ue?"":"hidden"}`,children:[y.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:["Psst... Here's The Tea On ",y.jsx("span",{id:"display-selected-doctor-reviews",className:"text-[#CC5500] font-extrabold",children:ue&&ue.name?ue.name:""})]}),t&&!s&&ns&&y.jsx("div",{className:"text-center mb-6",children:y.jsxs("button",{onClick:()=>{!t||s?(l("Login or Sign Up to share your tea.","info"),d(!0)):or(!1)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:["Have Some Tea? ",y.jsx("span",{className:"text-[#CC5500]",children:"Spill it!"})]})}),(!t||s)&&ns&&y.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to share your tea."}),!ns&&t&&!s&&y.jsxs("div",{id:"review-submission-form-container",className:"mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-gray-800",children:["Share Your Tea for ",y.jsx("span",{className:"text-[#CC5500]",children:ue==null?void 0:ue.name})]}),y.jsx("button",{onClick:()=>or(!0),className:"text-gray-600 hover:text-[#CC5500] transition-colors",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]}),y.jsxs("div",{className:"mt-4",children:[y.jsxs("div",{className:"mb-4 relative",children:[y.jsx("label",{htmlFor:"nursing-field-input",className:"block text-gray-700 text-sm font-medium mb-2",children:"Which field of Nursing are you?"}),y.jsx("input",{type:"text",id:"nursing-field-input",className:"w-full p-3 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Start typing your nursing field...",value:Be,onChange:Ai,onFocus:()=>ge(!0),onBlur:()=>setTimeout(()=>ge(!1),100)}),se&&Rt.length>0&&y.jsx("ul",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto mt-1",children:Rt.map((K,we)=>y.jsx("li",{className:"p-3 hover:bg-gray-100 cursor-pointer text-gray-800",onMouseDown:Pe=>Pe.preventDefault(),onClick:()=>Tr(K),children:K},we))})]}),y.jsx("textarea",{id:"review-text",className:"w-full p-3 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-custom-beige",rows:"6",placeholder:"Share your experience or review here...",value:Ve,onChange:K=>Oe(K.target.value),maxLength:$c}),y.jsx("button",{id:"submit-review-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full btn-hover-scale",onClick:lr,children:"Submit Review"})]})]}),j&&y.jsx("p",{className:"text-gray-700 italic text-center","aria-live":"polite",children:"Loading reviews..."}),Te&&!j&&y.jsx("p",{className:"text-gray-700 italic text-center",aria:"polite",children:"No reviews found for this doctor yet. Be the first to add one!"}),_e.length>0&&y.jsx("div",{id:"reviews-list",className:"space-y-6",children:_e.map((K,we)=>{const Pe={"@context":"https://schema.org","@type":"Review",itemReviewed:{"@type":"Physician",name:ue==null?void 0:ue.name,url:`https://www.myrntea.com/doctors/${ue==null?void 0:ue.id}`},author:{"@type":"Person",name:K.reviewerDisplayName},reviewBody:K.comment,datePublished:K.date instanceof Date?K.date.toISOString():new Date(K.date).toISOString()},be=K.likes&&t&&K.likes.includes(t);return y.jsxs("div",{className:"p-5 rounded-xl shadow-lg border border-gray-100",style:{backgroundColor:"#fff8e7"},children:[y.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(Pe)}}),y.jsxs("div",{className:"flex items-center mb-4",children:[y.jsx("div",{className:"w-10 h-10 bg-custom-beige rounded-full flex items-center justify-center text-gray-800 font-bold text-lg mr-3 shadow-sm",children:K.reviewerDisplayName?K.reviewerDisplayName.charAt(0).toUpperCase():"RN"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-gray-800",children:K.reviewerDisplayName}),y.jsx("p",{className:"text-sm text-gray-600",children:K.nursingField}),y.jsx("p",{className:"text-xs text-gray-500",children:K.date instanceof Date?K.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]}),y.jsx("p",{className:"text-gray-800 leading-relaxed mb-4 text-base",children:K.comment}),y.jsxs("div",{className:"flex items-center gap-4 border-t border-gray-100 pt-3 mt-3",children:[y.jsxs("button",{onClick:()=>ss(K.id),className:`flex items-center transition-colors ${be?"text-blue-600":"text-gray-600 hover:text-blue-500"}`,children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Like (",K.likes?K.likes.length:0,")"]}),y.jsxs("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a comment.","info"),d(!0)):An(Se=>({...Se,[K.id]:!Se[K.id]}))},className:"flex items-center text-gray-600 hover:text-green-500 transition-colors",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Comment (",K.comments?K.comments.length:0,")"]})]}),y.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[y.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Comments on this review:"})," ",K.comments&&K.comments.length>0?y.jsx("div",{className:"space-y-3",children:K.comments.map((Se,$e)=>y.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[y.jsxs("div",{className:"flex items-center mb-1",children:[y.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-800 text-xs font-semibold mr-2",children:Se.userDisplayName?Se.userDisplayName.charAt(0).toUpperCase():"U"}),y.jsx("p",{className:"font-medium text-gray-800",children:Se.userDisplayName}),y.jsx("p",{className:"text-xs text-gray-500 ml-auto",children:Se.date instanceof Date?Se.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),y.jsx("p",{className:"ml-8 text-gray-700",children:Se.text})]},Se.id||Se.date.getTime()+"_"+$e))}):y.jsx("p",{className:"text-sm text-gray-500",children:"No comments on this review yet."}),Ue[K.id]&&t&&!s&&y.jsxs("div",{className:"flex mt-2",children:[y.jsx("input",{type:"text",placeholder:"Write a comment...",className:"flex-grow p-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:Se=>{Se.key==="Enter"&&Se.target.value.trim()&&(Ds(K.id,Se.target.value),Se.target.value="")},value:Ut[K.id]||"",onChange:Se=>Pn($e=>({...$e,[K.id]:Se.target.value})),maxLength:$c}),y.jsx("button",{className:"submit-comment-btn bg-custom-beige text-gray-800 px-4 py-2 rounded-r-md hover:opacity-90 transition duration-200 btn-hover-scale",onClick:()=>{const Se=Ut[K.id];Ds(K.id,Se)},children:"Post"})]}),Gn[K.id]&&y.jsx("p",{className:"text-green-600 text-sm mt-2",children:Gn[K.id]})]})]},K.id)})})]})]})})},VP=()=>{const r=ca(),{auth:e,showMessage:t,appId:s}=O.useContext($l),[o,l]=O.useState(""),[d,f]=O.useState(""),[m,v]=O.useState(""),[T,E]=O.useState(""),[x,L]=O.useState(""),[$,H]=O.useState(!1);O.useEffect(()=>{if(r.hash){const ee=r.hash.substring(1),re=document.getElementById(ee),Y=document.querySelector("header");re&&setTimeout(()=>{let ce=0;Y&&(ce=Y.offsetHeight);const de=re.getBoundingClientRect().top+window.pageYOffset-ce-10;window.scrollTo({top:de,behavior:"smooth"})},150)}},[r.hash]),O.useEffect(()=>{const ee=document.querySelectorAll(".revealable"),re=new IntersectionObserver((Y,ce)=>{Y.forEach(le=>{le.isIntersecting&&(le.target.style.opacity=1,ce.unobserve(le.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return ee.forEach(Y=>{re.observe(Y)}),()=>{ee.forEach(Y=>{re.unobserve(Y)})}},[]);const M=O.useCallback(async ee=>{var re;if(ee.preventDefault(),H(!0),x){console.warn("Honeypot field filled. Likely a bot submission. Discarding."),t("Thank you for your message!","success"),H(!1);return}if(!o.trim()||!d.trim()||!m.trim()||!T.trim()){t("Please fill in all required fields.","error"),H(!1);return}try{const ce=`${`https://${s}.cloudfunctions.net`}/sendContactEmail`,le=await fetch(ce,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{name:o,email:d,subject:m,message:T}})}),de=await le.json();if(le.ok&&de.data.success)t("Your message has been sent successfully!","success"),l(""),f(""),v(""),E(""),L("");else{const N=((re=de.data)==null?void 0:re.message)||"Failed to send message. Please try again.";t(`Error: ${N}`,"error")}}catch(Y){console.error("Error submitting contact form:",Y),t(`An unexpected error occurred: ${Y.message}`,"error")}finally{H(!1)}},[o,d,m,T,x,t,s]);return y.jsxs(y.Fragment,{children:[y.jsxs("section",{id:"home",className:"relative bg-custom-beige text-gray-800 py-24 px-6 md:px-10 lg:px-16 text-center rounded-lg mx-4 mb-2 shadow-lg overflow-hidden animate-fade-in section-hover",children:[y.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:y.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[y.jsx("defs",{children:y.jsx("pattern",{id:"dot-pattern",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:y.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"#FFC982"})})}),y.jsx("rect",{x:"0",y:"0",width:"100",height:"100",fill:"url(#dot-pattern)"})]})}),y.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[y.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 leading-tight animate-fade-in-down drop-shadow-md",children:"RNTea: Real Nurse Truth"}),y.jsx("p",{className:"text-xl md:text-2xl mb-10 text-gray-700 animate-fade-in-up",children:" For nurses, by nurses  unfiltered and anonymous. Not your hospitals suggestion box. "}),y.jsx($n,{to:"#how-it-works",className:"bg-white text-gray-800 hover:bg-gray-100 font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 hover:shadow-2xl border border-gray-200 animate-fade-in-up antialiased",children:" Get Started "})]})]}),y.jsx("section",{id:"about",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 mt-2 mb-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:y.jsxs("div",{className:"container mx-auto",children:[y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12 mb-20",children:[" ",y.jsx("div",{className:"md:w-1/2 flex justify-center order-2 md:order-1 animate-slide-in-left",children:y.jsx("img",{src:"/Express-collage.jpg",alt:"Collage of diverse medical professionals working together",className:"rounded-lg shadow-xl border-4 w-full max-w-md object-cover",onError:ee=>{ee.target.onerror=null,ee.target.src="https://placehold.co/400x300/F0F0F0/888888?text=Image+Not+Loaded"}})}),y.jsxs("div",{className:"md:w-1/2 text-center md:text-left order-1 md:order-2 animate-slide-in-right",children:[y.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-6",children:"Our Philosophy"}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-4 antialiased",children:"At RNTea, we believe nurses deserve a space to speak their truth. Created by RNs for RNs, our platform is a no-fluff, judgment-free zone where you can safely and anonymously share the real stories, frustrations, and unspoken realities of working alongside doctors and within the healthcare system."}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed antialiased",children:"Think of it as the breakroombut digital, secure, and way more therapeutic. Whether youre venting, validating, or just vibing with others who get it, RNTea is where your voice matters. Sip, spill, and scroll with the tribe that really understands what happens when the patient door closes."}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mt-4 font-semibold antialiased",children:"Now spill some RNTea!"})]})]}),y.jsxs("div",{id:"how-it-works",className:"text-center py-16 rounded-lg shadow-inner",children:[" ",y.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-12",children:"How It Works"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 max-w-5xl mx-auto",children:[" ",y.jsxs($n,{to:"#full-reviews-hub",className:"group flex flex-col items-center p-6 bg-white rounded-lg shadow-md animate-fade-in transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-lg cursor-pointer",children:[" ",y.jsx("div",{className:"mb-4",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-custom-orange transition duration-300 ease-in-out group-hover:text-[#FFDEB5]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-3",children:"Share anonymously"}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"Submit your experience with no names, no risk."})]}),y.jsxs($n,{to:"#full-reviews-hub",className:"group flex flex-col items-center p-6 bg-white rounded-lg shadow-md animate-fade-in delay-100 transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-lg cursor-pointer",children:[" ",y.jsx("div",{className:"mb-4",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-custom-orange transition duration-300 ease-in-out group-hover:text-[#FFDEB5]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-3",children:"Nurses-only vibes"}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"Only nurses get full access."})]}),y.jsxs($n,{to:"#full-reviews-hub",className:"group flex flex-col items-center p-6 bg-white rounded-lg shadow-md animate-fade-in delay-200 transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-lg cursor-pointer",children:[" ",y.jsx("div",{className:"mb-4",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-custom-orange transition duration-300 ease-in-out group-hover:text-[#FFDEB5]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-3",children:"Browse by hospital, doctor, or theme"}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"The real reviews doctors never see."})]})]}),y.jsxs("div",{className:"text-center mt-12",children:[" ",y.jsx($n,{to:"#full-reviews-hub",className:"bg-custom-beige text-gray-800 hover:bg-gray-100 font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 hover:shadow-2xl border border-gray-200 animate-fade-in antialiased",children:"Ready To Get Some Tea?"})]})]})]})}),y.jsx("section",{id:"full-reviews-hub",className:"relative z-10 scroll-margin-top-adjusted revealable",children:y.jsx(Nw,{})}),y.jsx("section",{id:"contact",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 my-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:y.jsxs("div",{className:"container mx-auto",children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 text-center mb-16 animate-fade-in-down",children:"Contact Us!"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[y.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-left group relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),y.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Send us a Message"}),y.jsxs("form",{onSubmit:M,children:[y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"your-name",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Name"}),y.jsx("input",{type:"text",id:"your-name",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"John Doe",value:o,onChange:ee=>l(ee.target.value),required:!0})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"your-email",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Email"}),y.jsx("input",{type:"email",id:"your-email",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"you@example.com",value:d,onChange:ee=>f(ee.target.value),required:!0})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"subject",className:"block text-gray-700 text-sm font-medium mb-2",children:"Subject"}),y.jsx("input",{type:"text",id:"subject",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Regarding a review...",value:m,onChange:ee=>v(ee.target.value),required:!0})]}),y.jsxs("div",{className:"mb-6",children:[y.jsxs("label",{htmlFor:"your-message",className:"block text-gray-700 text-sm font-medium mb-2",children:["Your Message ",y.jsx("span",{className:"text-gray-500",children:"(optional)"})]}),y.jsx("textarea",{id:"your-message",rows:"5",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Share your experience... (optional)",value:T,onChange:ee=>E(ee.target.value),required:!0})]}),y.jsxs("div",{style:{display:"none"},children:[y.jsx("label",{htmlFor:"honeypot-field",children:"Leave this field blank"}),y.jsx("input",{type:"text",id:"honeypot-field",name:"honeypot",value:x,onChange:ee=>L(ee.target.value),tabIndex:"-1",autoComplete:"off"})]}),y.jsx("button",{type:"submit",className:"bg-[#FFDEB5] hover:bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-md w-full transition duration-300 ease-in-out",disabled:$,children:$?"Sending...":"Send Message"})]})]}),y.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-right group relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),y.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Find Us"}),y.jsxs("div",{className:"mb-8",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Email Addresses"}),y.jsxs("div",{className:"flex items-center mb-3",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-700 font-medium",children:"General Questions"}),y.jsx("a",{href:"mailto:questions@rntea.com",className:"text-blue-600 hover:underline",children:"questions@rntea.com"})]})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15.75c-2.648 0-5.195-.429-7.669-1.245a2.793 2.793 0 01-1.342-2.934 11.233 11.233 0 013.744-6.436 2.922 2.922 0 011.644-1.018 10.38 10.38 0 015.894 0 2.922 2.922 0 011.644 1.018 11.233 11.233 0 013.744 6.436 2.793 2.793 0 01-1.342 2.934z"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-700 font-medium",children:"Business Inquiries"}),y.jsx("a",{href:"mailto:business@rntea.com",className:"text-blue-600 hover:underline",children:"business@rntea.com"})]})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Connect with Us"}),y.jsxs("div",{className:"flex space-x-6 justify-start",children:[y.jsx("a",{href:"https://www.facebook.com/profile.php?id=61578820435340",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-600 hover:text-blue-700 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.271 0-4.192 1.552-4.192 4.615v3.385z"})})}),y.jsx("a",{href:"https://twitter.com/rntea_official",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-gray-800 hover:text-black transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 1200 1227",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 671.544L0 1226.37H105.866L515.414 750.206L852.076 1226.37H1200L714.163 519.284ZM569.165 687.828L521.617 619.927L144.036 79.6262H302.46L603.935 515.043L651.483 582.944L1055.03 1147.37H896.59L569.165 687.828Z"})})}),y.jsx("a",{href:"https://linkedin.com/company/rntea/",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-700 hover:text-blue-800 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),y.jsx("a",{href:"https://www.instagram.com/myrntea/",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-pink-500 hover:text-pink-600 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4c0 3.2-2.6 5.8-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8C2 4.6 4.6 2 7.8 2zm-.2 2A2.2 2.2 0 0 0 5.4 6.2v8.4c0 1.2.9 2.2 2.2 2.2h8.4a2.2 2.2 0 0 0 2.2-2.2V6.2A2.2 2.2 0 0 0 16.2 4H7.6zM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm6.5-3A1.5 1.5 0 1 0 18.5 7 1.5 1.5 0 0 0 18.5 4z"})})})]})]})]})]})]})})]})},OP=()=>{const{db:r,currentUserId:e,appId:t,showMessage:s,setShowAuthModal:o,currentUserIsAnonymous:l}=O.useContext($l),[d,f]=O.useState([]),[m,v]=O.useState(!0);O.useEffect(()=>{let E=()=>{};const x={},L={};if(!r||!t||!e){v(!1);return}v(!0);const $=Bn(r,`artifacts/${t}/users/${e}/myReviews`),H=wP($,EP("userId","==",e));return E=ai(H,M=>{console.log("MyReviewsDisplay: onSnapshot triggered for user reviews.");const ee=[],re={},Y={};M.forEach(ce=>{const le=ce.data(),de=ce.id,N=Bn(r,`artifacts/${t}/users/${e}/myReviews/${de}/comments`);re[de]=ai(N,S=>{const b=S.docs.map(P=>({id:P.id,...P.data(),date:P.data().date&&typeof P.data().date.toDate=="function"?P.data().date.toDate():new Date(P.data().date)}));f(P=>{const D=P.map(C=>C.id===de?{...C,comments:b}:C);return D.some(C=>C.id===de)?D:[...D,{...le,id:de,comments:b,likes:[]}].sort((C,He)=>(He.date?He.date.getTime():0)-(C.date?C.date.getTime():0))})});const R=Bn(r,`artifacts/${t}/users/${e}/myReviews/${de}/likes`);Y[de]=ai(R,S=>{const b=S.docs.map(P=>P.id);f(P=>{const D=P.map(C=>C.id===de?{...C,likes:b}:C);return D.some(C=>C.id===de)?D:[...D,{...le,id:de,comments:[],likes:b}].sort((C,He)=>(He.date?He.date.getTime():0)-(C.date?C.date.getTime():0))})}),ee.push({id:de,...le,date:le.date&&typeof le.date.toDate=="function"?le.date.toDate():new Date(le.date),comments:[],likes:[]})}),Object.keys(x).forEach(ce=>{re[ce]||x[ce]()}),Object.keys(L).forEach(ce=>{Y[ce]||L[ce]()}),Object.assign(x,re),Object.assign(L,Y),ee.sort((ce,le)=>(le.date?le.date.getTime():0)-(ce.date?ce.date.getTime():0)),f(ee),v(!1),console.log("MyReviewsDisplay: Fetched user reviews:",ee.length)},M=>{console.error("MyReviewsDisplay: Error fetching user's reviews:",M),s("Error loading your reviews.","error"),v(!1)}),()=>{console.log("MyReviewsDisplay: Cleaning up onSnapshot listeners."),E(),Object.values(x).forEach(M=>M()),Object.values(L).forEach(M=>M())}},[r,t,e,s]);const T=O.useCallback(async(E,x,L)=>{if(console.log("MyReviewsDisplay: handleLikeReview called for reviewId:",E),!e||l){s("You must be logged in to like a review. Please sign up or log in.","info"),o(!0);return}if(!r||!t||!x||!L){s("Firebase or review data missing for like operation.","error");return}try{const $=xn(r,`artifacts/${t}/public/data/hospitals/${x}/doctors/${L}/reviews/${E}/likes/${e}`),H=await getDoc($),M=xn(r,`artifacts/${t}/users/${e}/myReviews/${E}/likes/${e}`);H.exists()?(await Ov($),await Ov(M),s("Review unliked.","info")):(await Pl($,{timestamp:new Date}),await Pl(M,{timestamp:new Date}),s("Review liked!","success"))}catch($){console.error("MyReviewsDisplay: Error liking/unliking review: ",$),s(`Error processing like: ${$.message}`,"error")}},[e,l,r,t,s,o]);return m?y.jsx("div",{className:"flex justify-center items-center h-48",children:y.jsx("p",{className:"text-center text-gray-500 italic",children:"Loading your reviews..."})}):d.length===0?y.jsx("div",{className:"flex justify-center items-center h-48",children:y.jsx("p",{className:"text-center text-gray-500 italic",children:"You haven't posted any reviews yet. Share your first tea!"})}):y.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:"My Tea"}),y.jsx("p",{className:"text-lg text-gray-700 text-center mb-6",children:"Here's a look at the reviews you've shared and the engagement they've received."}),y.jsx("div",{className:"space-y-8",children:d.map(E=>{const x=E.likes&&e&&E.likes.includes(e);return y.jsxs("div",{className:"p-6 rounded-xl shadow-lg border border-gray-100 bg-white",children:[y.jsxs("div",{className:"flex items-center mb-4",children:[y.jsx("div",{className:"w-10 h-10 bg-custom-beige rounded-full flex items-center justify-center text-gray-800 font-bold text-lg mr-3 shadow-sm",children:E.reviewerId?E.reviewerId.charAt(0).toUpperCase():"RN"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-gray-800",children:E.reviewerId}),y.jsx("p",{className:"text-sm text-gray-600",children:E.nursingField}),y.jsx("p",{className:"text-xs text-gray-500",children:E.date instanceof Date?E.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]}),y.jsx("p",{className:"text-gray-800 leading-relaxed mb-4 text-base",children:E.comment}),y.jsxs("div",{className:"flex items-center gap-4 border-t border-gray-100 pt-3 mt-3",children:[y.jsxs("button",{onClick:()=>T(E.id,E.hospitalId,E.doctorId),className:`flex items-center transition-colors ${x?"text-blue-600":"text-gray-600 hover:text-blue-500"}`,children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Like (",E.likes?E.likes.length:0,")"]}),y.jsxs("span",{className:"flex items-center text-gray-600",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Comment (",E.comments?E.comments.length:0,")"]})]}),y.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[y.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Comments on your review:"}),E.comments&&E.comments.length>0?y.jsx("div",{className:"space-y-3",children:E.comments.map((L,$)=>y.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[y.jsxs("div",{className:"flex items-center mb-1",children:[y.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-800 text-xs font-semibold mr-2",children:L.userId?L.userId.charAt(0).toUpperCase():"U"}),y.jsx("p",{className:"font-medium text-gray-800",children:L.userId}),y.jsx("p",{className:"text-xs text-gray-500 ml-auto",children:L.date instanceof Date?L.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),y.jsx("p",{className:"ml-8 text-gray-700",children:L.text})]},L.id||L.date.getTime()+"_"+$))}):y.jsx("p",{className:"text-sm text-gray-500",children:"No comments on this review yet."})]})]},E.id)})})]})};function LP({onClose:r}){const e=O.useRef(null);return O.useEffect(()=>{const t=s=>{s.key==="Escape"&&r()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[r]),O.useEffect(()=>{const t=o=>{e.current&&!e.current.contains(o.target)&&r()},s=setTimeout(()=>{document.addEventListener("mousedown",t)},100);return()=>{clearTimeout(s),document.removeEventListener("mousedown",t)}},[r]),y.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{ref:e,className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative p-6 md:p-8",children:[y.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl font-bold leading-none","aria-label":"Close",children:""}),y.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-6 text-center",children:"The RNTea business Data Protection Protocol"}),y.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mt-8 mb-4 text-center",children:"Version 2.1 | Effective Date: July 12, 2025"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Preamble"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:'WHEREAS, RNTea business ("RNTea business," "we," "our") is a data-driven enterprise that values the trust placed in it by its users, clients, and partners ("Data Subjects," "you," "your");'}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the processing of personal data is a fundamental aspect of our operations;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the protection of personal data is a fundamental right, as articulated in international and national legal frameworks, including but not limited to the GDPR (Regulation (EU) 2016/679) and the CCPA (California Civil Code  1798.100 et seq.), and other applicable data protection laws;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, this Protocol is designed to be a comprehensive, transparent, and legally compliant framework governing our collection, use, retention, and disclosure of personal data;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"THEREFORE, RNTea business hereby establishes this Data Protection Protocol, which applies to all processing of personal data by the company."}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article I: Foundational Principles of Data Processing"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business adheres to the following principles, which govern all data processing activities:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Lawfulness, Fairness, and Transparency:"})," We process personal data lawfully, fairly, and in a transparent manner. This Protocol serves as the primary instrument for achieving this transparency."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Purpose Limitation:"})," We collect personal data for specified, explicit, and legitimate purposes and do not process it in a manner incompatible with those purposes."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Data Minimization:"})," We collect only the personal data that is adequate, relevant, and limited to what is necessary in relation to the purposes for which it is processed."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Accuracy:"})," We take every reasonable step to ensure that personal data is accurate and, where necessary, kept up to date. Inaccurate personal data will be rectified or erased without undue delay."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Storage Limitation:"})," We retain personal data for no longer than is necessary for the purposes for which it is processed."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Integrity and Confidentiality:"})," We process personal data in a manner that ensures appropriate security, including protection against unauthorized or unlawful processing and against accidental loss, destruction, or damage, using appropriate technical and organizational measures."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Accountability:"})," As the data controller, RNTea business is responsible for, and must be able to demonstrate compliance with, the principles outlined in this Protocol."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article II: Categories of Personal Data Collected & Lawful Basis"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"The personal data we process falls into the following categories, with the corresponding lawful basis for processing:"}),y.jsx("div",{className:"overflow-x-auto mb-4",children:y.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Category of Data"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Examples of Data Collected"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Purpose of Processing"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Lawful Basis for Processing"})]})}),y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Identity & Account Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Name, email address, username, password (hashed), professional title"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To create and manage your account, provide access to services, and communicate with you."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Contractual Necessity:"})," The processing is necessary for the performance of a contract to which you are a party."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Transactional Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Billing address, payment information (tokenized), subscription history"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To process payments, manage subscriptions, and maintain financial records."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Contractual Necessity:"})," Necessary to fulfill a transaction you initiated. ",y.jsx("strong",{children:"Legal Obligation:"})," To comply with tax and accounting laws."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Technical & Usage Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"IP address, browser type, operating system, pages visited, time spent, clickstream data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To ensure the security and stability of our platform, analyze usage patterns, and improve our services."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Legitimate Interest:"})," Our legitimate interest in securing our platform, preventing fraud, and understanding user behavior to enhance our products."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Correspondence & Support Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Content of emails, chat messages, or support tickets"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To respond to your inquiries, provide customer support, and resolve disputes."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Legitimate Interest:"})," To provide effective customer service. ",y.jsx("strong",{children:"Contractual Necessity:"})," To assist with issues related to our service."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Voluntarily Provided Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Your professional bio, profile picture, or survey responses"}),y.jsxs("td",{className:"py-2 px-4 text-gray-700",children:[y.jsx("strong",{children:"Consent:"})," Your explicit consent is requested and may be withdrawn at any time."]})]})]})]})}),y.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[y.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Legitimate Interest Balancing Test"}),y.jsx("br",{}),`The use of "Legitimate Interest" as a lawful basis is subject to a strict balancing test under the GDPR. A data controller must demonstrate that its interests in processing the data (e.g., security, service improvement) are not overridden by the fundamental rights and freedoms of the Data Subject. This requires a formal assessment and is a point of frequent legal scrutiny. In this model, we assert that the processing of technical data for security purposes is a legitimate interest vital to protecting all users, and a user's reasonable expectation is that such data would be processed for platform integrity.`]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article III: Data Sharing and Disclosure"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"We may share your personal data with the following categories of recipients, always under the principles of data minimization and purpose limitation:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Service Providers:"})," We engage third-party service providers (data processors) who perform functions on our behalf, such as cloud hosting, payment processing, and analytics. These providers are bound by contractual obligations to protect your data and are prohibited from using it for any purpose other than providing their service to us."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Legal and Regulatory Authorities:"})," We will disclose your data when legally required to do so, such as in response to a subpoena, court order, or governmental request."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Business Transfers:"})," In the event of a merger, acquisition, or sale of assets, your personal data may be transferred as part of the business transaction, subject to the recipient agreeing to abide by a privacy policy consistent with this Protocol."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article IV: Data Subject Rights"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"You have the following rights concerning your personal data. To exercise these rights, please contact our Data Protection Officer at the address provided in Article VIII."}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Access:"}),' You have the right to request a copy of the personal data we hold about you (a "Subject Access Request").']}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Rectification:"})," You have the right to request the correction of inaccurate or incomplete personal data."]}),y.jsxs("li",{children:[y.jsx("strong",{children:'Right to Erasure ("Right to be Forgotten"):'})," You have the right to request the deletion of your personal data under certain circumstances (e.g., if the data is no longer necessary for the purposes for which it was collected)."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Restrict Processing:"})," You have the right to request that we cease or limit the processing of your personal data under specific conditions."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Data Portability:"})," You have the right to receive your personal data in a structured, commonly used, and machine-readable format and to transmit that data to another data controller."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Object:"})," You have the right to object to the processing of your personal data based on legitimate interest or for direct marketing purposes."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Withdraw Consent:"})," Where processing is based on your consent, you have the right to withdraw that consent at any time."]})]}),y.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[y.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Practicality of Rights"}),y.jsx("br",{}),'While these rights are fundamental, their implementation is not absolute. For instance, the "Right to Erasure" may be overridden by a legal obligation to retain data (e.g., financial records for tax purposes) or if the data is required for the establishment, exercise, or defense of legal claims. A robust privacy policy must manage user expectations by clarifying these limitations.']}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article V: Data Security"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business implements appropriate technical and organizational measures to ensure a level of security appropriate to the risk. These measures include:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Pseudonymization and Encryption:"})," Where feasible, data is pseudonymized and sensitive data is encrypted both in transit and at rest."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Access Controls:"}),' Access to personal data is restricted to authorized personnel on a "need-to-know" basis.']}),y.jsxs("li",{children:[y.jsx("strong",{children:"Security Audits:"})," We conduct regular security audits and vulnerability assessments."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VI: International Data Transfers"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"As a global company, your data may be transferred to and processed in countries outside your own. We ensure that any such transfer is lawful and adequately protected. For transfers of personal data from the European Union, we rely on established mechanisms such as Standard Contractual Clauses (SCCs)."}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VII: Contact Information"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"For any questions, concerns, or to exercise your rights under this Protocol, please contact our designated Data Protection Officer (DPO):"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"DPO:"})," [Insert DPO Name]"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Email:"})," [Insert DPO Email]"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Mailing Address:"})," [Insert Mailing Address]"]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VIII: Changes to This Protocol"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"This Protocol may be amended from time to time. We will notify you of any material changes by posting the new Protocol on our website or by other means of communication. Your continued use of our services after a change indicates your acceptance of the updated terms."})]})})}const $l=O.createContext(null),Za=null,jP=null;class MP extends li.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("App.jsx ErrorBoundary: Uncaught error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-100 text-red-800 p-4 rounded-lg shadow-lg m-4",children:[y.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong in App.jsx!"}),y.jsx("p",{className:"text-lg mb-2 text-center",children:"We're sorry, but there was an issue rendering the application. Details below:"}),y.jsxs("details",{className:"mt-4 text-left p-4 bg-red-50 rounded-lg border border-red-200 overflow-auto max-w-lg",children:[y.jsx("summary",{className:"font-semibold cursor-pointer text-red-700",children:"Click for Error Details"}),y.jsx("pre",{className:"mt-2 text-sm whitespace-pre-wrap break-words font-mono text-red-900",children:this.state.error&&this.state.error.toString()}),this.state.errorInfo&&y.jsxs("pre",{className:"mt-2 text-xs text-red-600 font-mono whitespace-pre-wrap break-words",children:["Component Stack: ",this.state.errorInfo.componentStack]})]})]}):this.props.children}}function FP(){const[r,e]=O.useState(null),[t,s]=O.useState(null),[o,l]=O.useState(null),[d,f]=O.useState(null),[m,v]=O.useState(!0),[T,E]=O.useState(null),[x,L]=O.useState(!1),[$,H]=O.useState(!0),[M,ee]=O.useState({text:"",type:""}),[re,Y]=O.useState(!1),[ce,le]=O.useState(!1),de=ca();Kv();const[N,R]=O.useState(!1),[S,b]=O.useState(null),P=O.useRef(null),[D,C]=O.useState(!1),[He,at]=O.useState(!1),[ut,ue]=O.useState(0),q=O.useCallback((he,se)=>{ee({text:he,type:se}),setTimeout(()=>ee({text:"",type:""}),5e3)},[]);O.useEffect(()=>{console.log("App.jsx: useEffect for Firebase Initialization triggered."),console.log("App.jsx: Current path detected by React Router:",de.pathname),(async()=>{try{console.log("App.jsx: Loading Firebase...");let se=null,ge="Unknown";const Ue={apiKey:"AIzaSyBEwSVX9UY7-MNxeYwdbY0ZmDuXzYyt56g",authDomain:"rntea-cca78.firebaseapp.com",projectId:"rntea-cca78",storageBucket:"rntea-cca78.appspot.com",messagingSenderId:"806310857835",appId:"1:806310857835:web:b03b05847c818ee4fe352e",measurementId:"G-ZKBPS9FGE"};if(console.log("App.jsx DEBUG: Constructed viteConfig:",Ue),Ue.apiKey&&Ue.projectId&&Ue.appId)se=Ue,ge="Vite Environment Variables (import.meta.env)";else if(!(Za&&Za.apiKey&&Za.projectId&&Za.appId))throw new Error("Firebase configuration is incomplete or missing from both Vite environment variables and Canvas setup. Please ensure either .env file is correct or Canvas variables are provided.");if(console.log(`App.jsx: Firebase config source: ${ge}`),console.log("App.jsx: Firebase config being used (sensitive parts masked):",{apiKey:se!=null&&se.apiKey?"********":"N/A",authDomain:se==null?void 0:se.authDomain,projectId:se==null?void 0:se.projectId,storageBucket:se==null?void 0:se.storageBucket,messagingSenderId:se==null?void 0:se.messagingSenderId,appId:se!=null&&se.appId?"********":"N/A",measurementId:se==null?void 0:se.measurementId}),!se||!se.apiKey||!se.projectId||!se.appId)throw new Error(`Firebase configuration is incomplete from ${ge}. Missing apiKey, projectId, or appId. This should not happen if previous checks passed.`);const An=u0(se),Ut=fC(An),Pn=uP(An);e(An),l(Ut),s(Pn),console.log("App.jsx: Firebase Loaded, Awaiting Auth...");const Gn=GS(Ut,async Nt=>{var Wt,bn,an,kn;if(console.log("App.jsx: onAuthStateChanged - User status changed. User:",Nt),Nt)f(Nt.uid),v(Nt.isAnonymous),E(Nt.displayName);else{console.log("App.jsx: No user found. Checking for custom token.");let Xt=null;try{Xt=typeof __initial_auth_token<"u"?__initial_auth_token:null}catch(ie){console.warn("App.jsx: __initial_auth_token is not declared or accessible:",ie)}if(Xt){console.log("App.jsx: Signing in with custom token...");try{await FS(Ut,Xt),f((Wt=Ut.currentUser)==null?void 0:Wt.uid),v(((bn=Ut.currentUser)==null?void 0:bn.isAnonymous)||!1),E((an=Ut.currentUser)==null?void 0:an.displayName),console.log("App.jsx: Custom token sign-in successful. Current user ID:",(kn=Ut.currentUser)==null?void 0:kn.uid)}catch(ie){console.error("App.jsx: Error during custom token authentication:",ie),q(`Authentication failed: ${ie.message}`,"error"),f(null),v(!0),E(null)}}else console.log("App.jsx: No custom token found. User remains signed out by default."),f(null),v(!0),E(null)}L(!0),H(!1),console.log("App.jsx: Firebase initialization complete. AuthReady:",!0,"LoadingFirebase:",!1)});return()=>{console.log("App.jsx: useEffect cleanup - Unsubscribing from auth state changes."),Gn()}}catch(se){console.error("App.jsx: FATAL ERROR: Failed to initialize Firebase application:",se),q("Failed to initialize application. Please try again later.","error"),H(!1),L(!1)}})()},[de.pathname,Za,q]),window.onloadCallback=()=>{console.log("App.jsx: window.onloadCallback triggered from reCAPTCHA script."),at(!0)},O.useEffect(()=>{x&&o&&He&&typeof window.grecaptcha<"u"&&window.grecaptcha.ready&&!S?(console.log("App.jsx: All prerequisites met. Initializing RecaptchaVerifier..."),window.grecaptcha.ready(()=>{if(S){console.log("App.jsx: RecaptchaVerifier already exists in state, skipping re-initialization."),C(!0),ue(he=>he+1);return}console.log("App.jsx: Creating and rendering RecaptchaVerifier instance...");try{if(!document.getElementById("recaptcha-container-app")){console.error("App.jsx: Central reCAPTCHA container 'recaptcha-container-app' not found!"),q("reCAPTCHA container missing. Phone verification may fail.","error");return}const se=new G0(o,"recaptcha-container-app",{size:"invisible",callback:ge=>{console.log("App.jsx: Central reCAPTCHA callback fired (solved):",ge),C(!0),ue(Ue=>Ue+1)},"expired-callback":()=>{console.log("App.jsx: Central reCAPTCHA expired."),q("Verification expired. Please try again.","error"),C(!1),P.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset(P.current),ue(ge=>ge+1)},"error-callback":ge=>{console.error("App.jsx: reCAPTCHA error callback:",ge),q("Failed to load verification. Please refresh.","error"),C(!1),ue(Ue=>Ue+1)}});se.render().then(ge=>{console.log("App.jsx: Central reCAPTCHA rendered with widget ID:",ge),P.current=ge,b(se),se.size==="invisible"&&C(!0),console.log("App.jsx: recaptchaVerifierState set and isRecaptchaReadyForUse true."),ue(Ue=>Ue+1)}).catch(ge=>{console.error("App.jsx: Error rendering central reCAPTCHA:",ge),q("Failed to initialize verification. Please refresh.","error"),C(!1),ue(Ue=>Ue+1)})}catch(he){console.error("App.jsx: Error creating central RecaptchaVerifier instance:",he),q("Failed to initialize verification. Check console.","error"),C(!1),ue(se=>se+1)}})):S&&S.size==="invisible"&&(D||(C(!0),ue(he=>he+1)))},[x,o,He,q,D,S]),O.useEffect(()=>()=>{S&&(console.log("App.jsx: Cleaning up central reCAPTCHA Verifier..."),P.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"?window.grecaptcha.reset(P.current):window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&(console.warn("App.jsx: Attempting general reCAPTCHA reset as widget ID is null."),window.grecaptcha.reset()),S.clear(),b(null),P.current=null,C(!1),ue(he=>he+1))},[S]);const _e=O.useCallback(async()=>{if(!D||!S||typeof S.execute!="function")throw console.error("App.jsx: reCAPTCHA Verifier not ready for execution. isReady:",D,"instance:",S),q("Verification not ready. Please try again.","error"),new Error("reCAPTCHA not ready.");try{const he=await S.execute();return console.log("App.jsx: reCAPTCHA token obtained:",he),he}catch(he){throw console.error("App.jsx: Error executing reCAPTCHA:",he),q(`Verification failed: ${he.message}`,"error"),he}},[q,D,S]),oe=O.useCallback(()=>{P.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"?(console.log("App.jsx: Resetting central reCAPTCHA widget with ID."),window.grecaptcha.reset(P.current)):window.grecaptcha&&typeof window.grecaptcha.reset=="function"?(console.warn("App.jsx: Attempting general reCAPTCHA reset as widget ID is null."),window.grecaptcha.reset()):console.warn("App.jsx: Cannot reset reCAPTCHA: grecaptcha or reset function not available."),C(!1)},[]),j=O.useCallback(async(he,se)=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const ge=await F0(o,he,se);return q("Account created successfully!","success"),Y(!1),ge.user}catch(ge){throw console.error("Error signing up with email/password:",ge),q(`Sign Up Failed: ${ge.message}`,"error"),ge}},[o,q]),G=O.useCallback(async(he,se)=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const ge=await US(o,he,se);return q("Signed in successfully!","success"),Y(!1),ge.user}catch(ge){return console.error("Error signing in with email/password:",ge),q(`Sign In Failed: ${ge.message}`,"error"),null}},[o,q]),Te=O.useCallback(async()=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const he=new vs;let se;return o.currentUser&&o.currentUser.isAnonymous?(se=await rc(o.currentUser,await sc(o,he).then(ge=>ge.credential)),q("Anonymous account linked with Google!","success")):(se=await sc(o,he),q("Signed in with Google successfully!","success")),Y(!1),se.user}catch(he){return console.error("Error signing in with Google:",he),he.code==="auth/account-exists-with-different-credential"?q("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):q(`Google Sign In Failed: ${he.message}`,"error"),null}},[o,q,Y]),Ae=O.useCallback(async()=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const he=new ea("apple.com");let se;return o.currentUser&&o.currentUser.isAnonymous?(se=await rc(o.currentUser,await sc(o,he).then(ge=>ge.credential)),q("Anonymous account linked with Apple!","success")):(se=await sc(o,he),q("Signed in with Apple successfully!","success")),Y(!1),se.user}catch(he){return console.error("Error signing in with Apple:",he),he.code==="auth/account-exists-with-different-credential"?q("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):q(`Apple Sign In Failed: ${he.message}`,"error"),null}},[o,q]),Ve=O.useCallback(async()=>{if(!o){q("Firebase Auth not initialized.","error");return}try{await KS(o),f(null),v(!0),E(null),q("Signed out successfully!","success")}catch(he){console.error("Error signing out:",he),q(`Sign Out Failed: ${he.message}`,"error")}},[o,q]),Oe=O.useCallback(async(he,se)=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return q("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const ge=oo.credential(he,se),Ue=await rc(o.currentUser,ge);return q("Anonymous account linked with email/password!","success"),Y(!1),Ue.user}catch(ge){return console.error("Error linking anonymous account with email/password:",ge),q(`Linking Failed: ${ge.message}`,"error"),null}},[o,q]),ze=O.useCallback(async()=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return q("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const he=new ea("apple.com"),se=await rc(o.currentUser,he);return q("Anonymous account linked with Apple!","success"),Y(!1),se.user}catch(he){return console.error("Error linking anonymous account with Apple:",he),q(`Linking Failed: ${he.message}`,"error"),null}},[o,q]),je=O.useMemo(()=>({app:r,db:t,auth:o,currentUserId:d,currentUserIsAnonymous:m,authReady:x,appId:"rntea-cca78",showMessage:q,signUpWithEmailPassword:j,signInWithEmailPassword:G,signInWithGoogle:Te,signInWithApple:Ae,signOutUser:Ve,linkAnonymousWithEmailPassword:Oe,linkAnonymousWithApple:ze,setShowAuthModal:Y,executeRecaptcha:_e,resetRecaptcha:oe,isRecaptchaReadyForUse:D,recaptchaVerifier:S,currentUserDisplayName:T}),[r,t,o,d,m,x,jP,q,j,G,Te,Ae,Ve,Oe,ze,Y,_e,oe,D,S,T]),Be=O.useCallback(()=>{R(he=>!he),document.body.style.overflow=N?"":"hidden"},[N]),et=O.useCallback(()=>{R(!1),document.body.style.overflow=""},[]),Rt=O.useCallback(he=>{if(he==="/")return de.pathname==="/";if(he==="/reviews")return de.pathname==="/reviews";if(he==="/my-tea")return de.pathname==="/my-tea";if(he.startsWith("/#")){const se=he.substring(2);return de.pathname==="/"&&de.hash===`#${se}`}return!1},[de.pathname,de.hash]);return y.jsxs("div",{className:"min-h-screen flex flex-col",children:[y.jsxs("header",{className:"bg-white shadow-sm py-8 px-6 md:px-10 lg:px-16 flex justify-between items-center rounded-b-lg fixed top-0 w-full z-30",children:[y.jsx($n,{to:"/",className:"text-3xl font-bold text-gray-800 rntea-brand",children:"RNTea"}),y.jsx("nav",{className:"hidden md:block",children:y.jsxs("ul",{className:"flex space-x-6 items-center",children:[y.jsx("li",{children:y.jsx($n,{to:"/#about",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${Rt("/#about")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["About",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:y.jsx($n,{to:"/reviews",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${Rt("/reviews")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["Browse Tea",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),d&&!m&&y.jsx("li",{children:y.jsx($n,{to:"/my-tea",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${Rt("/my-tea")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["My Tea",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:y.jsx($n,{to:"/#contact",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${Rt("/#contact")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["Contact",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:d?y.jsx("button",{onClick:Ve,className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):y.jsx("button",{onClick:()=>Y(!0),className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})})]})}),y.jsxs("div",{className:`hamburger-menu md:hidden flex flex-col justify-around w-8 h-6 cursor-pointer z-50 ${N?"open":""}`,id:"hamburger-menu",onClick:Be,children:[y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"})]})]}),y.jsxs("div",{className:`mobile-nav-overlay md:hidden fixed top-0 left-0 w-full h-full bg-white bg-opacity-98 z-40 flex flex-col justify-center items-center transition-transform duration-400 ease-in-out ${N?"open":""}`,id:"mobile-nav-overlay",children:[y.jsx("button",{className:"absolute top-6 right-6 text-gray-800 hover:text-gray-600 text-4xl focus:outline-none z-50",onClick:et,"aria-label":"Close navigation menu",children:""}),y.jsx($n,{to:"/#about",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:et,style:{animationDelay:"0.1s"},children:y.jsxs("span",{className:"relative inline-block",children:["About",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),y.jsx($n,{to:"/reviews",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:et,style:{animationDelay:"0.2s"},children:y.jsxs("span",{className:"relative inline-block",children:["Browse Tea",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),d&&!m&&y.jsx($n,{to:"/my-tea",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:et,style:{animationDelay:"0.25s"},children:y.jsxs("span",{className:"relative inline-block",children:["My Tea",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),y.jsx($n,{to:"/#contact",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:et,style:{animationDelay:"0.3s"},children:y.jsxs("span",{className:"relative inline-block",children:["Contact",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),d?y.jsx("button",{onClick:()=>{Ve(),et()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):y.jsx("button",{onClick:()=>{Y(!0),et()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})]}),y.jsxs("main",{className:"flex-grow w-full flex flex-col mt-[120px]",children:[y.jsx(PP,{message:M.text,type:M.type}),y.jsx("div",{id:"recaptcha-container-app",className:"hidden"}),y.jsx(MP,{children:$?y.jsx("p",{className:"text-center text-gray-500 py-8",children:"App.jsx: Initializing application and Firebase..."}):y.jsxs($l.Provider,{value:je,children:[y.jsxs(jT,{children:[console.log(`App.jsx: Route matched for path: ${de.pathname}`),y.jsx(el,{path:"/",element:y.jsx(VP,{})}),y.jsx(el,{path:"/reviews",element:y.jsx(Nw,{})}),y.jsx(el,{path:"/my-tea",element:y.jsx(OP,{})})," ",y.jsx(el,{path:"/test-route",element:y.jsx("h2",{className:"text-center text-2xl text-center mt-8",children:"This is a Test Route."})})]}),re&&y.jsx(bP,{onClose:()=>Y(!1)},`${ut}-${D}`)]})})]}),y.jsx("footer",{className:"bg-white py-4 px-6 md:px-10 lg:px-16 border-t border-gray-200 text-center text-gray-600",children:y.jsxs("p",{className:"text-sm",children:[" ",new Date().getFullYear()," RNTea business. All Rights Reserved.",y.jsx("button",{onClick:()=>le(!0),className:"ml-1 text-blue-600 hover:underline focus:outline-none",children:"Privacy Policy"})]})}),ce&&y.jsx(LP,{onClose:()=>le(!1)})]})}const jv=document.getElementById("root");jv?(console.log("main.jsx: Root element found. Attempting to mount React App with Router..."),qE.createRoot(jv).render(y.jsx(li.StrictMode,{children:y.jsx(HT,{children:y.jsx(FP,{})})})),console.log("main.jsx: React App with Router mount instruction sent.")):console.error("main.jsx: ERROR - Root element not found in DOM. Cannot mount React App.");
