function kE(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function jv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Nh={exports:{}},Ja={},Dh={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function NE(){if(Lg)return We;Lg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),E=Symbol.iterator;function C(L){return L===null||typeof L!="object"?null:(L=E&&L[E]||L["@@iterator"],typeof L=="function"?L:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,H={};function M(L,K,Te){this.props=L,this.context=K,this.refs=H,this.updater=Te||j}M.prototype.isReactComponent={},M.prototype.setState=function(L,K){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,K,"setState")},M.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ee(){}ee.prototype=M.prototype;function re(L,K,Te){this.props=L,this.context=K,this.refs=H,this.updater=Te||j}var Q=re.prototype=new ee;Q.constructor=re,$(Q,M.prototype),Q.isPureReactComponent=!0;var le=Array.isArray,ue=Object.prototype.hasOwnProperty,de={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function A(L,K,Te){var Ae,De={},Ve=null,ze=null;if(K!=null)for(Ae in K.ref!==void 0&&(ze=K.ref),K.key!==void 0&&(Ve=""+K.key),K)ue.call(K,Ae)&&!N.hasOwnProperty(Ae)&&(De[Ae]=K[Ae]);var Le=arguments.length-2;if(Le===1)De.children=Te;else if(1<Le){for(var Be=Array(Le),Xe=0;Xe<Le;Xe++)Be[Xe]=arguments[Xe+2];De.children=Be}if(L&&L.defaultProps)for(Ae in Le=L.defaultProps,Le)De[Ae]===void 0&&(De[Ae]=Le[Ae]);return{$$typeof:r,type:L,key:Ve,ref:ze,props:De,_owner:de.current}}function x(L,K){return{$$typeof:r,type:L.type,key:K,ref:L.ref,props:L.props,_owner:L._owner}}function b(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function P(L){var K={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Te){return K[Te]})}var D=/\/+/g;function S(L,K){return typeof L=="object"&&L!==null&&L.key!=null?P(""+L.key):K.toString(36)}function $e(L,K,Te,Ae,De){var Ve=typeof L;(Ve==="undefined"||Ve==="boolean")&&(L=null);var ze=!1;if(L===null)ze=!0;else switch(Ve){case"string":case"number":ze=!0;break;case"object":switch(L.$$typeof){case r:case e:ze=!0}}if(ze)return ze=L,De=De(ze),L=Ae===""?"."+S(ze,0):Ae,le(De)?(Te="",L!=null&&(Te=L.replace(D,"$&/")+"/"),$e(De,K,Te,"",function(Xe){return Xe})):De!=null&&(b(De)&&(De=x(De,Te+(!De.key||ze&&ze.key===De.key?"":(""+De.key).replace(D,"$&/")+"/")+L)),K.push(De)),1;if(ze=0,Ae=Ae===""?".":Ae+":",le(L))for(var Le=0;Le<L.length;Le++){Ve=L[Le];var Be=Ae+S(Ve,Le);ze+=$e(Ve,K,Te,Be,De)}else if(Be=C(L),typeof Be=="function")for(L=Be.call(L),Le=0;!(Ve=L.next()).done;)Ve=Ve.value,Be=Ae+S(Ve,Le++),ze+=$e(Ve,K,Te,Be,De);else if(Ve==="object")throw K=String(L),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return ze}function st(L,K,Te){if(L==null)return L;var Ae=[],De=0;return $e(L,Ae,"","",function(Ve){return K.call(Te,Ve,De++)}),Ae}function ot(L){if(L._status===-1){var K=L._result;K=K(),K.then(function(Te){(L._status===0||L._status===-1)&&(L._status=1,L._result=Te)},function(Te){(L._status===0||L._status===-1)&&(L._status=2,L._result=Te)}),L._status===-1&&(L._status=0,L._result=K)}if(L._status===1)return L._result.default;throw L._result}var ce={current:null},q={transition:null},_e={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:q,ReactCurrentOwner:de};function oe(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:st,forEach:function(L,K,Te){st(L,function(){K.apply(this,arguments)},Te)},count:function(L){var K=0;return st(L,function(){K++}),K},toArray:function(L){return st(L,function(K){return K})||[]},only:function(L){if(!b(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},We.Component=M,We.Fragment=t,We.Profiler=o,We.PureComponent=re,We.StrictMode=s,We.Suspense=m,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,We.act=oe,We.cloneElement=function(L,K,Te){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ae=$({},L.props),De=L.key,Ve=L.ref,ze=L._owner;if(K!=null){if(K.ref!==void 0&&(Ve=K.ref,ze=de.current),K.key!==void 0&&(De=""+K.key),L.type&&L.type.defaultProps)var Le=L.type.defaultProps;for(Be in K)ue.call(K,Be)&&!N.hasOwnProperty(Be)&&(Ae[Be]=K[Be]===void 0&&Le!==void 0?Le[Be]:K[Be])}var Be=arguments.length-2;if(Be===1)Ae.children=Te;else if(1<Be){Le=Array(Be);for(var Xe=0;Xe<Be;Xe++)Le[Xe]=arguments[Xe+2];Ae.children=Le}return{$$typeof:r,type:L.type,key:De,ref:Ve,props:Ae,_owner:ze}},We.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},We.createElement=A,We.createFactory=function(L){var K=A.bind(null,L);return K.type=L,K},We.createRef=function(){return{current:null}},We.forwardRef=function(L){return{$$typeof:f,render:L}},We.isValidElement=b,We.lazy=function(L){return{$$typeof:I,_payload:{_status:-1,_result:L},_init:ot}},We.memo=function(L,K){return{$$typeof:v,type:L,compare:K===void 0?null:K}},We.startTransition=function(L){var K=q.transition;q.transition={};try{L()}finally{q.transition=K}},We.unstable_act=oe,We.useCallback=function(L,K){return ce.current.useCallback(L,K)},We.useContext=function(L){return ce.current.useContext(L)},We.useDebugValue=function(){},We.useDeferredValue=function(L){return ce.current.useDeferredValue(L)},We.useEffect=function(L,K){return ce.current.useEffect(L,K)},We.useId=function(){return ce.current.useId()},We.useImperativeHandle=function(L,K,Te){return ce.current.useImperativeHandle(L,K,Te)},We.useInsertionEffect=function(L,K){return ce.current.useInsertionEffect(L,K)},We.useLayoutEffect=function(L,K){return ce.current.useLayoutEffect(L,K)},We.useMemo=function(L,K){return ce.current.useMemo(L,K)},We.useReducer=function(L,K,Te){return ce.current.useReducer(L,K,Te)},We.useRef=function(L){return ce.current.useRef(L)},We.useState=function(L){return ce.current.useState(L)},We.useSyncExternalStore=function(L,K,Te){return ce.current.useSyncExternalStore(L,K,Te)},We.useTransition=function(){return ce.current.useTransition()},We.version="18.3.1",We}var jg;function Af(){return jg||(jg=1,Dh.exports=NE()),Dh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function DE(){if(Mg)return Ja;Mg=1;var r=Af(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,v){var I,E={},C=null,j=null;v!==void 0&&(C=""+v),m.key!==void 0&&(C=""+m.key),m.ref!==void 0&&(j=m.ref);for(I in m)s.call(m,I)&&!l.hasOwnProperty(I)&&(E[I]=m[I]);if(f&&f.defaultProps)for(I in m=f.defaultProps,m)E[I]===void 0&&(E[I]=m[I]);return{$$typeof:e,type:f,key:C,ref:j,props:E,_owner:o.current}}return Ja.Fragment=t,Ja.jsx=d,Ja.jsxs=d,Ja}var Fg;function VE(){return Fg||(Fg=1,Nh.exports=DE()),Nh.exports}var y=VE(),V=Af();const ui=jv(V),OE=kE({__proto__:null,default:ui},[V]);var Ju={},Vh={exports:{}},Un={},Oh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function LE(){return Ug||(Ug=1,function(r){function e(q,_e){var oe=q.length;q.push(_e);e:for(;0<oe;){var L=oe-1>>>1,K=q[L];if(0<o(K,_e))q[L]=_e,q[oe]=K,oe=L;else break e}}function t(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var _e=q[0],oe=q.pop();if(oe!==_e){q[0]=oe;e:for(var L=0,K=q.length,Te=K>>>1;L<Te;){var Ae=2*(L+1)-1,De=q[Ae],Ve=Ae+1,ze=q[Ve];if(0>o(De,oe))Ve<K&&0>o(ze,De)?(q[L]=ze,q[Ve]=oe,L=Ve):(q[L]=De,q[Ae]=oe,L=Ae);else if(Ve<K&&0>o(ze,oe))q[L]=ze,q[Ve]=oe,L=Ve;else break e}}return _e}function o(q,_e){var oe=q.sortIndex-_e.sortIndex;return oe!==0?oe:q.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var m=[],v=[],I=1,E=null,C=3,j=!1,$=!1,H=!1,M=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(q){for(var _e=t(v);_e!==null;){if(_e.callback===null)s(v);else if(_e.startTime<=q)s(v),_e.sortIndex=_e.expirationTime,e(m,_e);else break;_e=t(v)}}function le(q){if(H=!1,Q(q),!$)if(t(m)!==null)$=!0,ot(ue);else{var _e=t(v);_e!==null&&ce(le,_e.startTime-q)}}function ue(q,_e){$=!1,H&&(H=!1,ee(A),A=-1),j=!0;var oe=C;try{for(Q(_e),E=t(m);E!==null&&(!(E.expirationTime>_e)||q&&!P());){var L=E.callback;if(typeof L=="function"){E.callback=null,C=E.priorityLevel;var K=L(E.expirationTime<=_e);_e=r.unstable_now(),typeof K=="function"?E.callback=K:E===t(m)&&s(m),Q(_e)}else s(m);E=t(m)}if(E!==null)var Te=!0;else{var Ae=t(v);Ae!==null&&ce(le,Ae.startTime-_e),Te=!1}return Te}finally{E=null,C=oe,j=!1}}var de=!1,N=null,A=-1,x=5,b=-1;function P(){return!(r.unstable_now()-b<x)}function D(){if(N!==null){var q=r.unstable_now();b=q;var _e=!0;try{_e=N(!0,q)}finally{_e?S():(de=!1,N=null)}}else de=!1}var S;if(typeof re=="function")S=function(){re(D)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,st=$e.port2;$e.port1.onmessage=D,S=function(){st.postMessage(null)}}else S=function(){M(D,0)};function ot(q){N=q,de||(de=!0,S())}function ce(q,_e){A=M(function(){q(r.unstable_now())},_e)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_continueExecution=function(){$||j||($=!0,ot(ue))},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(q){switch(C){case 1:case 2:case 3:var _e=3;break;default:_e=C}var oe=C;C=_e;try{return q()}finally{C=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(q,_e){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var oe=C;C=q;try{return _e()}finally{C=oe}},r.unstable_scheduleCallback=function(q,_e,oe){var L=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?L+oe:L):oe=L,q){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=oe+K,q={id:I++,callback:_e,priorityLevel:q,startTime:oe,expirationTime:K,sortIndex:-1},oe>L?(q.sortIndex=oe,e(v,q),t(m)===null&&q===t(v)&&(H?(ee(A),A=-1):H=!0,ce(le,oe-L))):(q.sortIndex=K,e(m,q),$||j||($=!0,ot(ue))),q},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(q){var _e=C;return function(){var oe=C;C=_e;try{return q.apply(this,arguments)}finally{C=oe}}}}(Lh)),Lh}var zg;function jE(){return zg||(zg=1,Oh.exports=LE()),Oh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function ME(){if(Bg)return Un;Bg=1;var r=Af(),e=jE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){d(n,i),d(n+"Capture",i)}function d(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},E={};function C(n){return m.call(E,n)?!0:m.call(I,n)?!1:v.test(n)?E[n]=!0:(I[n]=!0,!1)}function j(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,i,a,c){if(i===null||typeof i>"u"||j(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function H(n,i,a,c,h,g,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=w}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){M[n]=new H(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];M[i]=new H(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){M[n]=new H(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){M[n]=new H(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){M[n]=new H(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){M[n]=new H(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){M[n]=new H(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){M[n]=new H(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){M[n]=new H(n,5,!1,n.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function re(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(ee,re);M[i]=new H(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(ee,re);M[i]=new H(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(ee,re);M[i]=new H(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){M[n]=new H(n,1,!1,n.toLowerCase(),null,!1,!1)}),M.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){M[n]=new H(n,1,!1,n.toLowerCase(),null,!0,!0)});function Q(n,i,a,c){var h=M.hasOwnProperty(i)?M[i]:null;(h!==null?h.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&($(i,a,h,c)&&(a=null),c||h===null?C(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(i=h.attributeName,c=h.attributeNamespace,a===null?n.removeAttribute(i):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var le=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ue=Symbol.for("react.element"),de=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),P=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),st=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),q=Symbol.iterator;function _e(n){return n===null||typeof n!="object"?null:(n=q&&n[q]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,L;function K(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var Te=!1;function Ae(n,i){if(!n||Te)return"";Te=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var h=B.stack.split(`
`),g=c.stack.split(`
`),w=h.length-1,R=g.length-1;1<=w&&0<=R&&h[w]!==g[R];)R--;for(;1<=w&&0<=R;w--,R--)if(h[w]!==g[R]){if(w!==1||R!==1)do if(w--,R--,0>R||h[w]!==g[R]){var k=`
`+h[w].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=w&&0<=R);break}}}finally{Te=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function De(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function Ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case de:return"Portal";case x:return"Profiler";case A:return"StrictMode";case S:return"Suspense";case $e:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case P:return(n.displayName||"Context")+".Consumer";case b:return(n._context.displayName||"Context")+".Provider";case D:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case st:return i=n.displayName||null,i!==null?i:Ve(n.type)||"Memo";case ot:i=n._payload,n=n._init;try{return Ve(n(i))}catch{}}return null}function ze(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(i);case 8:return i===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Le(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Xe(n){var i=Be(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return h.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function It(n){n._valueTracker||(n._valueTracker=Xe(n))}function he(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function se(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function me(n,i){var a=i.checked;return oe({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Me(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Le(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Rn(n,i){i=i.checked,i!=null&&Q(n,"checked",i,!1)}function Ft(n,i){Rn(n,i);var a=Le(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Hn(n,i.type,a):i.hasOwnProperty("defaultValue")&&Hn(n,i.type,Le(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Pn(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Hn(n,i,a){(i!=="number"||se(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var At=Array.isArray;function qt(n,i,a,c){if(n=n.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=i.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Le(a),i=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}i!==null||n[h].disabled||(i=n[h])}i!==null&&(i.selected=!0)}}function bn(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ln(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(At(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Le(a)}}function kn(n,i){var a=Le(i.value),c=Le(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Xt(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ie(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ie(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var un,Mr=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,h){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,h)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(un=un||document.createElement("div"),un.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=un.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function _r(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var er={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fr=["Webkit","ms","Moz","O"];Object.keys(er).forEach(function(n){Fr.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),er[i]=er[n]})});function rs(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||er.hasOwnProperty(n)&&er[n]?(""+i).trim():i+"px"}function tr(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=rs(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,h):n[a]=h}}var ss=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wn(n,i){if(i){if(ss[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function bs(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ur=null;function ks(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ns=null,Nn=null,nr=null;function Ds(n){if(n=La(n)){if(typeof Ns!="function")throw Error(t(280));var i=n.stateNode;i&&(i=hu(i),Ns(n.stateNode,n.type,i))}}function rr(n){Nn?nr?nr.push(n):nr=[n]:Nn=n}function Vs(){if(Nn){var n=Nn,i=nr;if(nr=Nn=null,Ds(n),i)for(n=0;n<i.length;n++)Ds(i[n])}}function is(n,i){return n(i)}function Ai(){}var wr=!1;function G(n,i,a){if(wr)return n(i,a);wr=!0;try{return is(n,i,a)}finally{wr=!1,(Nn!==null||nr!==null)&&(Ai(),Vs())}}function we(n,i){var a=n.stateNode;if(a===null)return null;var c=hu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Pe=!1;if(f)try{var be={};Object.defineProperty(be,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",be,be),window.removeEventListener("test",be,be)}catch{Pe=!1}function Ee(n,i,a,c,h,g,w,R,k){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(Z){this.onError(Z)}}var Qe=!1,Rt=null,et=!1,at=null,Tt={onError:function(n){Qe=!0,Rt=n}};function lt(n,i,a,c,h,g,w,R,k){Qe=!1,Rt=null,Ee.apply(Tt,arguments)}function Pt(n,i,a,c,h,g,w,R,k){if(lt.apply(this,arguments),Qe){if(Qe){var B=Rt;Qe=!1,Rt=null}else throw Error(t(198));et||(et=!0,at=B)}}function Ut(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function cn(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function bt(n){if(Ut(n)!==n)throw Error(t(188))}function zt(n){var i=n.alternate;if(!i){if(i=Ut(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var h=a.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===a)return bt(h),n;if(g===c)return bt(h),i;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=h,c=g;else{for(var w=!1,R=h.child;R;){if(R===a){w=!0,a=h,c=g;break}if(R===c){w=!0,c=h,a=g;break}R=R.sibling}if(!w){for(R=g.child;R;){if(R===a){w=!0,a=g,c=h;break}if(R===c){w=!0,c=g,a=h;break}R=R.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function dn(n){return n=zt(n),n!==null?En(n):null}function En(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=En(n);if(i!==null)return i;n=n.sibling}return null}var ht=e.unstable_scheduleCallback,Zt=e.unstable_cancelCallback,qn=e.unstable_shouldYield,ad=e.unstable_requestPaint,ut=e.unstable_now,Ul=e.unstable_getCurrentPriorityLevel,Ri=e.unstable_ImmediatePriority,Os=e.unstable_UserBlockingPriority,sr=e.unstable_NormalPriority,_a=e.unstable_LowPriority,zl=e.unstable_IdlePriority,Pi=null,Gn=null;function Bl(n){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Pi,n,void 0,(n.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:Hl,wa=Math.log,$l=Math.LN2;function Hl(n){return n>>>=0,n===0?32:31-(wa(n)/$l|0)|0}var ho=64,fo=4194304;function Ls(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function bi(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,h=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var R=w&~h;R!==0?c=Ls(R):(g&=w,g!==0&&(c=Ls(g)))}else w=a&~h,w!==0?c=Ls(w):g!==0&&(c=Ls(g));if(c===0)return 0;if(i!==0&&i!==c&&(i&h)===0&&(h=c&-c,g=i&-i,h>=g||h===16&&(g&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-In(i),h=1<<a,c|=n[a],i&=~h;return c}function ld(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function os(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-In(g),R=1<<w,k=h[w];k===-1?((R&a)===0||(R&c)!==0)&&(h[w]=ld(R,i)):k<=i&&(n.expiredLanes|=R),g&=~R}}function Kn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ki(){var n=ho;return ho<<=1,(ho&4194240)===0&&(ho=64),n}function js(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ms(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-In(i),n[i]=a}function it(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-In(a),g=1<<h;i[h]=0,c[h]=-1,n[h]=-1,a&=~g}}function Fs(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-In(a),h=1<<c;h&i|n[c]&i&&(n[c]|=i),a&=~h}}var Ke=0;function Us(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Wl,po,ql,Gl,Kl,Ea=!1,zr=[],en=null,Er=null,Ir=null,zs=new Map,ir=new Map,Br=[],ud="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ql(n,i){switch(n){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":zs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ir.delete(i.pointerId)}}function Dn(n,i,a,c,h,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},i!==null&&(i=La(i),i!==null&&po(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),n)}function cd(n,i,a,c,h){switch(i){case"focusin":return en=Dn(en,n,i,a,c,h),!0;case"dragenter":return Er=Dn(Er,n,i,a,c,h),!0;case"mouseover":return Ir=Dn(Ir,n,i,a,c,h),!0;case"pointerover":var g=h.pointerId;return zs.set(g,Dn(zs.get(g)||null,n,i,a,c,h)),!0;case"gotpointercapture":return g=h.pointerId,ir.set(g,Dn(ir.get(g)||null,n,i,a,c,h)),!0}return!1}function Yl(n){var i=Li(n.target);if(i!==null){var a=Ut(i);if(a!==null){if(i=a.tag,i===13){if(i=cn(a),i!==null){n.blockedOn=i,Kl(n.priority,function(){ql(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function as(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=mo(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Ur=c,a.target.dispatchEvent(c),Ur=null}else return i=La(a),i!==null&&po(i),n.blockedOn=a,!1;i.shift()}return!0}function Ni(n,i,a){as(n)&&a.delete(i)}function Jl(){Ea=!1,en!==null&&as(en)&&(en=null),Er!==null&&as(Er)&&(Er=null),Ir!==null&&as(Ir)&&(Ir=null),zs.forEach(Ni),ir.forEach(Ni)}function Tr(n,i){n.blockedOn===i&&(n.blockedOn=null,Ea||(Ea=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Jl)))}function xr(n){function i(h){return Tr(h,n)}if(0<zr.length){Tr(zr[0],n);for(var a=1;a<zr.length;a++){var c=zr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(en!==null&&Tr(en,n),Er!==null&&Tr(Er,n),Ir!==null&&Tr(Ir,n),zs.forEach(i),ir.forEach(i),a=0;a<Br.length;a++)c=Br[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Br.length&&(a=Br[0],a.blockedOn===null);)Yl(a),a.blockedOn===null&&Br.shift()}var ls=le.ReactCurrentBatchConfig,Bs=!0;function gt(n,i,a,c){var h=Ke,g=ls.transition;ls.transition=null;try{Ke=1,Ia(n,i,a,c)}finally{Ke=h,ls.transition=g}}function dd(n,i,a,c){var h=Ke,g=ls.transition;ls.transition=null;try{Ke=4,Ia(n,i,a,c)}finally{Ke=h,ls.transition=g}}function Ia(n,i,a,c){if(Bs){var h=mo(n,i,a,c);if(h===null)Id(n,i,c,Di,a),Ql(n,c);else if(cd(h,n,i,a,c))c.stopPropagation();else if(Ql(n,c),i&4&&-1<ud.indexOf(n)){for(;h!==null;){var g=La(h);if(g!==null&&Wl(g),g=mo(n,i,a,c),g===null&&Id(n,i,c,Di,a),g===h)break;h=g}h!==null&&c.stopPropagation()}else Id(n,i,c,null,a)}}var Di=null;function mo(n,i,a,c){if(Di=null,n=ks(c),n=Li(n),n!==null)if(i=Ut(n),i===null)n=null;else if(a=i.tag,a===13){if(n=cn(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Di=n,null}function Ta(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ul()){case Ri:return 1;case Os:return 4;case sr:case _a:return 16;case zl:return 536870912;default:return 16}default:return 16}}var Qn=null,go=null,Vn=null;function xa(){if(Vn)return Vn;var n,i=go,a=i.length,c,h="value"in Qn?Qn.value:Qn.textContent,g=h.length;for(n=0;n<a&&i[n]===h[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===h[g-c];c++);return Vn=h.slice(n,1<c?1-c:void 0)}function yo(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function $r(){return!0}function Sa(){return!1}function tn(n){function i(a,c,h,g,w){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(a=n[R],this[R]=a?a(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?$r:Sa,this.isPropagationStopped=Sa,this}return oe(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),i}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vo=tn(Sr),Hr=oe({},Sr,{view:0,detail:0}),hd=tn(Hr),_o,us,$s,Vi=oe({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$s&&($s&&n.type==="mousemove"?(_o=n.screenX-$s.screenX,us=n.screenY-$s.screenY):us=_o=0,$s=n),_o)},movementY:function(n){return"movementY"in n?n.movementY:us}}),wo=tn(Vi),Ca=oe({},Vi,{dataTransfer:0}),Xl=tn(Ca),Eo=oe({},Hr,{relatedTarget:0}),Io=tn(Eo),Zl=oe({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),cs=tn(Zl),eu=oe({},Sr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),tu=tn(eu),nu=oe({},Sr,{data:0}),Aa=tn(nu),To={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function su(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ru[n])?!!i[n]:!1}function Wr(){return su}var u=oe({},Hr,{key:function(n){if(n.key){var i=To[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=yo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Tn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wr,charCode:function(n){return n.type==="keypress"?yo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=tn(u),_=oe({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=tn(_),F=oe({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wr}),W=tn(F),ae=oe({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),rt=tn(ae),Bt=oe({},Vi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ye=tn(Bt),Gt=[9,13,27,32],kt=f&&"CompositionEvent"in window,or=null;f&&"documentMode"in document&&(or=document.documentMode);var Yn=f&&"TextEvent"in window&&!or,Oi=f&&(!kt||or&&8<or&&11>=or),xo=" ",bp=!1;function kp(n,i){switch(n){case"keyup":return Gt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Np(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var So=!1;function Rw(n,i){switch(n){case"compositionend":return Np(i);case"keypress":return i.which!==32?null:(bp=!0,xo);case"textInput":return n=i.data,n===xo&&bp?null:n;default:return null}}function Pw(n,i){if(So)return n==="compositionend"||!kt&&kp(n,i)?(n=xa(),Vn=go=Qn=null,So=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Oi&&i.locale!=="ko"?null:i.data;default:return null}}var bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!bw[n.type]:i==="textarea"}function Vp(n,i,a,c){rr(c),i=uu(i,"onChange"),0<i.length&&(a=new vo("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Ra=null,Pa=null;function kw(n){Xp(n,0)}function iu(n){var i=bo(n);if(he(i))return n}function Nw(n,i){if(n==="change")return i}var Op=!1;if(f){var fd;if(f){var pd="oninput"in document;if(!pd){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),pd=typeof Lp.oninput=="function"}fd=pd}else fd=!1;Op=fd&&(!document.documentMode||9<document.documentMode)}function jp(){Ra&&(Ra.detachEvent("onpropertychange",Mp),Pa=Ra=null)}function Mp(n){if(n.propertyName==="value"&&iu(Pa)){var i=[];Vp(i,Pa,n,ks(n)),G(kw,i)}}function Dw(n,i,a){n==="focusin"?(jp(),Ra=i,Pa=a,Ra.attachEvent("onpropertychange",Mp)):n==="focusout"&&jp()}function Vw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return iu(Pa)}function Ow(n,i){if(n==="click")return iu(i)}function Lw(n,i){if(n==="input"||n==="change")return iu(i)}function jw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Cr=typeof Object.is=="function"?Object.is:jw;function ba(n,i){if(Cr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!m.call(i,h)||!Cr(n[h],i[h]))return!1}return!0}function Fp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Up(n,i){var a=Fp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fp(a)}}function zp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?zp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Bp(){for(var n=window,i=se();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=se(n.document)}return i}function md(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Mw(n){var i=Bp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&zp(a.ownerDocument.documentElement,a)){if(c!==null&&md(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,g=Math.min(c.start,h);c=c.end===void 0?g:Math.min(c.end,h),!n.extend&&g>c&&(h=c,c=g,g=h),h=Up(a,g);var w=Up(a,c);h&&w&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(h.node,h.offset),n.removeAllRanges(),g>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Fw=f&&"documentMode"in document&&11>=document.documentMode,Co=null,gd=null,ka=null,yd=!1;function $p(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yd||Co==null||Co!==se(c)||(c=Co,"selectionStart"in c&&md(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ka&&ba(ka,c)||(ka=c,c=uu(gd,"onSelect"),0<c.length&&(i=new vo("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Co)))}function ou(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ao={animationend:ou("Animation","AnimationEnd"),animationiteration:ou("Animation","AnimationIteration"),animationstart:ou("Animation","AnimationStart"),transitionend:ou("Transition","TransitionEnd")},vd={},Hp={};f&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function au(n){if(vd[n])return vd[n];if(!Ao[n])return n;var i=Ao[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Hp)return vd[n]=i[a];return n}var Wp=au("animationend"),qp=au("animationiteration"),Gp=au("animationstart"),Kp=au("transitionend"),Qp=new Map,Yp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hs(n,i){Qp.set(n,i),l(i,[n])}for(var _d=0;_d<Yp.length;_d++){var wd=Yp[_d],Uw=wd.toLowerCase(),zw=wd[0].toUpperCase()+wd.slice(1);Hs(Uw,"on"+zw)}Hs(Wp,"onAnimationEnd"),Hs(qp,"onAnimationIteration"),Hs(Gp,"onAnimationStart"),Hs("dblclick","onDoubleClick"),Hs("focusin","onFocus"),Hs("focusout","onBlur"),Hs(Kp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Na));function Jp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,Pt(c,i,void 0,n),n.currentTarget=null}function Xp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var w=c.length-1;0<=w;w--){var R=c[w],k=R.instance,B=R.currentTarget;if(R=R.listener,k!==g&&h.isPropagationStopped())break e;Jp(h,R,B),g=k}else for(w=0;w<c.length;w++){if(R=c[w],k=R.instance,B=R.currentTarget,R=R.listener,k!==g&&h.isPropagationStopped())break e;Jp(h,R,B),g=k}}}if(et)throw n=at,et=!1,at=null,n}function ft(n,i){var a=i[Rd];a===void 0&&(a=i[Rd]=new Set);var c=n+"__bubble";a.has(c)||(Zp(i,n,2,!1),a.add(c))}function Ed(n,i,a){var c=0;i&&(c|=4),Zp(a,n,c,i)}var lu="_reactListening"+Math.random().toString(36).slice(2);function Da(n){if(!n[lu]){n[lu]=!0,s.forEach(function(a){a!=="selectionchange"&&(Bw.has(a)||Ed(a,!1,n),Ed(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[lu]||(i[lu]=!0,Ed("selectionchange",!1,i))}}function Zp(n,i,a,c){switch(Ta(i)){case 1:var h=gt;break;case 4:h=dd;break;default:h=Ia}a=h.bind(null,i,a,n),h=void 0,!Pe||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(i,a,{capture:!0,passive:h}):n.addEventListener(i,a,!0):h!==void 0?n.addEventListener(i,a,{passive:h}):n.addEventListener(i,a,!1)}function Id(n,i,a,c,h){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===h||R.nodeType===8&&R.parentNode===h)break;if(w===4)for(w=c.return;w!==null;){var k=w.tag;if((k===3||k===4)&&(k=w.stateNode.containerInfo,k===h||k.nodeType===8&&k.parentNode===h))return;w=w.return}for(;R!==null;){if(w=Li(R),w===null)return;if(k=w.tag,k===5||k===6){c=g=w;continue e}R=R.parentNode}}c=c.return}G(function(){var B=g,Z=ks(a),te=[];e:{var X=Qp.get(n);if(X!==void 0){var ge=vo,xe=n;switch(n){case"keypress":if(yo(a)===0)break e;case"keydown":case"keyup":ge=p;break;case"focusin":xe="focus",ge=Io;break;case"focusout":xe="blur",ge=Io;break;case"beforeblur":case"afterblur":ge=Io;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Xl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=W;break;case Wp:case qp:case Gp:ge=cs;break;case Kp:ge=rt;break;case"scroll":ge=hd;break;case"wheel":ge=Ye;break;case"copy":case"cut":case"paste":ge=tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=T}var Se=(i&4)!==0,xt=!Se&&n==="scroll",U=Se?X!==null?X+"Capture":null:X;Se=[];for(var O=B,z;O!==null;){z=O;var ne=z.stateNode;if(z.tag===5&&ne!==null&&(z=ne,U!==null&&(ne=we(O,U),ne!=null&&Se.push(Va(O,ne,z)))),xt)break;O=O.return}0<Se.length&&(X=new ge(X,xe,null,a,Z),te.push({event:X,listeners:Se}))}}if((i&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ge=n==="mouseout"||n==="pointerout",X&&a!==Ur&&(xe=a.relatedTarget||a.fromElement)&&(Li(xe)||xe[ds]))break e;if((ge||X)&&(X=Z.window===Z?Z:(X=Z.ownerDocument)?X.defaultView||X.parentWindow:window,ge?(xe=a.relatedTarget||a.toElement,ge=B,xe=xe?Li(xe):null,xe!==null&&(xt=Ut(xe),xe!==xt||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(ge=null,xe=B),ge!==xe)){if(Se=wo,ne="onMouseLeave",U="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Se=T,ne="onPointerLeave",U="onPointerEnter",O="pointer"),xt=ge==null?X:bo(ge),z=xe==null?X:bo(xe),X=new Se(ne,O+"leave",ge,a,Z),X.target=xt,X.relatedTarget=z,ne=null,Li(Z)===B&&(Se=new Se(U,O+"enter",xe,a,Z),Se.target=z,Se.relatedTarget=xt,ne=Se),xt=ne,ge&&xe)t:{for(Se=ge,U=xe,O=0,z=Se;z;z=Ro(z))O++;for(z=0,ne=U;ne;ne=Ro(ne))z++;for(;0<O-z;)Se=Ro(Se),O--;for(;0<z-O;)U=Ro(U),z--;for(;O--;){if(Se===U||U!==null&&Se===U.alternate)break t;Se=Ro(Se),U=Ro(U)}Se=null}else Se=null;ge!==null&&em(te,X,ge,Se,!1),xe!==null&&xt!==null&&em(te,xt,xe,Se,!0)}}e:{if(X=B?bo(B):window,ge=X.nodeName&&X.nodeName.toLowerCase(),ge==="select"||ge==="input"&&X.type==="file")var Ce=Nw;else if(Dp(X))if(Op)Ce=Lw;else{Ce=Vw;var ke=Dw}else(ge=X.nodeName)&&ge.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(Ce=Ow);if(Ce&&(Ce=Ce(n,B))){Vp(te,Ce,a,Z);break e}ke&&ke(n,X,B),n==="focusout"&&(ke=X._wrapperState)&&ke.controlled&&X.type==="number"&&Hn(X,"number",X.value)}switch(ke=B?bo(B):window,n){case"focusin":(Dp(ke)||ke.contentEditable==="true")&&(Co=ke,gd=B,ka=null);break;case"focusout":ka=gd=Co=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,$p(te,a,Z);break;case"selectionchange":if(Fw)break;case"keydown":case"keyup":$p(te,a,Z)}var Ne;if(kt)e:{switch(n){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else So?kp(n,a)&&(je="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(je="onCompositionStart");je&&(Oi&&a.locale!=="ko"&&(So||je!=="onCompositionStart"?je==="onCompositionEnd"&&So&&(Ne=xa()):(Qn=Z,go="value"in Qn?Qn.value:Qn.textContent,So=!0)),ke=uu(B,je),0<ke.length&&(je=new Aa(je,n,null,a,Z),te.push({event:je,listeners:ke}),Ne?je.data=Ne:(Ne=Np(a),Ne!==null&&(je.data=Ne)))),(Ne=Yn?Rw(n,a):Pw(n,a))&&(B=uu(B,"onBeforeInput"),0<B.length&&(Z=new Aa("onBeforeInput","beforeinput",null,a,Z),te.push({event:Z,listeners:B}),Z.data=Ne))}Xp(te,i)})}function Va(n,i,a){return{instance:n,listener:i,currentTarget:a}}function uu(n,i){for(var a=i+"Capture",c=[];n!==null;){var h=n,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=we(n,a),g!=null&&c.unshift(Va(n,g,h)),g=we(n,i),g!=null&&c.push(Va(n,g,h))),n=n.return}return c}function Ro(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function em(n,i,a,c,h){for(var g=i._reactName,w=[];a!==null&&a!==c;){var R=a,k=R.alternate,B=R.stateNode;if(k!==null&&k===c)break;R.tag===5&&B!==null&&(R=B,h?(k=we(a,g),k!=null&&w.unshift(Va(a,k,R))):h||(k=we(a,g),k!=null&&w.push(Va(a,k,R)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var $w=/\r\n?/g,Hw=/\u0000|\uFFFD/g;function tm(n){return(typeof n=="string"?n:""+n).replace($w,`
`).replace(Hw,"")}function cu(n,i,a){if(i=tm(i),tm(n)!==i&&a)throw Error(t(425))}function du(){}var Td=null,xd=null;function Sd(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,Ww=typeof clearTimeout=="function"?clearTimeout:void 0,nm=typeof Promise=="function"?Promise:void 0,qw=typeof queueMicrotask=="function"?queueMicrotask:typeof nm<"u"?function(n){return nm.resolve(null).then(n).catch(Gw)}:Cd;function Gw(n){setTimeout(function(){throw n})}function Ad(n,i){var a=i,c=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){n.removeChild(h),xr(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);xr(i)}function Ws(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function rm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Po=Math.random().toString(36).slice(2),qr="__reactFiber$"+Po,Oa="__reactProps$"+Po,ds="__reactContainer$"+Po,Rd="__reactEvents$"+Po,Kw="__reactListeners$"+Po,Qw="__reactHandles$"+Po;function Li(n){var i=n[qr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[ds]||a[qr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=rm(n);n!==null;){if(a=n[qr])return a;n=rm(n)}return i}n=a,a=n.parentNode}return null}function La(n){return n=n[qr]||n[ds],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function bo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function hu(n){return n[Oa]||null}var Pd=[],ko=-1;function qs(n){return{current:n}}function pt(n){0>ko||(n.current=Pd[ko],Pd[ko]=null,ko--)}function ct(n,i){ko++,Pd[ko]=n.current,n.current=i}var Gs={},hn=qs(Gs),On=qs(!1),ji=Gs;function No(n,i){var a=n.type.contextTypes;if(!a)return Gs;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in a)h[g]=i[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=h),h}function Ln(n){return n=n.childContextTypes,n!=null}function fu(){pt(On),pt(hn)}function sm(n,i,a){if(hn.current!==Gs)throw Error(t(168));ct(hn,i),ct(On,a)}function im(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in i))throw Error(t(108,ze(n)||"Unknown",h));return oe({},a,c)}function pu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Gs,ji=hn.current,ct(hn,n),ct(On,On.current),!0}function om(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=im(n,i,ji),c.__reactInternalMemoizedMergedChildContext=n,pt(On),pt(hn),ct(hn,n)):pt(On),ct(On,a)}var hs=null,mu=!1,bd=!1;function am(n){hs===null?hs=[n]:hs.push(n)}function Yw(n){mu=!0,am(n)}function Ks(){if(!bd&&hs!==null){bd=!0;var n=0,i=Ke;try{var a=hs;for(Ke=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}hs=null,mu=!1}catch(h){throw hs!==null&&(hs=hs.slice(n+1)),ht(Ri,Ks),h}finally{Ke=i,bd=!1}}return null}var Do=[],Vo=0,gu=null,yu=0,ar=[],lr=0,Mi=null,fs=1,ps="";function Fi(n,i){Do[Vo++]=yu,Do[Vo++]=gu,gu=n,yu=i}function lm(n,i,a){ar[lr++]=fs,ar[lr++]=ps,ar[lr++]=Mi,Mi=n;var c=fs;n=ps;var h=32-In(c)-1;c&=~(1<<h),a+=1;var g=32-In(i)+h;if(30<g){var w=h-h%5;g=(c&(1<<w)-1).toString(32),c>>=w,h-=w,fs=1<<32-In(i)+h|a<<h|c,ps=g+n}else fs=1<<g|a<<h|c,ps=n}function kd(n){n.return!==null&&(Fi(n,1),lm(n,1,0))}function Nd(n){for(;n===gu;)gu=Do[--Vo],Do[Vo]=null,yu=Do[--Vo],Do[Vo]=null;for(;n===Mi;)Mi=ar[--lr],ar[lr]=null,ps=ar[--lr],ar[lr]=null,fs=ar[--lr],ar[lr]=null}var Jn=null,Xn=null,yt=!1,Ar=null;function um(n,i){var a=hr(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function cm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Jn=n,Xn=Ws(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Jn=n,Xn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Mi!==null?{id:fs,overflow:ps}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=hr(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,Jn=n,Xn=null,!0):!1;default:return!1}}function Dd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Vd(n){if(yt){var i=Xn;if(i){var a=i;if(!cm(n,i)){if(Dd(n))throw Error(t(418));i=Ws(a.nextSibling);var c=Jn;i&&cm(n,i)?um(c,a):(n.flags=n.flags&-4097|2,yt=!1,Jn=n)}}else{if(Dd(n))throw Error(t(418));n.flags=n.flags&-4097|2,yt=!1,Jn=n}}}function dm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Jn=n}function vu(n){if(n!==Jn)return!1;if(!yt)return dm(n),yt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Sd(n.type,n.memoizedProps)),i&&(i=Xn)){if(Dd(n))throw hm(),Error(t(418));for(;i;)um(n,i),i=Ws(i.nextSibling)}if(dm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Xn=Ws(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Xn=null}}else Xn=Jn?Ws(n.stateNode.nextSibling):null;return!0}function hm(){for(var n=Xn;n;)n=Ws(n.nextSibling)}function Oo(){Xn=Jn=null,yt=!1}function Od(n){Ar===null?Ar=[n]:Ar.push(n)}var Jw=le.ReactCurrentBatchConfig;function ja(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var h=c,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(w){var R=h.refs;w===null?delete R[g]:R[g]=w},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function _u(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function fm(n){var i=n._init;return i(n._payload)}function pm(n){function i(U,O){if(n){var z=U.deletions;z===null?(U.deletions=[O],U.flags|=16):z.push(O)}}function a(U,O){if(!n)return null;for(;O!==null;)i(U,O),O=O.sibling;return null}function c(U,O){for(U=new Map;O!==null;)O.key!==null?U.set(O.key,O):U.set(O.index,O),O=O.sibling;return U}function h(U,O){return U=ni(U,O),U.index=0,U.sibling=null,U}function g(U,O,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<O?(U.flags|=2,O):z):(U.flags|=2,O)):(U.flags|=1048576,O)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function R(U,O,z,ne){return O===null||O.tag!==6?(O=Ch(z,U.mode,ne),O.return=U,O):(O=h(O,z),O.return=U,O)}function k(U,O,z,ne){var Ce=z.type;return Ce===N?Z(U,O,z.props.children,ne,z.key):O!==null&&(O.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ot&&fm(Ce)===O.type)?(ne=h(O,z.props),ne.ref=ja(U,O,z),ne.return=U,ne):(ne=$u(z.type,z.key,z.props,null,U.mode,ne),ne.ref=ja(U,O,z),ne.return=U,ne)}function B(U,O,z,ne){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=Ah(z,U.mode,ne),O.return=U,O):(O=h(O,z.children||[]),O.return=U,O)}function Z(U,O,z,ne,Ce){return O===null||O.tag!==7?(O=Gi(z,U.mode,ne,Ce),O.return=U,O):(O=h(O,z),O.return=U,O)}function te(U,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Ch(""+O,U.mode,z),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ue:return z=$u(O.type,O.key,O.props,null,U.mode,z),z.ref=ja(U,null,O),z.return=U,z;case de:return O=Ah(O,U.mode,z),O.return=U,O;case ot:var ne=O._init;return te(U,ne(O._payload),z)}if(At(O)||_e(O))return O=Gi(O,U.mode,z,null),O.return=U,O;_u(U,O)}return null}function X(U,O,z,ne){var Ce=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Ce!==null?null:R(U,O,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ue:return z.key===Ce?k(U,O,z,ne):null;case de:return z.key===Ce?B(U,O,z,ne):null;case ot:return Ce=z._init,X(U,O,Ce(z._payload),ne)}if(At(z)||_e(z))return Ce!==null?null:Z(U,O,z,ne,null);_u(U,z)}return null}function ge(U,O,z,ne,Ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return U=U.get(z)||null,R(O,U,""+ne,Ce);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case ue:return U=U.get(ne.key===null?z:ne.key)||null,k(O,U,ne,Ce);case de:return U=U.get(ne.key===null?z:ne.key)||null,B(O,U,ne,Ce);case ot:var ke=ne._init;return ge(U,O,z,ke(ne._payload),Ce)}if(At(ne)||_e(ne))return U=U.get(z)||null,Z(O,U,ne,Ce,null);_u(O,ne)}return null}function xe(U,O,z,ne){for(var Ce=null,ke=null,Ne=O,je=O=0,Yt=null;Ne!==null&&je<z.length;je++){Ne.index>je?(Yt=Ne,Ne=null):Yt=Ne.sibling;var tt=X(U,Ne,z[je],ne);if(tt===null){Ne===null&&(Ne=Yt);break}n&&Ne&&tt.alternate===null&&i(U,Ne),O=g(tt,O,je),ke===null?Ce=tt:ke.sibling=tt,ke=tt,Ne=Yt}if(je===z.length)return a(U,Ne),yt&&Fi(U,je),Ce;if(Ne===null){for(;je<z.length;je++)Ne=te(U,z[je],ne),Ne!==null&&(O=g(Ne,O,je),ke===null?Ce=Ne:ke.sibling=Ne,ke=Ne);return yt&&Fi(U,je),Ce}for(Ne=c(U,Ne);je<z.length;je++)Yt=ge(Ne,U,je,z[je],ne),Yt!==null&&(n&&Yt.alternate!==null&&Ne.delete(Yt.key===null?je:Yt.key),O=g(Yt,O,je),ke===null?Ce=Yt:ke.sibling=Yt,ke=Yt);return n&&Ne.forEach(function(ri){return i(U,ri)}),yt&&Fi(U,je),Ce}function Se(U,O,z,ne){var Ce=_e(z);if(typeof Ce!="function")throw Error(t(150));if(z=Ce.call(z),z==null)throw Error(t(151));for(var ke=Ce=null,Ne=O,je=O=0,Yt=null,tt=z.next();Ne!==null&&!tt.done;je++,tt=z.next()){Ne.index>je?(Yt=Ne,Ne=null):Yt=Ne.sibling;var ri=X(U,Ne,tt.value,ne);if(ri===null){Ne===null&&(Ne=Yt);break}n&&Ne&&ri.alternate===null&&i(U,Ne),O=g(ri,O,je),ke===null?Ce=ri:ke.sibling=ri,ke=ri,Ne=Yt}if(tt.done)return a(U,Ne),yt&&Fi(U,je),Ce;if(Ne===null){for(;!tt.done;je++,tt=z.next())tt=te(U,tt.value,ne),tt!==null&&(O=g(tt,O,je),ke===null?Ce=tt:ke.sibling=tt,ke=tt);return yt&&Fi(U,je),Ce}for(Ne=c(U,Ne);!tt.done;je++,tt=z.next())tt=ge(Ne,U,je,tt.value,ne),tt!==null&&(n&&tt.alternate!==null&&Ne.delete(tt.key===null?je:tt.key),O=g(tt,O,je),ke===null?Ce=tt:ke.sibling=tt,ke=tt);return n&&Ne.forEach(function(bE){return i(U,bE)}),yt&&Fi(U,je),Ce}function xt(U,O,z,ne){if(typeof z=="object"&&z!==null&&z.type===N&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case ue:e:{for(var Ce=z.key,ke=O;ke!==null;){if(ke.key===Ce){if(Ce=z.type,Ce===N){if(ke.tag===7){a(U,ke.sibling),O=h(ke,z.props.children),O.return=U,U=O;break e}}else if(ke.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ot&&fm(Ce)===ke.type){a(U,ke.sibling),O=h(ke,z.props),O.ref=ja(U,ke,z),O.return=U,U=O;break e}a(U,ke);break}else i(U,ke);ke=ke.sibling}z.type===N?(O=Gi(z.props.children,U.mode,ne,z.key),O.return=U,U=O):(ne=$u(z.type,z.key,z.props,null,U.mode,ne),ne.ref=ja(U,O,z),ne.return=U,U=ne)}return w(U);case de:e:{for(ke=z.key;O!==null;){if(O.key===ke)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(U,O.sibling),O=h(O,z.children||[]),O.return=U,U=O;break e}else{a(U,O);break}else i(U,O);O=O.sibling}O=Ah(z,U.mode,ne),O.return=U,U=O}return w(U);case ot:return ke=z._init,xt(U,O,ke(z._payload),ne)}if(At(z))return xe(U,O,z,ne);if(_e(z))return Se(U,O,z,ne);_u(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(a(U,O.sibling),O=h(O,z),O.return=U,U=O):(a(U,O),O=Ch(z,U.mode,ne),O.return=U,U=O),w(U)):a(U,O)}return xt}var Lo=pm(!0),mm=pm(!1),wu=qs(null),Eu=null,jo=null,Ld=null;function jd(){Ld=jo=Eu=null}function Md(n){var i=wu.current;pt(wu),n._currentValue=i}function Fd(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function Mo(n,i){Eu=n,Ld=jo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(jn=!0),n.firstContext=null)}function ur(n){var i=n._currentValue;if(Ld!==n)if(n={context:n,memoizedValue:i,next:null},jo===null){if(Eu===null)throw Error(t(308));jo=n,Eu.dependencies={lanes:0,firstContext:n}}else jo=jo.next=n;return i}var Ui=null;function Ud(n){Ui===null?Ui=[n]:Ui.push(n)}function gm(n,i,a,c){var h=i.interleaved;return h===null?(a.next=a,Ud(i)):(a.next=h.next,h.next=a),i.interleaved=a,ms(n,c)}function ms(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Qs=!1;function zd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function gs(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Ys(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ze&2)!==0){var h=c.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),c.pending=i,ms(n,a)}return h=c.interleaved,h===null?(i.next=i,Ud(c)):(i.next=h.next,h.next=i),c.interleaved=i,ms(n,a)}function Iu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Fs(n,a)}}function vm(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?h=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?h=g=i:g=g.next=i}else h=g=i;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Tu(n,i,a,c){var h=n.updateQueue;Qs=!1;var g=h.firstBaseUpdate,w=h.lastBaseUpdate,R=h.shared.pending;if(R!==null){h.shared.pending=null;var k=R,B=k.next;k.next=null,w===null?g=B:w.next=B,w=k;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,R=Z.lastBaseUpdate,R!==w&&(R===null?Z.firstBaseUpdate=B:R.next=B,Z.lastBaseUpdate=k))}if(g!==null){var te=h.baseState;w=0,Z=B=k=null,R=g;do{var X=R.lane,ge=R.eventTime;if((c&X)===X){Z!==null&&(Z=Z.next={eventTime:ge,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var xe=n,Se=R;switch(X=i,ge=a,Se.tag){case 1:if(xe=Se.payload,typeof xe=="function"){te=xe.call(ge,te,X);break e}te=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Se.payload,X=typeof xe=="function"?xe.call(ge,te,X):xe,X==null)break e;te=oe({},te,X);break e;case 2:Qs=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,X=h.effects,X===null?h.effects=[R]:X.push(R))}else ge={eventTime:ge,lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Z===null?(B=Z=ge,k=te):Z=Z.next=ge,w|=X;if(R=R.next,R===null){if(R=h.shared.pending,R===null)break;X=R,R=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);if(Z===null&&(k=te),h.baseState=k,h.firstBaseUpdate=B,h.lastBaseUpdate=Z,i=h.shared.interleaved,i!==null){h=i;do w|=h.lane,h=h.next;while(h!==i)}else g===null&&(h.shared.lanes=0);$i|=w,n.lanes=w,n.memoizedState=te}}function _m(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(t(191,h));h.call(c)}}}var Ma={},Gr=qs(Ma),Fa=qs(Ma),Ua=qs(Ma);function zi(n){if(n===Ma)throw Error(t(174));return n}function Bd(n,i){switch(ct(Ua,i),ct(Fa,n),ct(Gr,Ma),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:fe(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=fe(i,n)}pt(Gr),ct(Gr,i)}function Fo(){pt(Gr),pt(Fa),pt(Ua)}function wm(n){zi(Ua.current);var i=zi(Gr.current),a=fe(i,n.type);i!==a&&(ct(Fa,n),ct(Gr,a))}function $d(n){Fa.current===n&&(pt(Gr),pt(Fa))}var vt=qs(0);function xu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Hd=[];function Wd(){for(var n=0;n<Hd.length;n++)Hd[n]._workInProgressVersionPrimary=null;Hd.length=0}var Su=le.ReactCurrentDispatcher,qd=le.ReactCurrentBatchConfig,Bi=0,_t=null,$t=null,Kt=null,Cu=!1,za=!1,Ba=0,Xw=0;function fn(){throw Error(t(321))}function Gd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Cr(n[a],i[a]))return!1;return!0}function Kd(n,i,a,c,h,g){if(Bi=g,_t=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Su.current=n===null||n.memoizedState===null?nE:rE,n=a(c,h),za){g=0;do{if(za=!1,Ba=0,25<=g)throw Error(t(301));g+=1,Kt=$t=null,i.updateQueue=null,Su.current=sE,n=a(c,h)}while(za)}if(Su.current=Pu,i=$t!==null&&$t.next!==null,Bi=0,Kt=$t=_t=null,Cu=!1,i)throw Error(t(300));return n}function Qd(){var n=Ba!==0;return Ba=0,n}function Kr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?_t.memoizedState=Kt=n:Kt=Kt.next=n,Kt}function cr(){if($t===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var i=Kt===null?_t.memoizedState:Kt.next;if(i!==null)Kt=i,$t=n;else{if(n===null)throw Error(t(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Kt===null?_t.memoizedState=Kt=n:Kt=Kt.next=n}return Kt}function $a(n,i){return typeof i=="function"?i(n):i}function Yd(n){var i=cr(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=$t,h=c.baseQueue,g=a.pending;if(g!==null){if(h!==null){var w=h.next;h.next=g.next,g.next=w}c.baseQueue=h=g,a.pending=null}if(h!==null){g=h.next,c=c.baseState;var R=w=null,k=null,B=g;do{var Z=B.lane;if((Bi&Z)===Z)k!==null&&(k=k.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var te={lane:Z,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};k===null?(R=k=te,w=c):k=k.next=te,_t.lanes|=Z,$i|=Z}B=B.next}while(B!==null&&B!==g);k===null?w=c:k.next=R,Cr(c,i.memoizedState)||(jn=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=k,a.lastRenderedState=c}if(n=a.interleaved,n!==null){h=n;do g=h.lane,_t.lanes|=g,$i|=g,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Jd(n){var i=cr(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,g=i.memoizedState;if(h!==null){a.pending=null;var w=h=h.next;do g=n(g,w.action),w=w.next;while(w!==h);Cr(g,i.memoizedState)||(jn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function Em(){}function Im(n,i){var a=_t,c=cr(),h=i(),g=!Cr(c.memoizedState,h);if(g&&(c.memoizedState=h,jn=!0),c=c.queue,Xd(Sm.bind(null,a,c,n),[n]),c.getSnapshot!==i||g||Kt!==null&&Kt.memoizedState.tag&1){if(a.flags|=2048,Ha(9,xm.bind(null,a,c,h,i),void 0,null),Qt===null)throw Error(t(349));(Bi&30)!==0||Tm(a,i,h)}return h}function Tm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=_t.updateQueue,i===null?(i={lastEffect:null,stores:null},_t.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function xm(n,i,a,c){i.value=a,i.getSnapshot=c,Cm(i)&&Am(n)}function Sm(n,i,a){return a(function(){Cm(i)&&Am(n)})}function Cm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Cr(n,a)}catch{return!0}}function Am(n){var i=ms(n,1);i!==null&&kr(i,n,1,-1)}function Rm(n){var i=Kr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:n},i.queue=n,n=n.dispatch=tE.bind(null,_t,n),[i.memoizedState,n]}function Ha(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=_t.updateQueue,i===null?(i={lastEffect:null,stores:null},_t.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Pm(){return cr().memoizedState}function Au(n,i,a,c){var h=Kr();_t.flags|=n,h.memoizedState=Ha(1|i,a,void 0,c===void 0?null:c)}function Ru(n,i,a,c){var h=cr();c=c===void 0?null:c;var g=void 0;if($t!==null){var w=$t.memoizedState;if(g=w.destroy,c!==null&&Gd(c,w.deps)){h.memoizedState=Ha(i,a,g,c);return}}_t.flags|=n,h.memoizedState=Ha(1|i,a,g,c)}function bm(n,i){return Au(8390656,8,n,i)}function Xd(n,i){return Ru(2048,8,n,i)}function km(n,i){return Ru(4,2,n,i)}function Nm(n,i){return Ru(4,4,n,i)}function Dm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Vm(n,i,a){return a=a!=null?a.concat([n]):null,Ru(4,4,Dm.bind(null,i,n),a)}function Zd(){}function Om(n,i){var a=cr();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Gd(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Lm(n,i){var a=cr();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Gd(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function jm(n,i,a){return(Bi&21)===0?(n.baseState&&(n.baseState=!1,jn=!0),n.memoizedState=a):(Cr(a,i)||(a=ki(),_t.lanes|=a,$i|=a,n.baseState=!0),i)}function Zw(n,i){var a=Ke;Ke=a!==0&&4>a?a:4,n(!0);var c=qd.transition;qd.transition={};try{n(!1),i()}finally{Ke=a,qd.transition=c}}function Mm(){return cr().memoizedState}function eE(n,i,a){var c=ei(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Fm(n))Um(i,a);else if(a=gm(n,i,a,c),a!==null){var h=Sn();kr(a,n,c,h),zm(a,i,c)}}function tE(n,i,a){var c=ei(n),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fm(n))Um(i,h);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var w=i.lastRenderedState,R=g(w,a);if(h.hasEagerState=!0,h.eagerState=R,Cr(R,w)){var k=i.interleaved;k===null?(h.next=h,Ud(i)):(h.next=k.next,k.next=h),i.interleaved=h;return}}catch{}finally{}a=gm(n,i,h,c),a!==null&&(h=Sn(),kr(a,n,c,h),zm(a,i,c))}}function Fm(n){var i=n.alternate;return n===_t||i!==null&&i===_t}function Um(n,i){za=Cu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function zm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Fs(n,a)}}var Pu={readContext:ur,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},nE={readContext:ur,useCallback:function(n,i){return Kr().memoizedState=[n,i===void 0?null:i],n},useContext:ur,useEffect:bm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Au(4194308,4,Dm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Au(4194308,4,n,i)},useInsertionEffect:function(n,i){return Au(4,2,n,i)},useMemo:function(n,i){var a=Kr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Kr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=eE.bind(null,_t,n),[c.memoizedState,n]},useRef:function(n){var i=Kr();return n={current:n},i.memoizedState=n},useState:Rm,useDebugValue:Zd,useDeferredValue:function(n){return Kr().memoizedState=n},useTransition:function(){var n=Rm(!1),i=n[0];return n=Zw.bind(null,n[1]),Kr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=_t,h=Kr();if(yt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Qt===null)throw Error(t(349));(Bi&30)!==0||Tm(c,i,a)}h.memoizedState=a;var g={value:a,getSnapshot:i};return h.queue=g,bm(Sm.bind(null,c,g,n),[n]),c.flags|=2048,Ha(9,xm.bind(null,c,g,a,i),void 0,null),a},useId:function(){var n=Kr(),i=Qt.identifierPrefix;if(yt){var a=ps,c=fs;a=(c&~(1<<32-In(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ba++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Xw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},rE={readContext:ur,useCallback:Om,useContext:ur,useEffect:Xd,useImperativeHandle:Vm,useInsertionEffect:km,useLayoutEffect:Nm,useMemo:Lm,useReducer:Yd,useRef:Pm,useState:function(){return Yd($a)},useDebugValue:Zd,useDeferredValue:function(n){var i=cr();return jm(i,$t.memoizedState,n)},useTransition:function(){var n=Yd($a)[0],i=cr().memoizedState;return[n,i]},useMutableSource:Em,useSyncExternalStore:Im,useId:Mm,unstable_isNewReconciler:!1},sE={readContext:ur,useCallback:Om,useContext:ur,useEffect:Xd,useImperativeHandle:Vm,useInsertionEffect:km,useLayoutEffect:Nm,useMemo:Lm,useReducer:Jd,useRef:Pm,useState:function(){return Jd($a)},useDebugValue:Zd,useDeferredValue:function(n){var i=cr();return $t===null?i.memoizedState=n:jm(i,$t.memoizedState,n)},useTransition:function(){var n=Jd($a)[0],i=cr().memoizedState;return[n,i]},useMutableSource:Em,useSyncExternalStore:Im,useId:Mm,unstable_isNewReconciler:!1};function Rr(n,i){if(n&&n.defaultProps){i=oe({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function eh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:oe({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var bu={isMounted:function(n){return(n=n._reactInternals)?Ut(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Sn(),h=ei(n),g=gs(c,h);g.payload=i,a!=null&&(g.callback=a),i=Ys(n,g,h),i!==null&&(kr(i,n,h,c),Iu(i,n,h))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Sn(),h=ei(n),g=gs(c,h);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Ys(n,g,h),i!==null&&(kr(i,n,h,c),Iu(i,n,h))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Sn(),c=ei(n),h=gs(a,c);h.tag=2,i!=null&&(h.callback=i),i=Ys(n,h,c),i!==null&&(kr(i,n,c,a),Iu(i,n,c))}};function Bm(n,i,a,c,h,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):i.prototype&&i.prototype.isPureReactComponent?!ba(a,c)||!ba(h,g):!0}function $m(n,i,a){var c=!1,h=Gs,g=i.contextType;return typeof g=="object"&&g!==null?g=ur(g):(h=Ln(i)?ji:hn.current,c=i.contextTypes,g=(c=c!=null)?No(n,h):Gs),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=bu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=g),i}function Hm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&bu.enqueueReplaceState(i,i.state,null)}function th(n,i,a,c){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},zd(n);var g=i.contextType;typeof g=="object"&&g!==null?h.context=ur(g):(g=Ln(i)?ji:hn.current,h.context=No(n,g)),h.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(eh(n,i,g,a),h.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(i=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),i!==h.state&&bu.enqueueReplaceState(h,h.state,null),Tu(n,a,h,c),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function Uo(n,i){try{var a="",c=i;do a+=De(c),c=c.return;while(c);var h=a}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:h,digest:null}}function nh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function rh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var iE=typeof WeakMap=="function"?WeakMap:Map;function Wm(n,i,a){a=gs(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){ju||(ju=!0,vh=c),rh(n,i)},a}function qm(n,i,a){a=gs(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=i.value;a.payload=function(){return c(h)},a.callback=function(){rh(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){rh(n,i),typeof c!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Gm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new iE;var h=new Set;c.set(i,h)}else h=c.get(i),h===void 0&&(h=new Set,c.set(i,h));h.has(a)||(h.add(a),n=_E.bind(null,n,i,a),i.then(n,n))}function Km(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Qm(n,i,a,c,h){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=gs(-1,1),i.tag=2,Ys(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var oE=le.ReactCurrentOwner,jn=!1;function xn(n,i,a,c){i.child=n===null?mm(i,null,a,c):Lo(i,n.child,a,c)}function Ym(n,i,a,c,h){a=a.render;var g=i.ref;return Mo(i,h),c=Kd(n,i,a,c,g,h),a=Qd(),n!==null&&!jn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,ys(n,i,h)):(yt&&a&&kd(i),i.flags|=1,xn(n,i,c,h),i.child)}function Jm(n,i,a,c,h){if(n===null){var g=a.type;return typeof g=="function"&&!Sh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Xm(n,i,g,c,h)):(n=$u(a.type,null,c,i,i.mode,h),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&h)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:ba,a(w,c)&&n.ref===i.ref)return ys(n,i,h)}return i.flags|=1,n=ni(g,c),n.ref=i.ref,n.return=i,i.child=n}function Xm(n,i,a,c,h){if(n!==null){var g=n.memoizedProps;if(ba(g,c)&&n.ref===i.ref)if(jn=!1,i.pendingProps=c=g,(n.lanes&h)!==0)(n.flags&131072)!==0&&(jn=!0);else return i.lanes=n.lanes,ys(n,i,h)}return sh(n,i,a,c,h)}function Zm(n,i,a){var c=i.pendingProps,h=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Bo,Zn),Zn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,ct(Bo,Zn),Zn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,ct(Bo,Zn),Zn|=c}else g!==null?(c=g.baseLanes|a,i.memoizedState=null):c=a,ct(Bo,Zn),Zn|=c;return xn(n,i,h,a),i.child}function eg(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function sh(n,i,a,c,h){var g=Ln(a)?ji:hn.current;return g=No(i,g),Mo(i,h),a=Kd(n,i,a,c,g,h),c=Qd(),n!==null&&!jn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,ys(n,i,h)):(yt&&c&&kd(i),i.flags|=1,xn(n,i,a,h),i.child)}function tg(n,i,a,c,h){if(Ln(a)){var g=!0;pu(i)}else g=!1;if(Mo(i,h),i.stateNode===null)Nu(n,i),$m(i,a,c),th(i,a,c,h),c=!0;else if(n===null){var w=i.stateNode,R=i.memoizedProps;w.props=R;var k=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=ur(B):(B=Ln(a)?ji:hn.current,B=No(i,B));var Z=a.getDerivedStateFromProps,te=typeof Z=="function"||typeof w.getSnapshotBeforeUpdate=="function";te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==c||k!==B)&&Hm(i,w,c,B),Qs=!1;var X=i.memoizedState;w.state=X,Tu(i,c,w,h),k=i.memoizedState,R!==c||X!==k||On.current||Qs?(typeof Z=="function"&&(eh(i,a,Z,c),k=i.memoizedState),(R=Qs||Bm(i,a,R,c,X,k,B))?(te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=k),w.props=c,w.state=k,w.context=B,c=R):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,ym(n,i),R=i.memoizedProps,B=i.type===i.elementType?R:Rr(i.type,R),w.props=B,te=i.pendingProps,X=w.context,k=a.contextType,typeof k=="object"&&k!==null?k=ur(k):(k=Ln(a)?ji:hn.current,k=No(i,k));var ge=a.getDerivedStateFromProps;(Z=typeof ge=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==te||X!==k)&&Hm(i,w,c,k),Qs=!1,X=i.memoizedState,w.state=X,Tu(i,c,w,h);var xe=i.memoizedState;R!==te||X!==xe||On.current||Qs?(typeof ge=="function"&&(eh(i,a,ge,c),xe=i.memoizedState),(B=Qs||Bm(i,a,B,c,X,xe,k)||!1)?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,xe,k),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,xe,k)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=xe),w.props=c,w.state=xe,w.context=k,c=B):(typeof w.componentDidUpdate!="function"||R===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),c=!1)}return ih(n,i,a,c,g,h)}function ih(n,i,a,c,h,g){eg(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return h&&om(i,a,!1),ys(n,i,g);c=i.stateNode,oE.current=i;var R=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=Lo(i,n.child,null,g),i.child=Lo(i,null,R,g)):xn(n,i,R,g),i.memoizedState=c.state,h&&om(i,a,!0),i.child}function ng(n){var i=n.stateNode;i.pendingContext?sm(n,i.pendingContext,i.pendingContext!==i.context):i.context&&sm(n,i.context,!1),Bd(n,i.containerInfo)}function rg(n,i,a,c,h){return Oo(),Od(h),i.flags|=256,xn(n,i,a,c),i.child}var oh={dehydrated:null,treeContext:null,retryLane:0};function ah(n){return{baseLanes:n,cachePool:null,transitions:null}}function sg(n,i,a){var c=i.pendingProps,h=vt.current,g=!1,w=(i.flags&128)!==0,R;if((R=w)||(R=n!==null&&n.memoizedState===null?!1:(h&2)!==0),R?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),ct(vt,h&1),n===null)return Vd(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,g?(c=i.mode,g=i.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Hu(w,c,0,null),n=Gi(n,c,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=ah(a),i.memoizedState=oh,n):lh(i,w));if(h=n.memoizedState,h!==null&&(R=h.dehydrated,R!==null))return aE(n,i,w,c,R,h,a);if(g){g=c.fallback,w=i.mode,h=n.child,R=h.sibling;var k={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==h?(c=i.child,c.childLanes=0,c.pendingProps=k,i.deletions=null):(c=ni(h,k),c.subtreeFlags=h.subtreeFlags&14680064),R!==null?g=ni(R,g):(g=Gi(g,w,a,null),g.flags|=2),g.return=i,c.return=i,c.sibling=g,i.child=c,c=g,g=i.child,w=n.child.memoizedState,w=w===null?ah(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,i.memoizedState=oh,c}return g=n.child,n=g.sibling,c=ni(g,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function lh(n,i){return i=Hu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function ku(n,i,a,c){return c!==null&&Od(c),Lo(i,n.child,null,a),n=lh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function aE(n,i,a,c,h,g,w){if(a)return i.flags&256?(i.flags&=-257,c=nh(Error(t(422))),ku(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=c.fallback,h=i.mode,c=Hu({mode:"visible",children:c.children},h,0,null),g=Gi(g,h,w,null),g.flags|=2,c.return=i,g.return=i,c.sibling=g,i.child=c,(i.mode&1)!==0&&Lo(i,n.child,null,w),i.child.memoizedState=ah(w),i.memoizedState=oh,g);if((i.mode&1)===0)return ku(n,i,w,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var R=c.dgst;return c=R,g=Error(t(419)),c=nh(g,c,void 0),ku(n,i,w,c)}if(R=(w&n.childLanes)!==0,jn||R){if(c=Qt,c!==null){switch(w&-w){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|w))!==0?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,ms(n,h),kr(c,n,h,-1))}return xh(),c=nh(Error(t(421))),ku(n,i,w,c)}return h.data==="$?"?(i.flags|=128,i.child=n.child,i=wE.bind(null,n),h._reactRetry=i,null):(n=g.treeContext,Xn=Ws(h.nextSibling),Jn=i,yt=!0,Ar=null,n!==null&&(ar[lr++]=fs,ar[lr++]=ps,ar[lr++]=Mi,fs=n.id,ps=n.overflow,Mi=i),i=lh(i,c.children),i.flags|=4096,i)}function ig(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Fd(n.return,i,a)}function uh(n,i,a,c,h){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=h)}function og(n,i,a){var c=i.pendingProps,h=c.revealOrder,g=c.tail;if(xn(n,i,c.children,a),c=vt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ig(n,a,i);else if(n.tag===19)ig(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(ct(vt,c),(i.mode&1)===0)i.memoizedState=null;else switch(h){case"forwards":for(a=i.child,h=null;a!==null;)n=a.alternate,n!==null&&xu(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),uh(i,!1,h,a,g);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(n=h.alternate,n!==null&&xu(n)===null){i.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}uh(i,!0,a,null,g);break;case"together":uh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Nu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function ys(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),$i|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ni(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ni(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function lE(n,i,a){switch(i.tag){case 3:ng(i),Oo();break;case 5:wm(i);break;case 1:Ln(i.type)&&pu(i);break;case 4:Bd(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,h=i.memoizedProps.value;ct(wu,c._currentValue),c._currentValue=h;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(ct(vt,vt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?sg(n,i,a):(ct(vt,vt.current&1),n=ys(n,i,a),n!==null?n.sibling:null);ct(vt,vt.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return og(n,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ct(vt,vt.current),c)break;return null;case 22:case 23:return i.lanes=0,Zm(n,i,a)}return ys(n,i,a)}var ag,ch,lg,ug;ag=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ch=function(){},lg=function(n,i,a,c){var h=n.memoizedProps;if(h!==c){n=i.stateNode,zi(Gr.current);var g=null;switch(a){case"input":h=me(n,h),c=me(n,c),g=[];break;case"select":h=oe({},h,{value:void 0}),c=oe({},c,{value:void 0}),g=[];break;case"textarea":h=bn(n,h),c=bn(n,c),g=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=du)}Wn(a,c);var w;a=null;for(B in h)if(!c.hasOwnProperty(B)&&h.hasOwnProperty(B)&&h[B]!=null)if(B==="style"){var R=h[B];for(w in R)R.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in c){var k=c[B];if(R=h!=null?h[B]:void 0,c.hasOwnProperty(B)&&k!==R&&(k!=null||R!=null))if(B==="style")if(R){for(w in R)!R.hasOwnProperty(w)||k&&k.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in k)k.hasOwnProperty(w)&&R[w]!==k[w]&&(a||(a={}),a[w]=k[w])}else a||(g||(g=[]),g.push(B,a)),a=k;else B==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,R=R?R.__html:void 0,k!=null&&R!==k&&(g=g||[]).push(B,k)):B==="children"?typeof k!="string"&&typeof k!="number"||(g=g||[]).push(B,""+k):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(k!=null&&B==="onScroll"&&ft("scroll",n),g||R===k||(g=[])):(g=g||[]).push(B,k))}a&&(g=g||[]).push("style",a);var B=g;(i.updateQueue=B)&&(i.flags|=4)}},ug=function(n,i,a,c){a!==c&&(i.flags|=4)};function Wa(n,i){if(!yt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function pn(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function uE(n,i,a){var c=i.pendingProps;switch(Nd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(i),null;case 1:return Ln(i.type)&&fu(),pn(i),null;case 3:return c=i.stateNode,Fo(),pt(On),pt(hn),Wd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(vu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ar!==null&&(Eh(Ar),Ar=null))),ch(n,i),pn(i),null;case 5:$d(i);var h=zi(Ua.current);if(a=i.type,n!==null&&i.stateNode!=null)lg(n,i,a,c,h),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return pn(i),null}if(n=zi(Gr.current),vu(i)){c=i.stateNode,a=i.type;var g=i.memoizedProps;switch(c[qr]=i,c[Oa]=g,n=(i.mode&1)!==0,a){case"dialog":ft("cancel",c),ft("close",c);break;case"iframe":case"object":case"embed":ft("load",c);break;case"video":case"audio":for(h=0;h<Na.length;h++)ft(Na[h],c);break;case"source":ft("error",c);break;case"img":case"image":case"link":ft("error",c),ft("load",c);break;case"details":ft("toggle",c);break;case"input":Me(c,g),ft("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},ft("invalid",c);break;case"textarea":ln(c,g),ft("invalid",c)}Wn(a,g),h=null;for(var w in g)if(g.hasOwnProperty(w)){var R=g[w];w==="children"?typeof R=="string"?c.textContent!==R&&(g.suppressHydrationWarning!==!0&&cu(c.textContent,R,n),h=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(g.suppressHydrationWarning!==!0&&cu(c.textContent,R,n),h=["children",""+R]):o.hasOwnProperty(w)&&R!=null&&w==="onScroll"&&ft("scroll",c)}switch(a){case"input":It(c),Pn(c,g,!0);break;case"textarea":It(c),Xt(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=du)}c=h,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ie(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[qr]=i,n[Oa]=c,ag(n,i,!1,!1),i.stateNode=n;e:{switch(w=bs(a,c),a){case"dialog":ft("cancel",n),ft("close",n),h=c;break;case"iframe":case"object":case"embed":ft("load",n),h=c;break;case"video":case"audio":for(h=0;h<Na.length;h++)ft(Na[h],n);h=c;break;case"source":ft("error",n),h=c;break;case"img":case"image":case"link":ft("error",n),ft("load",n),h=c;break;case"details":ft("toggle",n),h=c;break;case"input":Me(n,c),h=me(n,c),ft("invalid",n);break;case"option":h=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},h=oe({},c,{value:void 0}),ft("invalid",n);break;case"textarea":ln(n,c),h=bn(n,c),ft("invalid",n);break;default:h=c}Wn(a,h),R=h;for(g in R)if(R.hasOwnProperty(g)){var k=R[g];g==="style"?tr(n,k):g==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Mr(n,k)):g==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&_r(n,k):typeof k=="number"&&_r(n,""+k):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?k!=null&&g==="onScroll"&&ft("scroll",n):k!=null&&Q(n,g,k,w))}switch(a){case"input":It(n),Pn(n,c,!1);break;case"textarea":It(n),Xt(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Le(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?qt(n,!!c.multiple,g,!1):c.defaultValue!=null&&qt(n,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=du)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return pn(i),null;case 6:if(n&&i.stateNode!=null)ug(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=zi(Ua.current),zi(Gr.current),vu(i)){if(c=i.stateNode,a=i.memoizedProps,c[qr]=i,(g=c.nodeValue!==a)&&(n=Jn,n!==null))switch(n.tag){case 3:cu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&cu(c.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[qr]=i,i.stateNode=c}return pn(i),null;case 13:if(pt(vt),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(yt&&Xn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)hm(),Oo(),i.flags|=98560,g=!1;else if(g=vu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[qr]=i}else Oo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pn(i),g=!1}else Ar!==null&&(Eh(Ar),Ar=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(vt.current&1)!==0?Ht===0&&(Ht=3):xh())),i.updateQueue!==null&&(i.flags|=4),pn(i),null);case 4:return Fo(),ch(n,i),n===null&&Da(i.stateNode.containerInfo),pn(i),null;case 10:return Md(i.type._context),pn(i),null;case 17:return Ln(i.type)&&fu(),pn(i),null;case 19:if(pt(vt),g=i.memoizedState,g===null)return pn(i),null;if(c=(i.flags&128)!==0,w=g.rendering,w===null)if(c)Wa(g,!1);else{if(Ht!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=xu(n),w!==null){for(i.flags|=128,Wa(g,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)g=a,n=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return ct(vt,vt.current&1|2),i.child}n=n.sibling}g.tail!==null&&ut()>$o&&(i.flags|=128,c=!0,Wa(g,!1),i.lanes=4194304)}else{if(!c)if(n=xu(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Wa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!yt)return pn(i),null}else 2*ut()-g.renderingStartTime>$o&&a!==1073741824&&(i.flags|=128,c=!0,Wa(g,!1),i.lanes=4194304);g.isBackwards?(w.sibling=i.child,i.child=w):(a=g.last,a!==null?a.sibling=w:i.child=w,g.last=w)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=ut(),i.sibling=null,a=vt.current,ct(vt,c?a&1|2:a&1),i):(pn(i),null);case 22:case 23:return Th(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(Zn&1073741824)!==0&&(pn(i),i.subtreeFlags&6&&(i.flags|=8192)):pn(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function cE(n,i){switch(Nd(i),i.tag){case 1:return Ln(i.type)&&fu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Fo(),pt(On),pt(hn),Wd(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return $d(i),null;case 13:if(pt(vt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Oo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return pt(vt),null;case 4:return Fo(),null;case 10:return Md(i.type._context),null;case 22:case 23:return Th(),null;case 24:return null;default:return null}}var Du=!1,mn=!1,dE=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function zo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Et(n,i,c)}else a.current=null}function dh(n,i,a){try{a()}catch(c){Et(n,i,c)}}var cg=!1;function hE(n,i){if(Td=Bs,n=Bp(),md(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,R=-1,k=-1,B=0,Z=0,te=n,X=null;t:for(;;){for(var ge;te!==a||h!==0&&te.nodeType!==3||(R=w+h),te!==g||c!==0&&te.nodeType!==3||(k=w+c),te.nodeType===3&&(w+=te.nodeValue.length),(ge=te.firstChild)!==null;)X=te,te=ge;for(;;){if(te===n)break t;if(X===a&&++B===h&&(R=w),X===g&&++Z===c&&(k=w),(ge=te.nextSibling)!==null)break;te=X,X=te.parentNode}te=ge}a=R===-1||k===-1?null:{start:R,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(xd={focusedElem:n,selectionRange:a},Bs=!1,Ie=i;Ie!==null;)if(i=Ie,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ie=n;else for(;Ie!==null;){i=Ie;try{var xe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(xe!==null){var Se=xe.memoizedProps,xt=xe.memoizedState,U=i.stateNode,O=U.getSnapshotBeforeUpdate(i.elementType===i.type?Se:Rr(i.type,Se),xt);U.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){Et(i,i.return,ne)}if(n=i.sibling,n!==null){n.return=i.return,Ie=n;break}Ie=i.return}return xe=cg,cg=!1,xe}function qa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&n)===n){var g=h.destroy;h.destroy=void 0,g!==void 0&&dh(i,a,g)}h=h.next}while(h!==c)}}function Vu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function hh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function dg(n){var i=n.alternate;i!==null&&(n.alternate=null,dg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[qr],delete i[Oa],delete i[Rd],delete i[Kw],delete i[Qw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hg(n){return n.tag===5||n.tag===3||n.tag===4}function fg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=du));else if(c!==4&&(n=n.child,n!==null))for(fh(n,i,a),n=n.sibling;n!==null;)fh(n,i,a),n=n.sibling}function ph(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(ph(n,i,a),n=n.sibling;n!==null;)ph(n,i,a),n=n.sibling}var nn=null,Pr=!1;function Js(n,i,a){for(a=a.child;a!==null;)pg(n,i,a),a=a.sibling}function pg(n,i,a){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Pi,a)}catch{}switch(a.tag){case 5:mn||zo(a,i);case 6:var c=nn,h=Pr;nn=null,Js(n,i,a),nn=c,Pr=h,nn!==null&&(Pr?(n=nn,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):nn.removeChild(a.stateNode));break;case 18:nn!==null&&(Pr?(n=nn,a=a.stateNode,n.nodeType===8?Ad(n.parentNode,a):n.nodeType===1&&Ad(n,a),xr(n)):Ad(nn,a.stateNode));break;case 4:c=nn,h=Pr,nn=a.stateNode.containerInfo,Pr=!0,Js(n,i,a),nn=c,Pr=h;break;case 0:case 11:case 14:case 15:if(!mn&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var g=h,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&dh(a,i,w),h=h.next}while(h!==c)}Js(n,i,a);break;case 1:if(!mn&&(zo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){Et(a,i,R)}Js(n,i,a);break;case 21:Js(n,i,a);break;case 22:a.mode&1?(mn=(c=mn)||a.memoizedState!==null,Js(n,i,a),mn=c):Js(n,i,a);break;default:Js(n,i,a)}}function mg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new dE),i.forEach(function(c){var h=EE.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}}function br(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var g=n,w=i,R=w;e:for(;R!==null;){switch(R.tag){case 5:nn=R.stateNode,Pr=!1;break e;case 3:nn=R.stateNode.containerInfo,Pr=!0;break e;case 4:nn=R.stateNode.containerInfo,Pr=!0;break e}R=R.return}if(nn===null)throw Error(t(160));pg(g,w,h),nn=null,Pr=!1;var k=h.alternate;k!==null&&(k.return=null),h.return=null}catch(B){Et(h,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)gg(i,n),i=i.sibling}function gg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(br(i,n),Qr(n),c&4){try{qa(3,n,n.return),Vu(3,n)}catch(Se){Et(n,n.return,Se)}try{qa(5,n,n.return)}catch(Se){Et(n,n.return,Se)}}break;case 1:br(i,n),Qr(n),c&512&&a!==null&&zo(a,a.return);break;case 5:if(br(i,n),Qr(n),c&512&&a!==null&&zo(a,a.return),n.flags&32){var h=n.stateNode;try{_r(h,"")}catch(Se){Et(n,n.return,Se)}}if(c&4&&(h=n.stateNode,h!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,R=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{R==="input"&&g.type==="radio"&&g.name!=null&&Rn(h,g),bs(R,w);var B=bs(R,g);for(w=0;w<k.length;w+=2){var Z=k[w],te=k[w+1];Z==="style"?tr(h,te):Z==="dangerouslySetInnerHTML"?Mr(h,te):Z==="children"?_r(h,te):Q(h,Z,te,B)}switch(R){case"input":Ft(h,g);break;case"textarea":kn(h,g);break;case"select":var X=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var ge=g.value;ge!=null?qt(h,!!g.multiple,ge,!1):X!==!!g.multiple&&(g.defaultValue!=null?qt(h,!!g.multiple,g.defaultValue,!0):qt(h,!!g.multiple,g.multiple?[]:"",!1))}h[Oa]=g}catch(Se){Et(n,n.return,Se)}}break;case 6:if(br(i,n),Qr(n),c&4){if(n.stateNode===null)throw Error(t(162));h=n.stateNode,g=n.memoizedProps;try{h.nodeValue=g}catch(Se){Et(n,n.return,Se)}}break;case 3:if(br(i,n),Qr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{xr(i.containerInfo)}catch(Se){Et(n,n.return,Se)}break;case 4:br(i,n),Qr(n);break;case 13:br(i,n),Qr(n),h=n.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(yh=ut())),c&4&&mg(n);break;case 22:if(Z=a!==null&&a.memoizedState!==null,n.mode&1?(mn=(B=mn)||Z,br(i,n),mn=B):br(i,n),Qr(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!Z&&(n.mode&1)!==0)for(Ie=n,Z=n.child;Z!==null;){for(te=Ie=Z;Ie!==null;){switch(X=Ie,ge=X.child,X.tag){case 0:case 11:case 14:case 15:qa(4,X,X.return);break;case 1:zo(X,X.return);var xe=X.stateNode;if(typeof xe.componentWillUnmount=="function"){c=X,a=X.return;try{i=c,xe.props=i.memoizedProps,xe.state=i.memoizedState,xe.componentWillUnmount()}catch(Se){Et(c,a,Se)}}break;case 5:zo(X,X.return);break;case 22:if(X.memoizedState!==null){_g(te);continue}}ge!==null?(ge.return=X,Ie=ge):_g(te)}Z=Z.sibling}e:for(Z=null,te=n;;){if(te.tag===5){if(Z===null){Z=te;try{h=te.stateNode,B?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(R=te.stateNode,k=te.memoizedProps.style,w=k!=null&&k.hasOwnProperty("display")?k.display:null,R.style.display=rs("display",w))}catch(Se){Et(n,n.return,Se)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=B?"":te.memoizedProps}catch(Se){Et(n,n.return,Se)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:br(i,n),Qr(n),c&4&&mg(n);break;case 21:break;default:br(i,n),Qr(n)}}function Qr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(hg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(_r(h,""),c.flags&=-33);var g=fg(n);ph(n,g,h);break;case 3:case 4:var w=c.stateNode.containerInfo,R=fg(n);fh(n,R,w);break;default:throw Error(t(161))}}catch(k){Et(n,n.return,k)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function fE(n,i,a){Ie=n,yg(n)}function yg(n,i,a){for(var c=(n.mode&1)!==0;Ie!==null;){var h=Ie,g=h.child;if(h.tag===22&&c){var w=h.memoizedState!==null||Du;if(!w){var R=h.alternate,k=R!==null&&R.memoizedState!==null||mn;R=Du;var B=mn;if(Du=w,(mn=k)&&!B)for(Ie=h;Ie!==null;)w=Ie,k=w.child,w.tag===22&&w.memoizedState!==null?wg(h):k!==null?(k.return=w,Ie=k):wg(h);for(;g!==null;)Ie=g,yg(g),g=g.sibling;Ie=h,Du=R,mn=B}vg(n)}else(h.subtreeFlags&8772)!==0&&g!==null?(g.return=h,Ie=g):vg(n)}}function vg(n){for(;Ie!==null;){var i=Ie;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:mn||Vu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!mn)if(a===null)c.componentDidMount();else{var h=i.elementType===i.type?a.memoizedProps:Rr(i.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&_m(i,g,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}_m(i,w,a)}break;case 5:var R=i.stateNode;if(a===null&&i.flags&4){a=R;var k=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var Z=B.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&xr(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}mn||i.flags&512&&hh(i)}catch(X){Et(i,i.return,X)}}if(i===n){Ie=null;break}if(a=i.sibling,a!==null){a.return=i.return,Ie=a;break}Ie=i.return}}function _g(n){for(;Ie!==null;){var i=Ie;if(i===n){Ie=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Ie=a;break}Ie=i.return}}function wg(n){for(;Ie!==null;){var i=Ie;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Vu(4,i)}catch(k){Et(i,a,k)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var h=i.return;try{c.componentDidMount()}catch(k){Et(i,h,k)}}var g=i.return;try{hh(i)}catch(k){Et(i,g,k)}break;case 5:var w=i.return;try{hh(i)}catch(k){Et(i,w,k)}}}catch(k){Et(i,i.return,k)}if(i===n){Ie=null;break}var R=i.sibling;if(R!==null){R.return=i.return,Ie=R;break}Ie=i.return}}var pE=Math.ceil,Ou=le.ReactCurrentDispatcher,mh=le.ReactCurrentOwner,dr=le.ReactCurrentBatchConfig,Ze=0,Qt=null,Nt=null,rn=0,Zn=0,Bo=qs(0),Ht=0,Ga=null,$i=0,Lu=0,gh=0,Ka=null,Mn=null,yh=0,$o=1/0,vs=null,ju=!1,vh=null,Xs=null,Mu=!1,Zs=null,Fu=0,Qa=0,_h=null,Uu=-1,zu=0;function Sn(){return(Ze&6)!==0?ut():Uu!==-1?Uu:Uu=ut()}function ei(n){return(n.mode&1)===0?1:(Ze&2)!==0&&rn!==0?rn&-rn:Jw.transition!==null?(zu===0&&(zu=ki()),zu):(n=Ke,n!==0||(n=window.event,n=n===void 0?16:Ta(n.type)),n)}function kr(n,i,a,c){if(50<Qa)throw Qa=0,_h=null,Error(t(185));Ms(n,a,c),((Ze&2)===0||n!==Qt)&&(n===Qt&&((Ze&2)===0&&(Lu|=a),Ht===4&&ti(n,rn)),Fn(n,c),a===1&&Ze===0&&(i.mode&1)===0&&($o=ut()+500,mu&&Ks()))}function Fn(n,i){var a=n.callbackNode;os(n,i);var c=bi(n,n===Qt?rn:0);if(c===0)a!==null&&Zt(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Zt(a),i===1)n.tag===0?Yw(Ig.bind(null,n)):am(Ig.bind(null,n)),qw(function(){(Ze&6)===0&&Ks()}),a=null;else{switch(Us(c)){case 1:a=Ri;break;case 4:a=Os;break;case 16:a=sr;break;case 536870912:a=zl;break;default:a=sr}a=bg(a,Eg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Eg(n,i){if(Uu=-1,zu=0,(Ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Ho()&&n.callbackNode!==a)return null;var c=bi(n,n===Qt?rn:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Bu(n,c);else{i=c;var h=Ze;Ze|=2;var g=xg();(Qt!==n||rn!==i)&&(vs=null,$o=ut()+500,Wi(n,i));do try{yE();break}catch(R){Tg(n,R)}while(!0);jd(),Ou.current=g,Ze=h,Nt!==null?i=0:(Qt=null,rn=0,i=Ht)}if(i!==0){if(i===2&&(h=Kn(n),h!==0&&(c=h,i=wh(n,h))),i===1)throw a=Ga,Wi(n,0),ti(n,c),Fn(n,ut()),a;if(i===6)ti(n,c);else{if(h=n.current.alternate,(c&30)===0&&!mE(h)&&(i=Bu(n,c),i===2&&(g=Kn(n),g!==0&&(c=g,i=wh(n,g))),i===1))throw a=Ga,Wi(n,0),ti(n,c),Fn(n,ut()),a;switch(n.finishedWork=h,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:qi(n,Mn,vs);break;case 3:if(ti(n,c),(c&130023424)===c&&(i=yh+500-ut(),10<i)){if(bi(n,0)!==0)break;if(h=n.suspendedLanes,(h&c)!==c){Sn(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=Cd(qi.bind(null,n,Mn,vs),i);break}qi(n,Mn,vs);break;case 4:if(ti(n,c),(c&4194240)===c)break;for(i=n.eventTimes,h=-1;0<c;){var w=31-In(c);g=1<<w,w=i[w],w>h&&(h=w),c&=~g}if(c=h,c=ut()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*pE(c/1960))-c,10<c){n.timeoutHandle=Cd(qi.bind(null,n,Mn,vs),c);break}qi(n,Mn,vs);break;case 5:qi(n,Mn,vs);break;default:throw Error(t(329))}}}return Fn(n,ut()),n.callbackNode===a?Eg.bind(null,n):null}function wh(n,i){var a=Ka;return n.current.memoizedState.isDehydrated&&(Wi(n,i).flags|=256),n=Bu(n,i),n!==2&&(i=Mn,Mn=a,i!==null&&Eh(i)),n}function Eh(n){Mn===null?Mn=n:Mn.push.apply(Mn,n)}function mE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],g=h.getSnapshot;h=h.value;try{if(!Cr(g(),h))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ti(n,i){for(i&=~gh,i&=~Lu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-In(i),c=1<<a;n[a]=-1,i&=~c}}function Ig(n){if((Ze&6)!==0)throw Error(t(327));Ho();var i=bi(n,0);if((i&1)===0)return Fn(n,ut()),null;var a=Bu(n,i);if(n.tag!==0&&a===2){var c=Kn(n);c!==0&&(i=c,a=wh(n,c))}if(a===1)throw a=Ga,Wi(n,0),ti(n,i),Fn(n,ut()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,qi(n,Mn,vs),Fn(n,ut()),null}function Ih(n,i){var a=Ze;Ze|=1;try{return n(i)}finally{Ze=a,Ze===0&&($o=ut()+500,mu&&Ks())}}function Hi(n){Zs!==null&&Zs.tag===0&&(Ze&6)===0&&Ho();var i=Ze;Ze|=1;var a=dr.transition,c=Ke;try{if(dr.transition=null,Ke=1,n)return n()}finally{Ke=c,dr.transition=a,Ze=i,(Ze&6)===0&&Ks()}}function Th(){Zn=Bo.current,pt(Bo)}function Wi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Ww(a)),Nt!==null)for(a=Nt.return;a!==null;){var c=a;switch(Nd(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&fu();break;case 3:Fo(),pt(On),pt(hn),Wd();break;case 5:$d(c);break;case 4:Fo();break;case 13:pt(vt);break;case 19:pt(vt);break;case 10:Md(c.type._context);break;case 22:case 23:Th()}a=a.return}if(Qt=n,Nt=n=ni(n.current,null),rn=Zn=i,Ht=0,Ga=null,gh=Lu=$i=0,Mn=Ka=null,Ui!==null){for(i=0;i<Ui.length;i++)if(a=Ui[i],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=h,c.next=w}a.pending=c}Ui=null}return n}function Tg(n,i){do{var a=Nt;try{if(jd(),Su.current=Pu,Cu){for(var c=_t.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Cu=!1}if(Bi=0,Kt=$t=_t=null,za=!1,Ba=0,mh.current=null,a===null||a.return===null){Ht=1,Ga=i,Nt=null;break}e:{var g=n,w=a.return,R=a,k=i;if(i=rn,R.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var B=k,Z=R,te=Z.tag;if((Z.mode&1)===0&&(te===0||te===11||te===15)){var X=Z.alternate;X?(Z.updateQueue=X.updateQueue,Z.memoizedState=X.memoizedState,Z.lanes=X.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ge=Km(w);if(ge!==null){ge.flags&=-257,Qm(ge,w,R,g,i),ge.mode&1&&Gm(g,B,i),i=ge,k=B;var xe=i.updateQueue;if(xe===null){var Se=new Set;Se.add(k),i.updateQueue=Se}else xe.add(k);break e}else{if((i&1)===0){Gm(g,B,i),xh();break e}k=Error(t(426))}}else if(yt&&R.mode&1){var xt=Km(w);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),Qm(xt,w,R,g,i),Od(Uo(k,R));break e}}g=k=Uo(k,R),Ht!==4&&(Ht=2),Ka===null?Ka=[g]:Ka.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var U=Wm(g,k,i);vm(g,U);break e;case 1:R=k;var O=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Xs===null||!Xs.has(z)))){g.flags|=65536,i&=-i,g.lanes|=i;var ne=qm(g,R,i);vm(g,ne);break e}}g=g.return}while(g!==null)}Cg(a)}catch(Ce){i=Ce,Nt===a&&a!==null&&(Nt=a=a.return);continue}break}while(!0)}function xg(){var n=Ou.current;return Ou.current=Pu,n===null?Pu:n}function xh(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Qt===null||($i&268435455)===0&&(Lu&268435455)===0||ti(Qt,rn)}function Bu(n,i){var a=Ze;Ze|=2;var c=xg();(Qt!==n||rn!==i)&&(vs=null,Wi(n,i));do try{gE();break}catch(h){Tg(n,h)}while(!0);if(jd(),Ze=a,Ou.current=c,Nt!==null)throw Error(t(261));return Qt=null,rn=0,Ht}function gE(){for(;Nt!==null;)Sg(Nt)}function yE(){for(;Nt!==null&&!qn();)Sg(Nt)}function Sg(n){var i=Pg(n.alternate,n,Zn);n.memoizedProps=n.pendingProps,i===null?Cg(n):Nt=i,mh.current=null}function Cg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=uE(a,i,Zn),a!==null){Nt=a;return}}else{if(a=cE(a,i),a!==null){a.flags&=32767,Nt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ht=6,Nt=null;return}}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=n}while(i!==null);Ht===0&&(Ht=5)}function qi(n,i,a){var c=Ke,h=dr.transition;try{dr.transition=null,Ke=1,vE(n,i,a,c)}finally{dr.transition=h,Ke=c}return null}function vE(n,i,a,c){do Ho();while(Zs!==null);if((Ze&6)!==0)throw Error(t(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(it(n,g),n===Qt&&(Nt=Qt=null,rn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Mu||(Mu=!0,bg(sr,function(){return Ho(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=dr.transition,dr.transition=null;var w=Ke;Ke=1;var R=Ze;Ze|=4,mh.current=null,hE(n,a),gg(a,n),Mw(xd),Bs=!!Td,xd=Td=null,n.current=a,fE(a),ad(),Ze=R,Ke=w,dr.transition=g}else n.current=a;if(Mu&&(Mu=!1,Zs=n,Fu=h),g=n.pendingLanes,g===0&&(Xs=null),Bl(a.stateNode),Fn(n,ut()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)h=i[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(ju)throw ju=!1,n=vh,vh=null,n;return(Fu&1)!==0&&n.tag!==0&&Ho(),g=n.pendingLanes,(g&1)!==0?n===_h?Qa++:(Qa=0,_h=n):Qa=0,Ks(),null}function Ho(){if(Zs!==null){var n=Us(Fu),i=dr.transition,a=Ke;try{if(dr.transition=null,Ke=16>n?16:n,Zs===null)var c=!1;else{if(n=Zs,Zs=null,Fu=0,(Ze&6)!==0)throw Error(t(331));var h=Ze;for(Ze|=4,Ie=n.current;Ie!==null;){var g=Ie,w=g.child;if((Ie.flags&16)!==0){var R=g.deletions;if(R!==null){for(var k=0;k<R.length;k++){var B=R[k];for(Ie=B;Ie!==null;){var Z=Ie;switch(Z.tag){case 0:case 11:case 15:qa(8,Z,g)}var te=Z.child;if(te!==null)te.return=Z,Ie=te;else for(;Ie!==null;){Z=Ie;var X=Z.sibling,ge=Z.return;if(dg(Z),Z===B){Ie=null;break}if(X!==null){X.return=ge,Ie=X;break}Ie=ge}}}var xe=g.alternate;if(xe!==null){var Se=xe.child;if(Se!==null){xe.child=null;do{var xt=Se.sibling;Se.sibling=null,Se=xt}while(Se!==null)}}Ie=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,Ie=w;else e:for(;Ie!==null;){if(g=Ie,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:qa(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,Ie=U;break e}Ie=g.return}}var O=n.current;for(Ie=O;Ie!==null;){w=Ie;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,Ie=z;else e:for(w=O;Ie!==null;){if(R=Ie,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Vu(9,R)}}catch(Ce){Et(R,R.return,Ce)}if(R===w){Ie=null;break e}var ne=R.sibling;if(ne!==null){ne.return=R.return,Ie=ne;break e}Ie=R.return}}if(Ze=h,Ks(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Pi,n)}catch{}c=!0}return c}finally{Ke=a,dr.transition=i}}return!1}function Ag(n,i,a){i=Uo(a,i),i=Wm(n,i,1),n=Ys(n,i,1),i=Sn(),n!==null&&(Ms(n,1,i),Fn(n,i))}function Et(n,i,a){if(n.tag===3)Ag(n,n,a);else for(;i!==null;){if(i.tag===3){Ag(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Xs===null||!Xs.has(c))){n=Uo(a,n),n=qm(i,n,1),i=Ys(i,n,1),n=Sn(),i!==null&&(Ms(i,1,n),Fn(i,n));break}}i=i.return}}function _E(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Sn(),n.pingedLanes|=n.suspendedLanes&a,Qt===n&&(rn&a)===a&&(Ht===4||Ht===3&&(rn&130023424)===rn&&500>ut()-yh?Wi(n,0):gh|=a),Fn(n,i)}function Rg(n,i){i===0&&((n.mode&1)===0?i=1:(i=fo,fo<<=1,(fo&130023424)===0&&(fo=4194304)));var a=Sn();n=ms(n,i),n!==null&&(Ms(n,i,a),Fn(n,a))}function wE(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Rg(n,a)}function EE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Rg(n,a)}var Pg;Pg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||On.current)jn=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return jn=!1,lE(n,i,a);jn=(n.flags&131072)!==0}else jn=!1,yt&&(i.flags&1048576)!==0&&lm(i,yu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Nu(n,i),n=i.pendingProps;var h=No(i,hn.current);Mo(i,a),h=Kd(null,i,c,n,h,a);var g=Qd();return i.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ln(c)?(g=!0,pu(i)):g=!1,i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,zd(i),h.updater=bu,i.stateNode=h,h._reactInternals=i,th(i,c,n,a),i=ih(null,i,c,!0,g,a)):(i.tag=0,yt&&g&&kd(i),xn(null,i,h,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Nu(n,i),n=i.pendingProps,h=c._init,c=h(c._payload),i.type=c,h=i.tag=TE(c),n=Rr(c,n),h){case 0:i=sh(null,i,c,n,a);break e;case 1:i=tg(null,i,c,n,a);break e;case 11:i=Ym(null,i,c,n,a);break e;case 14:i=Jm(null,i,c,Rr(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Rr(c,h),sh(n,i,c,h,a);case 1:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Rr(c,h),tg(n,i,c,h,a);case 3:e:{if(ng(i),n===null)throw Error(t(387));c=i.pendingProps,g=i.memoizedState,h=g.element,ym(n,i),Tu(i,c,null,a);var w=i.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){h=Uo(Error(t(423)),i),i=rg(n,i,c,a,h);break e}else if(c!==h){h=Uo(Error(t(424)),i),i=rg(n,i,c,a,h);break e}else for(Xn=Ws(i.stateNode.containerInfo.firstChild),Jn=i,yt=!0,Ar=null,a=mm(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Oo(),c===h){i=ys(n,i,a);break e}xn(n,i,c,a)}i=i.child}return i;case 5:return wm(i),n===null&&Vd(i),c=i.type,h=i.pendingProps,g=n!==null?n.memoizedProps:null,w=h.children,Sd(c,h)?w=null:g!==null&&Sd(c,g)&&(i.flags|=32),eg(n,i),xn(n,i,w,a),i.child;case 6:return n===null&&Vd(i),null;case 13:return sg(n,i,a);case 4:return Bd(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Lo(i,null,c,a):xn(n,i,c,a),i.child;case 11:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Rr(c,h),Ym(n,i,c,h,a);case 7:return xn(n,i,i.pendingProps,a),i.child;case 8:return xn(n,i,i.pendingProps.children,a),i.child;case 12:return xn(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,h=i.pendingProps,g=i.memoizedProps,w=h.value,ct(wu,c._currentValue),c._currentValue=w,g!==null)if(Cr(g.value,w)){if(g.children===h.children&&!On.current){i=ys(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var R=g.dependencies;if(R!==null){w=g.child;for(var k=R.firstContext;k!==null;){if(k.context===c){if(g.tag===1){k=gs(-1,a&-a),k.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var Z=B.pending;Z===null?k.next=k:(k.next=Z.next,Z.next=k),B.pending=k}}g.lanes|=a,k=g.alternate,k!==null&&(k.lanes|=a),Fd(g.return,a,i),R.lanes|=a;break}k=k.next}}else if(g.tag===10)w=g.type===i.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,R=w.alternate,R!==null&&(R.lanes|=a),Fd(w,a,i),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===i){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}xn(n,i,h.children,a),i=i.child}return i;case 9:return h=i.type,c=i.pendingProps.children,Mo(i,a),h=ur(h),c=c(h),i.flags|=1,xn(n,i,c,a),i.child;case 14:return c=i.type,h=Rr(c,i.pendingProps),h=Rr(c.type,h),Jm(n,i,c,h,a);case 15:return Xm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Rr(c,h),Nu(n,i),i.tag=1,Ln(c)?(n=!0,pu(i)):n=!1,Mo(i,a),$m(i,c,h),th(i,c,h,a),ih(null,i,c,!0,n,a);case 19:return og(n,i,a);case 22:return Zm(n,i,a)}throw Error(t(156,i.tag))};function bg(n,i){return ht(n,i)}function IE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(n,i,a,c){return new IE(n,i,a,c)}function Sh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function TE(n){if(typeof n=="function")return Sh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===D)return 11;if(n===st)return 14}return 2}function ni(n,i){var a=n.alternate;return a===null?(a=hr(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function $u(n,i,a,c,h,g){var w=2;if(c=n,typeof n=="function")Sh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case N:return Gi(a.children,h,g,i);case A:w=8,h|=8;break;case x:return n=hr(12,a,i,h|2),n.elementType=x,n.lanes=g,n;case S:return n=hr(13,a,i,h),n.elementType=S,n.lanes=g,n;case $e:return n=hr(19,a,i,h),n.elementType=$e,n.lanes=g,n;case ce:return Hu(a,h,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:w=10;break e;case P:w=9;break e;case D:w=11;break e;case st:w=14;break e;case ot:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=hr(w,a,i,h),i.elementType=n,i.type=c,i.lanes=g,i}function Gi(n,i,a,c){return n=hr(7,n,c,i),n.lanes=a,n}function Hu(n,i,a,c){return n=hr(22,n,c,i),n.elementType=ce,n.lanes=a,n.stateNode={isHidden:!1},n}function Ch(n,i,a){return n=hr(6,n,null,i),n.lanes=a,n}function Ah(n,i,a){return i=hr(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function xE(n,i,a,c,h){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=js(0),this.expirationTimes=js(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=js(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Rh(n,i,a,c,h,g,w,R,k){return n=new xE(n,i,a,R,k),i===1?(i=1,g===!0&&(i|=8)):i=0,g=hr(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},zd(g),n}function SE(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function kg(n){if(!n)return Gs;n=n._reactInternals;e:{if(Ut(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ln(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Ln(a))return im(n,a,i)}return i}function Ng(n,i,a,c,h,g,w,R,k){return n=Rh(a,c,!0,n,h,g,w,R,k),n.context=kg(null),a=n.current,c=Sn(),h=ei(a),g=gs(c,h),g.callback=i??null,Ys(a,g,h),n.current.lanes=h,Ms(n,h,c),Fn(n,c),n}function Wu(n,i,a,c){var h=i.current,g=Sn(),w=ei(h);return a=kg(a),i.context===null?i.context=a:i.pendingContext=a,i=gs(g,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Ys(h,i,w),n!==null&&(kr(n,h,w,g),Iu(n,h,w)),w}function qu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Dg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Ph(n,i){Dg(n,i),(n=n.alternate)&&Dg(n,i)}function CE(){return null}var Vg=typeof reportError=="function"?reportError:function(n){console.error(n)};function bh(n){this._internalRoot=n}Gu.prototype.render=bh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Wu(n,i,null,null)},Gu.prototype.unmount=bh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Hi(function(){Wu(null,n,null,null)}),i[ds]=null}};function Gu(n){this._internalRoot=n}Gu.prototype.unstable_scheduleHydration=function(n){if(n){var i=Gl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Br.length&&i!==0&&i<Br[a].priority;a++);Br.splice(a,0,n),a===0&&Yl(n)}};function kh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ku(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Og(){}function AE(n,i,a,c,h){if(h){if(typeof c=="function"){var g=c;c=function(){var B=qu(w);g.call(B)}}var w=Ng(i,c,n,0,null,!1,!1,"",Og);return n._reactRootContainer=w,n[ds]=w.current,Da(n.nodeType===8?n.parentNode:n),Hi(),w}for(;h=n.lastChild;)n.removeChild(h);if(typeof c=="function"){var R=c;c=function(){var B=qu(k);R.call(B)}}var k=Rh(n,0,!1,null,null,!1,!1,"",Og);return n._reactRootContainer=k,n[ds]=k.current,Da(n.nodeType===8?n.parentNode:n),Hi(function(){Wu(i,k,a,c)}),k}function Qu(n,i,a,c,h){var g=a._reactRootContainer;if(g){var w=g;if(typeof h=="function"){var R=h;h=function(){var k=qu(w);R.call(k)}}Wu(i,w,n,h)}else w=AE(a,i,n,h,c);return qu(w)}Wl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ls(i.pendingLanes);a!==0&&(Fs(i,a|1),Fn(i,ut()),(Ze&6)===0&&($o=ut()+500,Ks()))}break;case 13:Hi(function(){var c=ms(n,1);if(c!==null){var h=Sn();kr(c,n,1,h)}}),Ph(n,1)}},po=function(n){if(n.tag===13){var i=ms(n,134217728);if(i!==null){var a=Sn();kr(i,n,134217728,a)}Ph(n,134217728)}},ql=function(n){if(n.tag===13){var i=ei(n),a=ms(n,i);if(a!==null){var c=Sn();kr(a,n,i,c)}Ph(n,i)}},Gl=function(){return Ke},Kl=function(n,i){var a=Ke;try{return Ke=n,i()}finally{Ke=a}},Ns=function(n,i,a){switch(i){case"input":if(Ft(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var h=hu(c);if(!h)throw Error(t(90));he(c),Ft(c,h)}}}break;case"textarea":kn(n,a);break;case"select":i=a.value,i!=null&&qt(n,!!a.multiple,i,!1)}},is=Ih,Ai=Hi;var RE={usingClientEntryPoint:!1,Events:[La,bo,hu,rr,Vs,Ih]},Ya={findFiberByHostInstance:Li,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PE={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:le.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=dn(n),n===null?null:n.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||CE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yu.isDisabled&&Yu.supportsFiber)try{Pi=Yu.inject(PE),Gn=Yu}catch{}}return Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RE,Un.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kh(i))throw Error(t(200));return SE(n,i,null,a)},Un.createRoot=function(n,i){if(!kh(n))throw Error(t(299));var a=!1,c="",h=Vg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),i=Rh(n,1,!1,null,null,a,!1,c,h),n[ds]=i.current,Da(n.nodeType===8?n.parentNode:n),new bh(i)},Un.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=dn(i),n=n===null?null:n.stateNode,n},Un.flushSync=function(n){return Hi(n)},Un.hydrate=function(n,i,a){if(!Ku(i))throw Error(t(200));return Qu(null,n,i,!0,a)},Un.hydrateRoot=function(n,i,a){if(!kh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,h=!1,g="",w=Vg;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Ng(i,null,n,1,a??null,h,!1,g,w),n[ds]=i.current,Da(n),c)for(n=0;n<c.length;n++)a=c[n],h=a._getVersion,h=h(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,h]:i.mutableSourceEagerHydrationData.push(a,h);return new Gu(i)},Un.render=function(n,i,a){if(!Ku(i))throw Error(t(200));return Qu(null,n,i,!1,a)},Un.unmountComponentAtNode=function(n){if(!Ku(n))throw Error(t(40));return n._reactRootContainer?(Hi(function(){Qu(null,null,n,!1,function(){n._reactRootContainer=null,n[ds]=null})}),!0):!1},Un.unstable_batchedUpdates=Ih,Un.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Ku(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Qu(n,i,a,!1,c)},Un.version="18.3.1-next-f1338f8080-20240426",Un}var $g;function Mv(){if($g)return Vh.exports;$g=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vh.exports=ME(),Vh.exports}var Hg;function FE(){if(Hg)return Ju;Hg=1;var r=Mv();return Ju.createRoot=r.createRoot,Ju.hydrateRoot=r.hydrateRoot,Ju}var UE=FE();const zE=jv(UE);Mv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yl(){return yl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},yl.apply(this,arguments)}var ci;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ci||(ci={}));const Wg="popstate";function BE(r){r===void 0&&(r={});function e(s,o){let{pathname:l,search:d,hash:f}=s.location;return Xh("",{pathname:l,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:gc(o)}return HE(e,t,null,r)}function jt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Fv(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $E(){return Math.random().toString(36).substr(2,8)}function qg(r,e){return{usr:r.state,key:r.key,idx:e}}function Xh(r,e,t,s){return t===void 0&&(t=null),yl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ua(e):e,{state:t,key:e&&e.key||s||$E()})}function gc(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ua(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function HE(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,d=o.history,f=ci.Pop,m=null,v=I();v==null&&(v=0,d.replaceState(yl({},d.state,{idx:v}),""));function I(){return(d.state||{idx:null}).idx}function E(){f=ci.Pop;let M=I(),ee=M==null?null:M-v;v=M,m&&m({action:f,location:H.location,delta:ee})}function C(M,ee){f=ci.Push;let re=Xh(H.location,M,ee);v=I()+1;let Q=qg(re,v),le=H.createHref(re);try{d.pushState(Q,"",le)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;o.location.assign(le)}l&&m&&m({action:f,location:H.location,delta:1})}function j(M,ee){f=ci.Replace;let re=Xh(H.location,M,ee);v=I();let Q=qg(re,v),le=H.createHref(re);d.replaceState(Q,"",le),l&&m&&m({action:f,location:H.location,delta:0})}function $(M){let ee=o.location.origin!=="null"?o.location.origin:o.location.href,re=typeof M=="string"?M:gc(M);return re=re.replace(/ $/,"%20"),jt(ee,"No window.location.(origin|href) available to create URL for href: "+re),new URL(re,ee)}let H={get action(){return f},get location(){return r(o,d)},listen(M){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Wg,E),m=M,()=>{o.removeEventListener(Wg,E),m=null}},createHref(M){return e(o,M)},createURL:$,encodeLocation(M){let ee=$(M);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:C,replace:j,go(M){return d.go(M)}};return H}var Gg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Gg||(Gg={}));function WE(r,e,t){return t===void 0&&(t="/"),qE(r,e,t)}function qE(r,e,t,s){let o=typeof e=="string"?ua(e):e,l=Rf(o.pathname||"/",t);if(l==null)return null;let d=Uv(r);GE(d);let f=null;for(let m=0;f==null&&m<d.length;++m){let v=iI(l);f=nI(d[m],v)}return f}function Uv(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,d,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};m.relativePath.startsWith("/")&&(jt(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let v=hi([s,m.relativePath]),I=t.concat(m);l.children&&l.children.length>0&&(jt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Uv(l.children,e,I,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:eI(v,l.index),routesMeta:I})};return r.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,d);else for(let m of zv(l.path))o(l,d,m)}),e}function zv(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let d=zv(s.join("/")),f=[];return f.push(...d.map(m=>m===""?l:[l,m].join("/"))),o&&f.push(...d),f.map(m=>r.startsWith("/")&&m===""?"/":m)}function GE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:tI(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const KE=/^:[\w-]+$/,QE=3,YE=2,JE=1,XE=10,ZE=-2,Kg=r=>r==="*";function eI(r,e){let t=r.split("/"),s=t.length;return t.some(Kg)&&(s+=ZE),e&&(s+=YE),t.filter(o=>!Kg(o)).reduce((o,l)=>o+(KE.test(l)?QE:l===""?JE:XE),s)}function tI(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function nI(r,e,t){let{routesMeta:s}=r,o={},l="/",d=[];for(let f=0;f<s.length;++f){let m=s[f],v=f===s.length-1,I=l==="/"?e:e.slice(l.length)||"/",E=rI({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},I),C=m.route;if(!E)return null;Object.assign(o,E.params),d.push({params:o,pathname:hi([l,E.pathname]),pathnameBase:uI(hi([l,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(l=hi([l,E.pathnameBase]))}return d}function rI(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=sI(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((v,I,E)=>{let{paramName:C,isOptional:j}=I;if(C==="*"){let H=f[E]||"";d=l.slice(0,l.length-H.length).replace(/(.)\/+$/,"$1")}const $=f[E];return j&&!$?v[C]=void 0:v[C]=($||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:r}}function sI(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Fv(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,m)=>(s.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function iI(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fv(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Rf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function oI(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?ua(r):r;return{pathname:t?t.startsWith("/")?t:aI(t,e):e,search:cI(s),hash:dI(o)}}function aI(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function jh(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lI(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Bv(r,e){let t=lI(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function $v(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=ua(r):(o=yl({},r),jt(!o.pathname||!o.pathname.includes("?"),jh("?","pathname","search",o)),jt(!o.pathname||!o.pathname.includes("#"),jh("#","pathname","hash",o)),jt(!o.search||!o.search.includes("#"),jh("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,f;if(d==null)f=t;else{let E=e.length-1;if(!s&&d.startsWith("..")){let C=d.split("/");for(;C[0]==="..";)C.shift(),E-=1;o.pathname=C.join("/")}f=E>=0?e[E]:"/"}let m=oI(o,f),v=d&&d!=="/"&&d.endsWith("/"),I=(l||d===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(v||I)&&(m.pathname+="/"),m}const hi=r=>r.join("/").replace(/\/\/+/g,"/"),uI=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),cI=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,dI=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function hI(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Hv=["post","put","patch","delete"];new Set(Hv);const fI=["get",...Hv];new Set(fI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vl(){return vl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},vl.apply(this,arguments)}const Pf=V.createContext(null),pI=V.createContext(null),ro=V.createContext(null),Uc=V.createContext(null),so=V.createContext({outlet:null,matches:[],isDataRoute:!1}),Wv=V.createContext(null);function mI(r,e){let{relative:t}=e===void 0?{}:e;Rl()||jt(!1);let{basename:s,navigator:o}=V.useContext(ro),{hash:l,pathname:d,search:f}=Kv(r,{relative:t}),m=d;return s!=="/"&&(m=d==="/"?s:hi([s,d])),o.createHref({pathname:m,search:f,hash:l})}function Rl(){return V.useContext(Uc)!=null}function ca(){return Rl()||jt(!1),V.useContext(Uc).location}function qv(r){V.useContext(ro).static||V.useLayoutEffect(r)}function Gv(){let{isDataRoute:r}=V.useContext(so);return r?RI():gI()}function gI(){Rl()||jt(!1);let r=V.useContext(Pf),{basename:e,future:t,navigator:s}=V.useContext(ro),{matches:o}=V.useContext(so),{pathname:l}=ca(),d=JSON.stringify(Bv(o,t.v7_relativeSplatPath)),f=V.useRef(!1);return qv(()=>{f.current=!0}),V.useCallback(function(v,I){if(I===void 0&&(I={}),!f.current)return;if(typeof v=="number"){s.go(v);return}let E=$v(v,JSON.parse(d),l,I.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:hi([e,E.pathname])),(I.replace?s.replace:s.push)(E,I.state,I)},[e,s,d,l,r])}function Kv(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=V.useContext(ro),{matches:o}=V.useContext(so),{pathname:l}=ca(),d=JSON.stringify(Bv(o,s.v7_relativeSplatPath));return V.useMemo(()=>$v(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function yI(r,e){return vI(r,e)}function vI(r,e,t,s){Rl()||jt(!1);let{navigator:o}=V.useContext(ro),{matches:l}=V.useContext(so),d=l[l.length-1],f=d?d.params:{};d&&d.pathname;let m=d?d.pathnameBase:"/";d&&d.route;let v=ca(),I;if(e){var E;let M=typeof e=="string"?ua(e):e;m==="/"||(E=M.pathname)!=null&&E.startsWith(m)||jt(!1),I=M}else I=v;let C=I.pathname||"/",j=C;if(m!=="/"){let M=m.replace(/^\//,"").split("/");j="/"+C.replace(/^\//,"").split("/").slice(M.length).join("/")}let $=WE(r,{pathname:j}),H=TI($&&$.map(M=>Object.assign({},M,{params:Object.assign({},f,M.params),pathname:hi([m,o.encodeLocation?o.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?m:hi([m,o.encodeLocation?o.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,t,s);return e&&H?V.createElement(Uc.Provider,{value:{location:vl({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:ci.Pop}},H):H}function _I(){let r=AI(),e=hI(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:o},t):null,null)}const wI=V.createElement(_I,null);class EI extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?V.createElement(so.Provider,{value:this.props.routeContext},V.createElement(Wv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function II(r){let{routeContext:e,match:t,children:s}=r,o=V.useContext(Pf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),V.createElement(so.Provider,{value:e},s)}function TI(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let I=d.findIndex(E=>E.route.id&&(f==null?void 0:f[E.route.id])!==void 0);I>=0||jt(!1),d=d.slice(0,Math.min(d.length,I+1))}let m=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let I=0;I<d.length;I++){let E=d[I];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(v=I),E.route.id){let{loaderData:C,errors:j}=t,$=E.route.loader&&C[E.route.id]===void 0&&(!j||j[E.route.id]===void 0);if(E.route.lazy||$){m=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((I,E,C)=>{let j,$=!1,H=null,M=null;t&&(j=f&&E.route.id?f[E.route.id]:void 0,H=E.route.errorElement||wI,m&&(v<0&&C===0?(PI("route-fallback"),$=!0,M=null):v===C&&($=!0,M=E.route.hydrateFallbackElement||null)));let ee=e.concat(d.slice(0,C+1)),re=()=>{let Q;return j?Q=H:$?Q=M:E.route.Component?Q=V.createElement(E.route.Component,null):E.route.element?Q=E.route.element:Q=I,V.createElement(II,{match:E,routeContext:{outlet:I,matches:ee,isDataRoute:t!=null},children:Q})};return t&&(E.route.ErrorBoundary||E.route.errorElement||C===0)?V.createElement(EI,{location:t.location,revalidation:t.revalidation,component:H,error:j,children:re(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):re()},null)}var Qv=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Qv||{}),Yv=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Yv||{});function xI(r){let e=V.useContext(Pf);return e||jt(!1),e}function SI(r){let e=V.useContext(pI);return e||jt(!1),e}function CI(r){let e=V.useContext(so);return e||jt(!1),e}function Jv(r){let e=CI(),t=e.matches[e.matches.length-1];return t.route.id||jt(!1),t.route.id}function AI(){var r;let e=V.useContext(Wv),t=SI(),s=Jv();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function RI(){let{router:r}=xI(Qv.UseNavigateStable),e=Jv(Yv.UseNavigateStable),t=V.useRef(!1);return qv(()=>{t.current=!0}),V.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,vl({fromRouteId:e},l)))},[r,e])}const Qg={};function PI(r,e,t){Qg[r]||(Qg[r]=!0)}function bI(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function el(r){jt(!1)}function kI(r){let{basename:e="/",children:t=null,location:s,navigationType:o=ci.Pop,navigator:l,static:d=!1,future:f}=r;Rl()&&jt(!1);let m=e.replace(/^\/*/,"/"),v=V.useMemo(()=>({basename:m,navigator:l,static:d,future:vl({v7_relativeSplatPath:!1},f)}),[m,f,l,d]);typeof s=="string"&&(s=ua(s));let{pathname:I="/",search:E="",hash:C="",state:j=null,key:$="default"}=s,H=V.useMemo(()=>{let M=Rf(I,m);return M==null?null:{location:{pathname:M,search:E,hash:C,state:j,key:$},navigationType:o}},[m,I,E,C,j,$,o]);return H==null?null:V.createElement(ro.Provider,{value:v},V.createElement(Uc.Provider,{children:t,value:H}))}function NI(r){let{children:e,location:t}=r;return yI(Zh(e),t)}new Promise(()=>{});function Zh(r,e){e===void 0&&(e=[]);let t=[];return V.Children.forEach(r,(s,o)=>{if(!V.isValidElement(s))return;let l=[...e,o];if(s.type===V.Fragment){t.push.apply(t,Zh(s.props.children,l));return}s.type!==el&&jt(!1),!s.props.index||!s.props.children||jt(!1);let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Zh(s.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ef(){return ef=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},ef.apply(this,arguments)}function DI(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function VI(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function OI(r,e){return r.button===0&&(!e||e==="_self")&&!VI(r)}const LI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jI="6";try{window.__reactRouterVersion=jI}catch{}const MI="startTransition",Yg=OE[MI];function FI(r){let{basename:e,children:t,future:s,window:o}=r,l=V.useRef();l.current==null&&(l.current=BE({window:o,v5Compat:!0}));let d=l.current,[f,m]=V.useState({action:d.action,location:d.location}),{v7_startTransition:v}=s||{},I=V.useCallback(E=>{v&&Yg?Yg(()=>m(E)):m(E)},[m,v]);return V.useLayoutEffect(()=>d.listen(I),[d,I]),V.useEffect(()=>bI(s),[s]),V.createElement(kI,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:d,future:s})}const UI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nr=V.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:d,state:f,target:m,to:v,preventScrollReset:I,viewTransition:E}=e,C=DI(e,LI),{basename:j}=V.useContext(ro),$,H=!1;if(typeof v=="string"&&zI.test(v)&&($=v,UI))try{let Q=new URL(window.location.href),le=v.startsWith("//")?new URL(Q.protocol+v):new URL(v),ue=Rf(le.pathname,j);le.origin===Q.origin&&ue!=null?v=ue+le.search+le.hash:H=!0}catch{}let M=mI(v,{relative:o}),ee=BI(v,{replace:d,state:f,target:m,preventScrollReset:I,relative:o,viewTransition:E});function re(Q){s&&s(Q),Q.defaultPrevented||ee(Q)}return V.createElement("a",ef({},C,{href:$||M,onClick:H||l?s:re,ref:t,target:m}))});var Jg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Jg||(Jg={}));var Xg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Xg||(Xg={}));function BI(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:d,viewTransition:f}=e===void 0?{}:e,m=Gv(),v=ca(),I=Kv(r,{relative:d});return V.useCallback(E=>{if(OI(E,t)){E.preventDefault();let C=s!==void 0?s:gc(v)===gc(I);m(r,{replace:C,state:o,preventScrollReset:l,relative:d,viewTransition:f})}},[v,m,I,s,o,t,r,l,d,f])}const $I=()=>{};var Zg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},HI=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],f=r[t++],m=((o&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],d=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Zv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,f=d?r[o+1]:0,m=o+2<r.length,v=m?r[o+2]:0,I=l>>2,E=(l&3)<<4|f>>4;let C=(f&15)<<2|v>>6,j=v&63;m||(j=64,d||(C=64)),s.push(t[I],t[E],t[C],t[j])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Xv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):HI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||v==null||E==null)throw new WI;const C=l<<2|f>>4;if(s.push(C),v!==64){const j=f<<4&240|v>>2;if(s.push(j),E!==64){const $=v<<6&192|E;s.push($)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class WI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qI=function(r){const e=Xv(r);return Zv.encodeByteArray(e,!0)},yc=function(r){return qI(r).replace(/\./g,"")},e0=function(r){try{return Zv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=()=>GI().__FIREBASE_DEFAULTS__,QI=()=>{if(typeof process>"u"||typeof Zg>"u")return;const r=Zg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},YI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&e0(r[1]);return e&&JSON.parse(e)},zc=()=>{try{return $I()||KI()||QI()||YI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},t0=r=>{var e,t;return(t=(e=zc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},JI=r=>{const e=t0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},n0=()=>{var r;return(r=zc())===null||r===void 0?void 0:r.config},r0=r=>{var e;return(e=zc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function s0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[yc(JSON.stringify(t)),yc(JSON.stringify(d)),""].join(".")}const ll={};function eT(){const r={prod:[],emulator:[]};for(const e of Object.keys(ll))ll[e]?r.emulator.push(e):r.prod.push(e);return r}function tT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ey=!1;function i0(r,e){if(typeof window>"u"||typeof document>"u"||!da(window.location.host)||ll[r]===e||ll[r]||ey)return;ll[r]=e;function t(C){return`__firebase__banner__${C}`}const s="__firebase__banner",l=eT().prod.length>0;function d(){const C=document.getElementById(s);C&&C.remove()}function f(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function m(C,j){C.setAttribute("width","24"),C.setAttribute("id",j),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function v(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{ey=!0,d()},C}function I(C,j){C.setAttribute("id",j),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=tT(s),j=t("text"),$=document.getElementById(j)||document.createElement("span"),H=t("learnmore"),M=document.getElementById(H)||document.createElement("a"),ee=t("preprendIcon"),re=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const Q=C.element;f(Q),I(M,H);const le=v();m(re,ee),Q.append(re,$,M,le),document.body.appendChild(Q)}l?($.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function rT(){var r;const e=(r=zc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function oT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aT(){const r=_n();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function lT(){return!rT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uT(){try{return typeof indexedDB=="object"}catch{return!1}}function cT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="FirebaseError";class Rs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=dT,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pl.prototype.create)}}class Pl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?hT(l,s):"Error",f=`${this.serviceName}: ${d} (${o}).`;return new Rs(o,f,s)}}function hT(r,e){return r.replace(fT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const fT=/\{\$([^}]+)}/g;function pT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Zi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],d=e[o];if(ty(l)&&ty(d)){if(!Zi(l,d))return!1}else if(l!==d)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function ty(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function tl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function nl(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function mT(r,e){const t=new gT(r,e);return t.subscribe.bind(t)}class gT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");yT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Mh),o.error===void 0&&(o.error=Mh),o.complete===void 0&&(o.complete=Mh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Mh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(r){return r&&r._delegate?r._delegate:r}class eo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new XI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wT(e))try{this.getOrInitializeService({instanceIdentifier:Ki})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ki){return this.instances.has(e)}getOptions(e=Ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&d.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_T(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ki){return this.component?this.component.multipleInstances?e:Ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _T(r){return r===Ki?void 0:r}function wT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const IT={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},TT=qe.INFO,xT={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},ST=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=xT[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bf{constructor(e){this.name=e,this._logLevel=TT,this._logHandler=ST,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const CT=(r,e)=>e.some(t=>r instanceof t);let ny,ry;function AT(){return ny||(ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RT(){return ry||(ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const o0=new WeakMap,tf=new WeakMap,a0=new WeakMap,Fh=new WeakMap,kf=new WeakMap;function PT(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(fi(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&o0.set(t,r)}).catch(()=>{}),kf.set(e,r),e}function bT(r){if(tf.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});tf.set(r,e)}let nf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return tf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||a0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function kT(r){nf=r(nf)}function NT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Uh(this),e,...t);return a0.set(s,e.sort?e.sort():[e]),fi(s)}:RT().includes(r)?function(...e){return r.apply(Uh(this),e),fi(o0.get(this))}:function(...e){return fi(r.apply(Uh(this),e))}}function DT(r){return typeof r=="function"?NT(r):(r instanceof IDBTransaction&&bT(r),CT(r,AT())?new Proxy(r,nf):r)}function fi(r){if(r instanceof IDBRequest)return PT(r);if(Fh.has(r))return Fh.get(r);const e=DT(r);return e!==r&&(Fh.set(r,e),kf.set(e,r)),e}const Uh=r=>kf.get(r);function VT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),f=fi(d);return s&&d.addEventListener("upgradeneeded",m=>{s(fi(d.result),m.oldVersion,m.newVersion,fi(d.transaction),m)}),t&&d.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const OT=["get","getKey","getAll","getAllKeys","count"],LT=["put","add","delete","clear"],zh=new Map;function sy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(zh.get(e))return zh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=LT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||OT.includes(t)))return;const l=async function(d,...f){const m=this.transaction(d,o?"readwrite":"readonly");let v=m.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&m.done]))[0]};return zh.set(e,l),l}kT(r=>({...r,get:(e,t,s)=>sy(e,t)||r.get(e,t,s),has:(e,t)=>!!sy(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(MT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function MT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rf="@firebase/app",iy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new bf("@firebase/app"),FT="@firebase/app-compat",UT="@firebase/analytics-compat",zT="@firebase/analytics",BT="@firebase/app-check-compat",$T="@firebase/app-check",HT="@firebase/auth",WT="@firebase/auth-compat",qT="@firebase/database",GT="@firebase/data-connect",KT="@firebase/database-compat",QT="@firebase/functions",YT="@firebase/functions-compat",JT="@firebase/installations",XT="@firebase/installations-compat",ZT="@firebase/messaging",ex="@firebase/messaging-compat",tx="@firebase/performance",nx="@firebase/performance-compat",rx="@firebase/remote-config",sx="@firebase/remote-config-compat",ix="@firebase/storage",ox="@firebase/storage-compat",ax="@firebase/firestore",lx="@firebase/ai",ux="@firebase/firestore-compat",cx="firebase",dx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",hx={[rf]:"fire-core",[FT]:"fire-core-compat",[zT]:"fire-analytics",[UT]:"fire-analytics-compat",[$T]:"fire-app-check",[BT]:"fire-app-check-compat",[HT]:"fire-auth",[WT]:"fire-auth-compat",[qT]:"fire-rtdb",[GT]:"fire-data-connect",[KT]:"fire-rtdb-compat",[QT]:"fire-fn",[YT]:"fire-fn-compat",[JT]:"fire-iid",[XT]:"fire-iid-compat",[ZT]:"fire-fcm",[ex]:"fire-fcm-compat",[tx]:"fire-perf",[nx]:"fire-perf-compat",[rx]:"fire-rc",[sx]:"fire-rc-compat",[ix]:"fire-gcs",[ox]:"fire-gcs-compat",[ax]:"fire-fst",[ux]:"fire-fst-compat",[lx]:"fire-vertex","fire-js":"fire-js",[cx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new Map,fx=new Map,of=new Map;function oy(r,e){try{r.container.addComponent(e)}catch(t){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function na(r){const e=r.name;if(of.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;of.set(e,r);for(const t of vc.values())oy(t,r);for(const t of fx.values())oy(t,r);return!0}function Nf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function An(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pi=new Pl("app","Firebase",px);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=dx;function l0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:sf,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw pi.create("bad-app-name",{appName:String(o)});if(t||(t=n0()),!t)throw pi.create("no-options");const l=vc.get(o);if(l){if(Zi(t,l.options)&&Zi(s,l.config))return l;throw pi.create("duplicate-app",{appName:o})}const d=new ET(o);for(const m of of.values())d.addComponent(m);const f=new mx(t,s,d);return vc.set(o,f),f}function u0(r=sf){const e=vc.get(r);if(!e&&r===sf&&n0())return l0();if(!e)throw pi.create("no-app",{appName:r});return e}function mi(r,e,t){var s;let o=(s=hx[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(f.join(" "));return}na(new eo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="firebase-heartbeat-database",yx=1,_l="firebase-heartbeat-store";let Bh=null;function c0(){return Bh||(Bh=VT(gx,yx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(_l)}catch(t){console.warn(t)}}}}).catch(r=>{throw pi.create("idb-open",{originalErrorMessage:r.message})})),Bh}async function vx(r){try{const t=(await c0()).transaction(_l),s=await t.objectStore(_l).get(d0(r));return await t.done,s}catch(e){if(e instanceof Rs)Ts.warn(e.message);else{const t=pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ts.warn(t.message)}}}async function ay(r,e){try{const s=(await c0()).transaction(_l,"readwrite");await s.objectStore(_l).put(e,d0(r)),await s.done}catch(t){if(t instanceof Rs)Ts.warn(t.message);else{const s=pi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ts.warn(s.message)}}}function d0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=1024,wx=30;class Ex{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tx(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ly();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>wx){const d=xx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ts.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ly(),{heartbeatsToSend:s,unsentEntries:o}=Ix(this._heartbeatsCache.heartbeats),l=yc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ts.warn(t),""}}}function ly(){return new Date().toISOString().substring(0,10)}function Ix(r,e=_x){const t=[];let s=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),uy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),uy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Tx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uT()?cT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ay(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ay(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function uy(r){return yc(JSON.stringify({version:2,heartbeats:r})).length}function xx(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(r){na(new eo("platform-logger",e=>new jT(e),"PRIVATE")),na(new eo("heartbeat",e=>new Ex(e),"PRIVATE")),mi(rf,iy,r),mi(rf,iy,"esm2017"),mi("fire-js","")}Sx("");var Cx="firebase",Ax="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(Cx,Ax,"app");function Df(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function h0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Rx=h0,f0=new Pl("auth","Firebase",h0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new bf("@firebase/auth");function Px(r,...e){_c.logLevel<=qe.WARN&&_c.warn(`Auth (${fa}): ${r}`,...e)}function oc(r,...e){_c.logLevel<=qe.ERROR&&_c.error(`Auth (${fa}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(r,...e){throw Of(r,...e)}function Bn(r,...e){return Of(r,...e)}function Vf(r,e,t){const s=Object.assign(Object.assign({},Rx()),{[e]:t});return new Pl("auth","Firebase",s).create(e,{appName:r.name})}function Or(r){return Vf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bx(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&yr(r,"argument-error"),Vf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Of(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return f0.create(r,...e)}function pe(r,e,...t){if(!r)throw Of(e,...t)}function ws(r){const e="INTERNAL ASSERTION FAILED: "+r;throw oc(e),new Error(e)}function xs(r,e){r||ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function Lf(){return cy()==="http:"||cy()==="https:"}function cy(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lf()||iT()||"connection"in navigator)?navigator.onLine:!0}function Nx(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,t){this.shortDelay=e,this.longDelay=t,xs(t>e,"Short delay should be less than long delay!"),this.isMobile=nT()||oT()}get(){return kx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(r,e){xs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ox=new bl(3e4,6e4);function wn(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function $n(r,e,t,s,o={}){return m0(r,o,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const f=ha(Object.assign({key:r.config.apiKey},d)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:m},l);return sT()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&da(r.emulatorConfig.host)&&(v.credentials="include"),p0.fetch()(await g0(r,r.config.apiHost,t,f),v)})}async function m0(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},Dx),e);try{const o=new jx(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw rl(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const f=l.ok?d.errorMessage:d.error.message,[m,v]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw rl(r,"credential-already-in-use",d);if(m==="EMAIL_EXISTS")throw rl(r,"email-already-in-use",d);if(m==="USER_DISABLED")throw rl(r,"user-disabled",d);const I=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Vf(r,I,v);yr(r,I)}}catch(o){if(o instanceof Rs)throw o;yr(r,"network-request-failed",{message:String(o)})}}async function Ps(r,e,t,s,o={}){const l=await $n(r,e,t,s,o);return"mfaPendingCredential"in l&&yr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function g0(r,e,t,s){const o=`${e}${t}?${s}`,l=r,d=l.config.emulator?jf(r.config,o):`${r.config.apiScheme}://${o}`;return Vx.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function Lx(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Bn(this.auth,"network-request-failed")),Ox.get())})}}function rl(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Bn(r,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(r){return r!==void 0&&r.getResponse!==void 0}function hy(r){return r!==void 0&&r.enterprise!==void 0}class y0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Lx(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(r){return(await $n(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function v0(r,e){return $n(r,"GET","/v2/recaptchaConfig",wn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(r,e){return $n(r,"POST","/v1/accounts:delete",e)}async function Ec(r,e){return $n(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ux(r,e=!1){const t=Mt(r),s=await t.getIdToken(e),o=Mf(s);pe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:ul($h(o.auth_time)),issuedAtTime:ul($h(o.iat)),expirationTime:ul($h(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function $h(r){return Number(r)*1e3}function Mf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return oc("JWT malformed, contained fewer than 3 sections"),null;try{const o=e0(t);return o?JSON.parse(o):(oc("Failed to decode base64 JWT payload"),null)}catch(o){return oc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function fy(r){const e=Mf(r);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Rs&&zx(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function zx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ul(this.lastLoginAt),this.creationTime=ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(r){var e;const t=r.auth,s=await r.getIdToken(),o=await ra(r,Ec(t,{idToken:s}));pe(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?_0(l.providerUserInfo):[],f=Hx(r.providerData,d),m=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),I=m?v:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new af(l.createdAt,l.lastLoginAt),isAnonymous:I};Object.assign(r,E)}async function $x(r){const e=Mt(r);await wl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hx(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function _0(r){return r.map(e=>{var{providerId:t}=e,s=Df(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wx(r,e){const t=await m0(r,{},async()=>{const s=ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await g0(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return r.emulatorConfig&&da(r.emulatorConfig.host)&&(m.credentials="include"),p0.fetch()(d,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qx(r,e){return $n(r,"POST","/v2/accounts:revokeToken",wn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const t=fy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await Wx(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,d=new Yo;return s&&(pe(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(pe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(pe(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(r,e){pe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Dr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=Df(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new af(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ra(this,this.stsTokenManager.getToken(this.auth,e));return pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ux(this,e)}reload(){return $x(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await wl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(Or(this.auth));const e=await this.getIdToken();return await ra(this,Fx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,d,f,m,v,I;const E=(s=t.displayName)!==null&&s!==void 0?s:void 0,C=(o=t.email)!==null&&o!==void 0?o:void 0,j=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,$=(d=t.photoURL)!==null&&d!==void 0?d:void 0,H=(f=t.tenantId)!==null&&f!==void 0?f:void 0,M=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,ee=(v=t.createdAt)!==null&&v!==void 0?v:void 0,re=(I=t.lastLoginAt)!==null&&I!==void 0?I:void 0,{uid:Q,emailVerified:le,isAnonymous:ue,providerData:de,stsTokenManager:N}=t;pe(Q&&N,e,"internal-error");const A=Yo.fromJSON(this.name,N);pe(typeof Q=="string",e,"internal-error"),si(E,e.name),si(C,e.name),pe(typeof le=="boolean",e,"internal-error"),pe(typeof ue=="boolean",e,"internal-error"),si(j,e.name),si($,e.name),si(H,e.name),si(M,e.name),si(ee,e.name),si(re,e.name);const x=new Dr({uid:Q,auth:e,email:C,emailVerified:le,displayName:E,isAnonymous:ue,photoURL:$,phoneNumber:j,tenantId:H,stsTokenManager:A,createdAt:ee,lastLoginAt:re});return de&&Array.isArray(de)&&(x.providerData=de.map(b=>Object.assign({},b))),M&&(x._redirectEventId=M),x}static async _fromIdTokenResponse(e,t,s=!1){const o=new Yo;o.updateFromServerResponse(t);const l=new Dr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await wl(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];pe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?_0(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Yo;f.updateFromIdToken(s);const m=new Dr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new af(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,v),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=new Map;function Es(r){xs(r instanceof Function,"Expected a class definition");let e=py.get(r);return e?(xs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,py.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}w0.type="NONE";const my=w0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(r,e,t){return`firebase:${r}:${e}:${t}`}class Jo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=ac(this.userKey,o.apiKey,l),this.fullPersistenceKey=ac("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ec(this.auth,{idToken:e}).catch(()=>{});return t?Dr._fromGetAccountInfoResponse(this.auth,t,e):null}return Dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Jo(Es(my),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Es(my);const d=ac(s,e.config.apiKey,e.name);let f=null;for(const v of t)try{const I=await v._get(d);if(I){let E;if(typeof I=="string"){const C=await Ec(e,{idToken:I}).catch(()=>{});if(!C)break;E=await Dr._fromGetAccountInfoResponse(e,C,I)}else E=Dr._fromJSON(e,I);v!==l&&(f=E),l=v;break}}catch{}const m=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Jo(l,e,s):(l=m[0],f&&await l._set(d,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new Jo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(x0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(E0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C0(e))return"Blackberry";if(A0(e))return"Webos";if(I0(e))return"Safari";if((e.includes("chrome/")||T0(e))&&!e.includes("edge/"))return"Chrome";if(S0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function E0(r=_n()){return/firefox\//i.test(r)}function I0(r=_n()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function T0(r=_n()){return/crios\//i.test(r)}function x0(r=_n()){return/iemobile/i.test(r)}function S0(r=_n()){return/android/i.test(r)}function C0(r=_n()){return/blackberry/i.test(r)}function A0(r=_n()){return/webos/i.test(r)}function Ff(r=_n()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Gx(r=_n()){var e;return Ff(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Kx(){return aT()&&document.documentMode===10}function R0(r=_n()){return Ff(r)||S0(r)||A0(r)||C0(r)||/windows phone/i.test(r)||x0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(r,e=[]){let t;switch(r){case"Browser":t=gy(_n());break;case"Worker":t=`${gy(_n())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((d,f)=>{try{const m=e(l);d(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(r,e={}){return $n(r,"GET","/v2/passwordPolicy",wn(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=6;class Xx{constructor(e){var t,s,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:Jx,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,d,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(d=m.containsNumericCharacter)!==null&&d!==void 0?d:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yy(this),this.idTokenSubscription=new yy(this),this.beforeStateQueue=new Qx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Es(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Jo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ec(this,{idToken:e}),s=await Dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(An(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!d||d===f)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Nx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(Or(this));const t=e?Mt(e):null;return t&&pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(Or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(Or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Yx(this),t=new Xx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await qx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Es(e)||this._popupRedirectResolver;pe(t,this,"argument-error"),this.redirectPersistenceManager=await Jo.create(this,[Es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(f,this,"internal-error"),f.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,o);return()=>{d=!0,m()}}else{const m=e.addObserver(t);return()=>{d=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=P0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Px(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function vr(r){return Mt(r)}class yy{constructor(e){this.auth=e,this.observer=null,this.addObserver=mT(t=>this.observer=t)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eS(r){kl=r}function Uf(r){return kl.loadJS(r)}function tS(){return kl.recaptchaV2Script}function nS(){return kl.recaptchaEnterpriseScript}function rS(){return kl.gapiScript}function b0(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=500,iS=6e4,Xu=1e12;class oS{constructor(e){this.auth=e,this.counter=Xu,this._widgets=new Map}render(e,t){const s=this.counter;return this._widgets.set(s,new uS(e,this.auth.name,t||{})),this.counter++,s}reset(e){var t;const s=e||Xu;(t=this._widgets.get(s))===null||t===void 0||t.delete(),this._widgets.delete(s)}getResponse(e){var t;const s=e||Xu;return((t=this._widgets.get(s))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const s=e||Xu;return(t=this._widgets.get(s))===null||t===void 0||t.execute(),""}}class aS{constructor(){this.enterprise=new lS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class uS{constructor(e,t,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;pe(o,"argument-error",{appName:t}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=cS(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},iS)},sS))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function cS(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<r;s++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const dS="recaptcha-enterprise",cl="NO_RECAPTCHA";class k0{constructor(e){this.type=dS,this.auth=vr(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,f)=>{v0(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new y0(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(m=>{f(m)})})}function o(l,d,f){const m=window.grecaptcha;hy(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(cl)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aS().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{s(this.auth).then(f=>{if(!t&&hy(window.grecaptcha))o(f,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let m=nS();m.length!==0&&(m+=f),Uf(m).then(()=>{o(f,l,d)}).catch(v=>{d(v)})}}).catch(f=>{d(f)})})}}async function Xa(r,e,t,s=!1,o=!1){const l=new k0(r);let d;if(o)d=cl;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Xo(r,e,t,s,o){var l,d;if(o==="EMAIL_PASSWORD_PROVIDER")if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Xa(r,e,t,t==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Xa(r,e,t,t==="getOobCode");return s(r,m)}else return Promise.reject(f)});else if(o==="PHONE_PROVIDER")if(!((d=r._getRecaptchaConfig())===null||d===void 0)&&d.isProviderEnabled("PHONE_PROVIDER")){const f=await Xa(r,e,t);return s(r,f).catch(async m=>{var v;if(((v=r._getRecaptchaConfig())===null||v===void 0?void 0:v.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(m.code==="auth/missing-recaptcha-token"||m.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const I=await Xa(r,e,t,!1,!0);return s(r,I)}return Promise.reject(m)})}else{const f=await Xa(r,e,t,!1,!0);return s(r,f)}else return Promise.reject(o+" provider is not supported.")}async function hS(r){const e=vr(r),t=await v0(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new y0(t);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new k0(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(r,e){const t=Nf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Zi(l,e??{}))return o;yr(o,"already-initialized")}return t.initialize({options:e})}function pS(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Es);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function mS(r,e,t){const s=vr(r);pe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=N0(e),{host:d,port:f}=gS(e),m=f===null?"":`:${f}`,v={url:`${l}//${d}${m}/`},I=Object.freeze({host:d,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){pe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),pe(Zi(v,s.config.emulator)&&Zi(I,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=I,s.settings.appVerificationDisabledForTesting=!0,da(d)?(s0(`${l}//${d}${m}`),i0("Auth",!0)):yS()}function N0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function gS(r){const e=N0(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:vy(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:vy(d)}}}function vy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function yS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,t){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}async function vS(r,e){return $n(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(r,e){return Ps(r,"POST","/v1/accounts:signInWithPassword",wn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(r,e){return Ps(r,"POST","/v1/accounts:signInWithEmailLink",wn(r,e))}async function ES(r,e){return Ps(r,"POST","/v1/accounts:signInWithEmailLink",wn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Bc{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new El(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new El(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xo(e,t,"signInWithPassword",_S,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return wS(e,{email:this._email,oobCode:this._password});default:yr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xo(e,s,"signUpPassword",vS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ES(e,{idToken:t,email:this._email,oobCode:this._password});default:yr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(r,e){return Ps(r,"POST","/v1/accounts:signInWithIdp",wn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="http://localhost";class Ss extends Bc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=Df(t,["providerId","signInMethod"]);if(!s||!o)return null;const d=new Ss(s,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Zo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Zo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zo(e,t)}buildRequest(){const e={requestUri:IS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ha(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _y(r,e){return $n(r,"POST","/v1/accounts:sendVerificationCode",wn(r,e))}async function TS(r,e){return Ps(r,"POST","/v1/accounts:signInWithPhoneNumber",wn(r,e))}async function xS(r,e){const t=await Ps(r,"POST","/v1/accounts:signInWithPhoneNumber",wn(r,e));if(t.temporaryProof)throw rl(r,"account-exists-with-different-credential",t);return t}const SS={USER_NOT_FOUND:"user-not-found"};async function CS(r,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ps(r,"POST","/v1/accounts:signInWithPhoneNumber",wn(r,t),SS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Bc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new dl({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new dl({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return TS(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return xS(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return CS(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:l}=e;return!s&&!t&&!o&&!l?null:new dl({verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RS(r){const e=tl(nl(r)).link,t=e?tl(nl(e)).deep_link_id:null,s=tl(nl(r)).deep_link_id;return(s?tl(nl(s)).link:null)||s||t||e||r}class zf{constructor(e){var t,s,o,l,d,f;const m=tl(nl(e)),v=(t=m.apiKey)!==null&&t!==void 0?t:null,I=(s=m.oobCode)!==null&&s!==void 0?s:null,E=AS((o=m.mode)!==null&&o!==void 0?o:null);pe(v&&I&&E,"argument-error"),this.apiKey=v,this.operation=E,this.code=I,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=m.lang)!==null&&d!==void 0?d:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=RS(e);try{return new zf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.providerId=io.PROVIDER_ID}static credential(e,t){return El._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=zf.parseLink(t);return pe(s,"argument-error"),El._fromEmailAndCode(e,s.code,s.tenantId)}}io.PROVIDER_ID="password";io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends Bf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ea extends pa{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return pe("providerId"in t&&"signInMethod"in t,"argument-error"),Ss._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return pe(e.idToken||e.accessToken,"argument-error"),Ss._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ea.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ea.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:l,nonce:d,providerId:f}=e;if(!s&&!o&&!t&&!l||!f)return null;try{return new ea(f)._credential({idToken:t,accessToken:s,nonce:d,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends pa{constructor(){super("facebook.com")}static credential(e){return Ss._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ii.credential(e.oauthAccessToken)}catch{return null}}}ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends pa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ss._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return _s.credential(t,s)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends pa{constructor(){super("github.com")}static credential(e){return Ss._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.GITHUB_SIGN_IN_METHOD="github.com";oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends pa{constructor(){super("twitter.com")}static credential(e,t){return Ss._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ai.credential(t,s)}catch{return null}}}ai.TWITTER_SIGN_IN_METHOD="twitter.com";ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(r,e){return Ps(r,"POST","/v1/accounts:signUp",wn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Dr._fromIdTokenResponse(e,s,o),d=wy(s);return new vi({user:l,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=wy(s);return new vi({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function wy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends Rs{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Ic.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Ic(e,t,s,o)}}function D0(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ic._fromErrorAndOperation(r,l,e,s):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}async function V0(r,e,t=!1){const s=await ra(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return vi._forOperation(r,"link",s)}async function kS(r,e,t){await wl(e);const s=bS(e.providerData);pe(s.has(t)===r,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NS(r,e,t=!1){const{auth:s}=r;if(An(s.app))return Promise.reject(Or(s));const o="reauthenticate";try{const l=await ra(r,D0(s,o,e,r),t);pe(l.idToken,s,"internal-error");const d=Mf(l.idToken);pe(d,s,"internal-error");const{sub:f}=d;return pe(r.uid===f,s,"user-mismatch"),vi._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&yr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O0(r,e,t=!1){if(An(r.app))return Promise.reject(Or(r));const s="signIn",o=await D0(r,s,e),l=await vi._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function L0(r,e){return O0(vr(r),e)}async function Zu(r,e){const t=Mt(r);return await kS(!1,t,e.providerId),V0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(r,e){return Ps(r,"POST","/v1/accounts:signInWithCustomToken",wn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(r,e){if(An(r.app))return Promise.reject(Or(r));const t=vr(r),s=await DS(t,{token:e,returnSecureToken:!0}),o=await vi._fromIdTokenResponse(t,"signIn",s);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j0(r){const e=vr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function M0(r,e,t){if(An(r.app))return Promise.reject(Or(r));const s=vr(r),d=await Xo(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PS,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&j0(r),m}),f=await vi._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function OS(r,e,t){return An(r.app)?Promise.reject(Or(r)):L0(Mt(r),io.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&j0(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(r,e){return $n(r,"POST","/v1/accounts:createAuthUri",wn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(r,e){const t=Lf()?wc():"http://localhost",s={identifier:e,continueUri:t},{signinMethods:o}=await LS(Mt(r),s);return o||[]}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(r,e){return $n(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=Mt(r),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await ra(s,MS(s.auth,l));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const f=s.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=s.displayName,f.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function US(r,e,t,s){return Mt(r).onIdTokenChanged(e,t,s)}function zS(r,e,t){return Mt(r).beforeAuthStateChanged(e,t)}function BS(r,e,t,s){return Mt(r).onAuthStateChanged(e,t,s)}function $S(r){return Mt(r).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(r,e){return $n(r,"POST","/v2/accounts/mfaEnrollment:start",wn(r,e))}const Tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tc,"1"),this.storage.removeItem(Tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=1e3,WS=10;class U0 extends F0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,m)=>{this.notifyListeners(d,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);Kx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,WS):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},HS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}U0.type="LOCAL";const qS=U0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends F0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}z0.type="SESSION";const B0=z0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new $c(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(d).map(async v=>v(t.origin,l)),m=await GS(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$c.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((f,m)=>{const v=$f("",20);o.port1.start();const I=setTimeout(()=>{m(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(E){const C=E;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(I),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(C.data.response);break;default:clearTimeout(I),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return window}function QS(r){Vt().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(){return typeof Vt().WorkerGlobalScope<"u"&&typeof Vt().importScripts=="function"}async function YS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function XS(){return Hf()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="firebaseLocalStorageDb",ZS=1,xc="firebaseLocalStorage",H0="fbase_key";class Nl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hc(r,e){return r.transaction([xc],e?"readwrite":"readonly").objectStore(xc)}function e1(){const r=indexedDB.deleteDatabase($0);return new Nl(r).toPromise()}function lf(){const r=indexedDB.open($0,ZS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(xc,{keyPath:H0})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(xc)?e(s):(s.close(),await e1(),e(await lf()))})})}async function Iy(r,e,t){const s=Hc(r,!0).put({[H0]:e,value:t});return new Nl(s).toPromise()}async function t1(r,e){const t=Hc(r,!1).get(e),s=await new Nl(t).toPromise();return s===void 0?null:s.value}function Ty(r,e){const t=Hc(r,!0).delete(e);return new Nl(t).toPromise()}const n1=800,r1=3;class W0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>r1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$c._getInstance(XS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await YS(),!this.activeServiceWorker)return;this.sender=new KS(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lf();return await Iy(e,Tc,"1"),await Ty(e,Tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Iy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>t1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ty(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Hc(o,!1).getAll();return new Nl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),n1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}W0.type="LOCAL";const s1=W0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(r,e){return $n(r,"POST","/v2/accounts/mfaSignIn:start",wn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=b0("rcb"),i1=new bl(3e4,6e4);class o1{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Vt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return pe(a1(t),e,"argument-error"),this.shouldResolveImmediately(t)&&dy(Vt().grecaptcha)?Promise.resolve(Vt().grecaptcha):new Promise((s,o)=>{const l=Vt().setTimeout(()=>{o(Bn(e,"network-request-failed"))},i1.get());Vt()[Hh]=()=>{Vt().clearTimeout(l),delete Vt()[Hh];const f=Vt().grecaptcha;if(!f||!dy(f)){o(Bn(e,"internal-error"));return}const m=f.render;f.render=(v,I)=>{const E=m(v,I);return this.counter++,E},this.hostLanguage=t,s(f)};const d=`${tS()}?${ha({onload:Hh,render:"explicit",hl:t})}`;Uf(d).catch(()=>{clearTimeout(l),o(Bn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Vt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function a1(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}class l1{async load(e){return new oS(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl="recaptcha",u1={theme:"light",type:"image"};class q0{constructor(e,t,s=Object.assign({},u1)){this.parameters=s,this.type=hl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vr(e),this.isInvisible=this.parameters.size==="invisible",pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof t=="string"?document.getElementById(t):t;pe(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new l1:new o1,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),s=t.getResponse(e);return s||new Promise(o=>{const l=d=>{d&&(this.tokenChangeListeners.delete(l),o(d))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(s=>s(t)),typeof e=="function")e(t);else if(typeof e=="string"){const s=Vt()[e];typeof s=="function"&&s(t)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){pe(Lf()&&!Hf(),this.auth,"internal-error"),await c1(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Mx(this.auth);pe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function c1(){let r=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}r=()=>e(),window.addEventListener("load",r)}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=dl._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function h1(r,e,t){if(An(r.app))return Promise.reject(Or(r));const s=vr(r),o=await f1(s,e,Mt(t));return new d1(o,l=>L0(s,l))}async function f1(r,e,t){var s;if(!r._getRecaptchaConfig())try{await hS(r)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const l=o.session;if("phoneNumber"in o){pe(l.type==="enroll",r,"internal-error");const d={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Xo(r,d,"mfaSmsEnrollment",async(I,E)=>{if(E.phoneEnrollmentInfo.captchaResponse===cl){pe((t==null?void 0:t.type)===hl,I,"argument-error");const C=await Wh(I,E,t);return Ey(I,C)}return Ey(I,E)},"PHONE_PROVIDER").catch(I=>Promise.reject(I))).phoneSessionInfo.sessionInfo}else{pe(l.type==="signin",r,"internal-error");const d=((s=o.multiFactorHint)===null||s===void 0?void 0:s.uid)||o.multiFactorUid;pe(d,r,"missing-multi-factor-info");const f={mfaPendingCredential:l.credential,mfaEnrollmentId:d,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Xo(r,f,"mfaSmsSignIn",async(E,C)=>{if(C.phoneSignInInfo.captchaResponse===cl){pe((t==null?void 0:t.type)===hl,E,"argument-error");const j=await Wh(E,C,t);return xy(E,j)}return xy(E,C)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Xo(r,l,"sendVerificationCode",async(v,I)=>{if(I.captchaResponse===cl){pe((t==null?void 0:t.type)===hl,v,"argument-error");const E=await Wh(v,I,t);return _y(v,E)}return _y(v,I)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).sessionInfo}}finally{t==null||t._reset()}}async function Wh(r,e,t){pe(t.type===hl,r,"argument-error");const s=await t.verify();pe(typeof s=="string",r,"argument-error");const o=Object.assign({},e);if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.captchaResponse,f=o.phoneEnrollmentInfo.clientType,m=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:s,captchaResponse:d,clientType:f,recaptchaVersion:m}}),o}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.captchaResponse,d=o.phoneSignInInfo.clientType,f=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:l,clientType:d,recaptchaVersion:f}}),o}else return Object.assign(o,{recaptchaToken:s}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(r,e){return e?Es(e):(pe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends Bc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function p1(r){return O0(r.auth,new Wf(r),r.bypassAuthState)}function m1(r){const{auth:e,user:t}=r;return pe(t,e,"internal-error"),NS(t,new Wf(r),r.bypassAuthState)}async function g1(r){const{auth:e,user:t}=r;return pe(t,e,"internal-error"),V0(t,new Wf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:d,type:f}=e;if(d){this.reject(d);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p1;case"linkViaPopup":case"linkViaRedirect":return g1;case"reauthViaPopup":case"reauthViaRedirect":return m1;default:yr(this.auth,"internal-error")}}resolve(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=new bl(2e3,1e4);async function ec(r,e,t){if(An(r.app))return Promise.reject(Bn(r,"operation-not-supported-in-this-environment"));const s=vr(r);bx(r,e,Bf);const o=G0(s,t);return new Qi(s,"signInViaPopup",e,o).executeNotNull()}class Qi extends K0{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Qi.currentPopupAction&&Qi.currentPopupAction.cancel(),Qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const e=$f();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y1.get())};e()}}Qi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="pendingRedirect",lc=new Map;class _1 extends K0{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=lc.get(this.auth._key());if(!e){try{const s=await w1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}lc.set(this.auth._key(),e)}return this.bypassAuthState||lc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w1(r,e){const t=T1(e),s=I1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function E1(r,e){lc.set(r._key(),e)}function I1(r){return Es(r._redirectPersistence)}function T1(r){return ac(v1,r.config.apiKey,r.name)}async function x1(r,e,t=!1){if(An(r.app))return Promise.reject(Or(r));const s=vr(r),o=G0(s,e),d=await new _1(s,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=10*60*1e3;class C1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Q0(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Bn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sy(e))}saveEventToCache(e){this.cachedEventUids.add(Sy(e)),this.lastProcessedEventTime=Date.now()}}function Sy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Q0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function A1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(r,e={}){return $n(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b1=/^https?/;async function k1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await R1(r);for(const t of e)try{if(N1(t))return}catch{}yr(r,"unauthorized-domain")}function N1(r){const e=wc(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!b1.test(t))return!1;if(P1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=new bl(3e4,6e4);function Cy(){const r=Vt().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function V1(r){return new Promise((e,t)=>{var s,o,l;function d(){Cy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cy(),t(Bn(r,"network-request-failed"))},timeout:D1.get()})}if(!((o=(s=Vt().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Vt().gapi)===null||l===void 0)&&l.load)d();else{const f=b0("iframefcb");return Vt()[f]=()=>{gapi.load?d():t(Bn(r,"network-request-failed"))},Uf(`${rS()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw uc=null,e})}let uc=null;function O1(r){return uc=uc||V1(r),uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=new bl(5e3,15e3),j1="__/auth/iframe",M1="emulator/auth/iframe",F1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z1(r){const e=r.config;pe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?jf(e,M1):`https://${r.config.authDomain}/${j1}`,s={apiKey:e.apiKey,appName:r.name,v:fa},o=U1.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ha(s).slice(1)}`}async function B1(r){const e=await O1(r),t=Vt().gapi;return pe(t,r,"internal-error"),e.open({where:document.body,url:z1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const d=Bn(r,"network-request-failed"),f=Vt().setTimeout(()=>{l(d)},L1.get());function m(){Vt().clearTimeout(f),o(s)}s.ping(m).then(m,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H1=500,W1=600,q1="_blank",G1="http://localhost";class Ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K1(r,e,t,s=H1,o=W1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m=Object.assign(Object.assign({},$1),{width:s.toString(),height:o.toString(),top:l,left:d}),v=_n().toLowerCase();t&&(f=T0(v)?q1:t),E0(v)&&(e=e||G1,m.scrollbars="yes");const I=Object.entries(m).reduce((C,[j,$])=>`${C}${j}=${$},`,"");if(Gx(v)&&f!=="_self")return Q1(e||"",f),new Ay(null);const E=window.open(e||"",f,I);pe(E,r,"popup-blocked");try{E.focus()}catch{}return new Ay(E)}function Q1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="__/auth/handler",J1="emulator/auth/handler",X1=encodeURIComponent("fac");async function Ry(r,e,t,s,o,l){pe(r.config.authDomain,r,"auth-domain-config-required"),pe(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:fa,eventId:o};if(e instanceof Bf){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",pT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[I,E]of Object.entries({}))d[I]=E}if(e instanceof pa){const I=e.getScopes().filter(E=>E!=="");I.length>0&&(d.scopes=I.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const I of Object.keys(f))f[I]===void 0&&delete f[I];const m=await r._getAppCheckToken(),v=m?`#${X1}=${encodeURIComponent(m)}`:"";return`${Z1(r)}?${ha(f).slice(1)}${v}`}function Z1({config:r}){return r.emulator?jf(r,J1):`https://${r.authDomain}/${Y1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="webStorageSupport";class eC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B0,this._completeRedirectFn=x1,this._overrideRedirectResult=E1}async _openPopup(e,t,s,o){var l;xs((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await Ry(e,t,s,wc(),o);return K1(e,d,$f())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Ry(e,t,s,wc(),o);return QS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(xs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await B1(e),s=new C1(e);return t.register("authEvent",o=>(pe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qh,{type:qh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[qh];d!==void 0&&t(!!d),yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=k1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return R0()||I0()||Ff()}}const tC=eC;var Py="@firebase/auth",by="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sC(r){na(new eo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;pe(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P0(r)},v=new Zx(s,o,l,m);return pS(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),na(new eo("auth-internal",e=>{const t=vr(e.getProvider("auth").getImmediate());return(s=>new nC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(Py,by,rC(r)),mi(Py,by,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=5*60,oC=r0("authIdTokenMaxAge")||iC;let ky=null;const aC=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>oC)return;const o=t==null?void 0:t.token;ky!==o&&(ky=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function lC(r=u0()){const e=Nf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=fS(r,{popupRedirectResolver:tC,persistence:[s1,qS,B0]}),s=r0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=aC(l.toString());zS(t,d,()=>d(t.currentUser)),US(t,f=>d(f))}}const o=t0("auth");return o&&mS(t,`http://${o}`),t}function uC(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}eS({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Bn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",uC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sC("Browser");var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gi,Y0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function x(){}x.prototype=A.prototype,N.D=A.prototype,N.prototype=new x,N.prototype.constructor=N,N.C=function(b,P,D){for(var S=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)S[$e-2]=arguments[$e];return A.prototype[P].apply(b,S)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,A,x){x||(x=0);var b=Array(16);if(typeof A=="string")for(var P=0;16>P;++P)b[P]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(P=0;16>P;++P)b[P]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=N.g[0],x=N.g[1],P=N.g[2];var D=N.g[3],S=A+(D^x&(P^D))+b[0]+3614090360&4294967295;A=x+(S<<7&4294967295|S>>>25),S=D+(P^A&(x^P))+b[1]+3905402710&4294967295,D=A+(S<<12&4294967295|S>>>20),S=P+(x^D&(A^x))+b[2]+606105819&4294967295,P=D+(S<<17&4294967295|S>>>15),S=x+(A^P&(D^A))+b[3]+3250441966&4294967295,x=P+(S<<22&4294967295|S>>>10),S=A+(D^x&(P^D))+b[4]+4118548399&4294967295,A=x+(S<<7&4294967295|S>>>25),S=D+(P^A&(x^P))+b[5]+1200080426&4294967295,D=A+(S<<12&4294967295|S>>>20),S=P+(x^D&(A^x))+b[6]+2821735955&4294967295,P=D+(S<<17&4294967295|S>>>15),S=x+(A^P&(D^A))+b[7]+4249261313&4294967295,x=P+(S<<22&4294967295|S>>>10),S=A+(D^x&(P^D))+b[8]+1770035416&4294967295,A=x+(S<<7&4294967295|S>>>25),S=D+(P^A&(x^P))+b[9]+2336552879&4294967295,D=A+(S<<12&4294967295|S>>>20),S=P+(x^D&(A^x))+b[10]+4294925233&4294967295,P=D+(S<<17&4294967295|S>>>15),S=x+(A^P&(D^A))+b[11]+2304563134&4294967295,x=P+(S<<22&4294967295|S>>>10),S=A+(D^x&(P^D))+b[12]+1804603682&4294967295,A=x+(S<<7&4294967295|S>>>25),S=D+(P^A&(x^P))+b[13]+4254626195&4294967295,D=A+(S<<12&4294967295|S>>>20),S=P+(x^D&(A^x))+b[14]+2792965006&4294967295,P=D+(S<<17&4294967295|S>>>15),S=x+(A^P&(D^A))+b[15]+1236535329&4294967295,x=P+(S<<22&4294967295|S>>>10),S=A+(P^D&(x^P))+b[1]+4129170786&4294967295,A=x+(S<<5&4294967295|S>>>27),S=D+(x^P&(A^x))+b[6]+3225465664&4294967295,D=A+(S<<9&4294967295|S>>>23),S=P+(A^x&(D^A))+b[11]+643717713&4294967295,P=D+(S<<14&4294967295|S>>>18),S=x+(D^A&(P^D))+b[0]+3921069994&4294967295,x=P+(S<<20&4294967295|S>>>12),S=A+(P^D&(x^P))+b[5]+3593408605&4294967295,A=x+(S<<5&4294967295|S>>>27),S=D+(x^P&(A^x))+b[10]+38016083&4294967295,D=A+(S<<9&4294967295|S>>>23),S=P+(A^x&(D^A))+b[15]+3634488961&4294967295,P=D+(S<<14&4294967295|S>>>18),S=x+(D^A&(P^D))+b[4]+3889429448&4294967295,x=P+(S<<20&4294967295|S>>>12),S=A+(P^D&(x^P))+b[9]+568446438&4294967295,A=x+(S<<5&4294967295|S>>>27),S=D+(x^P&(A^x))+b[14]+3275163606&4294967295,D=A+(S<<9&4294967295|S>>>23),S=P+(A^x&(D^A))+b[3]+4107603335&4294967295,P=D+(S<<14&4294967295|S>>>18),S=x+(D^A&(P^D))+b[8]+1163531501&4294967295,x=P+(S<<20&4294967295|S>>>12),S=A+(P^D&(x^P))+b[13]+2850285829&4294967295,A=x+(S<<5&4294967295|S>>>27),S=D+(x^P&(A^x))+b[2]+4243563512&4294967295,D=A+(S<<9&4294967295|S>>>23),S=P+(A^x&(D^A))+b[7]+1735328473&4294967295,P=D+(S<<14&4294967295|S>>>18),S=x+(D^A&(P^D))+b[12]+2368359562&4294967295,x=P+(S<<20&4294967295|S>>>12),S=A+(x^P^D)+b[5]+4294588738&4294967295,A=x+(S<<4&4294967295|S>>>28),S=D+(A^x^P)+b[8]+2272392833&4294967295,D=A+(S<<11&4294967295|S>>>21),S=P+(D^A^x)+b[11]+1839030562&4294967295,P=D+(S<<16&4294967295|S>>>16),S=x+(P^D^A)+b[14]+4259657740&4294967295,x=P+(S<<23&4294967295|S>>>9),S=A+(x^P^D)+b[1]+2763975236&4294967295,A=x+(S<<4&4294967295|S>>>28),S=D+(A^x^P)+b[4]+1272893353&4294967295,D=A+(S<<11&4294967295|S>>>21),S=P+(D^A^x)+b[7]+4139469664&4294967295,P=D+(S<<16&4294967295|S>>>16),S=x+(P^D^A)+b[10]+3200236656&4294967295,x=P+(S<<23&4294967295|S>>>9),S=A+(x^P^D)+b[13]+681279174&4294967295,A=x+(S<<4&4294967295|S>>>28),S=D+(A^x^P)+b[0]+3936430074&4294967295,D=A+(S<<11&4294967295|S>>>21),S=P+(D^A^x)+b[3]+3572445317&4294967295,P=D+(S<<16&4294967295|S>>>16),S=x+(P^D^A)+b[6]+76029189&4294967295,x=P+(S<<23&4294967295|S>>>9),S=A+(x^P^D)+b[9]+3654602809&4294967295,A=x+(S<<4&4294967295|S>>>28),S=D+(A^x^P)+b[12]+3873151461&4294967295,D=A+(S<<11&4294967295|S>>>21),S=P+(D^A^x)+b[15]+530742520&4294967295,P=D+(S<<16&4294967295|S>>>16),S=x+(P^D^A)+b[2]+3299628645&4294967295,x=P+(S<<23&4294967295|S>>>9),S=A+(P^(x|~D))+b[0]+4096336452&4294967295,A=x+(S<<6&4294967295|S>>>26),S=D+(x^(A|~P))+b[7]+1126891415&4294967295,D=A+(S<<10&4294967295|S>>>22),S=P+(A^(D|~x))+b[14]+2878612391&4294967295,P=D+(S<<15&4294967295|S>>>17),S=x+(D^(P|~A))+b[5]+4237533241&4294967295,x=P+(S<<21&4294967295|S>>>11),S=A+(P^(x|~D))+b[12]+1700485571&4294967295,A=x+(S<<6&4294967295|S>>>26),S=D+(x^(A|~P))+b[3]+2399980690&4294967295,D=A+(S<<10&4294967295|S>>>22),S=P+(A^(D|~x))+b[10]+4293915773&4294967295,P=D+(S<<15&4294967295|S>>>17),S=x+(D^(P|~A))+b[1]+2240044497&4294967295,x=P+(S<<21&4294967295|S>>>11),S=A+(P^(x|~D))+b[8]+1873313359&4294967295,A=x+(S<<6&4294967295|S>>>26),S=D+(x^(A|~P))+b[15]+4264355552&4294967295,D=A+(S<<10&4294967295|S>>>22),S=P+(A^(D|~x))+b[6]+2734768916&4294967295,P=D+(S<<15&4294967295|S>>>17),S=x+(D^(P|~A))+b[13]+1309151649&4294967295,x=P+(S<<21&4294967295|S>>>11),S=A+(P^(x|~D))+b[4]+4149444226&4294967295,A=x+(S<<6&4294967295|S>>>26),S=D+(x^(A|~P))+b[11]+3174756917&4294967295,D=A+(S<<10&4294967295|S>>>22),S=P+(A^(D|~x))+b[2]+718787259&4294967295,P=D+(S<<15&4294967295|S>>>17),S=x+(D^(P|~A))+b[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(P+(S<<21&4294967295|S>>>11))&4294967295,N.g[2]=N.g[2]+P&4294967295,N.g[3]=N.g[3]+D&4294967295}s.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var x=A-this.blockSize,b=this.B,P=this.h,D=0;D<A;){if(P==0)for(;D<=x;)o(this,N,D),D+=this.blockSize;if(typeof N=="string"){for(;D<A;)if(b[P++]=N.charCodeAt(D++),P==this.blockSize){o(this,b),P=0;break}}else for(;D<A;)if(b[P++]=N[D++],P==this.blockSize){o(this,b),P=0;break}}this.h=P,this.o+=A},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var x=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=x&255,x/=256;for(this.u(N),N=Array(16),A=x=0;4>A;++A)for(var b=0;32>b;b+=8)N[x++]=this.g[A]>>>b&255;return N};function l(N,A){var x=f;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=A(N)}function d(N,A){this.h=A;for(var x=[],b=!0,P=N.length-1;0<=P;P--){var D=N[P]|0;b&&D==A||(x[P]=D,b=!1)}this.g=x}var f={};function m(N){return-128<=N&&128>N?l(N,function(A){return new d([A|0],0>A?-1:0)}):new d([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return E;if(0>N)return M(v(-N));for(var A=[],x=1,b=0;N>=x;b++)A[b]=N/x|0,x*=4294967296;return new d(A,0)}function I(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return M(I(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=v(Math.pow(A,8)),b=E,P=0;P<N.length;P+=8){var D=Math.min(8,N.length-P),S=parseInt(N.substring(P,P+D),A);8>D?(D=v(Math.pow(A,D)),b=b.j(D).add(v(S))):(b=b.j(x),b=b.add(v(S)))}return b}var E=m(0),C=m(1),j=m(16777216);r=d.prototype,r.m=function(){if(H(this))return-M(this).m();for(var N=0,A=1,x=0;x<this.g.length;x++){var b=this.i(x);N+=(0<=b?b:4294967296+b)*A,A*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if($(this))return"0";if(H(this))return"-"+M(this).toString(N);for(var A=v(Math.pow(N,6)),x=this,b="";;){var P=le(x,A).g;x=ee(x,P.j(A));var D=((0<x.g.length?x.g[0]:x.h)>>>0).toString(N);if(x=P,$(x))return D+b;for(;6>D.length;)D="0"+D;b=D+b}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function $(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function H(N){return N.h==-1}r.l=function(N){return N=ee(this,N),H(N)?-1:$(N)?0:1};function M(N){for(var A=N.g.length,x=[],b=0;b<A;b++)x[b]=~N.g[b];return new d(x,~N.h).add(C)}r.abs=function(){return H(this)?M(this):this},r.add=function(N){for(var A=Math.max(this.g.length,N.g.length),x=[],b=0,P=0;P<=A;P++){var D=b+(this.i(P)&65535)+(N.i(P)&65535),S=(D>>>16)+(this.i(P)>>>16)+(N.i(P)>>>16);b=S>>>16,D&=65535,S&=65535,x[P]=S<<16|D}return new d(x,x[x.length-1]&-2147483648?-1:0)};function ee(N,A){return N.add(M(A))}r.j=function(N){if($(this)||$(N))return E;if(H(this))return H(N)?M(this).j(M(N)):M(M(this).j(N));if(H(N))return M(this.j(M(N)));if(0>this.l(j)&&0>N.l(j))return v(this.m()*N.m());for(var A=this.g.length+N.g.length,x=[],b=0;b<2*A;b++)x[b]=0;for(b=0;b<this.g.length;b++)for(var P=0;P<N.g.length;P++){var D=this.i(b)>>>16,S=this.i(b)&65535,$e=N.i(P)>>>16,st=N.i(P)&65535;x[2*b+2*P]+=S*st,re(x,2*b+2*P),x[2*b+2*P+1]+=D*st,re(x,2*b+2*P+1),x[2*b+2*P+1]+=S*$e,re(x,2*b+2*P+1),x[2*b+2*P+2]+=D*$e,re(x,2*b+2*P+2)}for(b=0;b<A;b++)x[b]=x[2*b+1]<<16|x[2*b];for(b=A;b<2*A;b++)x[b]=0;return new d(x,0)};function re(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function Q(N,A){this.g=N,this.h=A}function le(N,A){if($(A))throw Error("division by zero");if($(N))return new Q(E,E);if(H(N))return A=le(M(N),A),new Q(M(A.g),M(A.h));if(H(A))return A=le(N,M(A)),new Q(M(A.g),A.h);if(30<N.g.length){if(H(N)||H(A))throw Error("slowDivide_ only works with positive integers.");for(var x=C,b=A;0>=b.l(N);)x=ue(x),b=ue(b);var P=de(x,1),D=de(b,1);for(b=de(b,2),x=de(x,2);!$(b);){var S=D.add(b);0>=S.l(N)&&(P=P.add(x),D=S),b=de(b,1),x=de(x,1)}return A=ee(N,P.j(A)),new Q(P,A)}for(P=E;0<=N.l(A);){for(x=Math.max(1,Math.floor(N.m()/A.m())),b=Math.ceil(Math.log(x)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),D=v(x),S=D.j(A);H(S)||0<S.l(N);)x-=b,D=v(x),S=D.j(A);$(D)&&(D=C),P=P.add(D),N=ee(N,S)}return new Q(P,N)}r.A=function(N){return le(this,N).h},r.and=function(N){for(var A=Math.max(this.g.length,N.g.length),x=[],b=0;b<A;b++)x[b]=this.i(b)&N.i(b);return new d(x,this.h&N.h)},r.or=function(N){for(var A=Math.max(this.g.length,N.g.length),x=[],b=0;b<A;b++)x[b]=this.i(b)|N.i(b);return new d(x,this.h|N.h)},r.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),x=[],b=0;b<A;b++)x[b]=this.i(b)^N.i(b);return new d(x,this.h^N.h)};function ue(N){for(var A=N.g.length+1,x=[],b=0;b<A;b++)x[b]=N.i(b)<<1|N.i(b-1)>>>31;return new d(x,N.h)}function de(N,A){var x=A>>5;A%=32;for(var b=N.g.length-x,P=[],D=0;D<b;D++)P[D]=0<A?N.i(D+x)>>>A|N.i(D+x+1)<<32-A:N.i(D+x);return new d(P,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Y0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=I,gi=d}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var J0,sl,X0,cc,uf,Z0,e_,t_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof tc=="object"&&tc];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,p){if(p)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],p=p(T),p!=T&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,T=!1,F={next:function(){if(!T&&_<u.length){var W=_++;return{value:p(W,u[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function m(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function I(u,p,_){return u.call.apply(u.bind,arguments)}function E(u,p,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function C(u,p,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:E,C.apply(null,arguments)}function j(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function $(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,F,W){for(var ae=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)ae[rt-2]=arguments[rt];return p.prototype[F].apply(T,ae)}}function H(u){const p=u.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=u[T];return _}return[]}function M(u,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(m(T)){const F=u.length||0,W=T.length||0;u.length=F+W;for(let ae=0;ae<W;ae++)u[F+ae]=T[ae]}else u.push(T)}}class ee{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function re(u){return/^[\s\xa0]*$/.test(u)}function Q(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function le(u){return le[" "](u),u}le[" "]=function(){};var ue=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function de(u,p,_){for(const T in u)p.call(_,u[T],T,u)}function N(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function A(u){const p={};for(const _ in u)p[_]=u[_];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,p){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let W=0;W<x.length;W++)_=x[W],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function P(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function D(u){f.setTimeout(()=>{throw u},0)}function S(){var u=_e;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class $e{constructor(){this.h=this.g=null}add(p,_){const T=st.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var st=new ee(()=>new ot,u=>u.reset());class ot{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,q=!1,_e=new $e,oe=()=>{const u=f.Promise.resolve(void 0);ce=()=>{u.then(L)}};var L=()=>{for(var u;u=S();){try{u.h.call(u.g)}catch(_){D(_)}var p=st;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}q=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,p),f.removeEventListener("test",_,p)}catch{}return u}();function De(u,p){if(Te.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(ue){e:{try{le(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&De.aa.h.call(this)}}$(De,Te);var Ve={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),Le=0;function Be(u,p,_,T,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=F,this.key=++Le,this.da=this.fa=!1}function Xe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function It(u){this.src=u,this.g={},this.h=0}It.prototype.add=function(u,p,_,T,F){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ae=se(u,p,T,F);return-1<ae?(p=u[ae],_||(p.fa=!1)):(p=new Be(p,this.src,W,!!T,F),p.fa=_,u.push(p)),p};function he(u,p){var _=p.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,p,void 0),W;(W=0<=F)&&Array.prototype.splice.call(T,F,1),W&&(Xe(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function se(u,p,_,T){for(var F=0;F<u.length;++F){var W=u[F];if(!W.da&&W.listener==p&&W.capture==!!_&&W.ha==T)return F}return-1}var me="closure_lm_"+(1e6*Math.random()|0),Me={};function Rn(u,p,_,T,F){if(Array.isArray(p)){for(var W=0;W<p.length;W++)Rn(u,p[W],_,T,F);return null}return _=Xt(_),u&&u[ze]?u.K(p,_,v(T)?!!T.capture:!1,F):Ft(u,p,_,!1,T,F)}function Ft(u,p,_,T,F,W){if(!p)throw Error("Invalid event type");var ae=v(F)?!!F.capture:!!F,rt=ln(u);if(rt||(u[me]=rt=new It(u)),_=rt.add(p,_,T,ae,W),_.proxy)return _;if(T=Pn(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Ae||(F=ae),F===void 0&&(F=!1),u.addEventListener(p.toString(),T,F);else if(u.attachEvent)u.attachEvent(qt(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Pn(){function u(_){return p.call(u.src,u.listener,_)}const p=bn;return u}function Hn(u,p,_,T,F){if(Array.isArray(p))for(var W=0;W<p.length;W++)Hn(u,p[W],_,T,F);else T=v(T)?!!T.capture:!!T,_=Xt(_),u&&u[ze]?(u=u.i,p=String(p).toString(),p in u.g&&(W=u.g[p],_=se(W,_,T,F),-1<_&&(Xe(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[p],u.h--)))):u&&(u=ln(u))&&(p=u.g[p.toString()],u=-1,p&&(u=se(p,_,T,F)),(_=-1<u?p[u]:null)&&At(_))}function At(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ze])he(p.i,u);else{var _=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(_,T,u.capture):p.detachEvent?p.detachEvent(qt(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=ln(p))?(he(_,u),_.h==0&&(_.src=null,p[me]=null)):Xe(u)}}}function qt(u){return u in Me?Me[u]:Me[u]="on"+u}function bn(u,p){if(u.da)u=!0;else{p=new De(p,this);var _=u.listener,T=u.ha||u.src;u.fa&&At(u),u=_.call(T,p)}return u}function ln(u){return u=u[me],u instanceof It?u:null}var kn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xt(u){return typeof u=="function"?u:(u[kn]||(u[kn]=function(p){return u.handleEvent(p)}),u[kn])}function ie(){K.call(this),this.i=new It(this),this.M=this,this.F=null}$(ie,K),ie.prototype[ze]=!0,ie.prototype.removeEventListener=function(u,p,_,T){Hn(this,u,p,_,T)};function fe(u,p){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new Te(p,u);else if(p instanceof Te)p.target=p.target||u;else{var F=p;p=new Te(T,u),b(p,F)}if(F=!0,_)for(var W=_.length-1;0<=W;W--){var ae=p.g=_[W];F=un(ae,T,!0,p)&&F}if(ae=p.g=u,F=un(ae,T,!0,p)&&F,F=un(ae,T,!1,p)&&F,_)for(W=0;W<_.length;W++)ae=p.g=_[W],F=un(ae,T,!1,p)&&F}ie.prototype.N=function(){if(ie.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],T=0;T<_.length;T++)Xe(_[T]);delete u.g[p],u.h--}}this.F=null},ie.prototype.K=function(u,p,_,T){return this.i.add(String(u),p,!1,_,T)},ie.prototype.L=function(u,p,_,T){return this.i.add(String(u),p,!0,_,T)};function un(u,p,_,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,W=0;W<p.length;++W){var ae=p[W];if(ae&&!ae.da&&ae.capture==_){var rt=ae.listener,Bt=ae.ha||ae.src;ae.fa&&he(u.i,ae),F=rt.call(Bt,T)!==!1&&F}}return F&&!T.defaultPrevented}function Mr(u,p,_){if(typeof u=="function")_&&(u=C(u,_));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function _r(u){u.g=Mr(()=>{u.g=null,u.i&&(u.i=!1,_r(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class er extends K{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fr(u){K.call(this),this.h=u,this.g={}}$(Fr,K);var rs=[];function tr(u){de(u.g,function(p,_){this.g.hasOwnProperty(_)&&At(p)},u),u.g={}}Fr.prototype.N=function(){Fr.aa.N.call(this),tr(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ss=f.JSON.stringify,Wn=f.JSON.parse,bs=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Ur(){}Ur.prototype.h=null;function ks(u){return u.h||(u.h=u.i())}function Ns(){}var Nn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nr(){Te.call(this,"d")}$(nr,Te);function Ds(){Te.call(this,"c")}$(Ds,Te);var rr={},Vs=null;function is(){return Vs=Vs||new ie}rr.La="serverreachability";function Ai(u){Te.call(this,rr.La,u)}$(Ai,Te);function wr(u){const p=is();fe(p,new Ai(p))}rr.STAT_EVENT="statevent";function G(u,p){Te.call(this,rr.STAT_EVENT,u),this.stat=p}$(G,Te);function we(u){const p=is();fe(p,new G(p,u))}rr.Ma="timingevent";function Pe(u,p){Te.call(this,rr.Ma,u),this.size=p}$(Pe,Te);function be(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Ee(){this.g=!0}Ee.prototype.xa=function(){this.g=!1};function Qe(u,p,_,T,F,W){u.info(function(){if(u.g)if(W)for(var ae="",rt=W.split("&"),Bt=0;Bt<rt.length;Bt++){var Ye=rt[Bt].split("=");if(1<Ye.length){var Gt=Ye[0];Ye=Ye[1];var kt=Gt.split("_");ae=2<=kt.length&&kt[1]=="type"?ae+(Gt+"="+Ye+"&"):ae+(Gt+"=redacted&")}}else ae=null;else ae=W;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+p+`
`+_+`
`+ae})}function Rt(u,p,_,T,F,W,ae){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+p+`
`+_+`
`+W+" "+ae})}function et(u,p,_,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Tt(u,_)+(T?" "+T:"")})}function at(u,p){u.info(function(){return"TIMEOUT: "+p})}Ee.prototype.info=function(){};function Tt(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ae=1;ae<F.length;ae++)F[ae]=""}}}}return ss(_)}catch{return p}}var lt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ut;function cn(){}$(cn,Ur),cn.prototype.g=function(){return new XMLHttpRequest},cn.prototype.i=function(){return{}},Ut=new cn;function bt(u,p,_,T){this.j=u,this.i=p,this.l=_,this.R=T||1,this.U=new Fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zt}function zt(){this.i=null,this.g="",this.h=!1}var dn={},En={};function ht(u,p,_){u.L=1,u.v=Fs(Kn(p)),u.m=_,u.P=!0,Zt(u,null)}function Zt(u,p){u.F=Date.now(),ut(u),u.A=Kn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),zs(_.i,"t",T),u.C=0,_=u.j.J,u.h=new zt,u.g=nu(u.j,_?p:null,!u.m),0<u.O&&(u.M=new er(C(u.Y,u,u.g),u.O)),p=u.U,_=u.g,T=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(rs[0]=F.toString()),F=rs);for(var W=0;W<F.length;W++){var ae=Rn(_,F[W],T||p.handleEvent,!1,p.h||p);if(!ae)break;p.g[ae.key]=ae}p=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),wr(),Qe(u.i,u.u,u.A,u.l,u.R,u.m)}bt.prototype.ca=function(u){u=u.target;const p=this.M;p&&Vn(u)==3?p.j():this.Y(u)},bt.prototype.Y=function(u){try{if(u==this.g)e:{const kt=Vn(this.g);var p=this.g.Ba();const or=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||xa(this.g)))){this.J||kt!=4||p==7||(p==8||0>=or?wr(3):wr(2)),Ri(this);var _=this.g.Z();this.X=_;t:if(qn(this)){var T=xa(this.g);u="";var F=T.length,W=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sr(this),Os(this);var ae="";break t}this.h.i=new f.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(W&&p==F-1)});T.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,Rt(this.i,this.u,this.A,this.l,this.R,kt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,Bt=this.g;if((rt=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(rt)){var Ye=rt;break t}}Ye=null}if(_=Ye)et(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,_);else{this.o=!1,this.s=3,we(12),sr(this),Os(this);break e}}if(this.P){_=!0;let Yn;for(;!this.J&&this.C<ae.length;)if(Yn=ad(this,ae),Yn==En){kt==4&&(this.s=4,we(14),_=!1),et(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==dn){this.s=4,we(15),et(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else et(this.i,this.l,Yn,null),_a(this,Yn);if(qn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ae.length!=0||this.h.h||(this.s=1,we(16),_=!1),this.o=this.o&&_,!_)et(this.i,this.l,ae,"[Invalid Chunked Response]"),sr(this),Os(this);else if(0<ae.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Ca(Gt),Gt.M=!0,we(11))}}else et(this.i,this.l,ae,null),_a(this,ae);kt==4&&sr(this),this.o&&!this.J&&(kt==4?Io(this.j,this):(this.o=!1,ut(this)))}else yo(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,we(12)):(this.s=0,we(13)),sr(this),Os(this)}}}catch{}finally{}};function qn(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ad(u,p){var _=u.C,T=p.indexOf(`
`,_);return T==-1?En:(_=Number(p.substring(_,T)),isNaN(_)?dn:(T+=1,T+_>p.length?En:(p=p.slice(T,T+_),u.C=T+_,p)))}bt.prototype.cancel=function(){this.J=!0,sr(this)};function ut(u){u.S=Date.now()+u.I,Ul(u,u.I)}function Ul(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=be(C(u.ba,u),p)}function Ri(u){u.B&&(f.clearTimeout(u.B),u.B=null)}bt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(at(this.i,this.A),this.L!=2&&(wr(),we(17)),sr(this),this.s=2,Os(this)):Ul(this,this.S-u)};function Os(u){u.j.G==0||u.J||Io(u.j,u)}function sr(u){Ri(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,tr(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function _a(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||In(_.h,u))){if(!u.K&&In(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Eo(_),Sr(_);else break e;wo(_),we(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=be(C(_.Za,_),6e3));if(1>=Bl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else cs(_,11)}else if((u.K||_.g==u)&&Eo(_),!re(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let Ye=F[p];if(_.T=Ye[0],Ye=Ye[1],_.G==2)if(Ye[0]=="c"){_.K=Ye[1],_.ia=Ye[2];const Gt=Ye[3];Gt!=null&&(_.la=Gt,_.j.info("VER="+_.la));const kt=Ye[4];kt!=null&&(_.Aa=kt,_.j.info("SVER="+_.Aa));const or=Ye[5];or!=null&&typeof or=="number"&&0<or&&(T=1.5*or,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Yn=u.g;if(Yn){const Oi=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oi){var W=T.h;W.g||Oi.indexOf("spdy")==-1&&Oi.indexOf("quic")==-1&&Oi.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(wa(W,W.h),W.h=null))}if(T.D){const xo=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;xo&&(T.ya=xo,it(T.I,T.D,xo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var ae=u;if(T.qa=tu(T,T.J?T.ia:null,T.W),ae.K){$l(T.h,ae);var rt=ae,Bt=T.L;Bt&&(rt.I=Bt),rt.B&&(Ri(rt),ut(rt)),T.g=ae}else Vi(T);0<_.i.length&&Hr(_)}else Ye[0]!="stop"&&Ye[0]!="close"||cs(_,7);else _.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?cs(_,7):tn(_):Ye[0]!="noop"&&_.l&&_.l.ta(Ye),_.v=0)}}wr(4)}catch{}}var zl=class{constructor(u,p){this.g=u,this.map=p}};function Pi(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Bl(u){return u.h?1:u.g?u.g.size:0}function In(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function wa(u,p){u.g?u.g.add(p):u.h=p}function $l(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Pi.prototype.cancel=function(){if(this.i=Hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Hl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return H(u.i)}function ho(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var p=[],_=u.length,T=0;T<_;T++)p.push(u[T]);return p}p=[],_=0;for(T in u)p[_++]=u[T];return p}function fo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const T in u)p[_++]=T;return p}}}function Ls(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=fo(u),T=ho(u),F=T.length,W=0;W<F;W++)p.call(void 0,T[W],_&&_[W],u)}var bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ld(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),F=null;if(0<=T){var W=u[_].substring(0,T);F=u[_].substring(T+1)}else W=u[_];p(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function os(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof os){this.h=u.h,ki(this,u.j),this.o=u.o,this.g=u.g,js(this,u.s),this.l=u.l;var p=u.i,_=new zr;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Ms(this,_),this.m=u.m}else u&&(p=String(u).match(bi))?(this.h=!1,ki(this,p[1]||"",!0),this.o=Ke(p[2]||""),this.g=Ke(p[3]||"",!0),js(this,p[4]),this.l=Ke(p[5]||"",!0),Ms(this,p[6]||"",!0),this.m=Ke(p[7]||"")):(this.h=!1,this.i=new zr(null,this.h))}os.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Us(p,po,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Us(p,po,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Us(_,_.charAt(0)=="/"?Gl:ql,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Us(_,Ea)),u.join("")};function Kn(u){return new os(u)}function ki(u,p,_){u.j=_?Ke(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function js(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Ms(u,p,_){p instanceof zr?(u.i=p,Br(u.i,u.h)):(_||(p=Us(p,Kl)),u.i=new zr(p,u.h))}function it(u,p,_){u.i.set(p,_)}function Fs(u){return it(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ke(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Us(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Wl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Wl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var po=/[#\/\?@]/g,ql=/[#\?:]/g,Gl=/[#\?]/g,Kl=/[#\?@]/g,Ea=/#/g;function zr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function en(u){u.g||(u.g=new Map,u.h=0,u.i&&ld(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=zr.prototype,r.add=function(u,p){en(this),this.i=null,u=ir(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Er(u,p){en(u),p=ir(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Ir(u,p){return en(u),p=ir(u,p),u.g.has(p)}r.forEach=function(u,p){en(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(p,F,T,this)},this)},this)},r.na=function(){en(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const F=u[T];for(let W=0;W<F.length;W++)_.push(p[T])}return _},r.V=function(u){en(this);let p=[];if(typeof u=="string")Ir(this,u)&&(p=p.concat(this.g.get(ir(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},r.set=function(u,p){return en(this),this.i=null,u=ir(this,u),Ir(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function zs(u,p,_){Er(u,p),0<_.length&&(u.i=null,u.g.set(ir(u,p),H(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const W=encodeURIComponent(String(T)),ae=this.V(T);for(T=0;T<ae.length;T++){var F=W;ae[T]!==""&&(F+="="+encodeURIComponent(String(ae[T]))),u.push(F)}}return this.i=u.join("&")};function ir(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Br(u,p){p&&!u.j&&(en(u),u.i=null,u.g.forEach(function(_,T){var F=T.toLowerCase();T!=F&&(Er(this,T),zs(this,F,_))},u)),u.j=p}function ud(u,p){const _=new Ee;if(f.Image){const T=new Image;T.onload=j(Dn,_,"TestLoadImage: loaded",!0,p,T),T.onerror=j(Dn,_,"TestLoadImage: error",!1,p,T),T.onabort=j(Dn,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=j(Dn,_,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function Ql(u,p){const _=new Ee,T=new AbortController,F=setTimeout(()=>{T.abort(),Dn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(W=>{clearTimeout(F),W.ok?Dn(_,"TestPingServer: ok",!0,p):Dn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Dn(_,"TestPingServer: error",!1,p)})}function Dn(u,p,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function cd(){this.g=new bs}function Yl(u,p,_){const T=_||"";try{Ls(u,function(F,W){let ae=F;v(F)&&(ae=ss(F)),p.push(T+W+"="+encodeURIComponent(ae))})}catch(F){throw p.push(T+"type="+encodeURIComponent("_badmap")),F}}function as(u){this.l=u.Ub||null,this.j=u.eb||!1}$(as,Ur),as.prototype.g=function(){return new Ni(this.l,this.j)},as.prototype.i=function(u){return function(){return u}}({});function Ni(u,p){ie.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Ni,ie),r=Ni.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,xr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xr(this)),this.g&&(this.readyState=3,xr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Tr(this):xr(this),this.readyState==3&&Jl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Tr(this))},r.Qa=function(u){this.g&&(this.response=u,Tr(this))},r.ga=function(){this.g&&Tr(this)};function Tr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,xr(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function xr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ls(u){let p="";return de(u,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function Bs(u,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=ls(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):it(u,p,_))}function gt(u){ie.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(gt,ie);var dd=/^https?$/i,Ia=["POST","PUT"];r=gt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ut.g(),this.v=this.o?ks(this.o):ks(Ut),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(W){Di(this,W);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())_.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Ia,p,void 0))||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ae]of _)this.g.setRequestHeader(W,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{go(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Di(this,W)}};function Di(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,mo(u),Qn(u)}function mo(u){u.A||(u.A=!0,fe(u,"complete"),fe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,fe(this,"complete"),fe(this,"abort"),Qn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qn(this,!0)),gt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ta(this):this.bb())},r.bb=function(){Ta(this)};function Ta(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Vn(u)!=4||u.Z()!=2)){if(u.u&&Vn(u)==4)Mr(u.Ea,0,u);else if(fe(u,"readystatechange"),Vn(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=ae===0){var F=String(u.D).match(bi)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),T=!dd.test(F?F.toLowerCase():"")}_=T}if(_)fe(u,"complete"),fe(u,"success");else{u.m=6;try{var W=2<Vn(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",mo(u)}}finally{Qn(u)}}}}function Qn(u,p){if(u.g){go(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||fe(u,"ready");try{_.onreadystatechange=T}catch{}}}function go(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Vn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Wn(p)}};function xa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yo(u){const p={};u=(u.g&&2<=Vn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(re(u[T]))continue;var _=P(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=p[F]||[];p[F]=W,W.push(_)}N(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Sa(u){this.Aa=0,this.i=[],this.j=new Ee,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,u),this.cb=$r("retryDelaySeedMs",1e4,u),this.Wa=$r("forwardChannelMaxRetries",2,u),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Pi(u&&u.concurrentRequestLimit),this.Da=new cd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Sa.prototype,r.la=8,r.G=1,r.connect=function(u,p,_,T){we(0),this.W=u,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=tu(this,null,this.W),Hr(this)};function tn(u){if(vo(u),u.G==3){var p=u.U++,_=Kn(u.I);if(it(_,"SID",u.K),it(_,"RID",p),it(_,"TYPE","terminate"),us(u,_),p=new bt(u,u.j,p),p.L=2,p.v=Fs(Kn(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=p.v,_=!0),_||(p.g=nu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ut(p)}eu(u)}function Sr(u){u.g&&(Ca(u),u.g.cancel(),u.g=null)}function vo(u){Sr(u),u.u&&(f.clearTimeout(u.u),u.u=null),Eo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Hr(u){if(!Gn(u.h)&&!u.s){u.s=!0;var p=u.Ga;ce||oe(),q||(ce(),q=!0),_e.add(p,u),u.B=0}}function hd(u,p){return Bl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=be(C(u.Ga,u,p),Zl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new bt(this,this.j,u);let W=this.o;if(this.S&&(W?(W=A(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=$s(this,F,p),_=Kn(this.I),it(_,"RID",u),it(_,"CVER",22),this.D&&it(_,"X-HTTP-Session-Id",this.D),us(this,_),W&&(this.O?p="headers="+encodeURIComponent(String(ls(W)))+"&"+p:this.m&&Bs(_,this.m,W)),wa(this.h,F),this.Ua&&it(_,"TYPE","init"),this.P?(it(_,"$req",p),it(_,"SID","null"),F.T=!0,ht(F,_,null)):ht(F,_,p),this.G=2}}else this.G==3&&(u?_o(this,u):this.i.length==0||Gn(this.h)||_o(this))};function _o(u,p){var _;p?_=p.l:_=u.U++;const T=Kn(u.I);it(T,"SID",u.K),it(T,"RID",_),it(T,"AID",u.T),us(u,T),u.m&&u.o&&Bs(T,u.m,u.o),_=new bt(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=$s(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wa(u.h,_),ht(_,T,p)}function us(u,p){u.H&&de(u.H,function(_,T){it(p,T,_)}),u.l&&Ls({},function(_,T){it(p,T,_)})}function $s(u,p,_){_=Math.min(u.i.length,_);var T=u.l?C(u.l.Na,u.l,u):null;e:{var F=u.i;let W=-1;for(;;){const ae=["count="+_];W==-1?0<_?(W=F[0].g,ae.push("ofs="+W)):W=0:ae.push("ofs="+W);let rt=!0;for(let Bt=0;Bt<_;Bt++){let Ye=F[Bt].g;const Gt=F[Bt].map;if(Ye-=W,0>Ye)W=Math.max(0,F[Bt].g-100),rt=!1;else try{Yl(Gt,ae,"req"+Ye+"_")}catch{T&&T(Gt)}}if(rt){T=ae.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,T}function Vi(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ce||oe(),q||(ce(),q=!0),_e.add(p,u),u.v=0}}function wo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=be(C(u.Fa,u),Zl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Xl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=be(C(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,we(10),Sr(this),Xl(this))};function Ca(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Xl(u){u.g=new bt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Kn(u.qa);it(p,"RID","rpc"),it(p,"SID",u.K),it(p,"AID",u.T),it(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&it(p,"TO",u.ja),it(p,"TYPE","xmlhttp"),us(u,p),u.m&&u.o&&Bs(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Fs(Kn(p)),_.m=null,_.P=!0,Zt(_,u)}r.Za=function(){this.C!=null&&(this.C=null,Sr(this),wo(this),we(19))};function Eo(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Io(u,p){var _=null;if(u.g==p){Eo(u),Ca(u),u.g=null;var T=2}else if(In(u.h,p))_=p.D,$l(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;T=is(),fe(T,new Pe(T,_)),Hr(u)}else Vi(u);else if(F=p.s,F==3||F==0&&0<p.X||!(T==1&&hd(u,p)||T==2&&wo(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),F){case 1:cs(u,5);break;case 4:cs(u,10);break;case 3:cs(u,6);break;default:cs(u,2)}}}function Zl(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function cs(u,p){if(u.j.info("Error code "+p),p==2){var _=C(u.fb,u),T=u.Xa;const F=!T;T=new os(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ki(T,"https"),Fs(T),F?ud(T.toString(),_):Ql(T.toString(),_)}else we(2);u.G=0,u.l&&u.l.sa(p),eu(u),vo(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function eu(u){if(u.G=0,u.ka=[],u.l){const p=Hl(u.h);(p.length!=0||u.i.length!=0)&&(M(u.ka,p),M(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function tu(u,p,_){var T=_ instanceof os?Kn(_):new os(_);if(T.g!="")p&&(T.g=p+"."+T.g),js(T,T.s);else{var F=f.location;T=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var W=new os(null);T&&ki(W,T),p&&(W.g=p),F&&js(W,F),_&&(W.l=_),T=W}return _=u.D,p=u.ya,_&&p&&it(T,_,p),it(T,"VER",u.la),us(u,T),T}function nu(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new gt(new as({eb:_})):new gt(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Aa(){}r=Aa.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function To(){}To.prototype.g=function(u,p){return new Tn(u,p)};function Tn(u,p){ie.call(this),this.g=new Sa(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!re(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!re(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Wr(this)}$(Tn,ie),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){tn(this.g)},Tn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ss(u),u=_);p.i.push(new zl(p.Ya++,u)),p.G==3&&Hr(p)},Tn.prototype.N=function(){this.g.l=null,delete this.j,tn(this.g),delete this.g,Tn.aa.N.call(this)};function ru(u){nr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}$(ru,nr);function su(){Ds.call(this),this.status=1}$(su,Ds);function Wr(u){this.g=u}$(Wr,Aa),Wr.prototype.ua=function(){fe(this.g,"a")},Wr.prototype.ta=function(u){fe(this.g,new ru(u))},Wr.prototype.sa=function(u){fe(this.g,new su)},Wr.prototype.ra=function(){fe(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,t_=function(){return new To},e_=function(){return is()},Z0=rr,uf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lt.NO_ERROR=0,lt.TIMEOUT=8,lt.HTTP_ERROR=6,cc=lt,Pt.COMPLETE="complete",X0=Pt,Ns.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",ie.prototype.listen=ie.prototype.K,sl=Ns,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,J0=gt}).apply(typeof tc<"u"?tc:typeof self<"u"?self:typeof window<"u"?window:{});const Dy="@firebase/firestore",Vy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ma="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new bf("@firebase/firestore");function qo(){return to.logLevel}function ve(r,...e){if(to.logLevel<=qe.DEBUG){const t=e.map(qf);to.debug(`Firestore (${ma}): ${r}`,...t)}}function Cs(r,...e){if(to.logLevel<=qe.ERROR){const t=e.map(qf);to.error(`Firestore (${ma}): ${r}`,...t)}}function _i(r,...e){if(to.logLevel<=qe.WARN){const t=e.map(qf);to.warn(`Firestore (${ma}): ${r}`,...t)}}function qf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,n_(r,s,t)}function n_(r,e,t){let s=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Cs(s),new Error(s)}function nt(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||n_(e,o,s)}function Ue(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yn.UNAUTHENTICATED))}shutdown(){}}class dC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class hC{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Is,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},f=m=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Is)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string",31837,{l:s}),new r_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class fC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new fC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const s=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Oy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=gC(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function He(r,e){return r<e?-1:r>e?1:0}function cf(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return He(s,o);{const l=s_(),d=yC(l.encode(Ly(r,t)),l.encode(Ly(e,t)));return d!==0?d:He(s,o)}}t+=s>65535?2:1}return He(r.length,e.length)}function Ly(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function yC(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return He(r[t],e[t]);return He(r.length,e.length)}function sa(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="__name__";class Yr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Oe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Oe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Yr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Yr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return He(e.length,t.length)}static compareSegments(e,t){const s=Yr.isNumericId(e),o=Yr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Yr.extractNumericId(e).compare(Yr.extractNumericId(t)):cf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gi.fromString(e.substring(4,e.length-2))}}class dt extends Yr{construct(e,t,s){return new dt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new dt(t)}static emptyPath(){return new dt([])}}const vC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Yr{construct(e,t,s){return new on(e,t,s)}static isValidIdentifier(e){return vC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jy}static keyField(){return new on([jy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ye(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ye(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ye(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else f==="`"?(d=!d,o++):f!=="."||d?(s+=f,o++):(l(),o++)}if(l(),d)throw new ye(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(dt.fromString(e))}static fromName(e){return new Re(dt.fromString(e).popFirst(5))}static empty(){return new Re(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(r,e,t){if(!t)throw new ye(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function _C(r,e,t,s){if(e===!0&&s===!0)throw new ye(Y.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function My(r){if(!Re.isDocumentKey(r))throw new ye(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Fy(r){if(Re.isDocumentKey(r))throw new ye(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function o_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Wc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Oe(12329,{type:typeof r})}function gr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ye(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wc(r);throw new ye(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Dl(r,e){if(!o_(r))throw new ye(Y.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(o&&typeof d!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ye(Y.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=-62135596800,zy=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*zy);return new mt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Uy)throw new ye(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zy}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dl(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Uy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Lt("string",mt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new mt(0,0))}static max(){return new Fe(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=-1;function wC(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Fe.fromTimestamp(s===1e9?new mt(t+1,0):new mt(t,s));return new wi(o,Re.empty(),e)}function EC(r){return new wi(r.readTime,r.key,Il)}class wi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new wi(Fe.min(),Re.empty(),Il)}static max(){return new wi(Fe.max(),Re.empty(),Il)}}function IC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(r.documentKey,e.documentKey),t!==0?t:He(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==TC)throw r;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,s)=>{t(e)})}static reject(e){return new J((t,s)=>{s(e)})}static waitFor(e){return new J((t,s)=>{let o=0,l=0,d=!1;e.forEach(f=>{++o,f.next(()=>{++l,d&&l===o&&t()},m=>s(m))}),d=!0,l===o&&t()})}static or(e){let t=J.resolve(!1);for(const s of e)t=t.next(o=>o?J.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new J((s,o)=>{const l=e.length,d=new Array(l);let f=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next(I=>{d[v]=I,++f,f===l&&s(d)},I=>o(I))}})}static doWhile(e,t){return new J((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function SC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ya(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}qc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=-1;function Gc(r){return r==null}function Sc(r){return r===0&&1/r==-1/0}function CC(r){return typeof r=="number"&&Number.isInteger(r)&&!Sc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="";function AC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=By(e)),e=RC(r.get(t),e);return By(e)}function RC(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case a_:t+="";break;default:t+=l}}return t}function By(r){return r+a_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function oo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function l_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nc(this.root,e,this.comparator,!1)}getReverseIterator(){return new nc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nc(this.root,e,this.comparator,!0)}}class nc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??sn.RED,this.left=o??sn.EMPTY,this.right=l??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new sn(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hy(this.data.getIterator())}getIteratorFrom(e){return new Hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wt(this.comparator);return t.data=e,t}}class Hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Vr([])}unionWith(e){let t=new Wt(on.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Vr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new u_("Invalid base64 string: "+l):l}}(e);return new an(t)}static fromUint8Array(e){const t=function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l}(e);return new an(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const PC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(r){if(nt(!!r,39018),typeof r=="string"){let e=0;const t=PC.exec(r);if(nt(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:St(r.seconds),nanos:St(r.nanos)}}function St(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ii(r){return typeof r=="string"?an.fromBase64String(r):an.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="server_timestamp",d_="__type__",h_="__previous_value__",f_="__local_write_time__";function Qf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[d_])===null||t===void 0?void 0:t.stringValue)===c_}function Kc(r){const e=r.mapValue.fields[h_];return Qf(e)?Kc(e):e}function Tl(r){const e=Ei(r.mapValue.fields[f_].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t,s,o,l,d,f,m,v,I){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=I}}const Cc="(default)";class xl{constructor(e,t){this.projectId=e,this.database=t||Cc}static empty(){return new xl("","")}get isDefaultDatabase(){return this.database===Cc}isEqual(e){return e instanceof xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="__type__",kC="__max__",rc={mapValue:{}},m_="__vector__",Ac="value";function Ti(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Qf(r)?4:DC(r)?9007199254740991:NC(r)?10:11:Oe(28295,{value:r})}function ns(r,e){if(r===e)return!0;const t=Ti(r);if(t!==Ti(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Tl(r).isEqual(Tl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Ei(o.timestampValue),f=Ei(l.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Ii(o.bytesValue).isEqual(Ii(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return St(o.geoPointValue.latitude)===St(l.geoPointValue.latitude)&&St(o.geoPointValue.longitude)===St(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return St(o.integerValue)===St(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=St(o.doubleValue),f=St(l.doubleValue);return d===f?Sc(d)===Sc(f):isNaN(d)&&isNaN(f)}return!1}(r,e);case 9:return sa(r.arrayValue.values||[],e.arrayValue.values||[],ns);case 10:case 11:return function(o,l){const d=o.mapValue.fields||{},f=l.mapValue.fields||{};if($y(d)!==$y(f))return!1;for(const m in d)if(d.hasOwnProperty(m)&&(f[m]===void 0||!ns(d[m],f[m])))return!1;return!0}(r,e);default:return Oe(52216,{left:r})}}function Sl(r,e){return(r.values||[]).find(t=>ns(t,e))!==void 0}function ia(r,e){if(r===e)return 0;const t=Ti(r),s=Ti(e);if(t!==s)return He(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(r.booleanValue,e.booleanValue);case 2:return function(l,d){const f=St(l.integerValue||l.doubleValue),m=St(d.integerValue||d.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(r,e);case 3:return Wy(r.timestampValue,e.timestampValue);case 4:return Wy(Tl(r),Tl(e));case 5:return cf(r.stringValue,e.stringValue);case 6:return function(l,d){const f=Ii(l),m=Ii(d);return f.compareTo(m)}(r.bytesValue,e.bytesValue);case 7:return function(l,d){const f=l.split("/"),m=d.split("/");for(let v=0;v<f.length&&v<m.length;v++){const I=He(f[v],m[v]);if(I!==0)return I}return He(f.length,m.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,d){const f=He(St(l.latitude),St(d.latitude));return f!==0?f:He(St(l.longitude),St(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return qy(r.arrayValue,e.arrayValue);case 10:return function(l,d){var f,m,v,I;const E=l.fields||{},C=d.fields||{},j=(f=E[Ac])===null||f===void 0?void 0:f.arrayValue,$=(m=C[Ac])===null||m===void 0?void 0:m.arrayValue,H=He(((v=j==null?void 0:j.values)===null||v===void 0?void 0:v.length)||0,((I=$==null?void 0:$.values)===null||I===void 0?void 0:I.length)||0);return H!==0?H:qy(j,$)}(r.mapValue,e.mapValue);case 11:return function(l,d){if(l===rc.mapValue&&d===rc.mapValue)return 0;if(l===rc.mapValue)return 1;if(d===rc.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),v=d.fields||{},I=Object.keys(v);m.sort(),I.sort();for(let E=0;E<m.length&&E<I.length;++E){const C=cf(m[E],I[E]);if(C!==0)return C;const j=ia(f[m[E]],v[I[E]]);if(j!==0)return j}return He(m.length,I.length)}(r.mapValue,e.mapValue);default:throw Oe(23264,{le:t})}}function Wy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return He(r,e);const t=Ei(r),s=Ei(e),o=He(t.seconds,s.seconds);return o!==0?o:He(t.nanos,s.nanos)}function qy(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=ia(t[o],s[o]);if(l)return l}return He(t.length,s.length)}function oa(r){return df(r)}function df(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Ei(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ii(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Re.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=df(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of s)l?l=!1:o+=",",o+=`${d}:${df(t.fields[d])}`;return o+"}"}(r.mapValue):Oe(61005,{value:r})}function dc(r){switch(Ti(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kc(r);return e?16+dc(e):16;case 5:return 2*r.stringValue.length;case 6:return Ii(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+dc(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return oo(s.fields,(l,d)=>{o+=l.length+dc(d)}),o}(r.mapValue);default:throw Oe(13486,{value:r})}}function Gy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function hf(r){return!!r&&"integerValue"in r}function Yf(r){return!!r&&"arrayValue"in r}function Ky(r){return!!r&&"nullValue"in r}function Qy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function hc(r){return!!r&&"mapValue"in r}function NC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[p_])===null||t===void 0?void 0:t.stringValue)===m_}function fl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return oo(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=fl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function DC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===kC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!hc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fl(t)}setAll(e){let t=on.emptyPath(),s={},o=[];e.forEach((d,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,o),s={},o=[],t=f.popLast()}d?s[f.lastSegment()]=fl(d):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());hc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ns(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];hc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){oo(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new pr(fl(this.value))}}function g_(r){const e=[];return oo(r.fields,(t,s)=>{const o=new on([t]);if(hc(s)){const l=g_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new Vr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t,s,o,l,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=d,this.documentState=f}static newInvalidDocument(e){return new vn(e,0,Fe.min(),Fe.min(),Fe.min(),pr.empty(),0)}static newFoundDocument(e,t,s,o){return new vn(e,1,t,Fe.min(),s,o,0)}static newNoDocument(e,t){return new vn(e,2,t,Fe.min(),Fe.min(),pr.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,Fe.min(),Fe.min(),pr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t){this.position=e,this.inclusive=t}}function Yy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?s=Re.comparator(Re.fromName(d.referenceValue),t.key):s=ia(d,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Jy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ns(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t="asc"){this.field=e,this.dir=t}}function VC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{}class Ot extends y_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new LC(e,t,s):t==="array-contains"?new FC(e,s):t==="in"?new UC(e,s):t==="not-in"?new zC(e,s):t==="array-contains-any"?new BC(e,s):new Ot(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new jC(e,s):new MC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ia(t,this.value)):t!==null&&Ti(this.value)===Ti(t)&&this.matchesComparison(ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jr extends y_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new jr(e,t)}matches(e){return v_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function v_(r){return r.op==="and"}function __(r){return OC(r)&&v_(r)}function OC(r){for(const e of r.filters)if(e instanceof jr)return!1;return!0}function ff(r){if(r instanceof Ot)return r.field.canonicalString()+r.op.toString()+oa(r.value);if(__(r))return r.filters.map(e=>ff(e)).join(",");{const e=r.filters.map(t=>ff(t)).join(",");return`${r.op}(${e})`}}function w_(r,e){return r instanceof Ot?function(s,o){return o instanceof Ot&&s.op===o.op&&s.field.isEqual(o.field)&&ns(s.value,o.value)}(r,e):r instanceof jr?function(s,o){return o instanceof jr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,d,f)=>l&&w_(d,o.filters[f]),!0):!1}(r,e):void Oe(19439)}function E_(r){return r instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${oa(t.value)}`}(r):r instanceof jr?function(t){return t.op.toString()+" {"+t.getFilters().map(E_).join(" ,")+"}"}(r):"Filter"}class LC extends Ot{constructor(e,t,s){super(e,t,s),this.key=Re.fromName(s.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class jC extends Ot{constructor(e,t){super(e,"in",t),this.keys=I_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class MC extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=I_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function I_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Re.fromName(s.referenceValue))}class FC extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yf(t)&&Sl(t.arrayValue,this.value)}}class UC extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Sl(this.value.arrayValue,t)}}class zC extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sl(this.value.arrayValue,t)}}class BC extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Sl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,t=null,s=[],o=[],l=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=d,this.endAt=f,this.Pe=null}}function Xy(r,e=null,t=[],s=[],o=null,l=null,d=null){return new $C(r,e,t,s,o,l,d)}function Jf(r){const e=Ue(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>ff(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),Gc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>oa(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>oa(s)).join(",")),e.Pe=t}return e.Pe}function Xf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!VC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!w_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Jy(r.startAt,e.startAt)&&Jy(r.endAt,e.endAt)}function pf(r){return Re.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,t=null,s=[],o=[],l=null,d="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function HC(r,e,t,s,o,l,d,f){return new Vl(r,e,t,s,o,l,d,f)}function Qc(r){return new Vl(r)}function Zy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function T_(r){return r.collectionGroup!==null}function pl(r){const e=Ue(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Wt(on.comparator);return d.filters.forEach(m=>{m.getFlattenedFilters().forEach(v=>{v.isInequality()&&(f=f.add(v.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Pc(l,s))}),t.has(on.keyField().canonicalString())||e.Te.push(new Pc(on.keyField(),s))}return e.Te}function Xr(r){const e=Ue(r);return e.Ie||(e.Ie=WC(e,pl(r))),e.Ie}function WC(r,e){if(r.limitType==="F")return Xy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Pc(o.field,l)});const t=r.endAt?new Rc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Rc(r.startAt.position,r.startAt.inclusive):null;return Xy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function mf(r,e){const t=r.filters.concat([e]);return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function gf(r,e,t){return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Yc(r,e){return Xf(Xr(r),Xr(e))&&r.limitType===e.limitType}function x_(r){return`${Jf(Xr(r))}|lt:${r.limitType}`}function Go(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>E_(o)).join(", ")}]`),Gc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>oa(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>oa(o)).join(",")),`Target(${s})`}(Xr(r))}; limitType=${r.limitType})`}function Jc(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Re.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of pl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(d,f,m){const v=Yy(d,f,m);return d.inclusive?v<=0:v<0}(s.startAt,pl(s),o)||s.endAt&&!function(d,f,m){const v=Yy(d,f,m);return d.inclusive?v>=0:v>0}(s.endAt,pl(s),o))}(r,e)}function qC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function S_(r){return(e,t)=>{let s=!1;for(const o of pl(r)){const l=GC(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function GC(r,e,t){const s=r.field.isKeyField()?Re.comparator(e.key,t.key):function(l,d,f){const m=d.data.field(l),v=f.data.field(l);return m!==null&&v!==null?ia(m,v):Oe(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Oe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){oo(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return l_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new wt(Re.comparator);function As(){return KC}const C_=new wt(Re.comparator);function il(...r){let e=C_;for(const t of r)e=e.insert(t.key,t);return e}function A_(r){let e=C_;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Yi(){return ml()}function R_(){return ml()}function ml(){return new ao(r=>r.toString(),(r,e)=>r.isEqual(e))}const QC=new wt(Re.comparator),YC=new Wt(Re.comparator);function Ge(...r){let e=YC;for(const t of r)e=e.add(t);return e}const JC=new Wt(He);function XC(){return JC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sc(e)?"-0":e}}function P_(r){return{integerValue:""+r}}function ZC(r,e){return CC(e)?P_(e):Zf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this._=void 0}}function eA(r,e,t){return r instanceof bc?function(o,l){const d={fields:{[d_]:{stringValue:c_},[f_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Qf(l)&&(l=Kc(l)),l&&(d.fields[h_]=l),{mapValue:d}}(t,e):r instanceof Cl?k_(r,e):r instanceof Al?N_(r,e):function(o,l){const d=b_(o,l),f=ev(d)+ev(o.Ee);return hf(d)&&hf(o.Ee)?P_(f):Zf(o.serializer,f)}(r,e)}function tA(r,e,t){return r instanceof Cl?k_(r,e):r instanceof Al?N_(r,e):t}function b_(r,e){return r instanceof kc?function(s){return hf(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class bc extends Xc{}class Cl extends Xc{constructor(e){super(),this.elements=e}}function k_(r,e){const t=D_(e);for(const s of r.elements)t.some(o=>ns(o,s))||t.push(s);return{arrayValue:{values:t}}}class Al extends Xc{constructor(e){super(),this.elements=e}}function N_(r,e){let t=D_(e);for(const s of r.elements)t=t.filter(o=>!ns(o,s));return{arrayValue:{values:t}}}class kc extends Xc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function ev(r){return St(r.integerValue||r.doubleValue)}function D_(r){return Yf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function nA(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Cl&&o instanceof Cl||s instanceof Al&&o instanceof Al?sa(s.elements,o.elements,ns):s instanceof kc&&o instanceof kc?ns(s.Ee,o.Ee):s instanceof bc&&o instanceof bc}(r.transform,e.transform)}class rA{constructor(e,t){this.version=e,this.transformResults=t}}class Lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Lr}static exists(e){return new Lr(void 0,e)}static updateTime(e){return new Lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Zc{}function V_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ep(r.key,Lr.none()):new Ol(r.key,r.data,Lr.none());{const t=r.data,s=pr.empty();let o=new Wt(on.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?s.delete(l):s.set(l,d),o=o.add(l)}return new lo(r.key,s,new Vr(o.toArray()),Lr.none())}}function sA(r,e,t){r instanceof Ol?function(o,l,d){const f=o.value.clone(),m=nv(o.fieldTransforms,l,d.transformResults);f.setAll(m),l.convertToFoundDocument(d.version,f).setHasCommittedMutations()}(r,e,t):r instanceof lo?function(o,l,d){if(!fc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const f=nv(o.fieldTransforms,l,d.transformResults),m=l.data;m.setAll(O_(o)),m.setAll(f),l.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,t):function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function gl(r,e,t,s){return r instanceof Ol?function(l,d,f,m){if(!fc(l.precondition,d))return f;const v=l.value.clone(),I=rv(l.fieldTransforms,m,d);return v.setAll(I),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(r,e,t,s):r instanceof lo?function(l,d,f,m){if(!fc(l.precondition,d))return f;const v=rv(l.fieldTransforms,m,d),I=d.data;return I.setAll(O_(l)),I.setAll(v),d.convertToFoundDocument(d.version,I).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(r,e,t,s):function(l,d,f){return fc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f}(r,e,t)}function iA(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=b_(s.transform,o||null);l!=null&&(t===null&&(t=pr.empty()),t.set(s.field,l))}return t||null}function tv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&sa(s,o,(l,d)=>nA(l,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ol extends Zc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class lo extends Zc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function O_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function nv(r,e,t){const s=new Map;nt(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,f=e.data.field(l.field);s.set(l.field,tA(d,f,t[o]))}return s}function rv(r,e,t){const s=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);s.set(o.field,eA(l,d,e))}return s}class ep extends Zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oA extends Zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&sA(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=gl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=gl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=R_();return this.mutations.forEach(o=>{const l=e.get(o.key),d=l.overlayedDocument;let f=this.applyToLocalView(d,l.mutatedFields);f=t.has(o.key)?null:f;const m=V_(d,f);m!==null&&s.set(o.key,m),d.isValidDocument()||d.convertToNoDocument(Fe.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ge())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,(t,s)=>tv(t,s))&&sa(this.baseMutations,e.baseMutations,(t,s)=>tv(t,s))}}class tp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){nt(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=function(){return QC}();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,s[d].version);return new tp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Je;function cA(r){switch(r){case Y.OK:return Oe(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Oe(15467,{code:r})}}function L_(r){if(r===void 0)return Cs("GRPC error has no .code"),Y.UNKNOWN;switch(r){case Dt.OK:return Y.OK;case Dt.CANCELLED:return Y.CANCELLED;case Dt.UNKNOWN:return Y.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return Y.INTERNAL;case Dt.UNAVAILABLE:return Y.UNAVAILABLE;case Dt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Dt.NOT_FOUND:return Y.NOT_FOUND;case Dt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Dt.ABORTED:return Y.ABORTED;case Dt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Dt.DATA_LOSS:return Y.DATA_LOSS;default:return Oe(39323,{code:r})}}(Je=Dt||(Dt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=new gi([4294967295,4294967295],0);function sv(r){const e=s_().encode(r),t=new Y0;return t.update(e),new Uint8Array(t.digest())}function iv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new gi([t,s],0),new gi([o,l],0)]}class np{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ol(`Invalid padding: ${t}`);if(s<0)throw new ol(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ol(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ol(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=gi.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(gi.fromNumber(s)));return o.compare(dA)===1&&(o=new gi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=sv(e),[s,o]=iv(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(s,o,l);if(!this.ye(d))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new np(l,o,t);return s.forEach(f=>d.insert(f)),d}insert(e){if(this.fe===0)return;const t=sv(e),[s,o]=iv(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(s,o,l);this.we(d)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ll.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ed(Fe.min(),o,new wt(He),As(),Ge())}}class Ll{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ll(s,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class j_{constructor(e,t){this.targetId=e,this.De=t}}class M_{constructor(e,t,s=an.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class ov{constructor(){this.ve=0,this.Ce=av(),this.Fe=an.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ge(),t=Ge(),s=Ge();return this.Ce.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Oe(38017,{changeType:l})}}),new Ll(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=av()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class hA{constructor(e){this.We=e,this.Ge=new Map,this.ze=As(),this.je=sc(),this.Je=sc(),this.He=new wt(He)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Oe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((s,o)=>{this.nt(o)&&t(o)})}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const l=o.target;if(pf(l))if(s===0){const d=new Re(l.path);this.Xe(t,d,vn.newNoDocument(d,Fe.min()))}else nt(s===1,20013,{expectedCount:s});else{const d=this.ot(t);if(d!==s){const f=this._t(e),m=f?this.ut(f,e,d):1;if(m!==0){this.rt(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let d,f;try{d=Ii(s).toUint8Array()}catch(m){if(m instanceof u_)return _i("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new np(d,o,l)}catch(m){return _i(m instanceof ol?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.fe===0?null:f}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const d=this.We.lt(),f=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)}),o}Pt(e){const t=new Map;this.Ge.forEach((l,d)=>{const f=this.st(d);if(f){if(l.current&&pf(f.target)){const m=new Re(f.target.path);this.Tt(m).has(d)||this.It(d,m)||this.Xe(d,m,vn.newNoDocument(m,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}});let s=Ge();this.Je.forEach((l,d)=>{let f=!0;d.forEachWhile(m=>{const v=this.st(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.ze.forEach((l,d)=>d.setReadTime(e));const o=new ed(e,t,this.He,this.ze,s);return this.ze=As(),this.je=sc(),this.Je=sc(),this.He=new wt(He),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new ov,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Wt(He),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Wt(He),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ov),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function sc(){return new wt(Re.comparator)}function av(){return new wt(Re.comparator)}const fA={asc:"ASCENDING",desc:"DESCENDING"},pA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mA={and:"AND",or:"OR"};class gA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yf(r,e){return r.useProto3Json||Gc(e)?e:{value:e}}function Nc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function yA(r,e){return Nc(r,e.toTimestamp())}function Zr(r){return nt(!!r,49232),Fe.fromTimestamp(function(t){const s=Ei(t);return new mt(s.seconds,s.nanos)}(r))}function rp(r,e){return vf(r,e).canonicalString()}function vf(r,e){const t=function(o){return new dt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function U_(r){const e=dt.fromString(r);return nt(W_(e),10190,{key:e.toString()}),e}function _f(r,e){return rp(r.databaseId,e.path)}function Gh(r,e){const t=U_(e);if(t.get(1)!==r.databaseId.projectId)throw new ye(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ye(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Re(B_(t))}function z_(r,e){return rp(r.databaseId,e)}function vA(r){const e=U_(r);return e.length===4?dt.emptyPath():B_(e)}function wf(r){return new dt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function B_(r){return nt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function lv(r,e,t){return{name:_f(r,e),fields:t.value.mapValue.fields}}function _A(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Oe(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,I){return v.useProto3Json?(nt(I===void 0||typeof I=="string",58123),an.fromBase64String(I||"")):(nt(I===void 0||I instanceof Buffer||I instanceof Uint8Array,16193),an.fromUint8Array(I||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&function(v){const I=v.code===void 0?Y.UNKNOWN:L_(v.code);return new ye(I,v.message||"")}(d);t=new M_(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Gh(r,s.document.name),l=Zr(s.document.updateTime),d=s.document.createTime?Zr(s.document.createTime):Fe.min(),f=new pr({mapValue:{fields:s.document.fields}}),m=vn.newFoundDocument(o,l,d,f),v=s.targetIds||[],I=s.removedTargetIds||[];t=new pc(v,I,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Gh(r,s.document),l=s.readTime?Zr(s.readTime):Fe.min(),d=vn.newNoDocument(o,l),f=s.removedTargetIds||[];t=new pc([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Gh(r,s.document),l=s.removedTargetIds||[];t=new pc([],l,o,null)}else{if(!("filter"in e))return Oe(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,d=new uA(o,l),f=s.targetId;t=new j_(f,d)}}return t}function wA(r,e){let t;if(e instanceof Ol)t={update:lv(r,e.key,e.value)};else if(e instanceof ep)t={delete:_f(r,e.key)};else if(e instanceof lo)t={update:lv(r,e.key,e.data),updateMask:PA(e.fieldMask)};else{if(!(e instanceof oA))return Oe(16599,{Rt:e.type});t={verify:_f(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,d){const f=d.transform;if(f instanceof bc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Cl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Al)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof kc)return{fieldPath:d.field.canonicalString(),increment:f.Ee};throw Oe(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:yA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Oe(27497)}(r,e.precondition)),t}function EA(r,e){return r&&r.length>0?(nt(e!==void 0,14353),r.map(t=>function(o,l){let d=o.updateTime?Zr(o.updateTime):Zr(l);return d.isEqual(Fe.min())&&(d=Zr(l)),new rA(d,o.transformResults||[])}(t,e))):[]}function IA(r,e){return{documents:[z_(r,e.path)]}}function TA(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=z_(r,o);const l=function(v){if(v.length!==0)return H_(jr.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const d=function(v){if(v.length!==0)return v.map(I=>function(C){return{field:Ko(C.field),direction:CA(C.dir)}}(I))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=yf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{Vt:t,parent:o}}function xA(r){let e=vA(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){nt(s===1,65062);const I=t.from[0];I.allDescendants?o=I.collectionId:e=e.child(I.collectionId)}let l=[];t.where&&(l=function(E){const C=$_(E);return C instanceof jr&&__(C)?C.getFilters():[C]}(t.where));let d=[];t.orderBy&&(d=function(E){return E.map(C=>function($){return new Pc(Qo($.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(C))}(t.orderBy));let f=null;t.limit&&(f=function(E){let C;return C=typeof E=="object"?E.value:E,Gc(C)?null:C}(t.limit));let m=null;t.startAt&&(m=function(E){const C=!!E.before,j=E.values||[];return new Rc(j,C)}(t.startAt));let v=null;return t.endAt&&(v=function(E){const C=!E.before,j=E.values||[];return new Rc(j,C)}(t.endAt)),HC(e,o,d,l,f,"F",m,v)}function SA(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Qo(t.unaryFilter.field);return Ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Qo(t.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Qo(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Qo(t.unaryFilter.field);return Ot.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}}(r):r.fieldFilter!==void 0?function(t){return Ot.create(Qo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return jr.create(t.compositeFilter.filters.map(s=>$_(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}}(t.compositeFilter.op))}(r):Oe(30097,{filter:r})}function CA(r){return fA[r]}function AA(r){return pA[r]}function RA(r){return mA[r]}function Ko(r){return{fieldPath:r.canonicalString()}}function Qo(r){return on.fromServerFormat(r.fieldPath)}function H_(r){return r instanceof Ot?function(t){if(t.op==="=="){if(Qy(t.value))return{unaryFilter:{field:Ko(t.field),op:"IS_NAN"}};if(Ky(t.value))return{unaryFilter:{field:Ko(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Qy(t.value))return{unaryFilter:{field:Ko(t.field),op:"IS_NOT_NAN"}};if(Ky(t.value))return{unaryFilter:{field:Ko(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ko(t.field),op:AA(t.op),value:t.value}}}(r):r instanceof jr?function(t){const s=t.getFilters().map(o=>H_(o));return s.length===1?s[0]:{compositeFilter:{op:RA(t.op),filters:s}}}(r):Oe(54877,{filter:r})}function PA(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function W_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,s,o,l=Fe.min(),d=Fe.min(),f=an.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.gt=e}}function kA(r){const e=xA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?gf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.Dn=new DA}addToCollectionParentIndex(e,t){return this.Dn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(wi.min())}updateCollectionGroup(e,t,s){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class DA{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Wt(dt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Wt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q_=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(q_,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new aa(0)}static ur(){return new aa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="LruGarbageCollector",VA=1048576;function dv([r,e],[t,s]){const o=He(r,t);return o===0?He(e,s):o}class OA{constructor(e){this.Tr=e,this.buffer=new Wt(dv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();dv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class LA{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ve(cv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ya(t)?ve(cv,"Ignoring IndexedDB error during garbage collection: ",t):await ga(t)}await this.Rr(3e5)})}}class jA{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return J.resolve(qc.ue);const s=new OA(t);return this.Vr.forEachTarget(e,o=>s.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>s.Er(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(uv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uv):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,l,d,f,m,v;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,d=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(s=E,f=Date.now(),this.removeTargets(e,s,t))).next(E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,s))).next(E=>(v=Date.now(),qo()<=qe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-I}ms
	Determined least recently used ${o} in `+(f-d)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(v-m)+`ms
Total Duration: ${v-I}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E})))}}function MA(r,e){return new jA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.changes=new ao(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?J.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&gl(s.mutation,o,Vr.empty(),mt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ge()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ge()){const o=Yi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let d=il();return l.forEach((f,m)=>{d=d.insert(f,m.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const s=Yi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ge()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((d,f)=>{t.set(d,f)})})}computeViews(e,t,s,o){let l=As();const d=ml(),f=function(){return ml()}();return t.forEach((m,v)=>{const I=s.get(v.key);o.has(v.key)&&(I===void 0||I.mutation instanceof lo)?l=l.insert(v.key,v):I!==void 0?(d.set(v.key,I.mutation.getFieldMask()),gl(I.mutation,v,I.mutation.getFieldMask(),mt.now())):d.set(v.key,Vr.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((v,I)=>d.set(v,I)),t.forEach((v,I)=>{var E;return f.set(v,new UA(I,(E=d.get(v))!==null&&E!==void 0?E:null))}),f))}recalculateAndSaveOverlays(e,t){const s=ml();let o=new wt((d,f)=>d-f),l=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const f of d)f.keys().forEach(m=>{const v=t.get(m);if(v===null)return;let I=s.get(m)||Vr.empty();I=f.applyToLocalView(v,I),s.set(m,I);const E=(o.get(f.batchId)||Ge()).add(m);o=o.insert(f.batchId,E)})}).next(()=>{const d=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,I=m.value,E=R_();I.forEach(C=>{if(!l.has(C)){const j=V_(t.get(C),s.get(C));j!==null&&E.set(C,j),l=l.add(C)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,E))}return J.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(d){return Re.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):T_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):J.resolve(Yi());let f=Il,m=l;return d.next(v=>J.forEach(v,(I,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(I)?J.resolve():this.remoteDocumentCache.getEntry(e,I).next(C=>{m=m.insert(I,C)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,m,v,Ge())).next(I=>({batchId:f,changes:A_(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next(s=>{let o=il();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let d=il();return this.indexManager.getCollectionParents(e,l).next(f=>J.forEach(f,m=>{const v=function(E,C){return new Vl(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next(I=>{I.forEach((E,C)=>{d=d.insert(E,C)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(d=>{l.forEach((m,v)=>{const I=v.getKey();d.get(I)===null&&(d=d.insert(I,vn.newInvalidDocument(I)))});let f=il();return d.forEach((m,v)=>{const I=l.get(m);I!==void 0&&gl(I.mutation,v,Vr.empty(),mt.now()),Jc(t,v)&&(f=f.insert(m,v))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return J.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Zr(o.createTime)}}(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(o){return{name:o.name,query:kA(o.bundledQuery),readTime:Zr(o.readTime)}}(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.overlays=new wt(Re.comparator),this.kr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Yi();return J.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.wt(e,t,l)}),J.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(s)),J.resolve()}getOverlaysForCollection(e,t,s){const o=Yi(),l=t.length+1,d=new Re(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>s&&o.set(m.getKey(),m)}return J.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new wt((v,I)=>v-I);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let I=l.get(v.largestBatchId);I===null&&(I=Yi(),l=l.insert(v.largestBatchId,I)),I.set(v.getKey(),v)}}const f=Yi(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,I)=>f.set(v,I)),!(f.size()>=o)););return J.resolve(f)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new lA(t,s));let l=this.kr.get(t);l===void 0&&(l=Ge(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.qr=new Wt(Jt.Qr),this.$r=new Wt(Jt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new Jt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Wr(new Jt(e,t))}Gr(e,t){e.forEach(s=>this.removeReference(s,t))}zr(e){const t=new Re(new dt([])),s=new Jt(t,e),o=new Jt(t,e+1),l=[];return this.$r.forEachInRange([s,o],d=>{this.Wr(d),l.push(d.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Re(new dt([])),s=new Jt(t,e),o=new Jt(t,e+1);let l=Ge();return this.$r.forEachInRange([s,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new Jt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Jt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Re.comparator(e.key,t.key)||He(e.Hr,t.Hr)}static Ur(e,t){return He(e.Hr,t.Hr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Wt(Jt.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new aA(l,t,s,o);this.mutationQueue.push(d);for(const f of o)this.Yr=this.Yr.add(new Jt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return J.resolve(d)}lookupMutationBatch(e,t){return J.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return J.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Kf:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Jt(t,0),o=new Jt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,o],d=>{const f=this.Zr(d.Hr);l.push(f)}),J.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Wt(He);return t.forEach(o=>{const l=new Jt(o,0),d=new Jt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],f=>{s=s.add(f.Hr)})}),J.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Re.isDocumentKey(l)||(l=l.child(""));const d=new Jt(new Re(l),0);let f=new Wt(He);return this.Yr.forEachWhile(m=>{const v=m.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(f=f.add(m.Hr)),!0)},d),J.resolve(this.ei(f))}ei(e){const t=[];return e.forEach(s=>{const o=this.Zr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){nt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return J.forEach(t.mutations,o=>{const l=new Jt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,t){const s=new Jt(t,0),o=this.Yr.firstAfterOrEqual(s);return J.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.ni=e,this.docs=function(){return new wt(Re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,d=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return J.resolve(s?s.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let s=As();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():vn.newInvalidDocument(o))}),J.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=As();const d=t.path,f=new Re(d.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:I}}=m.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||IC(EC(I),s)<=0||(o.has(I.key)||Jc(t,I))&&(l=l.insert(I.key,I.mutableCopy()))}return J.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Oe(9500)}ri(e,t){return J.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new GA(this)}getSize(e){return J.resolve(this.size)}}class GA extends FA{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)}),J.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.persistence=e,this.ii=new ao(t=>Jf(t),Xf),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.si=0,this.oi=new sp,this.targetCount=0,this._i=aa.ar()}forEachTarget(e,t){return this.ii.forEach((s,o)=>t(o)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),J.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new aa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.hr(t),J.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ii.forEach((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),J.waitFor(l).next(()=>o)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return J.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),J.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),J.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return J.resolve(s)}containsKey(e,t){return J.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,t){this.ai={},this.overlays={},this.ui=new qc(0),this.ci=!1,this.ci=!0,this.li=new HA,this.referenceDelegate=e(this),this.hi=new KA(this),this.indexManager=new NA,this.remoteDocumentCache=function(o){return new qA(o)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new bA(t),this.Ti=new BA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $A,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new WA(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){ve("MemoryPersistence","Starting transaction:",e);const o=new QA(this.ui.next());return this.referenceDelegate.Ii(),s(o).next(l=>this.referenceDelegate.di(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ei(e,t){return J.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,t)))}}class QA extends xC{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Ai=new sp,this.Ri=null}static Vi(e){return new ip(e)}get mi(){if(this.Ri)return this.Ri;throw Oe(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),J.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(o=>this.mi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.mi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,s=>{const o=Re.fromPath(s);return this.fi(e,o).next(l=>{l||t.removeEntry(o,Fe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return J.or([()=>J.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Dc{constructor(e,t){this.persistence=e,this.gi=new ao(s=>AC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=MA(this,t)}static Vi(e,t){return new Dc(e,t)}Ii(){}di(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}yr(e){let t=0;return this.gr(e,s=>{t++}).next(()=>t)}gr(e,t){return J.forEach(this.gi,(s,o)=>this.Sr(e,s,o).next(l=>l?J.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,d=>this.Sr(e,d,t).next(f=>{f||(s++,l.removeEntry(d,Fe.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dc(e.data.value)),t}Sr(e,t,s){return J.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return J.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=Ge(),o=Ge();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new op(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return lT()?8:SC(_n())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ps(e,t).next(d=>{l.result=d}).next(()=>{if(!l.result)return this.ys(e,t,o,s).next(d=>{l.result=d})}).next(()=>{if(l.result)return;const d=new YA;return this.ws(e,t,d).next(f=>{if(l.result=f,this.Rs)return this.Ss(e,t,d,f.size)})}).next(()=>l.result)}Ss(e,t,s,o){return s.documentReadCount<this.Vs?(qo()<=qe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(qo()<=qe.DEBUG&&ve("QueryEngine","Query:",Go(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(qo()<=qe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xr(t))):J.resolve())}ps(e,t){if(Zy(t))return J.resolve(null);let s=Xr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=gf(t,null,"F"),s=Xr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const d=Ge(...l);return this.gs.getDocuments(e,d).next(f=>this.indexManager.getMinOffset(e,s).next(m=>{const v=this.bs(t,f);return this.Ds(t,v,d,m.readTime)?this.ps(e,gf(t,null,"F")):this.vs(e,v,t,m)}))})))}ys(e,t,s,o){return Zy(t)||o.isEqual(Fe.min())?J.resolve(null):this.gs.getDocuments(e,s).next(l=>{const d=this.bs(t,l);return this.Ds(t,d,s,o)?J.resolve(null):(qo()<=qe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Go(t)),this.vs(e,d,t,wC(o,Il)).next(f=>f))})}bs(e,t){let s=new Wt(S_(e));return t.forEach((o,l)=>{Jc(e,l)&&(s=s.add(l))}),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,s){return qo()<=qe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Go(t)),this.gs.getDocumentsMatchingQuery(e,t,wi.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(d=>{l=l.insert(d.key,d)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="LocalStore",XA=3e8;class ZA{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new wt(He),this.Ms=new ao(l=>Jf(l),Xf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zA(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function eR(r,e,t,s){return new ZA(r,e,t,s)}async function K_(r,e){const t=Ue(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const d=[],f=[];let m=Ge();for(const v of o){d.push(v.batchId);for(const I of v.mutations)m=m.add(I.key)}for(const v of l){f.push(v.batchId);for(const I of v.mutations)m=m.add(I.key)}return t.localDocuments.getDocuments(s,m).next(v=>({Bs:v,removedBatchIds:d,addedBatchIds:f}))})})}function tR(r,e){const t=Ue(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(f,m,v,I){const E=v.batch,C=E.keys();let j=J.resolve();return C.forEach($=>{j=j.next(()=>I.getEntry(m,$)).next(H=>{const M=v.docVersions.get($);nt(M!==null,48541),H.version.compareTo(M)<0&&(E.applyToRemoteDocument(H,v),H.isValidDocument()&&(H.setReadTime(v.commitVersion),I.addEntry(H)))})}),j.next(()=>f.mutationQueue.removeMutationBatch(m,E))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let m=Ge();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(m=m.add(f.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function Q_(r){const e=Ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function nR(r,e){const t=Ue(r),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach((I,E)=>{const C=o.get(E);if(!C)return;f.push(t.hi.removeMatchingKeys(l,I.removedDocuments,E).next(()=>t.hi.addMatchingKeys(l,I.addedDocuments,E)));let j=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?j=j.withResumeToken(an.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):I.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(I.resumeToken,s)),o=o.insert(E,j),function(H,M,ee){return H.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=XA?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0}(C,j,I)&&f.push(t.hi.updateTargetData(l,j))});let m=As(),v=Ge();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,I))}),f.push(rR(l,d,e.documentUpdates).next(I=>{m=I.Ls,v=I.ks})),!s.isEqual(Fe.min())){const I=t.hi.getLastRemoteSnapshotVersion(l).next(E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(I)}return J.waitFor(f).next(()=>d.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,v)).next(()=>m)}).then(l=>(t.Fs=o,l))}function rR(r,e,t){let s=Ge(),o=Ge();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let d=As();return t.forEach((f,m)=>{const v=l.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(Fe.min())?(e.removeEntry(f,m.readTime),d=d.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),d=d.insert(f,m)):ve(ap,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{Ls:d,ks:o}})}function sR(r,e){const t=Ue(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Kf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function iR(r,e){const t=Ue(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.hi.getTargetData(s,e).next(l=>l?(o=l,J.resolve(o)):t.hi.allocateTargetId(s).next(d=>(o=new di(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s})}async function Ef(r,e,t){const s=Ue(r),o=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!ya(d))throw d;ve(ap,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function hv(r,e,t){const s=Ue(r);let o=Fe.min(),l=Ge();return s.persistence.runTransaction("Execute query","readwrite",d=>function(m,v,I){const E=Ue(m),C=E.Ms.get(I);return C!==void 0?J.resolve(E.Fs.get(C)):E.hi.getTargetData(v,I)}(s,d,Xr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(d,f.targetId).next(m=>{l=m})}).next(()=>s.Cs.getDocumentsMatchingQuery(d,e,t?o:Fe.min(),t?l:Ge())).next(f=>(oR(s,qC(e),f),{documents:f,qs:l})))}function oR(r,e,t){let s=r.xs.get(e)||Fe.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.xs.set(e,s)}class fv{constructor(){this.activeTargetIds=XC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aR{constructor(){this.Fo=new fv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new fv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="ConnectivityMonitor";class mv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ve(pv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ve(pv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic=null;function If(){return ic===null?ic=function(){return 268435456+Math.round(2147483648*Math.random())}():ic++,"0x"+ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="RestConnection",uR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===Cc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const d=If(),f=this.Go(e,t.toUriEncodedString());ve(Kh,`Sending RPC '${e}' ${d}:`,f,s);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,o,l);const{host:v}=new URL(f),I=da(v);return this.jo(e,f,m,s,I).then(E=>(ve(Kh,`Received RPC '${e}' ${d}: `,E),E),E=>{throw _i(Kh,`RPC '${e}' ${d} failed with error: `,E,"url: ",f,"request:",s),E})}Jo(e,t,s,o,l,d){return this.Wo(e,t,s,o,l)}zo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ma}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),s&&s.headers.forEach((o,l)=>e[l]=o)}Go(e,t){const s=uR[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class hR extends cR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,l){const d=If();return new Promise((f,m)=>{const v=new J0;v.setWithCredentials(!0),v.listenOnce(X0.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case cc.NO_ERROR:const E=v.getResponseJson();ve(gn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),f(E);break;case cc.TIMEOUT:ve(gn,`RPC '${e}' ${d} timed out`),m(new ye(Y.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:const C=v.getStatus();if(ve(gn,`RPC '${e}' ${d} failed with status:`,C,"response text:",v.getResponseText()),C>0){let j=v.getResponseJson();Array.isArray(j)&&(j=j[0]);const $=j==null?void 0:j.error;if($&&$.status&&$.message){const H=function(ee){const re=ee.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(re)>=0?re:Y.UNKNOWN}($.status);m(new ye(H,$.message))}else m(new ye(Y.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new ye(Y.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{ve(gn,`RPC '${e}' ${d} completed.`)}});const I=JSON.stringify(o);ve(gn,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",I,s,15)})}P_(e,t,s){const o=If(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=t_(),f=e_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const I=l.join("");ve(gn,`Creating RPC '${e}' stream ${o}: ${I}`,m);const E=d.createWebChannel(I,m);this.T_(E);let C=!1,j=!1;const $=new dR({Ho:M=>{j?ve(gn,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(C||(ve(gn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),C=!0),ve(gn,`RPC '${e}' stream ${o} sending:`,M),E.send(M))},Yo:()=>E.close()}),H=(M,ee,re)=>{M.listen(ee,Q=>{try{re(Q)}catch(le){setTimeout(()=>{throw le},0)}})};return H(E,sl.EventType.OPEN,()=>{j||(ve(gn,`RPC '${e}' stream ${o} transport opened.`),$.s_())}),H(E,sl.EventType.CLOSE,()=>{j||(j=!0,ve(gn,`RPC '${e}' stream ${o} transport closed`),$.__(),this.I_(E))}),H(E,sl.EventType.ERROR,M=>{j||(j=!0,_i(gn,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),$.__(new ye(Y.UNAVAILABLE,"The operation could not be completed")))}),H(E,sl.EventType.MESSAGE,M=>{var ee;if(!j){const re=M.data[0];nt(!!re,16349);const Q=re,le=(Q==null?void 0:Q.error)||((ee=Q[0])===null||ee===void 0?void 0:ee.error);if(le){ve(gn,`RPC '${e}' stream ${o} received error:`,le);const ue=le.status;let de=function(x){const b=Dt[x];if(b!==void 0)return L_(b)}(ue),N=le.message;de===void 0&&(de=Y.INTERNAL,N="Unknown error status: "+ue+" with message "+le.message),j=!0,$.__(new ye(de,N)),E.close()}else ve(gn,`RPC '${e}' stream ${o} received:`,re),$.a_(re)}}),H(f,Z0.STAT_EVENT,M=>{M.stat===uf.PROXY?ve(gn,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===uf.NOPROXY&&ve(gn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{$.o_()},0),$}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(r){return new gA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="PersistentStream";class J_{constructor(e,t,s,o,l,d,f,m){this.Fi=e,this.w_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Y_(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Cs(t.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.b_===t&&this.W_(s,o)},s=>{e(()=>{const o=new ye(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)})})}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{s(()=>this.G_(o))}),this.stream.onMessage(o=>{s(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ve(gv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ve(gv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fR extends J_{constructor(e,t,s,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=_A(this.serializer,e),s=function(l){if(!("targetChange"in l))return Fe.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Fe.min():d.readTime?Zr(d.readTime):Fe.min()}(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=wf(this.serializer),t.addTarget=function(l,d){let f;const m=d.target;if(f=pf(m)?{documents:IA(l,m)}:{query:TA(l,m).Vt},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=F_(l,d.resumeToken);const v=yf(l,d.expectedCount);v!==null&&(f.expectedCount=v)}else if(d.snapshotVersion.compareTo(Fe.min())>0){f.readTime=Nc(l,d.snapshotVersion.toTimestamp());const v=yf(l,d.expectedCount);v!==null&&(f.expectedCount=v)}return f}(this.serializer,e);const s=SA(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=wf(this.serializer),t.removeTarget=e,this.k_(t)}}class pR extends J_{constructor(e,t,s,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=EA(e.writeResults,e.commitTime),s=Zr(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=wf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>wA(this.serializer,s))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{}class gR extends mR{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ye(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Wo(e,vf(t,s),o,l,d)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(Y.UNKNOWN,l.toString())})}Jo(e,t,s,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,f])=>this.connection.Jo(e,vf(t,s),o,d,f,l)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ye(Y.UNKNOWN,d.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class yR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Cs(t),this._a=!1):ve("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="RemoteStore";class vR{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(d=>{s.enqueueAndForget(async()=>{uo(this)&&(ve(no,"Restarting streams for network reachability change."),await async function(m){const v=Ue(m);v.Ia.add(4),await jl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await nd(v)}(this))})}),this.Aa=new yR(s,o)}}async function nd(r){if(uo(r))for(const e of r.da)await e(!0)}async function jl(r){for(const e of r.da)await e(!1)}function X_(r,e){const t=Ue(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),dp(t)?cp(t):va(t).x_()&&up(t,e))}function lp(r,e){const t=Ue(r),s=va(t);t.Ta.delete(e),s.x_()&&Z_(t,e),t.Ta.size===0&&(s.x_()?s.B_():uo(t)&&t.Aa.set("Unknown"))}function up(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}va(r).H_(e)}function Z_(r,e){r.Ra.$e(e),va(r).Y_(e)}function cp(r){r.Ra=new hA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),va(r).start(),r.Aa.aa()}function dp(r){return uo(r)&&!va(r).M_()&&r.Ta.size>0}function uo(r){return Ue(r).Ia.size===0}function ew(r){r.Ra=void 0}async function _R(r){r.Aa.set("Online")}async function wR(r){r.Ta.forEach((e,t)=>{up(r,e)})}async function ER(r,e){ew(r),dp(r)?(r.Aa.la(e),cp(r)):r.Aa.set("Unknown")}async function IR(r,e,t){if(r.Aa.set("Online"),e instanceof M_&&e.state===2&&e.cause)try{await async function(o,l){const d=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,d),o.Ta.delete(f),o.Ra.removeTarget(f))}(r,e)}catch(s){ve(no,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vc(r,s)}else if(e instanceof pc?r.Ra.Ye(e):e instanceof j_?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Fe.min()))try{const s=await Q_(r.localStore);t.compareTo(s)>=0&&await function(l,d){const f=l.Ra.Pt(d);return f.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const I=l.Ta.get(v);I&&l.Ta.set(v,I.withResumeToken(m.resumeToken,d))}}),f.targetMismatches.forEach((m,v)=>{const I=l.Ta.get(m);if(!I)return;l.Ta.set(m,I.withResumeToken(an.EMPTY_BYTE_STRING,I.snapshotVersion)),Z_(l,m);const E=new di(I.target,m,v,I.sequenceNumber);up(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){ve(no,"Failed to raise snapshot:",s),await Vc(r,s)}}async function Vc(r,e,t){if(!ya(e))throw e;r.Ia.add(1),await jl(r),r.Aa.set("Offline"),t||(t=()=>Q_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ve(no,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await nd(r)})}function tw(r,e){return e().catch(t=>Vc(r,t,e))}async function rd(r){const e=Ue(r),t=xi(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Kf;for(;TR(e);)try{const o=await sR(e.localStore,s);if(o===null){e.Pa.length===0&&t.B_();break}s=o.batchId,xR(e,o)}catch(o){await Vc(e,o)}nw(e)&&rw(e)}function TR(r){return uo(r)&&r.Pa.length<10}function xR(r,e){r.Pa.push(e);const t=xi(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function nw(r){return uo(r)&&!xi(r).M_()&&r.Pa.length>0}function rw(r){xi(r).start()}async function SR(r){xi(r).na()}async function CR(r){const e=xi(r);for(const t of r.Pa)e.X_(t.mutations)}async function AR(r,e,t){const s=r.Pa.shift(),o=tp.from(s,e,t);await tw(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await rd(r)}async function RR(r,e){e&&xi(r).Z_&&await async function(s,o){if(function(d){return cA(d)&&d!==Y.ABORTED}(o.code)){const l=s.Pa.shift();xi(s).N_(),await tw(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await rd(s)}}(r,e),nw(r)&&rw(r)}async function yv(r,e){const t=Ue(r);t.asyncQueue.verifyOperationInProgress(),ve(no,"RemoteStore received new credentials");const s=uo(t);t.Ia.add(3),await jl(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await nd(t)}async function PR(r,e){const t=Ue(r);e?(t.Ia.delete(2),await nd(t)):e||(t.Ia.add(2),await jl(t),t.Aa.set("Unknown"))}function va(r){return r.Va||(r.Va=function(t,s,o){const l=Ue(t);return l.ia(),new fR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:_R.bind(null,r),e_:wR.bind(null,r),n_:ER.bind(null,r),J_:IR.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),dp(r)?cp(r):r.Aa.set("Unknown")):(await r.Va.stop(),ew(r))})),r.Va}function xi(r){return r.ma||(r.ma=function(t,s,o){const l=Ue(t);return l.ia(),new pR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:SR.bind(null,r),n_:RR.bind(null,r),ea:CR.bind(null,r),ta:AR.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await rd(r)):(await r.ma.stop(),r.Pa.length>0&&(ve(no,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const d=Date.now()+s,f=new hp(e,t,d,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fp(r,e){if(Cs("AsyncQueue",`${e}: ${r}`),ya(r))return new ye(Y.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{static emptySet(e){return new ta(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Re.comparator(t.key,s.key):(t,s)=>Re.comparator(t.key,s.key),this.keyedMap=il(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ta)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ta;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.fa=new wt(Re.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Oe(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,s)=>{e.push(s)}),e}}class la{constructor(e,t,s,o,l,d,f,m,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,l){const d=[];return t.forEach(f=>{d.push({type:0,doc:f})}),new la(e,t,ta.emptySet(t),d,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class kR{constructor(){this.queries=_v(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=Ue(t),l=o.queries;o.queries=_v(),l.forEach((d,f)=>{for(const m of f.wa)m.onError(s)})})(this,new ye(Y.ABORTED,"Firestore shutting down"))}}function _v(){return new ao(r=>x_(r),Yc)}async function pp(r,e){const t=Ue(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(s=2):(l=new bR,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const f=fp(d,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&gp(t)}async function mp(r,e){const t=Ue(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function NR(r,e){const t=Ue(r);let s=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const f of d.wa)f.Ca(o)&&(s=!0);d.ya=o}}s&&gp(t)}function DR(r,e,t){const s=Ue(r),o=s.queries.get(e);if(o)for(const l of o.wa)l.onError(t);s.queries.delete(e)}function gp(r){r.Da.forEach(e=>{e.next()})}var Tf,wv;(wv=Tf||(Tf={})).Fa="default",wv.Cache="cache";class yp{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new la(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=la.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Tf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.key=e}}class iw{constructor(e){this.key=e}}class VR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ge(),this.mutatedKeys=Ge(),this.Xa=S_(e),this.eu=new ta(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new vv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((I,E)=>{const C=o.get(I),j=Jc(this.query,E)?E:null,$=!!C&&this.mutatedKeys.has(C.key),H=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let M=!1;C&&j?C.data.isEqual(j.data)?$!==H&&(s.track({type:3,doc:j}),M=!0):this.iu(C,j)||(s.track({type:2,doc:j}),M=!0,(m&&this.Xa(j,m)>0||v&&this.Xa(j,v)<0)&&(f=!0)):!C&&j?(s.track({type:0,doc:j}),M=!0):C&&!j&&(s.track({type:1,doc:C}),M=!0,(m||v)&&(f=!0)),M&&(j?(d=d.add(j),l=H?l.add(I):l.delete(I)):(d=d.delete(I),l=l.delete(I)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const I=this.query.limitType==="F"?d.last():d.first();d=d.delete(I.key),l=l.delete(I.key),s.track({type:1,doc:I})}return{eu:d,ru:s,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort((I,E)=>function(j,$){const H=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{At:M})}};return H(j)-H($)}(I.type,E.type)||this.Xa(I.doc,E.doc)),this.su(s),o=o!=null&&o;const f=t&&!o?this.ou():[],m=this.Za.size===0&&this.current&&!o?1:0,v=m!==this.Ya;return this.Ya=m,d.length!==0||v?{snapshot:new la(this.query,e.eu,l,d,e.mutatedKeys,m===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new vv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ge(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const t=[];return e.forEach(s=>{this.Za.has(s)||t.push(new iw(s))}),this.Za.forEach(s=>{e.has(s)||t.push(new sw(s))}),t}uu(e){this.Ha=e.qs,this.Za=Ge();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return la.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const vp="SyncEngine";class OR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class LR{constructor(e){this.key=e,this.lu=!1}}class jR{constructor(e,t,s,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new ao(f=>x_(f),Yc),this.Tu=new Map,this.Iu=new Set,this.du=new wt(Re.comparator),this.Eu=new Map,this.Au=new sp,this.Ru={},this.Vu=new Map,this.mu=aa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function MR(r,e,t=!0){const s=dw(r);let o;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await ow(s,e,t,!0),o}async function FR(r,e){const t=dw(r);await ow(t,e,!0,!1)}async function ow(r,e,t,s){const o=await iR(r.localStore,Xr(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await UR(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&X_(r.remoteStore,o),f}async function UR(r,e,t,s,o){r.gu=(E,C,j)=>async function(H,M,ee,re){let Q=M.view.nu(ee);Q.Ds&&(Q=await hv(H.localStore,M.query,!1).then(({documents:N})=>M.view.nu(N,Q)));const le=re&&re.targetChanges.get(M.targetId),ue=re&&re.targetMismatches.get(M.targetId)!=null,de=M.view.applyChanges(Q,H.isPrimaryClient,le,ue);return Iv(H,M.targetId,de._u),de.snapshot}(r,E,C,j);const l=await hv(r.localStore,e,!0),d=new VR(e,l.qs),f=d.nu(l.documents),m=Ll.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),v=d.applyChanges(f,r.isPrimaryClient,m);Iv(r,t,v._u);const I=new OR(e,t,d);return r.Pu.set(e,I),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function zR(r,e,t){const s=Ue(r),o=s.Pu.get(e),l=s.Tu.get(o.targetId);if(l.length>1)return s.Tu.set(o.targetId,l.filter(d=>!Yc(d,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Ef(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&lp(s.remoteStore,o.targetId),xf(s,o.targetId)}).catch(ga)):(xf(s,o.targetId),await Ef(s.localStore,o.targetId,!0))}async function BR(r,e){const t=Ue(r),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),lp(t.remoteStore,s.targetId))}async function $R(r,e,t){const s=YR(r);try{const o=await function(d,f){const m=Ue(d),v=mt.now(),I=f.reduce((j,$)=>j.add($.key),Ge());let E,C;return m.persistence.runTransaction("Locally write mutations","readwrite",j=>{let $=As(),H=Ge();return m.Os.getEntries(j,I).next(M=>{$=M,$.forEach((ee,re)=>{re.isValidDocument()||(H=H.add(ee))})}).next(()=>m.localDocuments.getOverlayedDocuments(j,$)).next(M=>{E=M;const ee=[];for(const re of f){const Q=iA(re,E.get(re.key).overlayedDocument);Q!=null&&ee.push(new lo(re.key,Q,g_(Q.value.mapValue),Lr.exists(!0)))}return m.mutationQueue.addMutationBatch(j,v,ee,f)}).next(M=>{C=M;const ee=M.applyToLocalDocumentSet(E,H);return m.documentOverlayCache.saveOverlays(j,M.batchId,ee)})}).then(()=>({batchId:C.batchId,changes:A_(E)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,f,m){let v=d.Ru[d.currentUser.toKey()];v||(v=new wt(He)),v=v.insert(f,m),d.Ru[d.currentUser.toKey()]=v}(s,o.batchId,t),await Ml(s,o.changes),await rd(s.remoteStore)}catch(o){const l=fp(o,"Failed to persist write");t.reject(l)}}async function aw(r,e){const t=Ue(r);try{const s=await nR(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.Eu.get(l);d&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?nt(d.lu,14607):o.removedDocuments.size>0&&(nt(d.lu,42227),d.lu=!1))}),await Ml(t,s,e)}catch(s){await ga(s)}}function Ev(r,e,t){const s=Ue(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach((l,d)=>{const f=d.view.va(e);f.snapshot&&o.push(f.snapshot)}),function(d,f){const m=Ue(d);m.onlineState=f;let v=!1;m.queries.forEach((I,E)=>{for(const C of E.wa)C.va(f)&&(v=!0)}),v&&gp(m)}(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function HR(r,e,t){const s=Ue(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let d=new wt(Re.comparator);d=d.insert(l,vn.newNoDocument(l,Fe.min()));const f=Ge().add(l),m=new ed(Fe.min(),new Map,new wt(He),d,f);await aw(s,m),s.du=s.du.remove(l),s.Eu.delete(e),_p(s)}else await Ef(s.localStore,e,!1).then(()=>xf(s,e,t)).catch(ga)}async function WR(r,e){const t=Ue(r),s=e.batch.batchId;try{const o=await tR(t.localStore,e);uw(t,s,null),lw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ml(t,o)}catch(o){await ga(o)}}async function qR(r,e,t){const s=Ue(r);try{const o=await function(d,f){const m=Ue(d);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return m.mutationQueue.lookupMutationBatch(v,f).next(E=>(nt(E!==null,37113),I=E.keys(),m.mutationQueue.removeMutationBatch(v,E))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,I,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,I)).next(()=>m.localDocuments.getDocuments(v,I))})}(s.localStore,e);uw(s,e,t),lw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ml(s,o)}catch(o){await ga(o)}}function lw(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function uw(r,e,t){const s=Ue(r);let o=s.Ru[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function xf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Tu.get(e))r.Pu.delete(s),t&&r.hu.pu(s,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(s=>{r.Au.containsKey(s)||cw(r,s)})}function cw(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(lp(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),_p(r))}function Iv(r,e,t){for(const s of t)s instanceof sw?(r.Au.addReference(s.key,e),GR(r,s)):s instanceof iw?(ve(vp,"Document no longer in limbo: "+s.key),r.Au.removeReference(s.key,e),r.Au.containsKey(s.key)||cw(r,s.key)):Oe(19791,{yu:s})}function GR(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Iu.has(s)||(ve(vp,"New document in limbo: "+t),r.Iu.add(s),_p(r))}function _p(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Re(dt.fromString(e)),s=r.mu.next();r.Eu.set(s,new LR(t)),r.du=r.du.insert(t,s),X_(r.remoteStore,new di(Xr(Qc(t.path)),s,"TargetPurposeLimboResolution",qc.ue))}}async function Ml(r,e,t){const s=Ue(r),o=[],l=[],d=[];s.Pu.isEmpty()||(s.Pu.forEach((f,m)=>{d.push(s.gu(m,e,t).then(v=>{var I;if((v||t)&&s.isPrimaryClient){const E=v?!v.fromCache:(I=t==null?void 0:t.targetChanges.get(m.targetId))===null||I===void 0?void 0:I.current;s.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(v){o.push(v);const E=op.Es(m.targetId,v);l.push(E)}}))}),await Promise.all(d),s.hu.J_(o),await async function(m,v){const I=Ue(m);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>J.forEach(v,C=>J.forEach(C.Is,j=>I.persistence.referenceDelegate.addReference(E,C.targetId,j)).next(()=>J.forEach(C.ds,j=>I.persistence.referenceDelegate.removeReference(E,C.targetId,j)))))}catch(E){if(!ya(E))throw E;ve(ap,"Failed to update sequence numbers: "+E)}for(const E of v){const C=E.targetId;if(!E.fromCache){const j=I.Fs.get(C),$=j.snapshotVersion,H=j.withLastLimboFreeSnapshotVersion($);I.Fs=I.Fs.insert(C,H)}}}(s.localStore,l))}async function KR(r,e){const t=Ue(r);if(!t.currentUser.isEqual(e)){ve(vp,"User change. New user:",e.toKey());const s=await K_(t.localStore,e);t.currentUser=e,function(l,d){l.Vu.forEach(f=>{f.forEach(m=>{m.reject(new ye(Y.CANCELLED,d))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ml(t,s.Bs)}}function QR(r,e){const t=Ue(r),s=t.Eu.get(e);if(s&&s.lu)return Ge().add(s.key);{let o=Ge();const l=t.Tu.get(e);if(!l)return o;for(const d of l){const f=t.Pu.get(d);o=o.unionWith(f.view.tu)}return o}}function dw(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=aw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HR.bind(null,e),e.hu.J_=NR.bind(null,e.eventManager),e.hu.pu=DR.bind(null,e.eventManager),e}function YR(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qR.bind(null,e),e}class Oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=td(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return eR(this.persistence,new JA,e.initialUser,this.serializer)}Du(e){return new G_(ip.Vi,this.serializer)}bu(e){return new aR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oc.provider={build:()=>new Oc};class JR extends Oc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){nt(this.persistence.referenceDelegate instanceof Dc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new LA(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new G_(s=>Dc.Vi(s,t),this.serializer)}}class Sf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ev(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=KR.bind(null,this.syncEngine),await PR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kR}()}createDatastore(e){const t=td(e.databaseInfo.databaseId),s=function(l){return new hR(l)}(e.databaseInfo);return function(l,d,f,m){return new gR(l,d,f,m)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,d,f){return new vR(s,o,l,d,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Ev(this.syncEngine,t,0),function(){return mv.C()?new mv:new lR}())}createSyncEngine(e,t){return function(o,l,d,f,m,v,I){const E=new jR(o,l,d,f,m,v);return I&&(E.fu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ue(o);ve(no,"RemoteStore shutting down."),l.Ia.add(5),await jl(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Sf.provider={build:()=>new Sf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Cs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class XR{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=yn.UNAUTHENTICATED,this.clientId=Gf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async d=>{ve(Si,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(ve(Si,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=fp(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Yh(r,e){r.asyncQueue.verifyOperationInProgress(),ve(Si,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await K_(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>{_i("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{ve("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{_i("Terminating Firestore due to IndexedDb database deletion failed",o)})}),r._offlineComponents=e}async function Tv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await ZR(r);ve(Si,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>yv(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>yv(e.remoteStore,o)),r._onlineComponents=e}async function ZR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(Si,"Using user provided OfflineComponentProvider");try{await Yh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;_i("Error using user provided cache. Falling back to memory cache: "+t),await Yh(r,new Oc)}}else ve(Si,"Using default OfflineComponentProvider"),await Yh(r,new JR(void 0));return r._offlineComponents}async function hw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(Si,"Using user provided OnlineComponentProvider"),await Tv(r,r._uninitializedComponentsProvider._online)):(ve(Si,"Using default OnlineComponentProvider"),await Tv(r,new Sf))),r._onlineComponents}function eP(r){return hw(r).then(e=>e.syncEngine)}async function Lc(r){const e=await hw(r),t=e.eventManager;return t.onListen=MR.bind(null,e.syncEngine),t.onUnlisten=zR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=BR.bind(null,e.syncEngine),t}function tP(r,e,t={}){const s=new Is;return r.asyncQueue.enqueueAndForget(async()=>function(l,d,f,m,v){const I=new wp({next:C=>{I.Ou(),d.enqueueAndForget(()=>mp(l,E));const j=C.docs.has(f);!j&&C.fromCache?v.reject(new ye(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&C.fromCache&&m&&m.source==="server"?v.reject(new ye(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(C)},error:C=>v.reject(C)}),E=new yp(Qc(f.path),I,{includeMetadataChanges:!0,ka:!0});return pp(l,E)}(await Lc(r),r.asyncQueue,e,t,s)),s.promise}function nP(r,e,t={}){const s=new Is;return r.asyncQueue.enqueueAndForget(async()=>function(l,d,f,m,v){const I=new wp({next:C=>{I.Ou(),d.enqueueAndForget(()=>mp(l,E)),C.fromCache&&m.source==="server"?v.reject(new ye(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(C)},error:C=>v.reject(C)}),E=new yp(f,I,{includeMetadataChanges:!0,ka:!0});return pp(l,E)}(await Lc(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="firestore.googleapis.com",Sv=!0;class Cv{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pw,this.ssl=Sv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Sv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VA)throw new ye(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_C("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ye(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ye(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ye(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sd{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new cC;switch(s.type){case"firstParty":return new pC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=xv.get(t);s&&(ve("ComponentProvider","Removing Datastore"),xv.delete(t),s.terminate())}(this),Promise.resolve()}}function rP(r,e,t,s={}){var o;r=gr(r,sd);const l=da(e),d=r._getSettings(),f=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),m=`${e}:${t}`;l&&(s0(`https://${m}`),i0("Firestore",!0)),d.host!==pw&&d.host!==m&&_i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:m,ssl:l,emulatorOptions:s});if(!Zi(v,f)&&(r._setSettings(v),s.mockUserToken)){let I,E;if(typeof s.mockUserToken=="string")I=s.mockUserToken,E=yn.MOCK_USER;else{I=ZI(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new ye(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new yn(C)}r._authCredentials=new dC(new r_(I,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new co(this.firestore,e,this._query)}}class Ct{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Dl(t,Ct._jsonSchema))return new Ct(e,s||null,new Re(dt.fromString(t.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:Lt("string",Ct._jsonSchemaVersion),referencePath:Lt("string")};class yi extends co{constructor(e,t,s){super(e,t,Qc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new Re(e))}withConverter(e){return new yi(this.firestore,e,this._path)}}function Cn(r,e,...t){if(r=Mt(r),i_("collection","path",e),r instanceof sd){const s=dt.fromString(e,...t);return Fy(s),new yi(r,null,s)}{if(!(r instanceof Ct||r instanceof yi))throw new ye(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(dt.fromString(e,...t));return Fy(s),new yi(r.firestore,null,s)}}function fr(r,e,...t){if(r=Mt(r),arguments.length===1&&(e=Gf.newId()),i_("doc","path",e),r instanceof sd){const s=dt.fromString(e,...t);return My(s),new Ct(r,null,new Re(s))}{if(!(r instanceof Ct||r instanceof yi))throw new ye(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(dt.fromString(e,...t));return My(s),new Ct(r.firestore,r instanceof yi?r.converter:null,new Re(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="AsyncQueue";class Rv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Y_(this,"async_queue_retry"),this.oc=()=>{const s=Qh();s&&ve(Av,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Qh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Qh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Is;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ya(e))throw e;ve(Av,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,Cs("INTERNAL UNHANDLED ERROR: ",Pv(s)),s}).then(s=>(this.nc=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=hp.createAndSchedule(this,e,t,s,l=>this.lc(l));return this.ec.push(o),o}ac(){this.tc&&Oe(47125,{hc:Pv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Pv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class Ci extends sd{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Rv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rv(e),this._firestoreClient=void 0,await e}}}function sP(r,e){const t=typeof r=="object"?r:u0(),s=typeof r=="string"?r:Cc,o=Nf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=JI("firestore");l&&rP(o,...l)}return o}function id(r){if(r._terminated)throw new ye(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||iP(r),r._firestoreClient}function iP(r){var e,t,s;const o=r._freezeSettings(),l=function(f,m,v,I){return new bC(f,m,v,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,fw(I.experimentalLongPollingOptions),I.useFetchStreams,I.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new XR(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mr(an.fromBase64String(e))}catch(t){throw new ye(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mr(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dl(e,mr._jsonSchema))return mr.fromBase64String(e.bytes)}}mr._jsonSchemaVersion="firestore/bytes/1.0",mr._jsonSchema={type:Lt("string",mr._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:es._jsonSchemaVersion}}static fromJSON(e){if(Dl(e,es._jsonSchema))return new es(e.latitude,e.longitude)}}es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:Lt("string",es._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dl(e,ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new ts(e.vectorValues);throw new ye(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ts._jsonSchemaVersion="firestore/vectorValue/1.0",ts._jsonSchema={type:Lt("string",ts._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=/^__.*__$/;class aP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new lo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ol(e,this.data,t,this.fieldTransforms)}}function gw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ec:r})}}class Ip{constructor(e,t,s,o,l,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ip(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return jc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(gw(this.Ec)&&oP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class lP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||td(e)}Dc(e,t,s,o=!1){return new Ip({Ec:e,methodName:t,bc:s,path:on.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tp(r){const e=r._freezeSettings(),t=td(r._databaseId);return new lP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function yw(r,e,t,s,o,l={}){const d=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);ww("Data must be an object, but it was:",d,s);const f=vw(s,d);let m,v;if(l.merge)m=new Vr(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const I=[];for(const E of l.mergeFields){const C=cP(e,E,t);if(!d.contains(C))throw new ye(Y.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);hP(I,C)||I.push(C)}m=new Vr(I),v=d.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,v=d.fieldTransforms;return new aP(new pr(f),m,v)}function uP(r,e,t,s=!1){return xp(t,r.Dc(s?4:3,e))}function xp(r,e){if(_w(r=Mt(r)))return ww("Unsupported field value:",e,r),vw(r,e);if(r instanceof mw)return function(s,o){if(!gw(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,o){const l=[];let d=0;for(const f of s){let m=xp(f,o.yc(d));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),d++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=Mt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ZC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=mt.fromDate(s);return{timestampValue:Nc(o.serializer,l)}}if(s instanceof mt){const l=new mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Nc(o.serializer,l)}}if(s instanceof es)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof mr)return{bytesValue:F_(o.serializer,s._byteString)};if(s instanceof Ct){const l=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:rp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ts)return function(d,f){return{mapValue:{fields:{[p_]:{stringValue:m_},[Ac]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw f.wc("VectorValues must only contain numeric values.");return Zf(f.serializer,v)})}}}}}}(s,o);throw o.wc(`Unsupported field value: ${Wc(s)}`)}(r,e)}function vw(r,e){const t={};return l_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oo(r,(s,o)=>{const l=xp(o,e.Vc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function _w(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof mt||r instanceof es||r instanceof mr||r instanceof Ct||r instanceof mw||r instanceof ts)}function ww(r,e,t){if(!_w(t)||!o_(t)){const s=Wc(t);throw s==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+s)}}function cP(r,e,t){if((e=Mt(e))instanceof Ep)return e._internalPath;if(typeof e=="string")return Ew(r,e);throw jc("Field path arguments must be of type string or ",r,!1,void 0,t)}const dP=new RegExp("[~\\*/\\[\\]]");function Ew(r,e,t){if(e.search(dP)>=0)throw jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Ep(...e.split("."))._internalPath}catch{throw jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function jc(r,e,t,s,o){const l=s&&!s.isEmpty(),d=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||d)&&(m+=" (found",l&&(m+=` in field ${s}`),d&&(m+=` in document ${o}`),m+=")"),new ye(Y.INVALID_ARGUMENT,f+r+m)}function hP(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class fP extends Iw{data(){return super.data()}}function Sp(r,e){return typeof e=="string"?Ew(r,e):e instanceof Ep?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cp{}class pP extends Cp{}function Cf(r,e,...t){let s=[];e instanceof Cp&&s.push(e),s=s.concat(t),function(l){const d=l.filter(m=>m instanceof Ap).length,f=l.filter(m=>m instanceof od).length;if(d>1||d>0&&f>0)throw new ye(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class od extends pP{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new od(e,t,s)}_apply(e){const t=this._parse(e);return xw(e._query,t),new co(e.firestore,e.converter,mf(e._query,t))}_parse(e){const t=Tp(e.firestore);return function(l,d,f,m,v,I,E){let C;if(v.isKeyField()){if(I==="array-contains"||I==="array-contains-any")throw new ye(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if(I==="in"||I==="not-in"){Nv(E,I);const $=[];for(const H of E)$.push(kv(m,l,H));C={arrayValue:{values:$}}}else C=kv(m,l,E)}else I!=="in"&&I!=="not-in"&&I!=="array-contains-any"||Nv(E,I),C=uP(f,d,E,I==="in"||I==="not-in");return Ot.create(v,I,C)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function mP(r,e,t){const s=e,o=Sp("where",r);return od._create(o,s,t)}class Ap extends Cp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ap(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:jr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let d=o;const f=l.getFlattenedFilters();for(const m of f)xw(d,m),d=mf(d,m)}(e._query,t),new co(e.firestore,e.converter,mf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function kv(r,e,t){if(typeof(t=Mt(t))=="string"){if(t==="")throw new ye(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T_(e)&&t.indexOf("/")!==-1)throw new ye(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(dt.fromString(t));if(!Re.isDocumentKey(s))throw new ye(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Gy(r,new Re(s))}if(t instanceof Ct)return Gy(r,t._key);throw new ye(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wc(t)}.`)}function Nv(r,e){if(!Array.isArray(r)||r.length===0)throw new ye(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xw(r,e){const t=function(o,l){for(const d of o)for(const f of d.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ye(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class gP{convertValue(e,t="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return oo(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Ac].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>St(d.doubleValue));return new ts(l)}convertGeoPoint(e){return new es(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Kc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Tl(e));default:return null}}convertTimestamp(e){const t=Ei(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=dt.fromString(e);nt(W_(s),9688,{name:e});const o=new xl(s.get(1),s.get(3)),l=new Re(s.popFirst(5));return o.isEqual(t)||Cs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class al{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ji extends Iw{constructor(e,t,s,o,l,d){super(e,t,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Sp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ji._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ji._jsonSchema={type:Lt("string",Ji._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class mc extends Ji{data(e={}){return super.data(e)}}class Xi{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new al(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new mc(this._firestore,this._userDataWriter,s.key,s,new al(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(f=>{const m=new mc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new al(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new mc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new al(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,I=-1;return f.type!==0&&(v=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),I=d.indexOf(f.doc.key)),{type:yP(f.type),doc:m,oldIndex:v,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(r){r=gr(r,Ct);const e=gr(r.firestore,Ci);return tP(id(e),r._key).then(t=>Cw(e,r,t))}Xi._jsonSchemaVersion="firestore/querySnapshot/1.0",Xi._jsonSchema={type:Lt("string",Xi._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Rp extends gP{constructor(e){super(),this.firestore=e}convertBytes(e){return new mr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function Dv(r){r=gr(r,co);const e=gr(r.firestore,Ci),t=id(e),s=new Rp(e);return Tw(r._query),nP(t,r._query).then(o=>new Xi(e,s,r,o))}function Jr(r,e,t){r=gr(r,Ct);const s=gr(r.firestore,Ci),o=Sw(r.converter,e,t);return Pp(s,[yw(Tp(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Lr.none())])}function Mc(r){return Pp(gr(r.firestore,Ci),[new ep(r._key,Lr.none())])}function Vv(r,e){const t=gr(r.firestore,Ci),s=fr(r),o=Sw(r.converter,e);return Pp(t,[yw(Tp(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Lr.exists(!1))]).then(()=>s)}function li(r,...e){var t,s,o;r=Mt(r);let l={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||bv(e[d])||(l=e[d++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(bv(e[d])){const E=e[d];e[d]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[d+1]=(s=E.error)===null||s===void 0?void 0:s.bind(E),e[d+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let m,v,I;if(r instanceof Ct)v=gr(r.firestore,Ci),I=Qc(r._key.path),m={next:E=>{e[d]&&e[d](Cw(v,r,E))},error:e[d+1],complete:e[d+2]};else{const E=gr(r,co);v=gr(E.firestore,Ci),I=E._query;const C=new Rp(v);m={next:j=>{e[d]&&e[d](new Xi(v,C,E,j))},error:e[d+1],complete:e[d+2]},Tw(r._query)}return function(C,j,$,H){const M=new wp(H),ee=new yp(j,M,$);return C.asyncQueue.enqueueAndForget(async()=>pp(await Lc(C),ee)),()=>{M.Ou(),C.asyncQueue.enqueueAndForget(async()=>mp(await Lc(C),ee))}}(id(v),I,f,m)}function Pp(r,e){return function(s,o){const l=new Is;return s.asyncQueue.enqueueAndForget(async()=>$R(await eP(s),o,l)),l.promise}(id(r),e)}function Cw(r,e,t){const s=t.docs.get(e._key),o=new Rp(r);return new Ji(r,o,e._key,s,new al(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ma=o})(fa),na(new eo("firestore",(s,{instanceIdentifier:o,options:l})=>{const d=s.getProvider("app").getImmediate(),f=new Ci(new hC(s.getProvider("auth-internal")),new mC(d,s.getProvider("app-check-internal")),function(v,I){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ye(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xl(v.options.projectId,I)}(d,o),d);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),mi(Dy,Vy,e),mi(Dy,Vy,"esm2017")})();const vP=({message:r,type:e})=>{if(!r)return null;const t=e==="success"?"bg-green-100":"bg-red-100",s=e==="success"?"text-green-700":"text-red-700";return y.jsx("div",{className:`p-3 rounded-md ${t} ${s} my-4 message-box-fade show`,children:r})},_P=({onClose:r})=>{var Xt;const{signUpWithEmailPassword:e,signInWithEmailPassword:t,signInWithApple:s,linkAnonymousWithEmailPassword:o,linkAnonymousWithApple:l,auth:d,currentUserId:f,signInWithGoogle:m,db:v,appId:I}=V.useContext(Fl),[E,C]=V.useState(!0),[j,$]=V.useState(""),[H,M]=V.useState(""),[ee,re]=V.useState(""),[Q,le]=V.useState("+1"),[ue,de]=V.useState(""),[N,A]=V.useState(""),[x,b]=V.useState(0),[P,D]=V.useState(null),[S,$e]=V.useState(""),[st,ot]=V.useState(!1),[ce,q]=V.useState(!1),[_e,oe]=V.useState(""),[L,K]=V.useState(""),[Te,Ae]=V.useState(""),[De,Ve]=V.useState(""),[ze,Le]=V.useState(""),[Be,Xe]=V.useState(""),[It,he]=V.useState(""),se=V.useRef(null),me=V.useRef(null),Me=V.useCallback((ie,fe)=>{de(ie),A(fe),setTimeout(()=>{de(""),A("")},5e3)},[]),Rn=(Xt=d==null?void 0:d.currentUser)==null?void 0:Xt.isAnonymous,Ft=V.useCallback(async ie=>{if(console.log("checkEmailExists: Checking email:",ie),console.log("checkEmailExists: Current auth object:",d),!d)return console.error("Firebase Auth not initialized for email check."),!1;try{const fe=await jS(d,ie);return console.log("checkEmailExists: Sign-in methods for email:",fe),fe.length>0}catch(fe){return console.error("Error checking email existence:",fe),console.error("Full error object:",JSON.stringify(fe,null,2)),!1}},[d]);V.useEffect(()=>{if(!E&&x===2&&d&&!se.current){if(console.log("AuthModal: Initializing reCAPTCHA Verifier..."),typeof window.grecaptcha>"u"||!window.grecaptcha.ready){console.warn("AuthModal: grecaptcha script not fully loaded yet. Retrying initialization...");const ie=setTimeout(()=>{b(fe=>fe)},500);return()=>clearTimeout(ie)}window.grecaptcha.ready(()=>{if(se.current){console.log("AuthModal: reCAPTCHA Verifier already exists, skipping re-initialization.");return}console.log("AuthModal: grecaptcha is ready. Creating RecaptchaVerifier...");try{const ie=new q0(d,"recaptcha-container",{size:"invisible",callback:fe=>{console.log("AuthModal: reCAPTCHA callback fired (solved):",fe)},"expired-callback":()=>{console.log("AuthModal: reCAPTCHA expired."),Me("Verification expired. Please try again.","error"),D(null)},"error-callback":fe=>{console.error("AuthModal: reCAPTCHA error callback:",fe),Me("Verification error. Please try again.","error"),D(null)}});se.current=ie,ie.render().then(fe=>{console.log("AuthModal: reCAPTCHA rendered with widget ID:",fe),me.current=fe}).catch(fe=>{console.error("AuthModal: Error rendering reCAPTCHA:",fe),Me("Failed to initialize verification. Please refresh.","error"),se.current=null,me.current=null})}catch(ie){console.error("AuthModal: Error creating RecaptchaVerifier instance:",ie),Me("Failed to initialize verification. Check console.","error")}})}return()=>{se.current&&(console.log("AuthModal: Cleaning up reCAPTCHA Verifier on component unmount."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&me.current!==null&&window.grecaptcha.reset(me.current),se.current=null,me.current=null)}},[E,x,d,Me]);const Pn=V.useCallback(async()=>{if(de(""),Ve(""),he(""),!Be.trim()){he("Please enter a username.");return}if(!Q.trim()){Ve("Please enter your phone number.");return}if(!Q.startsWith("+1")||Q.trim().length<10){Ve('Phone number must start with "+1" and include at least 7 digits after.');return}if(!d){Me("Authentication service not ready.","error");return}if(!se.current){Me("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available.");return}ot(!0);try{se.current.size==="invisible"&&me.current!==null&&await window.grecaptcha.execute(me.current);const ie=await h1(d,Q,se.current);D(ie),Me("Verification code sent! Please check your phone.","success")}catch(ie){console.error("Error sending OTP:",ie);let fe="Failed to send code. Please try again.";ie.code==="auth/invalid-phone-number"?fe="Invalid phone number format. Please ensure it includes the country code (e.g., +11234567890).":ie.code==="auth/too-many-requests"?fe="Too many requests. Please try again later.":ie.code==="auth/captcha-check-failed"&&(fe="Security check failed. Please try again."),Me(fe,"error"),D(null)}finally{ot(!1)}},[Q,Be,d,Me]),Hn=V.useCallback(async()=>{if(de(""),Le(""),!S.trim()){Le("Please enter the verification code.");return}if(!P){Me("No verification request found. Please send the code first.","error");return}q(!0);try{let ie;E?ie=await P.confirm(S):j&&H?ie=await M0(d,j,H):ie=await P.confirm(S);const fe=ie.user;if(fe&&Be.trim()&&(await FS(fe,{displayName:Be.trim()}),console.log("User display name updated after sign-up/link:",Be)),v&&fe&&I)try{await Jr(fr(v,"artifacts",I,"users",fe.uid),{email:fe.email||null,phoneNumber:Q,username:Be,createdAt:new Date},{merge:!0}),console.log("User profile with phone number and username info saved.")}catch(un){console.error("Error saving user phone number and username info:",un),Me("Account created, but failed to save phone number and username.","warning")}else console.warn("Firestore DB, user, or appId not available, phone number and username info not saved.");Me("Account created and phone number verified!","success"),se.current&&(window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&me.current!==null&&window.grecaptcha.reset(me.current),se.current=null,me.current=null),r()}catch(ie){console.error("Error verifying OTP or creating user:",ie);let fe="Failed to verify code. Please try again.";ie.code==="auth/invalid-verification-code"?fe="Invalid verification code. Please check the code and try again.":ie.code==="auth/code-expired"?fe="The verification code has expired. Please resend the code.":ie.message==="No reCAPTCHA clients."?fe="Security verification failed. Please try to send the code again.":ie.code==="auth/email-already-in-use"&&(fe="This email is already registered. Please sign in or use a different email."),Me(fe,"error"),Le("Verification failed. Please try again.")}finally{q(!1)}},[S,P,v,I,Q,Be,Me,r,d,E,j,H]),At=V.useCallback(async ie=>{if(ie.preventDefault(),de(""),oe(""),K(""),Ae(""),Ve(""),Le(""),he(""),console.log("handleNextStep: Current step BEFORE update:",x,"isLogin:",E),x===0){if(!j){oe("Please enter your email.");return}if(!Be.trim()){he("Please enter a username.");return}if(!E){const fe=await Ft(j);if(console.log("handleNextStep: Email exists check result:",fe),fe){oe("This email is already registered. Please sign in or use a different email.");return}}b(fe=>fe+1)}else if(x===1){if(!H){K("Please enter your password.");return}if(H.length<6){K("Password must be at least 6 characters long.");return}if(!ee){Ae("Please confirm your password.");return}if(H!==ee){Ae("Passwords do not match.");return}b(fe=>fe+1)}else if(x===2){if(!Q.trim()){Ve("Please enter your phone number.");return}if(!P){if(!se.current){Me("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available in handleNextStep.");return}await Pn()}}console.log("handleNextStep: Current step AFTER update:",x)},[j,H,ee,Q,Be,x,E,Ft,Pn,P,Me]),qt=V.useCallback(()=>{de(""),oe(""),K(""),Ae(""),Ve(""),Le(""),he(""),console.log("handlePrevStep: Current step BEFORE update:",x),x>0&&(b(ie=>ie-1),D(null),$e(""),x===2&&se.current&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&me.current!==null&&window.grecaptcha.reset(me.current)),console.log("handlePrevStep: Current step AFTER update:",x)},[x]),bn=async ie=>{if(ie.preventDefault(),de(""),oe(""),K(""),Ae(""),Ve(""),Le(""),he(""),E){if(!j){oe("Please enter your email.");return}if(!H){K("Please enter your password.");return}try{Rn?await o(j,H):await t(j,H),se.current&&(window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&me.current!==null&&window.grecaptcha.reset(me.current),se.current=null,me.current=null)}catch(fe){console.error("Unexpected error during sign-in process:",fe),Me(`An unexpected error occurred: ${fe.message}`,"error")}}else if(x<2)await At(ie);else if(x===2)if(P)await Hn();else{if(!se.current){Me("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available in handleAuthAction.");return}await Pn()}},ln=V.useCallback(()=>{C(ie=>!ie),$(""),M(""),re(""),le("+1"),Xe(""),de(""),A(""),b(0),D(null),$e(""),oe(""),K(""),Ae(""),Ve(""),Le(""),he(""),se.current&&(console.log("AuthModal: Clearing and deleting reCAPTCHA Verifier on mode toggle."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&me.current!==null&&window.grecaptcha.reset(me.current),se.current=null,me.current=null)},[]),kn=V.useCallback(()=>{se.current&&(console.log("AuthModal: Cleaning up reCAPTCHA Verifier on modal close."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&me.current!==null&&window.grecaptcha.reset(me.current),se.current=null,me.current=null),r()},[r]);return y.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4 font-inter",children:y.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md relative animate-scale-in overflow-y-auto",children:[" ",y.jsx("button",{onClick:kn,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold transition-transform duration-200 transform hover:scale-110",children:"×"}),y.jsx("h2",{className:"text-3xl font-extrabold text-gray-800 mb-6 text-center",children:E?"Sign In":"Sign Up"}),ue&&y.jsx("div",{className:`p-3 mb-4 rounded-md text-center text-sm font-medium
                        ${N==="error"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ue}),y.jsxs("form",{onSubmit:bn,className:"space-y-4 flex flex-col items-center",children:[y.jsxs("div",{className:"w-full overflow-hidden",children:[" ",y.jsxs("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${E?0:x*100}%)`},children:[E&&y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4 py-4",children:[" ",y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Email"}),y.jsx("input",{type:"email",id:"email",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${_e?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com",value:j,onChange:ie=>{$(ie.target.value),oe("")}}),_e&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:_e})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Password"}),y.jsx("input",{type:"password",id:"password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${L?"border-red-500":"border-gray-300"}`,placeholder:"********",value:H,onChange:ie=>{M(ie.target.value),K("")}}),L&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:L})]})]}),!E&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4 py-4",children:[" ",y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Email"}),y.jsx("input",{type:"email",id:"email",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${_e?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com",value:j,onChange:ie=>{$(ie.target.value),oe("")}}),_e&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:_e})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"username-email-signup",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Username"}),y.jsx("input",{type:"text",id:"username-email-signup",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${It?"border-red-500":"border-gray-300"}`,placeholder:"Choose a username",value:Be,onChange:ie=>{Xe(ie.target.value),he("")}}),It&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:It})]})]}),y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4 py-4",children:[" ",y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Password"}),y.jsx("input",{type:"password",id:"password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${L?"border-red-500":"border-gray-300"}`,placeholder:"********",value:H,onChange:ie=>{M(ie.target.value),K("")}}),L&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:L})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"confirm-password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Confirm Password"}),y.jsx("input",{type:"password",id:"confirm-password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${Te?"border-red-500":"border-gray-300"}`,placeholder:"********",value:ee,onChange:ie=>{re(ie.target.value),Ae("")}}),Te&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:Te})]})]}),y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4 py-4",children:[" ",P?y.jsxs("div",{className:"relative",children:[y.jsx("label",{htmlFor:"otp",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Enter Verification Code"}),y.jsx("input",{type:"text",id:"otp",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${ze?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 123456",value:S,onChange:ie=>{$e(ie.target.value),Le("")},disabled:ce}),ze&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:ze}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-left",children:["Code sent to ",Q,"."]}),y.jsx("button",{type:"button",onClick:Pn,disabled:st||ce,className:"w-full bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105 mt-2",children:st?"Sending...":"Resend Code"})]}):y.jsxs("div",{className:"relative",children:[y.jsx("label",{htmlFor:"phoneNumber",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Phone Number"}),y.jsx("input",{type:"tel",id:"phoneNumber",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${De?"border-red-500":"border-gray-300"}`,placeholder:"e.g., +11234567890",value:Q,onChange:ie=>{const fe=ie.target.value;fe.startsWith("+1")?le(fe==="+"?"+1":fe):le("+1"+fe.replace(/^\+?1?/,"")),Ve("")},disabled:st}),y.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"For human verification purposes only! Include country code (e.g., +1)."}),y.jsx("div",{id:"recaptcha-container",className:"mt-4"})]})]})]})]})]}),!E&&y.jsx("div",{className:"flex justify-center space-x-2 mt-4",children:[0,1,2].map(ie=>y.jsx("span",{className:`block w-3 h-3 rounded-full transition-colors duration-300
                                        ${x===ie?"bg-[#CC5500] scale-125":"bg-gray-300 hover:bg-gray-400 cursor-pointer"}`,onClick:()=>b(ie),role:"button",tabIndex:"0","aria-label":`Go to step ${ie+1}`},ie))}),y.jsxs("div",{className:"flex justify-between items-center mt-4 w-full px-4",children:[!E&&x>0&&y.jsx("button",{type:"button",onClick:qt,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105 min-w-[100px]",children:"Previous"}),!E&&x===0&&y.jsx("div",{className:"flex-grow"}),y.jsx("button",{type:"submit",className:`font-bold py-3 px-6 rounded-full transition duration-300 shadow-lg hover:shadow-xl transform hover:scale-105
                                ${E?"bg-[#FFDEB5] text-gray-800 hover:bg-[#FFC982] w-full":"bg-[#CC5500] text-white hover:bg-[#A84500] w-auto ml-auto"}`,disabled:E&&(st||ce)||!E&&x===2&&!P&&st||!E&&x===2&&P&&ce,children:E?"Sign In":x===0||x===1?"Next":x===2&&!P?st?"Sending Code...":"Send Code":ce?"Verifying...":"Verify Code"})]})]}),y.jsxs("div",{className:"mt-6 text-center",children:[y.jsxs("p",{className:"text-gray-600",children:[E?"Don't have an account? ":"Already have an account? ",y.jsx("button",{onClick:ln,className:"text-[#CC5500] hover:underline font-semibold transition-colors duration-200",children:E?"Sign Up":"Sign In"})]}),E&&y.jsx("button",{onClick:()=>Me("Password reset functionality not yet implemented.","info"),className:"text-[#CC5500] hover:underline text-sm mt-2 transition-colors duration-200",children:"Forgot Password?"})]})]})})},wP=["fuck","shit","asshole","bitch","cunt","damn","hell"],Fc=250,EP=["Certified Nursing Assistant (CNA)","Licensed Practical Nurse (LPN) / Licensed Vocational Nurse (LVN)","Registered Nurse (RN)","Nurse Practitioner (NP)","Family Nurse Practitioner (FNP)","Adult-Gerontology Nurse Practitioner (AGNP)","Pediatric Nurse Practitioner (PNP)","Psychiatric Mental Health Nurse Practitioner (PMHNP)","Acute Care Nurse Practitioner (ACNP)","Women's Health Nurse Practitioner (WHNP)","Certified Registered Nurse Anesthetist (CRNA)","Clinical Nurse Specialist (CNS)","Certified Nurse-Midwife (CNM)","Cardiac Nurse","Critical Care Nurse (ICU Nurse)","Emergency Nurse (ER Nurse)","Oncology Nurse","Pediatric Nurse","Labor and Delivery Nurse","Neonatal Intensive Care Unit (NICU) Nurse","Medical-Surgical Nurse","Geriatric Nurse","Psychiatric/Mental Health Nurse","Home Health Nurse","Public Health Nurse","School Nurse","Perioperative Nurse (Operating Room Nurse)","Rehabilitation Nurse","Hospice Nurse / Palliative Care Nurse","Forensic Nurse","Travel Nurse","Infusion Nurse","Nephrology Nurse","Diabetic Nurse","Dermatology Nurse","Gastroenterology Nurse","Orthopedic Nurse","Urology Nurse","Wound Care Nurse","Ostomy Care Nurse","Informatics Nurse","Research Nurse","Case Management Nurse","Nurse Educator","Nurse Administrator/Manager","Occupational Health Nurse","Flight Nurse / Transport Nurse","Correctional Nurse","IV Therapy Nurse","Transplant Nurse","Genetics Nurse","Pain Management Nurse","Military Nurse","Ambulatory Care Nurse","Endoscopy Nurse","Plastic Surgery Nurse","Rural Health Nurse","Parish Nurse / Faith Community Nurse","Camp Nurse","Hyperbaric Nurse","Legal Nurse Consultant","Integrative Health Nurse"],Wo=["Select your nursing field...",...EP.sort()];function Ov(r){const e=r.toLowerCase();for(const t of wP)if(e.includes(t))return{isValid:!1,message:"Content contains inappropriate language."};return r.length>Fc?{isValid:!1,message:`Content exceeds ${Fc} character limit.`}:{isValid:!0,message:"Content is valid."}}let IP=class extends ui.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ReviewsHubPage ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(10vh-120px)] p-4 bg-red-100 text-red-800 rounded-lg shadow-md",children:[y.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong."}),y.jsx("p",{className:"text-lg text-center mb-2",children:"We're sorry, but there was an error loading this section."}),y.jsx("p",{className:"text-sm text-red-600 text-center",children:this.state.error&&this.state.error.toString()}),y.jsxs("details",{className:"mt-4 text-left text-sm p-2 bg-red-50 rounded-md",children:[y.jsx("summary",{className:"font-semibold cursor-pointer",children:"Error Details"}),y.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words text-red-700",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),y.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"mt-6 px-6 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-colors",children:"Try Again"})]}):this.props.children}};const Aw=()=>{const{db:r,auth:e,currentUserId:t,currentUserIsAnonymous:s,appId:o,showMessage:l,setShowAuthModal:d}=V.useContext(Fl),[f,m]=V.useState(""),[v,I]=V.useState([]),[E,C]=V.useState([]),[j,$]=V.useState(!0),[H,M]=V.useState(!1),[ee,re]=V.useState(!1),[Q,le]=V.useState(20),[ue,de]=V.useState(null),[N,A]=V.useState(""),[x,b]=V.useState([]),[P,D]=V.useState([]),[S,$e]=V.useState(!1),[st,ot]=V.useState(!1),[ce,q]=V.useState(null),[_e,oe]=V.useState([]),[L,K]=V.useState(!1),[Te,Ae]=V.useState(!1),[De,Ve]=V.useState(""),[ze,Le]=V.useState(Wo[0]),[Be,Xe]=V.useState(""),[It,he]=V.useState([]),[se,me]=V.useState(!1),[Me,Rn]=V.useState({}),[Ft,Pn]=V.useState({}),[Hn,At]=V.useState({}),[qt,bn]=V.useState(!1),[ln,kn]=V.useState(""),[Xt,ie]=V.useState(""),[fe,un]=V.useState(!1),[Mr,_r]=V.useState(""),[er,Fr]=V.useState(""),[rs,tr]=V.useState(!0),ss=ui.useRef(null),Wn=ui.useRef(null),bs=ui.useRef(null),Ur=ui.useRef(null);console.log("ReviewsHubPage: Component rendered."),V.useEffect(()=>{let G=()=>{};if(console.log("ReviewsHubPage: useEffect for hospital onSnapshot. DB, AppId Ready:",!!r,!!o),r&&o){$(!0),M(!1);const we=Cn(r,`artifacts/${o}/public/data/hospitals`);G=li(we,Pe=>{console.log("ReviewsHubPage: onSnapshot triggered for hospitals.");const be=[];Pe.forEach(Ee=>{const Qe=Ee.data();Qe.name&&be.push({id:Ee.id,name:Qe.name,location:Qe.location||""})}),be.sort((Ee,Qe)=>Ee.name.localeCompare(Qe.name)),console.log("ReviewsHubPage: Fetched Hospitals from snapshot:",be.length),I(be),$(!1),M(be.length===0)},Pe=>{console.error("ReviewsHubPage: Error fetching hospitals with onSnapshot:",Pe),l("Error loading hospitals.","error"),$(!1),M(!0)})}else $(!0),I([]),C([]),M(!1),re(!1);return()=>{console.log("ReviewsHubPage: Cleaning up hospital onSnapshot listener."),G()}},[r,o,l]);const ks=V.useCallback(async G=>{if(G.preventDefault(),!t||s){l("You must be logged in to add a hospital. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready to add a hospital.","error");return}if(!ln.trim()||!Xt.trim()){l("Please enter both hospital name and location.","error");return}try{const Pe={id:Date.now().toString(),name:ln.trim(),location:Xt.trim()};I(Ee=>[...Ee,Pe].sort((Qe,Rt)=>Qe.name.localeCompare(Rt.name))),kn(""),ie(""),bn(!1);const be=fr(Cn(r,`artifacts/${o}/public/data/hospitals`));await Jr(be,{name:Pe.name,location:Pe.location,createdAt:new Date().toISOString(),createdBy:t}),l("Hospital added successfully! You can now add doctors to it.","success"),bs.current&&setTimeout(()=>{const Ee=document.querySelector(`button.bg-gray-100[data-hospital-name="${Pe.name}"]`);Ee&&Ee.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(we){console.error("ReviewsHubPage: Error adding hospital:",we),l(`Error adding hospital: ${we.message}`,"error"),I(Pe=>Pe.filter(be=>be.id!==tempId))}},[t,s,r,o,ln,Xt,l,d]);V.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering hospitals triggered. HospitalInput:",f,"CurrentDisplayCount:",Q);const G=f.trim().toLowerCase(),we=v.filter(Pe=>Pe.name.toLowerCase().includes(G)||Pe.location&&Pe.location.toLowerCase().includes(G));C(we.slice(0,Q)),re(we.length>Q),M(we.length===0&&!j)},[v,f,Q,j]);const Ns=V.useCallback(()=>{le(G=>G+20)},[]),Nn=V.useCallback(async G=>{if(console.log("ReviewsHubPage: handleHospitalSelect called for hospital:",G.name),de(G),console.log("ReviewsHubPage: Populating hospitalInput with:",G.name),m(G.name),A(""),$e(!0),ot(!1),b([]),D([]),un(!1),q(null),!r||!o||!G.id){l("Firebase or hospital ID missing for fetching doctors.","error"),$e(!1),ot(!0);return}const we=Cn(r,`artifacts/${o}/public/data/hospitals/${G.id}/doctors`),Pe=li(we,async be=>{console.log("ReviewsHubPage: onSnapshot triggered for doctors.");const Ee=[];for(const et of be.docs){const at=et.data();if(at.name)try{const Tt=`artifacts/${o}/public/data/hospitals/${G.id}/doctors/${et.id}/reviews`;console.log("ReviewsHubPage: Attempting to read reviews from:",Tt);const lt=Cf(Cn(r,Tt)),Pt=await Dv(lt);console.log("ReviewsHubPage: Successfully read reviews. Count:",Pt.size);let Ut=0,cn=0,bt=0;for(const dn of Pt.docs){const En=dn.data();En.stars&&(Ut+=En.stars,cn++);const ht=`artifacts/${o}/public/data/hospitals/${G.id}/doctors/${et.id}/reviews/${dn.id}/comments`;console.log("ReviewsHubPage: Attempting to read comments from:",ht);const Zt=Cf(Cn(r,ht)),qn=await Dv(Zt);console.log("ReviewsHubPage: Successfully read comments. Count:",qn.size),bt+=qn.size}const zt=cn>0?Ut/cn:0;Ee.push({id:et.id,hospitalId:G.id,...at,averageRating:zt,numReviews:cn,numComments:bt})}catch(Tt){console.error(`ReviewsHubPage: Error during subcollection fetch for doctor ID ${et.id}:`,Tt),Ee.push({id:et.id,hospitalId:G.id,...at,averageRating:0,numReviews:0,numComments:0,error:`Error loading reviews/comments: ${Tt.message}`})}}Ee.sort((et,at)=>et.name.localeCompare(at.name)),console.log("ReviewsHubPage: Fetched Doctors from snapshot for selected hospital:",Ee.length),b(Ee),$e(!1),ot(Ee.length===0);const Qe=N.trim().toLowerCase(),Rt=Ee.filter(et=>et.name.toLowerCase().includes(Qe)||et.specialty&&et.specialty.toLowerCase().includes(Qe));D(Rt)},be=>{console.error("ReviewsHubPage: Error fetching doctors with onSnapshot (outer listener):",be),l("Error loading doctors.","error"),$e(!1),ot(!0)});return()=>{console.log("ReviewsHubPage: Cleaning up doctor onSnapshot listener for previous hospital."),Pe()}},[r,o,l,N]);V.useEffect(()=>{ue&&ss.current&&document.activeElement!==document.getElementById("hospital-input")&&(console.log("ReviewsHubPage: Scrolling useEffect triggered for doctor selection section."),setTimeout(()=>{requestAnimationFrame(()=>{ss.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[ue]),V.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering doctors triggered. DoctorInput:",N);const G=N.trim().toLowerCase(),we=x.filter(Pe=>Pe.name.toLowerCase().includes(G)||Pe.specialty&&Pe.specialty.toLowerCase().includes(G));D(we)},[x,N]);const nr=V.useCallback(async G=>{if(G.preventDefault(),!t||s){l("You must be logged in to add a doctor. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!ue||!ue.id){l("Please select a hospital first to add a doctor.","error");return}if(!Mr.trim()||!er.trim()){l("Please enter both doctor name and specialty.","error");return}try{const Pe={id:Date.now().toString(),hospitalId:ue.id,name:Mr.trim(),specialty:er.trim(),averageRating:0,numReviews:0,numComments:0};b(Ee=>[...Ee,Pe].sort((Qe,Rt)=>Qe.name.localeCompare(Rt.name))),_r(""),Fr(""),un(!1);const be=fr(Cn(r,`artifacts/${o}/public/data/hospitals/${ue.id}/doctors`));await Jr(be,{name:Pe.name,specialty:Pe.specialty,createdAt:new Date().toISOString(),createdBy:t}),l(`Dr. ${Pe.name} added successfully to ${ue.name}!`,"success"),Ur.current&&setTimeout(()=>{const Ee=document.querySelector(`button.bg-gray-100[data-doctor-name="${Pe.name}"]`);Ee&&Ee.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(we){console.error("ReviewsHubPage: Error adding doctor:",we),l(`Error adding doctor: ${we.message}`,"error"),b(Pe=>Pe.filter(be=>be.id!==tempId))}},[t,s,r,o,ue,Mr,er,l,d]),Ds=V.useCallback(async G=>{console.log("ReviewsHubPage: handleDoctorSelect called for doctor:",G.name),q(G),A(G.name),K(!0),Ae(!1),tr(!0),Wn.current&&(console.log("ReviewsHubPage: Scrolling to doctor reviews display section."),setTimeout(()=>{requestAnimationFrame(()=>{Wn.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[]);V.useEffect(()=>{let G=()=>{};const we={},Pe={};if(ce&&r&&o){const be=Cn(r,`artifacts/${o}/public/data/hospitals/${ce.hospitalId}/doctors/${ce.id}/reviews`);console.log("ReviewsHubPage: Setting up onSnapshot for reviewsColRef:",be.path),G=li(be,Ee=>{console.log("ReviewsHubPage: onSnapshot triggered for reviewsColRef."),K(!1);const Qe=[],Rt={},et={};Ee.forEach(at=>{const Tt=at.data(),lt=at.id,Pt=Cn(r,`artifacts/${o}/public/data/hospitals/${ce.hospitalId}/doctors/${ce.id}/reviews/${lt}/comments`);Rt[lt]=li(Pt,cn=>{const bt=cn.docs.map(zt=>({id:zt.id,...zt.data(),date:zt.data().date&&typeof zt.data().date.toDate=="function"?zt.data().date.toDate():new Date(zt.data().date)}));oe(zt=>{var En;const dn=zt.map(ht=>ht.id===lt?{...ht,comments:bt}:ht);if(!dn.some(ht=>ht.id===lt)){const ht=((En=Ee.docs.find(Zt=>Zt.id===lt))==null?void 0:En.data())||Tt;return[...dn,{...ht,id:lt,comments:bt,likes:[]}].sort((Zt,qn)=>(qn.date?qn.date.getTime():0)-(Zt.date?Zt.date.getTime():0))}return dn})});const Ut=Cn(r,`artifacts/${o}/public/data/hospitals/${ce.hospitalId}/doctors/${ce.id}/reviews/${lt}/likes`);et[lt]=li(Ut,cn=>{const bt=cn.docs.map(zt=>zt.id);oe(zt=>{var En;const dn=zt.map(ht=>ht.id===lt?{...ht,likes:bt}:ht);if(!dn.some(ht=>ht.id===lt)){const ht=((En=Ee.docs.find(Zt=>Zt.id===lt))==null?void 0:En.data())||Tt;return[...dn,{...ht,id:lt,comments:[],likes:bt}].sort((Zt,qn)=>(qn.date?qn.date.getTime():0)-(Zt.date?Zt.date.getTime():0))}return dn})}),Qe.push({id:lt,...Tt,date:Tt.date&&typeof Tt.date.toDate=="function"?Tt.date.toDate():new Date(Tt.date),comments:[],likes:[]})}),Object.keys(we).forEach(at=>{Rt[at]||we[at]()}),Object.keys(Pe).forEach(at=>{et[at]||Pe[at]()}),Object.assign(we,Rt),Object.assign(Pe,et),Qe.sort((at,Tt)=>{const lt=at.date?at.date.getTime():0;return(Tt.date?Tt.date.getTime():0)-lt}),oe(Qe),Ae(Qe.length===0),console.log("ReviewsHubPage: Reviews state updated. Current reviews count:",Qe.length)},Ee=>{console.error("ReviewsHubPage: Error fetching reviews with onSnapshot:",Ee),l("Error loading reviews.","error"),K(!1),Ae(!0)})}else oe([]),Ae(!1),K(!1);return()=>{console.log("ReviewsHubPage: Cleaning up reviews onSnapshot listener."),G(),Object.values(we).forEach(be=>be()),Object.values(Pe).forEach(be=>be())}},[ce,r,o,l]);const rr=V.useCallback(async()=>{var we,Pe;if(console.log("ReviewsHubPage: handleSubmitReview called."),!t||s){l("You must be logged in to submit a review. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!ue||!ce){l("Please select a hospital and doctor before submitting a review.","error");return}if(ze===Wo[0]||ze.trim()===""){l("Please select or type your nursing field.","error");return}const G=Ov(De);if(!G.isValid){l(G.message,"error");return}console.log("ReviewsHubPage: auth.currentUser?.displayName at submission:",(we=e.currentUser)==null?void 0:we.displayName);try{const be=Cn(r,`artifacts/${o}/public/data/hospitals/${ue.id}/doctors/${ce.id}/reviews`),Ee={stars:0,comment:De,reviewerId:t,reviewerDisplayName:((Pe=e.currentUser)==null?void 0:Pe.displayName)||`RN-${t.substring(0,5)}`,date:new Date,nursingField:ze,hospitalId:ue.id,doctorId:ce.id};console.log("ReviewsHubPage: Submitting new review data:",Ee);const Rt=(await Vv(be,Ee)).id,et=fr(r,`artifacts/${o}/users/${t}/myReviews/${Rt}`);await Jr(et,{...Ee,id:Rt,userId:t}),Ve(""),Le(Wo[0]),Xe(""),l("Review submitted successfully!","success"),console.log("ReviewsHubPage: Review submitted successfully!"),tr(!0)}catch(be){console.error("ReviewsHubPage: Error adding review: ",be),l(`Error submitting review: ${be.message}`,"error")}},[t,s,ue,ce,De,ze,r,o,l,d,e]),Vs=V.useCallback(async(G,we)=>{var be;if(console.log("ReviewsHubPage: handleAddCommentToReview called for reviewId:",G),!t||s){l("You must be logged in to add a comment. Please sign up or log in.","error"),d(!0);return}if(we.trim()===""){l("Comment cannot be empty.","error");return}if(!ue||!ce){l("Hospital or doctor not selected.","error");return}const Pe=Ov(we);if(!Pe.isValid){l(Pe.message,"error");return}try{const Ee=Cn(r,`artifacts/${o}/public/data/hospitals/${ue.id}/doctors/${ce.id}/reviews/${G}/comments`),Qe={text:we,userId:t,userDisplayName:((be=e.currentUser)==null?void 0:be.displayName)||`RN-${t.substring(0,5)}`,date:new Date},et=(await Vv(Ee,Qe)).id,at=fr(r,`artifacts/${o}/users/${t}/myReviews/${G}`);if(!(await Jh(at)).exists()){const Pt=fr(r,`artifacts/${o}/public/data/hospitals/${ue.id}/doctors/${ce.id}/reviews/${G}`),Ut=await Jh(Pt);Ut.exists()&&await Jr(at,{...Ut.data(),id:G,userId:t,hospitalId:ue.id,doctorId:ce.id,comments:[],likes:[]})}const lt=Cn(r,`artifacts/${o}/users/${t}/myReviews/${G}/comments`);await Jr(fr(lt,et),Qe),Pn(Pt=>({...Pt,[G]:""})),At(Pt=>({...Pt,[G]:"Comment posted successfully!"})),setTimeout(()=>{Rn(Pt=>({...Pt,[G]:!1})),At(Pt=>({...Pt,[G]:""}))},1500)}catch(Ee){console.error("ReviewsHubPage: Error adding comment to review: ",Ee),l(`Error posting comment: ${Ee.message}`,"error")}},[t,s,ue,ce,r,o,l,d,e]),is=V.useCallback(async G=>{if(console.log("ReviewsHubPage: handleLikeReview called for reviewId:",G),!t||s){l("You must be logged in to like a review. Please sign up or log in.","info"),d(!0);return}if(!r||!o||!ue||!ce){l("Firebase or selected doctor/hospital data not ready.","error");return}try{const we=fr(r,`artifacts/${o}/public/data/hospitals/${ue.id}/doctors/${ce.id}/reviews/${G}/likes/${t}`),Pe=await Jh(we),be=fr(r,`artifacts/${o}/users/${t}/myReviews/${G}/likes/${t}`);Pe.exists()?(await Mc(we),await Mc(be),l("Review unliked.","info")):(await Jr(we,{timestamp:new Date}),await Jr(be,{timestamp:new Date}),l("Review liked!","success"))}catch(we){console.error("ReviewsHubPage: Error liking/unliking review: ",we),l(`Error processing like: ${we.message}`,"error")}},[t,s,r,o,ue,ce,l,d]);V.useCallback(()=>{if(!t||s){l("You must be logged in to write a review. Please sign up or log in.","error"),d(!0);return}if(tr(!1),Wn.current){const G=Wn.current.querySelector("#review-submission-form-container");G&&G.scrollIntoView({behavior:"smooth",block:"start"})}},[t,s,l,d]),V.useCallback(()=>{tr(!0),Wn.current&&Wn.current.scrollIntoView({behavior:"smooth",block:"start"})},[]);const Ai=G=>{const we=G.target.value;if(Xe(we),Le(we),we.length>0){const Pe=Wo.filter(be=>be.toLowerCase().includes(we.toLowerCase())&&be!==Wo[0]);he(Pe),me(!0)}else he([]),me(!1),Le(Wo[0])},wr=G=>{Xe(G),Le(G),me(!1),he([])};return y.jsx(IP,{children:y.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8 pt-20",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:[y.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:["Share Your RN",y.jsx("span",{className:"text-[#CC5500]",children:"Tea"}),"!"]}),y.jsxs("section",{id:"hospital-selection-section",className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[y.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Find Your Hospital"}),y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[y.jsx("input",{type:"text",id:"hospital-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Search for a hospital...",value:f,onChange:G=>m(G.target.value)}),y.jsx("button",{id:"search-hospital-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Hospital"})]}),y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a hospital.","info"),d(!0)):bn(G=>!G)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:qt&&t&&!s?"Hide Add Hospital Form":y.jsxs(y.Fragment,{children:["or ",y.jsx("span",{className:"text-[#CC5500]",children:"Add Hospital"})]})}),qt&&(!t||s)&&y.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a hospital."}),qt&&t&&!s&&y.jsxs("form",{ref:bs,onSubmit:ks,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[y.jsx("input",{type:"text",placeholder:"New Hospital Name",value:ln,onChange:G=>kn(G.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("input",{type:"text",placeholder:"Location (e.g., Boston, MA)",value:Xt,onChange:G=>ie(G.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Hospital"}),y.jsx("button",{type:"button",onClick:()=>bn(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]})]}),y.jsxs("div",{className:"mb-4 mt-8",children:[y.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Hospitals with reviews:"}),y.jsxs("div",{id:"hospitals-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[j&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading hospitals..."}),H&&!j&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No hospitals found yet. Be the first to add a review!"}),E.map(G=>y.jsx("button",{"data-hospital-name":G.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>Nn(G),children:G.name},G.id))]}),ee&&y.jsx("button",{id:"load-more-hospitals-btn",className:"mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 w-full btn-hover-scale",onClick:Ns,children:"Load More Hospitals"})]})]}),y.jsxs("section",{id:"doctor-selection-section",ref:ss,className:`bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${ue?"":"hidden"}`,children:[y.jsx("h2",{className:"2xl:text-3xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Select A Doctor"}),y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[y.jsx("input",{type:"text",id:"doctor-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"e.g., Dr. Sarah Lee",value:N,onChange:G=>A(G.target.value)}),y.jsx("button",{id:"select-doctor-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Doctor"})]}),y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a doctor.","info"),d(!0)):un(G=>!G)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:fe&&t&&!s?"Hide Add Doctor Form":y.jsxs(y.Fragment,{children:["or ",y.jsx("span",{className:"text-[#CC5500]",children:"Add Doctor"})]})}),fe&&(!t||s)&&y.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a doctor."}),fe&&t&&!s&&y.jsxs("form",{ref:Ur,onSubmit:nr,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[y.jsx("input",{type:"text",placeholder:"New Doctor Name",value:Mr,onChange:G=>_r(G.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("input",{type:"text",placeholder:"Specialty (e.g., Cardiologist)",value:er,onChange:G=>Fr(G.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Doctor"}),y.jsx("button",{type:"button",onClick:()=>un(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Doctors with reviews:"}),y.jsxs("div",{id:"doctors-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[S&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading doctors..."}),st&&!S&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No doctors found for this hospital yet."}),P.map(G=>y.jsx("button",{"data-doctor-name":G.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>Ds(G),children:`${G.name} (${G.numComments})`},G.id))]})]})]}),y.jsxs("section",{id:"doctor-reviews-display",ref:Wn,className:`bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${ce?"":"hidden"}`,children:[y.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:["Psst... Here's The Tea On ",y.jsx("span",{id:"display-selected-doctor-reviews",className:"text-[#CC5500] font-extrabold",children:ce&&ce.name?ce.name:""})]}),t&&!s&&rs&&y.jsx("div",{className:"text-center mb-6",children:y.jsxs("button",{onClick:()=>{!t||s?(l("Login or Sign Up to share your tea.","info"),d(!0)):tr(!1)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:["Have Some Tea? ",y.jsx("span",{className:"text-[#CC5500]",children:"Spill it!"})]})}),(!t||s)&&rs&&y.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to share your tea."}),!rs&&t&&!s&&y.jsxs("div",{id:"review-submission-form-container",className:"mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-gray-800",children:["Share Your Tea for ",y.jsx("span",{className:"text-[#CC5500]",children:ce==null?void 0:ce.name})]}),y.jsx("button",{onClick:()=>tr(!0),className:"text-gray-600 hover:text-[#CC5500] transition-colors",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]}),y.jsxs("div",{className:"mt-4",children:[y.jsxs("div",{className:"mb-4 relative",children:[y.jsx("label",{htmlFor:"nursing-field-input",className:"block text-gray-700 text-sm font-medium mb-2",children:"Which field of Nursing are you?"}),y.jsx("input",{type:"text",id:"nursing-field-input",className:"w-full p-3 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Start typing your nursing field...",value:Be,onChange:Ai,onFocus:()=>me(!0),onBlur:()=>setTimeout(()=>me(!1),100)}),se&&It.length>0&&y.jsx("ul",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto mt-1",children:It.map((G,we)=>y.jsx("li",{className:"p-3 hover:bg-gray-100 cursor-pointer text-gray-800",onMouseDown:Pe=>Pe.preventDefault(),onClick:()=>wr(G),children:G},we))})]}),y.jsx("textarea",{id:"review-text",className:"w-full p-3 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-custom-beige",rows:"6",placeholder:"Share your experience or review here...",value:De,onChange:G=>Ve(G.target.value),maxLength:Fc}),y.jsx("button",{id:"submit-review-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full btn-hover-scale",onClick:rr,children:"Submit Review"})]})]}),L&&y.jsx("p",{className:"text-gray-700 italic text-center","aria-live":"polite",children:"Loading reviews..."}),Te&&!L&&y.jsx("p",{className:"text-gray-700 italic text-center","aria-live":"polite",children:"No reviews found for this doctor yet. Be the first to add one!"}),_e.length>0&&y.jsx("div",{id:"reviews-list",className:"space-y-6",children:_e.map((G,we)=>{const Pe={"@context":"https://schema.org","@type":"Review",itemReviewed:{"@type":"Physician",name:ce==null?void 0:ce.name,url:`https://www.myrntea.com/doctors/${ce==null?void 0:ce.id}`},author:{"@type":"Person",name:G.reviewerDisplayName},reviewBody:G.comment,datePublished:G.date instanceof Date?G.date.toISOString():new Date(G.date).toISOString()},be=G.likes&&t&&G.likes.includes(t);return y.jsxs("div",{className:"p-5 rounded-xl shadow-lg border border-gray-100",style:{backgroundColor:"#fff8e7"},children:[y.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(Pe)}}),y.jsxs("div",{className:"flex items-center mb-4",children:[y.jsx("div",{className:"w-10 h-10 bg-custom-beige rounded-full flex items-center justify-center text-gray-800 font-bold text-lg mr-3 shadow-sm",children:G.reviewerDisplayName?G.reviewerDisplayName.charAt(0).toUpperCase():"RN"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-gray-800",children:G.reviewerDisplayName}),y.jsx("p",{className:"text-sm text-gray-600",children:G.nursingField}),y.jsx("p",{className:"text-xs text-gray-500",children:G.date instanceof Date?G.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]}),y.jsx("p",{className:"text-gray-800 leading-relaxed mb-4 text-base",children:G.comment}),y.jsxs("div",{className:"flex items-center gap-4 border-t border-gray-100 pt-3 mt-3",children:[y.jsxs("button",{onClick:()=>is(G.id),className:`flex items-center transition-colors ${be?"text-blue-600":"text-gray-600 hover:text-blue-500"}`,children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Like (",G.likes?G.likes.length:0,")"]}),y.jsxs("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a comment.","info"),d(!0)):Rn(Ee=>({...Ee,[G.id]:!Ee[G.id]}))},className:"flex items-center text-gray-600 hover:text-green-500 transition-colors",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Comment (",G.comments?G.comments.length:0,")"]})]}),y.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[y.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Comments on this review:"})," ",G.comments&&G.comments.length>0?y.jsx("div",{className:"space-y-3",children:G.comments.map((Ee,Qe)=>y.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[y.jsxs("div",{className:"flex items-center mb-1",children:[y.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-800 text-xs font-semibold mr-2",children:Ee.userDisplayName?Ee.userDisplayName.charAt(0).toUpperCase():"U"}),y.jsx("p",{className:"font-medium text-gray-800",children:Ee.userDisplayName}),y.jsx("p",{className:"text-xs text-gray-500 ml-auto",children:Ee.date instanceof Date?Ee.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),y.jsx("p",{className:"ml-8 text-gray-700",children:Ee.text})]},Ee.id||Ee.date.getTime()+"_"+Qe))}):y.jsx("p",{className:"text-sm text-gray-500",children:"No comments on this review yet."}),Me[G.id]&&t&&!s&&y.jsxs("div",{className:"flex mt-2",children:[y.jsx("input",{type:"text",placeholder:"Write a comment...",className:"flex-grow p-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:Ee=>{Ee.key==="Enter"&&Ee.target.value.trim()&&(Vs(G.id,Ee.target.value),Ee.target.value="")},value:Ft[G.id]||"",onChange:Ee=>Pn(Qe=>({...Qe,[G.id]:Ee.target.value})),maxLength:Fc}),y.jsx("button",{className:"submit-comment-btn bg-custom-beige text-gray-800 px-4 py-2 rounded-r-md hover:opacity-90 transition duration-200 btn-hover-scale",onClick:()=>{const Ee=Ft[G.id];Vs(G.id,Ee)},children:"Post"})]}),Hn[G.id]&&y.jsx("p",{className:"text-green-600 text-sm mt-2",children:Hn[G.id]})]})]},G.id)})})]})]})})},TP=()=>{const r=ca(),{auth:e,showMessage:t,appId:s}=V.useContext(Fl),[o,l]=V.useState(""),[d,f]=V.useState(""),[m,v]=V.useState(""),[I,E]=V.useState(""),[C,j]=V.useState(""),[$,H]=V.useState(!1);V.useEffect(()=>{if(r.hash){const ee=r.hash.substring(1),re=document.getElementById(ee),Q=document.querySelector("header");re&&setTimeout(()=>{let le=0;Q&&(le=Q.offsetHeight);const de=re.getBoundingClientRect().top+window.pageYOffset-le-10;window.scrollTo({top:de,behavior:"smooth"})},150)}},[r.hash]),V.useEffect(()=>{const ee=document.querySelectorAll(".revealable"),re=new IntersectionObserver((Q,le)=>{Q.forEach(ue=>{ue.isIntersecting&&(ue.target.style.opacity=1,le.unobserve(ue.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return ee.forEach(Q=>{re.observe(Q)}),()=>{ee.forEach(Q=>{re.unobserve(Q)})}},[]);const M=V.useCallback(async ee=>{var re;if(ee.preventDefault(),H(!0),C){console.warn("Honeypot field filled. Likely a bot submission. Discarding."),t("Thank you for your message!","success"),H(!1);return}if(!o.trim()||!d.trim()||!m.trim()||!I.trim()){t("Please fill in all required fields.","error"),H(!1);return}try{const le=`${`https://${s}.cloudfunctions.net`}/sendContactEmail`,ue=await fetch(le,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{name:o,email:d,subject:m,message:I}})}),de=await ue.json();if(ue.ok&&de.data.success)t("Your message has been sent successfully!","success"),l(""),f(""),v(""),E(""),j("");else{const N=((re=de.data)==null?void 0:re.message)||"Failed to send message. Please try again.";t(`Error: ${N}`,"error")}}catch(Q){console.error("Error submitting contact form:",Q),t(`An unexpected error occurred: ${Q.message}`,"error")}finally{H(!1)}},[o,d,m,I,C,t,s]);return y.jsxs(y.Fragment,{children:[y.jsxs("section",{id:"home",className:"relative bg-custom-beige text-gray-800 py-24 px-6 md:px-10 lg:px-16 text-center rounded-lg mx-4 mb-2 shadow-lg overflow-hidden animate-fade-in section-hover",children:[y.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:y.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[y.jsx("defs",{children:y.jsx("pattern",{id:"dot-pattern",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:y.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"#FFC982"})})}),y.jsx("rect",{x:"0",y:"0",width:"100",height:"100",fill:"url(#dot-pattern)"})]})}),y.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[y.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 leading-tight animate-fade-in-down drop-shadow-md",children:"RNTea: Real Nurse Truth"}),y.jsx("p",{className:"text-xl md:text-2xl mb-10 text-gray-700 animate-fade-in-up",children:" For nurses, by nurses — unfiltered and anonymous. Not your hospital’s suggestion box. "}),y.jsx(Nr,{to:"#how-it-works",className:"bg-white text-gray-800 hover:bg-gray-100 font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 hover:shadow-2xl border border-gray-200 animate-fade-in-up antialiased",children:" Get Started "})]})]}),y.jsx("section",{id:"about",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 mt-2 mb-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:y.jsxs("div",{className:"container mx-auto",children:[y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12 mb-20",children:[" ",y.jsx("div",{className:"md:w-1/2 flex justify-center order-2 md:order-1 animate-slide-in-left",children:y.jsx("img",{src:"/Express-collage.jpg",alt:"Collage of diverse medical professionals working together",className:"rounded-lg shadow-xl border-4 w-full max-w-md object-cover",onError:ee=>{ee.target.onerror=null,ee.target.src="https://placehold.co/400x300/F0F0F0/888888?text=Image+Not+Loaded"}})}),y.jsxs("div",{className:"md:w-1/2 text-center md:text-left order-1 md:order-2 animate-slide-in-right",children:[y.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-6",children:"Our Philosophy"}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-4 antialiased",children:"At RNTea, we believe nurses deserve a space to speak their truth. Created by RNs for RNs, our platform is a no-fluff, judgment-free zone where you can safely and anonymously share the real stories, frustrations, and unspoken realities of working alongside doctors and within the healthcare system."}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed antialiased",children:"Think of it as the breakroom—but digital, secure, and way more therapeutic. Whether you’re venting, validating, or just vibing with others who get it, RNTea is where your voice matters. Sip, spill, and scroll with the tribe that really understands what happens when the patient door closes."}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mt-4 font-semibold antialiased",children:"Now spill some RNTea!"})]})]}),y.jsxs("div",{id:"how-it-works",className:"text-center py-16 rounded-lg shadow-inner",children:[" ",y.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-12",children:"How It Works"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 max-w-5xl mx-auto",children:[" ",y.jsxs("div",{className:"group flex flex-col items-center p-6 bg-white rounded-lg shadow-md animate-fade-in transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-lg",children:[" ",y.jsx("div",{className:"mb-4",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-custom-orange transition duration-300 ease-in-out group-hover:text-[#FFDEB5]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",children:[" ",y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})]})}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-3",children:"Share anonymously"}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"Submit your experience with no names, no risk."})]}),y.jsxs("div",{className:"group flex flex-col items-center p-6 bg-white rounded-lg shadow-md animate-fade-in delay-100 transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-lg",children:[" ",y.jsx("div",{className:"mb-4",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-custom-orange transition duration-300 ease-in-out group-hover:text-[#FFDEB5]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",children:[" ",y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-3",children:"Nurses-only vibes"}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"Only nurses get full access."})]}),y.jsxs("div",{className:"group flex flex-col items-center p-6 bg-white rounded-lg shadow-md animate-fade-in delay-200 transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-lg",children:[" ",y.jsx("div",{className:"mb-4",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-custom-orange transition duration-300 ease-in-out group-hover:text-[#FFDEB5]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",children:[" ",y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]})}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-3",children:"Browse by hospital, doctor, or theme"}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"The real reviews doctors never see."})]})]}),y.jsxs("div",{className:"text-center mt-12",children:[" ",y.jsx(Nr,{to:"#full-reviews-hub",className:"bg-custom-beige text-gray-800 hover:bg-gray-100 font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 hover:shadow-2xl border border-gray-200 animate-fade-in antialiased",children:"Ready To Get Some Tea?"})]})]})]})}),y.jsx("section",{id:"full-reviews-hub",className:"relative z-10 scroll-margin-top-adjusted revealable",children:y.jsx(Aw,{})}),y.jsx("section",{id:"contact",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 my-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:y.jsxs("div",{className:"container mx-auto",children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 text-center mb-16 animate-fade-in-down",children:"Contact Us!"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[y.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-left group relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),y.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Send us a Message"}),y.jsxs("form",{onSubmit:M,children:[y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"your-name",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Name"}),y.jsx("input",{type:"text",id:"your-name",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"John Doe",value:o,onChange:ee=>l(ee.target.value),required:!0})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"your-email",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Email"}),y.jsx("input",{type:"email",id:"your-email",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"you@example.com",value:d,onChange:ee=>f(ee.target.value),required:!0})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"subject",className:"block text-gray-700 text-sm font-medium mb-2",children:"Subject"}),y.jsx("input",{type:"text",id:"subject",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Regarding a review...",value:m,onChange:ee=>v(ee.target.value),required:!0})]}),y.jsxs("div",{className:"mb-6",children:[y.jsxs("label",{htmlFor:"your-message",className:"block text-gray-700 text-sm font-medium mb-2",children:["Your Message ",y.jsx("span",{className:"text-gray-500",children:"(optional)"})]}),y.jsx("textarea",{id:"your-message",rows:"5",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Share your experience... (optional)",value:I,onChange:ee=>E(ee.target.value),required:!0})]}),y.jsxs("div",{style:{display:"none"},children:[y.jsx("label",{htmlFor:"honeypot-field",children:"Leave this field blank"}),y.jsx("input",{type:"text",id:"honeypot-field",name:"honeypot",value:C,onChange:ee=>j(ee.target.value),tabIndex:"-1",autoComplete:"off"})]}),y.jsx("button",{type:"submit",className:"bg-[#FFDEB5] hover:bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-md w-full transition duration-300 ease-in-out",disabled:$,children:$?"Sending...":"Send Message"})]})]}),y.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-right group relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),y.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Find Us"}),y.jsxs("div",{className:"mb-8",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Email Addresses"}),y.jsxs("div",{className:"flex items-center mb-3",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-700 font-medium",children:"General Questions"}),y.jsx("a",{href:"mailto:questions@rntea.com",className:"text-blue-600 hover:underline",children:"questions@rntea.com"})]})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15.75c-2.648 0-5.195-.429-7.669-1.245a2.793 2.793 0 01-1.342-2.934 11.233 11.233 0 013.744-6.436 2.922 2.922 0 011.644-1.018 10.38 10.38 0 015.894 0 2.922 2.922 0 011.644 1.018 11.233 11.233 0 013.744 6.436 2.793 2.793 0 01-1.342 2.934z"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-700 font-medium",children:"Business Inquiries"}),y.jsx("a",{href:"mailto:business@rntea.com",className:"text-blue-600 hover:underline",children:"business@rntea.com"})]})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Connect with Us"}),y.jsxs("div",{className:"flex space-x-6 justify-start",children:[y.jsx("a",{href:"https://facebook.com/rntea",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-600 hover:text-blue-700 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.271 0-4.192 1.552-4.192 4.615v3.385z"})})}),y.jsx("a",{href:"https://twitter.com/rntea_official",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-gray-800 hover:text-black transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 1200 1227",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 671.544L0 1226.37H105.866L515.414 750.206L852.076 1226.37H1200L714.163 519.284ZM569.165 687.828L521.617 619.927L144.036 79.6262H302.46L603.935 515.043L651.483 582.944L1055.03 1147.37H896.59L569.165 687.828Z"})})}),y.jsx("a",{href:"https://linkedin.com/company/rntea-4a8149371/",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-700 hover:text-blue-800 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),y.jsx("a",{href:"https://instagram.com/rntea_official",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-pink-500 hover:text-pink-600 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4c0 3.2-2.6 5.8-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8C2 4.6 4.6 2 7.8 2zm-.2 2A2.2 2.2 0 0 0 5.4 6.2v8.4c0 1.2.9 2.2 2.2 2.2h8.4a2.2 2.2 0 0 0 2.2-2.2V6.2A2.2 2.2 0 0 0 16.2 4H7.6zM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm6.5-3A1.5 1.5 0 1 0 18.5 7 1.5 1.5 0 0 0 18.5 4z"})})})]})]})]})]})]})})]})},xP=()=>{const{db:r,currentUserId:e,appId:t,showMessage:s,setShowAuthModal:o,currentUserIsAnonymous:l}=V.useContext(Fl),[d,f]=V.useState([]),[m,v]=V.useState(!0);V.useEffect(()=>{let E=()=>{};const C={},j={};if(!r||!t||!e){v(!1);return}v(!0);const $=Cn(r,`artifacts/${t}/users/${e}/myReviews`),H=Cf($,mP("userId","==",e));return E=li(H,M=>{console.log("MyReviewsDisplay: onSnapshot triggered for user reviews.");const ee=[],re={},Q={};M.forEach(le=>{const ue=le.data(),de=le.id,N=Cn(r,`artifacts/${t}/users/${e}/myReviews/${de}/comments`);re[de]=li(N,x=>{const b=x.docs.map(P=>({id:P.id,...P.data(),date:P.data().date&&typeof P.data().date.toDate=="function"?P.data().date.toDate():new Date(P.data().date)}));f(P=>{const D=P.map(S=>S.id===de?{...S,comments:b}:S);return D.some(S=>S.id===de)?D:[...D,{...ue,id:de,comments:b,likes:[]}].sort((S,$e)=>($e.date?$e.date.getTime():0)-(S.date?S.date.getTime():0))})});const A=Cn(r,`artifacts/${t}/users/${e}/myReviews/${de}/likes`);Q[de]=li(A,x=>{const b=x.docs.map(P=>P.id);f(P=>{const D=P.map(S=>S.id===de?{...S,likes:b}:S);return D.some(S=>S.id===de)?D:[...D,{...ue,id:de,comments:[],likes:b}].sort((S,$e)=>($e.date?$e.date.getTime():0)-(S.date?S.date.getTime():0))})}),ee.push({id:de,...ue,date:ue.date&&typeof ue.date.toDate=="function"?ue.date.toDate():new Date(ue.date),comments:[],likes:[]})}),Object.keys(C).forEach(le=>{re[le]||C[le]()}),Object.keys(j).forEach(le=>{Q[le]||j[le]()}),Object.assign(C,re),Object.assign(j,Q),ee.sort((le,ue)=>(ue.date?ue.date.getTime():0)-(le.date?le.date.getTime():0)),f(ee),v(!1),console.log("MyReviewsDisplay: Fetched user reviews:",ee.length)},M=>{console.error("MyReviewsDisplay: Error fetching user's reviews:",M),s("Error loading your reviews.","error"),v(!1)}),()=>{console.log("MyReviewsDisplay: Cleaning up onSnapshot listeners."),E(),Object.values(C).forEach(M=>M()),Object.values(j).forEach(M=>M())}},[r,t,e,s]);const I=V.useCallback(async(E,C,j)=>{if(console.log("MyReviewsDisplay: handleLikeReview called for reviewId:",E),!e||l){s("You must be logged in to like a review. Please sign up or log in.","info"),o(!0);return}if(!r||!t||!C||!j){s("Firebase or review data missing for like operation.","error");return}try{const $=fr(r,`artifacts/${t}/public/data/hospitals/${C}/doctors/${j}/reviews/${E}/likes/${e}`),H=await getDoc($),M=fr(r,`artifacts/${t}/users/${e}/myReviews/${E}/likes/${e}`);H.exists()?(await Mc($),await Mc(M),s("Review unliked.","info")):(await Jr($,{timestamp:new Date}),await Jr(M,{timestamp:new Date}),s("Review liked!","success"))}catch($){console.error("MyReviewsDisplay: Error liking/unliking review: ",$),s(`Error processing like: ${$.message}`,"error")}},[e,l,r,t,s,o]);return m?y.jsx("div",{className:"flex justify-center items-center h-48",children:y.jsx("p",{className:"text-center text-gray-500 italic",children:"Loading your reviews..."})}):d.length===0?y.jsx("div",{className:"flex justify-center items-center h-48",children:y.jsx("p",{className:"text-center text-gray-500 italic",children:"You haven't posted any reviews yet. Share your first tea!"})}):y.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:"My Tea"}),y.jsx("p",{className:"text-lg text-gray-700 text-center mb-6",children:"Here's a look at the reviews you've shared and the engagement they've received."}),y.jsx("div",{className:"space-y-8",children:d.map(E=>{const C=E.likes&&e&&E.likes.includes(e);return y.jsxs("div",{className:"p-6 rounded-xl shadow-lg border border-gray-100 bg-white",children:[y.jsxs("div",{className:"flex items-center mb-4",children:[y.jsx("div",{className:"w-10 h-10 bg-custom-beige rounded-full flex items-center justify-center text-gray-800 font-bold text-lg mr-3 shadow-sm",children:E.reviewerId?E.reviewerId.charAt(0).toUpperCase():"RN"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-gray-800",children:E.reviewerId}),y.jsx("p",{className:"text-sm text-gray-600",children:E.nursingField}),y.jsx("p",{className:"text-xs text-gray-500",children:E.date instanceof Date?E.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]}),y.jsx("p",{className:"text-gray-800 leading-relaxed mb-4 text-base",children:E.comment}),y.jsxs("div",{className:"flex items-center gap-4 border-t border-gray-100 pt-3 mt-3",children:[y.jsxs("button",{onClick:()=>I(E.id,E.hospitalId,E.doctorId),className:`flex items-center transition-colors ${C?"text-blue-600":"text-gray-600 hover:text-blue-500"}`,children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Like (",E.likes?E.likes.length:0,")"]}),y.jsxs("span",{className:"flex items-center text-gray-600",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Comment (",E.comments?E.comments.length:0,")"]})]}),y.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[y.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Comments on your review:"}),E.comments&&E.comments.length>0?y.jsx("div",{className:"space-y-3",children:E.comments.map((j,$)=>y.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[y.jsxs("div",{className:"flex items-center mb-1",children:[y.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-800 text-xs font-semibold mr-2",children:j.userId?j.userId.charAt(0).toUpperCase():"U"}),y.jsx("p",{className:"font-medium text-gray-800",children:j.userId}),y.jsx("p",{className:"text-xs text-gray-500 ml-auto",children:j.date instanceof Date?j.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),y.jsx("p",{className:"ml-8 text-gray-700",children:j.text})]},j.id||j.date.getTime()+"_"+$))}):y.jsx("p",{className:"text-sm text-gray-500",children:"No comments on this review yet."})]})]},E.id)})})]})};function SP({onClose:r}){const e=V.useRef(null);return V.useEffect(()=>{const t=s=>{s.key==="Escape"&&r()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[r]),V.useEffect(()=>{const t=o=>{e.current&&!e.current.contains(o.target)&&r()},s=setTimeout(()=>{document.addEventListener("mousedown",t)},100);return()=>{clearTimeout(s),document.removeEventListener("mousedown",t)}},[r]),y.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{ref:e,className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative p-6 md:p-8",children:[y.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl font-bold leading-none","aria-label":"Close",children:"×"}),y.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-6 text-center",children:"The RNTea business Data Protection Protocol"}),y.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mt-8 mb-4 text-center",children:"Version 2.1 | Effective Date: July 12, 2025"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Preamble"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:'WHEREAS, RNTea business ("RNTea business," "we," "our") is a data-driven enterprise that values the trust placed in it by its users, clients, and partners ("Data Subjects," "you," "your");'}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the processing of personal data is a fundamental aspect of our operations;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the protection of personal data is a fundamental right, as articulated in international and national legal frameworks, including but not limited to the GDPR (Regulation (EU) 2016/679) and the CCPA (California Civil Code § 1798.100 et seq.), and other applicable data protection laws;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, this Protocol is designed to be a comprehensive, transparent, and legally compliant framework governing our collection, use, retention, and disclosure of personal data;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"THEREFORE, RNTea business hereby establishes this Data Protection Protocol, which applies to all processing of personal data by the company."}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article I: Foundational Principles of Data Processing"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business adheres to the following principles, which govern all data processing activities:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Lawfulness, Fairness, and Transparency:"})," We process personal data lawfully, fairly, and in a transparent manner. This Protocol serves as the primary instrument for achieving this transparency."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Purpose Limitation:"})," We collect personal data for specified, explicit, and legitimate purposes and do not process it in a manner incompatible with those purposes."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Data Minimization:"})," We collect only the personal data that is adequate, relevant, and limited to what is necessary in relation to the purposes for which it is processed."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Accuracy:"})," We take every reasonable step to ensure that personal data is accurate and, where necessary, kept up to date. Inaccurate personal data will be rectified or erased without undue delay."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Storage Limitation:"})," We retain personal data for no longer than is necessary for the purposes for which it is processed."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Integrity and Confidentiality:"})," We process personal data in a manner that ensures appropriate security, including protection against unauthorized or unlawful processing and against accidental loss, destruction, or damage, using appropriate technical and organizational measures."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Accountability:"})," As the data controller, RNTea business is responsible for, and must be able to demonstrate compliance with, the principles outlined in this Protocol."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article II: Categories of Personal Data Collected & Lawful Basis"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"The personal data we process falls into the following categories, with the corresponding lawful basis for processing:"}),y.jsx("div",{className:"overflow-x-auto mb-4",children:y.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Category of Data"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Examples of Data Collected"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Purpose of Processing"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Lawful Basis for Processing"})]})}),y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Identity & Account Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Name, email address, username, password (hashed), professional title"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To create and manage your account, provide access to services, and communicate with you."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Contractual Necessity:"})," The processing is necessary for the performance of a contract to which you are a party."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Transactional Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Billing address, payment information (tokenized), subscription history"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To process payments, manage subscriptions, and maintain financial records."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Contractual Necessity:"})," Necessary to fulfill a transaction you initiated. ",y.jsx("strong",{children:"Legal Obligation:"})," To comply with tax and accounting laws."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Technical & Usage Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"IP address, browser type, operating system, pages visited, time spent, clickstream data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To ensure the security and stability of our platform, analyze usage patterns, and improve our services."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Legitimate Interest:"})," Our legitimate interest in securing our platform, preventing fraud, and understanding user behavior to enhance our products."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Correspondence & Support Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Content of emails, chat messages, or support tickets"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To respond to your inquiries, provide customer support, and resolve disputes."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Legitimate Interest:"})," To provide effective customer service. ",y.jsx("strong",{children:"Contractual Necessity:"})," To assist with issues related to our service."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Voluntarily Provided Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Your professional bio, profile picture, or survey responses"}),y.jsxs("td",{className:"py-2 px-4 text-gray-700",children:[y.jsx("strong",{children:"Consent:"})," Your explicit consent is requested and may be withdrawn at any time."]})]})]})]})}),y.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[y.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Legitimate Interest Balancing Test"}),y.jsx("br",{}),`The use of "Legitimate Interest" as a lawful basis is subject to a strict balancing test under the GDPR. A data controller must demonstrate that its interests in processing the data (e.g., security, service improvement) are not overridden by the fundamental rights and freedoms of the Data Subject. This requires a formal assessment and is a point of frequent legal scrutiny. In this model, we assert that the processing of technical data for security purposes is a legitimate interest vital to protecting all users, and a user's reasonable expectation is that such data would be processed for platform integrity.`]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article III: Data Sharing and Disclosure"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"We may share your personal data with the following categories of recipients, always under the principles of data minimization and purpose limitation:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Service Providers:"})," We engage third-party service providers (data processors) who perform functions on our behalf, such as cloud hosting, payment processing, and analytics. These providers are bound by contractual obligations to protect your data and are prohibited from using it for any purpose other than providing their service to us."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Legal and Regulatory Authorities:"})," We will disclose your data when legally required to do so, such as in response to a subpoena, court order, or governmental request."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Business Transfers:"})," In the event of a merger, acquisition, or sale of assets, your personal data may be transferred as part of the business transaction, subject to the recipient agreeing to abide by a privacy policy consistent with this Protocol."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article IV: Data Subject Rights"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"You have the following rights concerning your personal data. To exercise these rights, please contact our Data Protection Officer at the address provided in Article VIII."}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Access:"}),' You have the right to request a copy of the personal data we hold about you (a "Subject Access Request").']}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Rectification:"})," You have the right to request the correction of inaccurate or incomplete personal data."]}),y.jsxs("li",{children:[y.jsx("strong",{children:'Right to Erasure ("Right to be Forgotten"):'})," You have the right to request the deletion of your personal data under certain circumstances (e.g., if the data is no longer necessary for the purposes for which it was collected)."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Restrict Processing:"})," You have the right to request that we cease or limit the processing of your personal data under specific conditions."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Data Portability:"})," You have the right to receive your personal data in a structured, commonly used, and machine-readable format and to transmit that data to another data controller."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Object:"})," You have the right to object to the processing of your personal data based on legitimate interest or for direct marketing purposes."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Withdraw Consent:"})," Where processing is based on your consent, you have the right to withdraw that consent at any time."]})]}),y.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[y.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Practicality of Rights"}),y.jsx("br",{}),'While these rights are fundamental, their implementation is not absolute. For instance, the "Right to Erasure" may be overridden by a legal obligation to retain data (e.g., financial records for tax purposes) or if the data is required for the establishment, exercise, or defense of legal claims. A robust privacy policy must manage user expectations by clarifying these limitations.']}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article V: Data Security"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business implements appropriate technical and organizational measures to ensure a level of security appropriate to the risk. These measures include:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Pseudonymization and Encryption:"})," Where feasible, data is pseudonymized and sensitive data is encrypted both in transit and at rest."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Access Controls:"}),' Access to personal data is restricted to authorized personnel on a "need-to-know" basis.']}),y.jsxs("li",{children:[y.jsx("strong",{children:"Security Audits:"})," We conduct regular security audits and vulnerability assessments."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VI: International Data Transfers"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"As a global company, your data may be transferred to and processed in countries outside your own. We ensure that any such transfer is lawful and adequately protected. For transfers of personal data from the European Union, we rely on established mechanisms such as Standard Contractual Clauses (SCCs)."}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VII: Contact Information"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"For any questions, concerns, or to exercise your rights under this Protocol, please contact our designated Data Protection Officer (DPO):"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"DPO:"})," [Insert DPO Name]"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Email:"})," [Insert DPO Email]"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Mailing Address:"})," [Insert Mailing Address]"]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VIII: Changes to This Protocol"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"This Protocol may be amended from time to time. We will notify you of any material changes by posting the new Protocol on our website or by other means of communication. Your continued use of our services after a change indicates your acceptance of the updated terms."})]})})}const Fl=V.createContext(null),Za=null,CP=null;class AP extends ui.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("App.jsx ErrorBoundary: Uncaught error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-100 text-red-800 p-4 rounded-lg shadow-lg m-4",children:[y.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong in App.jsx!"}),y.jsx("p",{className:"text-lg mb-2 text-center",children:"We're sorry, but there was an issue rendering the application. Details below:"}),y.jsxs("details",{className:"mt-4 text-left p-4 bg-red-50 rounded-lg border border-red-200 overflow-auto max-w-lg",children:[y.jsx("summary",{className:"font-semibold cursor-pointer text-red-700",children:"Click for Error Details"}),y.jsx("pre",{className:"mt-2 text-sm whitespace-pre-wrap break-words font-mono text-red-900",children:this.state.error&&this.state.error.toString()}),this.state.errorInfo&&y.jsxs("pre",{className:"mt-2 text-xs text-red-600 font-mono whitespace-pre-wrap break-words",children:["Component Stack: ",this.state.errorInfo.componentStack]})]})]}):this.props.children}}function RP(){const[r,e]=V.useState(null),[t,s]=V.useState(null),[o,l]=V.useState(null),[d,f]=V.useState(null),[m,v]=V.useState(!0),[I,E]=V.useState(null),[C,j]=V.useState(!1),[$,H]=V.useState(!0),[M,ee]=V.useState({text:"",type:""}),[re,Q]=V.useState(!1),[le,ue]=V.useState(!1),de=ca();Gv();const[N,A]=V.useState(!1),[x,b]=V.useState(null),P=V.useRef(null),[D,S]=V.useState(!1),[$e,st]=V.useState(!1),[ot,ce]=V.useState(0),q=V.useCallback((he,se)=>{ee({text:he,type:se}),setTimeout(()=>ee({text:"",type:""}),5e3)},[]);V.useEffect(()=>{console.log("App.jsx: useEffect for Firebase Initialization triggered."),console.log("App.jsx: Current path detected by React Router:",de.pathname),(async()=>{try{console.log("App.jsx: Loading Firebase...");let se=null,me="Unknown";const Me={apiKey:"AIzaSyBEwSVX9UY7-MNxeYwdbY0ZmDuXzYyt56g",authDomain:"rntea-cca78.firebaseapp.com",projectId:"rntea-cca78",storageBucket:"rntea-cca78.appspot.com",messagingSenderId:"806310857835",appId:"1:806310857835:web:b03b05847c818ee4fe352e",measurementId:"G-ZKBPS9FGE"};if(console.log("App.jsx DEBUG: Constructed viteConfig:",Me),Me.apiKey&&Me.projectId&&Me.appId)se=Me,me="Vite Environment Variables (import.meta.env)";else if(!(Za&&Za.apiKey&&Za.projectId&&Za.appId))throw new Error("Firebase configuration is incomplete or missing from both Vite environment variables and Canvas setup. Please ensure either .env file is correct or Canvas variables are provided.");if(console.log(`App.jsx: Firebase config source: ${me}`),console.log("App.jsx: Firebase config being used (sensitive parts masked):",{apiKey:se!=null&&se.apiKey?"********":"N/A",authDomain:se==null?void 0:se.authDomain,projectId:se==null?void 0:se.projectId,storageBucket:se==null?void 0:se.storageBucket,messagingSenderId:se==null?void 0:se.messagingSenderId,appId:se!=null&&se.appId?"********":"N/A",measurementId:se==null?void 0:se.measurementId}),!se||!se.apiKey||!se.projectId||!se.appId)throw new Error(`Firebase configuration is incomplete from ${me}. Missing apiKey, projectId, or appId. This should not happen if previous checks passed.`);const Rn=l0(se),Ft=lC(Rn),Pn=sP(Rn);e(Rn),l(Ft),s(Pn),console.log("App.jsx: Firebase Loaded, Awaiting Auth...");const Hn=BS(Ft,async At=>{var qt,bn,ln,kn;if(console.log("App.jsx: onAuthStateChanged - User status changed. User:",At),At)f(At.uid),v(At.isAnonymous),E(At.displayName);else{console.log("App.jsx: No user found. Checking for custom token.");let Xt=null;try{Xt=typeof __initial_auth_token<"u"?__initial_auth_token:null}catch(ie){console.warn("App.jsx: __initial_auth_token is not declared or accessible:",ie)}if(Xt){console.log("App.jsx: Signing in with custom token...");try{await VS(Ft,Xt),f((qt=Ft.currentUser)==null?void 0:qt.uid),v(((bn=Ft.currentUser)==null?void 0:bn.isAnonymous)||!1),E((ln=Ft.currentUser)==null?void 0:ln.displayName),console.log("App.jsx: Custom token sign-in successful. Current user ID:",(kn=Ft.currentUser)==null?void 0:kn.uid)}catch(ie){console.error("App.jsx: Error during custom token authentication:",ie),q(`Authentication failed: ${ie.message}`,"error"),f(null),v(!0),E(null)}}else console.log("App.jsx: No custom token found. User remains signed out by default."),f(null),v(!0),E(null)}j(!0),H(!1),console.log("App.jsx: Firebase initialization complete. AuthReady:",!0,"LoadingFirebase:",!1)});return()=>{console.log("App.jsx: useEffect cleanup - Unsubscribing from auth state changes."),Hn()}}catch(se){console.error("App.jsx: FATAL ERROR: Failed to initialize Firebase application:",se),q("Failed to initialize application. Please try again later.","error"),H(!1),j(!1)}})()},[de.pathname,Za,q]),window.onloadCallback=()=>{console.log("App.jsx: window.onloadCallback triggered from reCAPTCHA script."),st(!0)},V.useEffect(()=>{C&&o&&$e&&typeof window.grecaptcha<"u"&&window.grecaptcha.ready&&!x?(console.log("App.jsx: All prerequisites met. Initializing RecaptchaVerifier..."),window.grecaptcha.ready(()=>{if(x){console.log("App.jsx: RecaptchaVerifier already exists in state, skipping re-initialization."),S(!0),ce(he=>he+1);return}console.log("App.jsx: Creating and rendering RecaptchaVerifier instance...");try{if(!document.getElementById("recaptcha-container-app")){console.error("App.jsx: Central reCAPTCHA container 'recaptcha-container-app' not found!"),q("reCAPTCHA container missing. Phone verification may fail.","error");return}const se=new q0(o,"recaptcha-container-app",{size:"invisible",callback:me=>{console.log("App.jsx: Central reCAPTCHA callback fired (solved):",me),S(!0),ce(Me=>Me+1)},"expired-callback":()=>{console.log("App.jsx: Central reCAPTCHA expired."),q("Verification expired. Please try again.","error"),S(!1),P.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset(P.current),ce(me=>me+1)},"error-callback":me=>{console.error("App.jsx: reCAPTCHA error callback:",me),q("Failed to load verification. Please refresh.","error"),S(!1),ce(Me=>Me+1)}});se.render().then(me=>{console.log("App.jsx: Central reCAPTCHA rendered with widget ID:",me),P.current=me,b(se),se.size==="invisible"&&S(!0),console.log("App.jsx: recaptchaVerifierState set and isRecaptchaReadyForUse true."),ce(Me=>Me+1)}).catch(me=>{console.error("App.jsx: Error rendering central reCAPTCHA:",me),q("Failed to initialize verification. Please refresh.","error"),S(!1),ce(Me=>Me+1)})}catch(he){console.error("App.jsx: Error creating central RecaptchaVerifier instance:",he),q("Failed to initialize verification. Check console.","error"),S(!1),ce(se=>se+1)}})):x&&x.size==="invisible"&&(D||(S(!0),ce(he=>he+1)))},[C,o,$e,q,D,x]),V.useEffect(()=>()=>{x&&(console.log("App.jsx: Cleaning up central reCAPTCHA Verifier..."),P.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"?window.grecaptcha.reset(P.current):window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&(console.warn("App.jsx: Attempting general reCAPTCHA reset as widget ID is null."),window.grecaptcha.reset()),x.clear(),b(null),P.current=null,S(!1),ce(he=>he+1))},[x]);const _e=V.useCallback(async()=>{if(!D||!x||typeof x.execute!="function")throw console.error("App.jsx: reCAPTCHA Verifier not ready for execution. isReady:",D,"instance:",x),q("Verification not ready. Please try again.","error"),new Error("reCAPTCHA not ready.");try{const he=await x.execute();return console.log("App.jsx: reCAPTCHA token obtained:",he),he}catch(he){throw console.error("App.jsx: Error executing reCAPTCHA:",he),q(`Verification failed: ${he.message}`,"error"),he}},[q,D,x]),oe=V.useCallback(()=>{P.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"?(console.log("App.jsx: Resetting central reCAPTCHA widget with ID."),window.grecaptcha.reset(P.current)):window.grecaptcha&&typeof window.grecaptcha.reset=="function"?(console.warn("App.jsx: Attempting general reCAPTCHA reset as widget ID is null."),window.grecaptcha.reset()):console.warn("App.jsx: Cannot reset reCAPTCHA: grecaptcha or reset function not available."),S(!1)},[]),L=V.useCallback(async(he,se)=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const me=await M0(o,he,se);return q("Account created successfully!","success"),Q(!1),me.user}catch(me){throw console.error("Error signing up with email/password:",me),q(`Sign Up Failed: ${me.message}`,"error"),me}},[o,q]),K=V.useCallback(async(he,se)=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const me=await OS(o,he,se);return q("Signed in successfully!","success"),Q(!1),me.user}catch(me){return console.error("Error signing in with email/password:",me),q(`Sign In Failed: ${me.message}`,"error"),null}},[o,q]),Te=V.useCallback(async()=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const he=new _s;let se;return o.currentUser&&o.currentUser.isAnonymous?(se=await Zu(o.currentUser,await ec(o,he).then(me=>me.credential)),q("Anonymous account linked with Google!","success")):(se=await ec(o,he),q("Signed in with Google successfully!","success")),Q(!1),se.user}catch(he){return console.error("Error signing in with Google:",he),he.code==="auth/account-exists-with-different-credential"?q("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):q(`Google Sign In Failed: ${he.message}`,"error"),null}},[o,q,Q]),Ae=V.useCallback(async()=>{if(!o)return q("Firebase Auth not initialized.","error"),null;try{const he=new ea("apple.com");let se;return o.currentUser&&o.currentUser.isAnonymous?(se=await Zu(o.currentUser,await ec(o,he).then(me=>me.credential)),q("Anonymous account linked with Apple!","success")):(se=await ec(o,he),q("Signed in with Apple successfully!","success")),Q(!1),se.user}catch(he){return console.error("Error signing in with Apple:",he),he.code==="auth/account-exists-with-different-credential"?q("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):q(`Apple Sign In Failed: ${he.message}`,"error"),null}},[o,q]),De=V.useCallback(async()=>{if(!o){q("Firebase Auth not initialized.","error");return}try{await $S(o),f(null),v(!0),E(null),q("Signed out successfully!","success")}catch(he){console.error("Error signing out:",he),q(`Sign Out Failed: ${he.message}`,"error")}},[o,q]),Ve=V.useCallback(async(he,se)=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return q("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const me=io.credential(he,se),Me=await Zu(o.currentUser,me);return q("Anonymous account linked with email/password!","success"),Q(!1),Me.user}catch(me){return console.error("Error linking anonymous account with email/password:",me),q(`Linking Failed: ${me.message}`,"error"),null}},[o,q]),ze=V.useCallback(async()=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return q("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const he=new ea("apple.com"),se=await Zu(o.currentUser,he);return q("Anonymous account linked with Apple!","success"),Q(!1),se.user}catch(he){return console.error("Error linking anonymous account with Apple:",he),q(`Linking Failed: ${he.message}`,"error"),null}},[o,q]),Le=V.useMemo(()=>({app:r,db:t,auth:o,currentUserId:d,currentUserIsAnonymous:m,authReady:C,appId:"rntea-cca78",showMessage:q,signUpWithEmailPassword:L,signInWithEmailPassword:K,signInWithGoogle:Te,signInWithApple:Ae,signOutUser:De,linkAnonymousWithEmailPassword:Ve,linkAnonymousWithApple:ze,setShowAuthModal:Q,executeRecaptcha:_e,resetRecaptcha:oe,isRecaptchaReadyForUse:D,recaptchaVerifier:x,currentUserDisplayName:I}),[r,t,o,d,m,C,CP,q,L,K,Te,Ae,De,Ve,ze,Q,_e,oe,D,x,I]),Be=V.useCallback(()=>{A(he=>!he),document.body.style.overflow=N?"":"hidden"},[N]),Xe=V.useCallback(()=>{A(!1),document.body.style.overflow=""},[]),It=V.useCallback(he=>{if(he==="/")return de.pathname==="/";if(he==="/reviews")return de.pathname==="/reviews";if(he==="/my-tea")return de.pathname==="/my-tea";if(he.startsWith("/#")){const se=he.substring(2);return de.pathname==="/"&&de.hash===`#${se}`}return!1},[de.pathname,de.hash]);return y.jsxs("div",{className:"min-h-screen flex flex-col",children:[y.jsxs("header",{className:"bg-white shadow-sm py-8 px-6 md:px-10 lg:px-16 flex justify-between items-center rounded-b-lg fixed top-0 w-full z-30",children:[y.jsx(Nr,{to:"/",className:"text-3xl font-bold text-gray-800 rntea-brand",children:"RNTea"}),y.jsx("nav",{className:"hidden md:block",children:y.jsxs("ul",{className:"flex space-x-6 items-center",children:[y.jsx("li",{children:y.jsx(Nr,{to:"/#about",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${It("/#about")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["About",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:y.jsx(Nr,{to:"/reviews",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${It("/reviews")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["Browse Tea",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),d&&!m&&y.jsx("li",{children:y.jsx(Nr,{to:"/my-tea",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${It("/my-tea")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["My Tea",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:y.jsx(Nr,{to:"/#contact",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${It("/#contact")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["Contact",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:d?y.jsx("button",{onClick:De,className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):y.jsx("button",{onClick:()=>Q(!0),className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})})]})}),y.jsxs("div",{className:`hamburger-menu md:hidden flex flex-col justify-around w-8 h-6 cursor-pointer z-50 ${N?"open":""}`,id:"hamburger-menu",onClick:Be,children:[y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"})]})]}),y.jsxs("div",{className:`mobile-nav-overlay md:hidden fixed top-0 left-0 w-full h-full bg-white bg-opacity-98 z-40 flex flex-col justify-center items-center transition-transform duration-400 ease-in-out ${N?"open":""}`,id:"mobile-nav-overlay",children:[y.jsx("button",{className:"absolute top-6 right-6 text-gray-800 hover:text-gray-600 text-4xl focus:outline-none z-50",onClick:Xe,"aria-label":"Close navigation menu",children:"×"}),y.jsx(Nr,{to:"/#about",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Xe,style:{animationDelay:"0.1s"},children:y.jsxs("span",{className:"relative inline-block",children:["About",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),y.jsx(Nr,{to:"/reviews",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Xe,style:{animationDelay:"0.2s"},children:y.jsxs("span",{className:"relative inline-block",children:["Reviews",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),d&&!m&&y.jsx(Nr,{to:"/my-tea",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Xe,style:{animationDelay:"0.25s"},children:y.jsxs("span",{className:"relative inline-block",children:["My Tea",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),y.jsx(Nr,{to:"/#contact",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Xe,style:{animationDelay:"0.3s"},children:y.jsxs("span",{className:"relative inline-block",children:["Contact",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),d?y.jsx("button",{onClick:()=>{De(),Xe()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):y.jsx("button",{onClick:()=>{Q(!0),Xe()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})]}),y.jsxs("main",{className:"flex-grow w-full flex flex-col mt-[120px]",children:[y.jsx(vP,{message:M.text,type:M.type}),y.jsx("div",{id:"recaptcha-container-app",className:"hidden"}),y.jsx(AP,{children:$?y.jsx("p",{className:"text-center text-gray-500 py-8",children:"App.jsx: Initializing application and Firebase..."}):y.jsxs(Fl.Provider,{value:Le,children:[y.jsxs(NI,{children:[console.log(`App.jsx: Route matched for path: ${de.pathname}`),y.jsx(el,{path:"/",element:y.jsx(TP,{})}),y.jsx(el,{path:"/reviews",element:y.jsx(Aw,{})}),y.jsx(el,{path:"/my-tea",element:y.jsx(xP,{})})," ",y.jsx(el,{path:"/test-route",element:y.jsx("h2",{className:"text-center text-2xl text-center mt-8",children:"This is a Test Route."})})]}),re&&y.jsx(_P,{onClose:()=>Q(!1)},`${ot}-${D}`)]})})]}),y.jsx("footer",{className:"bg-white py-4 px-6 md:px-10 lg:px-16 border-t border-gray-200 text-center text-gray-600",children:y.jsxs("p",{className:"text-sm",children:["© ",new Date().getFullYear()," RNTea business. All Rights Reserved.",y.jsx("button",{onClick:()=>ue(!0),className:"ml-1 text-blue-600 hover:underline focus:outline-none",children:"Privacy Policy"})]})}),le&&y.jsx(SP,{onClose:()=>ue(!1)})]})}const Lv=document.getElementById("root");Lv?(console.log("main.jsx: Root element found. Attempting to mount React App with Router..."),zE.createRoot(Lv).render(y.jsx(ui.StrictMode,{children:y.jsx(FI,{children:y.jsx(RP,{})})})),console.log("main.jsx: React App with Router mount instruction sent.")):console.error("main.jsx: ERROR - Root element not found in DOM. Cannot mount React App.");
