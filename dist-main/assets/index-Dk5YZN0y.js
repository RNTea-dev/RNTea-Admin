function OE(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Ov(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var jh={exports:{}},el={},Mh={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function LE(){if(Lg)return He;Lg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=I&&j[I]||j["@@iterator"],typeof j=="function"?j:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,$={};function M(j,K,ve){this.props=j,this.context=K,this.refs=$,this.updater=ve||L}M.prototype.isReactComponent={},M.prototype.setState=function(j,K){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,K,"setState")},M.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function Q(){}Q.prototype=M.prototype;function te(j,K,ve){this.props=j,this.context=K,this.refs=$,this.updater=ve||L}var J=te.prototype=new Q;J.constructor=te,B(J,M.prototype),J.isPureReactComponent=!0;var _e=Array.isArray,ce=Object.prototype.hasOwnProperty,Ie={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function C(j,K,ve){var Ce,ke={},Ne=null,Be=null;if(K!=null)for(Ce in K.ref!==void 0&&(Be=K.ref),K.key!==void 0&&(Ne=""+K.key),K)ce.call(K,Ce)&&!P.hasOwnProperty(Ce)&&(ke[Ce]=K[Ce]);var Ue=arguments.length-2;if(Ue===1)ke.children=ve;else if(1<Ue){for(var je=Array(Ue),Qe=0;Qe<Ue;Qe++)je[Qe]=arguments[Qe+2];ke.children=je}if(j&&j.defaultProps)for(Ce in Ue=j.defaultProps,Ue)ke[Ce]===void 0&&(ke[Ce]=Ue[Ce]);return{$$typeof:r,type:j,key:Ne,ref:Be,props:ke,_owner:Ie.current}}function S(j,K){return{$$typeof:r,type:j.type,key:K,ref:j.ref,props:j.props,_owner:j._owner}}function b(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function N(j){var K={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ve){return K[ve]})}var O=/\/+/g;function R(j,K){return typeof j=="object"&&j!==null&&j.key!=null?N(""+j.key):K.toString(36)}function Ze(j,K,ve,Ce,ke){var Ne=typeof j;(Ne==="undefined"||Ne==="boolean")&&(j=null);var Be=!1;if(j===null)Be=!0;else switch(Ne){case"string":case"number":Be=!0;break;case"object":switch(j.$$typeof){case r:case e:Be=!0}}if(Be)return Be=j,ke=ke(Be),j=Ce===""?"."+R(Be,0):Ce,_e(ke)?(ve="",j!=null&&(ve=j.replace(O,"$&/")+"/"),Ze(ke,K,ve,"",function(Qe){return Qe})):ke!=null&&(b(ke)&&(ke=S(ke,ve+(!ke.key||Be&&Be.key===ke.key?"":(""+ke.key).replace(O,"$&/")+"/")+j)),K.push(ke)),1;if(Be=0,Ce=Ce===""?".":Ce+":",_e(j))for(var Ue=0;Ue<j.length;Ue++){Ne=j[Ue];var je=Ce+R(Ne,Ue);Be+=Ze(Ne,K,ve,je,ke)}else if(je=x(j),typeof je=="function")for(j=je.call(j),Ue=0;!(Ne=j.next()).done;)Ne=Ne.value,je=Ce+R(Ne,Ue++),Be+=Ze(Ne,K,ve,je,ke);else if(Ne==="object")throw K=String(j),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Be}function ot(j,K,ve){if(j==null)return j;var Ce=[],ke=0;return Ze(j,Ce,"","",function(Ne){return K.call(ve,Ne,ke++)}),Ce}function ut(j){if(j._status===-1){var K=j._result;K=K(),K.then(function(ve){(j._status===0||j._status===-1)&&(j._status=1,j._result=ve)},function(ve){(j._status===0||j._status===-1)&&(j._status=2,j._result=ve)}),j._status===-1&&(j._status=0,j._result=K)}if(j._status===1)return j._result.default;throw j._result}var le={current:null},G={transition:null},ge={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:G,ReactCurrentOwner:Ie};function oe(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:ot,forEach:function(j,K,ve){ot(j,function(){K.apply(this,arguments)},ve)},count:function(j){var K=0;return ot(j,function(){K++}),K},toArray:function(j){return ot(j,function(K){return K})||[]},only:function(j){if(!b(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},He.Component=M,He.Fragment=t,He.Profiler=o,He.PureComponent=te,He.StrictMode=s,He.Suspense=m,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,He.act=oe,He.cloneElement=function(j,K,ve){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Ce=B({},j.props),ke=j.key,Ne=j.ref,Be=j._owner;if(K!=null){if(K.ref!==void 0&&(Ne=K.ref,Be=Ie.current),K.key!==void 0&&(ke=""+K.key),j.type&&j.type.defaultProps)var Ue=j.type.defaultProps;for(je in K)ce.call(K,je)&&!P.hasOwnProperty(je)&&(Ce[je]=K[je]===void 0&&Ue!==void 0?Ue[je]:K[je])}var je=arguments.length-2;if(je===1)Ce.children=ve;else if(1<je){Ue=Array(je);for(var Qe=0;Qe<je;Qe++)Ue[Qe]=arguments[Qe+2];Ce.children=Ue}return{$$typeof:r,type:j.type,key:ke,ref:Ne,props:Ce,_owner:Be}},He.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},He.createElement=C,He.createFactory=function(j){var K=C.bind(null,j);return K.type=j,K},He.createRef=function(){return{current:null}},He.forwardRef=function(j){return{$$typeof:f,render:j}},He.isValidElement=b,He.lazy=function(j){return{$$typeof:E,_payload:{_status:-1,_result:j},_init:ut}},He.memo=function(j,K){return{$$typeof:v,type:j,compare:K===void 0?null:K}},He.startTransition=function(j){var K=G.transition;G.transition={};try{j()}finally{G.transition=K}},He.unstable_act=oe,He.useCallback=function(j,K){return le.current.useCallback(j,K)},He.useContext=function(j){return le.current.useContext(j)},He.useDebugValue=function(){},He.useDeferredValue=function(j){return le.current.useDeferredValue(j)},He.useEffect=function(j,K){return le.current.useEffect(j,K)},He.useId=function(){return le.current.useId()},He.useImperativeHandle=function(j,K,ve){return le.current.useImperativeHandle(j,K,ve)},He.useInsertionEffect=function(j,K){return le.current.useInsertionEffect(j,K)},He.useLayoutEffect=function(j,K){return le.current.useLayoutEffect(j,K)},He.useMemo=function(j,K){return le.current.useMemo(j,K)},He.useReducer=function(j,K,ve){return le.current.useReducer(j,K,ve)},He.useRef=function(j){return le.current.useRef(j)},He.useState=function(j){return le.current.useState(j)},He.useSyncExternalStore=function(j,K,ve){return le.current.useSyncExternalStore(j,K,ve)},He.useTransition=function(){return le.current.useTransition()},He.version="18.3.1",He}var jg;function Nf(){return jg||(jg=1,Mh.exports=LE()),Mh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function jE(){if(Mg)return el;Mg=1;var r=Nf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,v){var E,I={},x=null,L=null;v!==void 0&&(x=""+v),m.key!==void 0&&(x=""+m.key),m.ref!==void 0&&(L=m.ref);for(E in m)s.call(m,E)&&!l.hasOwnProperty(E)&&(I[E]=m[E]);if(f&&f.defaultProps)for(E in m=f.defaultProps,m)I[E]===void 0&&(I[E]=m[E]);return{$$typeof:e,type:f,key:x,ref:L,props:I,_owner:o.current}}return el.Fragment=t,el.jsx=d,el.jsxs=d,el}var Fg;function ME(){return Fg||(Fg=1,jh.exports=jE()),jh.exports}var y=ME(),D=Nf();const si=Ov(D),FE=OE({__proto__:null,default:si},[D]);var ec={},Fh={exports:{}},Dn={},Uh={exports:{}},zh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function UE(){return Ug||(Ug=1,function(r){function e(G,ge){var oe=G.length;G.push(ge);e:for(;0<oe;){var j=oe-1>>>1,K=G[j];if(0<o(K,ge))G[j]=ge,G[oe]=K,oe=j;else break e}}function t(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var ge=G[0],oe=G.pop();if(oe!==ge){G[0]=oe;e:for(var j=0,K=G.length,ve=K>>>1;j<ve;){var Ce=2*(j+1)-1,ke=G[Ce],Ne=Ce+1,Be=G[Ne];if(0>o(ke,oe))Ne<K&&0>o(Be,ke)?(G[j]=Be,G[Ne]=oe,j=Ne):(G[j]=ke,G[Ce]=oe,j=Ce);else if(Ne<K&&0>o(Be,oe))G[j]=Be,G[Ne]=oe,j=Ne;else break e}}return ge}function o(G,ge){var oe=G.sortIndex-ge.sortIndex;return oe!==0?oe:G.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var m=[],v=[],E=1,I=null,x=3,L=!1,B=!1,$=!1,M=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(G){for(var ge=t(v);ge!==null;){if(ge.callback===null)s(v);else if(ge.startTime<=G)s(v),ge.sortIndex=ge.expirationTime,e(m,ge);else break;ge=t(v)}}function _e(G){if($=!1,J(G),!B)if(t(m)!==null)B=!0,ut(ce);else{var ge=t(v);ge!==null&&le(_e,ge.startTime-G)}}function ce(G,ge){B=!1,$&&($=!1,Q(C),C=-1),L=!0;var oe=x;try{for(J(ge),I=t(m);I!==null&&(!(I.expirationTime>ge)||G&&!N());){var j=I.callback;if(typeof j=="function"){I.callback=null,x=I.priorityLevel;var K=j(I.expirationTime<=ge);ge=r.unstable_now(),typeof K=="function"?I.callback=K:I===t(m)&&s(m),J(ge)}else s(m);I=t(m)}if(I!==null)var ve=!0;else{var Ce=t(v);Ce!==null&&le(_e,Ce.startTime-ge),ve=!1}return ve}finally{I=null,x=oe,L=!1}}var Ie=!1,P=null,C=-1,S=5,b=-1;function N(){return!(r.unstable_now()-b<S)}function O(){if(P!==null){var G=r.unstable_now();b=G;var ge=!0;try{ge=P(!0,G)}finally{ge?R():(Ie=!1,P=null)}}else Ie=!1}var R;if(typeof te=="function")R=function(){te(O)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,ot=Ze.port2;Ze.port1.onmessage=O,R=function(){ot.postMessage(null)}}else R=function(){M(O,0)};function ut(G){P=G,Ie||(Ie=!0,R())}function le(G,ge){C=M(function(){G(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_continueExecution=function(){B||L||(B=!0,ut(ce))},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(G){switch(x){case 1:case 2:case 3:var ge=3;break;default:ge=x}var oe=x;x=ge;try{return G()}finally{x=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(G,ge){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var oe=x;x=G;try{return ge()}finally{x=oe}},r.unstable_scheduleCallback=function(G,ge,oe){var j=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?j+oe:j):oe=j,G){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=oe+K,G={id:E++,callback:ge,priorityLevel:G,startTime:oe,expirationTime:K,sortIndex:-1},oe>j?(G.sortIndex=oe,e(v,G),t(m)===null&&G===t(v)&&($?(Q(C),C=-1):$=!0,le(_e,oe-j))):(G.sortIndex=K,e(m,G),B||L||(B=!0,ut(ce))),G},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(G){var ge=x;return function(){var oe=x;x=ge;try{return G.apply(this,arguments)}finally{x=oe}}}}(zh)),zh}var zg;function zE(){return zg||(zg=1,Uh.exports=UE()),Uh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function BE(){if(Bg)return Dn;Bg=1;var r=Nf(),e=zE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){d(n,i),d(n+"Capture",i)}function d(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function x(n){return m.call(I,n)?!0:m.call(E,n)?!1:v.test(n)?I[n]=!0:(E[n]=!0,!1)}function L(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function B(n,i,a,c){if(i===null||typeof i>"u"||L(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function $(n,i,a,c,h,g,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=w}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){M[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];M[i]=new $(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){M[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){M[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){M[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){M[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){M[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){M[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){M[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function te(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(Q,te);M[i]=new $(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(Q,te);M[i]=new $(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(Q,te);M[i]=new $(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){M[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),M.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){M[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function J(n,i,a,c){var h=M.hasOwnProperty(i)?M[i]:null;(h!==null?h.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(B(i,a,h,c)&&(a=null),c||h===null?x(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(i=h.attributeName,c=h.attributeNamespace,a===null?n.removeAttribute(i):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var _e=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),Ie=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),ot=Symbol.for("react.memo"),ut=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),G=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=G&&n[G]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,j;function K(n){if(j===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);j=i&&i[1]||""}return`
`+j+n}var ve=!1;function Ce(n,i){if(!n||ve)return"";ve=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(H){var c=H}Reflect.construct(n,[],i)}else{try{i.call()}catch(H){c=H}n.call(i.prototype)}else{try{throw Error()}catch(H){c=H}n()}}catch(H){if(H&&c&&typeof H.stack=="string"){for(var h=H.stack.split(`
`),g=c.stack.split(`
`),w=h.length-1,A=g.length-1;1<=w&&0<=A&&h[w]!==g[A];)A--;for(;1<=w&&0<=A;w--,A--)if(h[w]!==g[A]){if(w!==1||A!==1)do if(w--,A--,0>A||h[w]!==g[A]){var k=`
`+h[w].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=w&&0<=A);break}}}finally{ve=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function ke(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Ce(n.type,!1),n;case 11:return n=Ce(n.type.render,!1),n;case 1:return n=Ce(n.type,!0),n;default:return""}}function Ne(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case Ie:return"Portal";case S:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case Ze:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case b:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ot:return i=n.displayName||null,i!==null?i:Ne(n.type)||"Memo";case ut:i=n._payload,n=n._init;try{return Ne(n(i))}catch{}}return null}function Be(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(i);case 8:return i===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function je(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Qe(n){var i=je(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return h.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function wt(n){n._valueTracker||(n._valueTracker=Qe(n))}function ue(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=je(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function re(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function de(n,i){var a=i.checked;return oe({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Me(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Ue(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Kt(n,i){i=i.checked,i!=null&&J(n,"checked",i,!1)}function Qt(n,i){Kt(n,i);var a=Ue(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Jn(n,i.type,a):i.hasOwnProperty("defaultValue")&&Jn(n,i.type,Ue(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function En(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Jn(n,i,a){(i!=="number"||re(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var kt=Array.isArray;function Yt(n,i,a,c){if(n=n.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=i.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ue(a),i=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}i!==null||n[h].disabled||(i=n[h])}i!==null&&(i.selected=!0)}}function Mn(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function In(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(kt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Ue(a)}}function Tn(n,i){var a=Ue(i.value),c=Ue(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function pn(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function nt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ie(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?nt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Se,Xn=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,h){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,h)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Se=Se||document.createElement("div"),Se.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Se.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function hr(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zn=["Webkit","ms","Moz","O"];Object.keys(fr).forEach(function(n){Zn.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),fr[i]=fr[n]})});function Pr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||fr.hasOwnProperty(n)&&fr[n]?(""+i).trim():i+"px"}function xs(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=Pr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,h):n[a]=h}}var br=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ss(n,i){if(i){if(br[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Yr(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xn=null;function kr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Sn=null,mn=null,Fn=null;function Cs(n){if(n=Fa(n)){if(typeof Sn!="function")throw Error(t(280));var i=n.stateNode;i&&(i=mu(i),Sn(n.stateNode,n.type,i))}}function Un(n){mn?Fn?Fn.push(n):Fn=[n]:mn=n}function xi(){if(mn){var n=mn,i=Fn;if(Fn=mn=null,Cs(n),i)for(n=0;n<i.length;n++)Cs(i[n])}}function Jr(n,i){return n(i)}function Si(){}var pr=!1;function Rs(n,i,a){if(pr)return n(i,a);pr=!0;try{return Jr(n,i,a)}finally{pr=!1,(mn!==null||Fn!==null)&&(Si(),xi())}}function Et(n,i){var a=n.stateNode;if(a===null)return null;var c=mu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var As=!1;if(f)try{var zn={};Object.defineProperty(zn,"passive",{get:function(){As=!0}}),window.addEventListener("test",zn,zn),window.removeEventListener("test",zn,zn)}catch{As=!1}function q(n,i,a,c,h,g,w,A,k){var H=Array.prototype.slice.call(arguments,3);try{i.apply(a,H)}catch(ee){this.onError(ee)}}var De=!1,Re=null,Le=!1,we=null,We={onError:function(n){De=!0,Re=n}};function at(n,i,a,c,h,g,w,A,k){De=!1,Re=null,q.apply(We,arguments)}function rt(n,i,a,c,h,g,w,A,k){if(at.apply(this,arguments),De){if(De){var H=Re;De=!1,Re=null}else throw Error(t(198));Le||(Le=!0,we=H)}}function qe(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function At(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function ct(n){if(qe(n)!==n)throw Error(t(188))}function Ps(n){var i=n.alternate;if(!i){if(i=qe(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var h=a.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===a)return ct(h),n;if(g===c)return ct(h),i;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=h,c=g;else{for(var w=!1,A=h.child;A;){if(A===a){w=!0,a=h,c=g;break}if(A===c){w=!0,c=h,a=g;break}A=A.sibling}if(!w){for(A=g.child;A;){if(A===a){w=!0,a=g,c=h;break}if(A===c){w=!0,c=g,a=h;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function pt(n){return n=Ps(n),n!==null?Xr(n):null}function Xr(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Xr(n);if(i!==null)return i;n=n.sibling}return null}var Ci=e.unstable_scheduleCallback,bs=e.unstable_cancelCallback,ao=e.unstable_shouldYield,hd=e.unstable_requestPaint,dt=e.unstable_now,$l=e.unstable_getCurrentPriorityLevel,Ri=e.unstable_ImmediatePriority,ks=e.unstable_UserBlockingPriority,er=e.unstable_NormalPriority,Ia=e.unstable_LowPriority,Hl=e.unstable_IdlePriority,Ai=null,Bn=null;function Wl(n){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Ai,n,void 0,(n.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:Gl,Ta=Math.log,ql=Math.LN2;function Gl(n){return n>>>=0,n===0?32:31-(Ta(n)/ql|0)|0}var lo=64,uo=4194304;function Ns(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Pi(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,h=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var A=w&~h;A!==0?c=Ns(A):(g&=w,g!==0&&(c=Ns(g)))}else w=a&~h,w!==0?c=Ns(w):g!==0&&(c=Ns(g));if(c===0)return 0;if(i!==0&&i!==c&&(i&h)===0&&(h=c&-c,g=i&-i,h>=g||h===16&&(g&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-gn(i),h=1<<a,c|=n[a],i&=~h;return c}function fd(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zr(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-gn(g),A=1<<w,k=h[w];k===-1?((A&a)===0||(A&c)!==0)&&(h[w]=fd(A,i)):k<=i&&(n.expiredLanes|=A),g&=~A}}function $n(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function bi(){var n=lo;return lo<<=1,(lo&4194240)===0&&(lo=64),n}function Ds(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Vs(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-gn(i),n[i]=a}function lt(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-gn(a),g=1<<h;i[h]=0,c[h]=-1,n[h]=-1,a&=~g}}function Os(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-gn(a),h=1<<c;h&i|n[c]&i&&(n[c]|=i),a&=~h}}var Ye=0;function Ls(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Kl,co,Ql,Yl,Jl,xa=!1,Nr=[],Jt=null,mr=null,gr=null,js=new Map,tr=new Map,Dr=[],pd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xl(n,i){switch(n){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":js.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":tr.delete(i.pointerId)}}function Cn(n,i,a,c,h,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},i!==null&&(i=Fa(i),i!==null&&co(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),n)}function md(n,i,a,c,h){switch(i){case"focusin":return Jt=Cn(Jt,n,i,a,c,h),!0;case"dragenter":return mr=Cn(mr,n,i,a,c,h),!0;case"mouseover":return gr=Cn(gr,n,i,a,c,h),!0;case"pointerover":var g=h.pointerId;return js.set(g,Cn(js.get(g)||null,n,i,a,c,h)),!0;case"gotpointercapture":return g=h.pointerId,tr.set(g,Cn(tr.get(g)||null,n,i,a,c,h)),!0}return!1}function Zl(n){var i=Oi(n.target);if(i!==null){var a=qe(i);if(a!==null){if(i=a.tag,i===13){if(i=At(a),i!==null){n.blockedOn=i,Jl(n.priority,function(){Ql(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function es(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=ho(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);xn=c,a.target.dispatchEvent(c),xn=null}else return i=Fa(a),i!==null&&co(i),n.blockedOn=a,!1;i.shift()}return!0}function ki(n,i,a){es(n)&&a.delete(i)}function eu(){xa=!1,Jt!==null&&es(Jt)&&(Jt=null),mr!==null&&es(mr)&&(mr=null),gr!==null&&es(gr)&&(gr=null),js.forEach(ki),tr.forEach(ki)}function yr(n,i){n.blockedOn===i&&(n.blockedOn=null,xa||(xa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eu)))}function vr(n){function i(h){return yr(h,n)}if(0<Nr.length){yr(Nr[0],n);for(var a=1;a<Nr.length;a++){var c=Nr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Jt!==null&&yr(Jt,n),mr!==null&&yr(mr,n),gr!==null&&yr(gr,n),js.forEach(i),tr.forEach(i),a=0;a<Dr.length;a++)c=Dr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Dr.length&&(a=Dr[0],a.blockedOn===null);)Zl(a),a.blockedOn===null&&Dr.shift()}var ts=_e.ReactCurrentBatchConfig,Ms=!0;function vt(n,i,a,c){var h=Ye,g=ts.transition;ts.transition=null;try{Ye=1,Sa(n,i,a,c)}finally{Ye=h,ts.transition=g}}function gd(n,i,a,c){var h=Ye,g=ts.transition;ts.transition=null;try{Ye=4,Sa(n,i,a,c)}finally{Ye=h,ts.transition=g}}function Sa(n,i,a,c){if(Ms){var h=ho(n,i,a,c);if(h===null)Rd(n,i,c,Ni,a),Xl(n,c);else if(md(h,n,i,a,c))c.stopPropagation();else if(Xl(n,c),i&4&&-1<pd.indexOf(n)){for(;h!==null;){var g=Fa(h);if(g!==null&&Kl(g),g=ho(n,i,a,c),g===null&&Rd(n,i,c,Ni,a),g===h)break;h=g}h!==null&&c.stopPropagation()}else Rd(n,i,c,null,a)}}var Ni=null;function ho(n,i,a,c){if(Ni=null,n=kr(c),n=Oi(n),n!==null)if(i=qe(n),i===null)n=null;else if(a=i.tag,a===13){if(n=At(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Ni=n,null}function Ca(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($l()){case Ri:return 1;case ks:return 4;case er:case Ia:return 16;case Hl:return 536870912;default:return 16}default:return 16}}var Hn=null,fo=null,Rn=null;function Ra(){if(Rn)return Rn;var n,i=fo,a=i.length,c,h="value"in Hn?Hn.value:Hn.textContent,g=h.length;for(n=0;n<a&&i[n]===h[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===h[g-c];c++);return Rn=h.slice(n,1<c?1-c:void 0)}function po(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Vr(){return!0}function Aa(){return!1}function Xt(n){function i(a,c,h,g,w){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Vr:Aa,this.isPropagationStopped=Aa,this}return oe(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vr)},persist:function(){},isPersistent:Vr}),i}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=Xt(_r),Or=oe({},_r,{view:0,detail:0}),yd=Xt(Or),go,ns,Fs,Di=oe({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Fs&&(Fs&&n.type==="mousemove"?(go=n.screenX-Fs.screenX,ns=n.screenY-Fs.screenY):ns=go=0,Fs=n),go)},movementY:function(n){return"movementY"in n?n.movementY:ns}}),yo=Xt(Di),Pa=oe({},Di,{dataTransfer:0}),tu=Xt(Pa),vo=oe({},Or,{relatedTarget:0}),_o=Xt(vo),nu=oe({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),rs=Xt(nu),ru=oe({},_r,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),su=Xt(ru),iu=oe({},_r,{data:0}),ba=Xt(iu),wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function au(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ou[n])?!!i[n]:!1}function Lr(){return au}var u=oe({},Or,{key:function(n){if(n.key){var i=wo[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=po(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?yn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(n){return n.type==="keypress"?po(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?po(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Xt(u),_=oe({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Xt(_),F=oe({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),W=Xt(F),ae=oe({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),it=Xt(ae),Ft=oe({},Di,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Je=Xt(Ft),$t=[9,13,27,32],Nt=f&&"CompositionEvent"in window,nr=null;f&&"documentMode"in document&&(nr=document.documentMode);var Wn=f&&"TextEvent"in window&&!nr,Vi=f&&(!Nt||nr&&8<nr&&11>=nr),Eo=" ",bp=!1;function kp(n,i){switch(n){case"keyup":return $t.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Np(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Io=!1;function Nw(n,i){switch(n){case"compositionend":return Np(i);case"keypress":return i.which!==32?null:(bp=!0,Eo);case"textInput":return n=i.data,n===Eo&&bp?null:n;default:return null}}function Dw(n,i){if(Io)return n==="compositionend"||!Nt&&kp(n,i)?(n=Ra(),Rn=fo=Hn=null,Io=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Vi&&i.locale!=="ko"?null:i.data;default:return null}}var Vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Vw[n.type]:i==="textarea"}function Vp(n,i,a,c){Un(c),i=hu(i,"onChange"),0<i.length&&(a=new mo("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ka=null,Na=null;function Ow(n){Xp(n,0)}function lu(n){var i=Ro(n);if(ue(i))return n}function Lw(n,i){if(n==="change")return i}var Op=!1;if(f){var vd;if(f){var _d="oninput"in document;if(!_d){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),_d=typeof Lp.oninput=="function"}vd=_d}else vd=!1;Op=vd&&(!document.documentMode||9<document.documentMode)}function jp(){ka&&(ka.detachEvent("onpropertychange",Mp),Na=ka=null)}function Mp(n){if(n.propertyName==="value"&&lu(Na)){var i=[];Vp(i,Na,n,kr(n)),Rs(Ow,i)}}function jw(n,i,a){n==="focusin"?(jp(),ka=i,Na=a,ka.attachEvent("onpropertychange",Mp)):n==="focusout"&&jp()}function Mw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lu(Na)}function Fw(n,i){if(n==="click")return lu(i)}function Uw(n,i){if(n==="input"||n==="change")return lu(i)}function zw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var wr=typeof Object.is=="function"?Object.is:zw;function Da(n,i){if(wr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!m.call(i,h)||!wr(n[h],i[h]))return!1}return!0}function Fp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Up(n,i){var a=Fp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fp(a)}}function zp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?zp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Bp(){for(var n=window,i=re();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=re(n.document)}return i}function wd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Bw(n){var i=Bp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&zp(a.ownerDocument.documentElement,a)){if(c!==null&&wd(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,g=Math.min(c.start,h);c=c.end===void 0?g:Math.min(c.end,h),!n.extend&&g>c&&(h=c,c=g,g=h),h=Up(a,g);var w=Up(a,c);h&&w&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(h.node,h.offset),n.removeAllRanges(),g>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var $w=f&&"documentMode"in document&&11>=document.documentMode,To=null,Ed=null,Va=null,Id=!1;function $p(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Id||To==null||To!==re(c)||(c=To,"selectionStart"in c&&wd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Va&&Da(Va,c)||(Va=c,c=hu(Ed,"onSelect"),0<c.length&&(i=new mo("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=To)))}function uu(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var xo={animationend:uu("Animation","AnimationEnd"),animationiteration:uu("Animation","AnimationIteration"),animationstart:uu("Animation","AnimationStart"),transitionend:uu("Transition","TransitionEnd")},Td={},Hp={};f&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function cu(n){if(Td[n])return Td[n];if(!xo[n])return n;var i=xo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Hp)return Td[n]=i[a];return n}var Wp=cu("animationend"),qp=cu("animationiteration"),Gp=cu("animationstart"),Kp=cu("transitionend"),Qp=new Map,Yp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Us(n,i){Qp.set(n,i),l(i,[n])}for(var xd=0;xd<Yp.length;xd++){var Sd=Yp[xd],Hw=Sd.toLowerCase(),Ww=Sd[0].toUpperCase()+Sd.slice(1);Us(Hw,"on"+Ww)}Us(Wp,"onAnimationEnd"),Us(qp,"onAnimationIteration"),Us(Gp,"onAnimationStart"),Us("dblclick","onDoubleClick"),Us("focusin","onFocus"),Us("focusout","onBlur"),Us(Kp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function Jp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,rt(c,i,void 0,n),n.currentTarget=null}function Xp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var w=c.length-1;0<=w;w--){var A=c[w],k=A.instance,H=A.currentTarget;if(A=A.listener,k!==g&&h.isPropagationStopped())break e;Jp(h,A,H),g=k}else for(w=0;w<c.length;w++){if(A=c[w],k=A.instance,H=A.currentTarget,A=A.listener,k!==g&&h.isPropagationStopped())break e;Jp(h,A,H),g=k}}}if(Le)throw n=we,Le=!1,we=null,n}function mt(n,i){var a=i[Dd];a===void 0&&(a=i[Dd]=new Set);var c=n+"__bubble";a.has(c)||(Zp(i,n,2,!1),a.add(c))}function Cd(n,i,a){var c=0;i&&(c|=4),Zp(a,n,c,i)}var du="_reactListening"+Math.random().toString(36).slice(2);function La(n){if(!n[du]){n[du]=!0,s.forEach(function(a){a!=="selectionchange"&&(qw.has(a)||Cd(a,!1,n),Cd(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[du]||(i[du]=!0,Cd("selectionchange",!1,i))}}function Zp(n,i,a,c){switch(Ca(i)){case 1:var h=vt;break;case 4:h=gd;break;default:h=Sa}a=h.bind(null,i,a,n),h=void 0,!As||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(i,a,{capture:!0,passive:h}):n.addEventListener(i,a,!0):h!==void 0?n.addEventListener(i,a,{passive:h}):n.addEventListener(i,a,!1)}function Rd(n,i,a,c,h){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var A=c.stateNode.containerInfo;if(A===h||A.nodeType===8&&A.parentNode===h)break;if(w===4)for(w=c.return;w!==null;){var k=w.tag;if((k===3||k===4)&&(k=w.stateNode.containerInfo,k===h||k.nodeType===8&&k.parentNode===h))return;w=w.return}for(;A!==null;){if(w=Oi(A),w===null)return;if(k=w.tag,k===5||k===6){c=g=w;continue e}A=A.parentNode}}c=c.return}Rs(function(){var H=g,ee=kr(a),ne=[];e:{var Z=Qp.get(n);if(Z!==void 0){var fe=mo,Ee=n;switch(n){case"keypress":if(po(a)===0)break e;case"keydown":case"keyup":fe=p;break;case"focusin":Ee="focus",fe=_o;break;case"focusout":Ee="blur",fe=_o;break;case"beforeblur":case"afterblur":fe=_o;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=W;break;case Wp:case qp:case Gp:fe=rs;break;case Kp:fe=it;break;case"scroll":fe=yd;break;case"wheel":fe=Je;break;case"copy":case"cut":case"paste":fe=su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=T}var Te=(i&4)!==0,Pt=!Te&&n==="scroll",U=Te?Z!==null?Z+"Capture":null:Z;Te=[];for(var V=H,z;V!==null;){z=V;var se=z.stateNode;if(z.tag===5&&se!==null&&(z=se,U!==null&&(se=Et(V,U),se!=null&&Te.push(ja(V,se,z)))),Pt)break;V=V.return}0<Te.length&&(Z=new fe(Z,Ee,null,a,ee),ne.push({event:Z,listeners:Te}))}}if((i&7)===0){e:{if(Z=n==="mouseover"||n==="pointerover",fe=n==="mouseout"||n==="pointerout",Z&&a!==xn&&(Ee=a.relatedTarget||a.fromElement)&&(Oi(Ee)||Ee[ss]))break e;if((fe||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,fe?(Ee=a.relatedTarget||a.toElement,fe=H,Ee=Ee?Oi(Ee):null,Ee!==null&&(Pt=qe(Ee),Ee!==Pt||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(fe=null,Ee=H),fe!==Ee)){if(Te=yo,se="onMouseLeave",U="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Te=T,se="onPointerLeave",U="onPointerEnter",V="pointer"),Pt=fe==null?Z:Ro(fe),z=Ee==null?Z:Ro(Ee),Z=new Te(se,V+"leave",fe,a,ee),Z.target=Pt,Z.relatedTarget=z,se=null,Oi(ee)===H&&(Te=new Te(U,V+"enter",Ee,a,ee),Te.target=z,Te.relatedTarget=Pt,se=Te),Pt=se,fe&&Ee)t:{for(Te=fe,U=Ee,V=0,z=Te;z;z=So(z))V++;for(z=0,se=U;se;se=So(se))z++;for(;0<V-z;)Te=So(Te),V--;for(;0<z-V;)U=So(U),z--;for(;V--;){if(Te===U||U!==null&&Te===U.alternate)break t;Te=So(Te),U=So(U)}Te=null}else Te=null;fe!==null&&em(ne,Z,fe,Te,!1),Ee!==null&&Pt!==null&&em(ne,Pt,Ee,Te,!0)}}e:{if(Z=H?Ro(H):window,fe=Z.nodeName&&Z.nodeName.toLowerCase(),fe==="select"||fe==="input"&&Z.type==="file")var xe=Lw;else if(Dp(Z))if(Op)xe=Uw;else{xe=Mw;var Pe=jw}else(fe=Z.nodeName)&&fe.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(xe=Fw);if(xe&&(xe=xe(n,H))){Vp(ne,xe,a,ee);break e}Pe&&Pe(n,Z,H),n==="focusout"&&(Pe=Z._wrapperState)&&Pe.controlled&&Z.type==="number"&&Jn(Z,"number",Z.value)}switch(Pe=H?Ro(H):window,n){case"focusin":(Dp(Pe)||Pe.contentEditable==="true")&&(To=Pe,Ed=H,Va=null);break;case"focusout":Va=Ed=To=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,$p(ne,a,ee);break;case"selectionchange":if($w)break;case"keydown":case"keyup":$p(ne,a,ee)}var be;if(Nt)e:{switch(n){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Io?kp(n,a)&&(Oe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(Vi&&a.locale!=="ko"&&(Io||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Io&&(be=Ra()):(Hn=ee,fo="value"in Hn?Hn.value:Hn.textContent,Io=!0)),Pe=hu(H,Oe),0<Pe.length&&(Oe=new ba(Oe,n,null,a,ee),ne.push({event:Oe,listeners:Pe}),be?Oe.data=be:(be=Np(a),be!==null&&(Oe.data=be)))),(be=Wn?Nw(n,a):Dw(n,a))&&(H=hu(H,"onBeforeInput"),0<H.length&&(ee=new ba("onBeforeInput","beforeinput",null,a,ee),ne.push({event:ee,listeners:H}),ee.data=be))}Xp(ne,i)})}function ja(n,i,a){return{instance:n,listener:i,currentTarget:a}}function hu(n,i){for(var a=i+"Capture",c=[];n!==null;){var h=n,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=Et(n,a),g!=null&&c.unshift(ja(n,g,h)),g=Et(n,i),g!=null&&c.push(ja(n,g,h))),n=n.return}return c}function So(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function em(n,i,a,c,h){for(var g=i._reactName,w=[];a!==null&&a!==c;){var A=a,k=A.alternate,H=A.stateNode;if(k!==null&&k===c)break;A.tag===5&&H!==null&&(A=H,h?(k=Et(a,g),k!=null&&w.unshift(ja(a,k,A))):h||(k=Et(a,g),k!=null&&w.push(ja(a,k,A)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var Gw=/\r\n?/g,Kw=/\u0000|\uFFFD/g;function tm(n){return(typeof n=="string"?n:""+n).replace(Gw,`
`).replace(Kw,"")}function fu(n,i,a){if(i=tm(i),tm(n)!==i&&a)throw Error(t(425))}function pu(){}var Ad=null,Pd=null;function bd(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var kd=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,nm=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof nm<"u"?function(n){return nm.resolve(null).then(n).catch(Jw)}:kd;function Jw(n){setTimeout(function(){throw n})}function Nd(n,i){var a=i,c=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){n.removeChild(h),vr(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);vr(i)}function zs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function rm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Co=Math.random().toString(36).slice(2),jr="__reactFiber$"+Co,Ma="__reactProps$"+Co,ss="__reactContainer$"+Co,Dd="__reactEvents$"+Co,Xw="__reactListeners$"+Co,Zw="__reactHandles$"+Co;function Oi(n){var i=n[jr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[ss]||a[jr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=rm(n);n!==null;){if(a=n[jr])return a;n=rm(n)}return i}n=a,a=n.parentNode}return null}function Fa(n){return n=n[jr]||n[ss],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ro(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function mu(n){return n[Ma]||null}var Vd=[],Ao=-1;function Bs(n){return{current:n}}function gt(n){0>Ao||(n.current=Vd[Ao],Vd[Ao]=null,Ao--)}function ht(n,i){Ao++,Vd[Ao]=n.current,n.current=i}var $s={},sn=Bs($s),An=Bs(!1),Li=$s;function Po(n,i){var a=n.type.contextTypes;if(!a)return $s;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in a)h[g]=i[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=h),h}function Pn(n){return n=n.childContextTypes,n!=null}function gu(){gt(An),gt(sn)}function sm(n,i,a){if(sn.current!==$s)throw Error(t(168));ht(sn,i),ht(An,a)}function im(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in i))throw Error(t(108,Be(n)||"Unknown",h));return oe({},a,c)}function yu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||$s,Li=sn.current,ht(sn,n),ht(An,An.current),!0}function om(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=im(n,i,Li),c.__reactInternalMemoizedMergedChildContext=n,gt(An),gt(sn),ht(sn,n)):gt(An),ht(An,a)}var is=null,vu=!1,Od=!1;function am(n){is===null?is=[n]:is.push(n)}function eE(n){vu=!0,am(n)}function Hs(){if(!Od&&is!==null){Od=!0;var n=0,i=Ye;try{var a=is;for(Ye=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}is=null,vu=!1}catch(h){throw is!==null&&(is=is.slice(n+1)),Ci(Ri,Hs),h}finally{Ye=i,Od=!1}}return null}var bo=[],ko=0,_u=null,wu=0,rr=[],sr=0,ji=null,os=1,as="";function Mi(n,i){bo[ko++]=wu,bo[ko++]=_u,_u=n,wu=i}function lm(n,i,a){rr[sr++]=os,rr[sr++]=as,rr[sr++]=ji,ji=n;var c=os;n=as;var h=32-gn(c)-1;c&=~(1<<h),a+=1;var g=32-gn(i)+h;if(30<g){var w=h-h%5;g=(c&(1<<w)-1).toString(32),c>>=w,h-=w,os=1<<32-gn(i)+h|a<<h|c,as=g+n}else os=1<<g|a<<h|c,as=n}function Ld(n){n.return!==null&&(Mi(n,1),lm(n,1,0))}function jd(n){for(;n===_u;)_u=bo[--ko],bo[ko]=null,wu=bo[--ko],bo[ko]=null;for(;n===ji;)ji=rr[--sr],rr[sr]=null,as=rr[--sr],rr[sr]=null,os=rr[--sr],rr[sr]=null}var qn=null,Gn=null,_t=!1,Er=null;function um(n,i){var a=lr(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function cm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,qn=n,Gn=zs(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,qn=n,Gn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=ji!==null?{id:os,overflow:as}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=lr(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,qn=n,Gn=null,!0):!1;default:return!1}}function Md(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Fd(n){if(_t){var i=Gn;if(i){var a=i;if(!cm(n,i)){if(Md(n))throw Error(t(418));i=zs(a.nextSibling);var c=qn;i&&cm(n,i)?um(c,a):(n.flags=n.flags&-4097|2,_t=!1,qn=n)}}else{if(Md(n))throw Error(t(418));n.flags=n.flags&-4097|2,_t=!1,qn=n}}}function dm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;qn=n}function Eu(n){if(n!==qn)return!1;if(!_t)return dm(n),_t=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!bd(n.type,n.memoizedProps)),i&&(i=Gn)){if(Md(n))throw hm(),Error(t(418));for(;i;)um(n,i),i=zs(i.nextSibling)}if(dm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Gn=zs(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Gn=null}}else Gn=qn?zs(n.stateNode.nextSibling):null;return!0}function hm(){for(var n=Gn;n;)n=zs(n.nextSibling)}function No(){Gn=qn=null,_t=!1}function Ud(n){Er===null?Er=[n]:Er.push(n)}var tE=_e.ReactCurrentBatchConfig;function Ua(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var h=c,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(w){var A=h.refs;w===null?delete A[g]:A[g]=w},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Iu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function fm(n){var i=n._init;return i(n._payload)}function pm(n){function i(U,V){if(n){var z=U.deletions;z===null?(U.deletions=[V],U.flags|=16):z.push(V)}}function a(U,V){if(!n)return null;for(;V!==null;)i(U,V),V=V.sibling;return null}function c(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function h(U,V){return U=Xs(U,V),U.index=0,U.sibling=null,U}function g(U,V,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<V?(U.flags|=2,V):z):(U.flags|=2,V)):(U.flags|=1048576,V)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function A(U,V,z,se){return V===null||V.tag!==6?(V=kh(z,U.mode,se),V.return=U,V):(V=h(V,z),V.return=U,V)}function k(U,V,z,se){var xe=z.type;return xe===P?ee(U,V,z.props.children,se,z.key):V!==null&&(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ut&&fm(xe)===V.type)?(se=h(V,z.props),se.ref=Ua(U,V,z),se.return=U,se):(se=qu(z.type,z.key,z.props,null,U.mode,se),se.ref=Ua(U,V,z),se.return=U,se)}function H(U,V,z,se){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Nh(z,U.mode,se),V.return=U,V):(V=h(V,z.children||[]),V.return=U,V)}function ee(U,V,z,se,xe){return V===null||V.tag!==7?(V=qi(z,U.mode,se,xe),V.return=U,V):(V=h(V,z),V.return=U,V)}function ne(U,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=kh(""+V,U.mode,z),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ce:return z=qu(V.type,V.key,V.props,null,U.mode,z),z.ref=Ua(U,null,V),z.return=U,z;case Ie:return V=Nh(V,U.mode,z),V.return=U,V;case ut:var se=V._init;return ne(U,se(V._payload),z)}if(kt(V)||ge(V))return V=qi(V,U.mode,z,null),V.return=U,V;Iu(U,V)}return null}function Z(U,V,z,se){var xe=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return xe!==null?null:A(U,V,""+z,se);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ce:return z.key===xe?k(U,V,z,se):null;case Ie:return z.key===xe?H(U,V,z,se):null;case ut:return xe=z._init,Z(U,V,xe(z._payload),se)}if(kt(z)||ge(z))return xe!==null?null:ee(U,V,z,se,null);Iu(U,z)}return null}function fe(U,V,z,se,xe){if(typeof se=="string"&&se!==""||typeof se=="number")return U=U.get(z)||null,A(V,U,""+se,xe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case ce:return U=U.get(se.key===null?z:se.key)||null,k(V,U,se,xe);case Ie:return U=U.get(se.key===null?z:se.key)||null,H(V,U,se,xe);case ut:var Pe=se._init;return fe(U,V,z,Pe(se._payload),xe)}if(kt(se)||ge(se))return U=U.get(z)||null,ee(V,U,se,xe,null);Iu(V,se)}return null}function Ee(U,V,z,se){for(var xe=null,Pe=null,be=V,Oe=V=0,qt=null;be!==null&&Oe<z.length;Oe++){be.index>Oe?(qt=be,be=null):qt=be.sibling;var tt=Z(U,be,z[Oe],se);if(tt===null){be===null&&(be=qt);break}n&&be&&tt.alternate===null&&i(U,be),V=g(tt,V,Oe),Pe===null?xe=tt:Pe.sibling=tt,Pe=tt,be=qt}if(Oe===z.length)return a(U,be),_t&&Mi(U,Oe),xe;if(be===null){for(;Oe<z.length;Oe++)be=ne(U,z[Oe],se),be!==null&&(V=g(be,V,Oe),Pe===null?xe=be:Pe.sibling=be,Pe=be);return _t&&Mi(U,Oe),xe}for(be=c(U,be);Oe<z.length;Oe++)qt=fe(be,U,Oe,z[Oe],se),qt!==null&&(n&&qt.alternate!==null&&be.delete(qt.key===null?Oe:qt.key),V=g(qt,V,Oe),Pe===null?xe=qt:Pe.sibling=qt,Pe=qt);return n&&be.forEach(function(Zs){return i(U,Zs)}),_t&&Mi(U,Oe),xe}function Te(U,V,z,se){var xe=ge(z);if(typeof xe!="function")throw Error(t(150));if(z=xe.call(z),z==null)throw Error(t(151));for(var Pe=xe=null,be=V,Oe=V=0,qt=null,tt=z.next();be!==null&&!tt.done;Oe++,tt=z.next()){be.index>Oe?(qt=be,be=null):qt=be.sibling;var Zs=Z(U,be,tt.value,se);if(Zs===null){be===null&&(be=qt);break}n&&be&&Zs.alternate===null&&i(U,be),V=g(Zs,V,Oe),Pe===null?xe=Zs:Pe.sibling=Zs,Pe=Zs,be=qt}if(tt.done)return a(U,be),_t&&Mi(U,Oe),xe;if(be===null){for(;!tt.done;Oe++,tt=z.next())tt=ne(U,tt.value,se),tt!==null&&(V=g(tt,V,Oe),Pe===null?xe=tt:Pe.sibling=tt,Pe=tt);return _t&&Mi(U,Oe),xe}for(be=c(U,be);!tt.done;Oe++,tt=z.next())tt=fe(be,U,Oe,tt.value,se),tt!==null&&(n&&tt.alternate!==null&&be.delete(tt.key===null?Oe:tt.key),V=g(tt,V,Oe),Pe===null?xe=tt:Pe.sibling=tt,Pe=tt);return n&&be.forEach(function(VE){return i(U,VE)}),_t&&Mi(U,Oe),xe}function Pt(U,V,z,se){if(typeof z=="object"&&z!==null&&z.type===P&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case ce:e:{for(var xe=z.key,Pe=V;Pe!==null;){if(Pe.key===xe){if(xe=z.type,xe===P){if(Pe.tag===7){a(U,Pe.sibling),V=h(Pe,z.props.children),V.return=U,U=V;break e}}else if(Pe.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ut&&fm(xe)===Pe.type){a(U,Pe.sibling),V=h(Pe,z.props),V.ref=Ua(U,Pe,z),V.return=U,U=V;break e}a(U,Pe);break}else i(U,Pe);Pe=Pe.sibling}z.type===P?(V=qi(z.props.children,U.mode,se,z.key),V.return=U,U=V):(se=qu(z.type,z.key,z.props,null,U.mode,se),se.ref=Ua(U,V,z),se.return=U,U=se)}return w(U);case Ie:e:{for(Pe=z.key;V!==null;){if(V.key===Pe)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(U,V.sibling),V=h(V,z.children||[]),V.return=U,U=V;break e}else{a(U,V);break}else i(U,V);V=V.sibling}V=Nh(z,U.mode,se),V.return=U,U=V}return w(U);case ut:return Pe=z._init,Pt(U,V,Pe(z._payload),se)}if(kt(z))return Ee(U,V,z,se);if(ge(z))return Te(U,V,z,se);Iu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(U,V.sibling),V=h(V,z),V.return=U,U=V):(a(U,V),V=kh(z,U.mode,se),V.return=U,U=V),w(U)):a(U,V)}return Pt}var Do=pm(!0),mm=pm(!1),Tu=Bs(null),xu=null,Vo=null,zd=null;function Bd(){zd=Vo=xu=null}function $d(n){var i=Tu.current;gt(Tu),n._currentValue=i}function Hd(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function Oo(n,i){xu=n,zd=Vo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(bn=!0),n.firstContext=null)}function ir(n){var i=n._currentValue;if(zd!==n)if(n={context:n,memoizedValue:i,next:null},Vo===null){if(xu===null)throw Error(t(308));Vo=n,xu.dependencies={lanes:0,firstContext:n}}else Vo=Vo.next=n;return i}var Fi=null;function Wd(n){Fi===null?Fi=[n]:Fi.push(n)}function gm(n,i,a,c){var h=i.interleaved;return h===null?(a.next=a,Wd(i)):(a.next=h.next,h.next=a),i.interleaved=a,ls(n,c)}function ls(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Ws=!1;function qd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function us(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function qs(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(et&2)!==0){var h=c.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),c.pending=i,ls(n,a)}return h=c.interleaved,h===null?(i.next=i,Wd(c)):(i.next=h.next,h.next=i),c.interleaved=i,ls(n,a)}function Su(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Os(n,a)}}function vm(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?h=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?h=g=i:g=g.next=i}else h=g=i;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Cu(n,i,a,c){var h=n.updateQueue;Ws=!1;var g=h.firstBaseUpdate,w=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var k=A,H=k.next;k.next=null,w===null?g=H:w.next=H,w=k;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,A=ee.lastBaseUpdate,A!==w&&(A===null?ee.firstBaseUpdate=H:A.next=H,ee.lastBaseUpdate=k))}if(g!==null){var ne=h.baseState;w=0,ee=H=k=null,A=g;do{var Z=A.lane,fe=A.eventTime;if((c&Z)===Z){ee!==null&&(ee=ee.next={eventTime:fe,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Ee=n,Te=A;switch(Z=i,fe=a,Te.tag){case 1:if(Ee=Te.payload,typeof Ee=="function"){ne=Ee.call(fe,ne,Z);break e}ne=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Te.payload,Z=typeof Ee=="function"?Ee.call(fe,ne,Z):Ee,Z==null)break e;ne=oe({},ne,Z);break e;case 2:Ws=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,Z=h.effects,Z===null?h.effects=[A]:Z.push(A))}else fe={eventTime:fe,lane:Z,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ee===null?(H=ee=fe,k=ne):ee=ee.next=fe,w|=Z;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;Z=A,A=Z.next,Z.next=null,h.lastBaseUpdate=Z,h.shared.pending=null}}while(!0);if(ee===null&&(k=ne),h.baseState=k,h.firstBaseUpdate=H,h.lastBaseUpdate=ee,i=h.shared.interleaved,i!==null){h=i;do w|=h.lane,h=h.next;while(h!==i)}else g===null&&(h.shared.lanes=0);Bi|=w,n.lanes=w,n.memoizedState=ne}}function _m(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(t(191,h));h.call(c)}}}var za={},Mr=Bs(za),Ba=Bs(za),$a=Bs(za);function Ui(n){if(n===za)throw Error(t(174));return n}function Gd(n,i){switch(ht($a,i),ht(Ba,n),ht(Mr,za),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ie(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ie(i,n)}gt(Mr),ht(Mr,i)}function Lo(){gt(Mr),gt(Ba),gt($a)}function wm(n){Ui($a.current);var i=Ui(Mr.current),a=ie(i,n.type);i!==a&&(ht(Ba,n),ht(Mr,a))}function Kd(n){Ba.current===n&&(gt(Mr),gt(Ba))}var It=Bs(0);function Ru(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Qd=[];function Yd(){for(var n=0;n<Qd.length;n++)Qd[n]._workInProgressVersionPrimary=null;Qd.length=0}var Au=_e.ReactCurrentDispatcher,Jd=_e.ReactCurrentBatchConfig,zi=0,Tt=null,Ut=null,Ht=null,Pu=!1,Ha=!1,Wa=0,nE=0;function on(){throw Error(t(321))}function Xd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!wr(n[a],i[a]))return!1;return!0}function Zd(n,i,a,c,h,g){if(zi=g,Tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Au.current=n===null||n.memoizedState===null?oE:aE,n=a(c,h),Ha){g=0;do{if(Ha=!1,Wa=0,25<=g)throw Error(t(301));g+=1,Ht=Ut=null,i.updateQueue=null,Au.current=lE,n=a(c,h)}while(Ha)}if(Au.current=Nu,i=Ut!==null&&Ut.next!==null,zi=0,Ht=Ut=Tt=null,Pu=!1,i)throw Error(t(300));return n}function eh(){var n=Wa!==0;return Wa=0,n}function Fr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Tt.memoizedState=Ht=n:Ht=Ht.next=n,Ht}function or(){if(Ut===null){var n=Tt.alternate;n=n!==null?n.memoizedState:null}else n=Ut.next;var i=Ht===null?Tt.memoizedState:Ht.next;if(i!==null)Ht=i,Ut=n;else{if(n===null)throw Error(t(310));Ut=n,n={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Ht===null?Tt.memoizedState=Ht=n:Ht=Ht.next=n}return Ht}function qa(n,i){return typeof i=="function"?i(n):i}function th(n){var i=or(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Ut,h=c.baseQueue,g=a.pending;if(g!==null){if(h!==null){var w=h.next;h.next=g.next,g.next=w}c.baseQueue=h=g,a.pending=null}if(h!==null){g=h.next,c=c.baseState;var A=w=null,k=null,H=g;do{var ee=H.lane;if((zi&ee)===ee)k!==null&&(k=k.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),c=H.hasEagerState?H.eagerState:n(c,H.action);else{var ne={lane:ee,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};k===null?(A=k=ne,w=c):k=k.next=ne,Tt.lanes|=ee,Bi|=ee}H=H.next}while(H!==null&&H!==g);k===null?w=c:k.next=A,wr(c,i.memoizedState)||(bn=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=k,a.lastRenderedState=c}if(n=a.interleaved,n!==null){h=n;do g=h.lane,Tt.lanes|=g,Bi|=g,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function nh(n){var i=or(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,g=i.memoizedState;if(h!==null){a.pending=null;var w=h=h.next;do g=n(g,w.action),w=w.next;while(w!==h);wr(g,i.memoizedState)||(bn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function Em(){}function Im(n,i){var a=Tt,c=or(),h=i(),g=!wr(c.memoizedState,h);if(g&&(c.memoizedState=h,bn=!0),c=c.queue,rh(Sm.bind(null,a,c,n),[n]),c.getSnapshot!==i||g||Ht!==null&&Ht.memoizedState.tag&1){if(a.flags|=2048,Ga(9,xm.bind(null,a,c,h,i),void 0,null),Wt===null)throw Error(t(349));(zi&30)!==0||Tm(a,i,h)}return h}function Tm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Tt.updateQueue,i===null?(i={lastEffect:null,stores:null},Tt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function xm(n,i,a,c){i.value=a,i.getSnapshot=c,Cm(i)&&Rm(n)}function Sm(n,i,a){return a(function(){Cm(i)&&Rm(n)})}function Cm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!wr(n,a)}catch{return!0}}function Rm(n){var i=ls(n,1);i!==null&&Sr(i,n,1,-1)}function Am(n){var i=Fr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:n},i.queue=n,n=n.dispatch=iE.bind(null,Tt,n),[i.memoizedState,n]}function Ga(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=Tt.updateQueue,i===null?(i={lastEffect:null,stores:null},Tt.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Pm(){return or().memoizedState}function bu(n,i,a,c){var h=Fr();Tt.flags|=n,h.memoizedState=Ga(1|i,a,void 0,c===void 0?null:c)}function ku(n,i,a,c){var h=or();c=c===void 0?null:c;var g=void 0;if(Ut!==null){var w=Ut.memoizedState;if(g=w.destroy,c!==null&&Xd(c,w.deps)){h.memoizedState=Ga(i,a,g,c);return}}Tt.flags|=n,h.memoizedState=Ga(1|i,a,g,c)}function bm(n,i){return bu(8390656,8,n,i)}function rh(n,i){return ku(2048,8,n,i)}function km(n,i){return ku(4,2,n,i)}function Nm(n,i){return ku(4,4,n,i)}function Dm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Vm(n,i,a){return a=a!=null?a.concat([n]):null,ku(4,4,Dm.bind(null,i,n),a)}function sh(){}function Om(n,i){var a=or();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Xd(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Lm(n,i){var a=or();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Xd(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function jm(n,i,a){return(zi&21)===0?(n.baseState&&(n.baseState=!1,bn=!0),n.memoizedState=a):(wr(a,i)||(a=bi(),Tt.lanes|=a,Bi|=a,n.baseState=!0),i)}function rE(n,i){var a=Ye;Ye=a!==0&&4>a?a:4,n(!0);var c=Jd.transition;Jd.transition={};try{n(!1),i()}finally{Ye=a,Jd.transition=c}}function Mm(){return or().memoizedState}function sE(n,i,a){var c=Ys(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Fm(n))Um(i,a);else if(a=gm(n,i,a,c),a!==null){var h=_n();Sr(a,n,c,h),zm(a,i,c)}}function iE(n,i,a){var c=Ys(n),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fm(n))Um(i,h);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var w=i.lastRenderedState,A=g(w,a);if(h.hasEagerState=!0,h.eagerState=A,wr(A,w)){var k=i.interleaved;k===null?(h.next=h,Wd(i)):(h.next=k.next,k.next=h),i.interleaved=h;return}}catch{}finally{}a=gm(n,i,h,c),a!==null&&(h=_n(),Sr(a,n,c,h),zm(a,i,c))}}function Fm(n){var i=n.alternate;return n===Tt||i!==null&&i===Tt}function Um(n,i){Ha=Pu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function zm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Os(n,a)}}var Nu={readContext:ir,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},oE={readContext:ir,useCallback:function(n,i){return Fr().memoizedState=[n,i===void 0?null:i],n},useContext:ir,useEffect:bm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,bu(4194308,4,Dm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return bu(4194308,4,n,i)},useInsertionEffect:function(n,i){return bu(4,2,n,i)},useMemo:function(n,i){var a=Fr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Fr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=sE.bind(null,Tt,n),[c.memoizedState,n]},useRef:function(n){var i=Fr();return n={current:n},i.memoizedState=n},useState:Am,useDebugValue:sh,useDeferredValue:function(n){return Fr().memoizedState=n},useTransition:function(){var n=Am(!1),i=n[0];return n=rE.bind(null,n[1]),Fr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=Tt,h=Fr();if(_t){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Wt===null)throw Error(t(349));(zi&30)!==0||Tm(c,i,a)}h.memoizedState=a;var g={value:a,getSnapshot:i};return h.queue=g,bm(Sm.bind(null,c,g,n),[n]),c.flags|=2048,Ga(9,xm.bind(null,c,g,a,i),void 0,null),a},useId:function(){var n=Fr(),i=Wt.identifierPrefix;if(_t){var a=as,c=os;a=(c&~(1<<32-gn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Wa++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=nE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},aE={readContext:ir,useCallback:Om,useContext:ir,useEffect:rh,useImperativeHandle:Vm,useInsertionEffect:km,useLayoutEffect:Nm,useMemo:Lm,useReducer:th,useRef:Pm,useState:function(){return th(qa)},useDebugValue:sh,useDeferredValue:function(n){var i=or();return jm(i,Ut.memoizedState,n)},useTransition:function(){var n=th(qa)[0],i=or().memoizedState;return[n,i]},useMutableSource:Em,useSyncExternalStore:Im,useId:Mm,unstable_isNewReconciler:!1},lE={readContext:ir,useCallback:Om,useContext:ir,useEffect:rh,useImperativeHandle:Vm,useInsertionEffect:km,useLayoutEffect:Nm,useMemo:Lm,useReducer:nh,useRef:Pm,useState:function(){return nh(qa)},useDebugValue:sh,useDeferredValue:function(n){var i=or();return Ut===null?i.memoizedState=n:jm(i,Ut.memoizedState,n)},useTransition:function(){var n=nh(qa)[0],i=or().memoizedState;return[n,i]},useMutableSource:Em,useSyncExternalStore:Im,useId:Mm,unstable_isNewReconciler:!1};function Ir(n,i){if(n&&n.defaultProps){i=oe({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function ih(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:oe({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Du={isMounted:function(n){return(n=n._reactInternals)?qe(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=_n(),h=Ys(n),g=us(c,h);g.payload=i,a!=null&&(g.callback=a),i=qs(n,g,h),i!==null&&(Sr(i,n,h,c),Su(i,n,h))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=_n(),h=Ys(n),g=us(c,h);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=qs(n,g,h),i!==null&&(Sr(i,n,h,c),Su(i,n,h))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=_n(),c=Ys(n),h=us(a,c);h.tag=2,i!=null&&(h.callback=i),i=qs(n,h,c),i!==null&&(Sr(i,n,c,a),Su(i,n,c))}};function Bm(n,i,a,c,h,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):i.prototype&&i.prototype.isPureReactComponent?!Da(a,c)||!Da(h,g):!0}function $m(n,i,a){var c=!1,h=$s,g=i.contextType;return typeof g=="object"&&g!==null?g=ir(g):(h=Pn(i)?Li:sn.current,c=i.contextTypes,g=(c=c!=null)?Po(n,h):$s),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Du,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=g),i}function Hm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Du.enqueueReplaceState(i,i.state,null)}function oh(n,i,a,c){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},qd(n);var g=i.contextType;typeof g=="object"&&g!==null?h.context=ir(g):(g=Pn(i)?Li:sn.current,h.context=Po(n,g)),h.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(ih(n,i,g,a),h.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(i=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),i!==h.state&&Du.enqueueReplaceState(h,h.state,null),Cu(n,a,h,c),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function jo(n,i){try{var a="",c=i;do a+=ke(c),c=c.return;while(c);var h=a}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:h,digest:null}}function ah(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function lh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var uE=typeof WeakMap=="function"?WeakMap:Map;function Wm(n,i,a){a=us(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Uu||(Uu=!0,Th=c),lh(n,i)},a}function qm(n,i,a){a=us(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=i.value;a.payload=function(){return c(h)},a.callback=function(){lh(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){lh(n,i),typeof c!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Gm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new uE;var h=new Set;c.set(i,h)}else h=c.get(i),h===void 0&&(h=new Set,c.set(i,h));h.has(a)||(h.add(a),n=TE.bind(null,n,i,a),i.then(n,n))}function Km(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Qm(n,i,a,c,h){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=us(-1,1),i.tag=2,qs(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var cE=_e.ReactCurrentOwner,bn=!1;function vn(n,i,a,c){i.child=n===null?mm(i,null,a,c):Do(i,n.child,a,c)}function Ym(n,i,a,c,h){a=a.render;var g=i.ref;return Oo(i,h),c=Zd(n,i,a,c,g,h),a=eh(),n!==null&&!bn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,cs(n,i,h)):(_t&&a&&Ld(i),i.flags|=1,vn(n,i,c,h),i.child)}function Jm(n,i,a,c,h){if(n===null){var g=a.type;return typeof g=="function"&&!bh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Xm(n,i,g,c,h)):(n=qu(a.type,null,c,i,i.mode,h),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&h)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Da,a(w,c)&&n.ref===i.ref)return cs(n,i,h)}return i.flags|=1,n=Xs(g,c),n.ref=i.ref,n.return=i,i.child=n}function Xm(n,i,a,c,h){if(n!==null){var g=n.memoizedProps;if(Da(g,c)&&n.ref===i.ref)if(bn=!1,i.pendingProps=c=g,(n.lanes&h)!==0)(n.flags&131072)!==0&&(bn=!0);else return i.lanes=n.lanes,cs(n,i,h)}return uh(n,i,a,c,h)}function Zm(n,i,a){var c=i.pendingProps,h=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(Fo,Kn),Kn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,ht(Fo,Kn),Kn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,ht(Fo,Kn),Kn|=c}else g!==null?(c=g.baseLanes|a,i.memoizedState=null):c=a,ht(Fo,Kn),Kn|=c;return vn(n,i,h,a),i.child}function eg(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function uh(n,i,a,c,h){var g=Pn(a)?Li:sn.current;return g=Po(i,g),Oo(i,h),a=Zd(n,i,a,c,g,h),c=eh(),n!==null&&!bn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,cs(n,i,h)):(_t&&c&&Ld(i),i.flags|=1,vn(n,i,a,h),i.child)}function tg(n,i,a,c,h){if(Pn(a)){var g=!0;yu(i)}else g=!1;if(Oo(i,h),i.stateNode===null)Ou(n,i),$m(i,a,c),oh(i,a,c,h),c=!0;else if(n===null){var w=i.stateNode,A=i.memoizedProps;w.props=A;var k=w.context,H=a.contextType;typeof H=="object"&&H!==null?H=ir(H):(H=Pn(a)?Li:sn.current,H=Po(i,H));var ee=a.getDerivedStateFromProps,ne=typeof ee=="function"||typeof w.getSnapshotBeforeUpdate=="function";ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==c||k!==H)&&Hm(i,w,c,H),Ws=!1;var Z=i.memoizedState;w.state=Z,Cu(i,c,w,h),k=i.memoizedState,A!==c||Z!==k||An.current||Ws?(typeof ee=="function"&&(ih(i,a,ee,c),k=i.memoizedState),(A=Ws||Bm(i,a,A,c,Z,k,H))?(ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=k),w.props=c,w.state=k,w.context=H,c=A):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,ym(n,i),A=i.memoizedProps,H=i.type===i.elementType?A:Ir(i.type,A),w.props=H,ne=i.pendingProps,Z=w.context,k=a.contextType,typeof k=="object"&&k!==null?k=ir(k):(k=Pn(a)?Li:sn.current,k=Po(i,k));var fe=a.getDerivedStateFromProps;(ee=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==ne||Z!==k)&&Hm(i,w,c,k),Ws=!1,Z=i.memoizedState,w.state=Z,Cu(i,c,w,h);var Ee=i.memoizedState;A!==ne||Z!==Ee||An.current||Ws?(typeof fe=="function"&&(ih(i,a,fe,c),Ee=i.memoizedState),(H=Ws||Bm(i,a,H,c,Z,Ee,k)||!1)?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,Ee,k),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,Ee,k)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&Z===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Z===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Ee),w.props=c,w.state=Ee,w.context=k,c=H):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&Z===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Z===n.memoizedState||(i.flags|=1024),c=!1)}return ch(n,i,a,c,g,h)}function ch(n,i,a,c,h,g){eg(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return h&&om(i,a,!1),cs(n,i,g);c=i.stateNode,cE.current=i;var A=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=Do(i,n.child,null,g),i.child=Do(i,null,A,g)):vn(n,i,A,g),i.memoizedState=c.state,h&&om(i,a,!0),i.child}function ng(n){var i=n.stateNode;i.pendingContext?sm(n,i.pendingContext,i.pendingContext!==i.context):i.context&&sm(n,i.context,!1),Gd(n,i.containerInfo)}function rg(n,i,a,c,h){return No(),Ud(h),i.flags|=256,vn(n,i,a,c),i.child}var dh={dehydrated:null,treeContext:null,retryLane:0};function hh(n){return{baseLanes:n,cachePool:null,transitions:null}}function sg(n,i,a){var c=i.pendingProps,h=It.current,g=!1,w=(i.flags&128)!==0,A;if((A=w)||(A=n!==null&&n.memoizedState===null?!1:(h&2)!==0),A?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),ht(It,h&1),n===null)return Fd(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,g?(c=i.mode,g=i.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Gu(w,c,0,null),n=qi(n,c,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=hh(a),i.memoizedState=dh,n):fh(i,w));if(h=n.memoizedState,h!==null&&(A=h.dehydrated,A!==null))return dE(n,i,w,c,A,h,a);if(g){g=c.fallback,w=i.mode,h=n.child,A=h.sibling;var k={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==h?(c=i.child,c.childLanes=0,c.pendingProps=k,i.deletions=null):(c=Xs(h,k),c.subtreeFlags=h.subtreeFlags&14680064),A!==null?g=Xs(A,g):(g=qi(g,w,a,null),g.flags|=2),g.return=i,c.return=i,c.sibling=g,i.child=c,c=g,g=i.child,w=n.child.memoizedState,w=w===null?hh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,i.memoizedState=dh,c}return g=n.child,n=g.sibling,c=Xs(g,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function fh(n,i){return i=Gu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Vu(n,i,a,c){return c!==null&&Ud(c),Do(i,n.child,null,a),n=fh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function dE(n,i,a,c,h,g,w){if(a)return i.flags&256?(i.flags&=-257,c=ah(Error(t(422))),Vu(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=c.fallback,h=i.mode,c=Gu({mode:"visible",children:c.children},h,0,null),g=qi(g,h,w,null),g.flags|=2,c.return=i,g.return=i,c.sibling=g,i.child=c,(i.mode&1)!==0&&Do(i,n.child,null,w),i.child.memoizedState=hh(w),i.memoizedState=dh,g);if((i.mode&1)===0)return Vu(n,i,w,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var A=c.dgst;return c=A,g=Error(t(419)),c=ah(g,c,void 0),Vu(n,i,w,c)}if(A=(w&n.childLanes)!==0,bn||A){if(c=Wt,c!==null){switch(w&-w){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|w))!==0?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,ls(n,h),Sr(c,n,h,-1))}return Ph(),c=ah(Error(t(421))),Vu(n,i,w,c)}return h.data==="$?"?(i.flags|=128,i.child=n.child,i=xE.bind(null,n),h._reactRetry=i,null):(n=g.treeContext,Gn=zs(h.nextSibling),qn=i,_t=!0,Er=null,n!==null&&(rr[sr++]=os,rr[sr++]=as,rr[sr++]=ji,os=n.id,as=n.overflow,ji=i),i=fh(i,c.children),i.flags|=4096,i)}function ig(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Hd(n.return,i,a)}function ph(n,i,a,c,h){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=h)}function og(n,i,a){var c=i.pendingProps,h=c.revealOrder,g=c.tail;if(vn(n,i,c.children,a),c=It.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ig(n,a,i);else if(n.tag===19)ig(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(ht(It,c),(i.mode&1)===0)i.memoizedState=null;else switch(h){case"forwards":for(a=i.child,h=null;a!==null;)n=a.alternate,n!==null&&Ru(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),ph(i,!1,h,a,g);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(n=h.alternate,n!==null&&Ru(n)===null){i.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}ph(i,!0,a,null,g);break;case"together":ph(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ou(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function cs(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Bi|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Xs(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Xs(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function hE(n,i,a){switch(i.tag){case 3:ng(i),No();break;case 5:wm(i);break;case 1:Pn(i.type)&&yu(i);break;case 4:Gd(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,h=i.memoizedProps.value;ht(Tu,c._currentValue),c._currentValue=h;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(ht(It,It.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?sg(n,i,a):(ht(It,It.current&1),n=cs(n,i,a),n!==null?n.sibling:null);ht(It,It.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return og(n,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ht(It,It.current),c)break;return null;case 22:case 23:return i.lanes=0,Zm(n,i,a)}return cs(n,i,a)}var ag,mh,lg,ug;ag=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},mh=function(){},lg=function(n,i,a,c){var h=n.memoizedProps;if(h!==c){n=i.stateNode,Ui(Mr.current);var g=null;switch(a){case"input":h=de(n,h),c=de(n,c),g=[];break;case"select":h=oe({},h,{value:void 0}),c=oe({},c,{value:void 0}),g=[];break;case"textarea":h=Mn(n,h),c=Mn(n,c),g=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=pu)}Ss(a,c);var w;a=null;for(H in h)if(!c.hasOwnProperty(H)&&h.hasOwnProperty(H)&&h[H]!=null)if(H==="style"){var A=h[H];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?g||(g=[]):(g=g||[]).push(H,null));for(H in c){var k=c[H];if(A=h!=null?h[H]:void 0,c.hasOwnProperty(H)&&k!==A&&(k!=null||A!=null))if(H==="style")if(A){for(w in A)!A.hasOwnProperty(w)||k&&k.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in k)k.hasOwnProperty(w)&&A[w]!==k[w]&&(a||(a={}),a[w]=k[w])}else a||(g||(g=[]),g.push(H,a)),a=k;else H==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,A=A?A.__html:void 0,k!=null&&A!==k&&(g=g||[]).push(H,k)):H==="children"?typeof k!="string"&&typeof k!="number"||(g=g||[]).push(H,""+k):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(k!=null&&H==="onScroll"&&mt("scroll",n),g||A===k||(g=[])):(g=g||[]).push(H,k))}a&&(g=g||[]).push("style",a);var H=g;(i.updateQueue=H)&&(i.flags|=4)}},ug=function(n,i,a,c){a!==c&&(i.flags|=4)};function Ka(n,i){if(!_t)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function an(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function fE(n,i,a){var c=i.pendingProps;switch(jd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(i),null;case 1:return Pn(i.type)&&gu(),an(i),null;case 3:return c=i.stateNode,Lo(),gt(An),gt(sn),Yd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Eu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Er!==null&&(Ch(Er),Er=null))),mh(n,i),an(i),null;case 5:Kd(i);var h=Ui($a.current);if(a=i.type,n!==null&&i.stateNode!=null)lg(n,i,a,c,h),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return an(i),null}if(n=Ui(Mr.current),Eu(i)){c=i.stateNode,a=i.type;var g=i.memoizedProps;switch(c[jr]=i,c[Ma]=g,n=(i.mode&1)!==0,a){case"dialog":mt("cancel",c),mt("close",c);break;case"iframe":case"object":case"embed":mt("load",c);break;case"video":case"audio":for(h=0;h<Oa.length;h++)mt(Oa[h],c);break;case"source":mt("error",c);break;case"img":case"image":case"link":mt("error",c),mt("load",c);break;case"details":mt("toggle",c);break;case"input":Me(c,g),mt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},mt("invalid",c);break;case"textarea":In(c,g),mt("invalid",c)}Ss(a,g),h=null;for(var w in g)if(g.hasOwnProperty(w)){var A=g[w];w==="children"?typeof A=="string"?c.textContent!==A&&(g.suppressHydrationWarning!==!0&&fu(c.textContent,A,n),h=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&fu(c.textContent,A,n),h=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&mt("scroll",c)}switch(a){case"input":wt(c),En(c,g,!0);break;case"textarea":wt(c),pn(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=pu)}c=h,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=nt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[jr]=i,n[Ma]=c,ag(n,i,!1,!1),i.stateNode=n;e:{switch(w=Yr(a,c),a){case"dialog":mt("cancel",n),mt("close",n),h=c;break;case"iframe":case"object":case"embed":mt("load",n),h=c;break;case"video":case"audio":for(h=0;h<Oa.length;h++)mt(Oa[h],n);h=c;break;case"source":mt("error",n),h=c;break;case"img":case"image":case"link":mt("error",n),mt("load",n),h=c;break;case"details":mt("toggle",n),h=c;break;case"input":Me(n,c),h=de(n,c),mt("invalid",n);break;case"option":h=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},h=oe({},c,{value:void 0}),mt("invalid",n);break;case"textarea":In(n,c),h=Mn(n,c),mt("invalid",n);break;default:h=c}Ss(a,h),A=h;for(g in A)if(A.hasOwnProperty(g)){var k=A[g];g==="style"?xs(n,k):g==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Xn(n,k)):g==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&hr(n,k):typeof k=="number"&&hr(n,""+k):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?k!=null&&g==="onScroll"&&mt("scroll",n):k!=null&&J(n,g,k,w))}switch(a){case"input":wt(n),En(n,c,!1);break;case"textarea":wt(n),pn(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ue(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?Yt(n,!!c.multiple,g,!1):c.defaultValue!=null&&Yt(n,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=pu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return an(i),null;case 6:if(n&&i.stateNode!=null)ug(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Ui($a.current),Ui(Mr.current),Eu(i)){if(c=i.stateNode,a=i.memoizedProps,c[jr]=i,(g=c.nodeValue!==a)&&(n=qn,n!==null))switch(n.tag){case 3:fu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&fu(c.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[jr]=i,i.stateNode=c}return an(i),null;case 13:if(gt(It),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(_t&&Gn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)hm(),No(),i.flags|=98560,g=!1;else if(g=Eu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[jr]=i}else No(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;an(i),g=!1}else Er!==null&&(Ch(Er),Er=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(It.current&1)!==0?zt===0&&(zt=3):Ph())),i.updateQueue!==null&&(i.flags|=4),an(i),null);case 4:return Lo(),mh(n,i),n===null&&La(i.stateNode.containerInfo),an(i),null;case 10:return $d(i.type._context),an(i),null;case 17:return Pn(i.type)&&gu(),an(i),null;case 19:if(gt(It),g=i.memoizedState,g===null)return an(i),null;if(c=(i.flags&128)!==0,w=g.rendering,w===null)if(c)Ka(g,!1);else{if(zt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Ru(n),w!==null){for(i.flags|=128,Ka(g,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)g=a,n=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return ht(It,It.current&1|2),i.child}n=n.sibling}g.tail!==null&&dt()>Uo&&(i.flags|=128,c=!0,Ka(g,!1),i.lanes=4194304)}else{if(!c)if(n=Ru(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ka(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!_t)return an(i),null}else 2*dt()-g.renderingStartTime>Uo&&a!==1073741824&&(i.flags|=128,c=!0,Ka(g,!1),i.lanes=4194304);g.isBackwards?(w.sibling=i.child,i.child=w):(a=g.last,a!==null?a.sibling=w:i.child=w,g.last=w)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=dt(),i.sibling=null,a=It.current,ht(It,c?a&1|2:a&1),i):(an(i),null);case 22:case 23:return Ah(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(Kn&1073741824)!==0&&(an(i),i.subtreeFlags&6&&(i.flags|=8192)):an(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function pE(n,i){switch(jd(i),i.tag){case 1:return Pn(i.type)&&gu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Lo(),gt(An),gt(sn),Yd(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Kd(i),null;case 13:if(gt(It),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));No()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return gt(It),null;case 4:return Lo(),null;case 10:return $d(i.type._context),null;case 22:case 23:return Ah(),null;case 24:return null;default:return null}}var Lu=!1,ln=!1,mE=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Mo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Ct(n,i,c)}else a.current=null}function gh(n,i,a){try{a()}catch(c){Ct(n,i,c)}}var cg=!1;function gE(n,i){if(Ad=Ms,n=Bp(),wd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,A=-1,k=-1,H=0,ee=0,ne=n,Z=null;t:for(;;){for(var fe;ne!==a||h!==0&&ne.nodeType!==3||(A=w+h),ne!==g||c!==0&&ne.nodeType!==3||(k=w+c),ne.nodeType===3&&(w+=ne.nodeValue.length),(fe=ne.firstChild)!==null;)Z=ne,ne=fe;for(;;){if(ne===n)break t;if(Z===a&&++H===h&&(A=w),Z===g&&++ee===c&&(k=w),(fe=ne.nextSibling)!==null)break;ne=Z,Z=ne.parentNode}ne=fe}a=A===-1||k===-1?null:{start:A,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Pd={focusedElem:n,selectionRange:a},Ms=!1,ye=i;ye!==null;)if(i=ye,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ye=n;else for(;ye!==null;){i=ye;try{var Ee=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Te=Ee.memoizedProps,Pt=Ee.memoizedState,U=i.stateNode,V=U.getSnapshotBeforeUpdate(i.elementType===i.type?Te:Ir(i.type,Te),Pt);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){Ct(i,i.return,se)}if(n=i.sibling,n!==null){n.return=i.return,ye=n;break}ye=i.return}return Ee=cg,cg=!1,Ee}function Qa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&n)===n){var g=h.destroy;h.destroy=void 0,g!==void 0&&gh(i,a,g)}h=h.next}while(h!==c)}}function ju(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function yh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function dg(n){var i=n.alternate;i!==null&&(n.alternate=null,dg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[jr],delete i[Ma],delete i[Dd],delete i[Xw],delete i[Zw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hg(n){return n.tag===5||n.tag===3||n.tag===4}function fg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function vh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=pu));else if(c!==4&&(n=n.child,n!==null))for(vh(n,i,a),n=n.sibling;n!==null;)vh(n,i,a),n=n.sibling}function _h(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(_h(n,i,a),n=n.sibling;n!==null;)_h(n,i,a),n=n.sibling}var Zt=null,Tr=!1;function Gs(n,i,a){for(a=a.child;a!==null;)pg(n,i,a),a=a.sibling}function pg(n,i,a){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Ai,a)}catch{}switch(a.tag){case 5:ln||Mo(a,i);case 6:var c=Zt,h=Tr;Zt=null,Gs(n,i,a),Zt=c,Tr=h,Zt!==null&&(Tr?(n=Zt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Zt.removeChild(a.stateNode));break;case 18:Zt!==null&&(Tr?(n=Zt,a=a.stateNode,n.nodeType===8?Nd(n.parentNode,a):n.nodeType===1&&Nd(n,a),vr(n)):Nd(Zt,a.stateNode));break;case 4:c=Zt,h=Tr,Zt=a.stateNode.containerInfo,Tr=!0,Gs(n,i,a),Zt=c,Tr=h;break;case 0:case 11:case 14:case 15:if(!ln&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var g=h,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&gh(a,i,w),h=h.next}while(h!==c)}Gs(n,i,a);break;case 1:if(!ln&&(Mo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){Ct(a,i,A)}Gs(n,i,a);break;case 21:Gs(n,i,a);break;case 22:a.mode&1?(ln=(c=ln)||a.memoizedState!==null,Gs(n,i,a),ln=c):Gs(n,i,a);break;default:Gs(n,i,a)}}function mg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new mE),i.forEach(function(c){var h=SE.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}}function xr(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var g=n,w=i,A=w;e:for(;A!==null;){switch(A.tag){case 5:Zt=A.stateNode,Tr=!1;break e;case 3:Zt=A.stateNode.containerInfo,Tr=!0;break e;case 4:Zt=A.stateNode.containerInfo,Tr=!0;break e}A=A.return}if(Zt===null)throw Error(t(160));pg(g,w,h),Zt=null,Tr=!1;var k=h.alternate;k!==null&&(k.return=null),h.return=null}catch(H){Ct(h,i,H)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)gg(i,n),i=i.sibling}function gg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(xr(i,n),Ur(n),c&4){try{Qa(3,n,n.return),ju(3,n)}catch(Te){Ct(n,n.return,Te)}try{Qa(5,n,n.return)}catch(Te){Ct(n,n.return,Te)}}break;case 1:xr(i,n),Ur(n),c&512&&a!==null&&Mo(a,a.return);break;case 5:if(xr(i,n),Ur(n),c&512&&a!==null&&Mo(a,a.return),n.flags&32){var h=n.stateNode;try{hr(h,"")}catch(Te){Ct(n,n.return,Te)}}if(c&4&&(h=n.stateNode,h!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,A=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Kt(h,g),Yr(A,w);var H=Yr(A,g);for(w=0;w<k.length;w+=2){var ee=k[w],ne=k[w+1];ee==="style"?xs(h,ne):ee==="dangerouslySetInnerHTML"?Xn(h,ne):ee==="children"?hr(h,ne):J(h,ee,ne,H)}switch(A){case"input":Qt(h,g);break;case"textarea":Tn(h,g);break;case"select":var Z=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var fe=g.value;fe!=null?Yt(h,!!g.multiple,fe,!1):Z!==!!g.multiple&&(g.defaultValue!=null?Yt(h,!!g.multiple,g.defaultValue,!0):Yt(h,!!g.multiple,g.multiple?[]:"",!1))}h[Ma]=g}catch(Te){Ct(n,n.return,Te)}}break;case 6:if(xr(i,n),Ur(n),c&4){if(n.stateNode===null)throw Error(t(162));h=n.stateNode,g=n.memoizedProps;try{h.nodeValue=g}catch(Te){Ct(n,n.return,Te)}}break;case 3:if(xr(i,n),Ur(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{vr(i.containerInfo)}catch(Te){Ct(n,n.return,Te)}break;case 4:xr(i,n),Ur(n);break;case 13:xr(i,n),Ur(n),h=n.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(Ih=dt())),c&4&&mg(n);break;case 22:if(ee=a!==null&&a.memoizedState!==null,n.mode&1?(ln=(H=ln)||ee,xr(i,n),ln=H):xr(i,n),Ur(n),c&8192){if(H=n.memoizedState!==null,(n.stateNode.isHidden=H)&&!ee&&(n.mode&1)!==0)for(ye=n,ee=n.child;ee!==null;){for(ne=ye=ee;ye!==null;){switch(Z=ye,fe=Z.child,Z.tag){case 0:case 11:case 14:case 15:Qa(4,Z,Z.return);break;case 1:Mo(Z,Z.return);var Ee=Z.stateNode;if(typeof Ee.componentWillUnmount=="function"){c=Z,a=Z.return;try{i=c,Ee.props=i.memoizedProps,Ee.state=i.memoizedState,Ee.componentWillUnmount()}catch(Te){Ct(c,a,Te)}}break;case 5:Mo(Z,Z.return);break;case 22:if(Z.memoizedState!==null){_g(ne);continue}}fe!==null?(fe.return=Z,ye=fe):_g(ne)}ee=ee.sibling}e:for(ee=null,ne=n;;){if(ne.tag===5){if(ee===null){ee=ne;try{h=ne.stateNode,H?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=ne.stateNode,k=ne.memoizedProps.style,w=k!=null&&k.hasOwnProperty("display")?k.display:null,A.style.display=Pr("display",w))}catch(Te){Ct(n,n.return,Te)}}}else if(ne.tag===6){if(ee===null)try{ne.stateNode.nodeValue=H?"":ne.memoizedProps}catch(Te){Ct(n,n.return,Te)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===n)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===n)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===n)break e;ee===ne&&(ee=null),ne=ne.return}ee===ne&&(ee=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:xr(i,n),Ur(n),c&4&&mg(n);break;case 21:break;default:xr(i,n),Ur(n)}}function Ur(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(hg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(hr(h,""),c.flags&=-33);var g=fg(n);_h(n,g,h);break;case 3:case 4:var w=c.stateNode.containerInfo,A=fg(n);vh(n,A,w);break;default:throw Error(t(161))}}catch(k){Ct(n,n.return,k)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function yE(n,i,a){ye=n,yg(n)}function yg(n,i,a){for(var c=(n.mode&1)!==0;ye!==null;){var h=ye,g=h.child;if(h.tag===22&&c){var w=h.memoizedState!==null||Lu;if(!w){var A=h.alternate,k=A!==null&&A.memoizedState!==null||ln;A=Lu;var H=ln;if(Lu=w,(ln=k)&&!H)for(ye=h;ye!==null;)w=ye,k=w.child,w.tag===22&&w.memoizedState!==null?wg(h):k!==null?(k.return=w,ye=k):wg(h);for(;g!==null;)ye=g,yg(g),g=g.sibling;ye=h,Lu=A,ln=H}vg(n)}else(h.subtreeFlags&8772)!==0&&g!==null?(g.return=h,ye=g):vg(n)}}function vg(n){for(;ye!==null;){var i=ye;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ln||ju(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!ln)if(a===null)c.componentDidMount();else{var h=i.elementType===i.type?a.memoizedProps:Ir(i.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&_m(i,g,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}_m(i,w,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var k=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var H=i.alternate;if(H!==null){var ee=H.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&vr(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ln||i.flags&512&&yh(i)}catch(Z){Ct(i,i.return,Z)}}if(i===n){ye=null;break}if(a=i.sibling,a!==null){a.return=i.return,ye=a;break}ye=i.return}}function _g(n){for(;ye!==null;){var i=ye;if(i===n){ye=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ye=a;break}ye=i.return}}function wg(n){for(;ye!==null;){var i=ye;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{ju(4,i)}catch(k){Ct(i,a,k)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var h=i.return;try{c.componentDidMount()}catch(k){Ct(i,h,k)}}var g=i.return;try{yh(i)}catch(k){Ct(i,g,k)}break;case 5:var w=i.return;try{yh(i)}catch(k){Ct(i,w,k)}}}catch(k){Ct(i,i.return,k)}if(i===n){ye=null;break}var A=i.sibling;if(A!==null){A.return=i.return,ye=A;break}ye=i.return}}var vE=Math.ceil,Mu=_e.ReactCurrentDispatcher,wh=_e.ReactCurrentOwner,ar=_e.ReactCurrentBatchConfig,et=0,Wt=null,Dt=null,en=0,Kn=0,Fo=Bs(0),zt=0,Ya=null,Bi=0,Fu=0,Eh=0,Ja=null,kn=null,Ih=0,Uo=1/0,ds=null,Uu=!1,Th=null,Ks=null,zu=!1,Qs=null,Bu=0,Xa=0,xh=null,$u=-1,Hu=0;function _n(){return(et&6)!==0?dt():$u!==-1?$u:$u=dt()}function Ys(n){return(n.mode&1)===0?1:(et&2)!==0&&en!==0?en&-en:tE.transition!==null?(Hu===0&&(Hu=bi()),Hu):(n=Ye,n!==0||(n=window.event,n=n===void 0?16:Ca(n.type)),n)}function Sr(n,i,a,c){if(50<Xa)throw Xa=0,xh=null,Error(t(185));Vs(n,a,c),((et&2)===0||n!==Wt)&&(n===Wt&&((et&2)===0&&(Fu|=a),zt===4&&Js(n,en)),Nn(n,c),a===1&&et===0&&(i.mode&1)===0&&(Uo=dt()+500,vu&&Hs()))}function Nn(n,i){var a=n.callbackNode;Zr(n,i);var c=Pi(n,n===Wt?en:0);if(c===0)a!==null&&bs(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&bs(a),i===1)n.tag===0?eE(Ig.bind(null,n)):am(Ig.bind(null,n)),Yw(function(){(et&6)===0&&Hs()}),a=null;else{switch(Ls(c)){case 1:a=Ri;break;case 4:a=ks;break;case 16:a=er;break;case 536870912:a=Hl;break;default:a=er}a=bg(a,Eg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Eg(n,i){if($u=-1,Hu=0,(et&6)!==0)throw Error(t(327));var a=n.callbackNode;if(zo()&&n.callbackNode!==a)return null;var c=Pi(n,n===Wt?en:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Wu(n,c);else{i=c;var h=et;et|=2;var g=xg();(Wt!==n||en!==i)&&(ds=null,Uo=dt()+500,Hi(n,i));do try{EE();break}catch(A){Tg(n,A)}while(!0);Bd(),Mu.current=g,et=h,Dt!==null?i=0:(Wt=null,en=0,i=zt)}if(i!==0){if(i===2&&(h=$n(n),h!==0&&(c=h,i=Sh(n,h))),i===1)throw a=Ya,Hi(n,0),Js(n,c),Nn(n,dt()),a;if(i===6)Js(n,c);else{if(h=n.current.alternate,(c&30)===0&&!_E(h)&&(i=Wu(n,c),i===2&&(g=$n(n),g!==0&&(c=g,i=Sh(n,g))),i===1))throw a=Ya,Hi(n,0),Js(n,c),Nn(n,dt()),a;switch(n.finishedWork=h,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Wi(n,kn,ds);break;case 3:if(Js(n,c),(c&130023424)===c&&(i=Ih+500-dt(),10<i)){if(Pi(n,0)!==0)break;if(h=n.suspendedLanes,(h&c)!==c){_n(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=kd(Wi.bind(null,n,kn,ds),i);break}Wi(n,kn,ds);break;case 4:if(Js(n,c),(c&4194240)===c)break;for(i=n.eventTimes,h=-1;0<c;){var w=31-gn(c);g=1<<w,w=i[w],w>h&&(h=w),c&=~g}if(c=h,c=dt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*vE(c/1960))-c,10<c){n.timeoutHandle=kd(Wi.bind(null,n,kn,ds),c);break}Wi(n,kn,ds);break;case 5:Wi(n,kn,ds);break;default:throw Error(t(329))}}}return Nn(n,dt()),n.callbackNode===a?Eg.bind(null,n):null}function Sh(n,i){var a=Ja;return n.current.memoizedState.isDehydrated&&(Hi(n,i).flags|=256),n=Wu(n,i),n!==2&&(i=kn,kn=a,i!==null&&Ch(i)),n}function Ch(n){kn===null?kn=n:kn.push.apply(kn,n)}function _E(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],g=h.getSnapshot;h=h.value;try{if(!wr(g(),h))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Js(n,i){for(i&=~Eh,i&=~Fu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-gn(i),c=1<<a;n[a]=-1,i&=~c}}function Ig(n){if((et&6)!==0)throw Error(t(327));zo();var i=Pi(n,0);if((i&1)===0)return Nn(n,dt()),null;var a=Wu(n,i);if(n.tag!==0&&a===2){var c=$n(n);c!==0&&(i=c,a=Sh(n,c))}if(a===1)throw a=Ya,Hi(n,0),Js(n,i),Nn(n,dt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Wi(n,kn,ds),Nn(n,dt()),null}function Rh(n,i){var a=et;et|=1;try{return n(i)}finally{et=a,et===0&&(Uo=dt()+500,vu&&Hs())}}function $i(n){Qs!==null&&Qs.tag===0&&(et&6)===0&&zo();var i=et;et|=1;var a=ar.transition,c=Ye;try{if(ar.transition=null,Ye=1,n)return n()}finally{Ye=c,ar.transition=a,et=i,(et&6)===0&&Hs()}}function Ah(){Kn=Fo.current,gt(Fo)}function Hi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Qw(a)),Dt!==null)for(a=Dt.return;a!==null;){var c=a;switch(jd(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&gu();break;case 3:Lo(),gt(An),gt(sn),Yd();break;case 5:Kd(c);break;case 4:Lo();break;case 13:gt(It);break;case 19:gt(It);break;case 10:$d(c.type._context);break;case 22:case 23:Ah()}a=a.return}if(Wt=n,Dt=n=Xs(n.current,null),en=Kn=i,zt=0,Ya=null,Eh=Fu=Bi=0,kn=Ja=null,Fi!==null){for(i=0;i<Fi.length;i++)if(a=Fi[i],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=h,c.next=w}a.pending=c}Fi=null}return n}function Tg(n,i){do{var a=Dt;try{if(Bd(),Au.current=Nu,Pu){for(var c=Tt.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Pu=!1}if(zi=0,Ht=Ut=Tt=null,Ha=!1,Wa=0,wh.current=null,a===null||a.return===null){zt=1,Ya=i,Dt=null;break}e:{var g=n,w=a.return,A=a,k=i;if(i=en,A.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var H=k,ee=A,ne=ee.tag;if((ee.mode&1)===0&&(ne===0||ne===11||ne===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var fe=Km(w);if(fe!==null){fe.flags&=-257,Qm(fe,w,A,g,i),fe.mode&1&&Gm(g,H,i),i=fe,k=H;var Ee=i.updateQueue;if(Ee===null){var Te=new Set;Te.add(k),i.updateQueue=Te}else Ee.add(k);break e}else{if((i&1)===0){Gm(g,H,i),Ph();break e}k=Error(t(426))}}else if(_t&&A.mode&1){var Pt=Km(w);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),Qm(Pt,w,A,g,i),Ud(jo(k,A));break e}}g=k=jo(k,A),zt!==4&&(zt=2),Ja===null?Ja=[g]:Ja.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var U=Wm(g,k,i);vm(g,U);break e;case 1:A=k;var V=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Ks===null||!Ks.has(z)))){g.flags|=65536,i&=-i,g.lanes|=i;var se=qm(g,A,i);vm(g,se);break e}}g=g.return}while(g!==null)}Cg(a)}catch(xe){i=xe,Dt===a&&a!==null&&(Dt=a=a.return);continue}break}while(!0)}function xg(){var n=Mu.current;return Mu.current=Nu,n===null?Nu:n}function Ph(){(zt===0||zt===3||zt===2)&&(zt=4),Wt===null||(Bi&268435455)===0&&(Fu&268435455)===0||Js(Wt,en)}function Wu(n,i){var a=et;et|=2;var c=xg();(Wt!==n||en!==i)&&(ds=null,Hi(n,i));do try{wE();break}catch(h){Tg(n,h)}while(!0);if(Bd(),et=a,Mu.current=c,Dt!==null)throw Error(t(261));return Wt=null,en=0,zt}function wE(){for(;Dt!==null;)Sg(Dt)}function EE(){for(;Dt!==null&&!ao();)Sg(Dt)}function Sg(n){var i=Pg(n.alternate,n,Kn);n.memoizedProps=n.pendingProps,i===null?Cg(n):Dt=i,wh.current=null}function Cg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=fE(a,i,Kn),a!==null){Dt=a;return}}else{if(a=pE(a,i),a!==null){a.flags&=32767,Dt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{zt=6,Dt=null;return}}if(i=i.sibling,i!==null){Dt=i;return}Dt=i=n}while(i!==null);zt===0&&(zt=5)}function Wi(n,i,a){var c=Ye,h=ar.transition;try{ar.transition=null,Ye=1,IE(n,i,a,c)}finally{ar.transition=h,Ye=c}return null}function IE(n,i,a,c){do zo();while(Qs!==null);if((et&6)!==0)throw Error(t(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(lt(n,g),n===Wt&&(Dt=Wt=null,en=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||zu||(zu=!0,bg(er,function(){return zo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=ar.transition,ar.transition=null;var w=Ye;Ye=1;var A=et;et|=4,wh.current=null,gE(n,a),gg(a,n),Bw(Pd),Ms=!!Ad,Pd=Ad=null,n.current=a,yE(a),hd(),et=A,Ye=w,ar.transition=g}else n.current=a;if(zu&&(zu=!1,Qs=n,Bu=h),g=n.pendingLanes,g===0&&(Ks=null),Wl(a.stateNode),Nn(n,dt()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)h=i[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(Uu)throw Uu=!1,n=Th,Th=null,n;return(Bu&1)!==0&&n.tag!==0&&zo(),g=n.pendingLanes,(g&1)!==0?n===xh?Xa++:(Xa=0,xh=n):Xa=0,Hs(),null}function zo(){if(Qs!==null){var n=Ls(Bu),i=ar.transition,a=Ye;try{if(ar.transition=null,Ye=16>n?16:n,Qs===null)var c=!1;else{if(n=Qs,Qs=null,Bu=0,(et&6)!==0)throw Error(t(331));var h=et;for(et|=4,ye=n.current;ye!==null;){var g=ye,w=g.child;if((ye.flags&16)!==0){var A=g.deletions;if(A!==null){for(var k=0;k<A.length;k++){var H=A[k];for(ye=H;ye!==null;){var ee=ye;switch(ee.tag){case 0:case 11:case 15:Qa(8,ee,g)}var ne=ee.child;if(ne!==null)ne.return=ee,ye=ne;else for(;ye!==null;){ee=ye;var Z=ee.sibling,fe=ee.return;if(dg(ee),ee===H){ye=null;break}if(Z!==null){Z.return=fe,ye=Z;break}ye=fe}}}var Ee=g.alternate;if(Ee!==null){var Te=Ee.child;if(Te!==null){Ee.child=null;do{var Pt=Te.sibling;Te.sibling=null,Te=Pt}while(Te!==null)}}ye=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,ye=w;else e:for(;ye!==null;){if(g=ye,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Qa(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,ye=U;break e}ye=g.return}}var V=n.current;for(ye=V;ye!==null;){w=ye;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,ye=z;else e:for(w=V;ye!==null;){if(A=ye,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:ju(9,A)}}catch(xe){Ct(A,A.return,xe)}if(A===w){ye=null;break e}var se=A.sibling;if(se!==null){se.return=A.return,ye=se;break e}ye=A.return}}if(et=h,Hs(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Ai,n)}catch{}c=!0}return c}finally{Ye=a,ar.transition=i}}return!1}function Rg(n,i,a){i=jo(a,i),i=Wm(n,i,1),n=qs(n,i,1),i=_n(),n!==null&&(Vs(n,1,i),Nn(n,i))}function Ct(n,i,a){if(n.tag===3)Rg(n,n,a);else for(;i!==null;){if(i.tag===3){Rg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ks===null||!Ks.has(c))){n=jo(a,n),n=qm(i,n,1),i=qs(i,n,1),n=_n(),i!==null&&(Vs(i,1,n),Nn(i,n));break}}i=i.return}}function TE(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=_n(),n.pingedLanes|=n.suspendedLanes&a,Wt===n&&(en&a)===a&&(zt===4||zt===3&&(en&130023424)===en&&500>dt()-Ih?Hi(n,0):Eh|=a),Nn(n,i)}function Ag(n,i){i===0&&((n.mode&1)===0?i=1:(i=uo,uo<<=1,(uo&130023424)===0&&(uo=4194304)));var a=_n();n=ls(n,i),n!==null&&(Vs(n,i,a),Nn(n,a))}function xE(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Ag(n,a)}function SE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Ag(n,a)}var Pg;Pg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||An.current)bn=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return bn=!1,hE(n,i,a);bn=(n.flags&131072)!==0}else bn=!1,_t&&(i.flags&1048576)!==0&&lm(i,wu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Ou(n,i),n=i.pendingProps;var h=Po(i,sn.current);Oo(i,a),h=Zd(null,i,c,n,h,a);var g=eh();return i.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Pn(c)?(g=!0,yu(i)):g=!1,i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,qd(i),h.updater=Du,i.stateNode=h,h._reactInternals=i,oh(i,c,n,a),i=ch(null,i,c,!0,g,a)):(i.tag=0,_t&&g&&Ld(i),vn(null,i,h,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Ou(n,i),n=i.pendingProps,h=c._init,c=h(c._payload),i.type=c,h=i.tag=RE(c),n=Ir(c,n),h){case 0:i=uh(null,i,c,n,a);break e;case 1:i=tg(null,i,c,n,a);break e;case 11:i=Ym(null,i,c,n,a);break e;case 14:i=Jm(null,i,c,Ir(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Ir(c,h),uh(n,i,c,h,a);case 1:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Ir(c,h),tg(n,i,c,h,a);case 3:e:{if(ng(i),n===null)throw Error(t(387));c=i.pendingProps,g=i.memoizedState,h=g.element,ym(n,i),Cu(i,c,null,a);var w=i.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){h=jo(Error(t(423)),i),i=rg(n,i,c,a,h);break e}else if(c!==h){h=jo(Error(t(424)),i),i=rg(n,i,c,a,h);break e}else for(Gn=zs(i.stateNode.containerInfo.firstChild),qn=i,_t=!0,Er=null,a=mm(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(No(),c===h){i=cs(n,i,a);break e}vn(n,i,c,a)}i=i.child}return i;case 5:return wm(i),n===null&&Fd(i),c=i.type,h=i.pendingProps,g=n!==null?n.memoizedProps:null,w=h.children,bd(c,h)?w=null:g!==null&&bd(c,g)&&(i.flags|=32),eg(n,i),vn(n,i,w,a),i.child;case 6:return n===null&&Fd(i),null;case 13:return sg(n,i,a);case 4:return Gd(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Do(i,null,c,a):vn(n,i,c,a),i.child;case 11:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Ir(c,h),Ym(n,i,c,h,a);case 7:return vn(n,i,i.pendingProps,a),i.child;case 8:return vn(n,i,i.pendingProps.children,a),i.child;case 12:return vn(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,h=i.pendingProps,g=i.memoizedProps,w=h.value,ht(Tu,c._currentValue),c._currentValue=w,g!==null)if(wr(g.value,w)){if(g.children===h.children&&!An.current){i=cs(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var A=g.dependencies;if(A!==null){w=g.child;for(var k=A.firstContext;k!==null;){if(k.context===c){if(g.tag===1){k=us(-1,a&-a),k.tag=2;var H=g.updateQueue;if(H!==null){H=H.shared;var ee=H.pending;ee===null?k.next=k:(k.next=ee.next,ee.next=k),H.pending=k}}g.lanes|=a,k=g.alternate,k!==null&&(k.lanes|=a),Hd(g.return,a,i),A.lanes|=a;break}k=k.next}}else if(g.tag===10)w=g.type===i.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),Hd(w,a,i),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===i){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}vn(n,i,h.children,a),i=i.child}return i;case 9:return h=i.type,c=i.pendingProps.children,Oo(i,a),h=ir(h),c=c(h),i.flags|=1,vn(n,i,c,a),i.child;case 14:return c=i.type,h=Ir(c,i.pendingProps),h=Ir(c.type,h),Jm(n,i,c,h,a);case 15:return Xm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Ir(c,h),Ou(n,i),i.tag=1,Pn(c)?(n=!0,yu(i)):n=!1,Oo(i,a),$m(i,c,h),oh(i,c,h,a),ch(null,i,c,!0,n,a);case 19:return og(n,i,a);case 22:return Zm(n,i,a)}throw Error(t(156,i.tag))};function bg(n,i){return Ci(n,i)}function CE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(n,i,a,c){return new CE(n,i,a,c)}function bh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function RE(n){if(typeof n=="function")return bh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===ot)return 14}return 2}function Xs(n,i){var a=n.alternate;return a===null?(a=lr(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function qu(n,i,a,c,h,g){var w=2;if(c=n,typeof n=="function")bh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case P:return qi(a.children,h,g,i);case C:w=8,h|=8;break;case S:return n=lr(12,a,i,h|2),n.elementType=S,n.lanes=g,n;case R:return n=lr(13,a,i,h),n.elementType=R,n.lanes=g,n;case Ze:return n=lr(19,a,i,h),n.elementType=Ze,n.lanes=g,n;case le:return Gu(a,h,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:w=10;break e;case N:w=9;break e;case O:w=11;break e;case ot:w=14;break e;case ut:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=lr(w,a,i,h),i.elementType=n,i.type=c,i.lanes=g,i}function qi(n,i,a,c){return n=lr(7,n,c,i),n.lanes=a,n}function Gu(n,i,a,c){return n=lr(22,n,c,i),n.elementType=le,n.lanes=a,n.stateNode={isHidden:!1},n}function kh(n,i,a){return n=lr(6,n,null,i),n.lanes=a,n}function Nh(n,i,a){return i=lr(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function AE(n,i,a,c,h){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ds(0),this.expirationTimes=Ds(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ds(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Dh(n,i,a,c,h,g,w,A,k){return n=new AE(n,i,a,A,k),i===1?(i=1,g===!0&&(i|=8)):i=0,g=lr(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},qd(g),n}function PE(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ie,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function kg(n){if(!n)return $s;n=n._reactInternals;e:{if(qe(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Pn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Pn(a))return im(n,a,i)}return i}function Ng(n,i,a,c,h,g,w,A,k){return n=Dh(a,c,!0,n,h,g,w,A,k),n.context=kg(null),a=n.current,c=_n(),h=Ys(a),g=us(c,h),g.callback=i??null,qs(a,g,h),n.current.lanes=h,Vs(n,h,c),Nn(n,c),n}function Ku(n,i,a,c){var h=i.current,g=_n(),w=Ys(h);return a=kg(a),i.context===null?i.context=a:i.pendingContext=a,i=us(g,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=qs(h,i,w),n!==null&&(Sr(n,h,w,g),Su(n,h,w)),w}function Qu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Dg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Vh(n,i){Dg(n,i),(n=n.alternate)&&Dg(n,i)}function bE(){return null}var Vg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Oh(n){this._internalRoot=n}Yu.prototype.render=Oh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Ku(n,i,null,null)},Yu.prototype.unmount=Oh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;$i(function(){Ku(null,n,null,null)}),i[ss]=null}};function Yu(n){this._internalRoot=n}Yu.prototype.unstable_scheduleHydration=function(n){if(n){var i=Yl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Dr.length&&i!==0&&i<Dr[a].priority;a++);Dr.splice(a,0,n),a===0&&Zl(n)}};function Lh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ju(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Og(){}function kE(n,i,a,c,h){if(h){if(typeof c=="function"){var g=c;c=function(){var H=Qu(w);g.call(H)}}var w=Ng(i,c,n,0,null,!1,!1,"",Og);return n._reactRootContainer=w,n[ss]=w.current,La(n.nodeType===8?n.parentNode:n),$i(),w}for(;h=n.lastChild;)n.removeChild(h);if(typeof c=="function"){var A=c;c=function(){var H=Qu(k);A.call(H)}}var k=Dh(n,0,!1,null,null,!1,!1,"",Og);return n._reactRootContainer=k,n[ss]=k.current,La(n.nodeType===8?n.parentNode:n),$i(function(){Ku(i,k,a,c)}),k}function Xu(n,i,a,c,h){var g=a._reactRootContainer;if(g){var w=g;if(typeof h=="function"){var A=h;h=function(){var k=Qu(w);A.call(k)}}Ku(i,w,n,h)}else w=kE(a,i,n,h,c);return Qu(w)}Kl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ns(i.pendingLanes);a!==0&&(Os(i,a|1),Nn(i,dt()),(et&6)===0&&(Uo=dt()+500,Hs()))}break;case 13:$i(function(){var c=ls(n,1);if(c!==null){var h=_n();Sr(c,n,1,h)}}),Vh(n,1)}},co=function(n){if(n.tag===13){var i=ls(n,134217728);if(i!==null){var a=_n();Sr(i,n,134217728,a)}Vh(n,134217728)}},Ql=function(n){if(n.tag===13){var i=Ys(n),a=ls(n,i);if(a!==null){var c=_n();Sr(a,n,i,c)}Vh(n,i)}},Yl=function(){return Ye},Jl=function(n,i){var a=Ye;try{return Ye=n,i()}finally{Ye=a}},Sn=function(n,i,a){switch(i){case"input":if(Qt(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var h=mu(c);if(!h)throw Error(t(90));ue(c),Qt(c,h)}}}break;case"textarea":Tn(n,a);break;case"select":i=a.value,i!=null&&Yt(n,!!a.multiple,i,!1)}},Jr=Rh,Si=$i;var NE={usingClientEntryPoint:!1,Events:[Fa,Ro,mu,Un,xi,Rh]},Za={findFiberByHostInstance:Oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DE={bundleType:Za.bundleType,version:Za.version,rendererPackageName:Za.rendererPackageName,rendererConfig:Za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_e.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=pt(n),n===null?null:n.stateNode},findFiberByHostInstance:Za.findFiberByHostInstance||bE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{Ai=Zu.inject(DE),Bn=Zu}catch{}}return Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NE,Dn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lh(i))throw Error(t(200));return PE(n,i,null,a)},Dn.createRoot=function(n,i){if(!Lh(n))throw Error(t(299));var a=!1,c="",h=Vg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),i=Dh(n,1,!1,null,null,a,!1,c,h),n[ss]=i.current,La(n.nodeType===8?n.parentNode:n),new Oh(i)},Dn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=pt(i),n=n===null?null:n.stateNode,n},Dn.flushSync=function(n){return $i(n)},Dn.hydrate=function(n,i,a){if(!Ju(i))throw Error(t(200));return Xu(null,n,i,!0,a)},Dn.hydrateRoot=function(n,i,a){if(!Lh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,h=!1,g="",w=Vg;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Ng(i,null,n,1,a??null,h,!1,g,w),n[ss]=i.current,La(n),c)for(n=0;n<c.length;n++)a=c[n],h=a._getVersion,h=h(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,h]:i.mutableSourceEagerHydrationData.push(a,h);return new Yu(i)},Dn.render=function(n,i,a){if(!Ju(i))throw Error(t(200));return Xu(null,n,i,!1,a)},Dn.unmountComponentAtNode=function(n){if(!Ju(n))throw Error(t(40));return n._reactRootContainer?($i(function(){Xu(null,null,n,!1,function(){n._reactRootContainer=null,n[ss]=null})}),!0):!1},Dn.unstable_batchedUpdates=Rh,Dn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Ju(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Xu(n,i,a,!1,c)},Dn.version="18.3.1-next-f1338f8080-20240426",Dn}var $g;function Lv(){if($g)return Fh.exports;$g=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Fh.exports=BE(),Fh.exports}var Hg;function $E(){if(Hg)return ec;Hg=1;var r=Lv();return ec.createRoot=r.createRoot,ec.hydrateRoot=r.hydrateRoot,ec}var HE=$E();const WE=Ov(HE);Lv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function El(){return El=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},El.apply(this,arguments)}var ii;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ii||(ii={}));const Wg="popstate";function qE(r){r===void 0&&(r={});function e(s,o){let{pathname:l,search:d,hash:f}=s.location;return nf("",{pathname:l,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Ec(o)}return KE(e,t,null,r)}function Mt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function jv(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GE(){return Math.random().toString(36).substr(2,8)}function qg(r,e){return{usr:r.state,key:r.key,idx:e}}function nf(r,e,t,s){return t===void 0&&(t=null),El({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?da(e):e,{state:t,key:e&&e.key||s||GE()})}function Ec(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function da(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function KE(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,d=o.history,f=ii.Pop,m=null,v=E();v==null&&(v=0,d.replaceState(El({},d.state,{idx:v}),""));function E(){return(d.state||{idx:null}).idx}function I(){f=ii.Pop;let M=E(),Q=M==null?null:M-v;v=M,m&&m({action:f,location:$.location,delta:Q})}function x(M,Q){f=ii.Push;let te=nf($.location,M,Q);v=E()+1;let J=qg(te,v),_e=$.createHref(te);try{d.pushState(J,"",_e)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(_e)}l&&m&&m({action:f,location:$.location,delta:1})}function L(M,Q){f=ii.Replace;let te=nf($.location,M,Q);v=E();let J=qg(te,v),_e=$.createHref(te);d.replaceState(J,"",_e),l&&m&&m({action:f,location:$.location,delta:0})}function B(M){let Q=o.location.origin!=="null"?o.location.origin:o.location.href,te=typeof M=="string"?M:Ec(M);return te=te.replace(/ $/,"%20"),Mt(Q,"No window.location.(origin|href) available to create URL for href: "+te),new URL(te,Q)}let $={get action(){return f},get location(){return r(o,d)},listen(M){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Wg,I),m=M,()=>{o.removeEventListener(Wg,I),m=null}},createHref(M){return e(o,M)},createURL:B,encodeLocation(M){let Q=B(M);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:x,replace:L,go(M){return d.go(M)}};return $}var Gg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Gg||(Gg={}));function QE(r,e,t){return t===void 0&&(t="/"),YE(r,e,t)}function YE(r,e,t,s){let o=typeof e=="string"?da(e):e,l=Df(o.pathname||"/",t);if(l==null)return null;let d=Mv(r);JE(d);let f=null;for(let m=0;f==null&&m<d.length;++m){let v=uI(l);f=oI(d[m],v)}return f}function Mv(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,d,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};m.relativePath.startsWith("/")&&(Mt(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let v=ai([s,m.relativePath]),E=t.concat(m);l.children&&l.children.length>0&&(Mt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Mv(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:sI(v,l.index),routesMeta:E})};return r.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,d);else for(let m of Fv(l.path))o(l,d,m)}),e}function Fv(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let d=Fv(s.join("/")),f=[];return f.push(...d.map(m=>m===""?l:[l,m].join("/"))),o&&f.push(...d),f.map(m=>r.startsWith("/")&&m===""?"/":m)}function JE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:iI(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const XE=/^:[\w-]+$/,ZE=3,eI=2,tI=1,nI=10,rI=-2,Kg=r=>r==="*";function sI(r,e){let t=r.split("/"),s=t.length;return t.some(Kg)&&(s+=rI),e&&(s+=eI),t.filter(o=>!Kg(o)).reduce((o,l)=>o+(XE.test(l)?ZE:l===""?tI:nI),s)}function iI(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function oI(r,e,t){let{routesMeta:s}=r,o={},l="/",d=[];for(let f=0;f<s.length;++f){let m=s[f],v=f===s.length-1,E=l==="/"?e:e.slice(l.length)||"/",I=aI({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},E),x=m.route;if(!I)return null;Object.assign(o,I.params),d.push({params:o,pathname:ai([l,I.pathname]),pathnameBase:fI(ai([l,I.pathnameBase])),route:x}),I.pathnameBase!=="/"&&(l=ai([l,I.pathnameBase]))}return d}function aI(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=lI(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((v,E,I)=>{let{paramName:x,isOptional:L}=E;if(x==="*"){let $=f[I]||"";d=l.slice(0,l.length-$.length).replace(/(.)\/+$/,"$1")}const B=f[I];return L&&!B?v[x]=void 0:v[x]=(B||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:r}}function lI(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),jv(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,m)=>(s.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function uI(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jv(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Df(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function cI(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?da(r):r;return{pathname:t?t.startsWith("/")?t:dI(t,e):e,search:pI(s),hash:mI(o)}}function dI(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Bh(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hI(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Uv(r,e){let t=hI(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function zv(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=da(r):(o=El({},r),Mt(!o.pathname||!o.pathname.includes("?"),Bh("?","pathname","search",o)),Mt(!o.pathname||!o.pathname.includes("#"),Bh("#","pathname","hash",o)),Mt(!o.search||!o.search.includes("#"),Bh("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,f;if(d==null)f=t;else{let I=e.length-1;if(!s&&d.startsWith("..")){let x=d.split("/");for(;x[0]==="..";)x.shift(),I-=1;o.pathname=x.join("/")}f=I>=0?e[I]:"/"}let m=cI(o,f),v=d&&d!=="/"&&d.endsWith("/"),E=(l||d===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(v||E)&&(m.pathname+="/"),m}const ai=r=>r.join("/").replace(/\/\/+/g,"/"),fI=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),pI=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,mI=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function gI(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Bv=["post","put","patch","delete"];new Set(Bv);const yI=["get",...Bv];new Set(yI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Il(){return Il=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Il.apply(this,arguments)}const Vf=D.createContext(null),vI=D.createContext(null),to=D.createContext(null),$c=D.createContext(null),no=D.createContext({outlet:null,matches:[],isDataRoute:!1}),$v=D.createContext(null);function _I(r,e){let{relative:t}=e===void 0?{}:e;bl()||Mt(!1);let{basename:s,navigator:o}=D.useContext(to),{hash:l,pathname:d,search:f}=qv(r,{relative:t}),m=d;return s!=="/"&&(m=d==="/"?s:ai([s,d])),o.createHref({pathname:m,search:f,hash:l})}function bl(){return D.useContext($c)!=null}function ha(){return bl()||Mt(!1),D.useContext($c).location}function Hv(r){D.useContext(to).static||D.useLayoutEffect(r)}function Wv(){let{isDataRoute:r}=D.useContext(no);return r?NI():wI()}function wI(){bl()||Mt(!1);let r=D.useContext(Vf),{basename:e,future:t,navigator:s}=D.useContext(to),{matches:o}=D.useContext(no),{pathname:l}=ha(),d=JSON.stringify(Uv(o,t.v7_relativeSplatPath)),f=D.useRef(!1);return Hv(()=>{f.current=!0}),D.useCallback(function(v,E){if(E===void 0&&(E={}),!f.current)return;if(typeof v=="number"){s.go(v);return}let I=zv(v,JSON.parse(d),l,E.relative==="path");r==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:ai([e,I.pathname])),(E.replace?s.replace:s.push)(I,E.state,E)},[e,s,d,l,r])}function qv(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=D.useContext(to),{matches:o}=D.useContext(no),{pathname:l}=ha(),d=JSON.stringify(Uv(o,s.v7_relativeSplatPath));return D.useMemo(()=>zv(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function EI(r,e){return II(r,e)}function II(r,e,t,s){bl()||Mt(!1);let{navigator:o}=D.useContext(to),{matches:l}=D.useContext(no),d=l[l.length-1],f=d?d.params:{};d&&d.pathname;let m=d?d.pathnameBase:"/";d&&d.route;let v=ha(),E;if(e){var I;let M=typeof e=="string"?da(e):e;m==="/"||(I=M.pathname)!=null&&I.startsWith(m)||Mt(!1),E=M}else E=v;let x=E.pathname||"/",L=x;if(m!=="/"){let M=m.replace(/^\//,"").split("/");L="/"+x.replace(/^\//,"").split("/").slice(M.length).join("/")}let B=QE(r,{pathname:L}),$=RI(B&&B.map(M=>Object.assign({},M,{params:Object.assign({},f,M.params),pathname:ai([m,o.encodeLocation?o.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?m:ai([m,o.encodeLocation?o.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,t,s);return e&&$?D.createElement($c.Provider,{value:{location:Il({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:ii.Pop}},$):$}function TI(){let r=kI(),e=gI(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:o},t):null,null)}const xI=D.createElement(TI,null);class SI extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?D.createElement(no.Provider,{value:this.props.routeContext},D.createElement($v.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function CI(r){let{routeContext:e,match:t,children:s}=r,o=D.useContext(Vf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),D.createElement(no.Provider,{value:e},s)}function RI(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let E=d.findIndex(I=>I.route.id&&(f==null?void 0:f[I.route.id])!==void 0);E>=0||Mt(!1),d=d.slice(0,Math.min(d.length,E+1))}let m=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let E=0;E<d.length;E++){let I=d[E];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(v=E),I.route.id){let{loaderData:x,errors:L}=t,B=I.route.loader&&x[I.route.id]===void 0&&(!L||L[I.route.id]===void 0);if(I.route.lazy||B){m=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((E,I,x)=>{let L,B=!1,$=null,M=null;t&&(L=f&&I.route.id?f[I.route.id]:void 0,$=I.route.errorElement||xI,m&&(v<0&&x===0?(DI("route-fallback"),B=!0,M=null):v===x&&(B=!0,M=I.route.hydrateFallbackElement||null)));let Q=e.concat(d.slice(0,x+1)),te=()=>{let J;return L?J=$:B?J=M:I.route.Component?J=D.createElement(I.route.Component,null):I.route.element?J=I.route.element:J=E,D.createElement(CI,{match:I,routeContext:{outlet:E,matches:Q,isDataRoute:t!=null},children:J})};return t&&(I.route.ErrorBoundary||I.route.errorElement||x===0)?D.createElement(SI,{location:t.location,revalidation:t.revalidation,component:$,error:L,children:te(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):te()},null)}var Gv=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Gv||{}),Kv=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Kv||{});function AI(r){let e=D.useContext(Vf);return e||Mt(!1),e}function PI(r){let e=D.useContext(vI);return e||Mt(!1),e}function bI(r){let e=D.useContext(no);return e||Mt(!1),e}function Qv(r){let e=bI(),t=e.matches[e.matches.length-1];return t.route.id||Mt(!1),t.route.id}function kI(){var r;let e=D.useContext($v),t=PI(),s=Qv();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function NI(){let{router:r}=AI(Gv.UseNavigateStable),e=Qv(Kv.UseNavigateStable),t=D.useRef(!1);return Hv(()=>{t.current=!0}),D.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,Il({fromRouteId:e},l)))},[r,e])}const Qg={};function DI(r,e,t){Qg[r]||(Qg[r]=!0)}function VI(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function rl(r){Mt(!1)}function OI(r){let{basename:e="/",children:t=null,location:s,navigationType:o=ii.Pop,navigator:l,static:d=!1,future:f}=r;bl()&&Mt(!1);let m=e.replace(/^\/*/,"/"),v=D.useMemo(()=>({basename:m,navigator:l,static:d,future:Il({v7_relativeSplatPath:!1},f)}),[m,f,l,d]);typeof s=="string"&&(s=da(s));let{pathname:E="/",search:I="",hash:x="",state:L=null,key:B="default"}=s,$=D.useMemo(()=>{let M=Df(E,m);return M==null?null:{location:{pathname:M,search:I,hash:x,state:L,key:B},navigationType:o}},[m,E,I,x,L,B,o]);return $==null?null:D.createElement(to.Provider,{value:v},D.createElement($c.Provider,{children:t,value:$}))}function LI(r){let{children:e,location:t}=r;return EI(rf(e),t)}new Promise(()=>{});function rf(r,e){e===void 0&&(e=[]);let t=[];return D.Children.forEach(r,(s,o)=>{if(!D.isValidElement(s))return;let l=[...e,o];if(s.type===D.Fragment){t.push.apply(t,rf(s.props.children,l));return}s.type!==rl&&Mt(!1),!s.props.index||!s.props.children||Mt(!1);let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=rf(s.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sf(){return sf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},sf.apply(this,arguments)}function jI(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function MI(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function FI(r,e){return r.button===0&&(!e||e==="_self")&&!MI(r)}const UI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zI="6";try{window.__reactRouterVersion=zI}catch{}const BI="startTransition",Yg=FE[BI];function $I(r){let{basename:e,children:t,future:s,window:o}=r,l=D.useRef();l.current==null&&(l.current=qE({window:o,v5Compat:!0}));let d=l.current,[f,m]=D.useState({action:d.action,location:d.location}),{v7_startTransition:v}=s||{},E=D.useCallback(I=>{v&&Yg?Yg(()=>m(I)):m(I)},[m,v]);return D.useLayoutEffect(()=>d.listen(E),[d,E]),D.useEffect(()=>VI(s),[s]),D.createElement(OI,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:d,future:s})}const HI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zr=D.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:d,state:f,target:m,to:v,preventScrollReset:E,viewTransition:I}=e,x=jI(e,UI),{basename:L}=D.useContext(to),B,$=!1;if(typeof v=="string"&&WI.test(v)&&(B=v,HI))try{let J=new URL(window.location.href),_e=v.startsWith("//")?new URL(J.protocol+v):new URL(v),ce=Df(_e.pathname,L);_e.origin===J.origin&&ce!=null?v=ce+_e.search+_e.hash:$=!0}catch{}let M=_I(v,{relative:o}),Q=qI(v,{replace:d,state:f,target:m,preventScrollReset:E,relative:o,viewTransition:I});function te(J){s&&s(J),J.defaultPrevented||Q(J)}return D.createElement("a",sf({},x,{href:B||M,onClick:$||l?s:te,ref:t,target:m}))});var Jg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Jg||(Jg={}));var Xg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Xg||(Xg={}));function qI(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:d,viewTransition:f}=e===void 0?{}:e,m=Wv(),v=ha(),E=qv(r,{relative:d});return D.useCallback(I=>{if(FI(I,t)){I.preventDefault();let x=s!==void 0?s:Ec(v)===Ec(E);m(r,{replace:x,state:o,preventScrollReset:l,relative:d,viewTransition:f})}},[v,m,E,s,o,t,r,l,d,f])}const GI=()=>{};var Zg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},KI=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],f=r[t++],m=((o&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],d=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Jv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,f=d?r[o+1]:0,m=o+2<r.length,v=m?r[o+2]:0,E=l>>2,I=(l&3)<<4|f>>4;let x=(f&15)<<2|v>>6,L=v&63;m||(L=64,d||(x=64)),s.push(t[E],t[I],t[x],t[L])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Yv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):KI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||v==null||I==null)throw new QI;const x=l<<2|f>>4;if(s.push(x),v!==64){const L=f<<4&240|v>>2;if(s.push(L),I!==64){const B=v<<6&192|I;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class QI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YI=function(r){const e=Yv(r);return Jv.encodeByteArray(e,!0)},Ic=function(r){return YI(r).replace(/\./g,"")},Xv=function(r){try{return Jv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=()=>JI().__FIREBASE_DEFAULTS__,ZI=()=>{if(typeof process>"u"||typeof Zg>"u")return;const r=Zg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},eT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Xv(r[1]);return e&&JSON.parse(e)},Hc=()=>{try{return GI()||XI()||ZI()||eT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Zv=r=>{var e,t;return(t=(e=Hc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},tT=r=>{const e=Zv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},e0=()=>{var r;return(r=Hc())===null||r===void 0?void 0:r.config},t0=r=>{var e;return(e=Hc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function n0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ic(JSON.stringify(t)),Ic(JSON.stringify(d)),""].join(".")}const hl={};function sT(){const r={prod:[],emulator:[]};for(const e of Object.keys(hl))hl[e]?r.emulator.push(e):r.prod.push(e);return r}function iT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ey=!1;function r0(r,e){if(typeof window>"u"||typeof document>"u"||!fa(window.location.host)||hl[r]===e||hl[r]||ey)return;hl[r]=e;function t(x){return`__firebase__banner__${x}`}const s="__firebase__banner",l=sT().prod.length>0;function d(){const x=document.getElementById(s);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function m(x,L){x.setAttribute("width","24"),x.setAttribute("id",L),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function v(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{ey=!0,d()},x}function E(x,L){x.setAttribute("id",L),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function I(){const x=iT(s),L=t("text"),B=document.getElementById(L)||document.createElement("span"),$=t("learnmore"),M=document.getElementById($)||document.createElement("a"),Q=t("preprendIcon"),te=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const J=x.element;f(J),E(M,$);const _e=v();m(te,Q),J.append(te,B,M,_e),document.body.appendChild(J)}l?(B.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function aT(){var r;const e=(r=Hc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function cT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dT(){const r=hn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function hT(){return!aT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fT(){try{return typeof indexedDB=="object"}catch{return!1}}function pT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="FirebaseError";class Is extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=mT,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kl.prototype.create)}}class kl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?gT(l,s):"Error",f=`${this.serviceName}: ${d} (${o}).`;return new Is(o,f,s)}}function gT(r,e){return r.replace(yT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const yT=/\{\$([^}]+)}/g;function vT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function gs(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],d=e[o];if(ty(l)&&ty(d)){if(!gs(l,d))return!1}else if(l!==d)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function ty(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function sl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function il(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function _T(r,e){const t=new wT(r,e);return t.subscribe.bind(t)}class wT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");ET(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=$h),o.error===void 0&&(o.error=$h),o.complete===void 0&&(o.complete=$h);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ET(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function $h(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(r){return r&&r._delegate?r._delegate:r}class Xi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new nT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xT(e))try{this.getOrInitializeService({instanceIdentifier:Gi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gi){return this.instances.has(e)}getOptions(e=Gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&d.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:TT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Gi){return this.component?this.component.multipleInstances?e:Gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TT(r){return r===Gi?void 0:r}function xT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new IT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ge||(Ge={}));const CT={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},RT=Ge.INFO,AT={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},PT=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=AT[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Of{constructor(e){this.name=e,this._logLevel=RT,this._logHandler=PT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const bT=(r,e)=>e.some(t=>r instanceof t);let ny,ry;function kT(){return ny||(ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NT(){return ry||(ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const s0=new WeakMap,of=new WeakMap,i0=new WeakMap,Hh=new WeakMap,Lf=new WeakMap;function DT(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(li(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&s0.set(t,r)}).catch(()=>{}),Lf.set(e,r),e}function VT(r){if(of.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});of.set(r,e)}let af={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return of.get(r);if(e==="objectStoreNames")return r.objectStoreNames||i0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return li(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function OT(r){af=r(af)}function LT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Wh(this),e,...t);return i0.set(s,e.sort?e.sort():[e]),li(s)}:NT().includes(r)?function(...e){return r.apply(Wh(this),e),li(s0.get(this))}:function(...e){return li(r.apply(Wh(this),e))}}function jT(r){return typeof r=="function"?LT(r):(r instanceof IDBTransaction&&VT(r),bT(r,kT())?new Proxy(r,af):r)}function li(r){if(r instanceof IDBRequest)return DT(r);if(Hh.has(r))return Hh.get(r);const e=jT(r);return e!==r&&(Hh.set(r,e),Lf.set(e,r)),e}const Wh=r=>Lf.get(r);function MT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),f=li(d);return s&&d.addEventListener("upgradeneeded",m=>{s(li(d.result),m.oldVersion,m.newVersion,li(d.transaction),m)}),t&&d.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const FT=["get","getKey","getAll","getAllKeys","count"],UT=["put","add","delete","clear"],qh=new Map;function sy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(qh.get(e))return qh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=UT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||FT.includes(t)))return;const l=async function(d,...f){const m=this.transaction(d,o?"readwrite":"readonly");let v=m.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&m.done]))[0]};return qh.set(e,l),l}OT(r=>({...r,get:(e,t,s)=>sy(e,t)||r.get(e,t,s),has:(e,t)=>!!sy(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function BT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lf="@firebase/app",iy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Of("@firebase/app"),$T="@firebase/app-compat",HT="@firebase/analytics-compat",WT="@firebase/analytics",qT="@firebase/app-check-compat",GT="@firebase/app-check",KT="@firebase/auth",QT="@firebase/auth-compat",YT="@firebase/database",JT="@firebase/data-connect",XT="@firebase/database-compat",ZT="@firebase/functions",ex="@firebase/functions-compat",tx="@firebase/installations",nx="@firebase/installations-compat",rx="@firebase/messaging",sx="@firebase/messaging-compat",ix="@firebase/performance",ox="@firebase/performance-compat",ax="@firebase/remote-config",lx="@firebase/remote-config-compat",ux="@firebase/storage",cx="@firebase/storage-compat",dx="@firebase/firestore",hx="@firebase/ai",fx="@firebase/firestore-compat",px="firebase",mx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="[DEFAULT]",gx={[lf]:"fire-core",[$T]:"fire-core-compat",[WT]:"fire-analytics",[HT]:"fire-analytics-compat",[GT]:"fire-app-check",[qT]:"fire-app-check-compat",[KT]:"fire-auth",[QT]:"fire-auth-compat",[YT]:"fire-rtdb",[JT]:"fire-data-connect",[XT]:"fire-rtdb-compat",[ZT]:"fire-fn",[ex]:"fire-fn-compat",[tx]:"fire-iid",[nx]:"fire-iid-compat",[rx]:"fire-fcm",[sx]:"fire-fcm-compat",[ix]:"fire-perf",[ox]:"fire-perf-compat",[ax]:"fire-rc",[lx]:"fire-rc-compat",[ux]:"fire-gcs",[cx]:"fire-gcs-compat",[dx]:"fire-fst",[fx]:"fire-fst-compat",[hx]:"fire-vertex","fire-js":"fire-js",[px]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Map,yx=new Map,cf=new Map;function oy(r,e){try{r.container.addComponent(e)}catch(t){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ta(r){const e=r.name;if(cf.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;cf.set(e,r);for(const t of Tc.values())oy(t,r);for(const t of yx.values())oy(t,r);return!0}function jf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function wn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new kl("app","Firebase",vx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=mx;function o0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:uf,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw ui.create("bad-app-name",{appName:String(o)});if(t||(t=e0()),!t)throw ui.create("no-options");const l=Tc.get(o);if(l){if(gs(t,l.options)&&gs(s,l.config))return l;throw ui.create("duplicate-app",{appName:o})}const d=new ST(o);for(const m of cf.values())d.addComponent(m);const f=new _x(t,s,d);return Tc.set(o,f),f}function a0(r=uf){const e=Tc.get(r);if(!e&&r===uf&&e0())return o0();if(!e)throw ui.create("no-app",{appName:r});return e}function ci(r,e,t){var s;let o=(s=gx[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(f.join(" "));return}ta(new Xi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="firebase-heartbeat-database",Ex=1,Tl="firebase-heartbeat-store";let Gh=null;function l0(){return Gh||(Gh=MT(wx,Ex,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Tl)}catch(t){console.warn(t)}}}}).catch(r=>{throw ui.create("idb-open",{originalErrorMessage:r.message})})),Gh}async function Ix(r){try{const t=(await l0()).transaction(Tl),s=await t.objectStore(Tl).get(u0(r));return await t.done,s}catch(e){if(e instanceof Is)ys.warn(e.message);else{const t=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ys.warn(t.message)}}}async function ay(r,e){try{const s=(await l0()).transaction(Tl,"readwrite");await s.objectStore(Tl).put(e,u0(r)),await s.done}catch(t){if(t instanceof Is)ys.warn(t.message);else{const s=ui.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ys.warn(s.message)}}}function u0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=1024,xx=30;class Sx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Rx(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ly();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>xx){const d=Ax(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ys.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ly(),{heartbeatsToSend:s,unsentEntries:o}=Cx(this._heartbeatsCache.heartbeats),l=Ic(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ys.warn(t),""}}}function ly(){return new Date().toISOString().substring(0,10)}function Cx(r,e=Tx){const t=[];let s=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),uy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),uy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Rx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fT()?pT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ix(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ay(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ay(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function uy(r){return Ic(JSON.stringify({version:2,heartbeats:r})).length}function Ax(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(r){ta(new Xi("platform-logger",e=>new zT(e),"PRIVATE")),ta(new Xi("heartbeat",e=>new Sx(e),"PRIVATE")),ci(lf,iy,r),ci(lf,iy,"esm2017"),ci("fire-js","")}Px("");var bx="firebase",kx="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci(bx,kx,"app");function Mf(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function c0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nx=c0,d0=new kl("auth","Firebase",c0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Of("@firebase/auth");function Dx(r,...e){xc.logLevel<=Ge.WARN&&xc.warn(`Auth (${ma}): ${r}`,...e)}function uc(r,...e){xc.logLevel<=Ge.ERROR&&xc.error(`Auth (${ma}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(r,...e){throw Uf(r,...e)}function Ln(r,...e){return Uf(r,...e)}function Ff(r,e,t){const s=Object.assign(Object.assign({},Nx()),{[e]:t});return new kl("auth","Firebase",s).create(e,{appName:r.name})}function Rr(r){return Ff(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vx(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&cr(r,"argument-error"),Ff(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return d0.create(r,...e)}function he(r,e,...t){if(!r)throw Uf(e,...t)}function ps(r){const e="INTERNAL ASSERTION FAILED: "+r;throw uc(e),new Error(e)}function vs(r,e){r||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function zf(){return cy()==="http:"||cy()==="https:"}function cy(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zf()||uT()||"connection"in navigator)?navigator.onLine:!0}function Lx(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=oT()||cT()}get(){return Ox()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(r,e){vs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fx=new Nl(3e4,6e4);function fn(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function jn(r,e,t,s,o={}){return f0(r,o,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const f=pa(Object.assign({key:r.config.apiKey},d)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:m},l);return lT()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&fa(r.emulatorConfig.host)&&(v.credentials="include"),h0.fetch()(await p0(r,r.config.apiHost,t,f),v)})}async function f0(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},jx),e);try{const o=new zx(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw ol(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const f=l.ok?d.errorMessage:d.error.message,[m,v]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw ol(r,"credential-already-in-use",d);if(m==="EMAIL_EXISTS")throw ol(r,"email-already-in-use",d);if(m==="USER_DISABLED")throw ol(r,"user-disabled",d);const E=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Ff(r,E,v);cr(r,E)}}catch(o){if(o instanceof Is)throw o;cr(r,"network-request-failed",{message:String(o)})}}async function Ts(r,e,t,s,o={}){const l=await jn(r,e,t,s,o);return"mfaPendingCredential"in l&&cr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function p0(r,e,t,s){const o=`${e}${t}?${s}`,l=r,d=l.config.emulator?Bf(r.config,o):`${r.config.apiScheme}://${o}`;return Mx.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function Ux(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ln(this.auth,"network-request-failed")),Fx.get())})}}function ol(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Ln(r,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(r){return r!==void 0&&r.getResponse!==void 0}function hy(r){return r!==void 0&&r.enterprise!==void 0}class m0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ux(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bx(r){return(await jn(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function g0(r,e){return jn(r,"GET","/v2/recaptchaConfig",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(r,e){return jn(r,"POST","/v1/accounts:delete",e)}async function Cc(r,e){return jn(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Hx(r,e=!1){const t=xt(r),s=await t.getIdToken(e),o=$f(s);he(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:fl(Kh(o.auth_time)),issuedAtTime:fl(Kh(o.iat)),expirationTime:fl(Kh(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Kh(r){return Number(r)*1e3}function $f(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return uc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Xv(t);return o?JSON.parse(o):(uc("Failed to decode base64 JWT payload"),null)}catch(o){return uc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function fy(r){const e=$f(r);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Is&&Wx(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Wx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fl(this.lastLoginAt),this.creationTime=fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(r){var e;const t=r.auth,s=await r.getIdToken(),o=await na(r,Cc(t,{idToken:s}));he(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?y0(l.providerUserInfo):[],f=Kx(r.providerData,d),m=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),E=m?v:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new df(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,I)}async function Gx(r){const e=xt(r);await xl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Kx(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function y0(r){return r.map(e=>{var{providerId:t}=e,s=Mf(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(r,e){const t=await f0(r,{},async()=>{const s=pa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await p0(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return r.emulatorConfig&&fa(r.emulatorConfig.host)&&(m.credentials="include"),h0.fetch()(d,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Yx(r,e){return jn(r,"POST","/v2/accounts:revokeToken",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=fy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await Qx(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,d=new Ko;return s&&(he(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(he(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(he(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(r,e){he(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=Mf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new df(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await na(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Hx(this,e)}reload(){return Gx(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await xl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await na(this,$x(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,d,f,m,v,E;const I=(s=t.displayName)!==null&&s!==void 0?s:void 0,x=(o=t.email)!==null&&o!==void 0?o:void 0,L=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,B=(d=t.photoURL)!==null&&d!==void 0?d:void 0,$=(f=t.tenantId)!==null&&f!==void 0?f:void 0,M=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,Q=(v=t.createdAt)!==null&&v!==void 0?v:void 0,te=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:J,emailVerified:_e,isAnonymous:ce,providerData:Ie,stsTokenManager:P}=t;he(J&&P,e,"internal-error");const C=Ko.fromJSON(this.name,P);he(typeof J=="string",e,"internal-error"),ei(I,e.name),ei(x,e.name),he(typeof _e=="boolean",e,"internal-error"),he(typeof ce=="boolean",e,"internal-error"),ei(L,e.name),ei(B,e.name),ei($,e.name),ei(M,e.name),ei(Q,e.name),ei(te,e.name);const S=new Cr({uid:J,auth:e,email:x,emailVerified:_e,displayName:I,isAnonymous:ce,photoURL:B,phoneNumber:L,tenantId:$,stsTokenManager:C,createdAt:Q,lastLoginAt:te});return Ie&&Array.isArray(Ie)&&(S.providerData=Ie.map(b=>Object.assign({},b))),M&&(S._redirectEventId=M),S}static async _fromIdTokenResponse(e,t,s=!1){const o=new Ko;o.updateFromServerResponse(t);const l=new Cr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await xl(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];he(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?y0(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Ko;f.updateFromIdToken(s);const m=new Cr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new df(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,v),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=new Map;function ms(r){vs(r instanceof Function,"Expected a class definition");let e=py.get(r);return e?(vs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,py.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}v0.type="NONE";const my=v0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(r,e,t){return`firebase:${r}:${e}:${t}`}class Qo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=cc(this.userKey,o.apiKey,l),this.fullPersistenceKey=cc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Cc(this.auth,{idToken:e}).catch(()=>{});return t?Cr._fromGetAccountInfoResponse(this.auth,t,e):null}return Cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Qo(ms(my),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||ms(my);const d=cc(s,e.config.apiKey,e.name);let f=null;for(const v of t)try{const E=await v._get(d);if(E){let I;if(typeof E=="string"){const x=await Cc(e,{idToken:E}).catch(()=>{});if(!x)break;I=await Cr._fromGetAccountInfoResponse(e,x,E)}else I=Cr._fromJSON(e,E);v!==l&&(f=I),l=v;break}}catch{}const m=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Qo(l,e,s):(l=m[0],f&&await l._set(d,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new Qo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x0(e))return"Blackberry";if(S0(e))return"Webos";if(w0(e))return"Safari";if((e.includes("chrome/")||E0(e))&&!e.includes("edge/"))return"Chrome";if(T0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function _0(r=hn()){return/firefox\//i.test(r)}function w0(r=hn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E0(r=hn()){return/crios\//i.test(r)}function I0(r=hn()){return/iemobile/i.test(r)}function T0(r=hn()){return/android/i.test(r)}function x0(r=hn()){return/blackberry/i.test(r)}function S0(r=hn()){return/webos/i.test(r)}function Hf(r=hn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Jx(r=hn()){var e;return Hf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Xx(){return dT()&&document.documentMode===10}function C0(r=hn()){return Hf(r)||T0(r)||S0(r)||x0(r)||/windows phone/i.test(r)||I0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(r,e=[]){let t;switch(r){case"Browser":t=gy(hn());break;case"Worker":t=`${gy(hn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ma}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((d,f)=>{try{const m=e(l);d(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(r,e={}){return jn(r,"GET","/v2/passwordPolicy",fn(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=6;class n1{constructor(e){var t,s,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:t1,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,d,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(d=m.containsNumericCharacter)!==null&&d!==void 0?d:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yy(this),this.idTokenSubscription=new yy(this),this.beforeStateQueue=new Zx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ms(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Cc(this,{idToken:e}),s=await Cr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(wn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!d||d===f)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Lx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(Rr(this));const t=e?xt(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await e1(this),t=new n1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Yx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ms(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[ms(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(f,this,"internal-error"),f.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,o);return()=>{d=!0,m()}}else{const m=e.addObserver(t);return()=>{d=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=R0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Dx(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function dr(r){return xt(r)}class yy{constructor(e){this.auth=e,this.observer=null,this.addObserver=_T(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s1(r){Dl=r}function Wf(r){return Dl.loadJS(r)}function i1(){return Dl.recaptchaV2Script}function o1(){return Dl.recaptchaEnterpriseScript}function a1(){return Dl.gapiScript}function A0(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=500,u1=6e4,tc=1e12;class c1{constructor(e){this.auth=e,this.counter=tc,this._widgets=new Map}render(e,t){const s=this.counter;return this._widgets.set(s,new f1(e,this.auth.name,t||{})),this.counter++,s}reset(e){var t;const s=e||tc;(t=this._widgets.get(s))===null||t===void 0||t.delete(),this._widgets.delete(s)}getResponse(e){var t;const s=e||tc;return((t=this._widgets.get(s))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const s=e||tc;return(t=this._widgets.get(s))===null||t===void 0||t.execute(),""}}class d1{constructor(){this.enterprise=new h1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class h1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class f1{constructor(e,t,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;he(o,"argument-error",{appName:t}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=p1(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},u1)},l1))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function p1(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<r;s++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const m1="recaptcha-enterprise",pl="NO_RECAPTCHA";class P0{constructor(e){this.type=m1,this.auth=dr(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,f)=>{g0(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new m0(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(m=>{f(m)})})}function o(l,d,f){const m=window.grecaptcha;hy(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(pl)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new d1().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{s(this.auth).then(f=>{if(!t&&hy(window.grecaptcha))o(f,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let m=o1();m.length!==0&&(m+=f),Wf(m).then(()=>{o(f,l,d)}).catch(v=>{d(v)})}}).catch(f=>{d(f)})})}}async function tl(r,e,t,s=!1,o=!1){const l=new P0(r);let d;if(o)d=pl;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Yo(r,e,t,s,o){var l,d;if(o==="EMAIL_PASSWORD_PROVIDER")if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await tl(r,e,t,t==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await tl(r,e,t,t==="getOobCode");return s(r,m)}else return Promise.reject(f)});else if(o==="PHONE_PROVIDER")if(!((d=r._getRecaptchaConfig())===null||d===void 0)&&d.isProviderEnabled("PHONE_PROVIDER")){const f=await tl(r,e,t);return s(r,f).catch(async m=>{var v;if(((v=r._getRecaptchaConfig())===null||v===void 0?void 0:v.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(m.code==="auth/missing-recaptcha-token"||m.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const E=await tl(r,e,t,!1,!0);return s(r,E)}return Promise.reject(m)})}else{const f=await tl(r,e,t,!1,!0);return s(r,f)}else return Promise.reject(o+" provider is not supported.")}async function g1(r){const e=dr(r),t=await g0(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new m0(t);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new P0(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r,e){const t=jf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(gs(l,e??{}))return o;cr(o,"already-initialized")}return t.initialize({options:e})}function v1(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ms);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function _1(r,e,t){const s=dr(r);he(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=b0(e),{host:d,port:f}=w1(e),m=f===null?"":`:${f}`,v={url:`${l}//${d}${m}/`},E=Object.freeze({host:d,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){he(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),he(gs(v,s.config.emulator)&&gs(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,fa(d)?(n0(`${l}//${d}${m}`),r0("Auth",!0)):E1()}function b0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function w1(r){const e=b0(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:vy(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:vy(d)}}}function vy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function E1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,t){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function I1(r,e){return jn(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(r,e){return Ts(r,"POST","/v1/accounts:signInWithPassword",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(r,e){return Ts(r,"POST","/v1/accounts:signInWithEmailLink",fn(r,e))}async function S1(r,e){return Ts(r,"POST","/v1/accounts:signInWithEmailLink",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends Wc{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Sl(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Sl(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yo(e,t,"signInWithPassword",T1,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return x1(e,{email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yo(e,s,"signUpPassword",I1,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return S1(e,{idToken:t,email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(r,e){return Ts(r,"POST","/v1/accounts:signInWithIdp",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="http://localhost";class _s extends Wc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=Mf(t,["providerId","signInMethod"]);if(!s||!o)return null;const d=new _s(s,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Jo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Jo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}buildRequest(){const e={requestUri:C1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pa(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _y(r,e){return jn(r,"POST","/v1/accounts:sendVerificationCode",fn(r,e))}async function R1(r,e){return Ts(r,"POST","/v1/accounts:signInWithPhoneNumber",fn(r,e))}async function A1(r,e){const t=await Ts(r,"POST","/v1/accounts:signInWithPhoneNumber",fn(r,e));if(t.temporaryProof)throw ol(r,"account-exists-with-different-credential",t);return t}const P1={USER_NOT_FOUND:"user-not-found"};async function b1(r,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ts(r,"POST","/v1/accounts:signInWithPhoneNumber",fn(r,t),P1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends Wc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ml({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ml({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return R1(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return A1(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return b1(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:l}=e;return!s&&!t&&!o&&!l?null:new ml({verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function N1(r){const e=sl(il(r)).link,t=e?sl(il(e)).deep_link_id:null,s=sl(il(r)).deep_link_id;return(s?sl(il(s)).link:null)||s||t||e||r}class qf{constructor(e){var t,s,o,l,d,f;const m=sl(il(e)),v=(t=m.apiKey)!==null&&t!==void 0?t:null,E=(s=m.oobCode)!==null&&s!==void 0?s:null,I=k1((o=m.mode)!==null&&o!==void 0?o:null);he(v&&E&&I,"argument-error"),this.apiKey=v,this.operation=I,this.code=E,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=m.lang)!==null&&d!==void 0?d:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=N1(e);try{return new qf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.providerId=ro.PROVIDER_ID}static credential(e,t){return Sl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=qf.parseLink(t);return he(s,"argument-error"),Sl._fromEmailAndCode(e,s.code,s.tenantId)}}ro.PROVIDER_ID="password";ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga extends Gf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Xo extends ga{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return he("providerId"in t&&"signInMethod"in t,"argument-error"),_s._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return he(e.idToken||e.accessToken,"argument-error"),_s._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Xo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Xo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:l,nonce:d,providerId:f}=e;if(!s&&!o&&!t&&!l||!f)return null;try{return new Xo(f)._credential({idToken:t,accessToken:s,nonce:d,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends ga{constructor(){super("facebook.com")}static credential(e){return _s._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ti.credential(e.oauthAccessToken)}catch{return null}}}ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends ga{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _s._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return fs.credential(t,s)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends ga{constructor(){super("github.com")}static credential(e){return _s._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.GITHUB_SIGN_IN_METHOD="github.com";ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends ga{constructor(){super("twitter.com")}static credential(e,t){return _s._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ri.credential(t,s)}catch{return null}}}ri.TWITTER_SIGN_IN_METHOD="twitter.com";ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(r,e){return Ts(r,"POST","/v1/accounts:signUp",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Cr._fromIdTokenResponse(e,s,o),d=wy(s);return new pi({user:l,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=wy(s);return new pi({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function wy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends Is{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Rc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Rc(e,t,s,o)}}function k0(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Rc._fromErrorAndOperation(r,l,e,s):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}async function N0(r,e,t=!1){const s=await na(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return pi._forOperation(r,"link",s)}async function O1(r,e,t){await xl(e);const s=V1(e.providerData);he(s.has(t)===r,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(r,e,t=!1){const{auth:s}=r;if(wn(s.app))return Promise.reject(Rr(s));const o="reauthenticate";try{const l=await na(r,k0(s,o,e,r),t);he(l.idToken,s,"internal-error");const d=$f(l.idToken);he(d,s,"internal-error");const{sub:f}=d;return he(r.uid===f,s,"user-mismatch"),pi._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&cr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D0(r,e,t=!1){if(wn(r.app))return Promise.reject(Rr(r));const s="signIn",o=await k0(r,s,e),l=await pi._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function V0(r,e){return D0(dr(r),e)}async function nc(r,e){const t=xt(r);return await O1(!1,t,e.providerId),N0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(r,e){return Ts(r,"POST","/v1/accounts:signInWithCustomToken",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(r,e){if(wn(r.app))return Promise.reject(Rr(r));const t=dr(r),s=await j1(t,{token:e,returnSecureToken:!0}),o=await pi._fromIdTokenResponse(t,"signIn",s);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O0(r){const e=dr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function L0(r,e,t){if(wn(r.app))return Promise.reject(Rr(r));const s=dr(r),d=await Yo(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",D1,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&O0(r),m}),f=await pi._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function F1(r,e,t){return wn(r.app)?Promise.reject(Rr(r)):V0(xt(r),ro.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&O0(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U1(r,e){return jn(r,"POST","/v1/accounts:createAuthUri",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(r,e){const t=zf()?Sc():"http://localhost",s={identifier:e,continueUri:t},{signinMethods:o}=await U1(xt(r),s);return o||[]}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(r,e){return jn(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $1(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=xt(r),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await na(s,B1(s.auth,l));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const f=s.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=s.displayName,f.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function H1(r,e,t,s){return xt(r).onIdTokenChanged(e,t,s)}function W1(r,e,t){return xt(r).beforeAuthStateChanged(e,t)}function q1(r,e,t,s){return xt(r).onAuthStateChanged(e,t,s)}function G1(r){return xt(r).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(r,e){return jn(r,"POST","/v2/accounts/mfaEnrollment:start",fn(r,e))}const Ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ac,"1"),this.storage.removeItem(Ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=1e3,Q1=10;class M0 extends j0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=C0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,m)=>{this.notifyListeners(d,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);Xx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Q1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},K1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}M0.type="LOCAL";const Y1=M0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends j0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}F0.type="SESSION";const U0=F0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new qc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(d).map(async v=>v(t.origin,l)),m=await J1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((f,m)=>{const v=Kf("",20);o.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(I){const x=I;if(x.data.eventId===v)switch(x.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(x.data.response);break;default:clearTimeout(E),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return window}function Z1(r){Ot().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(){return typeof Ot().WorkerGlobalScope<"u"&&typeof Ot().importScripts=="function"}async function eS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function nS(){return Qf()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="firebaseLocalStorageDb",rS=1,Pc="firebaseLocalStorage",B0="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gc(r,e){return r.transaction([Pc],e?"readwrite":"readonly").objectStore(Pc)}function sS(){const r=indexedDB.deleteDatabase(z0);return new Vl(r).toPromise()}function hf(){const r=indexedDB.open(z0,rS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Pc,{keyPath:B0})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Pc)?e(s):(s.close(),await sS(),e(await hf()))})})}async function Iy(r,e,t){const s=Gc(r,!0).put({[B0]:e,value:t});return new Vl(s).toPromise()}async function iS(r,e){const t=Gc(r,!1).get(e),s=await new Vl(t).toPromise();return s===void 0?null:s.value}function Ty(r,e){const t=Gc(r,!0).delete(e);return new Vl(t).toPromise()}const oS=800,aS=3;class $0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>aS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qc._getInstance(nS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await eS(),!this.activeServiceWorker)return;this.sender=new X1(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hf();return await Iy(e,Ac,"1"),await Ty(e,Ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Iy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>iS(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ty(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Gc(o,!1).getAll();return new Vl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$0.type="LOCAL";const lS=$0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(r,e){return jn(r,"POST","/v2/accounts/mfaSignIn:start",fn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=A0("rcb"),uS=new Nl(3e4,6e4);class cS{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ot().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return he(dS(t),e,"argument-error"),this.shouldResolveImmediately(t)&&dy(Ot().grecaptcha)?Promise.resolve(Ot().grecaptcha):new Promise((s,o)=>{const l=Ot().setTimeout(()=>{o(Ln(e,"network-request-failed"))},uS.get());Ot()[Qh]=()=>{Ot().clearTimeout(l),delete Ot()[Qh];const f=Ot().grecaptcha;if(!f||!dy(f)){o(Ln(e,"internal-error"));return}const m=f.render;f.render=(v,E)=>{const I=m(v,E);return this.counter++,I},this.hostLanguage=t,s(f)};const d=`${i1()}?${pa({onload:Qh,render:"explicit",hl:t})}`;Wf(d).catch(()=>{clearTimeout(l),o(Ln(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Ot().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function dS(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}class hS{async load(e){return new c1(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="recaptcha",fS={theme:"light",type:"image"};class H0{constructor(e,t,s=Object.assign({},fS)){this.parameters=s,this.type=gl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dr(e),this.isInvisible=this.parameters.size==="invisible",he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof t=="string"?document.getElementById(t):t;he(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hS:new cS,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),s=t.getResponse(e);return s||new Promise(o=>{const l=d=>{d&&(this.tokenChangeListeners.delete(l),o(d))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(s=>s(t)),typeof e=="function")e(t);else if(typeof e=="string"){const s=Ot()[e];typeof s=="function"&&s(t)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){he(zf()&&!Qf(),this.auth,"internal-error"),await pS(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Bx(this.auth);he(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function pS(){let r=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}r=()=>e(),window.addEventListener("load",r)}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ml._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function gS(r,e,t){if(wn(r.app))return Promise.reject(Rr(r));const s=dr(r),o=await yS(s,e,xt(t));return new mS(o,l=>V0(s,l))}async function yS(r,e,t){var s;if(!r._getRecaptchaConfig())try{await g1(r)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const l=o.session;if("phoneNumber"in o){he(l.type==="enroll",r,"internal-error");const d={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Yo(r,d,"mfaSmsEnrollment",async(E,I)=>{if(I.phoneEnrollmentInfo.captchaResponse===pl){he((t==null?void 0:t.type)===gl,E,"argument-error");const x=await Yh(E,I,t);return Ey(E,x)}return Ey(E,I)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneSessionInfo.sessionInfo}else{he(l.type==="signin",r,"internal-error");const d=((s=o.multiFactorHint)===null||s===void 0?void 0:s.uid)||o.multiFactorUid;he(d,r,"missing-multi-factor-info");const f={mfaPendingCredential:l.credential,mfaEnrollmentId:d,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Yo(r,f,"mfaSmsSignIn",async(I,x)=>{if(x.phoneSignInInfo.captchaResponse===pl){he((t==null?void 0:t.type)===gl,I,"argument-error");const L=await Yh(I,x,t);return xy(I,L)}return xy(I,x)},"PHONE_PROVIDER").catch(I=>Promise.reject(I))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Yo(r,l,"sendVerificationCode",async(v,E)=>{if(E.captchaResponse===pl){he((t==null?void 0:t.type)===gl,v,"argument-error");const I=await Yh(v,E,t);return _y(v,I)}return _y(v,E)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).sessionInfo}}finally{t==null||t._reset()}}async function Yh(r,e,t){he(t.type===gl,r,"argument-error");const s=await t.verify();he(typeof s=="string",r,"argument-error");const o=Object.assign({},e);if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.captchaResponse,f=o.phoneEnrollmentInfo.clientType,m=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:s,captchaResponse:d,clientType:f,recaptchaVersion:m}}),o}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.captchaResponse,d=o.phoneSignInInfo.clientType,f=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:l,clientType:d,recaptchaVersion:f}}),o}else return Object.assign(o,{recaptchaToken:s}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(r,e){return e?ms(e):(he(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf extends Wc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vS(r){return D0(r.auth,new Yf(r),r.bypassAuthState)}function _S(r){const{auth:e,user:t}=r;return he(t,e,"internal-error"),L1(t,new Yf(r),r.bypassAuthState)}async function wS(r){const{auth:e,user:t}=r;return he(t,e,"internal-error"),N0(t,new Yf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:d,type:f}=e;if(d){this.reject(d);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vS;case"linkViaPopup":case"linkViaRedirect":return wS;case"reauthViaPopup":case"reauthViaRedirect":return _S;default:cr(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=new Nl(2e3,1e4);async function rc(r,e,t){if(wn(r.app))return Promise.reject(Ln(r,"operation-not-supported-in-this-environment"));const s=dr(r);Vx(r,e,Gf);const o=W0(s,t);return new Qi(s,"signInViaPopup",e,o).executeNotNull()}class Qi extends q0{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Qi.currentPopupAction&&Qi.currentPopupAction.cancel(),Qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=Kf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ES.get())};e()}}Qi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="pendingRedirect",dc=new Map;class TS extends q0{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=dc.get(this.auth._key());if(!e){try{const s=await xS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}dc.set(this.auth._key(),e)}return this.bypassAuthState||dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xS(r,e){const t=RS(e),s=CS(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function SS(r,e){dc.set(r._key(),e)}function CS(r){return ms(r._redirectPersistence)}function RS(r){return cc(IS,r.config.apiKey,r.name)}async function AS(r,e,t=!1){if(wn(r.app))return Promise.reject(Rr(r));const s=dr(r),o=W0(s,e),d=await new TS(s,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=10*60*1e3;class bS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!G0(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ln(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sy(e))}saveEventToCache(e){this.cachedEventUids.add(Sy(e)),this.lastProcessedEventTime=Date.now()}}function Sy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function G0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NS(r,e={}){return jn(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VS=/^https?/;async function OS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await NS(r);for(const t of e)try{if(LS(t))return}catch{}cr(r,"unauthorized-domain")}function LS(r){const e=Sc(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!VS.test(t))return!1;if(DS.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new Nl(3e4,6e4);function Cy(){const r=Ot().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function MS(r){return new Promise((e,t)=>{var s,o,l;function d(){Cy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cy(),t(Ln(r,"network-request-failed"))},timeout:jS.get()})}if(!((o=(s=Ot().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Ot().gapi)===null||l===void 0)&&l.load)d();else{const f=A0("iframefcb");return Ot()[f]=()=>{gapi.load?d():t(Ln(r,"network-request-failed"))},Wf(`${a1()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw hc=null,e})}let hc=null;function FS(r){return hc=hc||MS(r),hc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new Nl(5e3,15e3),zS="__/auth/iframe",BS="emulator/auth/iframe",$S={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WS(r){const e=r.config;he(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Bf(e,BS):`https://${r.config.authDomain}/${zS}`,s={apiKey:e.apiKey,appName:r.name,v:ma},o=HS.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${pa(s).slice(1)}`}async function qS(r){const e=await FS(r),t=Ot().gapi;return he(t,r,"internal-error"),e.open({where:document.body,url:WS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$S,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const d=Ln(r,"network-request-failed"),f=Ot().setTimeout(()=>{l(d)},US.get());function m(){Ot().clearTimeout(f),o(s)}s.ping(m).then(m,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KS=500,QS=600,YS="_blank",JS="http://localhost";class Ry{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XS(r,e,t,s=KS,o=QS){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m=Object.assign(Object.assign({},GS),{width:s.toString(),height:o.toString(),top:l,left:d}),v=hn().toLowerCase();t&&(f=E0(v)?YS:t),_0(v)&&(e=e||JS,m.scrollbars="yes");const E=Object.entries(m).reduce((x,[L,B])=>`${x}${L}=${B},`,"");if(Jx(v)&&f!=="_self")return ZS(e||"",f),new Ry(null);const I=window.open(e||"",f,E);he(I,r,"popup-blocked");try{I.focus()}catch{}return new Ry(I)}function ZS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="__/auth/handler",tC="emulator/auth/handler",nC=encodeURIComponent("fac");async function Ay(r,e,t,s,o,l){he(r.config.authDomain,r,"auth-domain-config-required"),he(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:ma,eventId:o};if(e instanceof Gf){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",vT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))d[E]=I}if(e instanceof ga){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const m=await r._getAppCheckToken(),v=m?`#${nC}=${encodeURIComponent(m)}`:"";return`${rC(r)}?${pa(f).slice(1)}${v}`}function rC({config:r}){return r.emulator?Bf(r,tC):`https://${r.authDomain}/${eC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="webStorageSupport";class sC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U0,this._completeRedirectFn=AS,this._overrideRedirectResult=SS}async _openPopup(e,t,s,o){var l;vs((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await Ay(e,t,s,Sc(),o);return XS(e,d,Kf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Ay(e,t,s,Sc(),o);return Z1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(vs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await qS(e),s=new bS(e);return t.register("authEvent",o=>(he(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jh,{type:Jh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Jh];d!==void 0&&t(!!d),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=OS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return C0()||w0()||Hf()}}const iC=sC;var Py="@firebase/auth",by="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lC(r){ta(new Xi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;he(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:R0(r)},v=new r1(s,o,l,m);return v1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ta(new Xi("auth-internal",e=>{const t=dr(e.getProvider("auth").getImmediate());return(s=>new oC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ci(Py,by,aC(r)),ci(Py,by,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=5*60,cC=t0("authIdTokenMaxAge")||uC;let ky=null;const dC=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>cC)return;const o=t==null?void 0:t.token;ky!==o&&(ky=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function hC(r=a0()){const e=jf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=y1(r,{popupRedirectResolver:iC,persistence:[lS,Y1,U0]}),s=t0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=dC(l.toString());W1(t,d,()=>d(t.currentUser)),H1(t,f=>d(f))}}const o=Zv("auth");return o&&_1(t,`http://${o}`),t}function fC(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}s1({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Ln("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",fC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lC("Browser");var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var di,K0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,C){function S(){}S.prototype=C.prototype,P.D=C.prototype,P.prototype=new S,P.prototype.constructor=P,P.C=function(b,N,O){for(var R=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)R[Ze-2]=arguments[Ze];return C.prototype[N].apply(b,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,C,S){S||(S=0);var b=Array(16);if(typeof C=="string")for(var N=0;16>N;++N)b[N]=C.charCodeAt(S++)|C.charCodeAt(S++)<<8|C.charCodeAt(S++)<<16|C.charCodeAt(S++)<<24;else for(N=0;16>N;++N)b[N]=C[S++]|C[S++]<<8|C[S++]<<16|C[S++]<<24;C=P.g[0],S=P.g[1],N=P.g[2];var O=P.g[3],R=C+(O^S&(N^O))+b[0]+3614090360&4294967295;C=S+(R<<7&4294967295|R>>>25),R=O+(N^C&(S^N))+b[1]+3905402710&4294967295,O=C+(R<<12&4294967295|R>>>20),R=N+(S^O&(C^S))+b[2]+606105819&4294967295,N=O+(R<<17&4294967295|R>>>15),R=S+(C^N&(O^C))+b[3]+3250441966&4294967295,S=N+(R<<22&4294967295|R>>>10),R=C+(O^S&(N^O))+b[4]+4118548399&4294967295,C=S+(R<<7&4294967295|R>>>25),R=O+(N^C&(S^N))+b[5]+1200080426&4294967295,O=C+(R<<12&4294967295|R>>>20),R=N+(S^O&(C^S))+b[6]+2821735955&4294967295,N=O+(R<<17&4294967295|R>>>15),R=S+(C^N&(O^C))+b[7]+4249261313&4294967295,S=N+(R<<22&4294967295|R>>>10),R=C+(O^S&(N^O))+b[8]+1770035416&4294967295,C=S+(R<<7&4294967295|R>>>25),R=O+(N^C&(S^N))+b[9]+2336552879&4294967295,O=C+(R<<12&4294967295|R>>>20),R=N+(S^O&(C^S))+b[10]+4294925233&4294967295,N=O+(R<<17&4294967295|R>>>15),R=S+(C^N&(O^C))+b[11]+2304563134&4294967295,S=N+(R<<22&4294967295|R>>>10),R=C+(O^S&(N^O))+b[12]+1804603682&4294967295,C=S+(R<<7&4294967295|R>>>25),R=O+(N^C&(S^N))+b[13]+4254626195&4294967295,O=C+(R<<12&4294967295|R>>>20),R=N+(S^O&(C^S))+b[14]+2792965006&4294967295,N=O+(R<<17&4294967295|R>>>15),R=S+(C^N&(O^C))+b[15]+1236535329&4294967295,S=N+(R<<22&4294967295|R>>>10),R=C+(N^O&(S^N))+b[1]+4129170786&4294967295,C=S+(R<<5&4294967295|R>>>27),R=O+(S^N&(C^S))+b[6]+3225465664&4294967295,O=C+(R<<9&4294967295|R>>>23),R=N+(C^S&(O^C))+b[11]+643717713&4294967295,N=O+(R<<14&4294967295|R>>>18),R=S+(O^C&(N^O))+b[0]+3921069994&4294967295,S=N+(R<<20&4294967295|R>>>12),R=C+(N^O&(S^N))+b[5]+3593408605&4294967295,C=S+(R<<5&4294967295|R>>>27),R=O+(S^N&(C^S))+b[10]+38016083&4294967295,O=C+(R<<9&4294967295|R>>>23),R=N+(C^S&(O^C))+b[15]+3634488961&4294967295,N=O+(R<<14&4294967295|R>>>18),R=S+(O^C&(N^O))+b[4]+3889429448&4294967295,S=N+(R<<20&4294967295|R>>>12),R=C+(N^O&(S^N))+b[9]+568446438&4294967295,C=S+(R<<5&4294967295|R>>>27),R=O+(S^N&(C^S))+b[14]+3275163606&4294967295,O=C+(R<<9&4294967295|R>>>23),R=N+(C^S&(O^C))+b[3]+4107603335&4294967295,N=O+(R<<14&4294967295|R>>>18),R=S+(O^C&(N^O))+b[8]+1163531501&4294967295,S=N+(R<<20&4294967295|R>>>12),R=C+(N^O&(S^N))+b[13]+2850285829&4294967295,C=S+(R<<5&4294967295|R>>>27),R=O+(S^N&(C^S))+b[2]+4243563512&4294967295,O=C+(R<<9&4294967295|R>>>23),R=N+(C^S&(O^C))+b[7]+1735328473&4294967295,N=O+(R<<14&4294967295|R>>>18),R=S+(O^C&(N^O))+b[12]+2368359562&4294967295,S=N+(R<<20&4294967295|R>>>12),R=C+(S^N^O)+b[5]+4294588738&4294967295,C=S+(R<<4&4294967295|R>>>28),R=O+(C^S^N)+b[8]+2272392833&4294967295,O=C+(R<<11&4294967295|R>>>21),R=N+(O^C^S)+b[11]+1839030562&4294967295,N=O+(R<<16&4294967295|R>>>16),R=S+(N^O^C)+b[14]+4259657740&4294967295,S=N+(R<<23&4294967295|R>>>9),R=C+(S^N^O)+b[1]+2763975236&4294967295,C=S+(R<<4&4294967295|R>>>28),R=O+(C^S^N)+b[4]+1272893353&4294967295,O=C+(R<<11&4294967295|R>>>21),R=N+(O^C^S)+b[7]+4139469664&4294967295,N=O+(R<<16&4294967295|R>>>16),R=S+(N^O^C)+b[10]+3200236656&4294967295,S=N+(R<<23&4294967295|R>>>9),R=C+(S^N^O)+b[13]+681279174&4294967295,C=S+(R<<4&4294967295|R>>>28),R=O+(C^S^N)+b[0]+3936430074&4294967295,O=C+(R<<11&4294967295|R>>>21),R=N+(O^C^S)+b[3]+3572445317&4294967295,N=O+(R<<16&4294967295|R>>>16),R=S+(N^O^C)+b[6]+76029189&4294967295,S=N+(R<<23&4294967295|R>>>9),R=C+(S^N^O)+b[9]+3654602809&4294967295,C=S+(R<<4&4294967295|R>>>28),R=O+(C^S^N)+b[12]+3873151461&4294967295,O=C+(R<<11&4294967295|R>>>21),R=N+(O^C^S)+b[15]+530742520&4294967295,N=O+(R<<16&4294967295|R>>>16),R=S+(N^O^C)+b[2]+3299628645&4294967295,S=N+(R<<23&4294967295|R>>>9),R=C+(N^(S|~O))+b[0]+4096336452&4294967295,C=S+(R<<6&4294967295|R>>>26),R=O+(S^(C|~N))+b[7]+1126891415&4294967295,O=C+(R<<10&4294967295|R>>>22),R=N+(C^(O|~S))+b[14]+2878612391&4294967295,N=O+(R<<15&4294967295|R>>>17),R=S+(O^(N|~C))+b[5]+4237533241&4294967295,S=N+(R<<21&4294967295|R>>>11),R=C+(N^(S|~O))+b[12]+1700485571&4294967295,C=S+(R<<6&4294967295|R>>>26),R=O+(S^(C|~N))+b[3]+2399980690&4294967295,O=C+(R<<10&4294967295|R>>>22),R=N+(C^(O|~S))+b[10]+4293915773&4294967295,N=O+(R<<15&4294967295|R>>>17),R=S+(O^(N|~C))+b[1]+2240044497&4294967295,S=N+(R<<21&4294967295|R>>>11),R=C+(N^(S|~O))+b[8]+1873313359&4294967295,C=S+(R<<6&4294967295|R>>>26),R=O+(S^(C|~N))+b[15]+4264355552&4294967295,O=C+(R<<10&4294967295|R>>>22),R=N+(C^(O|~S))+b[6]+2734768916&4294967295,N=O+(R<<15&4294967295|R>>>17),R=S+(O^(N|~C))+b[13]+1309151649&4294967295,S=N+(R<<21&4294967295|R>>>11),R=C+(N^(S|~O))+b[4]+4149444226&4294967295,C=S+(R<<6&4294967295|R>>>26),R=O+(S^(C|~N))+b[11]+3174756917&4294967295,O=C+(R<<10&4294967295|R>>>22),R=N+(C^(O|~S))+b[2]+718787259&4294967295,N=O+(R<<15&4294967295|R>>>17),R=S+(O^(N|~C))+b[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+N&4294967295,P.g[3]=P.g[3]+O&4294967295}s.prototype.u=function(P,C){C===void 0&&(C=P.length);for(var S=C-this.blockSize,b=this.B,N=this.h,O=0;O<C;){if(N==0)for(;O<=S;)o(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<C;)if(b[N++]=P.charCodeAt(O++),N==this.blockSize){o(this,b),N=0;break}}else for(;O<C;)if(b[N++]=P[O++],N==this.blockSize){o(this,b),N=0;break}}this.h=N,this.o+=C},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;var S=8*this.o;for(C=P.length-8;C<P.length;++C)P[C]=S&255,S/=256;for(this.u(P),P=Array(16),C=S=0;4>C;++C)for(var b=0;32>b;b+=8)P[S++]=this.g[C]>>>b&255;return P};function l(P,C){var S=f;return Object.prototype.hasOwnProperty.call(S,P)?S[P]:S[P]=C(P)}function d(P,C){this.h=C;for(var S=[],b=!0,N=P.length-1;0<=N;N--){var O=P[N]|0;b&&O==C||(S[N]=O,b=!1)}this.g=S}var f={};function m(P){return-128<=P&&128>P?l(P,function(C){return new d([C|0],0>C?-1:0)}):new d([P|0],0>P?-1:0)}function v(P){if(isNaN(P)||!isFinite(P))return I;if(0>P)return M(v(-P));for(var C=[],S=1,b=0;P>=S;b++)C[b]=P/S|0,S*=4294967296;return new d(C,0)}function E(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return M(E(P.substring(1),C));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=v(Math.pow(C,8)),b=I,N=0;N<P.length;N+=8){var O=Math.min(8,P.length-N),R=parseInt(P.substring(N,N+O),C);8>O?(O=v(Math.pow(C,O)),b=b.j(O).add(v(R))):(b=b.j(S),b=b.add(v(R)))}return b}var I=m(0),x=m(1),L=m(16777216);r=d.prototype,r.m=function(){if($(this))return-M(this).m();for(var P=0,C=1,S=0;S<this.g.length;S++){var b=this.i(S);P+=(0<=b?b:4294967296+b)*C,C*=4294967296}return P},r.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(B(this))return"0";if($(this))return"-"+M(this).toString(P);for(var C=v(Math.pow(P,6)),S=this,b="";;){var N=_e(S,C).g;S=Q(S,N.j(C));var O=((0<S.g.length?S.g[0]:S.h)>>>0).toString(P);if(S=N,B(S))return O+b;for(;6>O.length;)O="0"+O;b=O+b}},r.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function B(P){if(P.h!=0)return!1;for(var C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function $(P){return P.h==-1}r.l=function(P){return P=Q(this,P),$(P)?-1:B(P)?0:1};function M(P){for(var C=P.g.length,S=[],b=0;b<C;b++)S[b]=~P.g[b];return new d(S,~P.h).add(x)}r.abs=function(){return $(this)?M(this):this},r.add=function(P){for(var C=Math.max(this.g.length,P.g.length),S=[],b=0,N=0;N<=C;N++){var O=b+(this.i(N)&65535)+(P.i(N)&65535),R=(O>>>16)+(this.i(N)>>>16)+(P.i(N)>>>16);b=R>>>16,O&=65535,R&=65535,S[N]=R<<16|O}return new d(S,S[S.length-1]&-2147483648?-1:0)};function Q(P,C){return P.add(M(C))}r.j=function(P){if(B(this)||B(P))return I;if($(this))return $(P)?M(this).j(M(P)):M(M(this).j(P));if($(P))return M(this.j(M(P)));if(0>this.l(L)&&0>P.l(L))return v(this.m()*P.m());for(var C=this.g.length+P.g.length,S=[],b=0;b<2*C;b++)S[b]=0;for(b=0;b<this.g.length;b++)for(var N=0;N<P.g.length;N++){var O=this.i(b)>>>16,R=this.i(b)&65535,Ze=P.i(N)>>>16,ot=P.i(N)&65535;S[2*b+2*N]+=R*ot,te(S,2*b+2*N),S[2*b+2*N+1]+=O*ot,te(S,2*b+2*N+1),S[2*b+2*N+1]+=R*Ze,te(S,2*b+2*N+1),S[2*b+2*N+2]+=O*Ze,te(S,2*b+2*N+2)}for(b=0;b<C;b++)S[b]=S[2*b+1]<<16|S[2*b];for(b=C;b<2*C;b++)S[b]=0;return new d(S,0)};function te(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function J(P,C){this.g=P,this.h=C}function _e(P,C){if(B(C))throw Error("division by zero");if(B(P))return new J(I,I);if($(P))return C=_e(M(P),C),new J(M(C.g),M(C.h));if($(C))return C=_e(P,M(C)),new J(M(C.g),C.h);if(30<P.g.length){if($(P)||$(C))throw Error("slowDivide_ only works with positive integers.");for(var S=x,b=C;0>=b.l(P);)S=ce(S),b=ce(b);var N=Ie(S,1),O=Ie(b,1);for(b=Ie(b,2),S=Ie(S,2);!B(b);){var R=O.add(b);0>=R.l(P)&&(N=N.add(S),O=R),b=Ie(b,1),S=Ie(S,1)}return C=Q(P,N.j(C)),new J(N,C)}for(N=I;0<=P.l(C);){for(S=Math.max(1,Math.floor(P.m()/C.m())),b=Math.ceil(Math.log(S)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),O=v(S),R=O.j(C);$(R)||0<R.l(P);)S-=b,O=v(S),R=O.j(C);B(O)&&(O=x),N=N.add(O),P=Q(P,R)}return new J(N,P)}r.A=function(P){return _e(this,P).h},r.and=function(P){for(var C=Math.max(this.g.length,P.g.length),S=[],b=0;b<C;b++)S[b]=this.i(b)&P.i(b);return new d(S,this.h&P.h)},r.or=function(P){for(var C=Math.max(this.g.length,P.g.length),S=[],b=0;b<C;b++)S[b]=this.i(b)|P.i(b);return new d(S,this.h|P.h)},r.xor=function(P){for(var C=Math.max(this.g.length,P.g.length),S=[],b=0;b<C;b++)S[b]=this.i(b)^P.i(b);return new d(S,this.h^P.h)};function ce(P){for(var C=P.g.length+1,S=[],b=0;b<C;b++)S[b]=P.i(b)<<1|P.i(b-1)>>>31;return new d(S,P.h)}function Ie(P,C){var S=C>>5;C%=32;for(var b=P.g.length-S,N=[],O=0;O<b;O++)N[O]=0<C?P.i(O+S)>>>C|P.i(O+S+1)<<32-C:P.i(O+S);return new d(N,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,K0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=E,di=d}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q0,al,Y0,fc,ff,J0,X0,Z0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof sc=="object"&&sc];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,p){if(p)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],p=p(T),p!=T&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,T=!1,F={next:function(){if(!T&&_<u.length){var W=_++;return{value:p(W,u[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function m(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,_){return u.call.apply(u.bind,arguments)}function I(u,p,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function x(u,p,_){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,x.apply(null,arguments)}function L(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function B(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,F,W){for(var ae=Array(arguments.length-2),it=2;it<arguments.length;it++)ae[it-2]=arguments[it];return p.prototype[F].apply(T,ae)}}function $(u){const p=u.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=u[T];return _}return[]}function M(u,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(m(T)){const F=u.length||0,W=T.length||0;u.length=F+W;for(let ae=0;ae<W;ae++)u[F+ae]=T[ae]}else u.push(T)}}class Q{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function te(u){return/^[\s\xa0]*$/.test(u)}function J(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function _e(u){return _e[" "](u),u}_e[" "]=function(){};var ce=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function Ie(u,p,_){for(const T in u)p.call(_,u[T],T,u)}function P(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function C(u){const p={};for(const _ in u)p[_]=u[_];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,p){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let W=0;W<S.length;W++)_=S[W],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function N(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function O(u){f.setTimeout(()=>{throw u},0)}function R(){var u=ge;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Ze{constructor(){this.h=this.g=null}add(p,_){const T=ot.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var ot=new Q(()=>new ut,u=>u.reset());class ut{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let le,G=!1,ge=new Ze,oe=()=>{const u=f.Promise.resolve(void 0);le=()=>{u.then(j)}};var j=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){O(_)}var p=ot;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}G=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,p),f.removeEventListener("test",_,p)}catch{}return u}();function ke(u,p){if(ve.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(ce){e:{try{_e(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ne[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ke.aa.h.call(this)}}B(ke,ve);var Ne={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function je(u,p,_,T,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=F,this.key=++Ue,this.da=this.fa=!1}function Qe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function wt(u){this.src=u,this.g={},this.h=0}wt.prototype.add=function(u,p,_,T,F){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ae=re(u,p,T,F);return-1<ae?(p=u[ae],_||(p.fa=!1)):(p=new je(p,this.src,W,!!T,F),p.fa=_,u.push(p)),p};function ue(u,p){var _=p.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,p,void 0),W;(W=0<=F)&&Array.prototype.splice.call(T,F,1),W&&(Qe(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function re(u,p,_,T){for(var F=0;F<u.length;++F){var W=u[F];if(!W.da&&W.listener==p&&W.capture==!!_&&W.ha==T)return F}return-1}var de="closure_lm_"+(1e6*Math.random()|0),Me={};function Kt(u,p,_,T,F){if(Array.isArray(p)){for(var W=0;W<p.length;W++)Kt(u,p[W],_,T,F);return null}return _=pn(_),u&&u[Be]?u.K(p,_,v(T)?!!T.capture:!1,F):Qt(u,p,_,!1,T,F)}function Qt(u,p,_,T,F,W){if(!p)throw Error("Invalid event type");var ae=v(F)?!!F.capture:!!F,it=In(u);if(it||(u[de]=it=new wt(u)),_=it.add(p,_,T,ae,W),_.proxy)return _;if(T=En(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Ce||(F=ae),F===void 0&&(F=!1),u.addEventListener(p.toString(),T,F);else if(u.attachEvent)u.attachEvent(Yt(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function En(){function u(_){return p.call(u.src,u.listener,_)}const p=Mn;return u}function Jn(u,p,_,T,F){if(Array.isArray(p))for(var W=0;W<p.length;W++)Jn(u,p[W],_,T,F);else T=v(T)?!!T.capture:!!T,_=pn(_),u&&u[Be]?(u=u.i,p=String(p).toString(),p in u.g&&(W=u.g[p],_=re(W,_,T,F),-1<_&&(Qe(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[p],u.h--)))):u&&(u=In(u))&&(p=u.g[p.toString()],u=-1,p&&(u=re(p,_,T,F)),(_=-1<u?p[u]:null)&&kt(_))}function kt(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Be])ue(p.i,u);else{var _=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(_,T,u.capture):p.detachEvent?p.detachEvent(Yt(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=In(p))?(ue(_,u),_.h==0&&(_.src=null,p[de]=null)):Qe(u)}}}function Yt(u){return u in Me?Me[u]:Me[u]="on"+u}function Mn(u,p){if(u.da)u=!0;else{p=new ke(p,this);var _=u.listener,T=u.ha||u.src;u.fa&&kt(u),u=_.call(T,p)}return u}function In(u){return u=u[de],u instanceof wt?u:null}var Tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function pn(u){return typeof u=="function"?u:(u[Tn]||(u[Tn]=function(p){return u.handleEvent(p)}),u[Tn])}function nt(){K.call(this),this.i=new wt(this),this.M=this,this.F=null}B(nt,K),nt.prototype[Be]=!0,nt.prototype.removeEventListener=function(u,p,_,T){Jn(this,u,p,_,T)};function ie(u,p){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new ve(p,u);else if(p instanceof ve)p.target=p.target||u;else{var F=p;p=new ve(T,u),b(p,F)}if(F=!0,_)for(var W=_.length-1;0<=W;W--){var ae=p.g=_[W];F=Se(ae,T,!0,p)&&F}if(ae=p.g=u,F=Se(ae,T,!0,p)&&F,F=Se(ae,T,!1,p)&&F,_)for(W=0;W<_.length;W++)ae=p.g=_[W],F=Se(ae,T,!1,p)&&F}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],T=0;T<_.length;T++)Qe(_[T]);delete u.g[p],u.h--}}this.F=null},nt.prototype.K=function(u,p,_,T){return this.i.add(String(u),p,!1,_,T)},nt.prototype.L=function(u,p,_,T){return this.i.add(String(u),p,!0,_,T)};function Se(u,p,_,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,W=0;W<p.length;++W){var ae=p[W];if(ae&&!ae.da&&ae.capture==_){var it=ae.listener,Ft=ae.ha||ae.src;ae.fa&&ue(u.i,ae),F=it.call(Ft,T)!==!1&&F}}return F&&!T.defaultPrevented}function Xn(u,p,_){if(typeof u=="function")_&&(u=x(u,_));else if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function hr(u){u.g=Xn(()=>{u.g=null,u.i&&(u.i=!1,hr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class fr extends K{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:hr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zn(u){K.call(this),this.h=u,this.g={}}B(Zn,K);var Pr=[];function xs(u){Ie(u.g,function(p,_){this.g.hasOwnProperty(_)&&kt(p)},u),u.g={}}Zn.prototype.N=function(){Zn.aa.N.call(this),xs(this)},Zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var br=f.JSON.stringify,Ss=f.JSON.parse,Yr=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function xn(){}xn.prototype.h=null;function kr(u){return u.h||(u.h=u.i())}function Sn(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fn(){ve.call(this,"d")}B(Fn,ve);function Cs(){ve.call(this,"c")}B(Cs,ve);var Un={},xi=null;function Jr(){return xi=xi||new nt}Un.La="serverreachability";function Si(u){ve.call(this,Un.La,u)}B(Si,ve);function pr(u){const p=Jr();ie(p,new Si(p))}Un.STAT_EVENT="statevent";function Rs(u,p){ve.call(this,Un.STAT_EVENT,u),this.stat=p}B(Rs,ve);function Et(u){const p=Jr();ie(p,new Rs(p,u))}Un.Ma="timingevent";function As(u,p){ve.call(this,Un.Ma,u),this.size=p}B(As,ve);function zn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function q(){this.g=!0}q.prototype.xa=function(){this.g=!1};function De(u,p,_,T,F,W){u.info(function(){if(u.g)if(W)for(var ae="",it=W.split("&"),Ft=0;Ft<it.length;Ft++){var Je=it[Ft].split("=");if(1<Je.length){var $t=Je[0];Je=Je[1];var Nt=$t.split("_");ae=2<=Nt.length&&Nt[1]=="type"?ae+($t+"="+Je+"&"):ae+($t+"=redacted&")}}else ae=null;else ae=W;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+p+`
`+_+`
`+ae})}function Re(u,p,_,T,F,W,ae){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+p+`
`+_+`
`+W+" "+ae})}function Le(u,p,_,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+We(u,_)+(T?" "+T:"")})}function we(u,p){u.info(function(){return"TIMEOUT: "+p})}q.prototype.info=function(){};function We(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ae=1;ae<F.length;ae++)F[ae]=""}}}}return br(_)}catch{return p}}var at={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qe;function At(){}B(At,xn),At.prototype.g=function(){return new XMLHttpRequest},At.prototype.i=function(){return{}},qe=new At;function ct(u,p,_,T){this.j=u,this.i=p,this.l=_,this.R=T||1,this.U=new Zn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ps}function Ps(){this.i=null,this.g="",this.h=!1}var pt={},Xr={};function Ci(u,p,_){u.L=1,u.v=Os($n(p)),u.m=_,u.P=!0,bs(u,null)}function bs(u,p){u.F=Date.now(),dt(u),u.A=$n(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),js(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Ps,u.g=iu(u.j,_?p:null,!u.m),0<u.O&&(u.M=new fr(x(u.Y,u,u.g),u.O)),p=u.U,_=u.g,T=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(Pr[0]=F.toString()),F=Pr);for(var W=0;W<F.length;W++){var ae=Kt(_,F[W],T||p.handleEvent,!1,p.h||p);if(!ae)break;p.g[ae.key]=ae}p=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),pr(),De(u.i,u.u,u.A,u.l,u.R,u.m)}ct.prototype.ca=function(u){u=u.target;const p=this.M;p&&Rn(u)==3?p.j():this.Y(u)},ct.prototype.Y=function(u){try{if(u==this.g)e:{const Nt=Rn(this.g);var p=this.g.Ba();const nr=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Ra(this.g)))){this.J||Nt!=4||p==7||(p==8||0>=nr?pr(3):pr(2)),Ri(this);var _=this.g.Z();this.X=_;t:if(ao(this)){var T=Ra(this.g);u="";var F=T.length,W=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){er(this),ks(this);var ae="";break t}this.h.i=new f.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(W&&p==F-1)});T.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,Re(this.i,this.u,this.A,this.l,this.R,Nt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var it,Ft=this.g;if((it=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(it)){var Je=it;break t}}Je=null}if(_=Je)Le(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ia(this,_);else{this.o=!1,this.s=3,Et(12),er(this),ks(this);break e}}if(this.P){_=!0;let Wn;for(;!this.J&&this.C<ae.length;)if(Wn=hd(this,ae),Wn==Xr){Nt==4&&(this.s=4,Et(14),_=!1),Le(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==pt){this.s=4,Et(15),Le(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else Le(this.i,this.l,Wn,null),Ia(this,Wn);if(ao(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||ae.length!=0||this.h.h||(this.s=1,Et(16),_=!1),this.o=this.o&&_,!_)Le(this.i,this.l,ae,"[Invalid Chunked Response]"),er(this),ks(this);else if(0<ae.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Pa($t),$t.M=!0,Et(11))}}else Le(this.i,this.l,ae,null),Ia(this,ae);Nt==4&&er(this),this.o&&!this.J&&(Nt==4?_o(this.j,this):(this.o=!1,dt(this)))}else po(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),er(this),ks(this)}}}catch{}finally{}};function ao(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function hd(u,p){var _=u.C,T=p.indexOf(`
`,_);return T==-1?Xr:(_=Number(p.substring(_,T)),isNaN(_)?pt:(T+=1,T+_>p.length?Xr:(p=p.slice(T,T+_),u.C=T+_,p)))}ct.prototype.cancel=function(){this.J=!0,er(this)};function dt(u){u.S=Date.now()+u.I,$l(u,u.I)}function $l(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=zn(x(u.ba,u),p)}function Ri(u){u.B&&(f.clearTimeout(u.B),u.B=null)}ct.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(we(this.i,this.A),this.L!=2&&(pr(),Et(17)),er(this),this.s=2,ks(this)):$l(this,this.S-u)};function ks(u){u.j.G==0||u.J||_o(u.j,u)}function er(u){Ri(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,xs(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Ia(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||gn(_.h,u))){if(!u.K&&gn(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)vo(_),_r(_);else break e;yo(_),Et(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=zn(x(_.Za,_),6e3));if(1>=Wl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else rs(_,11)}else if((u.K||_.g==u)&&vo(_),!te(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let Je=F[p];if(_.T=Je[0],Je=Je[1],_.G==2)if(Je[0]=="c"){_.K=Je[1],_.ia=Je[2];const $t=Je[3];$t!=null&&(_.la=$t,_.j.info("VER="+_.la));const Nt=Je[4];Nt!=null&&(_.Aa=Nt,_.j.info("SVER="+_.Aa));const nr=Je[5];nr!=null&&typeof nr=="number"&&0<nr&&(T=1.5*nr,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Wn=u.g;if(Wn){const Vi=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vi){var W=T.h;W.g||Vi.indexOf("spdy")==-1&&Vi.indexOf("quic")==-1&&Vi.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ta(W,W.h),W.h=null))}if(T.D){const Eo=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Eo&&(T.ya=Eo,lt(T.I,T.D,Eo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var ae=u;if(T.qa=su(T,T.J?T.ia:null,T.W),ae.K){ql(T.h,ae);var it=ae,Ft=T.L;Ft&&(it.I=Ft),it.B&&(Ri(it),dt(it)),T.g=ae}else Di(T);0<_.i.length&&Or(_)}else Je[0]!="stop"&&Je[0]!="close"||rs(_,7);else _.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?rs(_,7):Xt(_):Je[0]!="noop"&&_.l&&_.l.ta(Je),_.v=0)}}pr(4)}catch{}}var Hl=class{constructor(u,p){this.g=u,this.map=p}};function Ai(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Wl(u){return u.h?1:u.g?u.g.size:0}function gn(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ta(u,p){u.g?u.g.add(p):u.h=p}function ql(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Ai.prototype.cancel=function(){if(this.i=Gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Gl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return $(u.i)}function lo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var p=[],_=u.length,T=0;T<_;T++)p.push(u[T]);return p}p=[],_=0;for(T in u)p[_++]=u[T];return p}function uo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const T in u)p[_++]=T;return p}}}function Ns(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=uo(u),T=lo(u),F=T.length,W=0;W<F;W++)p.call(void 0,T[W],_&&_[W],u)}var Pi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fd(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),F=null;if(0<=T){var W=u[_].substring(0,T);F=u[_].substring(T+1)}else W=u[_];p(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Zr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Zr){this.h=u.h,bi(this,u.j),this.o=u.o,this.g=u.g,Ds(this,u.s),this.l=u.l;var p=u.i,_=new Nr;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Vs(this,_),this.m=u.m}else u&&(p=String(u).match(Pi))?(this.h=!1,bi(this,p[1]||"",!0),this.o=Ye(p[2]||""),this.g=Ye(p[3]||"",!0),Ds(this,p[4]),this.l=Ye(p[5]||"",!0),Vs(this,p[6]||"",!0),this.m=Ye(p[7]||"")):(this.h=!1,this.i=new Nr(null,this.h))}Zr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Ls(p,co,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ls(p,co,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ls(_,_.charAt(0)=="/"?Yl:Ql,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ls(_,xa)),u.join("")};function $n(u){return new Zr(u)}function bi(u,p,_){u.j=_?Ye(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ds(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Vs(u,p,_){p instanceof Nr?(u.i=p,Dr(u.i,u.h)):(_||(p=Ls(p,Jl)),u.i=new Nr(p,u.h))}function lt(u,p,_){u.i.set(p,_)}function Os(u){return lt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ye(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ls(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Kl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Kl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var co=/[#\/\?@]/g,Ql=/[#\?:]/g,Yl=/[#\?]/g,Jl=/[#\?@]/g,xa=/#/g;function Nr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Jt(u){u.g||(u.g=new Map,u.h=0,u.i&&fd(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=Nr.prototype,r.add=function(u,p){Jt(this),this.i=null,u=tr(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function mr(u,p){Jt(u),p=tr(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function gr(u,p){return Jt(u),p=tr(u,p),u.g.has(p)}r.forEach=function(u,p){Jt(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(p,F,T,this)},this)},this)},r.na=function(){Jt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const F=u[T];for(let W=0;W<F.length;W++)_.push(p[T])}return _},r.V=function(u){Jt(this);let p=[];if(typeof u=="string")gr(this,u)&&(p=p.concat(this.g.get(tr(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},r.set=function(u,p){return Jt(this),this.i=null,u=tr(this,u),gr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function js(u,p,_){mr(u,p),0<_.length&&(u.i=null,u.g.set(tr(u,p),$(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const W=encodeURIComponent(String(T)),ae=this.V(T);for(T=0;T<ae.length;T++){var F=W;ae[T]!==""&&(F+="="+encodeURIComponent(String(ae[T]))),u.push(F)}}return this.i=u.join("&")};function tr(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Dr(u,p){p&&!u.j&&(Jt(u),u.i=null,u.g.forEach(function(_,T){var F=T.toLowerCase();T!=F&&(mr(this,T),js(this,F,_))},u)),u.j=p}function pd(u,p){const _=new q;if(f.Image){const T=new Image;T.onload=L(Cn,_,"TestLoadImage: loaded",!0,p,T),T.onerror=L(Cn,_,"TestLoadImage: error",!1,p,T),T.onabort=L(Cn,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=L(Cn,_,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function Xl(u,p){const _=new q,T=new AbortController,F=setTimeout(()=>{T.abort(),Cn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(W=>{clearTimeout(F),W.ok?Cn(_,"TestPingServer: ok",!0,p):Cn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Cn(_,"TestPingServer: error",!1,p)})}function Cn(u,p,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function md(){this.g=new Yr}function Zl(u,p,_){const T=_||"";try{Ns(u,function(F,W){let ae=F;v(F)&&(ae=br(F)),p.push(T+W+"="+encodeURIComponent(ae))})}catch(F){throw p.push(T+"type="+encodeURIComponent("_badmap")),F}}function es(u){this.l=u.Ub||null,this.j=u.eb||!1}B(es,xn),es.prototype.g=function(){return new ki(this.l,this.j)},es.prototype.i=function(u){return function(){return u}}({});function ki(u,p){nt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(ki,nt),r=ki.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,vr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function eu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?yr(this):vr(this),this.readyState==3&&eu(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,yr(this))},r.Qa=function(u){this.g&&(this.response=u,yr(this))},r.ga=function(){this.g&&yr(this)};function yr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,vr(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function vr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ts(u){let p="";return Ie(u,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function Ms(u,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=ts(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):lt(u,p,_))}function vt(u){nt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(vt,nt);var gd=/^https?$/i,Sa=["POST","PUT"];r=vt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qe.g(),this.v=this.o?kr(this.o):kr(qe),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(W){Ni(this,W);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())_.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Sa,p,void 0))||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ae]of _)this.g.setRequestHeader(W,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fo(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Ni(this,W)}};function Ni(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,ho(u),Hn(u)}function ho(u){u.A||(u.A=!0,ie(u,"complete"),ie(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ie(this,"complete"),ie(this,"abort"),Hn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hn(this,!0)),vt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ca(this):this.bb())},r.bb=function(){Ca(this)};function Ca(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Rn(u)!=4||u.Z()!=2)){if(u.u&&Rn(u)==4)Xn(u.Ea,0,u);else if(ie(u,"readystatechange"),Rn(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=ae===0){var F=String(u.D).match(Pi)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),T=!gd.test(F?F.toLowerCase():"")}_=T}if(_)ie(u,"complete"),ie(u,"success");else{u.m=6;try{var W=2<Rn(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",ho(u)}}finally{Hn(u)}}}}function Hn(u,p){if(u.g){fo(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ie(u,"ready");try{_.onreadystatechange=T}catch{}}}function fo(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Rn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ss(p)}};function Ra(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function po(u){const p={};u=(u.g&&2<=Rn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(te(u[T]))continue;var _=N(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=p[F]||[];p[F]=W,W.push(_)}P(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Aa(u){this.Aa=0,this.i=[],this.j=new q,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vr("baseRetryDelayMs",5e3,u),this.cb=Vr("retryDelaySeedMs",1e4,u),this.Wa=Vr("forwardChannelMaxRetries",2,u),this.wa=Vr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ai(u&&u.concurrentRequestLimit),this.Da=new md,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Aa.prototype,r.la=8,r.G=1,r.connect=function(u,p,_,T){Et(0),this.W=u,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=su(this,null,this.W),Or(this)};function Xt(u){if(mo(u),u.G==3){var p=u.U++,_=$n(u.I);if(lt(_,"SID",u.K),lt(_,"RID",p),lt(_,"TYPE","terminate"),ns(u,_),p=new ct(u,u.j,p),p.L=2,p.v=Os($n(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=p.v,_=!0),_||(p.g=iu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),dt(p)}ru(u)}function _r(u){u.g&&(Pa(u),u.g.cancel(),u.g=null)}function mo(u){_r(u),u.u&&(f.clearTimeout(u.u),u.u=null),vo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Or(u){if(!Bn(u.h)&&!u.s){u.s=!0;var p=u.Ga;le||oe(),G||(le(),G=!0),ge.add(p,u),u.B=0}}function yd(u,p){return Wl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=zn(x(u.Ga,u,p),nu(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new ct(this,this.j,u);let W=this.o;if(this.S&&(W?(W=C(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Fs(this,F,p),_=$n(this.I),lt(_,"RID",u),lt(_,"CVER",22),this.D&&lt(_,"X-HTTP-Session-Id",this.D),ns(this,_),W&&(this.O?p="headers="+encodeURIComponent(String(ts(W)))+"&"+p:this.m&&Ms(_,this.m,W)),Ta(this.h,F),this.Ua&&lt(_,"TYPE","init"),this.P?(lt(_,"$req",p),lt(_,"SID","null"),F.T=!0,Ci(F,_,null)):Ci(F,_,p),this.G=2}}else this.G==3&&(u?go(this,u):this.i.length==0||Bn(this.h)||go(this))};function go(u,p){var _;p?_=p.l:_=u.U++;const T=$n(u.I);lt(T,"SID",u.K),lt(T,"RID",_),lt(T,"AID",u.T),ns(u,T),u.m&&u.o&&Ms(T,u.m,u.o),_=new ct(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Fs(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ta(u.h,_),Ci(_,T,p)}function ns(u,p){u.H&&Ie(u.H,function(_,T){lt(p,T,_)}),u.l&&Ns({},function(_,T){lt(p,T,_)})}function Fs(u,p,_){_=Math.min(u.i.length,_);var T=u.l?x(u.l.Na,u.l,u):null;e:{var F=u.i;let W=-1;for(;;){const ae=["count="+_];W==-1?0<_?(W=F[0].g,ae.push("ofs="+W)):W=0:ae.push("ofs="+W);let it=!0;for(let Ft=0;Ft<_;Ft++){let Je=F[Ft].g;const $t=F[Ft].map;if(Je-=W,0>Je)W=Math.max(0,F[Ft].g-100),it=!1;else try{Zl($t,ae,"req"+Je+"_")}catch{T&&T($t)}}if(it){T=ae.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,T}function Di(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;le||oe(),G||(le(),G=!0),ge.add(p,u),u.v=0}}function yo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=zn(x(u.Fa,u),nu(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,tu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=zn(x(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),_r(this),tu(this))};function Pa(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function tu(u){u.g=new ct(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=$n(u.qa);lt(p,"RID","rpc"),lt(p,"SID",u.K),lt(p,"AID",u.T),lt(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&lt(p,"TO",u.ja),lt(p,"TYPE","xmlhttp"),ns(u,p),u.m&&u.o&&Ms(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Os($n(p)),_.m=null,_.P=!0,bs(_,u)}r.Za=function(){this.C!=null&&(this.C=null,_r(this),yo(this),Et(19))};function vo(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function _o(u,p){var _=null;if(u.g==p){vo(u),Pa(u),u.g=null;var T=2}else if(gn(u.h,p))_=p.D,ql(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;T=Jr(),ie(T,new As(T,_)),Or(u)}else Di(u);else if(F=p.s,F==3||F==0&&0<p.X||!(T==1&&yd(u,p)||T==2&&yo(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),F){case 1:rs(u,5);break;case 4:rs(u,10);break;case 3:rs(u,6);break;default:rs(u,2)}}}function nu(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function rs(u,p){if(u.j.info("Error code "+p),p==2){var _=x(u.fb,u),T=u.Xa;const F=!T;T=new Zr(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||bi(T,"https"),Os(T),F?pd(T.toString(),_):Xl(T.toString(),_)}else Et(2);u.G=0,u.l&&u.l.sa(p),ru(u),mo(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function ru(u){if(u.G=0,u.ka=[],u.l){const p=Gl(u.h);(p.length!=0||u.i.length!=0)&&(M(u.ka,p),M(u.ka,u.i),u.h.i.length=0,$(u.i),u.i.length=0),u.l.ra()}}function su(u,p,_){var T=_ instanceof Zr?$n(_):new Zr(_);if(T.g!="")p&&(T.g=p+"."+T.g),Ds(T,T.s);else{var F=f.location;T=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var W=new Zr(null);T&&bi(W,T),p&&(W.g=p),F&&Ds(W,F),_&&(W.l=_),T=W}return _=u.D,p=u.ya,_&&p&&lt(T,_,p),lt(T,"VER",u.la),ns(u,T),T}function iu(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new vt(new es({eb:_})):new vt(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ba(){}r=ba.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function wo(){}wo.prototype.g=function(u,p){return new yn(u,p)};function yn(u,p){nt.call(this),this.g=new Aa(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!te(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!te(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Lr(this)}B(yn,nt),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Xt(this.g)},yn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=br(u),u=_);p.i.push(new Hl(p.Ya++,u)),p.G==3&&Or(p)},yn.prototype.N=function(){this.g.l=null,delete this.j,Xt(this.g),delete this.g,yn.aa.N.call(this)};function ou(u){Fn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}B(ou,Fn);function au(){Cs.call(this),this.status=1}B(au,Cs);function Lr(u){this.g=u}B(Lr,ba),Lr.prototype.ua=function(){ie(this.g,"a")},Lr.prototype.ta=function(u){ie(this.g,new ou(u))},Lr.prototype.sa=function(u){ie(this.g,new au)},Lr.prototype.ra=function(){ie(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,Z0=function(){return new wo},X0=function(){return Jr()},J0=Un,ff={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,fc=at,rt.COMPLETE="complete",Y0=rt,Sn.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",nt.prototype.listen=nt.prototype.K,al=Sn,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,Q0=vt}).apply(typeof sc<"u"?sc:typeof self<"u"?self:typeof window<"u"?window:{});const Dy="@firebase/firestore",Vy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new Of("@firebase/firestore");function $o(){return Zi.logLevel}function me(r,...e){if(Zi.logLevel<=Ge.DEBUG){const t=e.map(Jf);Zi.debug(`Firestore (${ya}): ${r}`,...t)}}function ws(r,...e){if(Zi.logLevel<=Ge.ERROR){const t=e.map(Jf);Zi.error(`Firestore (${ya}): ${r}`,...t)}}function mi(r,...e){if(Zi.logLevel<=Ge.WARN){const t=e.map(Jf);Zi.warn(`Firestore (${ya}): ${r}`,...t)}}function Jf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,e_(r,s,t)}function e_(r,e,t){let s=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ws(s),new Error(s)}function st(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||e_(e,o,s)}function ze(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Is{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}}class mC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gC{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new hi,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},f=m=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new hi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(st(typeof s.accessToken=="string",31837,{l:s}),new t_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class yC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new yC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _C{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){st(this.o===void 0,3512);const s=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(st(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Oy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=wC(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function $e(r,e){return r<e?-1:r>e?1:0}function pf(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return $e(s,o);{const l=n_(),d=EC(l.encode(Ly(r,t)),l.encode(Ly(e,t)));return d!==0?d:$e(s,o)}}t+=s>65535?2:1}return $e(r.length,e.length)}function Ly(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function EC(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return $e(r[t],e[t]);return $e(r.length,e.length)}function ra(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="__name__";class Br{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ve(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ve(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Br.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return $e(e.length,t.length)}static compareSegments(e,t){const s=Br.isNumericId(e),o=Br.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Br.extractNumericId(e).compare(Br.extractNumericId(t)):pf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return di.fromString(e.substring(4,e.length-2))}}class ft extends Br{construct(e,t,s){return new ft(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new ft(t)}static emptyPath(){return new ft([])}}const IC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Br{construct(e,t,s){return new nn(e,t,s)}static isValidIdentifier(e){return IC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jy}static keyField(){return new nn([jy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new pe(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new pe(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new pe(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else f==="`"?(d=!d,o++):f!=="."||d?(s+=f,o++):(l(),o++)}if(l(),d)throw new pe(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(t)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(ft.fromString(e))}static fromName(e){return new Ae(ft.fromString(e).popFirst(5))}static empty(){return new Ae(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(r,e,t){if(!t)throw new pe(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function TC(r,e,t,s){if(e===!0&&s===!0)throw new pe(Y.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function My(r){if(!Ae.isDocumentKey(r))throw new pe(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Fy(r){if(Ae.isDocumentKey(r))throw new pe(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function s_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Kc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ve(12329,{type:typeof r})}function $r(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new pe(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kc(r);throw new pe(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ol(r,e){if(!s_(r))throw new pe(Y.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(o&&typeof d!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new pe(Y.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=-62135596800,zy=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*zy);return new yt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Uy)throw new pe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zy}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ol(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Uy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:jt("string",yt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new yt(0,0))}static max(){return new Fe(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;function xC(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Fe.fromTimestamp(s===1e9?new yt(t+1,0):new yt(t,s));return new gi(o,Ae.empty(),e)}function SC(r){return new gi(r.readTime,r.key,Cl)}class gi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new gi(Fe.min(),Ae.empty(),Cl)}static max(){return new gi(Fe.max(),Ae.empty(),Cl)}}function CC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(r.documentKey,e.documentKey),t!==0?t:$e(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==RC)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,s)=>{t(e)})}static reject(e){return new X((t,s)=>{s(e)})}static waitFor(e){return new X((t,s)=>{let o=0,l=0,d=!1;e.forEach(f=>{++o,f.next(()=>{++l,d&&l===o&&t()},m=>s(m))}),d=!0,l===o&&t()})}static or(e){let t=X.resolve(!1);for(const s of e)t=t.next(o=>o?X.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new X((s,o)=>{const l=e.length,d=new Array(l);let f=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next(E=>{d[v]=E,++f,f===l&&s(d)},E=>o(E))}})}static doWhile(e,t){return new X((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function PC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function _a(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Qc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=-1;function Yc(r){return r==null}function bc(r){return r===0&&1/r==-1/0}function bC(r){return typeof r=="number"&&Number.isInteger(r)&&!bc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="";function kC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=By(e)),e=NC(r.get(t),e);return By(e)}function NC(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case i_:t+="";break;default:t+=l}}return t}function By(r){return r+i_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ii(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function o_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new St(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ic(this.root,e,this.comparator,!0)}}class ic{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??tn.RED,this.left=o??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new tn(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hy(this.data.getIterator())}getIteratorFrom(e){return new Hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class Hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new Bt(nn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ra(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new a_("Invalid base64 string: "+l):l}}(e);return new rn(t)}static fromUint8Array(e){const t=function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l}(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const DC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(r){if(st(!!r,39018),typeof r=="string"){let e=0;const t=DC.exec(r);if(st(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:bt(r.seconds),nanos:bt(r.nanos)}}function bt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function vi(r){return typeof r=="string"?rn.fromBase64String(r):rn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="server_timestamp",u_="__type__",c_="__previous_value__",d_="__local_write_time__";function ep(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[u_])===null||t===void 0?void 0:t.stringValue)===l_}function Jc(r){const e=r.mapValue.fields[c_];return ep(e)?Jc(e):e}function Rl(r){const e=yi(r.mapValue.fields[d_].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t,s,o,l,d,f,m,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=E}}const kc="(default)";class Al{constructor(e,t){this.projectId=e,this.database=t||kc}static empty(){return new Al("","")}get isDefaultDatabase(){return this.database===kc}isEqual(e){return e instanceof Al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="__type__",OC="__max__",oc={mapValue:{}},f_="__vector__",Nc="value";function _i(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ep(r)?4:jC(r)?9007199254740991:LC(r)?10:11:Ve(28295,{value:r})}function Qr(r,e){if(r===e)return!0;const t=_i(r);if(t!==_i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Rl(r).isEqual(Rl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=yi(o.timestampValue),f=yi(l.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return vi(o.bytesValue).isEqual(vi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return bt(o.geoPointValue.latitude)===bt(l.geoPointValue.latitude)&&bt(o.geoPointValue.longitude)===bt(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return bt(o.integerValue)===bt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=bt(o.doubleValue),f=bt(l.doubleValue);return d===f?bc(d)===bc(f):isNaN(d)&&isNaN(f)}return!1}(r,e);case 9:return ra(r.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return function(o,l){const d=o.mapValue.fields||{},f=l.mapValue.fields||{};if($y(d)!==$y(f))return!1;for(const m in d)if(d.hasOwnProperty(m)&&(f[m]===void 0||!Qr(d[m],f[m])))return!1;return!0}(r,e);default:return Ve(52216,{left:r})}}function Pl(r,e){return(r.values||[]).find(t=>Qr(t,e))!==void 0}function sa(r,e){if(r===e)return 0;const t=_i(r),s=_i(e);if(t!==s)return $e(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(r.booleanValue,e.booleanValue);case 2:return function(l,d){const f=bt(l.integerValue||l.doubleValue),m=bt(d.integerValue||d.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(r,e);case 3:return Wy(r.timestampValue,e.timestampValue);case 4:return Wy(Rl(r),Rl(e));case 5:return pf(r.stringValue,e.stringValue);case 6:return function(l,d){const f=vi(l),m=vi(d);return f.compareTo(m)}(r.bytesValue,e.bytesValue);case 7:return function(l,d){const f=l.split("/"),m=d.split("/");for(let v=0;v<f.length&&v<m.length;v++){const E=$e(f[v],m[v]);if(E!==0)return E}return $e(f.length,m.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,d){const f=$e(bt(l.latitude),bt(d.latitude));return f!==0?f:$e(bt(l.longitude),bt(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return qy(r.arrayValue,e.arrayValue);case 10:return function(l,d){var f,m,v,E;const I=l.fields||{},x=d.fields||{},L=(f=I[Nc])===null||f===void 0?void 0:f.arrayValue,B=(m=x[Nc])===null||m===void 0?void 0:m.arrayValue,$=$e(((v=L==null?void 0:L.values)===null||v===void 0?void 0:v.length)||0,((E=B==null?void 0:B.values)===null||E===void 0?void 0:E.length)||0);return $!==0?$:qy(L,B)}(r.mapValue,e.mapValue);case 11:return function(l,d){if(l===oc.mapValue&&d===oc.mapValue)return 0;if(l===oc.mapValue)return 1;if(d===oc.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),v=d.fields||{},E=Object.keys(v);m.sort(),E.sort();for(let I=0;I<m.length&&I<E.length;++I){const x=pf(m[I],E[I]);if(x!==0)return x;const L=sa(f[m[I]],v[E[I]]);if(L!==0)return L}return $e(m.length,E.length)}(r.mapValue,e.mapValue);default:throw Ve(23264,{le:t})}}function Wy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return $e(r,e);const t=yi(r),s=yi(e),o=$e(t.seconds,s.seconds);return o!==0?o:$e(t.nanos,s.nanos)}function qy(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=sa(t[o],s[o]);if(l)return l}return $e(t.length,s.length)}function ia(r){return mf(r)}function mf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=yi(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return vi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Ae.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=mf(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of s)l?l=!1:o+=",",o+=`${d}:${mf(t.fields[d])}`;return o+"}"}(r.mapValue):Ve(61005,{value:r})}function pc(r){switch(_i(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jc(r);return e?16+pc(e):16;case 5:return 2*r.stringValue.length;case 6:return vi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+pc(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Ii(s.fields,(l,d)=>{o+=l.length+pc(d)}),o}(r.mapValue);default:throw Ve(13486,{value:r})}}function Gy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function gf(r){return!!r&&"integerValue"in r}function tp(r){return!!r&&"arrayValue"in r}function Ky(r){return!!r&&"nullValue"in r}function Qy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function mc(r){return!!r&&"mapValue"in r}function LC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[h_])===null||t===void 0?void 0:t.stringValue)===f_}function yl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ii(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=yl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function jC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===OC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!mc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yl(t)}setAll(e){let t=nn.emptyPath(),s={},o=[];e.forEach((d,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,o),s={},o=[],t=f.popLast()}d?s[f.lastSegment()]=yl(d):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];mc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ii(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new On(yl(this.value))}}function p_(r){const e=[];return Ii(r.fields,(t,s)=>{const o=new nn([t]);if(mc(s)){const l=p_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,s,o,l,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=d,this.documentState=f}static newInvalidDocument(e){return new dn(e,0,Fe.min(),Fe.min(),Fe.min(),On.empty(),0)}static newFoundDocument(e,t,s,o){return new dn(e,1,t,Fe.min(),s,o,0)}static newNoDocument(e,t){return new dn(e,2,t,Fe.min(),Fe.min(),On.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Fe.min(),Fe.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t){this.position=e,this.inclusive=t}}function Yy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?s=Ae.comparator(Ae.fromName(d.referenceValue),t.key):s=sa(d,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Jy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Qr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function MC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{}class Lt extends m_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new UC(e,t,s):t==="array-contains"?new $C(e,s):t==="in"?new HC(e,s):t==="not-in"?new WC(e,s):t==="array-contains-any"?new qC(e,s):new Lt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new zC(e,s):new BC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(sa(t,this.value)):t!==null&&_i(this.value)===_i(t)&&this.matchesComparison(sa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends m_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ar(e,t)}matches(e){return g_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function g_(r){return r.op==="and"}function y_(r){return FC(r)&&g_(r)}function FC(r){for(const e of r.filters)if(e instanceof Ar)return!1;return!0}function yf(r){if(r instanceof Lt)return r.field.canonicalString()+r.op.toString()+ia(r.value);if(y_(r))return r.filters.map(e=>yf(e)).join(",");{const e=r.filters.map(t=>yf(t)).join(",");return`${r.op}(${e})`}}function v_(r,e){return r instanceof Lt?function(s,o){return o instanceof Lt&&s.op===o.op&&s.field.isEqual(o.field)&&Qr(s.value,o.value)}(r,e):r instanceof Ar?function(s,o){return o instanceof Ar&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,d,f)=>l&&v_(d,o.filters[f]),!0):!1}(r,e):void Ve(19439)}function __(r){return r instanceof Lt?function(t){return`${t.field.canonicalString()} ${t.op} ${ia(t.value)}`}(r):r instanceof Ar?function(t){return t.op.toString()+" {"+t.getFilters().map(__).join(" ,")+"}"}(r):"Filter"}class UC extends Lt{constructor(e,t,s){super(e,t,s),this.key=Ae.fromName(s.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class zC extends Lt{constructor(e,t){super(e,"in",t),this.keys=w_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class BC extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=w_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function w_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Ae.fromName(s.referenceValue))}class $C extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tp(t)&&Pl(t.arrayValue,this.value)}}class HC extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Pl(this.value.arrayValue,t)}}class WC extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Pl(this.value.arrayValue,t)}}class qC extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Pl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t=null,s=[],o=[],l=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=d,this.endAt=f,this.Pe=null}}function Xy(r,e=null,t=[],s=[],o=null,l=null,d=null){return new GC(r,e,t,s,o,l,d)}function np(r){const e=ze(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>yf(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),Yc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>ia(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>ia(s)).join(",")),e.Pe=t}return e.Pe}function rp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!MC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!v_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Jy(r.startAt,e.startAt)&&Jy(r.endAt,e.endAt)}function vf(r){return Ae.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,t=null,s=[],o=[],l=null,d="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function KC(r,e,t,s,o,l,d,f){return new Ll(r,e,t,s,o,l,d,f)}function Xc(r){return new Ll(r)}function Zy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function E_(r){return r.collectionGroup!==null}function vl(r){const e=ze(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Bt(nn.comparator);return d.filters.forEach(m=>{m.getFlattenedFilters().forEach(v=>{v.isInequality()&&(f=f.add(v.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Vc(l,s))}),t.has(nn.keyField().canonicalString())||e.Te.push(new Vc(nn.keyField(),s))}return e.Te}function Hr(r){const e=ze(r);return e.Ie||(e.Ie=QC(e,vl(r))),e.Ie}function QC(r,e){if(r.limitType==="F")return Xy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Vc(o.field,l)});const t=r.endAt?new Dc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Dc(r.startAt.position,r.startAt.inclusive):null;return Xy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function _f(r,e){const t=r.filters.concat([e]);return new Ll(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function wf(r,e,t){return new Ll(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Zc(r,e){return rp(Hr(r),Hr(e))&&r.limitType===e.limitType}function I_(r){return`${np(Hr(r))}|lt:${r.limitType}`}function Ho(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>__(o)).join(", ")}]`),Yc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>ia(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>ia(o)).join(",")),`Target(${s})`}(Hr(r))}; limitType=${r.limitType})`}function ed(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ae.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of vl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(d,f,m){const v=Yy(d,f,m);return d.inclusive?v<=0:v<0}(s.startAt,vl(s),o)||s.endAt&&!function(d,f,m){const v=Yy(d,f,m);return d.inclusive?v>=0:v>0}(s.endAt,vl(s),o))}(r,e)}function YC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function T_(r){return(e,t)=>{let s=!1;for(const o of vl(r)){const l=JC(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function JC(r,e,t){const s=r.field.isKeyField()?Ae.comparator(e.key,t.key):function(l,d,f){const m=d.data.field(l),v=f.data.field(l);return m!==null&&v!==null?sa(m,v):Ve(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ve(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return o_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new St(Ae.comparator);function Es(){return XC}const x_=new St(Ae.comparator);function ll(...r){let e=x_;for(const t of r)e=e.insert(t.key,t);return e}function S_(r){let e=x_;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Yi(){return _l()}function C_(){return _l()}function _l(){return new so(r=>r.toString(),(r,e)=>r.isEqual(e))}const ZC=new St(Ae.comparator),eR=new Bt(Ae.comparator);function Ke(...r){let e=eR;for(const t of r)e=e.add(t);return e}const tR=new Bt($e);function nR(){return tR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bc(e)?"-0":e}}function R_(r){return{integerValue:""+r}}function rR(r,e){return bC(e)?R_(e):sp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this._=void 0}}function sR(r,e,t){return r instanceof Oc?function(o,l){const d={fields:{[u_]:{stringValue:l_},[d_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&ep(l)&&(l=Jc(l)),l&&(d.fields[c_]=l),{mapValue:d}}(t,e):r instanceof oa?P_(r,e):r instanceof aa?b_(r,e):function(o,l){const d=A_(o,l),f=ev(d)+ev(o.Ee);return gf(d)&&gf(o.Ee)?R_(f):sp(o.serializer,f)}(r,e)}function iR(r,e,t){return r instanceof oa?P_(r,e):r instanceof aa?b_(r,e):t}function A_(r,e){return r instanceof Lc?function(s){return gf(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Oc extends td{}class oa extends td{constructor(e){super(),this.elements=e}}function P_(r,e){const t=k_(e);for(const s of r.elements)t.some(o=>Qr(o,s))||t.push(s);return{arrayValue:{values:t}}}class aa extends td{constructor(e){super(),this.elements=e}}function b_(r,e){let t=k_(e);for(const s of r.elements)t=t.filter(o=>!Qr(o,s));return{arrayValue:{values:t}}}class Lc extends td{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function ev(r){return bt(r.integerValue||r.doubleValue)}function k_(r){return tp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,t){this.field=e,this.transform=t}}function oR(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof oa&&o instanceof oa||s instanceof aa&&o instanceof aa?ra(s.elements,o.elements,Qr):s instanceof Lc&&o instanceof Lc?Qr(s.Ee,o.Ee):s instanceof Oc&&o instanceof Oc}(r.transform,e.transform)}class aR{constructor(e,t){this.version=e,this.transformResults=t}}class Wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wr}static exists(e){return new Wr(void 0,e)}static updateTime(e){return new Wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class nd{}function D_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new O_(r.key,Wr.none()):new jl(r.key,r.data,Wr.none());{const t=r.data,s=On.empty();let o=new Bt(nn.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?s.delete(l):s.set(l,d),o=o.add(l)}return new Ti(r.key,s,new Yn(o.toArray()),Wr.none())}}function lR(r,e,t){r instanceof jl?function(o,l,d){const f=o.value.clone(),m=nv(o.fieldTransforms,l,d.transformResults);f.setAll(m),l.convertToFoundDocument(d.version,f).setHasCommittedMutations()}(r,e,t):r instanceof Ti?function(o,l,d){if(!gc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const f=nv(o.fieldTransforms,l,d.transformResults),m=l.data;m.setAll(V_(o)),m.setAll(f),l.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,t):function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function wl(r,e,t,s){return r instanceof jl?function(l,d,f,m){if(!gc(l.precondition,d))return f;const v=l.value.clone(),E=rv(l.fieldTransforms,m,d);return v.setAll(E),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ti?function(l,d,f,m){if(!gc(l.precondition,d))return f;const v=rv(l.fieldTransforms,m,d),E=d.data;return E.setAll(V_(l)),E.setAll(v),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(I=>I.field))}(r,e,t,s):function(l,d,f){return gc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f}(r,e,t)}function uR(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=A_(s.transform,o||null);l!=null&&(t===null&&(t=On.empty()),t.set(s.field,l))}return t||null}function tv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ra(s,o,(l,d)=>oR(l,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class jl extends nd{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ti extends nd{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function V_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function nv(r,e,t){const s=new Map;st(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,f=e.data.field(l.field);s.set(l.field,iR(d,f,t[o]))}return s}function rv(r,e,t){const s=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);s.set(o.field,sR(l,d,e))}return s}class O_ extends nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cR extends nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&lR(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=wl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=wl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=C_();return this.mutations.forEach(o=>{const l=e.get(o.key),d=l.overlayedDocument;let f=this.applyToLocalView(d,l.mutatedFields);f=t.has(o.key)?null:f;const m=D_(d,f);m!==null&&s.set(o.key,m),d.isValidDocument()||d.convertToNoDocument(Fe.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ke())}isEqual(e){return this.batchId===e.batchId&&ra(this.mutations,e.mutations,(t,s)=>tv(t,s))&&ra(this.baseMutations,e.baseMutations,(t,s)=>tv(t,s))}}class ip{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){st(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=function(){return ZC}();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,s[d].version);return new ip(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Xe;function pR(r){switch(r){case Y.OK:return Ve(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Ve(15467,{code:r})}}function L_(r){if(r===void 0)return ws("GRPC error has no .code"),Y.UNKNOWN;switch(r){case Vt.OK:return Y.OK;case Vt.CANCELLED:return Y.CANCELLED;case Vt.UNKNOWN:return Y.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return Y.INTERNAL;case Vt.UNAVAILABLE:return Y.UNAVAILABLE;case Vt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Vt.NOT_FOUND:return Y.NOT_FOUND;case Vt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Vt.ABORTED:return Y.ABORTED;case Vt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Vt.DATA_LOSS:return Y.DATA_LOSS;default:return Ve(39323,{code:r})}}(Xe=Vt||(Vt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new di([4294967295,4294967295],0);function sv(r){const e=n_().encode(r),t=new K0;return t.update(e),new Uint8Array(t.digest())}function iv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new di([t,s],0),new di([o,l],0)]}class op{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ul(`Invalid padding: ${t}`);if(s<0)throw new ul(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ul(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ul(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=di.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(di.fromNumber(s)));return o.compare(mR)===1&&(o=new di([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=sv(e),[s,o]=iv(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(s,o,l);if(!this.ye(d))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new op(l,o,t);return s.forEach(f=>d.insert(f)),d}insert(e){if(this.fe===0)return;const t=sv(e),[s,o]=iv(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(s,o,l);this.we(d)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new rd(Fe.min(),o,new St($e),Es(),Ke())}}class Ml{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ml(s,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class j_{constructor(e,t){this.targetId=e,this.De=t}}class M_{constructor(e,t,s=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class ov{constructor(){this.ve=0,this.Ce=av(),this.Fe=rn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ke(),t=Ke(),s=Ke();return this.Ce.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ve(38017,{changeType:l})}}),new Ml(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=av()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class gR{constructor(e){this.We=e,this.Ge=new Map,this.ze=Es(),this.je=ac(),this.Je=ac(),this.He=new St($e)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Ve(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((s,o)=>{this.nt(o)&&t(o)})}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const l=o.target;if(vf(l))if(s===0){const d=new Ae(l.path);this.Xe(t,d,dn.newNoDocument(d,Fe.min()))}else st(s===1,20013,{expectedCount:s});else{const d=this.ot(t);if(d!==s){const f=this._t(e),m=f?this.ut(f,e,d):1;if(m!==0){this.rt(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let d,f;try{d=vi(s).toUint8Array()}catch(m){if(m instanceof a_)return mi("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new op(d,o,l)}catch(m){return mi(m instanceof ul?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.fe===0?null:f}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const d=this.We.lt(),f=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)}),o}Pt(e){const t=new Map;this.Ge.forEach((l,d)=>{const f=this.st(d);if(f){if(l.current&&vf(f.target)){const m=new Ae(f.target.path);this.Tt(m).has(d)||this.It(d,m)||this.Xe(d,m,dn.newNoDocument(m,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}});let s=Ke();this.Je.forEach((l,d)=>{let f=!0;d.forEachWhile(m=>{const v=this.st(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.ze.forEach((l,d)=>d.setReadTime(e));const o=new rd(e,t,this.He,this.ze,s);return this.ze=Es(),this.je=ac(),this.Je=ac(),this.He=new St($e),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new ov,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Bt($e),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Bt($e),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ov),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ac(){return new St(Ae.comparator)}function av(){return new St(Ae.comparator)}const yR={asc:"ASCENDING",desc:"DESCENDING"},vR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_R={and:"AND",or:"OR"};class wR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ef(r,e){return r.useProto3Json||Yc(e)?e:{value:e}}function jc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function ER(r,e){return jc(r,e.toTimestamp())}function qr(r){return st(!!r,49232),Fe.fromTimestamp(function(t){const s=yi(t);return new yt(s.seconds,s.nanos)}(r))}function ap(r,e){return If(r,e).canonicalString()}function If(r,e){const t=function(o){return new ft(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function U_(r){const e=ft.fromString(r);return st(W_(e),10190,{key:e.toString()}),e}function Tf(r,e){return ap(r.databaseId,e.path)}function Xh(r,e){const t=U_(e);if(t.get(1)!==r.databaseId.projectId)throw new pe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new pe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ae(B_(t))}function z_(r,e){return ap(r.databaseId,e)}function IR(r){const e=U_(r);return e.length===4?ft.emptyPath():B_(e)}function xf(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function B_(r){return st(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function lv(r,e,t){return{name:Tf(r,e),fields:t.value.mapValue.fields}}function TR(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ve(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,E){return v.useProto3Json?(st(E===void 0||typeof E=="string",58123),rn.fromBase64String(E||"")):(st(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),rn.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&function(v){const E=v.code===void 0?Y.UNKNOWN:L_(v.code);return new pe(E,v.message||"")}(d);t=new M_(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Xh(r,s.document.name),l=qr(s.document.updateTime),d=s.document.createTime?qr(s.document.createTime):Fe.min(),f=new On({mapValue:{fields:s.document.fields}}),m=dn.newFoundDocument(o,l,d,f),v=s.targetIds||[],E=s.removedTargetIds||[];t=new yc(v,E,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Xh(r,s.document),l=s.readTime?qr(s.readTime):Fe.min(),d=dn.newNoDocument(o,l),f=s.removedTargetIds||[];t=new yc([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Xh(r,s.document),l=s.removedTargetIds||[];t=new yc([],l,o,null)}else{if(!("filter"in e))return Ve(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,d=new fR(o,l),f=s.targetId;t=new j_(f,d)}}return t}function xR(r,e){let t;if(e instanceof jl)t={update:lv(r,e.key,e.value)};else if(e instanceof O_)t={delete:Tf(r,e.key)};else if(e instanceof Ti)t={update:lv(r,e.key,e.data),updateMask:DR(e.fieldMask)};else{if(!(e instanceof cR))return Ve(16599,{Rt:e.type});t={verify:Tf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,d){const f=d.transform;if(f instanceof Oc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof oa)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof aa)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Lc)return{fieldPath:d.field.canonicalString(),increment:f.Ee};throw Ve(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:ER(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ve(27497)}(r,e.precondition)),t}function SR(r,e){return r&&r.length>0?(st(e!==void 0,14353),r.map(t=>function(o,l){let d=o.updateTime?qr(o.updateTime):qr(l);return d.isEqual(Fe.min())&&(d=qr(l)),new aR(d,o.transformResults||[])}(t,e))):[]}function CR(r,e){return{documents:[z_(r,e.path)]}}function RR(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=z_(r,o);const l=function(v){if(v.length!==0)return H_(Ar.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const d=function(v){if(v.length!==0)return v.map(E=>function(x){return{field:Wo(x.field),direction:bR(x.dir)}}(E))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Ef(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{Vt:t,parent:o}}function AR(r){let e=IR(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){st(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(I){const x=$_(I);return x instanceof Ar&&y_(x)?x.getFilters():[x]}(t.where));let d=[];t.orderBy&&(d=function(I){return I.map(x=>function(B){return new Vc(qo(B.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction))}(x))}(t.orderBy));let f=null;t.limit&&(f=function(I){let x;return x=typeof I=="object"?I.value:I,Yc(x)?null:x}(t.limit));let m=null;t.startAt&&(m=function(I){const x=!!I.before,L=I.values||[];return new Dc(L,x)}(t.startAt));let v=null;return t.endAt&&(v=function(I){const x=!I.before,L=I.values||[];return new Dc(L,x)}(t.endAt)),KC(e,o,d,l,f,"F",m,v)}function PR(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=qo(t.unaryFilter.field);return Lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=qo(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qo(t.unaryFilter.field);return Lt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=qo(t.unaryFilter.field);return Lt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}}(r):r.fieldFilter!==void 0?function(t){return Lt.create(qo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Ar.create(t.compositeFilter.filters.map(s=>$_(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}}(t.compositeFilter.op))}(r):Ve(30097,{filter:r})}function bR(r){return yR[r]}function kR(r){return vR[r]}function NR(r){return _R[r]}function Wo(r){return{fieldPath:r.canonicalString()}}function qo(r){return nn.fromServerFormat(r.fieldPath)}function H_(r){return r instanceof Lt?function(t){if(t.op==="=="){if(Qy(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NAN"}};if(Ky(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Qy(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NOT_NAN"}};if(Ky(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wo(t.field),op:kR(t.op),value:t.value}}}(r):r instanceof Ar?function(t){const s=t.getFilters().map(o=>H_(o));return s.length===1?s[0]:{compositeFilter:{op:NR(t.op),filters:s}}}(r):Ve(54877,{filter:r})}function DR(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function W_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,t,s,o,l=Fe.min(),d=Fe.min(),f=rn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.gt=e}}function OR(r){const e=AR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?wf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.Dn=new jR}addToCollectionParentIndex(e,t){return this.Dn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(gi.min())}updateCollectionGroup(e,t,s){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class jR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Bt(ft.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Bt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q_=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(q_,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new la(0)}static ur(){return new la(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="LruGarbageCollector",MR=1048576;function dv([r,e],[t,s]){const o=$e(r,t);return o===0?$e(e,s):o}class FR{constructor(e){this.Tr=e,this.buffer=new Bt(dv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();dv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){me(cv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){_a(t)?me(cv,"Ignoring IndexedDB error during garbage collection: ",t):await va(t)}await this.Rr(3e5)})}}class zR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Qc.ue);const s=new FR(t);return this.Vr.forEachTarget(e,o=>s.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>s.Er(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(uv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uv):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,l,d,f,m,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,d=Date.now(),this.nthSequenceNumber(e,o))).next(I=>(s=I,f=Date.now(),this.removeTargets(e,s,t))).next(I=>(l=I,m=Date.now(),this.removeOrphanedDocuments(e,s))).next(I=>(v=Date.now(),$o()<=Ge.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(f-d)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${I} documents in `+(v-m)+`ms
Total Duration: ${v-E}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I})))}}function BR(r,e){return new zR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.changes=new so(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?X.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&wl(s.mutation,o,Yn.empty(),yt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ke()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ke()){const o=Yi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let d=ll();return l.forEach((f,m)=>{d=d.insert(f,m.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const s=Yi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ke()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((d,f)=>{t.set(d,f)})})}computeViews(e,t,s,o){let l=Es();const d=_l(),f=function(){return _l()}();return t.forEach((m,v)=>{const E=s.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Ti)?l=l.insert(v.key,v):E!==void 0?(d.set(v.key,E.mutation.getFieldMask()),wl(E.mutation,v,E.mutation.getFieldMask(),yt.now())):d.set(v.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((v,E)=>d.set(v,E)),t.forEach((v,E)=>{var I;return f.set(v,new HR(E,(I=d.get(v))!==null&&I!==void 0?I:null))}),f))}recalculateAndSaveOverlays(e,t){const s=_l();let o=new St((d,f)=>d-f),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const f of d)f.keys().forEach(m=>{const v=t.get(m);if(v===null)return;let E=s.get(m)||Yn.empty();E=f.applyToLocalView(v,E),s.set(m,E);const I=(o.get(f.batchId)||Ke()).add(m);o=o.insert(f.batchId,I)})}).next(()=>{const d=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,E=m.value,I=C_();E.forEach(x=>{if(!l.has(x)){const L=D_(t.get(x),s.get(x));L!==null&&I.set(x,L),l=l.add(x)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,I))}return X.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(d){return Ae.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):E_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):X.resolve(Yi());let f=Cl,m=l;return d.next(v=>X.forEach(v,(E,I)=>(f<I.largestBatchId&&(f=I.largestBatchId),l.get(E)?X.resolve():this.remoteDocumentCache.getEntry(e,E).next(x=>{m=m.insert(E,x)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,m,v,Ke())).next(E=>({batchId:f,changes:S_(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next(s=>{let o=ll();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let d=ll();return this.indexManager.getCollectionParents(e,l).next(f=>X.forEach(f,m=>{const v=function(I,x){return new Ll(x,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next(E=>{E.forEach((I,x)=>{d=d.insert(I,x)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(d=>{l.forEach((m,v)=>{const E=v.getKey();d.get(E)===null&&(d=d.insert(E,dn.newInvalidDocument(E)))});let f=ll();return d.forEach((m,v)=>{const E=l.get(m);E!==void 0&&wl(E.mutation,v,Yn.empty(),yt.now()),ed(t,v)&&(f=f.insert(m,v))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return X.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(o){return{id:o.id,version:o.version,createTime:qr(o.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(o){return{name:o.name,query:OR(o.bundledQuery),readTime:qr(o.readTime)}}(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.overlays=new St(Ae.comparator),this.kr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Yi();return X.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.wt(e,t,l)}),X.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(s)),X.resolve()}getOverlaysForCollection(e,t,s){const o=Yi(),l=t.length+1,d=new Ae(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>s&&o.set(m.getKey(),m)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new St((v,E)=>v-E);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let E=l.get(v.largestBatchId);E===null&&(E=Yi(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const f=Yi(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,E)=>f.set(v,E)),!(f.size()>=o)););return X.resolve(f)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new hR(t,s));let l=this.kr.get(t);l===void 0&&(l=Ke(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(){this.qr=new Bt(Gt.Qr),this.$r=new Bt(Gt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new Gt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Wr(new Gt(e,t))}Gr(e,t){e.forEach(s=>this.removeReference(s,t))}zr(e){const t=new Ae(new ft([])),s=new Gt(t,e),o=new Gt(t,e+1),l=[];return this.$r.forEachInRange([s,o],d=>{this.Wr(d),l.push(d.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ae(new ft([])),s=new Gt(t,e),o=new Gt(t,e+1);let l=Ke();return this.$r.forEachInRange([s,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new Gt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Gt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ae.comparator(e.key,t.key)||$e(e.Hr,t.Hr)}static Ur(e,t){return $e(e.Hr,t.Hr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Bt(Gt.Qr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new dR(l,t,s,o);this.mutationQueue.push(d);for(const f of o)this.Yr=this.Yr.add(new Gt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return X.resolve(d)}lookupMutationBatch(e,t){return X.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Zf:this.er-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,o],d=>{const f=this.Zr(d.Hr);l.push(f)}),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Bt($e);return t.forEach(o=>{const l=new Gt(o,0),d=new Gt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],f=>{s=s.add(f.Hr)})}),X.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ae.isDocumentKey(l)||(l=l.child(""));const d=new Gt(new Ae(l),0);let f=new Bt($e);return this.Yr.forEachWhile(m=>{const v=m.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(f=f.add(m.Hr)),!0)},d),X.resolve(this.ei(f))}ei(e){const t=[];return e.forEach(s=>{const o=this.Zr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){st(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return X.forEach(t.mutations,o=>{const l=new Gt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,t){const s=new Gt(t,0),o=this.Yr.firstAfterOrEqual(s);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.ni=e,this.docs=function(){return new St(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,d=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return X.resolve(s?s.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let s=Es();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():dn.newInvalidDocument(o))}),X.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Es();const d=t.path,f=new Ae(d.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:E}}=m.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||CC(SC(E),s)<=0||(o.has(E.key)||ed(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ve(9500)}ri(e,t){return X.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new JR(this)}getSize(e){return X.resolve(this.size)}}class JR extends $R{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)}),X.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.persistence=e,this.ii=new so(t=>np(t),rp),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.si=0,this.oi=new lp,this.targetCount=0,this._i=la.ar()}forEachTarget(e,t){return this.ii.forEach((s,o)=>t(o)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),X.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new la(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.hr(t),X.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ii.forEach((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),X.waitFor(l).next(()=>o)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return X.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),X.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return X.resolve(s)}containsKey(e,t){return X.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,t){this.ai={},this.overlays={},this.ui=new Qc(0),this.ci=!1,this.ci=!0,this.li=new KR,this.referenceDelegate=e(this),this.hi=new XR(this),this.indexManager=new LR,this.remoteDocumentCache=function(o){return new YR(o)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new VR(t),this.Ti=new qR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new QR(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const o=new ZR(this.ui.next());return this.referenceDelegate.Ii(),s(o).next(l=>this.referenceDelegate.di(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ei(e,t){return X.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,t)))}}class ZR extends AC{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Ai=new lp,this.Ri=null}static Vi(e){return new up(e)}get mi(){if(this.Ri)return this.Ri;throw Ve(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),X.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(o=>this.mi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.mi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.mi,s=>{const o=Ae.fromPath(s);return this.fi(e,o).next(l=>{l||t.removeEntry(o,Fe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return X.or([()=>X.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Mc{constructor(e,t){this.persistence=e,this.gi=new so(s=>kC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=BR(this,t)}static Vi(e,t){return new Mc(e,t)}Ii(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}yr(e){let t=0;return this.gr(e,s=>{t++}).next(()=>t)}gr(e,t){return X.forEach(this.gi,(s,o)=>this.Sr(e,s,o).next(l=>l?X.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,d=>this.Sr(e,d,t).next(f=>{f||(s++,l.removeEntry(d,Fe.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),X.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pc(e.data.value)),t}Sr(e,t,s){return X.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return X.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=Ke(),o=Ke();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new cp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return hT()?8:PC(hn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ps(e,t).next(d=>{l.result=d}).next(()=>{if(!l.result)return this.ys(e,t,o,s).next(d=>{l.result=d})}).next(()=>{if(l.result)return;const d=new eA;return this.ws(e,t,d).next(f=>{if(l.result=f,this.Rs)return this.Ss(e,t,d,f.size)})}).next(()=>l.result)}Ss(e,t,s,o){return s.documentReadCount<this.Vs?($o()<=Ge.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):($o()<=Ge.DEBUG&&me("QueryEngine","Query:",Ho(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?($o()<=Ge.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(t))):X.resolve())}ps(e,t){if(Zy(t))return X.resolve(null);let s=Hr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=wf(t,null,"F"),s=Hr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const d=Ke(...l);return this.gs.getDocuments(e,d).next(f=>this.indexManager.getMinOffset(e,s).next(m=>{const v=this.bs(t,f);return this.Ds(t,v,d,m.readTime)?this.ps(e,wf(t,null,"F")):this.vs(e,v,t,m)}))})))}ys(e,t,s,o){return Zy(t)||o.isEqual(Fe.min())?X.resolve(null):this.gs.getDocuments(e,s).next(l=>{const d=this.bs(t,l);return this.Ds(t,d,s,o)?X.resolve(null):($o()<=Ge.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ho(t)),this.vs(e,d,t,xC(o,Cl)).next(f=>f))})}bs(e,t){let s=new Bt(T_(e));return t.forEach((o,l)=>{ed(e,l)&&(s=s.add(l))}),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,s){return $o()<=Ge.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Ho(t)),this.gs.getDocumentsMatchingQuery(e,t,gi.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(d=>{l=l.insert(d.key,d)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="LocalStore",nA=3e8;class rA{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new St($e),this.Ms=new so(l=>np(l),rp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function sA(r,e,t,s){return new rA(r,e,t,s)}async function K_(r,e){const t=ze(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const d=[],f=[];let m=Ke();for(const v of o){d.push(v.batchId);for(const E of v.mutations)m=m.add(E.key)}for(const v of l){f.push(v.batchId);for(const E of v.mutations)m=m.add(E.key)}return t.localDocuments.getDocuments(s,m).next(v=>({Bs:v,removedBatchIds:d,addedBatchIds:f}))})})}function iA(r,e){const t=ze(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(f,m,v,E){const I=v.batch,x=I.keys();let L=X.resolve();return x.forEach(B=>{L=L.next(()=>E.getEntry(m,B)).next($=>{const M=v.docVersions.get(B);st(M!==null,48541),$.version.compareTo(M)<0&&(I.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),E.addEntry($)))})}),L.next(()=>f.mutationQueue.removeMutationBatch(m,I))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let m=Ke();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(m=m.add(f.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function Q_(r){const e=ze(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function oA(r,e){const t=ze(r),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach((E,I)=>{const x=o.get(I);if(!x)return;f.push(t.hi.removeMatchingKeys(l,E.removedDocuments,I).next(()=>t.hi.addMatchingKeys(l,E.addedDocuments,I)));let L=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?L=L.withResumeToken(rn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):E.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(E.resumeToken,s)),o=o.insert(I,L),function($,M,Q){return $.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=nA?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(x,L,E)&&f.push(t.hi.updateTargetData(l,L))});let m=Es(),v=Ke();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),f.push(aA(l,d,e.documentUpdates).next(E=>{m=E.Ls,v=E.ks})),!s.isEqual(Fe.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next(I=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(E)}return X.waitFor(f).next(()=>d.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,v)).next(()=>m)}).then(l=>(t.Fs=o,l))}function aA(r,e,t){let s=Ke(),o=Ke();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let d=Es();return t.forEach((f,m)=>{const v=l.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(Fe.min())?(e.removeEntry(f,m.readTime),d=d.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),d=d.insert(f,m)):me(dp,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{Ls:d,ks:o}})}function lA(r,e){const t=ze(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Zf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function uA(r,e){const t=ze(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.hi.getTargetData(s,e).next(l=>l?(o=l,X.resolve(o)):t.hi.allocateTargetId(s).next(d=>(o=new oi(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s})}async function Sf(r,e,t){const s=ze(r),o=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!_a(d))throw d;me(dp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function hv(r,e,t){const s=ze(r);let o=Fe.min(),l=Ke();return s.persistence.runTransaction("Execute query","readwrite",d=>function(m,v,E){const I=ze(m),x=I.Ms.get(E);return x!==void 0?X.resolve(I.Fs.get(x)):I.hi.getTargetData(v,E)}(s,d,Hr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(d,f.targetId).next(m=>{l=m})}).next(()=>s.Cs.getDocumentsMatchingQuery(d,e,t?o:Fe.min(),t?l:Ke())).next(f=>(cA(s,YC(e),f),{documents:f,qs:l})))}function cA(r,e,t){let s=r.xs.get(e)||Fe.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.xs.set(e,s)}class fv{constructor(){this.activeTargetIds=nR()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dA{constructor(){this.Fo=new fv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new fv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="ConnectivityMonitor";class mv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){me(pv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){me(pv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc=null;function Cf(){return lc===null?lc=function(){return 268435456+Math.round(2147483648*Math.random())}():lc++,"0x"+lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="RestConnection",fA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pA{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===kc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const d=Cf(),f=this.Go(e,t.toUriEncodedString());me(Zh,`Sending RPC '${e}' ${d}:`,f,s);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,o,l);const{host:v}=new URL(f),E=fa(v);return this.jo(e,f,m,s,E).then(I=>(me(Zh,`Received RPC '${e}' ${d}: `,I),I),I=>{throw mi(Zh,`RPC '${e}' ${d} failed with error: `,I,"url: ",f,"request:",s),I})}Jo(e,t,s,o,l,d){return this.Wo(e,t,s,o,l)}zo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ya}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),s&&s.headers.forEach((o,l)=>e[l]=o)}Go(e,t){const s=fA[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class gA extends pA{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,l){const d=Cf();return new Promise((f,m)=>{const v=new Q0;v.setWithCredentials(!0),v.listenOnce(Y0.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case fc.NO_ERROR:const I=v.getResponseJson();me(un,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),f(I);break;case fc.TIMEOUT:me(un,`RPC '${e}' ${d} timed out`),m(new pe(Y.DEADLINE_EXCEEDED,"Request time out"));break;case fc.HTTP_ERROR:const x=v.getStatus();if(me(un,`RPC '${e}' ${d} failed with status:`,x,"response text:",v.getResponseText()),x>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const B=L==null?void 0:L.error;if(B&&B.status&&B.message){const $=function(Q){const te=Q.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(te)>=0?te:Y.UNKNOWN}(B.status);m(new pe($,B.message))}else m(new pe(Y.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new pe(Y.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{me(un,`RPC '${e}' ${d} completed.`)}});const E=JSON.stringify(o);me(un,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",E,s,15)})}P_(e,t,s){const o=Cf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Z0(),f=X0(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const E=l.join("");me(un,`Creating RPC '${e}' stream ${o}: ${E}`,m);const I=d.createWebChannel(E,m);this.T_(I);let x=!1,L=!1;const B=new mA({Ho:M=>{L?me(un,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(x||(me(un,`Opening RPC '${e}' stream ${o} transport.`),I.open(),x=!0),me(un,`RPC '${e}' stream ${o} sending:`,M),I.send(M))},Yo:()=>I.close()}),$=(M,Q,te)=>{M.listen(Q,J=>{try{te(J)}catch(_e){setTimeout(()=>{throw _e},0)}})};return $(I,al.EventType.OPEN,()=>{L||(me(un,`RPC '${e}' stream ${o} transport opened.`),B.s_())}),$(I,al.EventType.CLOSE,()=>{L||(L=!0,me(un,`RPC '${e}' stream ${o} transport closed`),B.__(),this.I_(I))}),$(I,al.EventType.ERROR,M=>{L||(L=!0,mi(un,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),B.__(new pe(Y.UNAVAILABLE,"The operation could not be completed")))}),$(I,al.EventType.MESSAGE,M=>{var Q;if(!L){const te=M.data[0];st(!!te,16349);const J=te,_e=(J==null?void 0:J.error)||((Q=J[0])===null||Q===void 0?void 0:Q.error);if(_e){me(un,`RPC '${e}' stream ${o} received error:`,_e);const ce=_e.status;let Ie=function(S){const b=Vt[S];if(b!==void 0)return L_(b)}(ce),P=_e.message;Ie===void 0&&(Ie=Y.INTERNAL,P="Unknown error status: "+ce+" with message "+_e.message),L=!0,B.__(new pe(Ie,P)),I.close()}else me(un,`RPC '${e}' stream ${o} received:`,te),B.a_(te)}}),$(f,J0.STAT_EVENT,M=>{M.stat===ff.PROXY?me(un,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===ff.NOPROXY&&me(un,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{B.o_()},0),B}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(r){return new wR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="PersistentStream";class J_{constructor(e,t,s,o,l,d,f,m){this.Fi=e,this.w_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Y_(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(ws(t.toString()),ws("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.b_===t&&this.W_(s,o)},s=>{e(()=>{const o=new pe(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)})})}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{s(()=>this.G_(o))}),this.stream.onMessage(o=>{s(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return me(gv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(me(gv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yA extends J_{constructor(e,t,s,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=TR(this.serializer,e),s=function(l){if(!("targetChange"in l))return Fe.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Fe.min():d.readTime?qr(d.readTime):Fe.min()}(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=xf(this.serializer),t.addTarget=function(l,d){let f;const m=d.target;if(f=vf(m)?{documents:CR(l,m)}:{query:RR(l,m).Vt},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=F_(l,d.resumeToken);const v=Ef(l,d.expectedCount);v!==null&&(f.expectedCount=v)}else if(d.snapshotVersion.compareTo(Fe.min())>0){f.readTime=jc(l,d.snapshotVersion.toTimestamp());const v=Ef(l,d.expectedCount);v!==null&&(f.expectedCount=v)}return f}(this.serializer,e);const s=PR(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=xf(this.serializer),t.removeTarget=e,this.k_(t)}}class vA extends J_{constructor(e,t,s,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=SR(e.writeResults,e.commitTime),s=qr(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=xf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>xR(this.serializer,s))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{}class wA extends _A{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new pe(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Wo(e,If(t,s),o,l,d)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(Y.UNKNOWN,l.toString())})}Jo(e,t,s,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,f])=>this.connection.Jo(e,If(t,s),o,d,f,l)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pe(Y.UNKNOWN,d.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class EA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ws(t),this._a=!1):me("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="RemoteStore";class IA{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(d=>{s.enqueueAndForget(async()=>{io(this)&&(me(eo,"Restarting streams for network reachability change."),await async function(m){const v=ze(m);v.Ia.add(4),await Fl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await id(v)}(this))})}),this.Aa=new EA(s,o)}}async function id(r){if(io(r))for(const e of r.da)await e(!0)}async function Fl(r){for(const e of r.da)await e(!1)}function X_(r,e){const t=ze(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),mp(t)?pp(t):wa(t).x_()&&fp(t,e))}function hp(r,e){const t=ze(r),s=wa(t);t.Ta.delete(e),s.x_()&&Z_(t,e),t.Ta.size===0&&(s.x_()?s.B_():io(t)&&t.Aa.set("Unknown"))}function fp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wa(r).H_(e)}function Z_(r,e){r.Ra.$e(e),wa(r).Y_(e)}function pp(r){r.Ra=new gR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),wa(r).start(),r.Aa.aa()}function mp(r){return io(r)&&!wa(r).M_()&&r.Ta.size>0}function io(r){return ze(r).Ia.size===0}function ew(r){r.Ra=void 0}async function TA(r){r.Aa.set("Online")}async function xA(r){r.Ta.forEach((e,t)=>{fp(r,e)})}async function SA(r,e){ew(r),mp(r)?(r.Aa.la(e),pp(r)):r.Aa.set("Unknown")}async function CA(r,e,t){if(r.Aa.set("Online"),e instanceof M_&&e.state===2&&e.cause)try{await async function(o,l){const d=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,d),o.Ta.delete(f),o.Ra.removeTarget(f))}(r,e)}catch(s){me(eo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fc(r,s)}else if(e instanceof yc?r.Ra.Ye(e):e instanceof j_?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Fe.min()))try{const s=await Q_(r.localStore);t.compareTo(s)>=0&&await function(l,d){const f=l.Ra.Pt(d);return f.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const E=l.Ta.get(v);E&&l.Ta.set(v,E.withResumeToken(m.resumeToken,d))}}),f.targetMismatches.forEach((m,v)=>{const E=l.Ta.get(m);if(!E)return;l.Ta.set(m,E.withResumeToken(rn.EMPTY_BYTE_STRING,E.snapshotVersion)),Z_(l,m);const I=new oi(E.target,m,v,E.sequenceNumber);fp(l,I)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){me(eo,"Failed to raise snapshot:",s),await Fc(r,s)}}async function Fc(r,e,t){if(!_a(e))throw e;r.Ia.add(1),await Fl(r),r.Aa.set("Offline"),t||(t=()=>Q_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{me(eo,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await id(r)})}function tw(r,e){return e().catch(t=>Fc(r,t,e))}async function od(r){const e=ze(r),t=wi(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Zf;for(;RA(e);)try{const o=await lA(e.localStore,s);if(o===null){e.Pa.length===0&&t.B_();break}s=o.batchId,AA(e,o)}catch(o){await Fc(e,o)}nw(e)&&rw(e)}function RA(r){return io(r)&&r.Pa.length<10}function AA(r,e){r.Pa.push(e);const t=wi(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function nw(r){return io(r)&&!wi(r).M_()&&r.Pa.length>0}function rw(r){wi(r).start()}async function PA(r){wi(r).na()}async function bA(r){const e=wi(r);for(const t of r.Pa)e.X_(t.mutations)}async function kA(r,e,t){const s=r.Pa.shift(),o=ip.from(s,e,t);await tw(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await od(r)}async function NA(r,e){e&&wi(r).Z_&&await async function(s,o){if(function(d){return pR(d)&&d!==Y.ABORTED}(o.code)){const l=s.Pa.shift();wi(s).N_(),await tw(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await od(s)}}(r,e),nw(r)&&rw(r)}async function yv(r,e){const t=ze(r);t.asyncQueue.verifyOperationInProgress(),me(eo,"RemoteStore received new credentials");const s=io(t);t.Ia.add(3),await Fl(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await id(t)}async function DA(r,e){const t=ze(r);e?(t.Ia.delete(2),await id(t)):e||(t.Ia.add(2),await Fl(t),t.Aa.set("Unknown"))}function wa(r){return r.Va||(r.Va=function(t,s,o){const l=ze(t);return l.ia(),new yA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:TA.bind(null,r),e_:xA.bind(null,r),n_:SA.bind(null,r),J_:CA.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),mp(r)?pp(r):r.Aa.set("Unknown")):(await r.Va.stop(),ew(r))})),r.Va}function wi(r){return r.ma||(r.ma=function(t,s,o){const l=ze(t);return l.ia(),new vA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:PA.bind(null,r),n_:NA.bind(null,r),ea:bA.bind(null,r),ta:kA.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await od(r)):(await r.ma.stop(),r.Pa.length>0&&(me(eo,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const d=Date.now()+s,f=new gp(e,t,d,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yp(r,e){if(ws("AsyncQueue",`${e}: ${r}`),_a(r))return new pe(Y.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ae.comparator(t.key,s.key):(t,s)=>Ae.comparator(t.key,s.key),this.keyedMap=ll(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Zo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.fa=new St(Ae.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ve(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,s)=>{e.push(s)}),e}}class ua{constructor(e,t,s,o,l,d,f,m,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,l){const d=[];return t.forEach(f=>{d.push({type:0,doc:f})}),new ua(e,t,Zo.emptySet(t),d,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class OA{constructor(){this.queries=_v(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=ze(t),l=o.queries;o.queries=_v(),l.forEach((d,f)=>{for(const m of f.wa)m.onError(s)})})(this,new pe(Y.ABORTED,"Firestore shutting down"))}}function _v(){return new so(r=>I_(r),Zc)}async function sw(r,e){const t=ze(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(s=2):(l=new VA,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const f=yp(d,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&vp(t)}async function iw(r,e){const t=ze(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function LA(r,e){const t=ze(r);let s=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const f of d.wa)f.Ca(o)&&(s=!0);d.ya=o}}s&&vp(t)}function jA(r,e,t){const s=ze(r),o=s.queries.get(e);if(o)for(const l of o.wa)l.onError(t);s.queries.delete(e)}function vp(r){r.Da.forEach(e=>{e.next()})}var Rf,wv;(wv=Rf||(Rf={})).Fa="default",wv.Cache="cache";class ow{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ua(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Rf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this.key=e}}class lw{constructor(e){this.key=e}}class MA{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ke(),this.mutatedKeys=Ke(),this.Xa=T_(e),this.eu=new Zo(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new vv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,I)=>{const x=o.get(E),L=ed(this.query,I)?I:null,B=!!x&&this.mutatedKeys.has(x.key),$=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let M=!1;x&&L?x.data.isEqual(L.data)?B!==$&&(s.track({type:3,doc:L}),M=!0):this.iu(x,L)||(s.track({type:2,doc:L}),M=!0,(m&&this.Xa(L,m)>0||v&&this.Xa(L,v)<0)&&(f=!0)):!x&&L?(s.track({type:0,doc:L}),M=!0):x&&!L&&(s.track({type:1,doc:x}),M=!0,(m||v)&&(f=!0)),M&&(L?(d=d.add(L),l=$?l.add(E):l.delete(E)):(d=d.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{eu:d,ru:s,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort((E,I)=>function(L,B){const $=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{At:M})}};return $(L)-$(B)}(E.type,I.type)||this.Xa(E.doc,I.doc)),this.su(s),o=o!=null&&o;const f=t&&!o?this.ou():[],m=this.Za.size===0&&this.current&&!o?1:0,v=m!==this.Ya;return this.Ya=m,d.length!==0||v?{snapshot:new ua(this.query,e.eu,l,d,e.mutatedKeys,m===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new vv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ke(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const t=[];return e.forEach(s=>{this.Za.has(s)||t.push(new lw(s))}),this.Za.forEach(s=>{e.has(s)||t.push(new aw(s))}),t}uu(e){this.Ha=e.qs,this.Za=Ke();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ua.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const _p="SyncEngine";class FA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class UA{constructor(e){this.key=e,this.lu=!1}}class zA{constructor(e,t,s,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new so(f=>I_(f),Zc),this.Tu=new Map,this.Iu=new Set,this.du=new St(Ae.comparator),this.Eu=new Map,this.Au=new lp,this.Ru={},this.Vu=new Map,this.mu=la.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function BA(r,e,t=!0){const s=pw(r);let o;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await uw(s,e,t,!0),o}async function $A(r,e){const t=pw(r);await uw(t,e,!0,!1)}async function uw(r,e,t,s){const o=await uA(r.localStore,Hr(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await HA(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&X_(r.remoteStore,o),f}async function HA(r,e,t,s,o){r.gu=(I,x,L)=>async function($,M,Q,te){let J=M.view.nu(Q);J.Ds&&(J=await hv($.localStore,M.query,!1).then(({documents:P})=>M.view.nu(P,J)));const _e=te&&te.targetChanges.get(M.targetId),ce=te&&te.targetMismatches.get(M.targetId)!=null,Ie=M.view.applyChanges(J,$.isPrimaryClient,_e,ce);return Iv($,M.targetId,Ie._u),Ie.snapshot}(r,I,x,L);const l=await hv(r.localStore,e,!0),d=new MA(e,l.qs),f=d.nu(l.documents),m=Ml.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),v=d.applyChanges(f,r.isPrimaryClient,m);Iv(r,t,v._u);const E=new FA(e,t,d);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function WA(r,e,t){const s=ze(r),o=s.Pu.get(e),l=s.Tu.get(o.targetId);if(l.length>1)return s.Tu.set(o.targetId,l.filter(d=>!Zc(d,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Sf(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&hp(s.remoteStore,o.targetId),Af(s,o.targetId)}).catch(va)):(Af(s,o.targetId),await Sf(s.localStore,o.targetId,!0))}async function qA(r,e){const t=ze(r),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),hp(t.remoteStore,s.targetId))}async function GA(r,e,t){const s=eP(r);try{const o=await function(d,f){const m=ze(d),v=yt.now(),E=f.reduce((L,B)=>L.add(B.key),Ke());let I,x;return m.persistence.runTransaction("Locally write mutations","readwrite",L=>{let B=Es(),$=Ke();return m.Os.getEntries(L,E).next(M=>{B=M,B.forEach((Q,te)=>{te.isValidDocument()||($=$.add(Q))})}).next(()=>m.localDocuments.getOverlayedDocuments(L,B)).next(M=>{I=M;const Q=[];for(const te of f){const J=uR(te,I.get(te.key).overlayedDocument);J!=null&&Q.push(new Ti(te.key,J,p_(J.value.mapValue),Wr.exists(!0)))}return m.mutationQueue.addMutationBatch(L,v,Q,f)}).next(M=>{x=M;const Q=M.applyToLocalDocumentSet(I,$);return m.documentOverlayCache.saveOverlays(L,M.batchId,Q)})}).then(()=>({batchId:x.batchId,changes:S_(I)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,f,m){let v=d.Ru[d.currentUser.toKey()];v||(v=new St($e)),v=v.insert(f,m),d.Ru[d.currentUser.toKey()]=v}(s,o.batchId,t),await Ul(s,o.changes),await od(s.remoteStore)}catch(o){const l=yp(o,"Failed to persist write");t.reject(l)}}async function cw(r,e){const t=ze(r);try{const s=await oA(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.Eu.get(l);d&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?st(d.lu,14607):o.removedDocuments.size>0&&(st(d.lu,42227),d.lu=!1))}),await Ul(t,s,e)}catch(s){await va(s)}}function Ev(r,e,t){const s=ze(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach((l,d)=>{const f=d.view.va(e);f.snapshot&&o.push(f.snapshot)}),function(d,f){const m=ze(d);m.onlineState=f;let v=!1;m.queries.forEach((E,I)=>{for(const x of I.wa)x.va(f)&&(v=!0)}),v&&vp(m)}(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function KA(r,e,t){const s=ze(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let d=new St(Ae.comparator);d=d.insert(l,dn.newNoDocument(l,Fe.min()));const f=Ke().add(l),m=new rd(Fe.min(),new Map,new St($e),d,f);await cw(s,m),s.du=s.du.remove(l),s.Eu.delete(e),wp(s)}else await Sf(s.localStore,e,!1).then(()=>Af(s,e,t)).catch(va)}async function QA(r,e){const t=ze(r),s=e.batch.batchId;try{const o=await iA(t.localStore,e);hw(t,s,null),dw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ul(t,o)}catch(o){await va(o)}}async function YA(r,e,t){const s=ze(r);try{const o=await function(d,f){const m=ze(d);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return m.mutationQueue.lookupMutationBatch(v,f).next(I=>(st(I!==null,37113),E=I.keys(),m.mutationQueue.removeMutationBatch(v,I))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,E,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>m.localDocuments.getDocuments(v,E))})}(s.localStore,e);hw(s,e,t),dw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ul(s,o)}catch(o){await va(o)}}function dw(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function hw(r,e,t){const s=ze(r);let o=s.Ru[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function Af(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Tu.get(e))r.Pu.delete(s),t&&r.hu.pu(s,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(s=>{r.Au.containsKey(s)||fw(r,s)})}function fw(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(hp(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),wp(r))}function Iv(r,e,t){for(const s of t)s instanceof aw?(r.Au.addReference(s.key,e),JA(r,s)):s instanceof lw?(me(_p,"Document no longer in limbo: "+s.key),r.Au.removeReference(s.key,e),r.Au.containsKey(s.key)||fw(r,s.key)):Ve(19791,{yu:s})}function JA(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Iu.has(s)||(me(_p,"New document in limbo: "+t),r.Iu.add(s),wp(r))}function wp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Ae(ft.fromString(e)),s=r.mu.next();r.Eu.set(s,new UA(t)),r.du=r.du.insert(t,s),X_(r.remoteStore,new oi(Hr(Xc(t.path)),s,"TargetPurposeLimboResolution",Qc.ue))}}async function Ul(r,e,t){const s=ze(r),o=[],l=[],d=[];s.Pu.isEmpty()||(s.Pu.forEach((f,m)=>{d.push(s.gu(m,e,t).then(v=>{var E;if((v||t)&&s.isPrimaryClient){const I=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(m.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(m.targetId,I?"current":"not-current")}if(v){o.push(v);const I=cp.Es(m.targetId,v);l.push(I)}}))}),await Promise.all(d),s.hu.J_(o),await async function(m,v){const E=ze(m);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>X.forEach(v,x=>X.forEach(x.Is,L=>E.persistence.referenceDelegate.addReference(I,x.targetId,L)).next(()=>X.forEach(x.ds,L=>E.persistence.referenceDelegate.removeReference(I,x.targetId,L)))))}catch(I){if(!_a(I))throw I;me(dp,"Failed to update sequence numbers: "+I)}for(const I of v){const x=I.targetId;if(!I.fromCache){const L=E.Fs.get(x),B=L.snapshotVersion,$=L.withLastLimboFreeSnapshotVersion(B);E.Fs=E.Fs.insert(x,$)}}}(s.localStore,l))}async function XA(r,e){const t=ze(r);if(!t.currentUser.isEqual(e)){me(_p,"User change. New user:",e.toKey());const s=await K_(t.localStore,e);t.currentUser=e,function(l,d){l.Vu.forEach(f=>{f.forEach(m=>{m.reject(new pe(Y.CANCELLED,d))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ul(t,s.Bs)}}function ZA(r,e){const t=ze(r),s=t.Eu.get(e);if(s&&s.lu)return Ke().add(s.key);{let o=Ke();const l=t.Tu.get(e);if(!l)return o;for(const d of l){const f=t.Pu.get(d);o=o.unionWith(f.view.tu)}return o}}function pw(r){const e=ze(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=cw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KA.bind(null,e),e.hu.J_=LA.bind(null,e.eventManager),e.hu.pu=jA.bind(null,e.eventManager),e}function eP(r){const e=ze(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YA.bind(null,e),e}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return sA(this.persistence,new tA,e.initialUser,this.serializer)}Du(e){return new G_(up.Vi,this.serializer)}bu(e){return new dA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class tP extends Uc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){st(this.persistence.referenceDelegate instanceof Mc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new UR(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new G_(s=>Mc.Vi(s,t),this.serializer)}}class Pf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ev(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=XA.bind(null,this.syncEngine),await DA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OA}()}createDatastore(e){const t=sd(e.databaseInfo.databaseId),s=function(l){return new gA(l)}(e.databaseInfo);return function(l,d,f,m){return new wA(l,d,f,m)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,d,f){return new IA(s,o,l,d,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Ev(this.syncEngine,t,0),function(){return mv.C()?new mv:new hA}())}createSyncEngine(e,t){return function(o,l,d,f,m,v,E){const I=new zA(o,l,d,f,m,v);return E&&(I.fu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=ze(o);me(eo,"RemoteStore shutting down."),l.Ia.add(5),await Fl(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Pf.provider={build:()=>new Pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ws("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="FirestoreClient";class nP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=Xf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async d=>{me(Ei,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(me(Ei,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=yp(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function tf(r,e){r.asyncQueue.verifyOperationInProgress(),me(Ei,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await K_(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>{mi("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{me("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{mi("Terminating Firestore due to IndexedDb database deletion failed",o)})}),r._offlineComponents=e}async function Tv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await rP(r);me(Ei,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>yv(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>yv(e.remoteStore,o)),r._onlineComponents=e}async function rP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(Ei,"Using user provided OfflineComponentProvider");try{await tf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;mi("Error using user provided cache. Falling back to memory cache: "+t),await tf(r,new Uc)}}else me(Ei,"Using default OfflineComponentProvider"),await tf(r,new tP(void 0));return r._offlineComponents}async function gw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(Ei,"Using user provided OnlineComponentProvider"),await Tv(r,r._uninitializedComponentsProvider._online)):(me(Ei,"Using default OnlineComponentProvider"),await Tv(r,new Pf))),r._onlineComponents}function sP(r){return gw(r).then(e=>e.syncEngine)}async function bf(r){const e=await gw(r),t=e.eventManager;return t.onListen=BA.bind(null,e.syncEngine),t.onUnlisten=WA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$A.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qA.bind(null,e.syncEngine),t}function iP(r,e,t={}){const s=new hi;return r.asyncQueue.enqueueAndForget(async()=>function(l,d,f,m,v){const E=new mw({next:x=>{E.Ou(),d.enqueueAndForget(()=>iw(l,I));const L=x.docs.has(f);!L&&x.fromCache?v.reject(new pe(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&x.fromCache&&m&&m.source==="server"?v.reject(new pe(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),I=new ow(Xc(f.path),E,{includeMetadataChanges:!0,ka:!0});return sw(l,I)}(await bf(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="firestore.googleapis.com",Sv=!0;class Cv{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vw,this.ssl=Sv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Sv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MR)throw new pe(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new pe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new pe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new pe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ad{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new pC;switch(s.type){case"firstParty":return new vC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=xv.get(t);s&&(me("ComponentProvider","Removing Datastore"),xv.delete(t),s.terminate())}(this),Promise.resolve()}}function oP(r,e,t,s={}){var o;r=$r(r,ad);const l=fa(e),d=r._getSettings(),f=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),m=`${e}:${t}`;l&&(n0(`https://${m}`),r0("Firestore",!0)),d.host!==vw&&d.host!==m&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:m,ssl:l,emulatorOptions:s});if(!gs(v,f)&&(r._setSettings(v),s.mockUserToken)){let E,I;if(typeof s.mockUserToken=="string")E=s.mockUserToken,I=cn.MOCK_USER;else{E=rT(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new pe(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new cn(x)}r._authCredentials=new mC(new t_(E,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ea(this.firestore,e,this._query)}}class Rt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}toJSON(){return{type:Rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ol(t,Rt._jsonSchema))return new Rt(e,s||null,new Ae(ft.fromString(t.referencePath)))}}Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:jt("string",Rt._jsonSchemaVersion),referencePath:jt("string")};class fi extends Ea{constructor(e,t,s){super(e,t,Xc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new Ae(e))}withConverter(e){return new fi(this.firestore,e,this._path)}}function cl(r,e,...t){if(r=xt(r),r_("collection","path",e),r instanceof ad){const s=ft.fromString(e,...t);return Fy(s),new fi(r,null,s)}{if(!(r instanceof Rt||r instanceof fi))throw new pe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ft.fromString(e,...t));return Fy(s),new fi(r.firestore,null,s)}}function Qn(r,e,...t){if(r=xt(r),arguments.length===1&&(e=Xf.newId()),r_("doc","path",e),r instanceof ad){const s=ft.fromString(e,...t);return My(s),new Rt(r,null,new Ae(s))}{if(!(r instanceof Rt||r instanceof fi))throw new pe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ft.fromString(e,...t));return My(s),new Rt(r.firestore,r instanceof fi?r.converter:null,new Ae(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="AsyncQueue";class Av{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Y_(this,"async_queue_retry"),this.oc=()=>{const s=ef();s&&me(Rv,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=ef();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=ef();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new hi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!_a(e))throw e;me(Rv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,ws("INTERNAL UNHANDLED ERROR: ",Pv(s)),s}).then(s=>(this.nc=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=gp.createAndSchedule(this,e,t,s,l=>this.lc(l));return this.ec.push(o),o}ac(){this.tc&&Ve(47125,{hc:Pv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Pv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class ca extends ad{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Av,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Av(e),this._firestoreClient=void 0,await e}}}function aP(r,e){const t=typeof r=="object"?r:a0(),s=typeof r=="string"?r:kc,o=jf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=tT("firestore");l&&oP(o,...l)}return o}function Ep(r){if(r._terminated)throw new pe(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||lP(r),r._firestoreClient}function lP(r){var e,t,s;const o=r._freezeSettings(),l=function(f,m,v,E){return new VC(f,m,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,yw(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new nP(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ur(rn.fromBase64String(e))}catch(t){throw new pe(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ur(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ol(e,ur._jsonSchema))return ur.fromBase64String(e.bytes)}}ur._jsonSchemaVersion="firestore/bytes/1.0",ur._jsonSchema={type:jt("string",ur._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gr._jsonSchemaVersion}}static fromJSON(e){if(Ol(e,Gr._jsonSchema))return new Gr(e.latitude,e.longitude)}}Gr._jsonSchemaVersion="firestore/geoPoint/1.0",Gr._jsonSchema={type:jt("string",Gr._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ol(e,Kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Kr(e.vectorValues);throw new pe(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kr._jsonSchemaVersion="firestore/vectorValue/1.0",Kr._jsonSchema={type:jt("string",Kr._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=/^__.*__$/;class cP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,t,this.fieldTransforms):new jl(e,this.data,t,this.fieldTransforms)}}class _w{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ti(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ww(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ec:r})}}class ud{constructor(e,t,s,o,l,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ud(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return zc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ww(this.Ec)&&uP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class dP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||sd(e)}Dc(e,t,s,o=!1){return new ud({Ec:e,methodName:t,bc:s,path:nn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ip(r){const e=r._freezeSettings(),t=sd(r._databaseId);return new dP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function hP(r,e,t,s,o,l={}){const d=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);Sp("Data must be an object, but it was:",d,s);const f=Iw(s,d);let m,v;if(l.merge)m=new Yn(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const E=[];for(const I of l.mergeFields){const x=kf(e,I,t);if(!d.contains(x))throw new pe(Y.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);xw(E,x)||E.push(x)}m=new Yn(E),v=d.fieldTransforms.filter(I=>m.covers(I.field))}else m=null,v=d.fieldTransforms;return new cP(new On(f),m,v)}class cd extends zl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}function Ew(r,e,t){return new ud({Ec:3,bc:e.settings.bc,methodName:r._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Tp extends zl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Ew(this,e,!0),s=this.vc.map(l=>oo(l,t)),o=new oa(s);return new N_(e.path,o)}isEqual(e){return e instanceof Tp&&gs(this.vc,e.vc)}}class xp extends zl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Ew(this,e,!0),s=this.vc.map(l=>oo(l,t)),o=new aa(s);return new N_(e.path,o)}isEqual(e){return e instanceof xp&&gs(this.vc,e.vc)}}function fP(r,e,t,s){const o=r.Dc(1,e,t);Sp("Data must be an object, but it was:",o,s);const l=[],d=On.empty();Ii(s,(m,v)=>{const E=Cp(e,m,t);v=xt(v);const I=o.gc(E);if(v instanceof cd)l.push(E);else{const x=oo(v,I);x!=null&&(l.push(E),d.set(E,x))}});const f=new Yn(l);return new _w(d,f,o.fieldTransforms)}function pP(r,e,t,s,o,l){const d=r.Dc(1,e,t),f=[kf(e,s,t)],m=[o];if(l.length%2!=0)throw new pe(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)f.push(kf(e,l[x])),m.push(l[x+1]);const v=[],E=On.empty();for(let x=f.length-1;x>=0;--x)if(!xw(v,f[x])){const L=f[x];let B=m[x];B=xt(B);const $=d.gc(L);if(B instanceof cd)v.push(L);else{const M=oo(B,$);M!=null&&(v.push(L),E.set(L,M))}}const I=new Yn(v);return new _w(E,I,d.fieldTransforms)}function mP(r,e,t,s=!1){return oo(t,r.Dc(s?4:3,e))}function oo(r,e){if(Tw(r=xt(r)))return Sp("Unsupported field value:",e,r),Iw(r,e);if(r instanceof zl)return function(s,o){if(!ww(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,o){const l=[];let d=0;for(const f of s){let m=oo(f,o.yc(d));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),d++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=xt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return rR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=yt.fromDate(s);return{timestampValue:jc(o.serializer,l)}}if(s instanceof yt){const l=new yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:jc(o.serializer,l)}}if(s instanceof Gr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ur)return{bytesValue:F_(o.serializer,s._byteString)};if(s instanceof Rt){const l=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ap(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Kr)return function(d,f){return{mapValue:{fields:{[h_]:{stringValue:f_},[Nc]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw f.wc("VectorValues must only contain numeric values.");return sp(f.serializer,v)})}}}}}}(s,o);throw o.wc(`Unsupported field value: ${Kc(s)}`)}(r,e)}function Iw(r,e){const t={};return o_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(r,(s,o)=>{const l=oo(o,e.Vc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function Tw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof yt||r instanceof Gr||r instanceof ur||r instanceof Rt||r instanceof zl||r instanceof Kr)}function Sp(r,e,t){if(!Tw(t)||!s_(t)){const s=Kc(t);throw s==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+s)}}function kf(r,e,t){if((e=xt(e))instanceof ld)return e._internalPath;if(typeof e=="string")return Cp(r,e);throw zc("Field path arguments must be of type string or ",r,!1,void 0,t)}const gP=new RegExp("[~\\*/\\[\\]]");function Cp(r,e,t){if(e.search(gP)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ld(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function zc(r,e,t,s,o){const l=s&&!s.isEmpty(),d=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||d)&&(m+=" (found",l&&(m+=` in field ${s}`),d&&(m+=` in document ${o}`),m+=")"),new pe(Y.INVALID_ARGUMENT,f+r+m)}function xw(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yP extends Sw{data(){return super.data()}}function Rp(r,e){return typeof e=="string"?Cp(r,e):e instanceof ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}class _P extends Ap{}function wP(r,e,...t){let s=[];e instanceof Ap&&s.push(e),s=s.concat(t),function(l){const d=l.filter(m=>m instanceof Pp).length,f=l.filter(m=>m instanceof dd).length;if(d>1||d>0&&f>0)throw new pe(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class dd extends _P{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new dd(e,t,s)}_apply(e){const t=this._parse(e);return Cw(e._query,t),new Ea(e.firestore,e.converter,_f(e._query,t))}_parse(e){const t=Ip(e.firestore);return function(l,d,f,m,v,E,I){let x;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new pe(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Nv(I,E);const B=[];for(const $ of I)B.push(kv(m,l,$));x={arrayValue:{values:B}}}else x=kv(m,l,I)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Nv(I,E),x=mP(f,d,I,E==="in"||E==="not-in");return Lt.create(v,E,x)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function EP(r,e,t){const s=e,o=Rp("where",r);return dd._create(o,s,t)}class Pp extends Ap{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Pp(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let d=o;const f=l.getFlattenedFilters();for(const m of f)Cw(d,m),d=_f(d,m)}(e._query,t),new Ea(e.firestore,e.converter,_f(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function kv(r,e,t){if(typeof(t=xt(t))=="string"){if(t==="")throw new pe(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E_(e)&&t.indexOf("/")!==-1)throw new pe(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ft.fromString(t));if(!Ae.isDocumentKey(s))throw new pe(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Gy(r,new Ae(s))}if(t instanceof Rt)return Gy(r,t._key);throw new pe(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kc(t)}.`)}function Nv(r,e){if(!Array.isArray(r)||r.length===0)throw new pe(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Cw(r,e){const t=function(o,l){for(const d of o)for(const f of d.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new pe(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class IP{convertValue(e,t="none"){switch(_i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ii(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Nc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>bt(d.doubleValue));return new Kr(l)}convertGeoPoint(e){return new Gr(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Jc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Rl(e));default:return null}}convertTimestamp(e){const t=yi(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ft.fromString(e);st(W_(s),9688,{name:e});const o=new Al(s.get(1),s.get(3)),l=new Ae(s.popFirst(5));return o.isEqual(t)||ws(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class dl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ji extends Sw{constructor(e,t,s,o,l,d){super(e,t,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Rp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ji._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ji._jsonSchema={type:jt("string",Ji._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class vc extends Ji{data(e={}){return super.data(e)}}class ea{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new dl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new vc(this._firestore,this._userDataWriter,s.key,s,new dl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(f=>{const m=new vc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new dl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new vc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new dl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return f.type!==0&&(v=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),E=d.indexOf(f.doc.key)),{type:xP(f.type),doc:m,oldIndex:v,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ea._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(r){r=$r(r,Rt);const e=$r(r.firestore,ca);return iP(Ep(e),r._key).then(t=>Pw(e,r,t))}ea._jsonSchemaVersion="firestore/querySnapshot/1.0",ea._jsonSchema={type:jt("string",ea._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class Rw extends IP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}}function Go(r,e,t){r=$r(r,Rt);const s=$r(r.firestore,ca),o=TP(r.converter,e,t);return Aw(s,[hP(Ip(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Wr.none())])}function hs(r,e,t,...s){r=$r(r,Rt);const o=$r(r.firestore,ca),l=Ip(o);let d;return d=typeof(e=xt(e))=="string"||e instanceof ld?pP(l,"updateDoc",r._key,e,t,s):fP(l,"updateDoc",r._key,e),Aw(o,[d.toMutation(r._key,Wr.exists(!0))])}function _c(r,...e){var t,s,o;r=xt(r);let l={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||bv(e[d])||(l=e[d++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(bv(e[d])){const I=e[d];e[d]=(t=I.next)===null||t===void 0?void 0:t.bind(I),e[d+1]=(s=I.error)===null||s===void 0?void 0:s.bind(I),e[d+2]=(o=I.complete)===null||o===void 0?void 0:o.bind(I)}let m,v,E;if(r instanceof Rt)v=$r(r.firestore,ca),E=Xc(r._key.path),m={next:I=>{e[d]&&e[d](Pw(v,r,I))},error:e[d+1],complete:e[d+2]};else{const I=$r(r,Ea);v=$r(I.firestore,ca),E=I._query;const x=new Rw(v);m={next:L=>{e[d]&&e[d](new ea(v,x,I,L))},error:e[d+1],complete:e[d+2]},vP(r._query)}return function(x,L,B,$){const M=new mw($),Q=new ow(L,M,B);return x.asyncQueue.enqueueAndForget(async()=>sw(await bf(x),Q)),()=>{M.Ou(),x.asyncQueue.enqueueAndForget(async()=>iw(await bf(x),Q))}}(Ep(v),E,f,m)}function Aw(r,e){return function(s,o){const l=new hi;return s.asyncQueue.enqueueAndForget(async()=>GA(await sP(s),o,l)),l.promise}(Ep(r),e)}function Pw(r,e,t){const s=t.docs.get(e._key),o=new Rw(r);return new Ji(r,o,e._key,s,new dl(t.hasPendingWrites,t.fromCache),e.converter)}function wc(...r){return new Tp("arrayUnion",r)}function bw(...r){return new xp("arrayRemove",r)}(function(e,t=!0){(function(o){ya=o})(ma),ta(new Xi("firestore",(s,{instanceIdentifier:o,options:l})=>{const d=s.getProvider("app").getImmediate(),f=new ca(new gC(s.getProvider("auth-internal")),new _C(d,s.getProvider("app-check-internal")),function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new pe(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(v.options.projectId,E)}(d,o),d);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),ci(Dy,Vy,e),ci(Dy,Vy,"esm2017")})();const SP=({message:r,type:e})=>{if(!r)return null;const t=e==="success"?"bg-green-100":"bg-red-100",s=e==="success"?"text-green-700":"text-red-700";return y.jsx("div",{className:`p-3 rounded-md ${t} ${s} my-4 message-box-fade show`,children:r})},CP=({onClose:r})=>{var nt;const{signUpWithEmailPassword:e,signInWithEmailPassword:t,signInWithApple:s,linkAnonymousWithEmailPassword:o,linkAnonymousWithApple:l,auth:d,currentUserId:f,signInWithGoogle:m,db:v,appId:E}=D.useContext(Bl),[I,x]=D.useState(!0),[L,B]=D.useState(""),[$,M]=D.useState(""),[Q,te]=D.useState(""),[J,_e]=D.useState(""),[ce,Ie]=D.useState(""),[P,C]=D.useState(""),[S,b]=D.useState(0),[N,O]=D.useState(null),[R,Ze]=D.useState(""),[ot,ut]=D.useState(!1),[le,G]=D.useState(!1),[ge,oe]=D.useState(""),[j,K]=D.useState(""),[ve,Ce]=D.useState(""),[ke,Ne]=D.useState(""),[Be,Ue]=D.useState(""),[je,Qe]=D.useState(""),[wt,ue]=D.useState(""),re=D.useRef(null),de=D.useRef(null),Me=D.useCallback((ie,Se)=>{Ie(ie),C(Se),setTimeout(()=>{Ie(""),C("")},5e3)},[]),Kt=(nt=d==null?void 0:d.currentUser)==null?void 0:nt.isAnonymous,Qt=D.useCallback(async ie=>{if(console.log("checkEmailExists: Checking email:",ie),console.log("checkEmailExists: Current auth object:",d),!d)return console.error("Firebase Auth not initialized for email check."),!1;try{const Se=await z1(d,ie);return console.log("checkEmailExists: Sign-in methods for email:",Se),Se.length>0}catch(Se){return console.error("Error checking email existence:",Se),console.error("Full error object:",JSON.stringify(Se,null,2)),!1}},[d]);D.useEffect(()=>{if(!I&&S===2&&d&&!re.current){if(console.log("AuthModal: Initializing reCAPTCHA Verifier..."),typeof window.grecaptcha>"u"||!window.grecaptcha.ready){console.warn("AuthModal: grecaptcha script not fully loaded yet. Retrying initialization...");const ie=setTimeout(()=>{b(Se=>Se)},500);return()=>clearTimeout(ie)}window.grecaptcha.ready(()=>{if(re.current){console.log("AuthModal: reCAPTCHA Verifier already exists, skipping re-initialization.");return}console.log("AuthModal: grecaptcha is ready. Creating RecaptchaVerifier...");try{const ie=new H0(d,"recaptcha-container",{size:"invisible",callback:Se=>{console.log("AuthModal: reCAPTCHA callback fired (solved):",Se)},"expired-callback":()=>{console.log("AuthModal: reCAPTCHA expired."),Me("Verification expired. Please try again.","error"),O(null)},"error-callback":Se=>{console.error("AuthModal: reCAPTCHA error callback:",Se),Me("Verification error. Please try again.","error"),O(null)}});re.current=ie,ie.render().then(Se=>{console.log("AuthModal: reCAPTCHA rendered with widget ID:",Se),de.current=Se}).catch(Se=>{console.error("AuthModal: Error rendering reCAPTCHA:",Se),Me("Failed to initialize verification. Please refresh.","error"),re.current=null,de.current=null})}catch(ie){console.error("AuthModal: Error creating RecaptchaVerifier instance:",ie),Me("Failed to initialize verification. Check console.","error")}})}return()=>{re.current&&(console.log("AuthModal: Cleaning up reCAPTCHA Verifier on component unmount."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),re.current=null,de.current=null)}},[I,S,d,Me]);const En=D.useCallback(async()=>{if(Ie(""),Ne(""),ue(""),!je.trim()){ue("Please enter a username.");return}if(!J.trim()){Ne("Please enter your phone number.");return}if(!J.startsWith("+")||J.trim().length<10){Ne('Phone number must start with a "+" and include country code (e.g., +11234567890).');return}if(!d){Me("Authentication service not ready.","error");return}if(!re.current){Me("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available.");return}ut(!0);try{re.current.size==="invisible"&&de.current!==null&&await window.grecaptcha.execute(de.current);const ie=await gS(d,J,re.current);O(ie),Me("Verification code sent! Please check your phone.","success")}catch(ie){console.error("Error sending OTP:",ie);let Se="Failed to send code. Please try again.";ie.code==="auth/invalid-phone-number"?Se="Invalid phone number format. Please ensure it includes the country code (e.g., +11234567890).":ie.code==="auth/too-many-requests"?Se="Too many requests. Please try again later.":ie.code==="auth/captcha-check-failed"&&(Se="Security check failed. Please try again."),Me(Se,"error"),O(null)}finally{ut(!1)}},[J,je,d,Me]),Jn=D.useCallback(async()=>{if(Ie(""),Ue(""),!R.trim()){Ue("Please enter the verification code.");return}if(!N){Me("No verification request found. Please send the code first.","error");return}G(!0);try{let ie;I?ie=await N.confirm(R):L&&$?ie=await L0(d,L,$):ie=await N.confirm(R);const Se=ie.user;if(Se&&je.trim()&&(await $1(Se,{displayName:je.trim()}),console.log("User display name updated after sign-up/link:",je)),v&&Se&&E)try{await Go(Qn(v,"artifacts",E,"users",Se.uid),{email:Se.email||null,phoneNumber:J,username:je,createdAt:new Date},{merge:!0}),console.log("User profile with phone number and username info saved.")}catch(Xn){console.error("Error saving user phone number and username info:",Xn),Me("Account created, but failed to save phone number and username.","warning")}else console.warn("Firestore DB, user, or appId not available, phone number and username info not saved.");Me("Account created and phone number verified!","success"),re.current&&(window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),re.current=null,de.current=null),r()}catch(ie){console.error("Error verifying OTP or creating user:",ie);let Se="Failed to verify code. Please try again.";ie.code==="auth/invalid-verification-code"?Se="Invalid verification code. Please check the code and try again.":ie.code==="auth/code-expired"?Se="The verification code has expired. Please resend the code.":ie.message==="No reCAPTCHA clients."?Se="Security verification failed. Please try to send the code again.":ie.code==="auth/email-already-in-use"&&(Se="This email is already registered. Please sign in or use a different email."),Me(Se,"error"),Ue("Verification failed. Please try again.")}finally{G(!1)}},[R,N,v,E,J,je,Me,r,d,I,L,$]),kt=D.useCallback(async ie=>{if(ie.preventDefault(),Ie(""),oe(""),K(""),Ce(""),Ne(""),Ue(""),ue(""),console.log("handleNextStep: Current step BEFORE update:",S,"isLogin:",I),S===0){if(!L){oe("Please enter your email.");return}if(!je.trim()){ue("Please enter a username.");return}if(!I){const Se=await Qt(L);if(console.log("handleNextStep: Email exists check result:",Se),Se){oe("This email is already registered. Please sign in or use a different email.");return}}b(Se=>Se+1)}else if(S===1){if(!$){K("Please enter your password.");return}if($.length<6){K("Password must be at least 6 characters long.");return}if(!Q){Ce("Please confirm your password.");return}if($!==Q){Ce("Passwords do not match.");return}b(Se=>Se+1)}else if(S===2){if(!J.trim()){Ne("Please enter your phone number.");return}if(!N){if(!re.current){Me("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available in handleNextStep.");return}await En()}}console.log("handleNextStep: Current step AFTER update:",S)},[L,$,Q,J,je,S,I,Qt,En,N,Me]),Yt=D.useCallback(()=>{Ie(""),oe(""),K(""),Ce(""),Ne(""),Ue(""),ue(""),console.log("handlePrevStep: Current step BEFORE update:",S),S>0&&(b(ie=>ie-1),O(null),Ze(""),S===2&&re.current&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current)),console.log("handlePrevStep: Current step AFTER update:",S)},[S]),Mn=async ie=>{if(ie.preventDefault(),Ie(""),oe(""),K(""),Ce(""),Ne(""),Ue(""),ue(""),I){if(!L){oe("Please enter your email.");return}if(!$){K("Please enter your password.");return}try{Kt?await o(L,$):await t(L,$),re.current&&(window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),re.current=null,de.current=null)}catch(Se){console.error("Unexpected error during sign-in process:",Se),Me(`An unexpected error occurred: ${Se.message}`,"error")}}else if(S<2)await kt(ie);else if(S===2)if(N)await Jn();else{if(!re.current){Me("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available in handleAuthAction.");return}await En()}},In=async()=>{await m()&&(r(),re.current&&(window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),re.current=null,de.current=null))},Tn=D.useCallback(()=>{x(ie=>!ie),B(""),M(""),te(""),_e(""),Qe(""),Ie(""),C(""),b(0),O(null),Ze(""),oe(""),K(""),Ce(""),Ne(""),Ue(""),ue(""),re.current&&(console.log("AuthModal: Clearing and deleting reCAPTCHA Verifier on mode toggle."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),re.current=null,de.current=null)},[]),pn=D.useCallback(()=>{re.current&&(console.log("AuthModal: Cleaning up reCAPTCHA Verifier on modal close."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&de.current!==null&&window.grecaptcha.reset(de.current),re.current=null,de.current=null),r()},[r]);return y.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4 font-inter",children:y.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md relative animate-scale-in",children:[y.jsx("button",{onClick:pn,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold transition-transform duration-200 transform hover:scale-110",children:"×"}),y.jsx("h2",{className:"text-3xl font-extrabold text-gray-800 mb-6 text-center",children:I?"Sign In":"Sign Up"}),ce&&y.jsx("div",{className:`p-3 mb-4 rounded-md text-center text-sm font-medium
                        ${P==="error"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ce}),y.jsxs("form",{onSubmit:Mn,className:"space-y-4 flex flex-col items-center",children:[y.jsx("div",{className:"overflow-hidden w-full",children:y.jsxs("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${I?0:S*100}%)`},children:[I&&y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Email"}),y.jsx("input",{type:"email",id:"email",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${ge?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com",value:L,onChange:ie=>{B(ie.target.value),oe("")}}),ge&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:ge})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Password"}),y.jsx("input",{type:"password",id:"password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${j?"border-red-500":"border-gray-300"}`,placeholder:"********",value:$,onChange:ie=>{M(ie.target.value),K("")}}),j&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:j})]})]}),!I&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Email"}),y.jsx("input",{type:"email",id:"email",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${ge?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com",value:L,onChange:ie=>{B(ie.target.value),oe("")}}),ge&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:ge})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"username-email-signup",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Username"}),y.jsx("input",{type:"text",id:"username-email-signup",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${wt?"border-red-500":"border-gray-300"}`,placeholder:"Choose a username",value:je,onChange:ie=>{Qe(ie.target.value),ue("")}}),wt&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:wt})]})]}),y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Password"}),y.jsx("input",{type:"password",id:"password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${j?"border-red-500":"border-gray-300"}`,placeholder:"********",value:$,onChange:ie=>{M(ie.target.value),K("")}}),j&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:j})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"confirm-password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Confirm Password"}),y.jsx("input",{type:"password",id:"confirm-password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${ve?"border-red-500":"border-gray-300"}`,placeholder:"********",value:Q,onChange:ie=>{te(ie.target.value),Ce("")}}),ve&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:ve})]})]}),y.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[S===2&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"username-phone-signup",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Username"}),y.jsx("input",{type:"text",id:"username-phone-signup",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${wt?"border-red-500":"border-gray-300"}`,placeholder:"Choose a username",value:je,onChange:ie=>{Qe(ie.target.value),ue("")},disabled:ot||N}),wt&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:wt})]}),N?y.jsxs("div",{className:"relative",children:[y.jsx("label",{htmlFor:"otp",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Enter Verification Code"}),y.jsx("input",{type:"text",id:"otp",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${Be?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 123456",value:R,onChange:ie=>{Ze(ie.target.value),Ue("")},disabled:le}),Be&&y.jsx("p",{className:"text-red-500 text-xs mt-1 text-left",children:Be}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-left",children:["Code sent to ",J,"."]}),y.jsx("button",{type:"button",onClick:En,disabled:ot||le,className:"w-full bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105 mt-2",children:ot?"Sending...":"Resend Code"})]}):y.jsxs("div",{className:"relative",children:[y.jsx("label",{htmlFor:"phoneNumber",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Phone Number"}),y.jsx("input",{type:"tel",id:"phoneNumber",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${ke?"border-red-500":"border-gray-300"}`,placeholder:"e.g., +11234567890",value:J,onChange:ie=>{_e(ie.target.value),Ne("")},disabled:ot}),y.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"For human verification purposes only! Include country code (e.g., +1)."}),y.jsx("div",{id:"recaptcha-container",className:"mt-4"})]})]})]})]})}),!I&&y.jsx("div",{className:"flex justify-center space-x-2 mt-4",children:[0,1,2].map(ie=>y.jsx("span",{className:`block w-3 h-3 rounded-full transition-colors duration-300
                                        ${S===ie?"bg-[#CC5500] scale-125":"bg-gray-300 hover:bg-gray-400 cursor-pointer"}`,onClick:()=>b(ie),role:"button",tabIndex:"0","aria-label":`Go to step ${ie+1}`},ie))}),y.jsxs("div",{className:"flex justify-between items-center mt-4 w-full px-4",children:[!I&&S>0&&y.jsx("button",{type:"button",onClick:Yt,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105 min-w-[100px]",children:"Previous"}),!I&&S===0&&y.jsx("div",{className:"flex-grow"}),y.jsx("button",{type:"submit",className:`font-bold py-3 px-6 rounded-full transition duration-300 shadow-lg hover:shadow-xl transform hover:scale-105
                                ${I?"bg-[#FFDEB5] text-gray-800 hover:bg-[#FFC982] w-full":"bg-[#CC5500] text-white hover:bg-[#A84500] w-auto ml-auto"}`,disabled:I&&(ot||le)||!I&&S===2&&!N&&ot||!I&&S===2&&N&&le,children:I?"Sign In":S===0||S===1?"Next":S===2&&!N?ot?"Sending Code...":"Send Code":le?"Verifying...":"Verify Code"})]})]}),y.jsxs("div",{className:"mt-6 text-center",children:[y.jsxs("p",{className:"text-gray-600",children:[I?"Don't have an account? ":"Already have an account? ",y.jsx("button",{onClick:Tn,className:"text-[#CC5500] hover:underline font-semibold transition-colors duration-200",children:I?"Sign Up":"Sign In"})]}),I&&y.jsx("button",{onClick:()=>Me("Password reset functionality not yet implemented.","info"),className:"text-[#CC5500] hover:underline text-sm mt-2 transition-colors duration-200",children:"Forgot Password?"})]}),y.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6 space-y-4",children:[y.jsx("p",{className:"text-center text-gray-600",children:"Or continue with"}),y.jsx("div",{className:"flex justify-center gap-4",children:y.jsxs("button",{onClick:In,className:"flex items-center justify-center w-1/2 bg-white border border-gray-300 text-gray-800 py-3 px-4 rounded-full shadow-md hover:bg-gray-50 transition duration-300 transform hover:scale-105",children:[y.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{d:"M12.0003 4.75C14.0273 4.75 15.8053 5.438 17.1523 6.694L18.9643 4.882C17.0183 3.033 14.6063 2 12.0003 2C8.87533 2 6.07133 3.453 4.38633 5.859L6.04633 7.153C6.88233 5.761 8.39633 4.75 12.0003 4.75Z",fill:"#EA4335"}),y.jsx("path",{d:"M23.4999 12.272C23.4999 11.492 23.4249 10.721 23.2999 9.969H12.2009V14.51H18.7959C18.5919 15.534 17.9739 16.395 17.1199 16.989L18.7959 18.293C19.8669 17.335 20.6699 16.035 21.1899 14.51L23.4999 12.272Z",fill:"#4285F4"}),y.jsx("path",{d:"M6.04625 16.847L4.38625 18.141C5.97125 20.547 8.87525 22 12.0003 22C14.5943 22 17.0003 20.967 18.9353 19.14L17.1433 17.714C15.8053 18.528 14.0273 19.002 12.0003 19.002C8.39633 19.002 6.88233 17.991 6.04625 16.847Z",fill:"#34A853"}),y.jsx("path",{d:"M4.70725 14.51L2.39725 16.75C1.61525 15.226 1.12725 13.626 1.12725 12C1.12725 10.374 1.61525 8.774 2.39725 7.25L4.70725 9.488C4.24925 10.492 3.99925 11.25 3.99925 12C3.99925 12.75 4.24925 13.508 4.70725 14.51Z",fill:"#FBBC04"})]}),"Google"]})})]})]})})},RP=["fuck","shit","asshole","bitch","cunt","damn","hell"],Bc=250,AP=["Certified Nursing Assistant (CNA)","Licensed Practical Nurse (LPN) / Licensed Vocational Nurse (LVN)","Registered Nurse (RN)","Nurse Practitioner (NP)","Family Nurse Practitioner (FNP)","Adult-Gerontology Nurse Practitioner (AGNP)","Pediatric Nurse Practitioner (PNP)","Psychiatric Mental Health Nurse Practitioner (PMHNP)","Acute Care Nurse Practitioner (ACNP)","Women's Health Nurse Practitioner (WHNP)","Certified Registered Nurse Anesthetist (CRNA)","Clinical Nurse Specialist (CNS)","Certified Nurse-Midwife (CNM)","Cardiac Nurse","Critical Care Nurse (ICU Nurse)","Emergency Nurse (ER Nurse)","Oncology Nurse","Pediatric Nurse","Labor and Delivery Nurse","Neonatal Intensive Care Unit (NICU) Nurse","Medical-Surgical Nurse","Geriatric Nurse","Psychiatric/Mental Health Nurse","Home Health Nurse","Public Health Nurse","School Nurse","Perioperative Nurse (Operating Room Nurse)","Rehabilitation Nurse","Hospice Nurse / Palliative Care Nurse","Forensic Nurse","Travel Nurse","Infusion Nurse","Nephrology Nurse","Diabetic Nurse","Dermatology Nurse","Gastroenterology Nurse","Orthopedic Nurse","Urology Nurse","Wound Care Nurse","Ostomy Care Nurse","Informatics Nurse","Research Nurse","Case Management Nurse","Nurse Educator","Nurse Administrator/Manager","Occupational Health Nurse","Flight Nurse / Transport Nurse","Correctional Nurse","IV Therapy Nurse","Transplant Nurse","Genetics Nurse","Pain Management Nurse","Military Nurse","Ambulatory Care Nurse","Endoscopy Nurse","Plastic Surgery Nurse","Rural Health Nurse","Parish Nurse / Faith Community Nurse","Camp Nurse","Hyperbaric Nurse","Legal Nurse Consultant","Integrative Health Nurse"],Bo=["Select your nursing field...",...AP.sort()];function Dv(r){const e=r.toLowerCase();for(const t of RP)if(e.includes(t))return{isValid:!1,message:"Content contains inappropriate language."};return r.length>Bc?{isValid:!1,message:`Content exceeds ${Bc} character limit.`}:{isValid:!0,message:"Content is valid."}}let PP=class extends si.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ReviewsHubPage ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-120px)] p-4 bg-red-100 text-red-800 rounded-lg shadow-md",children:[y.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong."}),y.jsx("p",{className:"text-lg text-center mb-2",children:"We're sorry, but there was an error loading this section."}),y.jsx("p",{className:"text-sm text-red-600 text-center",children:this.state.error&&this.state.error.toString()}),y.jsxs("details",{className:"mt-4 text-left text-sm p-2 bg-red-50 rounded-md",children:[y.jsx("summary",{className:"font-semibold cursor-pointer",children:"Error Details"}),y.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words text-red-700",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),y.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"mt-6 px-6 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-colors",children:"Try Again"})]}):this.props.children}};const kw=()=>{const{db:r,auth:e,currentUserId:t,currentUserIsAnonymous:s,appId:o,showMessage:l,setShowAuthModal:d}=D.useContext(Bl),[f,m]=D.useState(""),[v,E]=D.useState([]),[I,x]=D.useState([]),[L,B]=D.useState(!0),[$,M]=D.useState(!1),[Q,te]=D.useState(!1),[J,_e]=D.useState(20),[ce,Ie]=D.useState(null),[P,C]=D.useState(""),[S,b]=D.useState([]),[N,O]=D.useState([]),[R,Ze]=D.useState(!1),[ot,ut]=D.useState(!1),[le,G]=D.useState(null),[ge,oe]=D.useState([]),[j,K]=D.useState(!1),[ve,Ce]=D.useState(!1),[ke,Ne]=D.useState(""),[Be,Ue]=D.useState(0),[je,Qe]=D.useState(Bo[0]),[wt,ue]=D.useState(""),[re,de]=D.useState([]),[Me,Kt]=D.useState(!1),[Qt,En]=D.useState(!1),[Jn,kt]=D.useState({}),[Yt,Mn]=D.useState({}),[In,Tn]=D.useState({}),[pn,nt]=D.useState(!1),[ie,Se]=D.useState(""),[Xn,hr]=D.useState(""),[fr,Zn]=D.useState(!1),[Pr,xs]=D.useState(""),[br,Ss]=D.useState(""),[Yr,xn]=D.useState(!0),kr=si.useRef(null),Sn=si.useRef(null),mn=si.useRef(null),Fn=si.useRef(null);console.log("ReviewsHubPage: Component rendered."),D.useEffect(()=>{let q=()=>{};if(console.log("ReviewsHubPage: useEffect for hospital onSnapshot. DB, AppId Ready:",!!r,!!o),r&&o){B(!0),M(!1);const De=cl(r,`artifacts/${o}/public/data/hospitals`);q=_c(De,Re=>{console.log("ReviewsHubPage: onSnapshot triggered for hospitals.");const Le=[];Re.forEach(we=>{const We=we.data();We.name&&Le.push({id:we.id,name:We.name,location:We.location||""})}),Le.sort((we,We)=>we.name.localeCompare(We.name)),console.log("ReviewsHubPage: Fetched Hospitals from snapshot:",Le.length),E(Le),B(!1),M(Le.length===0)},Re=>{console.error("ReviewsHubPage: Error fetching hospitals with onSnapshot:",Re),l("Error loading hospitals.","error"),B(!1),M(!0)})}else B(!0),E([]),x([]),M(!1),te(!1);return()=>{console.log("ReviewsHubPage: Cleaning up hospital onSnapshot listener."),q()}},[r,o,l]);const Cs=D.useCallback(async q=>{if(q.preventDefault(),!t||s){l("You must be logged in to add a hospital. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready to add a hospital.","error");return}if(!ie.trim()||!Xn.trim()){l("Please enter both hospital name and location.","error");return}try{const Re={id:Date.now().toString(),name:ie.trim(),location:Xn.trim()};E(we=>[...we,Re].sort((We,at)=>We.name.localeCompare(at.name))),Se(""),hr(""),nt(!1);const Le=Qn(cl(r,`artifacts/${o}/public/data/hospitals`));await Go(Le,{name:Re.name,location:Re.location,createdAt:new Date().toISOString(),createdBy:t}),l("Hospital added successfully! You can now add doctors to it.","success"),mn.current&&setTimeout(()=>{const we=document.querySelector(`button.bg-gray-100[data-hospital-name="${Re.name}"]`);we&&we.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(De){console.error("ReviewsHubPage: Error adding hospital:",De),l(`Error adding hospital: ${De.message}`,"error"),E(Re=>Re.filter(Le=>Le.id!==tempId))}},[t,s,r,o,ie,Xn,l,d]);D.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering hospitals triggered. HospitalInput:",f,"CurrentDisplayCount:",J);const q=f.trim().toLowerCase(),De=v.filter(Re=>Re.name.toLowerCase().includes(q)||Re.location&&Re.location.toLowerCase().includes(q));x(De.slice(0,J)),te(De.length>J),M(De.length===0&&!L)},[v,f,J,L]);const Un=D.useCallback(()=>{_e(q=>q+20)},[]),xi=D.useCallback(async q=>{if(console.log("ReviewsHubPage: handleHospitalSelect called for hospital:",q.name),Ie(q),console.log("ReviewsHubPage: Populating hospitalInput with:",q.name),m(q.name),C(""),Ze(!0),ut(!1),b([]),O([]),Zn(!1),!r||!o||!q.id){l("Firebase or hospital ID missing for fetching doctors.","error"),Ze(!1),ut(!0);return}const De=cl(r,`artifacts/${o}/public/data/hospitals/${q.id}/doctors`);return _c(De,Le=>{console.log("ReviewsHubPage: onSnapshot triggered for doctors.");const we=[];Le.forEach(rt=>{const qe=rt.data(),At=qe.ratings||[],ct=At.length>0?At.reduce((Ps,pt)=>Ps+(pt.stars||0),0)/At.length:0;qe.name&&we.push({id:rt.id,hospitalId:q.id,...qe,averageRating:ct,numReviews:At.length})}),we.sort((rt,qe)=>rt.name.localeCompare(qe.name)),console.log("ReviewsHubPage: Fetched Doctors from snapshot for selected hospital:",we.length),b(we),Ze(!1),ut(we.length===0);const We=P.trim().toLowerCase(),at=we.filter(rt=>rt.name.toLowerCase().includes(We)||rt.specialty&&rt.specialty.toLowerCase().includes(We));O(at)},Le=>{console.error("ReviewsHubPage: Error fetching doctors with onSnapshot:",Le),l("Error loading doctors.","error"),Ze(!1),ut(!0)})},[r,o,l,P]);D.useEffect(()=>{ce&&kr.current&&document.activeElement!==document.getElementById("hospital-input")&&(console.log("ReviewsHubPage: Scrolling useEffect triggered for doctor selection section."),setTimeout(()=>{requestAnimationFrame(()=>{kr.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[ce]),D.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering doctors triggered. DoctorInput:",P);const q=P.trim().toLowerCase(),De=S.filter(Re=>Re.name.toLowerCase().includes(q)||Re.specialty&&Re.specialty.toLowerCase().includes(q));O(De)},[S,P]);const Jr=D.useCallback(async q=>{if(q.preventDefault(),!t||s){l("You must be logged in to add a doctor. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!ce||!ce.id){l("Please select a hospital first to add a doctor.","error");return}if(!Pr.trim()||!br.trim()){l("Please enter both doctor name and specialty.","error");return}try{const Re={id:Date.now().toString(),hospitalId:ce.id,name:Pr.trim(),specialty:br.trim(),ratings:[],averageRating:0,numReviews:0};b(we=>[...we,Re].sort((We,at)=>We.name.localeCompare(at.name))),xs(""),Ss(""),Zn(!1);const Le=Qn(cl(r,`artifacts/${o}/public/data/hospitals/${ce.id}/doctors`));await Go(Le,{name:Re.name,specialty:Re.specialty,ratings:[],createdAt:new Date().toISOString(),createdBy:t}),l(`Dr. ${Re.name} added successfully to ${ce.name}!`,"success"),Fn.current&&setTimeout(()=>{const we=document.querySelector(`button.bg-gray-100[data-doctor-name="${Re.name}"]`);we&&we.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(De){console.error("ReviewsHubPage: Error adding doctor:",De),l(`Error adding doctor: ${De.message}`,"error"),b(Re=>Re.filter(Le=>Le.id!==tempId))}},[t,s,r,o,ce,Pr,br,l,d]),Si=D.useCallback(async q=>{console.log("ReviewsHubPage: handleDoctorSelect called for doctor:",q.name),G(q),C(q.name),K(!0),Ce(!1),xn(!0),Sn.current&&(console.log("ReviewsHubPage: Scrolling to doctor reviews display section."),setTimeout(()=>{requestAnimationFrame(()=>{Sn.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[]);D.useEffect(()=>{let q=()=>{};if(le&&r&&o){const De=Qn(r,`artifacts/${o}/public/data/hospitals/${le.hospitalId}/doctors/${le.id}`);console.log("ReviewsHubPage: Setting up onSnapshot for doctorDocRef:",De.path),q=_c(De,Re=>{var Le;if(console.log("ReviewsHubPage: onSnapshot triggered for doctorDocRef."),K(!1),!Re.exists()||!((Le=Re.data())!=null&&Le.ratings)||Re.data().ratings.length===0)console.log("ReviewsHubPage: No reviews or document data for this doctor found in snapshot."),Ce(!0),oe([]);else{Ce(!1);const We=Re.data().ratings||[];console.log("ReviewsHubPage: Fetched reviews from snapshot:",We.length),We.sort((rt,qe)=>{const At=pt=>pt&&typeof pt.toDate=="function"?pt.toDate().getTime():pt instanceof Date?pt.getTime():typeof pt=="string"?new Date(pt).getTime():0,ct=At(rt.date);return At(qe.date)-ct});const at=We.map(rt=>({...rt,id:rt.id||crypto.randomUUID(),date:rt.date&&typeof rt.date.toDate=="function"?rt.date.toDate():new Date(rt.date),comments:rt.comments?rt.comments.map(qe=>({...qe,date:qe.date&&typeof qe.date.toDate=="function"?qe.date.toDate():new Date(qe.date)})):[],likes:rt.likes||[]}));oe(at),console.log("ReviewsHubPage: Reviews state updated. Current reviews count:",at.length)}},Re=>{console.error("ReviewsHubPage: Error fetching reviews with onSnapshot:",Re),l("Error loading reviews.","error"),K(!1),Ce(!0)})}else oe([]),Ce(!1),K(!1);return()=>{console.log("ReviewsHubPage: Cleaning up onSnapshot listener."),q()}},[le,r,o,l]);const pr=D.useCallback(async()=>{var De,Re;if(console.log("ReviewsHubPage: handleSubmitReview called."),!t||s){l("You must be logged in to submit a review. Please sign up or log in.","error"),d(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!ce||!le){l("Please select a hospital and doctor before submitting a review.","error");return}if(je===Bo[0]||je.trim()===""){l("Please select or type your nursing field.","error");return}const q=Dv(ke);if(!q.isValid){l(q.message,"error");return}console.log("ReviewsHubPage: auth.currentUser?.displayName at submission:",(De=e.currentUser)==null?void 0:De.displayName);try{const Le=Qn(r,`artifacts/${o}/public/data/hospitals/${ce.id}/doctors/${le.id}`),we=crypto.randomUUID(),We=new Date,at={id:we,comment:ke,reviewerId:((Re=e.currentUser)==null?void 0:Re.displayName)||`RN-${t.substring(0,5)}`,date:We,hospitalName:ce.name,doctorName:le.name,nursingField:je,comments:[],likes:[]};console.log("ReviewsHubPage: Submitting new review:",at),await hs(Le,{ratings:wc(at)});const rt=Qn(r,`artifacts/${o}/users/${t}/myReviews/${we}`);await Go(rt,{...at,userId:t,hospitalId:ce.id,doctorId:le.id}),Ne(""),Ue(0),Qe(Bo[0]),ue(""),l("Review submitted successfully!","success"),console.log("ReviewsHubPage: Review submitted successfully!"),xn(!0)}catch(Le){console.error("ReviewsHubPage: Error adding review: ",Le),l(`Error submitting review: ${Le.message}`,"error")}},[t,s,ce,le,ke,Be,je,r,o,l,d,e]),Rs=D.useCallback(async(q,De)=>{var Le;if(console.log("ReviewsHubPage: handleAddCommentToReview called for reviewId:",q),!t||s){l("You must be logged in to add a comment. Please sign up or log in.","error"),d(!0);return}if(De.trim()===""){l("Comment cannot be empty.","error");return}if(!ce||!le){l("Hospital or doctor not selected.","error");return}const Re=Dv(De);if(!Re.isValid){l(Re.message,"error");return}try{const we=Qn(r,`artifacts/${o}/public/data/hospitals/${ce.id}/doctors/${le.id}`),We={text:De,userId:((Le=e.currentUser)==null?void 0:Le.displayName)||`RN-${t.substring(0,5)}`,date:new Date},at=await Ki(we);if(at.exists()){let qe=[...at.data().ratings||[]];const At=qe.findIndex(ct=>ct.id===q);if(At!==-1){qe[At].comments=qe[At].comments||[],qe[At].comments.push(We),await hs(we,{ratings:qe}),console.log("ReviewsHubPage: Comment added successfully to doctor review.");const ct=Qn(r,`artifacts/${o}/users/${t}/myReviews/${q}`);if((await Ki(ct)).exists())await hs(ct,{comments:wc(We)}),console.log("ReviewsHubPage: Comment added successfully to existing user review.");else{const pt=Qn(r,`artifacts/${o}/public/data/hospitals/${le.hospitalId}/doctors/${le.id}`),Xr=await Ki(pt);if(Xr.exists()){const bs=(Xr.data().ratings||[]).find(ao=>ao.id===q);bs?(await Go(ct,{...bs,userId:t,hospitalId:le.hospitalId,doctorId:le.id,comments:[We]}),console.log("ReviewsHubPage: New user review document created with comment.")):console.warn("ReviewsHubPage: Could not find relevant review in public data to create user review entry.")}else console.warn("ReviewsHubPage: Public doctor document not found when trying to create user review entry for comment.")}Mn(pt=>({...pt,[q]:""})),Tn(pt=>({...pt,[q]:"Comment posted successfully!"})),setTimeout(()=>{kt(pt=>({...pt,[q]:!1})),Tn(pt=>({...pt,[q]:""}))},1500)}else console.error("ReviewsHubPage: Error: Review not found by ID in doctor ratings array.",q),l("Failed to post comment: Review not found.","error")}else console.error("ReviewsHubPage: Doctor document not found for comment addition:",le.id),l("Failed to post comment: Doctor not found.","error")}catch(we){console.error("ReviewsHubPage: Error adding comment to review: ",we),l(`Error posting comment: ${we.message}`,"error")}},[t,s,ce,le,r,o,l,d,e]),Et=D.useCallback(async q=>{if(console.log("ReviewsHubPage: handleLikeReview called for reviewId:",q),!t||s){l("You must be logged in to like a review. Please sign up or log in.","info"),d(!0);return}if(!r||!o||!ce||!le){l("Firebase or selected doctor/hospital data not ready.","error");return}try{const De=Qn(r,`artifacts/${o}/public/data/hospitals/${ce.id}/doctors/${le.id}`),Re=await Ki(De);if(Re.exists()){let we=[...Re.data().ratings||[]];const We=we.findIndex(at=>at.id===q);if(We!==-1){let at=we[We].likes||[];const rt=at.includes(t);rt?(we[We].likes=at.filter(ct=>ct!==t),l("Review unliked.","info")):(we[We].likes=[...at,t],l("Review liked!","success")),await hs(De,{ratings:we}),console.log("ReviewsHubPage: Doctor document updated with new like status.");const qe=Qn(r,`artifacts/${o}/users/${t}/myReviews/${q}`);if((await Ki(qe)).exists())rt?await hs(qe,{likes:bw(t)}):await hs(qe,{likes:wc(t)}),console.log("ReviewsHubPage: User private review updated with new like status.");else{const ct=we[We];await Go(qe,{...ct,userId:t,hospitalId:ce.id,doctorId:le.id,likes:ct.likes}),console.log("ReviewsHubPage: New user review document created for liked review.")}}else console.error("ReviewsHubPage: Error: Review not found by ID in doctor ratings array for liking.",q),l("Failed to process like: Review not found.","error")}else console.error("ReviewsHubPage: Doctor document not found for liking:",le.id),l("Failed to process like: Doctor not found.","error")}catch(De){console.error("ReviewsHubPage: Error liking/unliking review: ",De),l(`Error processing like: ${De.message}`,"error")}},[t,s,r,o,ce,le,l,d]);D.useCallback(()=>{if(!t||s){l("You must be logged in to write a review. Please sign up or log in.","error"),d(!0);return}if(En(!0),xn(!1),Sn.current){const q=Sn.current.querySelector("#review-submission-form-container");q&&q.scrollIntoView({behavior:"smooth",block:"start"})}},[t,s,l,d]),D.useCallback(()=>{En(!1),xn(!0),Sn.current&&Sn.current.scrollIntoView({behavior:"smooth",block:"start"})},[]);const As=q=>{const De=q.target.value;if(ue(De),Qe(De),De.length>0){const Re=Bo.filter(Le=>Le.toLowerCase().includes(De.toLowerCase())&&Le!==Bo[0]);de(Re),Kt(!0)}else de([]),Kt(!1),Qe(Bo[0])},zn=q=>{ue(q),Qe(q),Kt(!1),de([])};return y.jsx(PP,{children:y.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8 pt-20",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:[y.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:["Share Your RN",y.jsx("span",{className:"text-[#CC5500]",children:"Tea"}),"!"]}),y.jsxs("section",{id:"hospital-selection-section",className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[y.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Which hospital are you interested in?"}),y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[y.jsx("input",{type:"text",id:"hospital-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Search for a hospital...",value:f,onChange:q=>m(q.target.value)}),y.jsx("button",{id:"search-hospital-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Hospital"})]}),y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a hospital.","info"),d(!0)):nt(q=>!q)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:pn&&t&&!s?"Hide Add Hospital Form":y.jsxs(y.Fragment,{children:["or ",y.jsx("span",{className:"text-[#CC5500]",children:"Add Hospital"})]})}),pn&&(!t||s)&&y.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a hospital."}),pn&&t&&!s&&y.jsxs("form",{ref:mn,onSubmit:Cs,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[y.jsx("input",{type:"text",placeholder:"New Hospital Name",value:ie,onChange:q=>Se(q.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("input",{type:"text",placeholder:"Location (e.g., Boston, MA)",value:Xn,onChange:q=>hr(q.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Hospital"}),y.jsx("button",{type:"button",onClick:()=>nt(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]})]}),y.jsxs("div",{className:"mb-4 mt-8",children:[y.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Hospitals with reviews:"}),y.jsxs("div",{id:"hospitals-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[L&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading hospitals..."}),$&&!L&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No hospitals found yet. Be the first to add a review!"}),I.map(q=>y.jsx("button",{"data-hospital-name":q.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>xi(q),children:q.name},q.id))]}),Q&&y.jsx("button",{id:"load-more-hospitals-btn",className:"mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 w-full btn-hover-scale",onClick:Un,children:"Load More Hospitals"})]})]}),y.jsxs("section",{id:"doctor-selection-section",ref:kr,className:`bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${ce?"":"hidden"}`,children:[y.jsx("h2",{className:"2xl:text-3xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Select a doctor"}),y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[y.jsx("input",{type:"text",id:"doctor-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"e.g., Dr. Sarah Lee",value:P,onChange:q=>C(q.target.value)}),y.jsx("button",{id:"select-doctor-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Doctor"})]}),y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a doctor.","info"),d(!0)):Zn(q=>!q)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:fr&&t&&!s?"Hide Add Doctor Form":y.jsxs(y.Fragment,{children:["or ",y.jsx("span",{className:"text-[#CC5500]",children:"Add Doctor"})]})}),fr&&(!t||s)&&y.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a doctor."}),fr&&t&&!s&&y.jsxs("form",{ref:Fn,onSubmit:Jr,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[y.jsx("input",{type:"text",placeholder:"New Doctor Name",value:Pr,onChange:q=>xs(q.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("input",{type:"text",placeholder:"Specialty (e.g., Cardiologist)",value:br,onChange:q=>Ss(q.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),y.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Doctor"}),y.jsx("button",{type:"button",onClick:()=>Zn(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Doctors with reviews:"}),y.jsxs("div",{id:"doctors-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[R&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading doctors..."}),ot&&!R&&y.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No doctors found for this hospital yet."}),N.map(q=>y.jsx("button",{"data-doctor-name":q.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>Si(q),children:`${q.name} (${q.specialty||"N/A"}) - Avg. ${q.averageRating.toFixed(1)} ★ (${q.numReviews})`},q.id))]}),Q&&y.jsx("button",{id:"load-more-hospitals-btn",className:"mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 w-full btn-hover-scale",onClick:Un,children:"Load More Hospitals "})]})]}),y.jsxs("section",{id:"doctor-reviews-display",ref:Sn,className:`bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${le?"":"hidden"}`,children:[y.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:["Psst...Here's The Tea On ",y.jsx("span",{id:"display-selected-doctor-reviews",className:"text-[#CC5500] font-extrabold",children:le&&le.name?le.name:""})]}),t&&!s&&Yr&&y.jsx("div",{className:"text-center mb-6",children:y.jsxs("button",{onClick:()=>{!t||s?(l("Login or Sign Up to share your tea.","info"),d(!0)):xn(!1)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:["Have Some Tea? ",y.jsx("span",{className:"text-[#CC5500]",children:"Spill it!"})]})}),(!t||s)&&Yr&&y.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to share your tea."}),!Yr&&t&&!s&&y.jsxs("div",{id:"review-submission-form-container",className:"mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-gray-800",children:["Share Your Tea for ",y.jsx("span",{className:"text-[#CC5500]",children:le==null?void 0:le.name})]}),y.jsx("button",{onClick:()=>xn(!0),className:"text-gray-600 hover:text-[#CC5500] transition-colors",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]}),y.jsxs("div",{className:"mt-4",children:[y.jsxs("div",{className:"mb-4 relative",children:[y.jsx("label",{htmlFor:"nursing-field-input",className:"block text-gray-700 text-sm font-medium mb-2",children:"Which field of Nursing are you?"}),y.jsx("input",{type:"text",id:"nursing-field-input",className:"w-full p-3 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Start typing your nursing field...",value:wt,onChange:As,onFocus:()=>Kt(!0),onBlur:()=>setTimeout(()=>Kt(!1),100)}),Me&&re.length>0&&y.jsx("ul",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto mt-1",children:re.map((q,De)=>y.jsx("li",{className:"p-3 hover:bg-gray-100 cursor-pointer text-gray-800",onMouseDown:Re=>Re.preventDefault(),onClick:()=>zn(q),children:q},De))})]}),y.jsx("textarea",{id:"review-text",className:"w-full p-3 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-custom-beige",rows:"6",placeholder:"Share your experience or review here...",value:ke,onChange:q=>Ne(q.target.value),maxLength:Bc}),y.jsx("button",{id:"submit-review-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full btn-hover-scale",onClick:pr,children:"Submit Review"})]})]}),j&&y.jsx("p",{className:"text-gray-700 italic text-center","aria-live":"polite",children:"Loading reviews..."}),ve&&!j&&y.jsx("p",{className:"text-gray-700 italic text-center","aria-live":"polite",children:"No reviews found for this doctor yet. Be the first to add one!"}),ge.length>0&&y.jsx("div",{id:"reviews-list",className:"space-y-6",children:ge.map((q,De)=>{const Re={"@context":"https://schema.org","@type":"Review",itemReviewed:{"@type":"Physician",name:le==null?void 0:le.name,url:`https://www.myrntea.com/doctors/${le==null?void 0:le.id}`},author:{"@type":"Person",name:q.reviewerId},reviewBody:q.comment,datePublished:q.date instanceof Date?q.date.toISOString():new Date(q.date).toISOString()},Le=q.likes&&t&&q.likes.includes(t);return y.jsxs("div",{className:"p-5 rounded-xl shadow-lg border border-gray-100",style:{backgroundColor:"#fff8e7"},children:[y.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(Re)}}),y.jsxs("div",{className:"flex items-center mb-4",children:[y.jsx("div",{className:"w-10 h-10 bg-custom-beige rounded-full flex items-center justify-center text-gray-800 font-bold text-lg mr-3 shadow-sm",children:q.reviewerId?q.reviewerId.charAt(0).toUpperCase():"RN"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-gray-800",children:q.reviewerId}),y.jsx("p",{className:"text-sm text-gray-600",children:q.nursingField}),y.jsx("p",{className:"text-xs text-gray-500",children:q.date instanceof Date?q.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]}),y.jsx("p",{className:"text-gray-800 leading-relaxed mb-4 text-base",children:q.comment}),y.jsxs("div",{className:"flex items-center gap-4 border-t border-gray-100 pt-3 mt-3",children:[y.jsxs("button",{onClick:()=>Et(q.id),className:`flex items-center transition-colors ${Le?"text-blue-600":"text-gray-600 hover:text-blue-500"}`,children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Like (",q.likes?q.likes.length:0,")"]}),y.jsxs("button",{onClick:()=>{!t||s?(l("Login or Sign Up to add a comment.","info"),d(!0)):kt(we=>({...we,[q.id]:!we[q.id]}))},className:"flex items-center text-gray-600 hover:text-green-500 transition-colors",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Comment (",q.comments?q.comments.length:0,")"]})]}),y.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[y.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Comments on this review:"})," ",q.comments&&q.comments.length>0?y.jsx("div",{className:"space-y-3",children:q.comments.map((we,We)=>y.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[y.jsxs("div",{className:"flex items-center mb-1",children:[y.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-800 text-xs font-semibold mr-2",children:we.userId?we.userId.charAt(0).toUpperCase():"U"}),y.jsx("p",{className:"font-medium text-gray-800",children:we.userId}),y.jsx("p",{className:"text-xs text-gray-500 ml-auto",children:we.date instanceof Date?we.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),y.jsx("p",{className:"ml-8 text-gray-700",children:we.text})]},we.date.getTime()+"_"+We))}):y.jsx("p",{className:"text-sm text-gray-500",children:"No comments on this review yet."}),Jn[q.id]&&t&&!s&&y.jsxs("div",{className:"flex mt-2",children:[y.jsx("input",{type:"text",placeholder:"Write a comment...",className:"flex-grow p-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:we=>{we.key==="Enter"&&we.target.value.trim()&&(Rs(q.id,we.target.value),we.target.value="")},value:Yt[q.id]||"",onChange:we=>Mn(We=>({...We,[q.id]:we.target.value})),maxLength:Bc}),y.jsx("button",{className:"submit-comment-btn bg-custom-beige text-gray-800 px-4 py-2 rounded-r-md hover:opacity-90 transition duration-200 btn-hover-scale",onClick:()=>{const we=Yt[q.id];Rs(q.id,we)},children:"Post"})]}),In[q.id]&&y.jsx("p",{className:"text-green-600 text-sm mt-2",children:In[q.id]})]})]},q.id)})})]})]})})},bP=()=>{const r=ha(),{auth:e,showMessage:t,appId:s}=D.useContext(Bl),[o,l]=D.useState(""),[d,f]=D.useState(""),[m,v]=D.useState(""),[E,I]=D.useState(""),[x,L]=D.useState(""),[B,$]=D.useState(!1);D.useEffect(()=>{if(r.hash){const Q=r.hash.substring(1),te=document.getElementById(Q);te&&setTimeout(()=>{te.scrollIntoView({behavior:"smooth",block:"start"})},100)}},[r.hash]),D.useEffect(()=>{const Q=document.querySelectorAll(".revealable"),te=new IntersectionObserver((J,_e)=>{J.forEach(ce=>{ce.isIntersecting&&(ce.target.style.opacity=1,_e.unobserve(ce.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return Q.forEach(J=>{te.observe(J)}),()=>{Q.forEach(J=>{te.unobserve(J)})}},[]);const M=D.useCallback(async Q=>{var te;if(Q.preventDefault(),$(!0),x){console.warn("Honeypot field filled. Likely a bot submission. Discarding."),t("Thank you for your message!","success"),$(!1);return}if(!o.trim()||!d.trim()||!m.trim()||!E.trim()){t("Please fill in all required fields.","error"),$(!1);return}try{const _e=`${`https://${s}.cloudfunctions.net`}/sendContactEmail`,ce=await fetch(_e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{name:o,email:d,subject:m,message:E}})}),Ie=await ce.json();if(ce.ok&&Ie.data.success)t("Your message has been sent successfully!","success"),l(""),f(""),v(""),I(""),L("");else{const P=((te=Ie.data)==null?void 0:te.message)||"Failed to send message. Please try again.";t(`Error: ${P}`,"error")}}catch(J){console.error("Error submitting contact form:",J),t(`An unexpected error occurred: ${J.message}`,"error")}finally{$(!1)}},[o,d,m,E,x,t,s]);return y.jsxs(y.Fragment,{children:[y.jsxs("section",{id:"home",className:"relative bg-custom-beige text-gray-800 py-24 px-6 md:px-10 lg:px-16 text-center rounded-lg mx-4 mb-2 shadow-lg overflow-hidden animate-fade-in section-hover",children:[y.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:y.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[y.jsx("defs",{children:y.jsx("pattern",{id:"dot-pattern",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:y.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"#FFC982"})})}),y.jsx("rect",{x:"0",y:"0",width:"100",height:"100",fill:"url(#dot-pattern)"})]})}),y.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[y.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 leading-tight animate-fade-in-down drop-shadow-md",children:"RNTea: Rate, Navigate, Trust."}),y.jsx("p",{className:"text-xl md:text-2xl mb-10 text-gray-700 animate-fade-in-up",children:" Do you really trust your Doctors? Let's hear from experienced RNs for a change. "}),y.jsx(zr,{to:"#full-reviews-hub",className:"bg-white text-gray-800 hover:bg-gray-100 font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 hover:shadow-2xl border border-gray-200 animate-fade-in-up antialiased",children:" View All Reviews "})]})]}),y.jsx("section",{id:"about",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 mt-2 mb-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:y.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-center gap-12",children:[y.jsx("div",{className:"md:w-1/2 flex justify-center order-2 md:order-1 animate-slide-in-left",children:y.jsx("img",{src:"/Express-collage.jpg",alt:"Collage of diverse medical professionals working together",className:"rounded-lg shadow-xl border-4 w-full max-w-md object-cover",onError:Q=>{Q.target.onerror=null,Q.target.src="https://placehold.co/400x300/F0F0F0/888888?text=Image+Not+Loaded"}})}),y.jsxs("div",{className:"md:w-1/2 text-center md:text-left order-1 md:order-2 animate-slide-in-right",children:[y.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-6",children:"Our Philosophy"}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-4 antialiased",children:"At RNTea, we believe in transparency and community to help you find the best care. Discover insights, share experiences, and make informed decisions with confidence."}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed antialiased",children:"Our platform empowers Registered Nurses to share their honest experiences, providing a unique and invaluable perspective on healthcare providers. We aim to build a trusted resource for patients seeking reliable and empathetic care, while also helping nurses navigate career decisions whether it be short term travel contracts or a potential employer."}),y.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mt-4 font-semibold antialiased",children:"Now spill some RNTea!"})]})]})}),y.jsx("section",{id:"full-reviews-hub",className:"relative z-10 scroll-margin-top-adjusted revealable",children:y.jsx(kw,{})}),y.jsx("section",{id:"contact",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 my-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:y.jsxs("div",{className:"container mx-auto",children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 text-center mb-16 animate-fade-in-down",children:"Contact Us!"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[y.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-left group relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),y.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Send us a Message"}),y.jsxs("form",{onSubmit:M,children:[y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"your-name",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Name"}),y.jsx("input",{type:"text",id:"your-name",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"John Doe",value:o,onChange:Q=>l(Q.target.value),required:!0})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"your-email",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Email"}),y.jsx("input",{type:"email",id:"your-email",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"you@example.com",value:d,onChange:Q=>f(Q.target.value),required:!0})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"subject",className:"block text-gray-700 text-sm font-medium mb-2",children:"Subject"}),y.jsx("input",{type:"text",id:"subject",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Regarding a review...",value:m,onChange:Q=>v(Q.target.value),required:!0})]}),y.jsxs("div",{className:"mb-6",children:[y.jsxs("label",{htmlFor:"your-message",className:"block text-gray-700 text-sm font-medium mb-2",children:["Your Message ",y.jsx("span",{className:"text-gray-500",children:"(optional)"})]}),y.jsx("textarea",{id:"your-message",rows:"5",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Share your experience... (optional)",value:E,onChange:Q=>I(Q.target.value),required:!0})]}),y.jsxs("div",{style:{display:"none"},children:[y.jsx("label",{htmlFor:"honeypot-field",children:"Leave this field blank"}),y.jsx("input",{type:"text",id:"honeypot-field",name:"honeypot",value:x,onChange:Q=>L(Q.target.value),tabIndex:"-1",autoComplete:"off"})]}),y.jsx("button",{type:"submit",className:"bg-[#FFDEB5] hover:bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-md w-full transition duration-300 ease-in-out",disabled:B,children:B?"Sending...":"Send Message"})]})]}),y.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-right group relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),y.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Find Us"}),y.jsxs("div",{className:"mb-8",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Email Addresses"}),y.jsxs("div",{className:"flex items-center mb-3",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-700 font-medium",children:"General Questions"}),y.jsx("a",{href:"mailto:questions@rntea.com",className:"text-blue-600 hover:underline",children:"questions@rntea.com"})]})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15.75c-2.648 0-5.195-.429-7.669-1.245a2.793 2.793 0 01-1.342-2.934 11.233 11.233 0 013.744-6.436 2.922 2.922 0 011.644-1.018 10.38 10.38 0 015.894 0 2.922 2.922 0 011.644 1.018 11.233 11.233 0 013.744 6.436 2.793 2.793 0 01-1.342 2.934z"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-700 font-medium",children:"Business Inquiries"}),y.jsx("a",{href:"mailto:business@rntea.com",className:"text-blue-600 hover:underline",children:"business@rntea.com"})]})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Connect with Us"}),y.jsxs("div",{className:"flex space-x-6 justify-start",children:[y.jsx("a",{href:"https://facebook.com/rntea",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-600 hover:text-blue-700 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.271 0-4.192 1.552-4.192 4.615v3.385z"})})}),y.jsx("a",{href:"https://twitter.com/rntea_official",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-gray-800 hover:text-black transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 1200 1227",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 671.544L0 1226.37H105.866L515.414 750.206L852.076 1226.37H1200L714.163 519.284ZM569.165 687.828L521.617 619.927L144.036 79.6262H302.46L603.935 515.043L651.483 582.944L1055.03 1147.37H896.59L569.165 687.828Z"})})}),y.jsx("a",{href:"https://linkedin.com/company/rntea-4a8149371/",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-700 hover:text-blue-800 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),y.jsx("a",{href:"https://instagram.com/rntea_official",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-pink-500 hover:text-pink-600 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:y.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:y.jsx("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4c0 3.2-2.6 5.8-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8C2 4.6 4.6 2 7.8 2zm-.2 2A2.2 2.2 0 0 0 5.4 6.2v8.4c0 1.2.9 2.2 2.2 2.2h8.4a2.2 2.2 0 0 0 2.2-2.2V6.2A2.2 2.2 0 0 0 16.2 4H7.6zM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm6.5-3A1.5 1.5 0 1 0 18.5 7 1.5 1.5 0 0 0 18.5 4z"})})})]})]})]})]})]})})]})},kP=()=>{const{db:r,currentUserId:e,appId:t,showMessage:s,setShowAuthModal:o,currentUserIsAnonymous:l}=D.useContext(Bl),[d,f]=D.useState([]),[m,v]=D.useState(!0);D.useEffect(()=>{if(!r||!t||!e){v(!1);return}v(!0);const I=cl(r,`artifacts/${t}/users/${e}/myReviews`),x=wP(I,EP("userId","==",e)),L=_c(x,B=>{const $=[];B.forEach(M=>{const Q=M.data();$.push({id:M.id,...Q,date:Q.date&&typeof Q.date.toDate=="function"?Q.date.toDate():new Date(Q.date),comments:Q.comments?Q.comments.map(te=>({...te,date:te.date&&typeof te.date.toDate=="function"?te.date.toDate():new Date(te.date)})):[],likes:Q.likes||[]})}),$.sort((M,Q)=>Q.date.getTime()-M.date.getTime()),f($),v(!1),console.log("MyReviewsDisplay: Fetched user reviews:",$.length)},B=>{console.error("MyReviewsDisplay: Error fetching user's reviews:",B),s("Error loading your reviews.","error"),v(!1)});return()=>{console.log("MyReviewsDisplay: Cleaning up onSnapshot listener."),L()}},[r,t,e,s]);const E=D.useCallback(async(I,x,L)=>{if(console.log("MyReviewsDisplay: handleLikeReview called for reviewId:",I),!e||l){s("You must be logged in to like a review. Please sign up or log in.","info"),o(!0);return}if(!r||!t||!x||!L){s("Firebase or review data missing for like operation.","error");return}try{const B=Qn(r,`artifacts/${t}/public/data/hospitals/${x}/doctors/${L}`),$=await Ki(B);if($.exists()){let Q=[...$.data().ratings||[]];const te=Q.findIndex(J=>J.id===I);if(te!==-1){let J=Q[te].likes||[];const _e=J.includes(e);_e?(Q[te].likes=J.filter(P=>P!==e),s("Review unliked.","info")):(Q[te].likes=[...J,e],s("Review liked!","success")),await hs(B,{ratings:Q}),console.log("MyReviewsDisplay: Public doctor document updated with new like status.");const ce=Qn(r,`artifacts/${t}/users/${e}/myReviews/${I}`);if((await Ki(ce)).exists())_e?await hs(ce,{likes:bw(e)}):await hs(ce,{likes:wc(e)}),console.log("MyReviewsDisplay: User private review updated with new like status.");else{const P=Q[te];await setDoc(ce,{...P,userId:e,hospitalId:x,doctorId:L,likes:P.likes}),console.log("MyReviewsDisplay: New user review document created for liked review (fallback).")}}else console.error("MyReviewsDisplay: Error: Review not found by ID in doctor ratings array for liking.",I),s("Failed to process like: Review not found.","error")}else console.error("MyReviewsDisplay: Doctor document not found for liking:",L),s("Failed to process like: Doctor not found.","error")}catch(B){console.error("MyReviewsDisplay: Error liking/unliking review: ",B),s(`Error processing like: ${B.message}`,"error")}},[e,l,r,t,s,o]);return m?y.jsx("div",{className:"flex justify-center items-center h-48",children:y.jsx("p",{className:"text-center text-gray-500 italic",children:"Loading your reviews..."})}):d.length===0?y.jsx("div",{className:"flex justify-center items-center h-48",children:y.jsx("p",{className:"text-center text-gray-500 italic",children:"You haven't posted any reviews yet. Share your first tea!"})}):y.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:"My Tea"}),y.jsx("p",{className:"text-lg text-gray-700 text-center mb-6",children:"Here's a look at the reviews you've shared and the engagement they've received."}),y.jsx("div",{className:"space-y-8",children:d.map(I=>{const x=I.likes&&e&&I.likes.includes(e);return y.jsxs("div",{className:"p-6 rounded-xl shadow-lg border border-gray-100 bg-white",children:[y.jsxs("div",{className:"flex items-center mb-4",children:[y.jsx("div",{className:"w-10 h-10 bg-custom-beige rounded-full flex items-center justify-center text-gray-800 font-bold text-lg mr-3 shadow-sm",children:I.reviewerId?I.reviewerId.charAt(0).toUpperCase():"RN"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-gray-800",children:I.reviewerId}),y.jsx("p",{className:"text-sm text-gray-600",children:I.nursingField}),y.jsx("p",{className:"text-xs text-gray-500",children:I.date instanceof Date?I.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]}),y.jsx("p",{className:"text-gray-800 leading-relaxed mb-4 text-base",children:I.comment}),y.jsxs("div",{className:"flex items-center gap-4 border-t border-gray-100 pt-3 mt-3",children:[y.jsxs("button",{onClick:()=>E(I.id,I.hospitalId,I.doctorId),className:`flex items-center transition-colors ${x?"text-blue-600":"text-gray-600 hover:text-blue-500"}`,children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Like (",I.likes?I.likes.length:0,")"]}),y.jsxs("span",{className:"flex items-center text-gray-600",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Comment (",I.comments?I.comments.length:0,")"]})]}),y.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[y.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Comments on your review:"}),I.comments&&I.comments.length>0?y.jsx("div",{className:"space-y-3",children:I.comments.map((L,B)=>y.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[y.jsxs("div",{className:"flex items-center mb-1",children:[y.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-800 text-xs font-semibold mr-2",children:L.userId?L.userId.charAt(0).toUpperCase():"U"}),y.jsx("p",{className:"font-medium text-gray-800",children:L.userId}),y.jsx("p",{className:"text-xs text-gray-500 ml-auto",children:L.date instanceof Date?L.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),y.jsx("p",{className:"ml-8 text-gray-700",children:L.text})]},L.date.getTime()+"_"+B))}):y.jsx("p",{className:"text-sm text-gray-500",children:"No comments on this review yet."})]})]},I.id)})})]})};function NP({onClose:r}){const e=D.useRef(null);return D.useEffect(()=>{const t=s=>{s.key==="Escape"&&r()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[r]),D.useEffect(()=>{const t=o=>{e.current&&!e.current.contains(o.target)&&r()},s=setTimeout(()=>{document.addEventListener("mousedown",t)},100);return()=>{clearTimeout(s),document.removeEventListener("mousedown",t)}},[r]),y.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{ref:e,className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative p-6 md:p-8",children:[y.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl font-bold leading-none","aria-label":"Close",children:"×"}),y.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-6 text-center",children:"The RNTea business Data Protection Protocol"}),y.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mt-8 mb-4 text-center",children:"Version 2.1 | Effective Date: July 12, 2025"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Preamble"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:'WHEREAS, RNTea business ("RNTea business," "we," "our") is a data-driven enterprise that values the trust placed in it by its users, clients, and partners ("Data Subjects," "you," "your");'}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the processing of personal data is a fundamental aspect of our operations;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the protection of personal data is a fundamental right, as articulated in international and national legal frameworks, including but not limited to the GDPR (Regulation (EU) 2016/679) and the CCPA (California Civil Code § 1798.100 et seq.), and other applicable data protection laws;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, this Protocol is designed to be a comprehensive, transparent, and legally compliant framework governing our collection, use, retention, and disclosure of personal data;"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"THEREFORE, RNTea business hereby establishes this Data Protection Protocol, which applies to all processing of personal data by the company."}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article I: Foundational Principles of Data Processing"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business adheres to the following principles, which govern all data processing activities:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Lawfulness, Fairness, and Transparency:"})," We process personal data lawfully, fairly, and in a transparent manner. This Protocol serves as the primary instrument for achieving this transparency."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Purpose Limitation:"})," We collect personal data for specified, explicit, and legitimate purposes and do not process it in a manner incompatible with those purposes."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Data Minimization:"})," We collect only the personal data that is adequate, relevant, and limited to what is necessary in relation to the purposes for which it is processed."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Accuracy:"})," We take every reasonable step to ensure that personal data is accurate and, where necessary, kept up to date. Inaccurate personal data will be rectified or erased without undue delay."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Storage Limitation:"})," We retain personal data for no longer than is necessary for the purposes for which it is processed."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Integrity and Confidentiality:"})," We process personal data in a manner that ensures appropriate security, including protection against unauthorized or unlawful processing and against accidental loss, destruction, or damage, using appropriate technical and organizational measures."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Accountability:"})," As the data controller, RNTea business is responsible for, and must be able to demonstrate compliance with, the principles outlined in this Protocol."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article II: Categories of Personal Data Collected & Lawful Basis"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"The personal data we process falls into the following categories, with the corresponding lawful basis for processing:"}),y.jsx("div",{className:"overflow-x-auto mb-4",children:y.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Category of Data"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Examples of Data Collected"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Purpose of Processing"}),y.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Lawful Basis for Processing"})]})}),y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Identity & Account Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Name, email address, username, password (hashed), professional title"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To create and manage your account, provide access to services, and communicate with you."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Contractual Necessity:"})," The processing is necessary for the performance of a contract to which you are a party."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Transactional Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Billing address, payment information (tokenized), subscription history"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To process payments, manage subscriptions, and maintain financial records."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Contractual Necessity:"})," Necessary to fulfill a transaction you initiated. ",y.jsx("strong",{children:"Legal Obligation:"})," To comply with tax and accounting laws."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Technical & Usage Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"IP address, browser type, operating system, pages visited, time spent, clickstream data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To ensure the security and stability of our platform, analyze usage patterns, and improve our services."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Legitimate Interest:"})," Our legitimate interest in securing our platform, preventing fraud, and understanding user behavior to enhance our products."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Correspondence & Support Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Content of emails, chat messages, or support tickets"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To respond to your inquiries, provide customer support, and resolve disputes."}),y.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[y.jsx("strong",{children:"Legitimate Interest:"})," To provide effective customer service. ",y.jsx("strong",{children:"Contractual Necessity:"})," To assist with issues related to our service."]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Voluntarily Provided Data"}),y.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Your professional bio, profile picture, or survey responses"}),y.jsxs("td",{className:"py-2 px-4 text-gray-700",children:[y.jsx("strong",{children:"Consent:"})," Your explicit consent is requested and may be withdrawn at any time."]})]})]})]})}),y.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[y.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Legitimate Interest Balancing Test"}),y.jsx("br",{}),`The use of "Legitimate Interest" as a lawful basis is subject to a strict balancing test under the GDPR. A data controller must demonstrate that its interests in processing the data (e.g., security, service improvement) are not overridden by the fundamental rights and freedoms of the Data Subject. This requires a formal assessment and is a point of frequent legal scrutiny. In this model, we assert that the processing of technical data for security purposes is a legitimate interest vital to protecting all users, and a user's reasonable expectation is that such data would be processed for platform integrity.`]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article III: Data Sharing and Disclosure"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"We may share your personal data with the following categories of recipients, always under the principles of data minimization and purpose limitation:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Service Providers:"})," We engage third-party service providers (data processors) who perform functions on our behalf, such as cloud hosting, payment processing, and analytics. These providers are bound by contractual obligations to protect your data and are prohibited from using it for any purpose other than providing their service to us."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Legal and Regulatory Authorities:"})," We will disclose your data when legally required to do so, such as in response to a subpoena, court order, or governmental request."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Business Transfers:"})," In the event of a merger, acquisition, or sale of assets, your personal data may be transferred as part of the business transaction, subject to the recipient agreeing to abide by a privacy policy consistent with this Protocol."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article IV: Data Subject Rights"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"You have the following rights concerning your personal data. To exercise these rights, please contact our Data Protection Officer at the address provided in Article VIII."}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Access:"}),' You have the right to request a copy of the personal data we hold about you (a "Subject Access Request").']}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Rectification:"})," You have the right to request the correction of inaccurate or incomplete personal data."]}),y.jsxs("li",{children:[y.jsx("strong",{children:'Right to Erasure ("Right to be Forgotten"):'})," You have the right to request the deletion of your personal data under certain circumstances (e.g., if the data is no longer necessary for the purposes for which it was collected)."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Restrict Processing:"})," You have the right to request that we cease or limit the processing of your personal data under specific conditions."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Data Portability:"})," You have the right to receive your personal data in a structured, commonly used, and machine-readable format and to transmit that data to another data controller."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Object:"})," You have the right to object to the processing of your personal data based on legitimate interest or for direct marketing purposes."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Right to Withdraw Consent:"})," Where processing is based on your consent, you have the right to withdraw that consent at any time."]})]}),y.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[y.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Practicality of Rights"}),y.jsx("br",{}),'While these rights are fundamental, their implementation is not absolute. For instance, the "Right to Erasure" may be overridden by a legal obligation to retain data (e.g., financial records for tax purposes) or if the data is required for the establishment, exercise, or defense of legal claims. A robust privacy policy must manage user expectations by clarifying these limitations.']}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article V: Data Security"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business implements appropriate technical and organizational measures to ensure a level of security appropriate to the risk. These measures include:"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Pseudonymization and Encryption:"})," Where feasible, data is pseudonymized and sensitive data is encrypted both in transit and at rest."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Access Controls:"}),' Access to personal data is restricted to authorized personnel on a "need-to-know" basis.']}),y.jsxs("li",{children:[y.jsx("strong",{children:"Security Audits:"})," We conduct regular security audits and vulnerability assessments."]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VI: International Data Transfers"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"As a global company, your data may be transferred to and processed in countries outside your own. We ensure that any such transfer is lawful and adequately protected. For transfers of personal data from the European Union, we rely on established mechanisms such as Standard Contractual Clauses (SCCs)."}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VII: Contact Information"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"For any questions, concerns, or to exercise your rights under this Protocol, please contact our designated Data Protection Officer (DPO):"}),y.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"DPO:"})," [Insert DPO Name]"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Email:"})," [Insert DPO Email]"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Mailing Address:"})," [Insert Mailing Address]"]})]}),y.jsx("hr",{className:"my-8 border-t border-gray-300"}),y.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VIII: Changes to This Protocol"}),y.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"This Protocol may be amended from time to time. We will notify you of any material changes by posting the new Protocol on our website or by other means of communication. Your continued use of our services after a change indicates your acceptance of the updated terms."})]})})}const Bl=D.createContext(null),nl=null,DP=null;class VP extends si.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("App.jsx ErrorBoundary: Uncaught error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-100 text-red-800 p-4 rounded-lg shadow-lg m-4",children:[y.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong in App.jsx!"}),y.jsx("p",{className:"text-lg mb-2 text-center",children:"We're sorry, but there was an issue rendering the application. Details below:"}),y.jsxs("details",{className:"mt-4 text-left p-4 bg-red-50 rounded-lg border border-red-200 overflow-auto max-w-lg",children:[y.jsx("summary",{className:"font-semibold cursor-pointer text-red-700",children:"Click for Error Details"}),y.jsx("pre",{className:"mt-2 text-sm whitespace-pre-wrap break-words font-mono text-red-900",children:this.state.error&&this.state.error.toString()}),this.state.errorInfo&&y.jsxs("pre",{className:"mt-2 text-xs text-red-600 font-mono whitespace-pre-wrap break-words",children:["Component Stack: ",this.state.errorInfo.componentStack]})]})]}):this.props.children}}function OP(){const[r,e]=D.useState(null),[t,s]=D.useState(null),[o,l]=D.useState(null),[d,f]=D.useState(null),[m,v]=D.useState(!0),[E,I]=D.useState(null),[x,L]=D.useState(!1),[B,$]=D.useState(!0),[M,Q]=D.useState({text:"",type:""}),[te,J]=D.useState(!1),[_e,ce]=D.useState(!1),Ie=ha();Wv();const[P,C]=D.useState(!1),[S,b]=D.useState(null),N=D.useRef(null),[O,R]=D.useState(!1),[Ze,ot]=D.useState(!1),[ut,le]=D.useState(0),G=D.useCallback((ue,re)=>{Q({text:ue,type:re}),setTimeout(()=>Q({text:"",type:""}),5e3)},[]);D.useEffect(()=>{console.log("App.jsx: useEffect for Firebase Initialization triggered."),console.log("App.jsx: Current path detected by React Router:",Ie.pathname),(async()=>{try{console.log("App.jsx: Loading Firebase...");let re=null,de="Unknown";const Me={apiKey:"AIzaSyBEwSVX9UY7-MNxeYwdbY0ZmDuXzYyt56g",authDomain:"rntea-cca78.firebaseapp.com",projectId:"rntea-cca78",storageBucket:"rntea-cca78.appspot.com",messagingSenderId:"806310857835",appId:"1:806310857835:web:b03b05847c818ee4fe352e",measurementId:"G-ZKBPS9FGE"};if(console.log("App.jsx DEBUG: Constructed viteConfig:",Me),Me.apiKey&&Me.projectId&&Me.appId)re=Me,de="Vite Environment Variables (import.meta.env)";else if(!(nl&&nl.apiKey&&nl.projectId&&nl.appId))throw new Error("Firebase configuration is incomplete or missing from both Vite environment variables and Canvas setup. Please ensure either .env file is correct or Canvas variables are provided.");if(console.log(`App.jsx: Firebase config source: ${de}`),console.log("App.jsx: Firebase config being used (sensitive parts masked):",{apiKey:re!=null&&re.apiKey?"********":"N/A",authDomain:re==null?void 0:re.authDomain,projectId:re==null?void 0:re.projectId,storageBucket:re==null?void 0:re.storageBucket,messagingSenderId:re==null?void 0:re.messagingSenderId,appId:re!=null&&re.appId?"********":"N/A",measurementId:re==null?void 0:re.measurementId}),!re||!re.apiKey||!re.projectId||!re.appId)throw new Error(`Firebase configuration is incomplete from ${de}. Missing apiKey, projectId, or appId. This should not happen if previous checks passed.`);const Kt=o0(re),Qt=hC(Kt),En=aP(Kt);e(Kt),l(Qt),s(En),console.log("App.jsx: Firebase Loaded, Awaiting Auth...");const Jn=q1(Qt,async kt=>{var Yt,Mn,In,Tn;if(console.log("App.jsx: onAuthStateChanged - User status changed. User:",kt),kt)f(kt.uid),v(kt.isAnonymous),I(kt.displayName);else{console.log("App.jsx: No user found. Checking for custom token.");let pn=null;try{pn=typeof __initial_auth_token<"u"?__initial_auth_token:null}catch(nt){console.warn("App.jsx: __initial_auth_token is not declared or accessible:",nt)}if(pn){console.log("App.jsx: Signing in with custom token...");try{await M1(Qt,pn),f((Yt=Qt.currentUser)==null?void 0:Yt.uid),v(((Mn=Qt.currentUser)==null?void 0:Mn.isAnonymous)||!1),I((In=Qt.currentUser)==null?void 0:In.displayName),console.log("App.jsx: Custom token sign-in successful. Current user ID:",(Tn=Qt.currentUser)==null?void 0:Tn.uid)}catch(nt){console.error("App.jsx: Error during custom token authentication:",nt),G(`Authentication failed: ${nt.message}`,"error"),f(null),v(!0),I(null)}}else console.log("App.jsx: No custom token found. User remains signed out by default."),f(null),v(!0),I(null)}L(!0),$(!1),console.log("App.jsx: Firebase initialization complete. AuthReady:",!0,"LoadingFirebase:",!1)});return()=>{console.log("App.jsx: useEffect cleanup - Unsubscribing from auth state changes."),Jn()}}catch(re){console.error("App.jsx: FATAL ERROR: Failed to initialize Firebase application:",re),G("Failed to initialize application. Please try again later.","error"),$(!1),L(!1)}})()},[Ie.pathname,nl,G]),window.onloadCallback=()=>{console.log("App.jsx: window.onloadCallback triggered from reCAPTCHA script."),ot(!0)},D.useEffect(()=>{x&&o&&Ze&&typeof window.grecaptcha<"u"&&window.grecaptcha.ready&&!S?(console.log("App.jsx: All prerequisites met. Initializing RecaptchaVerifier..."),window.grecaptcha.ready(()=>{if(S){console.log("App.jsx: RecaptchaVerifier already exists in state, skipping re-initialization."),R(!0);return}console.log("App.jsx: Creating and rendering RecaptchaVerifier instance...");try{if(!document.getElementById("recaptcha-container-app")){console.error("App.jsx: Central reCAPTCHA container 'recaptcha-container-app' not found!"),G("reCAPTCHA container missing. Phone verification may fail.","error");return}const re=new H0(o,"recaptcha-container-app",{size:"invisible",callback:de=>{console.log("App.jsx: Central reCAPTCHA callback fired (solved):",de),R(!0),le(Me=>Me+1)},"expired-callback":()=>{console.log("App.jsx: Central reCAPTCHA expired."),G("Verification expired. Please try again.","error"),R(!1),N.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset(N.current),le(de=>de+1)},"error-callback":de=>{console.error("App.jsx: reCAPTCHA error callback:",de),G("Failed to load verification. Please refresh.","error"),R(!1),le(Me=>Me+1)}});re.render().then(de=>{console.log("App.jsx: Central reCAPTCHA rendered with widget ID:",de),N.current=de,b(re),re.size==="invisible"&&R(!0),console.log("App.jsx: recaptchaVerifierState set and isRecaptchaReadyForUse true."),le(Me=>Me+1)}).catch(de=>{console.error("App.jsx: Error rendering central reCAPTCHA:",de),G("Failed to initialize verification. Please refresh.","error"),R(!1),le(Me=>Me+1)})}catch(ue){console.error("App.jsx: Error creating central RecaptchaVerifier instance:",ue),G("Failed to initialize verification. Check console.","error"),R(!1),le(re=>re+1)}})):S&&S.size==="invisible"&&(O||(R(!0),le(ue=>ue+1)))},[x,o,Ze,G,O,S]),D.useEffect(()=>()=>{S&&(console.log("App.jsx: Cleaning up central reCAPTCHA Verifier..."),N.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"?window.grecaptcha.reset(N.current):window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&(console.warn("App.jsx: Attempting general reCAPTCHA reset as widget ID is null."),window.grecaptcha.reset()),S.clear(),b(null),N.current=null,R(!1),le(ue=>ue+1))},[S]);const ge=D.useCallback(async()=>{if(!O||!S||typeof S.execute!="function")throw console.error("App.jsx: reCAPTCHA Verifier not ready for execution. isReady:",O,"instance:",S),G("Verification not ready. Please try again.","error"),new Error("reCAPTCHA not ready.");try{const ue=await S.execute();return console.log("App.jsx: reCAPTCHA token obtained:",ue),ue}catch(ue){throw console.error("App.jsx: Error executing reCAPTCHA:",ue),G(`Verification failed: ${ue.message}`,"error"),ue}},[G,O,S]),oe=D.useCallback(()=>{N.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"?(console.log("App.jsx: Resetting central reCAPTCHA widget with ID."),window.grecaptcha.reset(N.current)):window.grecaptcha&&typeof window.grecaptcha.reset=="function"?(console.warn("App.jsx: Attempting general reCAPTCHA reset as widget ID is null."),window.grecaptcha.reset()):console.warn("App.jsx: Cannot reset reCAPTCHA: grecaptcha or reset function not available."),R(!1)},[]),j=D.useCallback(async(ue,re)=>{if(!o)return G("Firebase Auth not initialized.","error"),null;try{const de=await L0(o,ue,re);return G("Account created successfully!","success"),J(!1),de.user}catch(de){throw console.error("Error signing up with email/password:",de),G(`Sign Up Failed: ${de.message}`,"error"),de}},[o,G]),K=D.useCallback(async(ue,re)=>{if(!o)return G("Firebase Auth not initialized.","error"),null;try{const de=await F1(o,ue,re);return G("Signed in successfully!","success"),J(!1),de.user}catch(de){return console.error("Error signing in with email/password:",de),G(`Sign In Failed: ${de.message}`,"error"),null}},[o,G]),ve=D.useCallback(async()=>{if(!o)return G("Firebase Auth not initialized.","error"),null;try{const ue=new fs;let re;return o.currentUser&&o.currentUser.isAnonymous?(re=await nc(o.currentUser,await rc(o,ue).then(de=>de.credential)),G("Anonymous account linked with Google!","success")):(re=await rc(o,ue),G("Signed in with Google successfully!","success")),J(!1),re.user}catch(ue){return console.error("Error signing in with Google:",ue),ue.code==="auth/account-exists-with-different-credential"?G("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):G(`Google Sign In Failed: ${ue.message}`,"error"),null}},[o,G,J]),Ce=D.useCallback(async()=>{if(!o)return G("Firebase Auth not initialized.","error"),null;try{const ue=new Xo("apple.com");let re;return o.currentUser&&o.currentUser.isAnonymous?(re=await nc(o.currentUser,await rc(o,ue).then(de=>de.credential)),G("Anonymous account linked with Apple!","success")):(re=await rc(o,ue),G("Signed in with Apple successfully!","success")),J(!1),re.user}catch(ue){return console.error("Error signing in with Apple:",ue),ue.code==="auth/account-exists-with-different-credential"?G("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):G(`Apple Sign In Failed: ${ue.message}`,"error"),null}},[o,G]),ke=D.useCallback(async()=>{if(!o){G("Firebase Auth not initialized.","error");return}try{await G1(o),f(null),v(!0),I(null),G("Signed out successfully!","success")}catch(ue){console.error("Error signing out:",ue),G(`Sign Out Failed: ${ue.message}`,"error")}},[o,G]),Ne=D.useCallback(async(ue,re)=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return G("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const de=ro.credential(ue,re),Me=await nc(o.currentUser,de);return G("Anonymous account linked with email/password!","success"),J(!1),Me.user}catch(de){return console.error("Error linking anonymous account with email/password:",de),G(`Linking Failed: ${de.message}`,"error"),null}},[o,G]),Be=D.useCallback(async()=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return G("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const ue=new Xo("apple.com"),re=await nc(o.currentUser,ue);return G("Anonymous account linked with Apple!","success"),J(!1),re.user}catch(ue){return console.error("Error linking anonymous account with Apple:",ue),G(`Linking Failed: ${ue.message}`,"error"),null}},[o,G]),Ue=D.useMemo(()=>({app:r,db:t,auth:o,currentUserId:d,currentUserIsAnonymous:m,authReady:x,appId:"rntea-cca78",showMessage:G,signUpWithEmailPassword:j,signInWithEmailPassword:K,signInWithGoogle:ve,signInWithApple:Ce,signOutUser:ke,linkAnonymousWithEmailPassword:Ne,linkAnonymousWithApple:Be,setShowAuthModal:J,executeRecaptcha:ge,resetRecaptcha:oe,isRecaptchaReadyForUse:O,recaptchaVerifier:S,currentUserDisplayName:E}),[r,t,o,d,m,x,DP,G,j,K,ve,Ce,ke,Ne,Be,J,ge,oe,O,S,E]),je=D.useCallback(()=>{C(ue=>!ue),document.body.style.overflow=P?"":"hidden"},[P]),Qe=D.useCallback(()=>{C(!1),document.body.style.overflow=""},[]),wt=D.useCallback(ue=>{if(ue==="/")return Ie.pathname==="/";if(ue==="/reviews")return Ie.pathname==="/reviews";if(ue==="/my-tea")return Ie.pathname==="/my-tea";if(ue.startsWith("/#")){const re=ue.substring(2);return Ie.pathname==="/"&&Ie.hash===`#${re}`}return!1},[Ie.pathname,Ie.hash]);return y.jsxs("div",{className:"min-h-screen flex flex-col",children:[y.jsxs("header",{className:"bg-white shadow-sm py-8 px-6 md:px-10 lg:px-16 flex justify-between items-center rounded-b-lg fixed top-0 w-full z-30",children:[y.jsx(zr,{to:"/",className:"text-3xl font-bold text-gray-800 rntea-brand",children:"RNTea"}),y.jsx("nav",{className:"hidden md:block",children:y.jsxs("ul",{className:"flex space-x-6 items-center",children:[y.jsx("li",{children:y.jsx(zr,{to:"/#about",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${wt("/#about")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["About",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:y.jsx(zr,{to:"/reviews",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${wt("/reviews")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["Reviews",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),d&&!m&&y.jsx("li",{children:y.jsx(zr,{to:"/my-tea",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${wt("/my-tea")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["My Tea",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:y.jsx(zr,{to:"/#contact",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${wt("/#contact")?"font-bold":""}`,children:y.jsxs("span",{className:"relative inline-block",children:["Contact",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),y.jsx("li",{children:d?y.jsx("button",{onClick:ke,className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):y.jsx("button",{onClick:()=>J(!0),className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})})]})}),y.jsxs("div",{className:`hamburger-menu md:hidden flex flex-col justify-around w-8 h-6 cursor-pointer z-50 ${P?"open":""}`,id:"hamburger-menu",onClick:je,children:[y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),y.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"})]})]}),y.jsxs("div",{className:`mobile-nav-overlay md:hidden fixed top-0 left-0 w-full h-full bg-white bg-opacity-98 z-40 flex flex-col justify-center items-center transition-transform duration-400 ease-in-out ${P?"open":""}`,id:"mobile-nav-overlay",children:[y.jsx("button",{className:"absolute top-6 right-6 text-gray-800 hover:text-gray-600 text-4xl focus:outline-none z-50",onClick:Qe,"aria-label":"Close navigation menu",children:"×"}),y.jsx(zr,{to:"/#about",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Qe,style:{animationDelay:"0.1s"},children:y.jsxs("span",{className:"relative inline-block",children:["About",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),y.jsx(zr,{to:"/reviews",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Qe,style:{animationDelay:"0.2s"},children:y.jsxs("span",{className:"relative inline-block",children:["Reviews",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),d&&!m&&y.jsx(zr,{to:"/my-tea",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Qe,style:{animationDelay:"0.25s"},children:y.jsxs("span",{className:"relative inline-block",children:["My Tea",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),y.jsx(zr,{to:"/#contact",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Qe,style:{animationDelay:"0.3s"},children:y.jsxs("span",{className:"relative inline-block",children:["Contact",y.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),d?y.jsx("button",{onClick:()=>{ke(),Qe()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):y.jsx("button",{onClick:()=>{J(!0),Qe()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})]}),y.jsxs("main",{className:"flex-grow w-full flex flex-col mt-[120px]",children:[y.jsx(SP,{message:M.text,type:M.type}),y.jsx("div",{id:"recaptcha-container-app",className:"hidden"}),y.jsx(VP,{children:B?y.jsx("p",{className:"text-center text-gray-500 py-8",children:"App.jsx: Initializing application and Firebase..."}):y.jsxs(Bl.Provider,{value:Ue,children:[y.jsxs(LI,{children:[console.log(`App.jsx: Route matched for path: ${Ie.pathname}`),y.jsx(rl,{path:"/",element:y.jsx(bP,{})}),y.jsx(rl,{path:"/reviews",element:y.jsx(kw,{})}),y.jsx(rl,{path:"/my-tea",element:y.jsx(kP,{})})," ",y.jsx(rl,{path:"/test-route",element:y.jsx("h2",{className:"text-center text-2xl text-center mt-8",children:"This is a Test Route."})})]}),te&&y.jsx(CP,{onClose:()=>J(!1)},`${ut}-${O}`)]})})]}),y.jsx("footer",{className:"bg-white py-4 px-6 md:px-10 lg:px-16 border-t border-gray-200 text-center text-gray-600",children:y.jsxs("p",{className:"text-sm",children:["© ",new Date().getFullYear()," RNTea business. All Rights Reserved.",y.jsx("button",{onClick:()=>ce(!0),className:"ml-1 text-blue-600 hover:underline focus:outline-none",children:"Privacy Policy"})]})}),_e&&y.jsx(NP,{onClose:()=>ce(!1)})]})}const Vv=document.getElementById("root");Vv?(console.log("main.jsx: Root element found. Attempting to mount React App with Router..."),WE.createRoot(Vv).render(y.jsx(si.StrictMode,{children:y.jsx($I,{children:y.jsx(OP,{})})})),console.log("main.jsx: React App with Router mount instruction sent.")):console.error("main.jsx: ERROR - Root element not found in DOM. Cannot mount React App.");
