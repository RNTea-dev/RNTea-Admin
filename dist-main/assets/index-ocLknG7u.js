function sE(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function dv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Td={exports:{}},Wa={},Id={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function oE(){if(mg)return Me;mg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function S(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,B={};function V(L,q,ge){this.props=L,this.context=q,this.refs=B,this.updater=ge||j}V.prototype.isReactComponent={},V.prototype.setState=function(L,q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,q,"setState")},V.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function te(){}te.prototype=V.prototype;function ie(L,q,ge){this.props=L,this.context=q,this.refs=B,this.updater=ge||j}var K=ie.prototype=new te;K.constructor=ie,W(K,V.prototype),K.isPureReactComponent=!0;var oe=Array.isArray,_e=Object.prototype.hasOwnProperty,Ne={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function C(L,q,ge){var Re,Pe={},De=null,Fe=null;if(q!=null)for(Re in q.ref!==void 0&&(Fe=q.ref),q.key!==void 0&&(De=""+q.key),q)_e.call(q,Re)&&!N.hasOwnProperty(Re)&&(Pe[Re]=q[Re]);var Be=arguments.length-2;if(Be===1)Pe.children=ge;else if(1<Be){for(var Ge=Array(Be),ct=0;ct<Be;ct++)Ge[ct]=arguments[ct+2];Pe.children=Ge}if(L&&L.defaultProps)for(Re in Be=L.defaultProps,Be)Pe[Re]===void 0&&(Pe[Re]=Be[Re]);return{$$typeof:r,type:L,key:De,ref:Fe,props:Pe,_owner:Ne.current}}function P(L,q){return{$$typeof:r,type:L.type,key:q,ref:L.ref,props:L.props,_owner:L._owner}}function x(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function D(L){var q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ge){return q[ge]})}var O=/\/+/g;function R(L,q){return typeof L=="object"&&L!==null&&L.key!=null?D(""+L.key):q.toString(36)}function we(L,q,ge,Re,Pe){var De=typeof L;(De==="undefined"||De==="boolean")&&(L=null);var Fe=!1;if(L===null)Fe=!0;else switch(De){case"string":case"number":Fe=!0;break;case"object":switch(L.$$typeof){case r:case e:Fe=!0}}if(Fe)return Fe=L,Pe=Pe(Fe),L=Re===""?"."+R(Fe,0):Re,oe(Pe)?(ge="",L!=null&&(ge=L.replace(O,"$&/")+"/"),we(Pe,q,ge,"",function(ct){return ct})):Pe!=null&&(x(Pe)&&(Pe=P(Pe,ge+(!Pe.key||Fe&&Fe.key===Pe.key?"":(""+Pe.key).replace(O,"$&/")+"/")+L)),q.push(Pe)),1;if(Fe=0,Re=Re===""?".":Re+":",oe(L))for(var Be=0;Be<L.length;Be++){De=L[Be];var Ge=Re+R(De,Be);Fe+=we(De,q,ge,Ge,Pe)}else if(Ge=S(L),typeof Ge=="function")for(L=Ge.call(L),Be=0;!(De=L.next()).done;)De=De.value,Ge=Re+R(De,Be++),Fe+=we(De,q,ge,Ge,Pe);else if(De==="object")throw q=String(L),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return Fe}function de(L,q,ge){if(L==null)return L;var Re=[],Pe=0;return we(L,Re,"","",function(De){return q.call(ge,De,Pe++)}),Re}function Ve(L){if(L._status===-1){var q=L._result;q=q(),q.then(function(ge){(L._status===0||L._status===-1)&&(L._status=1,L._result=ge)},function(ge){(L._status===0||L._status===-1)&&(L._status=2,L._result=ge)}),L._status===-1&&(L._status=0,L._result=q)}if(L._status===1)return L._result.default;throw L._result}var me={current:null},ne={transition:null},fe={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:ne,ReactCurrentOwner:Ne};function se(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:de,forEach:function(L,q,ge){de(L,function(){q.apply(this,arguments)},ge)},count:function(L){var q=0;return de(L,function(){q++}),q},toArray:function(L){return de(L,function(q){return q})||[]},only:function(L){if(!x(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Me.Component=V,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=ie,Me.StrictMode=s,Me.Suspense=g,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Me.act=se,Me.cloneElement=function(L,q,ge){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Re=W({},L.props),Pe=L.key,De=L.ref,Fe=L._owner;if(q!=null){if(q.ref!==void 0&&(De=q.ref,Fe=Ne.current),q.key!==void 0&&(Pe=""+q.key),L.type&&L.type.defaultProps)var Be=L.type.defaultProps;for(Ge in q)_e.call(q,Ge)&&!N.hasOwnProperty(Ge)&&(Re[Ge]=q[Ge]===void 0&&Be!==void 0?Be[Ge]:q[Ge])}var Ge=arguments.length-2;if(Ge===1)Re.children=ge;else if(1<Ge){Be=Array(Ge);for(var ct=0;ct<Ge;ct++)Be[ct]=arguments[ct+2];Re.children=Be}return{$$typeof:r,type:L.type,key:Pe,ref:De,props:Re,_owner:Fe}},Me.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Me.createElement=C,Me.createFactory=function(L){var q=C.bind(null,L);return q.type=L,q},Me.createRef=function(){return{current:null}},Me.forwardRef=function(L){return{$$typeof:f,render:L}},Me.isValidElement=x,Me.lazy=function(L){return{$$typeof:w,_payload:{_status:-1,_result:L},_init:Ve}},Me.memo=function(L,q){return{$$typeof:v,type:L,compare:q===void 0?null:q}},Me.startTransition=function(L){var q=ne.transition;ne.transition={};try{L()}finally{ne.transition=q}},Me.unstable_act=se,Me.useCallback=function(L,q){return me.current.useCallback(L,q)},Me.useContext=function(L){return me.current.useContext(L)},Me.useDebugValue=function(){},Me.useDeferredValue=function(L){return me.current.useDeferredValue(L)},Me.useEffect=function(L,q){return me.current.useEffect(L,q)},Me.useId=function(){return me.current.useId()},Me.useImperativeHandle=function(L,q,ge){return me.current.useImperativeHandle(L,q,ge)},Me.useInsertionEffect=function(L,q){return me.current.useInsertionEffect(L,q)},Me.useLayoutEffect=function(L,q){return me.current.useLayoutEffect(L,q)},Me.useMemo=function(L,q){return me.current.useMemo(L,q)},Me.useReducer=function(L,q,ge){return me.current.useReducer(L,q,ge)},Me.useRef=function(L){return me.current.useRef(L)},Me.useState=function(L){return me.current.useState(L)},Me.useSyncExternalStore=function(L,q,ge){return me.current.useSyncExternalStore(L,q,ge)},Me.useTransition=function(){return me.current.useTransition()},Me.version="18.3.1",Me}var gg;function yf(){return gg||(gg=1,Id.exports=oE()),Id.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg;function aE(){if(yg)return Wa;yg=1;var r=yf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,v){var w,T={},S=null,j=null;v!==void 0&&(S=""+v),g.key!==void 0&&(S=""+g.key),g.ref!==void 0&&(j=g.ref);for(w in g)s.call(g,w)&&!l.hasOwnProperty(w)&&(T[w]=g[w]);if(f&&f.defaultProps)for(w in g=f.defaultProps,g)T[w]===void 0&&(T[w]=g[w]);return{$$typeof:e,type:f,key:S,ref:j,props:T,_owner:o.current}}return Wa.Fragment=t,Wa.jsx=h,Wa.jsxs=h,Wa}var vg;function lE(){return vg||(vg=1,Td.exports=aE()),Td.exports}var I=lE(),z=yf();const ii=dv(z),uE=sE({__proto__:null,default:ii},[z]);var Uu={},Sd={exports:{}},fn={},Cd={exports:{}},Ad={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g;function cE(){return _g||(_g=1,function(r){function e(ne,fe){var se=ne.length;ne.push(fe);e:for(;0<se;){var L=se-1>>>1,q=ne[L];if(0<o(q,fe))ne[L]=fe,ne[se]=q,se=L;else break e}}function t(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var fe=ne[0],se=ne.pop();if(se!==fe){ne[0]=se;e:for(var L=0,q=ne.length,ge=q>>>1;L<ge;){var Re=2*(L+1)-1,Pe=ne[Re],De=Re+1,Fe=ne[De];if(0>o(Pe,se))De<q&&0>o(Fe,Pe)?(ne[L]=Fe,ne[De]=se,L=De):(ne[L]=Pe,ne[Re]=se,L=Re);else if(De<q&&0>o(Fe,se))ne[L]=Fe,ne[De]=se,L=De;else break e}}return fe}function o(ne,fe){var se=ne.sortIndex-fe.sortIndex;return se!==0?se:ne.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],v=[],w=1,T=null,S=3,j=!1,W=!1,B=!1,V=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(ne){for(var fe=t(v);fe!==null;){if(fe.callback===null)s(v);else if(fe.startTime<=ne)s(v),fe.sortIndex=fe.expirationTime,e(g,fe);else break;fe=t(v)}}function oe(ne){if(B=!1,K(ne),!W)if(t(g)!==null)W=!0,Ve(_e);else{var fe=t(v);fe!==null&&me(oe,fe.startTime-ne)}}function _e(ne,fe){W=!1,B&&(B=!1,te(C),C=-1),j=!0;var se=S;try{for(K(fe),T=t(g);T!==null&&(!(T.expirationTime>fe)||ne&&!D());){var L=T.callback;if(typeof L=="function"){T.callback=null,S=T.priorityLevel;var q=L(T.expirationTime<=fe);fe=r.unstable_now(),typeof q=="function"?T.callback=q:T===t(g)&&s(g),K(fe)}else s(g);T=t(g)}if(T!==null)var ge=!0;else{var Re=t(v);Re!==null&&me(oe,Re.startTime-fe),ge=!1}return ge}finally{T=null,S=se,j=!1}}var Ne=!1,N=null,C=-1,P=5,x=-1;function D(){return!(r.unstable_now()-x<P)}function O(){if(N!==null){var ne=r.unstable_now();x=ne;var fe=!0;try{fe=N(!0,ne)}finally{fe?R():(Ne=!1,N=null)}}else Ne=!1}var R;if(typeof ie=="function")R=function(){ie(O)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,de=we.port2;we.port1.onmessage=O,R=function(){de.postMessage(null)}}else R=function(){V(O,0)};function Ve(ne){N=ne,Ne||(Ne=!0,R())}function me(ne,fe){C=V(function(){ne(r.unstable_now())},fe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){W||j||(W=!0,Ve(_e))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(ne){switch(S){case 1:case 2:case 3:var fe=3;break;default:fe=S}var se=S;S=fe;try{return ne()}finally{S=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,fe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var se=S;S=ne;try{return fe()}finally{S=se}},r.unstable_scheduleCallback=function(ne,fe,se){var L=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?L+se:L):se=L,ne){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=se+q,ne={id:w++,callback:fe,priorityLevel:ne,startTime:se,expirationTime:q,sortIndex:-1},se>L?(ne.sortIndex=se,e(v,ne),t(g)===null&&ne===t(v)&&(B?(te(C),C=-1):B=!0,me(oe,se-L))):(ne.sortIndex=q,e(g,ne),W||j||(W=!0,Ve(_e))),ne},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(ne){var fe=S;return function(){var se=S;S=fe;try{return ne.apply(this,arguments)}finally{S=se}}}}(Ad)),Ad}var wg;function hE(){return wg||(wg=1,Cd.exports=cE()),Cd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg;function dE(){if(Eg)return fn;Eg=1;var r=yf(),e=hE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function S(n){return g.call(T,n)?!0:g.call(w,n)?!1:v.test(n)?T[n]=!0:(w[n]=!0,!1)}function j(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,i,a,c){if(i===null||typeof i>"u"||j(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function B(n,i,a,c,d,m,_){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=m,this.removeEmptyString=_}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){V[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];V[i]=new B(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){V[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){V[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){V[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){V[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){V[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){V[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){V[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var te=/[\-:]([a-z])/g;function ie(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(te,ie);V[i]=new B(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(te,ie);V[i]=new B(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(te,ie);V[i]=new B(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){V[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),V.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){V[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function K(n,i,a,c){var d=V.hasOwnProperty(i)?V[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(W(i,a,d,c)&&(a=null),c||d===null?S(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_e=Symbol.for("react.element"),Ne=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),Ve=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),ne=Symbol.iterator;function fe(n){return n===null||typeof n!="object"?null:(n=ne&&n[ne]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,L;function q(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var ge=!1;function Re(n,i){if(!n||ge)return"";ge=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch($){var c=$}Reflect.construct(n,[],i)}else{try{i.call()}catch($){c=$}n.call(i.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),m=c.stack.split(`
`),_=d.length-1,A=m.length-1;1<=_&&0<=A&&d[_]!==m[A];)A--;for(;1<=_&&0<=A;_--,A--)if(d[_]!==m[A]){if(_!==1||A!==1)do if(_--,A--,0>A||d[_]!==m[A]){var k=`
`+d[_].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=_&&0<=A);break}}}finally{ge=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?q(n):""}function Pe(n){switch(n.tag){case 5:return q(n.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case Ne:return"Portal";case P:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case we:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case de:return i=n.displayName||null,i!==null?i:De(n.type)||"Memo";case Ve:i=n._payload,n=n._init;try{return De(n(i))}catch{}}return null}function Fe(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(i);case 8:return i===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ct(n){var i=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,m.call(this,_)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Hn(n){n._valueTracker||(n._valueTracker=ct(n))}function ur(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Ge(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Wn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function qn(n,i){var a=i.checked;return se({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function mi(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Be(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Kn(n,i){i=i.checked,i!=null&&K(n,"checked",i,!1)}function gi(n,i){Kn(n,i);var a=Be(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?jr(n,i.type,a):i.hasOwnProperty("defaultValue")&&jr(n,i.type,Be(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Fr(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function jr(n,i,a){(i!=="number"||Wn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Rn=Array.isArray;function Pn(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Be(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function yi(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function cr(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Rn(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Be(a)}}function hr(n,i){var a=Be(i.value),c=Be(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function dr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function mt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?mt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var xn,Ur=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(xn=xn||document.createElement("div"),xn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=xn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function yn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fr=["Webkit","ms","Moz","O"];Object.keys(kn).forEach(function(n){fr.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),kn[i]=kn[n]})});function pr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||kn.hasOwnProperty(n)&&kn[n]?(""+i).trim():i+"px"}function vi(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=pr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var zr=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gn(n,i){if(i){if(zr[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Br(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mr=null;function $r(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _i=null,nn=null,Nn=null;function wi(n){if(n=ka(n)){if(typeof _i!="function")throw Error(t(280));var i=n.stateNode;i&&(i=tu(i),_i(n.stateNode,n.type,i))}}function bn(n){nn?Nn?Nn.push(n):Nn=[n]:nn=n}function vs(){if(nn){var n=nn,i=Nn;if(Nn=nn=null,wi(n),i)for(n=0;n<i.length;n++)wi(i[n])}}function gr(n,i){return n(i)}function _s(){}var Qn=!1;function ws(n,i,a){if(Qn)return n(i,a);Qn=!0;try{return gr(n,i,a)}finally{Qn=!1,(nn!==null||Nn!==null)&&(_s(),vs())}}function ht(n,i){var a=n.stateNode;if(a===null)return null;var c=tu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var X=!1;if(f)try{var Ce={};Object.defineProperty(Ce,"passive",{get:function(){X=!0}}),window.addEventListener("test",Ce,Ce),window.removeEventListener("test",Ce,Ce)}catch{X=!1}function ue(n,i,a,c,d,m,_,A,k){var $=Array.prototype.slice.call(arguments,3);try{i.apply(a,$)}catch(J){this.onError(J)}}var Oe=!1,qe=null,Je=!1,gt=null,Qe={onError:function(n){Oe=!0,qe=n}};function Ye(n,i,a,c,d,m,_,A,k){Oe=!1,qe=null,ue.apply(Qe,arguments)}function rn(n,i,a,c,d,m,_,A,k){if(Ye.apply(this,arguments),Oe){if(Oe){var $=qe;Oe=!1,qe=null}else throw Error(t(198));Je||(Je=!0,gt=$)}}function sn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Hr(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function vn(n){if(sn(n)!==n)throw Error(t(188))}function Rl(n){var i=n.alternate;if(!i){if(i=sn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return vn(d),n;if(m===c)return vn(d),i;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var _=!1,A=d.child;A;){if(A===a){_=!0,a=d,c=m;break}if(A===c){_=!0,c=d,a=m;break}A=A.sibling}if(!_){for(A=m.child;A;){if(A===a){_=!0,a=m,c=d;break}if(A===c){_=!0,c=m,a=d;break}A=A.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function ha(n){return n=Rl(n),n!==null?Zs(n):null}function Zs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Zs(n);if(i!==null)return i;n=n.sibling}return null}var eo=e.unstable_scheduleCallback,da=e.unstable_cancelCallback,Pl=e.unstable_shouldYield,Xc=e.unstable_requestPaint,tt=e.unstable_now,xl=e.unstable_getCurrentPriorityLevel,Es=e.unstable_ImmediatePriority,Ei=e.unstable_UserBlockingPriority,Dn=e.unstable_NormalPriority,fa=e.unstable_LowPriority,kl=e.unstable_IdlePriority,Ts=null,_n=null;function Nl(n){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Ts,n,void 0,(n.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Dl,pa=Math.log,bl=Math.LN2;function Dl(n){return n>>>=0,n===0?32:31-(pa(n)/bl|0)|0}var to=64,no=4194304;function Ti(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Is(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,_=a&268435455;if(_!==0){var A=_&~d;A!==0?c=Ti(A):(m&=_,m!==0&&(c=Ti(m)))}else _=a&~d,_!==0?c=Ti(_):m!==0&&(c=Ti(m));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,m=i&-i,d>=m||d===16&&(m&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Jt(i),d=1<<a,c|=n[a],i&=~d;return c}function Jc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var _=31-Jt(m),A=1<<_,k=d[_];k===-1?((A&a)===0||(A&c)!==0)&&(d[_]=Jc(A,i)):k<=i&&(n.expiredLanes|=A),m&=~A}}function wn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ss(){var n=to;return to<<=1,(to&4194240)===0&&(to=64),n}function Ii(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Si(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Jt(i),n[i]=a}function et(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Jt(a),m=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Ci(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Jt(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var ze=0;function Ai(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ol,ro,Vl,Ll,Ml,ma=!1,yr=[],Mt=null,Yn=null,Xn=null,Ri=new Map,On=new Map,vr=[],Zc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fl(n,i){switch(n){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":Ri.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":On.delete(i.pointerId)}}function on(n,i,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},i!==null&&(i=ka(i),i!==null&&ro(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function eh(n,i,a,c,d){switch(i){case"focusin":return Mt=on(Mt,n,i,a,c,d),!0;case"dragenter":return Yn=on(Yn,n,i,a,c,d),!0;case"mouseover":return Xn=on(Xn,n,i,a,c,d),!0;case"pointerover":var m=d.pointerId;return Ri.set(m,on(Ri.get(m)||null,n,i,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,On.set(m,on(On.get(m)||null,n,i,a,c,d)),!0}return!1}function jl(n){var i=xs(n.target);if(i!==null){var a=sn(i);if(a!==null){if(i=a.tag,i===13){if(i=Hr(a),i!==null){n.blockedOn=i,Ml(n.priority,function(){Vl(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=io(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);mr=c,a.target.dispatchEvent(c),mr=null}else return i=ka(a),i!==null&&ro(i),n.blockedOn=a,!1;i.shift()}return!0}function Cs(n,i,a){qr(n)&&a.delete(i)}function Ul(){ma=!1,Mt!==null&&qr(Mt)&&(Mt=null),Yn!==null&&qr(Yn)&&(Yn=null),Xn!==null&&qr(Xn)&&(Xn=null),Ri.forEach(Cs),On.forEach(Cs)}function Jn(n,i){n.blockedOn===i&&(n.blockedOn=null,ma||(ma=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ul)))}function Zn(n){function i(d){return Jn(d,n)}if(0<yr.length){Jn(yr[0],n);for(var a=1;a<yr.length;a++){var c=yr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Mt!==null&&Jn(Mt,n),Yn!==null&&Jn(Yn,n),Xn!==null&&Jn(Xn,n),Ri.forEach(i),On.forEach(i),a=0;a<vr.length;a++)c=vr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<vr.length&&(a=vr[0],a.blockedOn===null);)jl(a),a.blockedOn===null&&vr.shift()}var Kr=oe.ReactCurrentBatchConfig,Pi=!0;function lt(n,i,a,c){var d=ze,m=Kr.transition;Kr.transition=null;try{ze=1,ga(n,i,a,c)}finally{ze=d,Kr.transition=m}}function th(n,i,a,c){var d=ze,m=Kr.transition;Kr.transition=null;try{ze=4,ga(n,i,a,c)}finally{ze=d,Kr.transition=m}}function ga(n,i,a,c){if(Pi){var d=io(n,i,a,c);if(d===null)dh(n,i,c,As,a),Fl(n,c);else if(eh(d,n,i,a,c))c.stopPropagation();else if(Fl(n,c),i&4&&-1<Zc.indexOf(n)){for(;d!==null;){var m=ka(d);if(m!==null&&Ol(m),m=io(n,i,a,c),m===null&&dh(n,i,c,As,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else dh(n,i,c,null,a)}}var As=null;function io(n,i,a,c){if(As=null,n=$r(c),n=xs(n),n!==null)if(i=sn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Hr(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return As=n,null}function ya(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xl()){case Es:return 1;case Ei:return 4;case Dn:case fa:return 16;case kl:return 536870912;default:return 16}default:return 16}}var En=null,so=null,an=null;function va(){if(an)return an;var n,i=so,a=i.length,c,d="value"in En?En.value:En.textContent,m=d.length;for(n=0;n<a&&i[n]===d[n];n++);var _=a-n;for(c=1;c<=_&&i[a-c]===d[m-c];c++);return an=d.slice(n,1<c?1-c:void 0)}function oo(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function _r(){return!0}function _a(){return!1}function Ft(n){function i(a,c,d,m,_){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?_r:_a,this.isPropagationStopped=_a,this}return se(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),i}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ao=Ft(er),wr=se({},er,{view:0,detail:0}),nh=Ft(wr),lo,Gr,xi,Rs=se({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xi&&(xi&&n.type==="mousemove"?(lo=n.screenX-xi.screenX,Gr=n.screenY-xi.screenY):Gr=lo=0,xi=n),lo)},movementY:function(n){return"movementY"in n?n.movementY:Gr}}),uo=Ft(Rs),wa=se({},Rs,{dataTransfer:0}),zl=Ft(wa),co=se({},wr,{relatedTarget:0}),ho=Ft(co),Bl=se({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Qr=Ft(Bl),$l=se({},er,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Hl=Ft($l),Wl=se({},er,{data:0}),Ea=Ft(Wl),fo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ql[n])?!!i[n]:!1}function Er(){return Kl}var u=se({},wr,{key:function(n){if(n.key){var i=fo[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=oo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Zt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(n){return n.type==="keypress"?oo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?oo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Ft(u),y=se({},Rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Ft(y),M=se({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er}),H=Ft(M),re=se({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ze=Ft(re),At=se({},Rs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$e=Ft(At),bt=[9,13,27,32],Et=f&&"CompositionEvent"in window,Vn=null;f&&"documentMode"in document&&(Vn=document.documentMode);var Tn=f&&"TextEvent"in window&&!Vn,Ps=f&&(!Et||Vn&&8<Vn&&11>=Vn),po=" ",up=!1;function cp(n,i){switch(n){case"keyup":return bt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var mo=!1;function nw(n,i){switch(n){case"compositionend":return hp(i);case"keypress":return i.which!==32?null:(up=!0,po);case"textInput":return n=i.data,n===po&&up?null:n;default:return null}}function rw(n,i){if(mo)return n==="compositionend"||!Et&&cp(n,i)?(n=va(),an=so=En=null,mo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ps&&i.locale!=="ko"?null:i.data;default:return null}}var iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!iw[n.type]:i==="textarea"}function fp(n,i,a,c){bn(c),i=Jl(i,"onChange"),0<i.length&&(a=new ao("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Ta=null,Ia=null;function sw(n){Np(n,0)}function Gl(n){var i=wo(n);if(ur(i))return n}function ow(n,i){if(n==="change")return i}var pp=!1;if(f){var rh;if(f){var ih="oninput"in document;if(!ih){var mp=document.createElement("div");mp.setAttribute("oninput","return;"),ih=typeof mp.oninput=="function"}rh=ih}else rh=!1;pp=rh&&(!document.documentMode||9<document.documentMode)}function gp(){Ta&&(Ta.detachEvent("onpropertychange",yp),Ia=Ta=null)}function yp(n){if(n.propertyName==="value"&&Gl(Ia)){var i=[];fp(i,Ia,n,$r(n)),ws(sw,i)}}function aw(n,i,a){n==="focusin"?(gp(),Ta=i,Ia=a,Ta.attachEvent("onpropertychange",yp)):n==="focusout"&&gp()}function lw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gl(Ia)}function uw(n,i){if(n==="click")return Gl(i)}function cw(n,i){if(n==="input"||n==="change")return Gl(i)}function hw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var tr=typeof Object.is=="function"?Object.is:hw;function Sa(n,i){if(tr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!tr(n[d],i[d]))return!1}return!0}function vp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _p(n,i){var a=vp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vp(a)}}function wp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?wp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Ep(){for(var n=window,i=Wn();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Wn(n.document)}return i}function sh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function dw(n){var i=Ep(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&wp(a.ownerDocument.documentElement,a)){if(c!==null&&sh(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=_p(a,m);var _=_p(a,c);d&&_&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(i),n.extend(_.node,_.offset)):(i.setEnd(_.node,_.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var fw=f&&"documentMode"in document&&11>=document.documentMode,go=null,oh=null,Ca=null,ah=!1;function Tp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ah||go==null||go!==Wn(c)||(c=go,"selectionStart"in c&&sh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ca&&Sa(Ca,c)||(Ca=c,c=Jl(oh,"onSelect"),0<c.length&&(i=new ao("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=go)))}function Ql(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var yo={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},lh={},Ip={};f&&(Ip=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Yl(n){if(lh[n])return lh[n];if(!yo[n])return n;var i=yo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ip)return lh[n]=i[a];return n}var Sp=Yl("animationend"),Cp=Yl("animationiteration"),Ap=Yl("animationstart"),Rp=Yl("transitionend"),Pp=new Map,xp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(n,i){Pp.set(n,i),l(i,[n])}for(var uh=0;uh<xp.length;uh++){var ch=xp[uh],pw=ch.toLowerCase(),mw=ch[0].toUpperCase()+ch.slice(1);ki(pw,"on"+mw)}ki(Sp,"onAnimationEnd"),ki(Cp,"onAnimationIteration"),ki(Ap,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(Rp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function kp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,rn(c,i,void 0,n),n.currentTarget=null}function Np(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var _=c.length-1;0<=_;_--){var A=c[_],k=A.instance,$=A.currentTarget;if(A=A.listener,k!==m&&d.isPropagationStopped())break e;kp(d,A,$),m=k}else for(_=0;_<c.length;_++){if(A=c[_],k=A.instance,$=A.currentTarget,A=A.listener,k!==m&&d.isPropagationStopped())break e;kp(d,A,$),m=k}}}if(Je)throw n=gt,Je=!1,gt=null,n}function rt(n,i){var a=i[vh];a===void 0&&(a=i[vh]=new Set);var c=n+"__bubble";a.has(c)||(bp(i,n,2,!1),a.add(c))}function hh(n,i,a){var c=0;i&&(c|=4),bp(a,n,c,i)}var Xl="_reactListening"+Math.random().toString(36).slice(2);function Ra(n){if(!n[Xl]){n[Xl]=!0,s.forEach(function(a){a!=="selectionchange"&&(gw.has(a)||hh(a,!1,n),hh(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Xl]||(i[Xl]=!0,hh("selectionchange",!1,i))}}function bp(n,i,a,c){switch(ya(i)){case 1:var d=lt;break;case 4:d=th;break;default:d=ga}a=d.bind(null,i,a,n),d=void 0,!X||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function dh(n,i,a,c,d){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var k=_.tag;if((k===3||k===4)&&(k=_.stateNode.containerInfo,k===d||k.nodeType===8&&k.parentNode===d))return;_=_.return}for(;A!==null;){if(_=xs(A),_===null)return;if(k=_.tag,k===5||k===6){c=m=_;continue e}A=A.parentNode}}c=c.return}ws(function(){var $=m,J=$r(a),Z=[];e:{var Y=Pp.get(n);if(Y!==void 0){var ae=ao,he=n;switch(n){case"keypress":if(oo(a)===0)break e;case"keydown":case"keyup":ae=p;break;case"focusin":he="focus",ae=ho;break;case"focusout":he="blur",ae=ho;break;case"beforeblur":case"afterblur":ae=ho;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=zl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=H;break;case Sp:case Cp:case Ap:ae=Qr;break;case Rp:ae=Ze;break;case"scroll":ae=nh;break;case"wheel":ae=$e;break;case"copy":case"cut":case"paste":ae=Hl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=E}var pe=(i&4)!==0,vt=!pe&&n==="scroll",F=pe?Y!==null?Y+"Capture":null:Y;pe=[];for(var b=$,U;b!==null;){U=b;var ee=U.stateNode;if(U.tag===5&&ee!==null&&(U=ee,F!==null&&(ee=ht(b,F),ee!=null&&pe.push(Pa(b,ee,U)))),vt)break;b=b.return}0<pe.length&&(Y=new ae(Y,he,null,a,J),Z.push({event:Y,listeners:pe}))}}if((i&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",Y&&a!==mr&&(he=a.relatedTarget||a.fromElement)&&(xs(he)||he[Yr]))break e;if((ae||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,ae?(he=a.relatedTarget||a.toElement,ae=$,he=he?xs(he):null,he!==null&&(vt=sn(he),he!==vt||he.tag!==5&&he.tag!==6)&&(he=null)):(ae=null,he=$),ae!==he)){if(pe=uo,ee="onMouseLeave",F="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(pe=E,ee="onPointerLeave",F="onPointerEnter",b="pointer"),vt=ae==null?Y:wo(ae),U=he==null?Y:wo(he),Y=new pe(ee,b+"leave",ae,a,J),Y.target=vt,Y.relatedTarget=U,ee=null,xs(J)===$&&(pe=new pe(F,b+"enter",he,a,J),pe.target=U,pe.relatedTarget=vt,ee=pe),vt=ee,ae&&he)t:{for(pe=ae,F=he,b=0,U=pe;U;U=vo(U))b++;for(U=0,ee=F;ee;ee=vo(ee))U++;for(;0<b-U;)pe=vo(pe),b--;for(;0<U-b;)F=vo(F),U--;for(;b--;){if(pe===F||F!==null&&pe===F.alternate)break t;pe=vo(pe),F=vo(F)}pe=null}else pe=null;ae!==null&&Dp(Z,Y,ae,pe,!1),he!==null&&vt!==null&&Dp(Z,vt,he,pe,!0)}}e:{if(Y=$?wo($):window,ae=Y.nodeName&&Y.nodeName.toLowerCase(),ae==="select"||ae==="input"&&Y.type==="file")var ve=ow;else if(dp(Y))if(pp)ve=cw;else{ve=lw;var Te=aw}else(ae=Y.nodeName)&&ae.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(ve=uw);if(ve&&(ve=ve(n,$))){fp(Z,ve,a,J);break e}Te&&Te(n,Y,$),n==="focusout"&&(Te=Y._wrapperState)&&Te.controlled&&Y.type==="number"&&jr(Y,"number",Y.value)}switch(Te=$?wo($):window,n){case"focusin":(dp(Te)||Te.contentEditable==="true")&&(go=Te,oh=$,Ca=null);break;case"focusout":Ca=oh=go=null;break;case"mousedown":ah=!0;break;case"contextmenu":case"mouseup":case"dragend":ah=!1,Tp(Z,a,J);break;case"selectionchange":if(fw)break;case"keydown":case"keyup":Tp(Z,a,J)}var Ie;if(Et)e:{switch(n){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else mo?cp(n,a)&&(xe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(Ps&&a.locale!=="ko"&&(mo||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&mo&&(Ie=va()):(En=J,so="value"in En?En.value:En.textContent,mo=!0)),Te=Jl($,xe),0<Te.length&&(xe=new Ea(xe,n,null,a,J),Z.push({event:xe,listeners:Te}),Ie?xe.data=Ie:(Ie=hp(a),Ie!==null&&(xe.data=Ie)))),(Ie=Tn?nw(n,a):rw(n,a))&&($=Jl($,"onBeforeInput"),0<$.length&&(J=new Ea("onBeforeInput","beforeinput",null,a,J),Z.push({event:J,listeners:$}),J.data=Ie))}Np(Z,i)})}function Pa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Jl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=ht(n,a),m!=null&&c.unshift(Pa(n,m,d)),m=ht(n,i),m!=null&&c.push(Pa(n,m,d))),n=n.return}return c}function vo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Dp(n,i,a,c,d){for(var m=i._reactName,_=[];a!==null&&a!==c;){var A=a,k=A.alternate,$=A.stateNode;if(k!==null&&k===c)break;A.tag===5&&$!==null&&(A=$,d?(k=ht(a,m),k!=null&&_.unshift(Pa(a,k,A))):d||(k=ht(a,m),k!=null&&_.push(Pa(a,k,A)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var yw=/\r\n?/g,vw=/\u0000|\uFFFD/g;function Op(n){return(typeof n=="string"?n:""+n).replace(yw,`
`).replace(vw,"")}function Zl(n,i,a){if(i=Op(i),Op(n)!==i&&a)throw Error(t(425))}function eu(){}var fh=null,ph=null;function mh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var gh=typeof setTimeout=="function"?setTimeout:void 0,_w=typeof clearTimeout=="function"?clearTimeout:void 0,Vp=typeof Promise=="function"?Promise:void 0,ww=typeof queueMicrotask=="function"?queueMicrotask:typeof Vp<"u"?function(n){return Vp.resolve(null).then(n).catch(Ew)}:gh;function Ew(n){setTimeout(function(){throw n})}function yh(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Zn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Zn(i)}function Ni(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Lp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var _o=Math.random().toString(36).slice(2),Tr="__reactFiber$"+_o,xa="__reactProps$"+_o,Yr="__reactContainer$"+_o,vh="__reactEvents$"+_o,Tw="__reactListeners$"+_o,Iw="__reactHandles$"+_o;function xs(n){var i=n[Tr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Yr]||a[Tr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Lp(n);n!==null;){if(a=n[Tr])return a;n=Lp(n)}return i}n=a,a=n.parentNode}return null}function ka(n){return n=n[Tr]||n[Yr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function wo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function tu(n){return n[xa]||null}var _h=[],Eo=-1;function bi(n){return{current:n}}function it(n){0>Eo||(n.current=_h[Eo],_h[Eo]=null,Eo--)}function nt(n,i){Eo++,_h[Eo]=n.current,n.current=i}var Di={},Ht=bi(Di),ln=bi(!1),ks=Di;function To(n,i){var a=n.type.contextTypes;if(!a)return Di;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=i[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function un(n){return n=n.childContextTypes,n!=null}function nu(){it(ln),it(Ht)}function Mp(n,i,a){if(Ht.current!==Di)throw Error(t(168));nt(Ht,i),nt(ln,a)}function Fp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,Fe(n)||"Unknown",d));return se({},a,c)}function ru(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Di,ks=Ht.current,nt(Ht,n),nt(ln,ln.current),!0}function jp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Fp(n,i,ks),c.__reactInternalMemoizedMergedChildContext=n,it(ln),it(Ht),nt(Ht,n)):it(ln),nt(ln,a)}var Xr=null,iu=!1,wh=!1;function Up(n){Xr===null?Xr=[n]:Xr.push(n)}function Sw(n){iu=!0,Up(n)}function Oi(){if(!wh&&Xr!==null){wh=!0;var n=0,i=ze;try{var a=Xr;for(ze=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Xr=null,iu=!1}catch(d){throw Xr!==null&&(Xr=Xr.slice(n+1)),eo(Es,Oi),d}finally{ze=i,wh=!1}}return null}var Io=[],So=0,su=null,ou=0,Ln=[],Mn=0,Ns=null,Jr=1,Zr="";function bs(n,i){Io[So++]=ou,Io[So++]=su,su=n,ou=i}function zp(n,i,a){Ln[Mn++]=Jr,Ln[Mn++]=Zr,Ln[Mn++]=Ns,Ns=n;var c=Jr;n=Zr;var d=32-Jt(c)-1;c&=~(1<<d),a+=1;var m=32-Jt(i)+d;if(30<m){var _=d-d%5;m=(c&(1<<_)-1).toString(32),c>>=_,d-=_,Jr=1<<32-Jt(i)+d|a<<d|c,Zr=m+n}else Jr=1<<m|a<<d|c,Zr=n}function Eh(n){n.return!==null&&(bs(n,1),zp(n,1,0))}function Th(n){for(;n===su;)su=Io[--So],Io[So]=null,ou=Io[--So],Io[So]=null;for(;n===Ns;)Ns=Ln[--Mn],Ln[Mn]=null,Zr=Ln[--Mn],Ln[Mn]=null,Jr=Ln[--Mn],Ln[Mn]=null}var In=null,Sn=null,ut=!1,nr=null;function Bp(n,i){var a=zn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function $p(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,In=n,Sn=Ni(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,In=n,Sn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Ns!==null?{id:Jr,overflow:Zr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=zn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,In=n,Sn=null,!0):!1;default:return!1}}function Ih(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Sh(n){if(ut){var i=Sn;if(i){var a=i;if(!$p(n,i)){if(Ih(n))throw Error(t(418));i=Ni(a.nextSibling);var c=In;i&&$p(n,i)?Bp(c,a):(n.flags=n.flags&-4097|2,ut=!1,In=n)}}else{if(Ih(n))throw Error(t(418));n.flags=n.flags&-4097|2,ut=!1,In=n}}}function Hp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;In=n}function au(n){if(n!==In)return!1;if(!ut)return Hp(n),ut=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!mh(n.type,n.memoizedProps)),i&&(i=Sn)){if(Ih(n))throw Wp(),Error(t(418));for(;i;)Bp(n,i),i=Ni(i.nextSibling)}if(Hp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Sn=Ni(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Sn=null}}else Sn=In?Ni(n.stateNode.nextSibling):null;return!0}function Wp(){for(var n=Sn;n;)n=Ni(n.nextSibling)}function Co(){Sn=In=null,ut=!1}function Ch(n){nr===null?nr=[n]:nr.push(n)}var Cw=oe.ReactCurrentBatchConfig;function Na(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(_){var A=d.refs;_===null?delete A[m]:A[m]=_},i._stringRef=m,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function lu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function qp(n){var i=n._init;return i(n._payload)}function Kp(n){function i(F,b){if(n){var U=F.deletions;U===null?(F.deletions=[b],F.flags|=16):U.push(b)}}function a(F,b){if(!n)return null;for(;b!==null;)i(F,b),b=b.sibling;return null}function c(F,b){for(F=new Map;b!==null;)b.key!==null?F.set(b.key,b):F.set(b.index,b),b=b.sibling;return F}function d(F,b){return F=Bi(F,b),F.index=0,F.sibling=null,F}function m(F,b,U){return F.index=U,n?(U=F.alternate,U!==null?(U=U.index,U<b?(F.flags|=2,b):U):(F.flags|=2,b)):(F.flags|=1048576,b)}function _(F){return n&&F.alternate===null&&(F.flags|=2),F}function A(F,b,U,ee){return b===null||b.tag!==6?(b=gd(U,F.mode,ee),b.return=F,b):(b=d(b,U),b.return=F,b)}function k(F,b,U,ee){var ve=U.type;return ve===N?J(F,b,U.props.children,ee,U.key):b!==null&&(b.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Ve&&qp(ve)===b.type)?(ee=d(b,U.props),ee.ref=Na(F,b,U),ee.return=F,ee):(ee=bu(U.type,U.key,U.props,null,F.mode,ee),ee.ref=Na(F,b,U),ee.return=F,ee)}function $(F,b,U,ee){return b===null||b.tag!==4||b.stateNode.containerInfo!==U.containerInfo||b.stateNode.implementation!==U.implementation?(b=yd(U,F.mode,ee),b.return=F,b):(b=d(b,U.children||[]),b.return=F,b)}function J(F,b,U,ee,ve){return b===null||b.tag!==7?(b=Us(U,F.mode,ee,ve),b.return=F,b):(b=d(b,U),b.return=F,b)}function Z(F,b,U){if(typeof b=="string"&&b!==""||typeof b=="number")return b=gd(""+b,F.mode,U),b.return=F,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _e:return U=bu(b.type,b.key,b.props,null,F.mode,U),U.ref=Na(F,null,b),U.return=F,U;case Ne:return b=yd(b,F.mode,U),b.return=F,b;case Ve:var ee=b._init;return Z(F,ee(b._payload),U)}if(Rn(b)||fe(b))return b=Us(b,F.mode,U,null),b.return=F,b;lu(F,b)}return null}function Y(F,b,U,ee){var ve=b!==null?b.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ve!==null?null:A(F,b,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case _e:return U.key===ve?k(F,b,U,ee):null;case Ne:return U.key===ve?$(F,b,U,ee):null;case Ve:return ve=U._init,Y(F,b,ve(U._payload),ee)}if(Rn(U)||fe(U))return ve!==null?null:J(F,b,U,ee,null);lu(F,U)}return null}function ae(F,b,U,ee,ve){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return F=F.get(U)||null,A(b,F,""+ee,ve);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _e:return F=F.get(ee.key===null?U:ee.key)||null,k(b,F,ee,ve);case Ne:return F=F.get(ee.key===null?U:ee.key)||null,$(b,F,ee,ve);case Ve:var Te=ee._init;return ae(F,b,U,Te(ee._payload),ve)}if(Rn(ee)||fe(ee))return F=F.get(U)||null,J(b,F,ee,ve,null);lu(b,ee)}return null}function he(F,b,U,ee){for(var ve=null,Te=null,Ie=b,xe=b=0,Vt=null;Ie!==null&&xe<U.length;xe++){Ie.index>xe?(Vt=Ie,Ie=null):Vt=Ie.sibling;var Ke=Y(F,Ie,U[xe],ee);if(Ke===null){Ie===null&&(Ie=Vt);break}n&&Ie&&Ke.alternate===null&&i(F,Ie),b=m(Ke,b,xe),Te===null?ve=Ke:Te.sibling=Ke,Te=Ke,Ie=Vt}if(xe===U.length)return a(F,Ie),ut&&bs(F,xe),ve;if(Ie===null){for(;xe<U.length;xe++)Ie=Z(F,U[xe],ee),Ie!==null&&(b=m(Ie,b,xe),Te===null?ve=Ie:Te.sibling=Ie,Te=Ie);return ut&&bs(F,xe),ve}for(Ie=c(F,Ie);xe<U.length;xe++)Vt=ae(Ie,F,xe,U[xe],ee),Vt!==null&&(n&&Vt.alternate!==null&&Ie.delete(Vt.key===null?xe:Vt.key),b=m(Vt,b,xe),Te===null?ve=Vt:Te.sibling=Vt,Te=Vt);return n&&Ie.forEach(function($i){return i(F,$i)}),ut&&bs(F,xe),ve}function pe(F,b,U,ee){var ve=fe(U);if(typeof ve!="function")throw Error(t(150));if(U=ve.call(U),U==null)throw Error(t(151));for(var Te=ve=null,Ie=b,xe=b=0,Vt=null,Ke=U.next();Ie!==null&&!Ke.done;xe++,Ke=U.next()){Ie.index>xe?(Vt=Ie,Ie=null):Vt=Ie.sibling;var $i=Y(F,Ie,Ke.value,ee);if($i===null){Ie===null&&(Ie=Vt);break}n&&Ie&&$i.alternate===null&&i(F,Ie),b=m($i,b,xe),Te===null?ve=$i:Te.sibling=$i,Te=$i,Ie=Vt}if(Ke.done)return a(F,Ie),ut&&bs(F,xe),ve;if(Ie===null){for(;!Ke.done;xe++,Ke=U.next())Ke=Z(F,Ke.value,ee),Ke!==null&&(b=m(Ke,b,xe),Te===null?ve=Ke:Te.sibling=Ke,Te=Ke);return ut&&bs(F,xe),ve}for(Ie=c(F,Ie);!Ke.done;xe++,Ke=U.next())Ke=ae(Ie,F,xe,Ke.value,ee),Ke!==null&&(n&&Ke.alternate!==null&&Ie.delete(Ke.key===null?xe:Ke.key),b=m(Ke,b,xe),Te===null?ve=Ke:Te.sibling=Ke,Te=Ke);return n&&Ie.forEach(function(iE){return i(F,iE)}),ut&&bs(F,xe),ve}function vt(F,b,U,ee){if(typeof U=="object"&&U!==null&&U.type===N&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case _e:e:{for(var ve=U.key,Te=b;Te!==null;){if(Te.key===ve){if(ve=U.type,ve===N){if(Te.tag===7){a(F,Te.sibling),b=d(Te,U.props.children),b.return=F,F=b;break e}}else if(Te.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Ve&&qp(ve)===Te.type){a(F,Te.sibling),b=d(Te,U.props),b.ref=Na(F,Te,U),b.return=F,F=b;break e}a(F,Te);break}else i(F,Te);Te=Te.sibling}U.type===N?(b=Us(U.props.children,F.mode,ee,U.key),b.return=F,F=b):(ee=bu(U.type,U.key,U.props,null,F.mode,ee),ee.ref=Na(F,b,U),ee.return=F,F=ee)}return _(F);case Ne:e:{for(Te=U.key;b!==null;){if(b.key===Te)if(b.tag===4&&b.stateNode.containerInfo===U.containerInfo&&b.stateNode.implementation===U.implementation){a(F,b.sibling),b=d(b,U.children||[]),b.return=F,F=b;break e}else{a(F,b);break}else i(F,b);b=b.sibling}b=yd(U,F.mode,ee),b.return=F,F=b}return _(F);case Ve:return Te=U._init,vt(F,b,Te(U._payload),ee)}if(Rn(U))return he(F,b,U,ee);if(fe(U))return pe(F,b,U,ee);lu(F,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,b!==null&&b.tag===6?(a(F,b.sibling),b=d(b,U),b.return=F,F=b):(a(F,b),b=gd(U,F.mode,ee),b.return=F,F=b),_(F)):a(F,b)}return vt}var Ao=Kp(!0),Gp=Kp(!1),uu=bi(null),cu=null,Ro=null,Ah=null;function Rh(){Ah=Ro=cu=null}function Ph(n){var i=uu.current;it(uu),n._currentValue=i}function xh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function Po(n,i){cu=n,Ah=Ro=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(cn=!0),n.firstContext=null)}function Fn(n){var i=n._currentValue;if(Ah!==n)if(n={context:n,memoizedValue:i,next:null},Ro===null){if(cu===null)throw Error(t(308));Ro=n,cu.dependencies={lanes:0,firstContext:n}}else Ro=Ro.next=n;return i}var Ds=null;function kh(n){Ds===null?Ds=[n]:Ds.push(n)}function Qp(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,kh(i)):(a.next=d.next,d.next=a),i.interleaved=a,ei(n,c)}function ei(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Vi=!1;function Nh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ti(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Li(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,ei(n,a)}return d=c.interleaved,d===null?(i.next=i,kh(c)):(i.next=d.next,d.next=i),c.interleaved=i,ei(n,a)}function hu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Ci(n,a)}}function Xp(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function du(n,i,a,c){var d=n.updateQueue;Vi=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var k=A,$=k.next;k.next=null,_===null?m=$:_.next=$,_=k;var J=n.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==_&&(A===null?J.firstBaseUpdate=$:A.next=$,J.lastBaseUpdate=k))}if(m!==null){var Z=d.baseState;_=0,J=$=k=null,A=m;do{var Y=A.lane,ae=A.eventTime;if((c&Y)===Y){J!==null&&(J=J.next={eventTime:ae,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var he=n,pe=A;switch(Y=i,ae=a,pe.tag){case 1:if(he=pe.payload,typeof he=="function"){Z=he.call(ae,Z,Y);break e}Z=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=pe.payload,Y=typeof he=="function"?he.call(ae,Z,Y):he,Y==null)break e;Z=se({},Z,Y);break e;case 2:Vi=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,Y=d.effects,Y===null?d.effects=[A]:Y.push(A))}else ae={eventTime:ae,lane:Y,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?($=J=ae,k=Z):J=J.next=ae,_|=Y;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;Y=A,A=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(J===null&&(k=Z),d.baseState=k,d.firstBaseUpdate=$,d.lastBaseUpdate=J,i=d.shared.interleaved,i!==null){d=i;do _|=d.lane,d=d.next;while(d!==i)}else m===null&&(d.shared.lanes=0);Ls|=_,n.lanes=_,n.memoizedState=Z}}function Jp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ba={},Ir=bi(ba),Da=bi(ba),Oa=bi(ba);function Os(n){if(n===ba)throw Error(t(174));return n}function bh(n,i){switch(nt(Oa,i),nt(Da,n),nt(Ir,ba),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:at(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=at(i,n)}it(Ir),nt(Ir,i)}function xo(){it(Ir),it(Da),it(Oa)}function Zp(n){Os(Oa.current);var i=Os(Ir.current),a=at(i,n.type);i!==a&&(nt(Da,n),nt(Ir,a))}function Dh(n){Da.current===n&&(it(Ir),it(Da))}var dt=bi(0);function fu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Oh=[];function Vh(){for(var n=0;n<Oh.length;n++)Oh[n]._workInProgressVersionPrimary=null;Oh.length=0}var pu=oe.ReactCurrentDispatcher,Lh=oe.ReactCurrentBatchConfig,Vs=0,ft=null,Rt=null,Dt=null,mu=!1,Va=!1,La=0,Aw=0;function Wt(){throw Error(t(321))}function Mh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!tr(n[a],i[a]))return!1;return!0}function Fh(n,i,a,c,d,m){if(Vs=m,ft=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,pu.current=n===null||n.memoizedState===null?kw:Nw,n=a(c,d),Va){m=0;do{if(Va=!1,La=0,25<=m)throw Error(t(301));m+=1,Dt=Rt=null,i.updateQueue=null,pu.current=bw,n=a(c,d)}while(Va)}if(pu.current=vu,i=Rt!==null&&Rt.next!==null,Vs=0,Dt=Rt=ft=null,mu=!1,i)throw Error(t(300));return n}function jh(){var n=La!==0;return La=0,n}function Sr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?ft.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function jn(){if(Rt===null){var n=ft.alternate;n=n!==null?n.memoizedState:null}else n=Rt.next;var i=Dt===null?ft.memoizedState:Dt.next;if(i!==null)Dt=i,Rt=n;else{if(n===null)throw Error(t(310));Rt=n,n={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Dt===null?ft.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function Ma(n,i){return typeof i=="function"?i(n):i}function Uh(n){var i=jn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Rt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var A=_=null,k=null,$=m;do{var J=$.lane;if((Vs&J)===J)k!==null&&(k=k.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var Z={lane:J,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};k===null?(A=k=Z,_=c):k=k.next=Z,ft.lanes|=J,Ls|=J}$=$.next}while($!==null&&$!==m);k===null?_=c:k.next=A,tr(c,i.memoizedState)||(cn=!0),i.memoizedState=c,i.baseState=_,i.baseQueue=k,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,ft.lanes|=m,Ls|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function zh(n){var i=jn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=n(m,_.action),_=_.next;while(_!==d);tr(m,i.memoizedState)||(cn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function em(){}function tm(n,i){var a=ft,c=jn(),d=i(),m=!tr(c.memoizedState,d);if(m&&(c.memoizedState=d,cn=!0),c=c.queue,Bh(im.bind(null,a,c,n),[n]),c.getSnapshot!==i||m||Dt!==null&&Dt.memoizedState.tag&1){if(a.flags|=2048,Fa(9,rm.bind(null,a,c,d,i),void 0,null),Ot===null)throw Error(t(349));(Vs&30)!==0||nm(a,i,d)}return d}function nm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=ft.updateQueue,i===null?(i={lastEffect:null,stores:null},ft.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function rm(n,i,a,c){i.value=a,i.getSnapshot=c,sm(i)&&om(n)}function im(n,i,a){return a(function(){sm(i)&&om(n)})}function sm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!tr(n,a)}catch{return!0}}function om(n){var i=ei(n,1);i!==null&&or(i,n,1,-1)}function am(n){var i=Sr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:n},i.queue=n,n=n.dispatch=xw.bind(null,ft,n),[i.memoizedState,n]}function Fa(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=ft.updateQueue,i===null?(i={lastEffect:null,stores:null},ft.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function lm(){return jn().memoizedState}function gu(n,i,a,c){var d=Sr();ft.flags|=n,d.memoizedState=Fa(1|i,a,void 0,c===void 0?null:c)}function yu(n,i,a,c){var d=jn();c=c===void 0?null:c;var m=void 0;if(Rt!==null){var _=Rt.memoizedState;if(m=_.destroy,c!==null&&Mh(c,_.deps)){d.memoizedState=Fa(i,a,m,c);return}}ft.flags|=n,d.memoizedState=Fa(1|i,a,m,c)}function um(n,i){return gu(8390656,8,n,i)}function Bh(n,i){return yu(2048,8,n,i)}function cm(n,i){return yu(4,2,n,i)}function hm(n,i){return yu(4,4,n,i)}function dm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function fm(n,i,a){return a=a!=null?a.concat([n]):null,yu(4,4,dm.bind(null,i,n),a)}function $h(){}function pm(n,i){var a=jn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Mh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function mm(n,i){var a=jn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Mh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function gm(n,i,a){return(Vs&21)===0?(n.baseState&&(n.baseState=!1,cn=!0),n.memoizedState=a):(tr(a,i)||(a=Ss(),ft.lanes|=a,Ls|=a,n.baseState=!0),i)}function Rw(n,i){var a=ze;ze=a!==0&&4>a?a:4,n(!0);var c=Lh.transition;Lh.transition={};try{n(!1),i()}finally{ze=a,Lh.transition=c}}function ym(){return jn().memoizedState}function Pw(n,i,a){var c=Ui(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},vm(n))_m(i,a);else if(a=Qp(n,i,a,c),a!==null){var d=tn();or(a,n,c,d),wm(a,i,c)}}function xw(n,i,a){var c=Ui(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(vm(n))_m(i,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,A=m(_,a);if(d.hasEagerState=!0,d.eagerState=A,tr(A,_)){var k=i.interleaved;k===null?(d.next=d,kh(i)):(d.next=k.next,k.next=d),i.interleaved=d;return}}catch{}finally{}a=Qp(n,i,d,c),a!==null&&(d=tn(),or(a,n,c,d),wm(a,i,c))}}function vm(n){var i=n.alternate;return n===ft||i!==null&&i===ft}function _m(n,i){Va=mu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function wm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Ci(n,a)}}var vu={readContext:Fn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},kw={readContext:Fn,useCallback:function(n,i){return Sr().memoizedState=[n,i===void 0?null:i],n},useContext:Fn,useEffect:um,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,gu(4194308,4,dm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return gu(4194308,4,n,i)},useInsertionEffect:function(n,i){return gu(4,2,n,i)},useMemo:function(n,i){var a=Sr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Sr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=Pw.bind(null,ft,n),[c.memoizedState,n]},useRef:function(n){var i=Sr();return n={current:n},i.memoizedState=n},useState:am,useDebugValue:$h,useDeferredValue:function(n){return Sr().memoizedState=n},useTransition:function(){var n=am(!1),i=n[0];return n=Rw.bind(null,n[1]),Sr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=ft,d=Sr();if(ut){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Ot===null)throw Error(t(349));(Vs&30)!==0||nm(c,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,um(im.bind(null,c,m,n),[n]),c.flags|=2048,Fa(9,rm.bind(null,c,m,a,i),void 0,null),a},useId:function(){var n=Sr(),i=Ot.identifierPrefix;if(ut){var a=Zr,c=Jr;a=(c&~(1<<32-Jt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=La++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Aw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Nw={readContext:Fn,useCallback:pm,useContext:Fn,useEffect:Bh,useImperativeHandle:fm,useInsertionEffect:cm,useLayoutEffect:hm,useMemo:mm,useReducer:Uh,useRef:lm,useState:function(){return Uh(Ma)},useDebugValue:$h,useDeferredValue:function(n){var i=jn();return gm(i,Rt.memoizedState,n)},useTransition:function(){var n=Uh(Ma)[0],i=jn().memoizedState;return[n,i]},useMutableSource:em,useSyncExternalStore:tm,useId:ym,unstable_isNewReconciler:!1},bw={readContext:Fn,useCallback:pm,useContext:Fn,useEffect:Bh,useImperativeHandle:fm,useInsertionEffect:cm,useLayoutEffect:hm,useMemo:mm,useReducer:zh,useRef:lm,useState:function(){return zh(Ma)},useDebugValue:$h,useDeferredValue:function(n){var i=jn();return Rt===null?i.memoizedState=n:gm(i,Rt.memoizedState,n)},useTransition:function(){var n=zh(Ma)[0],i=jn().memoizedState;return[n,i]},useMutableSource:em,useSyncExternalStore:tm,useId:ym,unstable_isNewReconciler:!1};function rr(n,i){if(n&&n.defaultProps){i=se({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Hh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:se({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var _u={isMounted:function(n){return(n=n._reactInternals)?sn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=tn(),d=Ui(n),m=ti(c,d);m.payload=i,a!=null&&(m.callback=a),i=Li(n,m,d),i!==null&&(or(i,n,d,c),hu(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=tn(),d=Ui(n),m=ti(c,d);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=Li(n,m,d),i!==null&&(or(i,n,d,c),hu(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=tn(),c=Ui(n),d=ti(a,c);d.tag=2,i!=null&&(d.callback=i),i=Li(n,d,c),i!==null&&(or(i,n,c,a),hu(i,n,c))}};function Em(n,i,a,c,d,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,_):i.prototype&&i.prototype.isPureReactComponent?!Sa(a,c)||!Sa(d,m):!0}function Tm(n,i,a){var c=!1,d=Di,m=i.contextType;return typeof m=="object"&&m!==null?m=Fn(m):(d=un(i)?ks:Ht.current,c=i.contextTypes,m=(c=c!=null)?To(n,d):Di),i=new i(a,m),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=_u,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),i}function Im(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&_u.enqueueReplaceState(i,i.state,null)}function Wh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Nh(n);var m=i.contextType;typeof m=="object"&&m!==null?d.context=Fn(m):(m=un(i)?ks:Ht.current,d.context=To(n,m)),d.state=n.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Hh(n,i,m,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&_u.enqueueReplaceState(d,d.state,null),du(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function ko(n,i){try{var a="",c=i;do a+=Pe(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:i,stack:d,digest:null}}function qh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Kh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Dw=typeof WeakMap=="function"?WeakMap:Map;function Sm(n,i,a){a=ti(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Au||(Au=!0,ld=c),Kh(n,i)},a}function Cm(n,i,a){a=ti(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Kh(n,i)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Kh(n,i),typeof c!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})}),a}function Am(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Dw;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=Kw.bind(null,n,i,a),i.then(n,n))}function Rm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Pm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=ti(-1,1),i.tag=2,Li(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Ow=oe.ReactCurrentOwner,cn=!1;function en(n,i,a,c){i.child=n===null?Gp(i,null,a,c):Ao(i,n.child,a,c)}function xm(n,i,a,c,d){a=a.render;var m=i.ref;return Po(i,d),c=Fh(n,i,a,c,m,d),a=jh(),n!==null&&!cn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,ni(n,i,d)):(ut&&a&&Eh(i),i.flags|=1,en(n,i,c,d),i.child)}function km(n,i,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!md(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,Nm(n,i,m,c,d)):(n=bu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,(n.lanes&d)===0){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Sa,a(_,c)&&n.ref===i.ref)return ni(n,i,d)}return i.flags|=1,n=Bi(m,c),n.ref=i.ref,n.return=i,i.child=n}function Nm(n,i,a,c,d){if(n!==null){var m=n.memoizedProps;if(Sa(m,c)&&n.ref===i.ref)if(cn=!1,i.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(cn=!0);else return i.lanes=n.lanes,ni(n,i,d)}return Gh(n,i,a,c,d)}function bm(n,i,a){var c=i.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(bo,Cn),Cn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,nt(bo,Cn),Cn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,nt(bo,Cn),Cn|=c}else m!==null?(c=m.baseLanes|a,i.memoizedState=null):c=a,nt(bo,Cn),Cn|=c;return en(n,i,d,a),i.child}function Dm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Gh(n,i,a,c,d){var m=un(a)?ks:Ht.current;return m=To(i,m),Po(i,d),a=Fh(n,i,a,c,m,d),c=jh(),n!==null&&!cn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,ni(n,i,d)):(ut&&c&&Eh(i),i.flags|=1,en(n,i,a,d),i.child)}function Om(n,i,a,c,d){if(un(a)){var m=!0;ru(i)}else m=!1;if(Po(i,d),i.stateNode===null)Eu(n,i),Tm(i,a,c),Wh(i,a,c,d),c=!0;else if(n===null){var _=i.stateNode,A=i.memoizedProps;_.props=A;var k=_.context,$=a.contextType;typeof $=="object"&&$!==null?$=Fn($):($=un(a)?ks:Ht.current,$=To(i,$));var J=a.getDerivedStateFromProps,Z=typeof J=="function"||typeof _.getSnapshotBeforeUpdate=="function";Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==c||k!==$)&&Im(i,_,c,$),Vi=!1;var Y=i.memoizedState;_.state=Y,du(i,c,_,d),k=i.memoizedState,A!==c||Y!==k||ln.current||Vi?(typeof J=="function"&&(Hh(i,a,J,c),k=i.memoizedState),(A=Vi||Em(i,a,A,c,Y,k,$))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=k),_.props=c,_.state=k,_.context=$,c=A):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{_=i.stateNode,Yp(n,i),A=i.memoizedProps,$=i.type===i.elementType?A:rr(i.type,A),_.props=$,Z=i.pendingProps,Y=_.context,k=a.contextType,typeof k=="object"&&k!==null?k=Fn(k):(k=un(a)?ks:Ht.current,k=To(i,k));var ae=a.getDerivedStateFromProps;(J=typeof ae=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==Z||Y!==k)&&Im(i,_,c,k),Vi=!1,Y=i.memoizedState,_.state=Y,du(i,c,_,d);var he=i.memoizedState;A!==Z||Y!==he||ln.current||Vi?(typeof ae=="function"&&(Hh(i,a,ae,c),he=i.memoizedState),($=Vi||Em(i,a,$,c,Y,he,k)||!1)?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,he,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,he,k)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=he),_.props=c,_.state=he,_.context=k,c=$):(typeof _.componentDidUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),c=!1)}return Qh(n,i,a,c,m,d)}function Qh(n,i,a,c,d,m){Dm(n,i);var _=(i.flags&128)!==0;if(!c&&!_)return d&&jp(i,a,!1),ni(n,i,m);c=i.stateNode,Ow.current=i;var A=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&_?(i.child=Ao(i,n.child,null,m),i.child=Ao(i,null,A,m)):en(n,i,A,m),i.memoizedState=c.state,d&&jp(i,a,!0),i.child}function Vm(n){var i=n.stateNode;i.pendingContext?Mp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Mp(n,i.context,!1),bh(n,i.containerInfo)}function Lm(n,i,a,c,d){return Co(),Ch(d),i.flags|=256,en(n,i,a,c),i.child}var Yh={dehydrated:null,treeContext:null,retryLane:0};function Xh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Mm(n,i,a){var c=i.pendingProps,d=dt.current,m=!1,_=(i.flags&128)!==0,A;if((A=_)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(m=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),nt(dt,d&1),n===null)return Sh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(_=c.children,n=c.fallback,m?(c=i.mode,m=i.child,_={mode:"hidden",children:_},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=_):m=Du(_,c,0,null),n=Us(n,c,a,null),m.return=i,n.return=i,m.sibling=n,i.child=m,i.child.memoizedState=Xh(a),i.memoizedState=Yh,n):Jh(i,_));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return Vw(n,i,_,c,A,d,a);if(m){m=c.fallback,_=i.mode,d=n.child,A=d.sibling;var k={mode:"hidden",children:c.children};return(_&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=k,i.deletions=null):(c=Bi(d,k),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?m=Bi(A,m):(m=Us(m,_,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,_=n.child.memoizedState,_=_===null?Xh(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},m.memoizedState=_,m.childLanes=n.childLanes&~a,i.memoizedState=Yh,c}return m=n.child,n=m.sibling,c=Bi(m,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Jh(n,i){return i=Du({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function wu(n,i,a,c){return c!==null&&Ch(c),Ao(i,n.child,null,a),n=Jh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Vw(n,i,a,c,d,m,_){if(a)return i.flags&256?(i.flags&=-257,c=qh(Error(t(422))),wu(n,i,_,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(m=c.fallback,d=i.mode,c=Du({mode:"visible",children:c.children},d,0,null),m=Us(m,d,_,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,(i.mode&1)!==0&&Ao(i,n.child,null,_),i.child.memoizedState=Xh(_),i.memoizedState=Yh,m);if((i.mode&1)===0)return wu(n,i,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,m=Error(t(419)),c=qh(m,c,void 0),wu(n,i,_,c)}if(A=(_&n.childLanes)!==0,cn||A){if(c=Ot,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|_))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,ei(n,d),or(c,n,d,-1))}return pd(),c=qh(Error(t(421))),wu(n,i,_,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=Gw.bind(null,n),d._reactRetry=i,null):(n=m.treeContext,Sn=Ni(d.nextSibling),In=i,ut=!0,nr=null,n!==null&&(Ln[Mn++]=Jr,Ln[Mn++]=Zr,Ln[Mn++]=Ns,Jr=n.id,Zr=n.overflow,Ns=i),i=Jh(i,c.children),i.flags|=4096,i)}function Fm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),xh(n.return,i,a)}function Zh(n,i,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function jm(n,i,a){var c=i.pendingProps,d=c.revealOrder,m=c.tail;if(en(n,i,c.children,a),c=dt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Fm(n,a,i);else if(n.tag===19)Fm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(nt(dt,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&fu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Zh(i,!1,d,a,m);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&fu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Zh(i,!0,a,null,m);break;case"together":Zh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Eu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function ni(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Ls|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Bi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Bi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Lw(n,i,a){switch(i.tag){case 3:Vm(i),Co();break;case 5:Zp(i);break;case 1:un(i.type)&&ru(i);break;case 4:bh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;nt(uu,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(nt(dt,dt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Mm(n,i,a):(nt(dt,dt.current&1),n=ni(n,i,a),n!==null?n.sibling:null);nt(dt,dt.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return jm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),nt(dt,dt.current),c)break;return null;case 22:case 23:return i.lanes=0,bm(n,i,a)}return ni(n,i,a)}var Um,ed,zm,Bm;Um=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ed=function(){},zm=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,Os(Ir.current);var m=null;switch(a){case"input":d=qn(n,d),c=qn(n,c),m=[];break;case"select":d=se({},d,{value:void 0}),c=se({},c,{value:void 0}),m=[];break;case"textarea":d=yi(n,d),c=yi(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=eu)}Gn(a,c);var _;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var A=d[$];for(_ in A)A.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?m||(m=[]):(m=m||[]).push($,null));for($ in c){var k=c[$];if(A=d!=null?d[$]:void 0,c.hasOwnProperty($)&&k!==A&&(k!=null||A!=null))if($==="style")if(A){for(_ in A)!A.hasOwnProperty(_)||k&&k.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in k)k.hasOwnProperty(_)&&A[_]!==k[_]&&(a||(a={}),a[_]=k[_])}else a||(m||(m=[]),m.push($,a)),a=k;else $==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,A=A?A.__html:void 0,k!=null&&A!==k&&(m=m||[]).push($,k)):$==="children"?typeof k!="string"&&typeof k!="number"||(m=m||[]).push($,""+k):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(k!=null&&$==="onScroll"&&rt("scroll",n),m||A===k||(m=[])):(m=m||[]).push($,k))}a&&(m=m||[]).push("style",a);var $=m;(i.updateQueue=$)&&(i.flags|=4)}},Bm=function(n,i,a,c){a!==c&&(i.flags|=4)};function ja(n,i){if(!ut)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function qt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function Mw(n,i,a){var c=i.pendingProps;switch(Th(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return un(i.type)&&nu(),qt(i),null;case 3:return c=i.stateNode,xo(),it(ln),it(Ht),Vh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(au(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,nr!==null&&(hd(nr),nr=null))),ed(n,i),qt(i),null;case 5:Dh(i);var d=Os(Oa.current);if(a=i.type,n!==null&&i.stateNode!=null)zm(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return qt(i),null}if(n=Os(Ir.current),au(i)){c=i.stateNode,a=i.type;var m=i.memoizedProps;switch(c[Tr]=i,c[xa]=m,n=(i.mode&1)!==0,a){case"dialog":rt("cancel",c),rt("close",c);break;case"iframe":case"object":case"embed":rt("load",c);break;case"video":case"audio":for(d=0;d<Aa.length;d++)rt(Aa[d],c);break;case"source":rt("error",c);break;case"img":case"image":case"link":rt("error",c),rt("load",c);break;case"details":rt("toggle",c);break;case"input":mi(c,m),rt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},rt("invalid",c);break;case"textarea":cr(c,m),rt("invalid",c)}Gn(a,m),d=null;for(var _ in m)if(m.hasOwnProperty(_)){var A=m[_];_==="children"?typeof A=="string"?c.textContent!==A&&(m.suppressHydrationWarning!==!0&&Zl(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(m.suppressHydrationWarning!==!0&&Zl(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(_)&&A!=null&&_==="onScroll"&&rt("scroll",c)}switch(a){case"input":Hn(c),Fr(c,m,!0);break;case"textarea":Hn(c),dr(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=eu)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=mt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=_.createElement(a,{is:c.is}):(n=_.createElement(a),a==="select"&&(_=n,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):n=_.createElementNS(n,a),n[Tr]=i,n[xa]=c,Um(n,i,!1,!1),i.stateNode=n;e:{switch(_=Br(a,c),a){case"dialog":rt("cancel",n),rt("close",n),d=c;break;case"iframe":case"object":case"embed":rt("load",n),d=c;break;case"video":case"audio":for(d=0;d<Aa.length;d++)rt(Aa[d],n);d=c;break;case"source":rt("error",n),d=c;break;case"img":case"image":case"link":rt("error",n),rt("load",n),d=c;break;case"details":rt("toggle",n),d=c;break;case"input":mi(n,c),d=qn(n,c),rt("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=se({},c,{value:void 0}),rt("invalid",n);break;case"textarea":cr(n,c),d=yi(n,c),rt("invalid",n);break;default:d=c}Gn(a,d),A=d;for(m in A)if(A.hasOwnProperty(m)){var k=A[m];m==="style"?vi(n,k):m==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Ur(n,k)):m==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&yn(n,k):typeof k=="number"&&yn(n,""+k):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?k!=null&&m==="onScroll"&&rt("scroll",n):k!=null&&K(n,m,k,_))}switch(a){case"input":Hn(n),Fr(n,c,!1);break;case"textarea":Hn(n),dr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Be(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?Pn(n,!!c.multiple,m,!1):c.defaultValue!=null&&Pn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=eu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return qt(i),null;case 6:if(n&&i.stateNode!=null)Bm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Os(Oa.current),Os(Ir.current),au(i)){if(c=i.stateNode,a=i.memoizedProps,c[Tr]=i,(m=c.nodeValue!==a)&&(n=In,n!==null))switch(n.tag){case 3:Zl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Zl(c.nodeValue,a,(n.mode&1)!==0)}m&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Tr]=i,i.stateNode=c}return qt(i),null;case 13:if(it(dt),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ut&&Sn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Wp(),Co(),i.flags|=98560,m=!1;else if(m=au(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Tr]=i}else Co(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),m=!1}else nr!==null&&(hd(nr),nr=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(dt.current&1)!==0?Pt===0&&(Pt=3):pd())),i.updateQueue!==null&&(i.flags|=4),qt(i),null);case 4:return xo(),ed(n,i),n===null&&Ra(i.stateNode.containerInfo),qt(i),null;case 10:return Ph(i.type._context),qt(i),null;case 17:return un(i.type)&&nu(),qt(i),null;case 19:if(it(dt),m=i.memoizedState,m===null)return qt(i),null;if(c=(i.flags&128)!==0,_=m.rendering,_===null)if(c)ja(m,!1);else{if(Pt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(_=fu(n),_!==null){for(i.flags|=128,ja(m,!1),c=_.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)m=a,n=c,m.flags&=14680066,_=m.alternate,_===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=_.childLanes,m.lanes=_.lanes,m.child=_.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=_.memoizedProps,m.memoizedState=_.memoizedState,m.updateQueue=_.updateQueue,m.type=_.type,n=_.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return nt(dt,dt.current&1|2),i.child}n=n.sibling}m.tail!==null&&tt()>Do&&(i.flags|=128,c=!0,ja(m,!1),i.lanes=4194304)}else{if(!c)if(n=fu(_),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),ja(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!ut)return qt(i),null}else 2*tt()-m.renderingStartTime>Do&&a!==1073741824&&(i.flags|=128,c=!0,ja(m,!1),i.lanes=4194304);m.isBackwards?(_.sibling=i.child,i.child=_):(a=m.last,a!==null?a.sibling=_:i.child=_,m.last=_)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=tt(),i.sibling=null,a=dt.current,nt(dt,c?a&1|2:a&1),i):(qt(i),null);case 22:case 23:return fd(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(Cn&1073741824)!==0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Fw(n,i){switch(Th(i),i.tag){case 1:return un(i.type)&&nu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return xo(),it(ln),it(Ht),Vh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Dh(i),null;case 13:if(it(dt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Co()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return it(dt),null;case 4:return xo(),null;case 10:return Ph(i.type._context),null;case 22:case 23:return fd(),null;case 24:return null;default:return null}}var Tu=!1,Kt=!1,jw=typeof WeakSet=="function"?WeakSet:Set,ce=null;function No(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){yt(n,i,c)}else a.current=null}function td(n,i,a){try{a()}catch(c){yt(n,i,c)}}var $m=!1;function Uw(n,i){if(fh=Pi,n=Ep(),sh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,A=-1,k=-1,$=0,J=0,Z=n,Y=null;t:for(;;){for(var ae;Z!==a||d!==0&&Z.nodeType!==3||(A=_+d),Z!==m||c!==0&&Z.nodeType!==3||(k=_+c),Z.nodeType===3&&(_+=Z.nodeValue.length),(ae=Z.firstChild)!==null;)Y=Z,Z=ae;for(;;){if(Z===n)break t;if(Y===a&&++$===d&&(A=_),Y===m&&++J===c&&(k=_),(ae=Z.nextSibling)!==null)break;Z=Y,Y=Z.parentNode}Z=ae}a=A===-1||k===-1?null:{start:A,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(ph={focusedElem:n,selectionRange:a},Pi=!1,ce=i;ce!==null;)if(i=ce,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ce=n;else for(;ce!==null;){i=ce;try{var he=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var pe=he.memoizedProps,vt=he.memoizedState,F=i.stateNode,b=F.getSnapshotBeforeUpdate(i.elementType===i.type?pe:rr(i.type,pe),vt);F.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){yt(i,i.return,ee)}if(n=i.sibling,n!==null){n.return=i.return,ce=n;break}ce=i.return}return he=$m,$m=!1,he}function Ua(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&td(i,a,m)}d=d.next}while(d!==c)}}function Iu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function nd(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Hm(n){var i=n.alternate;i!==null&&(n.alternate=null,Hm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Tr],delete i[xa],delete i[vh],delete i[Tw],delete i[Iw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Wm(n){return n.tag===5||n.tag===3||n.tag===4}function qm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Wm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=eu));else if(c!==4&&(n=n.child,n!==null))for(rd(n,i,a),n=n.sibling;n!==null;)rd(n,i,a),n=n.sibling}function id(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(id(n,i,a),n=n.sibling;n!==null;)id(n,i,a),n=n.sibling}var jt=null,ir=!1;function Mi(n,i,a){for(a=a.child;a!==null;)Km(n,i,a),a=a.sibling}function Km(n,i,a){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Ts,a)}catch{}switch(a.tag){case 5:Kt||No(a,i);case 6:var c=jt,d=ir;jt=null,Mi(n,i,a),jt=c,ir=d,jt!==null&&(ir?(n=jt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):jt.removeChild(a.stateNode));break;case 18:jt!==null&&(ir?(n=jt,a=a.stateNode,n.nodeType===8?yh(n.parentNode,a):n.nodeType===1&&yh(n,a),Zn(n)):yh(jt,a.stateNode));break;case 4:c=jt,d=ir,jt=a.stateNode.containerInfo,ir=!0,Mi(n,i,a),jt=c,ir=d;break;case 0:case 11:case 14:case 15:if(!Kt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,_=m.destroy;m=m.tag,_!==void 0&&((m&2)!==0||(m&4)!==0)&&td(a,i,_),d=d.next}while(d!==c)}Mi(n,i,a);break;case 1:if(!Kt&&(No(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){yt(a,i,A)}Mi(n,i,a);break;case 21:Mi(n,i,a);break;case 22:a.mode&1?(Kt=(c=Kt)||a.memoizedState!==null,Mi(n,i,a),Kt=c):Mi(n,i,a);break;default:Mi(n,i,a)}}function Gm(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new jw),i.forEach(function(c){var d=Qw.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function sr(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,_=i,A=_;e:for(;A!==null;){switch(A.tag){case 5:jt=A.stateNode,ir=!1;break e;case 3:jt=A.stateNode.containerInfo,ir=!0;break e;case 4:jt=A.stateNode.containerInfo,ir=!0;break e}A=A.return}if(jt===null)throw Error(t(160));Km(m,_,d),jt=null,ir=!1;var k=d.alternate;k!==null&&(k.return=null),d.return=null}catch($){yt(d,i,$)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Qm(i,n),i=i.sibling}function Qm(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(sr(i,n),Cr(n),c&4){try{Ua(3,n,n.return),Iu(3,n)}catch(pe){yt(n,n.return,pe)}try{Ua(5,n,n.return)}catch(pe){yt(n,n.return,pe)}}break;case 1:sr(i,n),Cr(n),c&512&&a!==null&&No(a,a.return);break;case 5:if(sr(i,n),Cr(n),c&512&&a!==null&&No(a,a.return),n.flags&32){var d=n.stateNode;try{yn(d,"")}catch(pe){yt(n,n.return,pe)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,_=a!==null?a.memoizedProps:m,A=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{A==="input"&&m.type==="radio"&&m.name!=null&&Kn(d,m),Br(A,_);var $=Br(A,m);for(_=0;_<k.length;_+=2){var J=k[_],Z=k[_+1];J==="style"?vi(d,Z):J==="dangerouslySetInnerHTML"?Ur(d,Z):J==="children"?yn(d,Z):K(d,J,Z,$)}switch(A){case"input":gi(d,m);break;case"textarea":hr(d,m);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ae=m.value;ae!=null?Pn(d,!!m.multiple,ae,!1):Y!==!!m.multiple&&(m.defaultValue!=null?Pn(d,!!m.multiple,m.defaultValue,!0):Pn(d,!!m.multiple,m.multiple?[]:"",!1))}d[xa]=m}catch(pe){yt(n,n.return,pe)}}break;case 6:if(sr(i,n),Cr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(pe){yt(n,n.return,pe)}}break;case 3:if(sr(i,n),Cr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Zn(i.containerInfo)}catch(pe){yt(n,n.return,pe)}break;case 4:sr(i,n),Cr(n);break;case 13:sr(i,n),Cr(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(ad=tt())),c&4&&Gm(n);break;case 22:if(J=a!==null&&a.memoizedState!==null,n.mode&1?(Kt=($=Kt)||J,sr(i,n),Kt=$):sr(i,n),Cr(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!J&&(n.mode&1)!==0)for(ce=n,J=n.child;J!==null;){for(Z=ce=J;ce!==null;){switch(Y=ce,ae=Y.child,Y.tag){case 0:case 11:case 14:case 15:Ua(4,Y,Y.return);break;case 1:No(Y,Y.return);var he=Y.stateNode;if(typeof he.componentWillUnmount=="function"){c=Y,a=Y.return;try{i=c,he.props=i.memoizedProps,he.state=i.memoizedState,he.componentWillUnmount()}catch(pe){yt(c,a,pe)}}break;case 5:No(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Jm(Z);continue}}ae!==null?(ae.return=Y,ce=ae):Jm(Z)}J=J.sibling}e:for(J=null,Z=n;;){if(Z.tag===5){if(J===null){J=Z;try{d=Z.stateNode,$?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(A=Z.stateNode,k=Z.memoizedProps.style,_=k!=null&&k.hasOwnProperty("display")?k.display:null,A.style.display=pr("display",_))}catch(pe){yt(n,n.return,pe)}}}else if(Z.tag===6){if(J===null)try{Z.stateNode.nodeValue=$?"":Z.memoizedProps}catch(pe){yt(n,n.return,pe)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;J===Z&&(J=null),Z=Z.return}J===Z&&(J=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:sr(i,n),Cr(n),c&4&&Gm(n);break;case 21:break;default:sr(i,n),Cr(n)}}function Cr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Wm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(yn(d,""),c.flags&=-33);var m=qm(n);id(n,m,d);break;case 3:case 4:var _=c.stateNode.containerInfo,A=qm(n);rd(n,A,_);break;default:throw Error(t(161))}}catch(k){yt(n,n.return,k)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function zw(n,i,a){ce=n,Ym(n)}function Ym(n,i,a){for(var c=(n.mode&1)!==0;ce!==null;){var d=ce,m=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||Tu;if(!_){var A=d.alternate,k=A!==null&&A.memoizedState!==null||Kt;A=Tu;var $=Kt;if(Tu=_,(Kt=k)&&!$)for(ce=d;ce!==null;)_=ce,k=_.child,_.tag===22&&_.memoizedState!==null?Zm(d):k!==null?(k.return=_,ce=k):Zm(d);for(;m!==null;)ce=m,Ym(m),m=m.sibling;ce=d,Tu=A,Kt=$}Xm(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,ce=m):Xm(n)}}function Xm(n){for(;ce!==null;){var i=ce;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Kt||Iu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Kt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:rr(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&Jp(i,m,c);break;case 3:var _=i.updateQueue;if(_!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Jp(i,_,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var k=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var $=i.alternate;if($!==null){var J=$.memoizedState;if(J!==null){var Z=J.dehydrated;Z!==null&&Zn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Kt||i.flags&512&&nd(i)}catch(Y){yt(i,i.return,Y)}}if(i===n){ce=null;break}if(a=i.sibling,a!==null){a.return=i.return,ce=a;break}ce=i.return}}function Jm(n){for(;ce!==null;){var i=ce;if(i===n){ce=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ce=a;break}ce=i.return}}function Zm(n){for(;ce!==null;){var i=ce;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Iu(4,i)}catch(k){yt(i,a,k)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(k){yt(i,d,k)}}var m=i.return;try{nd(i)}catch(k){yt(i,m,k)}break;case 5:var _=i.return;try{nd(i)}catch(k){yt(i,_,k)}}}catch(k){yt(i,i.return,k)}if(i===n){ce=null;break}var A=i.sibling;if(A!==null){A.return=i.return,ce=A;break}ce=i.return}}var Bw=Math.ceil,Su=oe.ReactCurrentDispatcher,sd=oe.ReactCurrentOwner,Un=oe.ReactCurrentBatchConfig,We=0,Ot=null,Tt=null,Ut=0,Cn=0,bo=bi(0),Pt=0,za=null,Ls=0,Cu=0,od=0,Ba=null,hn=null,ad=0,Do=1/0,ri=null,Au=!1,ld=null,Fi=null,Ru=!1,ji=null,Pu=0,$a=0,ud=null,xu=-1,ku=0;function tn(){return(We&6)!==0?tt():xu!==-1?xu:xu=tt()}function Ui(n){return(n.mode&1)===0?1:(We&2)!==0&&Ut!==0?Ut&-Ut:Cw.transition!==null?(ku===0&&(ku=Ss()),ku):(n=ze,n!==0||(n=window.event,n=n===void 0?16:ya(n.type)),n)}function or(n,i,a,c){if(50<$a)throw $a=0,ud=null,Error(t(185));Si(n,a,c),((We&2)===0||n!==Ot)&&(n===Ot&&((We&2)===0&&(Cu|=a),Pt===4&&zi(n,Ut)),dn(n,c),a===1&&We===0&&(i.mode&1)===0&&(Do=tt()+500,iu&&Oi()))}function dn(n,i){var a=n.callbackNode;Wr(n,i);var c=Is(n,n===Ot?Ut:0);if(c===0)a!==null&&da(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&da(a),i===1)n.tag===0?Sw(tg.bind(null,n)):Up(tg.bind(null,n)),ww(function(){(We&6)===0&&Oi()}),a=null;else{switch(Ai(c)){case 1:a=Es;break;case 4:a=Ei;break;case 16:a=Dn;break;case 536870912:a=kl;break;default:a=Dn}a=ug(a,eg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function eg(n,i){if(xu=-1,ku=0,(We&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Oo()&&n.callbackNode!==a)return null;var c=Is(n,n===Ot?Ut:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Nu(n,c);else{i=c;var d=We;We|=2;var m=rg();(Ot!==n||Ut!==i)&&(ri=null,Do=tt()+500,Fs(n,i));do try{Ww();break}catch(A){ng(n,A)}while(!0);Rh(),Su.current=m,We=d,Tt!==null?i=0:(Ot=null,Ut=0,i=Pt)}if(i!==0){if(i===2&&(d=wn(n),d!==0&&(c=d,i=cd(n,d))),i===1)throw a=za,Fs(n,0),zi(n,c),dn(n,tt()),a;if(i===6)zi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!$w(d)&&(i=Nu(n,c),i===2&&(m=wn(n),m!==0&&(c=m,i=cd(n,m))),i===1))throw a=za,Fs(n,0),zi(n,c),dn(n,tt()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:js(n,hn,ri);break;case 3:if(zi(n,c),(c&130023424)===c&&(i=ad+500-tt(),10<i)){if(Is(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){tn(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=gh(js.bind(null,n,hn,ri),i);break}js(n,hn,ri);break;case 4:if(zi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var _=31-Jt(c);m=1<<_,_=i[_],_>d&&(d=_),c&=~m}if(c=d,c=tt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Bw(c/1960))-c,10<c){n.timeoutHandle=gh(js.bind(null,n,hn,ri),c);break}js(n,hn,ri);break;case 5:js(n,hn,ri);break;default:throw Error(t(329))}}}return dn(n,tt()),n.callbackNode===a?eg.bind(null,n):null}function cd(n,i){var a=Ba;return n.current.memoizedState.isDehydrated&&(Fs(n,i).flags|=256),n=Nu(n,i),n!==2&&(i=hn,hn=a,i!==null&&hd(i)),n}function hd(n){hn===null?hn=n:hn.push.apply(hn,n)}function $w(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!tr(m(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zi(n,i){for(i&=~od,i&=~Cu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Jt(i),c=1<<a;n[a]=-1,i&=~c}}function tg(n){if((We&6)!==0)throw Error(t(327));Oo();var i=Is(n,0);if((i&1)===0)return dn(n,tt()),null;var a=Nu(n,i);if(n.tag!==0&&a===2){var c=wn(n);c!==0&&(i=c,a=cd(n,c))}if(a===1)throw a=za,Fs(n,0),zi(n,i),dn(n,tt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,js(n,hn,ri),dn(n,tt()),null}function dd(n,i){var a=We;We|=1;try{return n(i)}finally{We=a,We===0&&(Do=tt()+500,iu&&Oi())}}function Ms(n){ji!==null&&ji.tag===0&&(We&6)===0&&Oo();var i=We;We|=1;var a=Un.transition,c=ze;try{if(Un.transition=null,ze=1,n)return n()}finally{ze=c,Un.transition=a,We=i,(We&6)===0&&Oi()}}function fd(){Cn=bo.current,it(bo)}function Fs(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,_w(a)),Tt!==null)for(a=Tt.return;a!==null;){var c=a;switch(Th(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&nu();break;case 3:xo(),it(ln),it(Ht),Vh();break;case 5:Dh(c);break;case 4:xo();break;case 13:it(dt);break;case 19:it(dt);break;case 10:Ph(c.type._context);break;case 22:case 23:fd()}a=a.return}if(Ot=n,Tt=n=Bi(n.current,null),Ut=Cn=i,Pt=0,za=null,od=Cu=Ls=0,hn=Ba=null,Ds!==null){for(i=0;i<Ds.length;i++)if(a=Ds[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var _=m.next;m.next=d,c.next=_}a.pending=c}Ds=null}return n}function ng(n,i){do{var a=Tt;try{if(Rh(),pu.current=vu,mu){for(var c=ft.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}mu=!1}if(Vs=0,Dt=Rt=ft=null,Va=!1,La=0,sd.current=null,a===null||a.return===null){Pt=1,za=i,Tt=null;break}e:{var m=n,_=a.return,A=a,k=i;if(i=Ut,A.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var $=k,J=A,Z=J.tag;if((J.mode&1)===0&&(Z===0||Z===11||Z===15)){var Y=J.alternate;Y?(J.updateQueue=Y.updateQueue,J.memoizedState=Y.memoizedState,J.lanes=Y.lanes):(J.updateQueue=null,J.memoizedState=null)}var ae=Rm(_);if(ae!==null){ae.flags&=-257,Pm(ae,_,A,m,i),ae.mode&1&&Am(m,$,i),i=ae,k=$;var he=i.updateQueue;if(he===null){var pe=new Set;pe.add(k),i.updateQueue=pe}else he.add(k);break e}else{if((i&1)===0){Am(m,$,i),pd();break e}k=Error(t(426))}}else if(ut&&A.mode&1){var vt=Rm(_);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),Pm(vt,_,A,m,i),Ch(ko(k,A));break e}}m=k=ko(k,A),Pt!==4&&(Pt=2),Ba===null?Ba=[m]:Ba.push(m),m=_;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var F=Sm(m,k,i);Xp(m,F);break e;case 1:A=k;var b=m.type,U=m.stateNode;if((m.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Fi===null||!Fi.has(U)))){m.flags|=65536,i&=-i,m.lanes|=i;var ee=Cm(m,A,i);Xp(m,ee);break e}}m=m.return}while(m!==null)}sg(a)}catch(ve){i=ve,Tt===a&&a!==null&&(Tt=a=a.return);continue}break}while(!0)}function rg(){var n=Su.current;return Su.current=vu,n===null?vu:n}function pd(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Ot===null||(Ls&268435455)===0&&(Cu&268435455)===0||zi(Ot,Ut)}function Nu(n,i){var a=We;We|=2;var c=rg();(Ot!==n||Ut!==i)&&(ri=null,Fs(n,i));do try{Hw();break}catch(d){ng(n,d)}while(!0);if(Rh(),We=a,Su.current=c,Tt!==null)throw Error(t(261));return Ot=null,Ut=0,Pt}function Hw(){for(;Tt!==null;)ig(Tt)}function Ww(){for(;Tt!==null&&!Pl();)ig(Tt)}function ig(n){var i=lg(n.alternate,n,Cn);n.memoizedProps=n.pendingProps,i===null?sg(n):Tt=i,sd.current=null}function sg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=Mw(a,i,Cn),a!==null){Tt=a;return}}else{if(a=Fw(a,i),a!==null){a.flags&=32767,Tt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Pt=6,Tt=null;return}}if(i=i.sibling,i!==null){Tt=i;return}Tt=i=n}while(i!==null);Pt===0&&(Pt=5)}function js(n,i,a){var c=ze,d=Un.transition;try{Un.transition=null,ze=1,qw(n,i,a,c)}finally{Un.transition=d,ze=c}return null}function qw(n,i,a,c){do Oo();while(ji!==null);if((We&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(et(n,m),n===Ot&&(Tt=Ot=null,Ut=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ru||(Ru=!0,ug(Dn,function(){return Oo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Un.transition,Un.transition=null;var _=ze;ze=1;var A=We;We|=4,sd.current=null,Uw(n,a),Qm(a,n),dw(ph),Pi=!!fh,ph=fh=null,n.current=a,zw(a),Xc(),We=A,ze=_,Un.transition=m}else n.current=a;if(Ru&&(Ru=!1,ji=n,Pu=d),m=n.pendingLanes,m===0&&(Fi=null),Nl(a.stateNode),dn(n,tt()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Au)throw Au=!1,n=ld,ld=null,n;return(Pu&1)!==0&&n.tag!==0&&Oo(),m=n.pendingLanes,(m&1)!==0?n===ud?$a++:($a=0,ud=n):$a=0,Oi(),null}function Oo(){if(ji!==null){var n=Ai(Pu),i=Un.transition,a=ze;try{if(Un.transition=null,ze=16>n?16:n,ji===null)var c=!1;else{if(n=ji,ji=null,Pu=0,(We&6)!==0)throw Error(t(331));var d=We;for(We|=4,ce=n.current;ce!==null;){var m=ce,_=m.child;if((ce.flags&16)!==0){var A=m.deletions;if(A!==null){for(var k=0;k<A.length;k++){var $=A[k];for(ce=$;ce!==null;){var J=ce;switch(J.tag){case 0:case 11:case 15:Ua(8,J,m)}var Z=J.child;if(Z!==null)Z.return=J,ce=Z;else for(;ce!==null;){J=ce;var Y=J.sibling,ae=J.return;if(Hm(J),J===$){ce=null;break}if(Y!==null){Y.return=ae,ce=Y;break}ce=ae}}}var he=m.alternate;if(he!==null){var pe=he.child;if(pe!==null){he.child=null;do{var vt=pe.sibling;pe.sibling=null,pe=vt}while(pe!==null)}}ce=m}}if((m.subtreeFlags&2064)!==0&&_!==null)_.return=m,ce=_;else e:for(;ce!==null;){if(m=ce,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Ua(9,m,m.return)}var F=m.sibling;if(F!==null){F.return=m.return,ce=F;break e}ce=m.return}}var b=n.current;for(ce=b;ce!==null;){_=ce;var U=_.child;if((_.subtreeFlags&2064)!==0&&U!==null)U.return=_,ce=U;else e:for(_=b;ce!==null;){if(A=ce,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Iu(9,A)}}catch(ve){yt(A,A.return,ve)}if(A===_){ce=null;break e}var ee=A.sibling;if(ee!==null){ee.return=A.return,ce=ee;break e}ce=A.return}}if(We=d,Oi(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Ts,n)}catch{}c=!0}return c}finally{ze=a,Un.transition=i}}return!1}function og(n,i,a){i=ko(a,i),i=Sm(n,i,1),n=Li(n,i,1),i=tn(),n!==null&&(Si(n,1,i),dn(n,i))}function yt(n,i,a){if(n.tag===3)og(n,n,a);else for(;i!==null;){if(i.tag===3){og(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Fi===null||!Fi.has(c))){n=ko(a,n),n=Cm(i,n,1),i=Li(i,n,1),n=tn(),i!==null&&(Si(i,1,n),dn(i,n));break}}i=i.return}}function Kw(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=tn(),n.pingedLanes|=n.suspendedLanes&a,Ot===n&&(Ut&a)===a&&(Pt===4||Pt===3&&(Ut&130023424)===Ut&&500>tt()-ad?Fs(n,0):od|=a),dn(n,i)}function ag(n,i){i===0&&((n.mode&1)===0?i=1:(i=no,no<<=1,(no&130023424)===0&&(no=4194304)));var a=tn();n=ei(n,i),n!==null&&(Si(n,i,a),dn(n,a))}function Gw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),ag(n,a)}function Qw(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),ag(n,a)}var lg;lg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||ln.current)cn=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return cn=!1,Lw(n,i,a);cn=(n.flags&131072)!==0}else cn=!1,ut&&(i.flags&1048576)!==0&&zp(i,ou,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Eu(n,i),n=i.pendingProps;var d=To(i,Ht.current);Po(i,a),d=Fh(null,i,c,n,d,a);var m=jh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,un(c)?(m=!0,ru(i)):m=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Nh(i),d.updater=_u,i.stateNode=d,d._reactInternals=i,Wh(i,c,n,a),i=Qh(null,i,c,!0,m,a)):(i.tag=0,ut&&m&&Eh(i),en(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Eu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=Xw(c),n=rr(c,n),d){case 0:i=Gh(null,i,c,n,a);break e;case 1:i=Om(null,i,c,n,a);break e;case 11:i=xm(null,i,c,n,a);break e;case 14:i=km(null,i,c,rr(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:rr(c,d),Gh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:rr(c,d),Om(n,i,c,d,a);case 3:e:{if(Vm(i),n===null)throw Error(t(387));c=i.pendingProps,m=i.memoizedState,d=m.element,Yp(n,i),du(i,c,null,a);var _=i.memoizedState;if(c=_.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){d=ko(Error(t(423)),i),i=Lm(n,i,c,a,d);break e}else if(c!==d){d=ko(Error(t(424)),i),i=Lm(n,i,c,a,d);break e}else for(Sn=Ni(i.stateNode.containerInfo.firstChild),In=i,ut=!0,nr=null,a=Gp(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Co(),c===d){i=ni(n,i,a);break e}en(n,i,c,a)}i=i.child}return i;case 5:return Zp(i),n===null&&Sh(i),c=i.type,d=i.pendingProps,m=n!==null?n.memoizedProps:null,_=d.children,mh(c,d)?_=null:m!==null&&mh(c,m)&&(i.flags|=32),Dm(n,i),en(n,i,_,a),i.child;case 6:return n===null&&Sh(i),null;case 13:return Mm(n,i,a);case 4:return bh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Ao(i,null,c,a):en(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:rr(c,d),xm(n,i,c,d,a);case 7:return en(n,i,i.pendingProps,a),i.child;case 8:return en(n,i,i.pendingProps.children,a),i.child;case 12:return en(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,m=i.memoizedProps,_=d.value,nt(uu,c._currentValue),c._currentValue=_,m!==null)if(tr(m.value,_)){if(m.children===d.children&&!ln.current){i=ni(n,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var A=m.dependencies;if(A!==null){_=m.child;for(var k=A.firstContext;k!==null;){if(k.context===c){if(m.tag===1){k=ti(-1,a&-a),k.tag=2;var $=m.updateQueue;if($!==null){$=$.shared;var J=$.pending;J===null?k.next=k:(k.next=J.next,J.next=k),$.pending=k}}m.lanes|=a,k=m.alternate,k!==null&&(k.lanes|=a),xh(m.return,a,i),A.lanes|=a;break}k=k.next}}else if(m.tag===10)_=m.type===i.type?null:m.child;else if(m.tag===18){if(_=m.return,_===null)throw Error(t(341));_.lanes|=a,A=_.alternate,A!==null&&(A.lanes|=a),xh(_,a,i),_=m.sibling}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===i){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}en(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,Po(i,a),d=Fn(d),c=c(d),i.flags|=1,en(n,i,c,a),i.child;case 14:return c=i.type,d=rr(c,i.pendingProps),d=rr(c.type,d),km(n,i,c,d,a);case 15:return Nm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:rr(c,d),Eu(n,i),i.tag=1,un(c)?(n=!0,ru(i)):n=!1,Po(i,a),Tm(i,c,d),Wh(i,c,d,a),Qh(null,i,c,!0,n,a);case 19:return jm(n,i,a);case 22:return bm(n,i,a)}throw Error(t(156,i.tag))};function ug(n,i){return eo(n,i)}function Yw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(n,i,a,c){return new Yw(n,i,a,c)}function md(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Xw(n){if(typeof n=="function")return md(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===de)return 14}return 2}function Bi(n,i){var a=n.alternate;return a===null?(a=zn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function bu(n,i,a,c,d,m){var _=2;if(c=n,typeof n=="function")md(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case N:return Us(a.children,d,m,i);case C:_=8,d|=8;break;case P:return n=zn(12,a,i,d|2),n.elementType=P,n.lanes=m,n;case R:return n=zn(13,a,i,d),n.elementType=R,n.lanes=m,n;case we:return n=zn(19,a,i,d),n.elementType=we,n.lanes=m,n;case me:return Du(a,d,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:_=10;break e;case D:_=9;break e;case O:_=11;break e;case de:_=14;break e;case Ve:_=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=zn(_,a,i,d),i.elementType=n,i.type=c,i.lanes=m,i}function Us(n,i,a,c){return n=zn(7,n,c,i),n.lanes=a,n}function Du(n,i,a,c){return n=zn(22,n,c,i),n.elementType=me,n.lanes=a,n.stateNode={isHidden:!1},n}function gd(n,i,a){return n=zn(6,n,null,i),n.lanes=a,n}function yd(n,i,a){return i=zn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Jw(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ii(0),this.expirationTimes=Ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function vd(n,i,a,c,d,m,_,A,k){return n=new Jw(n,i,a,A,k),i===1?(i=1,m===!0&&(i|=8)):i=0,m=zn(3,null,null,i),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(m),n}function Zw(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ne,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function cg(n){if(!n)return Di;n=n._reactInternals;e:{if(sn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(un(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(un(a))return Fp(n,a,i)}return i}function hg(n,i,a,c,d,m,_,A,k){return n=vd(a,c,!0,n,d,m,_,A,k),n.context=cg(null),a=n.current,c=tn(),d=Ui(a),m=ti(c,d),m.callback=i??null,Li(a,m,d),n.current.lanes=d,Si(n,d,c),dn(n,c),n}function Ou(n,i,a,c){var d=i.current,m=tn(),_=Ui(d);return a=cg(a),i.context===null?i.context=a:i.pendingContext=a,i=ti(m,_),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Li(d,i,_),n!==null&&(or(n,d,_,m),hu(n,d,_)),_}function Vu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function dg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function _d(n,i){dg(n,i),(n=n.alternate)&&dg(n,i)}function eE(){return null}var fg=typeof reportError=="function"?reportError:function(n){console.error(n)};function wd(n){this._internalRoot=n}Lu.prototype.render=wd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Ou(n,i,null,null)},Lu.prototype.unmount=wd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Ms(function(){Ou(null,n,null,null)}),i[Yr]=null}};function Lu(n){this._internalRoot=n}Lu.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ll();n={blockedOn:null,target:n,priority:i};for(var a=0;a<vr.length&&i!==0&&i<vr[a].priority;a++);vr.splice(a,0,n),a===0&&jl(n)}};function Ed(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Mu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function pg(){}function tE(n,i,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var $=Vu(_);m.call($)}}var _=hg(i,c,n,0,null,!1,!1,"",pg);return n._reactRootContainer=_,n[Yr]=_.current,Ra(n.nodeType===8?n.parentNode:n),Ms(),_}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var $=Vu(k);A.call($)}}var k=vd(n,0,!1,null,null,!1,!1,"",pg);return n._reactRootContainer=k,n[Yr]=k.current,Ra(n.nodeType===8?n.parentNode:n),Ms(function(){Ou(i,k,a,c)}),k}function Fu(n,i,a,c,d){var m=a._reactRootContainer;if(m){var _=m;if(typeof d=="function"){var A=d;d=function(){var k=Vu(_);A.call(k)}}Ou(i,_,n,d)}else _=tE(a,i,n,d,c);return Vu(_)}Ol=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ti(i.pendingLanes);a!==0&&(Ci(i,a|1),dn(i,tt()),(We&6)===0&&(Do=tt()+500,Oi()))}break;case 13:Ms(function(){var c=ei(n,1);if(c!==null){var d=tn();or(c,n,1,d)}}),_d(n,1)}},ro=function(n){if(n.tag===13){var i=ei(n,134217728);if(i!==null){var a=tn();or(i,n,134217728,a)}_d(n,134217728)}},Vl=function(n){if(n.tag===13){var i=Ui(n),a=ei(n,i);if(a!==null){var c=tn();or(a,n,i,c)}_d(n,i)}},Ll=function(){return ze},Ml=function(n,i){var a=ze;try{return ze=n,i()}finally{ze=a}},_i=function(n,i,a){switch(i){case"input":if(gi(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=tu(c);if(!d)throw Error(t(90));ur(c),gi(c,d)}}}break;case"textarea":hr(n,a);break;case"select":i=a.value,i!=null&&Pn(n,!!a.multiple,i,!1)}},gr=dd,_s=Ms;var nE={usingClientEntryPoint:!1,Events:[ka,wo,tu,bn,vs,dd]},Ha={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rE={bundleType:Ha.bundleType,version:Ha.version,rendererPackageName:Ha.rendererPackageName,rendererConfig:Ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ha(n),n===null?null:n.stateNode},findFiberByHostInstance:Ha.findFiberByHostInstance||eE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{Ts=ju.inject(rE),_n=ju}catch{}}return fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nE,fn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ed(i))throw Error(t(200));return Zw(n,i,null,a)},fn.createRoot=function(n,i){if(!Ed(n))throw Error(t(299));var a=!1,c="",d=fg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=vd(n,1,!1,null,null,a,!1,c,d),n[Yr]=i.current,Ra(n.nodeType===8?n.parentNode:n),new wd(i)},fn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ha(i),n=n===null?null:n.stateNode,n},fn.flushSync=function(n){return Ms(n)},fn.hydrate=function(n,i,a){if(!Mu(i))throw Error(t(200));return Fu(null,n,i,!0,a)},fn.hydrateRoot=function(n,i,a){if(!Ed(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",_=fg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),i=hg(i,null,n,1,a??null,d,!1,m,_),n[Yr]=i.current,Ra(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Lu(i)},fn.render=function(n,i,a){if(!Mu(i))throw Error(t(200));return Fu(null,n,i,!1,a)},fn.unmountComponentAtNode=function(n){if(!Mu(n))throw Error(t(40));return n._reactRootContainer?(Ms(function(){Fu(null,null,n,!1,function(){n._reactRootContainer=null,n[Yr]=null})}),!0):!1},fn.unstable_batchedUpdates=dd,fn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Mu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Fu(n,i,a,!1,c)},fn.version="18.3.1-next-f1338f8080-20240426",fn}var Tg;function fv(){if(Tg)return Sd.exports;Tg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sd.exports=dE(),Sd.exports}var Ig;function fE(){if(Ig)return Uu;Ig=1;var r=fv();return Uu.createRoot=r.createRoot,Uu.hydrateRoot=r.hydrateRoot,Uu}var pE=fE();const mE=dv(pE);fv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sl(){return sl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},sl.apply(this,arguments)}var Xi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Xi||(Xi={}));const Sg="popstate";function gE(r){r===void 0&&(r={});function e(s,o){let{pathname:l,search:h,hash:f}=s.location;return jd("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:oc(o)}return vE(e,t,null,r)}function Ct(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function pv(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yE(){return Math.random().toString(36).substr(2,8)}function Cg(r,e){return{usr:r.state,key:r.key,idx:e}}function jd(r,e,t,s){return t===void 0&&(t=null),sl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ta(e):e,{state:t,key:e&&e.key||s||yE()})}function oc(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ta(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function vE(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=Xi.Pop,g=null,v=w();v==null&&(v=0,h.replaceState(sl({},h.state,{idx:v}),""));function w(){return(h.state||{idx:null}).idx}function T(){f=Xi.Pop;let V=w(),te=V==null?null:V-v;v=V,g&&g({action:f,location:B.location,delta:te})}function S(V,te){f=Xi.Push;let ie=jd(B.location,V,te);v=w()+1;let K=Cg(ie,v),oe=B.createHref(ie);try{h.pushState(K,"",oe)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;o.location.assign(oe)}l&&g&&g({action:f,location:B.location,delta:1})}function j(V,te){f=Xi.Replace;let ie=jd(B.location,V,te);v=w();let K=Cg(ie,v),oe=B.createHref(ie);h.replaceState(K,"",oe),l&&g&&g({action:f,location:B.location,delta:0})}function W(V){let te=o.location.origin!=="null"?o.location.origin:o.location.href,ie=typeof V=="string"?V:oc(V);return ie=ie.replace(/ $/,"%20"),Ct(te,"No window.location.(origin|href) available to create URL for href: "+ie),new URL(ie,te)}let B={get action(){return f},get location(){return r(o,h)},listen(V){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Sg,T),g=V,()=>{o.removeEventListener(Sg,T),g=null}},createHref(V){return e(o,V)},createURL:W,encodeLocation(V){let te=W(V);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:S,replace:j,go(V){return h.go(V)}};return B}var Ag;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Ag||(Ag={}));function _E(r,e,t){return t===void 0&&(t="/"),wE(r,e,t)}function wE(r,e,t,s){let o=typeof e=="string"?ta(e):e,l=vf(o.pathname||"/",t);if(l==null)return null;let h=mv(r);EE(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let v=DE(l);f=kE(h[g],v)}return f}function mv(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(Ct(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let v=Zi([s,g.relativePath]),w=t.concat(g);l.children&&l.children.length>0&&(Ct(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),mv(l.children,e,w,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:PE(v,l.index),routesMeta:w})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of gv(l.path))o(l,h,g)}),e}function gv(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=gv(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function EE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:xE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const TE=/^:[\w-]+$/,IE=3,SE=2,CE=1,AE=10,RE=-2,Rg=r=>r==="*";function PE(r,e){let t=r.split("/"),s=t.length;return t.some(Rg)&&(s+=RE),e&&(s+=SE),t.filter(o=>!Rg(o)).reduce((o,l)=>o+(TE.test(l)?IE:l===""?CE:AE),s)}function xE(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function kE(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],v=f===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",T=NE({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},w),S=g.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Zi([l,T.pathname]),pathnameBase:ME(Zi([l,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(l=Zi([l,T.pathnameBase]))}return h}function NE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=bE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((v,w,T)=>{let{paramName:S,isOptional:j}=w;if(S==="*"){let B=f[T]||"";h=l.slice(0,l.length-B.length).replace(/(.)\/+$/,"$1")}const W=f[T];return j&&!W?v[S]=void 0:v[S]=(W||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:h,pattern:r}}function bE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),pv(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function DE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pv(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function vf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function OE(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?ta(r):r;return{pathname:t?t.startsWith("/")?t:VE(t,e):e,search:FE(s),hash:jE(o)}}function VE(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Rd(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yv(r,e){let t=LE(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function vv(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=ta(r):(o=sl({},r),Ct(!o.pathname||!o.pathname.includes("?"),Rd("?","pathname","search",o)),Ct(!o.pathname||!o.pathname.includes("#"),Rd("#","pathname","hash",o)),Ct(!o.search||!o.search.includes("#"),Rd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),T-=1;o.pathname=S.join("/")}f=T>=0?e[T]:"/"}let g=OE(o,f),v=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(v||w)&&(g.pathname+="/"),g}const Zi=r=>r.join("/").replace(/\/\/+/g,"/"),ME=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),FE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,jE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function UE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const _v=["post","put","patch","delete"];new Set(_v);const zE=["get",..._v];new Set(zE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},ol.apply(this,arguments)}const _f=z.createContext(null),BE=z.createContext(null),Gs=z.createContext(null),Ac=z.createContext(null),Qs=z.createContext({outlet:null,matches:[],isDataRoute:!1}),wv=z.createContext(null);function $E(r,e){let{relative:t}=e===void 0?{}:e;gl()||Ct(!1);let{basename:s,navigator:o}=z.useContext(Gs),{hash:l,pathname:h,search:f}=Iv(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:Zi([s,h])),o.createHref({pathname:g,search:f,hash:l})}function gl(){return z.useContext(Ac)!=null}function na(){return gl()||Ct(!1),z.useContext(Ac).location}function Ev(r){z.useContext(Gs).static||z.useLayoutEffect(r)}function Tv(){let{isDataRoute:r}=z.useContext(Qs);return r?nT():HE()}function HE(){gl()||Ct(!1);let r=z.useContext(_f),{basename:e,future:t,navigator:s}=z.useContext(Gs),{matches:o}=z.useContext(Qs),{pathname:l}=na(),h=JSON.stringify(yv(o,t.v7_relativeSplatPath)),f=z.useRef(!1);return Ev(()=>{f.current=!0}),z.useCallback(function(v,w){if(w===void 0&&(w={}),!f.current)return;if(typeof v=="number"){s.go(v);return}let T=vv(v,JSON.parse(h),l,w.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Zi([e,T.pathname])),(w.replace?s.replace:s.push)(T,w.state,w)},[e,s,h,l,r])}function Iv(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=z.useContext(Gs),{matches:o}=z.useContext(Qs),{pathname:l}=na(),h=JSON.stringify(yv(o,s.v7_relativeSplatPath));return z.useMemo(()=>vv(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function WE(r,e){return qE(r,e)}function qE(r,e,t,s){gl()||Ct(!1);let{navigator:o}=z.useContext(Gs),{matches:l}=z.useContext(Qs),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let v=na(),w;if(e){var T;let V=typeof e=="string"?ta(e):e;g==="/"||(T=V.pathname)!=null&&T.startsWith(g)||Ct(!1),w=V}else w=v;let S=w.pathname||"/",j=S;if(g!=="/"){let V=g.replace(/^\//,"").split("/");j="/"+S.replace(/^\//,"").split("/").slice(V.length).join("/")}let W=_E(r,{pathname:j}),B=XE(W&&W.map(V=>Object.assign({},V,{params:Object.assign({},f,V.params),pathname:Zi([g,o.encodeLocation?o.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?g:Zi([g,o.encodeLocation?o.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),l,t,s);return e&&B?z.createElement(Ac.Provider,{value:{location:ol({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Xi.Pop}},B):B}function KE(){let r=tT(),e=UE(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:o},t):null,null)}const GE=z.createElement(KE,null);class QE extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?z.createElement(Qs.Provider,{value:this.props.routeContext},z.createElement(wv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YE(r){let{routeContext:e,match:t,children:s}=r,o=z.useContext(_f);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(Qs.Provider,{value:e},s)}function XE(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let w=h.findIndex(T=>T.route.id&&(f==null?void 0:f[T.route.id])!==void 0);w>=0||Ct(!1),h=h.slice(0,Math.min(h.length,w+1))}let g=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let w=0;w<h.length;w++){let T=h[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(v=w),T.route.id){let{loaderData:S,errors:j}=t,W=T.route.loader&&S[T.route.id]===void 0&&(!j||j[T.route.id]===void 0);if(T.route.lazy||W){g=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((w,T,S)=>{let j,W=!1,B=null,V=null;t&&(j=f&&T.route.id?f[T.route.id]:void 0,B=T.route.errorElement||GE,g&&(v<0&&S===0?(rT("route-fallback"),W=!0,V=null):v===S&&(W=!0,V=T.route.hydrateFallbackElement||null)));let te=e.concat(h.slice(0,S+1)),ie=()=>{let K;return j?K=B:W?K=V:T.route.Component?K=z.createElement(T.route.Component,null):T.route.element?K=T.route.element:K=w,z.createElement(YE,{match:T,routeContext:{outlet:w,matches:te,isDataRoute:t!=null},children:K})};return t&&(T.route.ErrorBoundary||T.route.errorElement||S===0)?z.createElement(QE,{location:t.location,revalidation:t.revalidation,component:B,error:j,children:ie(),routeContext:{outlet:null,matches:te,isDataRoute:!0}}):ie()},null)}var Sv=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Sv||{}),Cv=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Cv||{});function JE(r){let e=z.useContext(_f);return e||Ct(!1),e}function ZE(r){let e=z.useContext(BE);return e||Ct(!1),e}function eT(r){let e=z.useContext(Qs);return e||Ct(!1),e}function Av(r){let e=eT(),t=e.matches[e.matches.length-1];return t.route.id||Ct(!1),t.route.id}function tT(){var r;let e=z.useContext(wv),t=ZE(),s=Av();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function nT(){let{router:r}=JE(Sv.UseNavigateStable),e=Av(Cv.UseNavigateStable),t=z.useRef(!1);return Ev(()=>{t.current=!0}),z.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,ol({fromRouteId:e},l)))},[r,e])}const Pg={};function rT(r,e,t){Pg[r]||(Pg[r]=!0)}function iT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function Qu(r){Ct(!1)}function sT(r){let{basename:e="/",children:t=null,location:s,navigationType:o=Xi.Pop,navigator:l,static:h=!1,future:f}=r;gl()&&Ct(!1);let g=e.replace(/^\/*/,"/"),v=z.useMemo(()=>({basename:g,navigator:l,static:h,future:ol({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof s=="string"&&(s=ta(s));let{pathname:w="/",search:T="",hash:S="",state:j=null,key:W="default"}=s,B=z.useMemo(()=>{let V=vf(w,g);return V==null?null:{location:{pathname:V,search:T,hash:S,state:j,key:W},navigationType:o}},[g,w,T,S,j,W,o]);return B==null?null:z.createElement(Gs.Provider,{value:v},z.createElement(Ac.Provider,{children:t,value:B}))}function oT(r){let{children:e,location:t}=r;return WE(Ud(e),t)}new Promise(()=>{});function Ud(r,e){e===void 0&&(e=[]);let t=[];return z.Children.forEach(r,(s,o)=>{if(!z.isValidElement(s))return;let l=[...e,o];if(s.type===z.Fragment){t.push.apply(t,Ud(s.props.children,l));return}s.type!==Qu&&Ct(!1),!s.props.index||!s.props.children||Ct(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Ud(s.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zd(){return zd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},zd.apply(this,arguments)}function aT(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function lT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function uT(r,e){return r.button===0&&(!e||e==="_self")&&!lT(r)}const cT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hT="6";try{window.__reactRouterVersion=hT}catch{}const dT="startTransition",xg=uE[dT];function fT(r){let{basename:e,children:t,future:s,window:o}=r,l=z.useRef();l.current==null&&(l.current=gE({window:o,v5Compat:!0}));let h=l.current,[f,g]=z.useState({action:h.action,location:h.location}),{v7_startTransition:v}=s||{},w=z.useCallback(T=>{v&&xg?xg(()=>g(T)):g(T)},[g,v]);return z.useLayoutEffect(()=>h.listen(w),[h,w]),z.useEffect(()=>iT(s),[s]),z.createElement(sT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const pT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qi=z.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:v,preventScrollReset:w,viewTransition:T}=e,S=aT(e,cT),{basename:j}=z.useContext(Gs),W,B=!1;if(typeof v=="string"&&mT.test(v)&&(W=v,pT))try{let K=new URL(window.location.href),oe=v.startsWith("//")?new URL(K.protocol+v):new URL(v),_e=vf(oe.pathname,j);oe.origin===K.origin&&_e!=null?v=_e+oe.search+oe.hash:B=!0}catch{}let V=$E(v,{relative:o}),te=gT(v,{replace:h,state:f,target:g,preventScrollReset:w,relative:o,viewTransition:T});function ie(K){s&&s(K),K.defaultPrevented||te(K)}return z.createElement("a",zd({},S,{href:W||V,onClick:B||l?s:ie,ref:t,target:g}))});var kg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(kg||(kg={}));var Ng;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Ng||(Ng={}));function gT(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=Tv(),v=na(),w=Iv(r,{relative:h});return z.useCallback(T=>{if(uT(T,t)){T.preventDefault();let S=s!==void 0?s:oc(v)===oc(w);g(r,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[v,g,w,s,o,t,r,l,h,f])}const yT=()=>{};var bg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},vT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Pv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,w=l>>2,T=(l&3)<<4|f>>4;let S=(f&15)<<2|v>>6,j=v&63;g||(j=64,h||(S=64)),s.push(t[w],t[T],t[S],t[j])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Rv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):vT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||v==null||T==null)throw new _T;const S=l<<2|f>>4;if(s.push(S),v!==64){const j=f<<4&240|v>>2;if(s.push(j),T!==64){const W=v<<6&192|T;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class _T extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wT=function(r){const e=Rv(r);return Pv.encodeByteArray(e,!0)},ac=function(r){return wT(r).replace(/\./g,"")},xv=function(r){try{return Pv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=()=>ET().__FIREBASE_DEFAULTS__,IT=()=>{if(typeof process>"u"||typeof bg>"u")return;const r=bg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},ST=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&xv(r[1]);return e&&JSON.parse(e)},Rc=()=>{try{return yT()||TT()||IT()||ST()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},kv=r=>{var e,t;return(t=(e=Rc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},CT=r=>{const e=kv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Nv=()=>{var r;return(r=Rc())===null||r===void 0?void 0:r.config},bv=r=>{var e;return(e=Rc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ac(JSON.stringify(t)),ac(JSON.stringify(h)),""].join(".")}const Za={};function PT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Za))Za[e]?r.emulator.push(e):r.prod.push(e);return r}function xT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Dg=!1;function Ov(r,e){if(typeof window>"u"||typeof document>"u"||!ra(window.location.host)||Za[r]===e||Za[r]||Dg)return;Za[r]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=PT().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,j){S.setAttribute("width","24"),S.setAttribute("id",j),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Dg=!0,h()},S}function w(S,j){S.setAttribute("id",j),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=xT(s),j=t("text"),W=document.getElementById(j)||document.createElement("span"),B=t("learnmore"),V=document.getElementById(B)||document.createElement("a"),te=t("preprendIcon"),ie=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const K=S.element;f(K),w(V,B);const oe=v();g(ie,te),K.append(ie,W,V,oe),document.body.appendChild(K)}l?(W.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function NT(){var r;const e=(r=Rc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function OT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VT(){const r=Xt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function LT(){return!NT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MT(){try{return typeof indexedDB=="object"}catch{return!1}}function FT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="FirebaseError";class di extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=jT,Object.setPrototypeOf(this,di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?UT(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new di(o,f,s)}}function UT(r,e){return r.replace(zT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const zT=/\{\$([^}]+)}/g;function BT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function os(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Og(l)&&Og(h)){if(!os(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Og(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ka(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ga(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function $T(r,e){const t=new HT(r,e);return t.subscribe.bind(t)}class HT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");WT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Pd),o.error===void 0&&(o.error=Pd),o.complete===void 0&&(o.complete=Pd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Pd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(r){return r&&r._delegate?r._delegate:r}class Ws{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new AT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GT(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:KT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KT(r){return r===zs?void 0:r}function GT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(je||(je={}));const YT={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},XT=je.INFO,JT={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},ZT=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=JT[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wf{constructor(e){this.name=e,this._logLevel=XT,this._logHandler=ZT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const eI=(r,e)=>e.some(t=>r instanceof t);let Vg,Lg;function tI(){return Vg||(Vg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nI(){return Lg||(Lg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vv=new WeakMap,Bd=new WeakMap,Lv=new WeakMap,xd=new WeakMap,Ef=new WeakMap;function rI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(es(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Vv.set(t,r)}).catch(()=>{}),Ef.set(e,r),e}function iI(r){if(Bd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Bd.set(r,e)}let $d={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Bd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Lv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return es(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function sI(r){$d=r($d)}function oI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(kd(this),e,...t);return Lv.set(s,e.sort?e.sort():[e]),es(s)}:nI().includes(r)?function(...e){return r.apply(kd(this),e),es(Vv.get(this))}:function(...e){return es(r.apply(kd(this),e))}}function aI(r){return typeof r=="function"?oI(r):(r instanceof IDBTransaction&&iI(r),eI(r,tI())?new Proxy(r,$d):r)}function es(r){if(r instanceof IDBRequest)return rI(r);if(xd.has(r))return xd.get(r);const e=aI(r);return e!==r&&(xd.set(r,e),Ef.set(e,r)),e}const kd=r=>Ef.get(r);function lI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=es(h);return s&&h.addEventListener("upgradeneeded",g=>{s(es(h.result),g.oldVersion,g.newVersion,es(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const uI=["get","getKey","getAll","getAllKeys","count"],cI=["put","add","delete","clear"],Nd=new Map;function Mg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Nd.get(e))return Nd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=cI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||uI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&g.done]))[0]};return Nd.set(e,l),l}sI(r=>({...r,get:(e,t,s)=>Mg(e,t)||r.get(e,t,s),has:(e,t)=>!!Mg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function dI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hd="@firebase/app",Fg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new wf("@firebase/app"),fI="@firebase/app-compat",pI="@firebase/analytics-compat",mI="@firebase/analytics",gI="@firebase/app-check-compat",yI="@firebase/app-check",vI="@firebase/auth",_I="@firebase/auth-compat",wI="@firebase/database",EI="@firebase/data-connect",TI="@firebase/database-compat",II="@firebase/functions",SI="@firebase/functions-compat",CI="@firebase/installations",AI="@firebase/installations-compat",RI="@firebase/messaging",PI="@firebase/messaging-compat",xI="@firebase/performance",kI="@firebase/performance-compat",NI="@firebase/remote-config",bI="@firebase/remote-config-compat",DI="@firebase/storage",OI="@firebase/storage-compat",VI="@firebase/firestore",LI="@firebase/ai",MI="@firebase/firestore-compat",FI="firebase",jI="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="[DEFAULT]",UI={[Hd]:"fire-core",[fI]:"fire-core-compat",[mI]:"fire-analytics",[pI]:"fire-analytics-compat",[yI]:"fire-app-check",[gI]:"fire-app-check-compat",[vI]:"fire-auth",[_I]:"fire-auth-compat",[wI]:"fire-rtdb",[EI]:"fire-data-connect",[TI]:"fire-rtdb-compat",[II]:"fire-fn",[SI]:"fire-fn-compat",[CI]:"fire-iid",[AI]:"fire-iid-compat",[RI]:"fire-fcm",[PI]:"fire-fcm-compat",[xI]:"fire-perf",[kI]:"fire-perf-compat",[NI]:"fire-rc",[bI]:"fire-rc-compat",[DI]:"fire-gcs",[OI]:"fire-gcs-compat",[VI]:"fire-fst",[MI]:"fire-fst-compat",[LI]:"fire-vertex","fire-js":"fire-js",[FI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new Map,zI=new Map,qd=new Map;function jg(r,e){try{r.container.addComponent(e)}catch(t){ai.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ko(r){const e=r.name;if(qd.has(e))return ai.debug(`There were multiple attempts to register component ${e}.`),!1;qd.set(e,r);for(const t of lc.values())jg(t,r);for(const t of zI.values())jg(t,r);return!0}function Tf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function mn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ts=new yl("app","Firebase",BI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=jI;function Mv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Wd,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw ts.create("bad-app-name",{appName:String(o)});if(t||(t=Nv()),!t)throw ts.create("no-options");const l=lc.get(o);if(l){if(os(t,l.options)&&os(s,l.config))return l;throw ts.create("duplicate-app",{appName:o})}const h=new QT(o);for(const g of qd.values())h.addComponent(g);const f=new $I(t,s,h);return lc.set(o,f),f}function Fv(r=Wd){const e=lc.get(r);if(!e&&r===Wd&&Nv())return Mv();if(!e)throw ts.create("no-app",{appName:r});return e}function ns(r,e,t){var s;let o=(s=UI[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ai.warn(f.join(" "));return}Ko(new Ws(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="firebase-heartbeat-database",WI=1,al="firebase-heartbeat-store";let bd=null;function jv(){return bd||(bd=lI(HI,WI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(al)}catch(t){console.warn(t)}}}}).catch(r=>{throw ts.create("idb-open",{originalErrorMessage:r.message})})),bd}async function qI(r){try{const t=(await jv()).transaction(al),s=await t.objectStore(al).get(Uv(r));return await t.done,s}catch(e){if(e instanceof di)ai.warn(e.message);else{const t=ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ai.warn(t.message)}}}async function Ug(r,e){try{const s=(await jv()).transaction(al,"readwrite");await s.objectStore(al).put(e,Uv(r)),await s.done}catch(t){if(t instanceof di)ai.warn(t.message);else{const s=ts.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ai.warn(s.message)}}}function Uv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=1024,GI=30;class QI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=zg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>GI){const h=JI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ai.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=zg(),{heartbeatsToSend:s,unsentEntries:o}=YI(this._heartbeatsCache.heartbeats),l=ac(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ai.warn(t),""}}}function zg(){return new Date().toISOString().substring(0,10)}function YI(r,e=KI){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Bg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Bg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class XI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MT()?FT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ug(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ug(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Bg(r){return ac(JSON.stringify({version:2,heartbeats:r})).length}function JI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(r){Ko(new Ws("platform-logger",e=>new hI(e),"PRIVATE")),Ko(new Ws("heartbeat",e=>new QI(e),"PRIVATE")),ns(Hd,Fg,r),ns(Hd,Fg,"esm2017"),ns("fire-js","")}ZI("");var e1="firebase",t1="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns(e1,t1,"app");function If(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function zv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const n1=zv,Bv=new yl("auth","Firebase",zv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new wf("@firebase/auth");function r1(r,...e){uc.logLevel<=je.WARN&&uc.warn(`Auth (${ia}): ${r}`,...e)}function Yu(r,...e){uc.logLevel<=je.ERROR&&uc.error(`Auth (${ia}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(r,...e){throw Cf(r,...e)}function lr(r,...e){return Cf(r,...e)}function Sf(r,e,t){const s=Object.assign(Object.assign({},n1()),{[e]:t});return new yl("auth","Firebase",s).create(e,{appName:r.name})}function Pr(r){return Sf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function i1(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&$n(r,"argument-error"),Sf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Bv.create(r,...e)}function Se(r,e,...t){if(!r)throw Cf(e,...t)}function si(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Yu(e),new Error(e)}function li(r,e){r||si(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function s1(){return $g()==="http:"||$g()==="https:"}function $g(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(s1()||DT()||"connection"in navigator)?navigator.onLine:!0}function a1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t){this.shortDelay=e,this.longDelay=t,li(t>e,"Short delay should be less than long delay!"),this.isMobile=kT()||OT()}get(){return o1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(r,e){li(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],c1=new _l(3e4,6e4);function fi(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function ms(r,e,t,s,o={}){return Hv(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=vl(Object.assign({key:r.config.apiKey},h)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:g},l);return bT()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&ra(r.emulatorConfig.host)&&(v.credentials="include"),$v.fetch()(await Wv(r,r.config.apiHost,t,f),v)})}async function Hv(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},l1),e);try{const o=new d1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw zu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,v]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw zu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw zu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw zu(r,"user-disabled",h);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Sf(r,w,v);$n(r,w)}}catch(o){if(o instanceof di)throw o;$n(r,"network-request-failed",{message:String(o)})}}async function sa(r,e,t,s,o={}){const l=await ms(r,e,t,s,o);return"mfaPendingCredential"in l&&$n(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Wv(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Af(r.config,o):`${r.config.apiScheme}://${o}`;return u1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function h1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class d1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(lr(this.auth,"network-request-failed")),c1.get())})}}function zu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=lr(r,e,s);return o.customData._tokenResponse=t,o}function Hg(r){return r!==void 0&&r.enterprise!==void 0}class f1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return h1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function p1(r,e){return ms(r,"GET","/v2/recaptchaConfig",fi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(r,e){return ms(r,"POST","/v1/accounts:delete",e)}async function cc(r,e){return ms(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function g1(r,e=!1){const t=Nt(r),s=await t.getIdToken(e),o=Rf(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:el(Dd(o.auth_time)),issuedAtTime:el(Dd(o.iat)),expirationTime:el(Dd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Dd(r){return Number(r)*1e3}function Rf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const o=xv(t);return o?JSON.parse(o):(Yu("Failed to decode base64 JWT payload"),null)}catch(o){return Yu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Wg(r){const e=Rf(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof di&&y1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function y1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=el(this.lastLoginAt),this.creationTime=el(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(r){var e;const t=r.auth,s=await r.getIdToken(),o=await ll(r,cc(t,{idToken:s}));Se(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?qv(l.providerUserInfo):[],f=w1(r.providerData,h),g=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),w=g?v:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Gd(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,T)}async function _1(r){const e=Nt(r);await ul(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function w1(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function qv(r){return r.map(e=>{var{providerId:t}=e,s=If(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(r,e){const t=await Hv(r,{},async()=>{const s=vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await Wv(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&ra(r.emulatorConfig.host)&&(g.credentials="include"),$v.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function T1(r,e){return ms(r,"POST","/v2/accounts:revokeToken",fi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=Wg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await E1(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new zo;return s&&(Se(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return si("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ar{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=If(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Gd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ll(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return g1(this,e)}reload(){return _1(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ul(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(Pr(this.auth));const e=await this.getIdToken();return await ll(this,m1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,h,f,g,v,w;const T=(s=t.displayName)!==null&&s!==void 0?s:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,j=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,W=(h=t.photoURL)!==null&&h!==void 0?h:void 0,B=(f=t.tenantId)!==null&&f!==void 0?f:void 0,V=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,te=(v=t.createdAt)!==null&&v!==void 0?v:void 0,ie=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:K,emailVerified:oe,isAnonymous:_e,providerData:Ne,stsTokenManager:N}=t;Se(K&&N,e,"internal-error");const C=zo.fromJSON(this.name,N);Se(typeof K=="string",e,"internal-error"),Hi(T,e.name),Hi(S,e.name),Se(typeof oe=="boolean",e,"internal-error"),Se(typeof _e=="boolean",e,"internal-error"),Hi(j,e.name),Hi(W,e.name),Hi(B,e.name),Hi(V,e.name),Hi(te,e.name),Hi(ie,e.name);const P=new ar({uid:K,auth:e,email:S,emailVerified:oe,displayName:T,isAnonymous:_e,photoURL:W,phoneNumber:j,tenantId:B,stsTokenManager:C,createdAt:te,lastLoginAt:ie});return Ne&&Array.isArray(Ne)&&(P.providerData=Ne.map(x=>Object.assign({},x))),V&&(P._redirectEventId=V),P}static async _fromIdTokenResponse(e,t,s=!1){const o=new zo;o.updateFromServerResponse(t);const l=new ar({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ul(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?qv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new zo;f.updateFromIdToken(s);const g=new ar({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Gd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=new Map;function oi(r){li(r instanceof Function,"Expected a class definition");let e=qg.get(r);return e?(li(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,qg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Kv.type="NONE";const Kg=Kv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(r,e,t){return`firebase:${r}:${e}:${t}`}class Bo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Xu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Xu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cc(this.auth,{idToken:e}).catch(()=>{});return t?ar._fromGetAccountInfoResponse(this.auth,t,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Bo(oi(Kg),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||oi(Kg);const h=Xu(s,e.config.apiKey,e.name);let f=null;for(const v of t)try{const w=await v._get(h);if(w){let T;if(typeof w=="string"){const S=await cc(e,{idToken:w}).catch(()=>{});if(!S)break;T=await ar._fromGetAccountInfoResponse(e,S,w)}else T=ar._fromJSON(e,w);v!==l&&(f=T),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Bo(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Bo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zv(e))return"Blackberry";if(e_(e))return"Webos";if(Qv(e))return"Safari";if((e.includes("chrome/")||Yv(e))&&!e.includes("edge/"))return"Chrome";if(Jv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Gv(r=Xt()){return/firefox\//i.test(r)}function Qv(r=Xt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yv(r=Xt()){return/crios\//i.test(r)}function Xv(r=Xt()){return/iemobile/i.test(r)}function Jv(r=Xt()){return/android/i.test(r)}function Zv(r=Xt()){return/blackberry/i.test(r)}function e_(r=Xt()){return/webos/i.test(r)}function Pf(r=Xt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function I1(r=Xt()){var e;return Pf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function S1(){return VT()&&document.documentMode===10}function t_(r=Xt()){return Pf(r)||Jv(r)||e_(r)||Zv(r)||/windows phone/i.test(r)||Xv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(r,e=[]){let t;switch(r){case"Browser":t=Gg(Xt());break;case"Worker":t=`${Gg(Xt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ia}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(r,e={}){return ms(r,"GET","/v2/passwordPolicy",fi(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=6;class P1{constructor(e){var t,s,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:R1,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,h,f;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(f=g.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qg(this),this.idTokenSubscription=new Qg(this),this.beforeStateQueue=new C1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oi(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cc(this,{idToken:e}),s=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(mn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ul(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=a1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(Pr(this));const t=e?Nt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(Pr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(Pr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await A1(this),t=new P1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await T1(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oi(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[oi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=n_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&r1(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function pi(r){return Nt(r)}class Qg{constructor(e){this.auth=e,this.observer=null,this.addObserver=$T(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k1(r){Pc=r}function r_(r){return Pc.loadJS(r)}function N1(){return Pc.recaptchaEnterpriseScript}function b1(){return Pc.gapiScript}function D1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class O1{constructor(){this.enterprise=new V1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class V1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const L1="recaptcha-enterprise",i_="NO_RECAPTCHA";class M1{constructor(e){this.type=L1,this.auth=pi(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{p1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new f1(g);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(g=>{f(g)})})}function o(l,h,f){const g=window.grecaptcha;Hg(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(i_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new O1().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(f=>{if(!t&&Hg(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=N1();g.length!==0&&(g+=f),r_(g).then(()=>{o(f,l,h)}).catch(v=>{h(v)})}}).catch(f=>{h(f)})})}}async function Yg(r,e,t,s=!1,o=!1){const l=new M1(r);let h;if(o)h=i_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Qd(r,e,t,s,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await Yg(r,e,t,t==="getOobCode");return s(r,h)}else return s(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Yg(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(r,e){const t=Tf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(os(l,e??{}))return o;$n(o,"already-initialized")}return t.initialize({options:e})}function j1(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(oi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function U1(r,e,t){const s=pi(r);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=s_(e),{host:h,port:f}=z1(e),g=f===null?"":`:${f}`,v={url:`${l}//${h}${g}/`},w=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(os(v,s.config.emulator)&&os(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,ra(h)?(Dv(`${l}//${h}${g}`),Ov("Auth",!0)):B1()}function s_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function z1(r){const e=s_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Xg(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:Xg(h)}}}function Xg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function B1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return si("not implemented")}_getIdTokenResponse(e){return si("not implemented")}_linkToIdToken(e,t){return si("not implemented")}_getReauthenticationResolver(e){return si("not implemented")}}async function $1(r,e){return ms(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(r,e){return sa(r,"POST","/v1/accounts:signInWithPassword",fi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W1(r,e){return sa(r,"POST","/v1/accounts:signInWithEmailLink",fi(r,e))}async function q1(r,e){return sa(r,"POST","/v1/accounts:signInWithEmailLink",fi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends xf{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new cl(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new cl(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qd(e,t,"signInWithPassword",H1);case"emailLink":return W1(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qd(e,s,"signUpPassword",$1);case"emailLink":return q1(e,{idToken:t,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(r,e){return sa(r,"POST","/v1/accounts:signInWithIdp",fi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="http://localhost";class ui extends xf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$n("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=If(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new ui(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,$o(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){const e={requestUri:K1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Q1(r){const e=Ka(Ga(r)).link,t=e?Ka(Ga(e)).deep_link_id:null,s=Ka(Ga(r)).deep_link_id;return(s?Ka(Ga(s)).link:null)||s||t||e||r}class kf{constructor(e){var t,s,o,l,h,f;const g=Ka(Ga(e)),v=(t=g.apiKey)!==null&&t!==void 0?t:null,w=(s=g.oobCode)!==null&&s!==void 0?s:null,T=G1((o=g.mode)!==null&&o!==void 0?o:null);Se(v&&w&&T,"argument-error"),this.apiKey=v,this.operation=T,this.code=w,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=g.lang)!==null&&h!==void 0?h:null,this.tenantId=(f=g.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=Q1(e);try{return new kf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.providerId=Ys.PROVIDER_ID}static credential(e,t){return cl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=kf.parseLink(t);return Se(s,"argument-error"),cl._fromEmailAndCode(e,s.code,s.tenantId)}}Ys.PROVIDER_ID="password";Ys.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ys.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends Nf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ho extends oa{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return Se("providerId"in t&&"signInMethod"in t,"argument-error"),ui._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Se(e.idToken||e.accessToken,"argument-error"),ui._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ho.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ho.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:l,nonce:h,providerId:f}=e;if(!s&&!o&&!t&&!l||!f)return null;try{return new Ho(f)._credential({idToken:t,accessToken:s,nonce:h,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends oa{constructor(){super("facebook.com")}static credential(e){return ui._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends oa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ui._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Gi.credential(t,s)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends oa{constructor(){super("github.com")}static credential(e){return ui._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com";Qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends oa{constructor(){super("twitter.com")}static credential(e,t){return ui._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Yi.credential(t,s)}catch{return null}}}Yi.TWITTER_SIGN_IN_METHOD="twitter.com";Yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(r,e){return sa(r,"POST","/v1/accounts:signUp",fi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await ar._fromIdTokenResponse(e,s,o),h=Jg(s);return new as({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Jg(s);return new as({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Jg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends di{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,hc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new hc(e,t,s,o)}}function o_(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?hc._fromErrorAndOperation(r,l,e,s):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}async function a_(r,e,t=!1){const s=await ll(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return as._forOperation(r,"link",s)}async function J1(r,e,t){await ul(e);const s=X1(e.providerData);Se(s.has(t)===r,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(r,e,t=!1){const{auth:s}=r;if(mn(s.app))return Promise.reject(Pr(s));const o="reauthenticate";try{const l=await ll(r,o_(s,o,e,r),t);Se(l.idToken,s,"internal-error");const h=Rf(l.idToken);Se(h,s,"internal-error");const{sub:f}=h;return Se(r.uid===f,s,"user-mismatch"),as._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&$n(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l_(r,e,t=!1){if(mn(r.app))return Promise.reject(Pr(r));const s="signIn",o=await o_(r,s,e),l=await as._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function eS(r,e){return l_(pi(r),e)}async function Zg(r,e){const t=Nt(r);return await J1(!1,t,e.providerId),a_(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(r,e){return sa(r,"POST","/v1/accounts:signInWithCustomToken",fi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(r,e){if(mn(r.app))return Promise.reject(Pr(r));const t=pi(r),s=await tS(t,{token:e,returnSecureToken:!0}),o=await as._fromIdTokenResponse(t,"signIn",s);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u_(r){const e=pi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rS(r,e,t){if(mn(r.app))return Promise.reject(Pr(r));const s=pi(r),h=await Qd(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Y1).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&u_(r),g}),f=await as._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(f.user),f}function iS(r,e,t){return mn(r.app)?Promise.reject(Pr(r)):eS(Nt(r),Ys.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&u_(r),s})}function sS(r,e,t,s){return Nt(r).onIdTokenChanged(e,t,s)}function oS(r,e,t){return Nt(r).beforeAuthStateChanged(e,t)}function aS(r,e,t,s){return Nt(r).onAuthStateChanged(e,t,s)}function lS(r){return Nt(r).signOut()}const dc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dc,"1"),this.storage.removeItem(dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=1e3,cS=10;class h_ extends c_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=t_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);S1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,cS):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},uS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}h_.type="LOCAL";const hS=h_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends c_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}d_.type="SESSION";const f_=d_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new xc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async v=>v(t.origin,l)),g=await dS(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const v=bf("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return window}function pS(r){xr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(){return typeof xr().WorkerGlobalScope<"u"&&typeof xr().importScripts=="function"}async function mS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function yS(){return p_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="firebaseLocalStorageDb",vS=1,fc="firebaseLocalStorage",g_="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kc(r,e){return r.transaction([fc],e?"readwrite":"readonly").objectStore(fc)}function _S(){const r=indexedDB.deleteDatabase(m_);return new wl(r).toPromise()}function Yd(){const r=indexedDB.open(m_,vS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(fc,{keyPath:g_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(fc)?e(s):(s.close(),await _S(),e(await Yd()))})})}async function ey(r,e,t){const s=kc(r,!0).put({[g_]:e,value:t});return new wl(s).toPromise()}async function wS(r,e){const t=kc(r,!1).get(e),s=await new wl(t).toPromise();return s===void 0?null:s.value}function ty(r,e){const t=kc(r,!0).delete(e);return new wl(t).toPromise()}const ES=800,TS=3;class y_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>TS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return p_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xc._getInstance(yS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await mS(),!this.activeServiceWorker)return;this.sender=new fS(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yd();return await ey(e,dc,"1"),await ty(e,dc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>ey(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>wS(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ty(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=kc(o,!1).getAll();return new wl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ES)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}y_.type="LOCAL";const IS=y_;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(r,e){return e?oi(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends xf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function SS(r){return l_(r.auth,new Df(r),r.bypassAuthState)}function CS(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),Z1(t,new Df(r),r.bypassAuthState)}async function AS(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),a_(t,new Df(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SS;case"linkViaPopup":case"linkViaRedirect":return AS;case"reauthViaPopup":case"reauthViaRedirect":return CS;default:$n(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new _l(2e3,1e4);async function PS(r,e,t){if(mn(r.app))return Promise.reject(lr(r,"operation-not-supported-in-this-environment"));const s=pi(r);i1(r,e,Nf);const o=v_(s,t);return new Bs(s,"signInViaPopup",e,o).executeNotNull()}class Bs extends __{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Bs.currentPopupAction&&Bs.currentPopupAction.cancel(),Bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");const e=bf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RS.get())};e()}}Bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="pendingRedirect",Ju=new Map;class kS extends __{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const s=await NS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NS(r,e){const t=OS(e),s=DS(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function bS(r,e){Ju.set(r._key(),e)}function DS(r){return oi(r._redirectPersistence)}function OS(r){return Xu(xS,r.config.apiKey,r.name)}async function VS(r,e,t=!1){if(mn(r.app))return Promise.reject(Pr(r));const s=pi(r),o=v_(s,e),h=await new kS(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=10*60*1e3;class MS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!w_(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(lr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LS&&this.cachedEventUids.clear(),this.cachedEventUids.has(ny(e))}saveEventToCache(e){this.cachedEventUids.add(ny(e)),this.lastProcessedEventTime=Date.now()}}function ny(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function w_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(r,e={}){return ms(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zS=/^https?/;async function BS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await jS(r);for(const t of e)try{if($S(t))return}catch{}$n(r,"unauthorized-domain")}function $S(r){const e=Kd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!zS.test(t))return!1;if(US.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new _l(3e4,6e4);function ry(){const r=xr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function WS(r){return new Promise((e,t)=>{var s,o,l;function h(){ry(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ry(),t(lr(r,"network-request-failed"))},timeout:HS.get()})}if(!((o=(s=xr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=xr().gapi)===null||l===void 0)&&l.load)h();else{const f=D1("iframefcb");return xr()[f]=()=>{gapi.load?h():t(lr(r,"network-request-failed"))},r_(`${b1()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Zu=null,e})}let Zu=null;function qS(r){return Zu=Zu||WS(r),Zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new _l(5e3,15e3),GS="__/auth/iframe",QS="emulator/auth/iframe",YS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JS(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Af(e,QS):`https://${r.config.authDomain}/${GS}`,s={apiKey:e.apiKey,appName:r.name,v:ia},o=XS.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${vl(s).slice(1)}`}async function ZS(r){const e=await qS(r),t=xr().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:JS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YS,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=lr(r,"network-request-failed"),f=xr().setTimeout(()=>{l(h)},KS.get());function g(){xr().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tC=500,nC=600,rC="_blank",iC="http://localhost";class iy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sC(r,e,t,s=tC,o=nC){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g=Object.assign(Object.assign({},eC),{width:s.toString(),height:o.toString(),top:l,left:h}),v=Xt().toLowerCase();t&&(f=Yv(v)?rC:t),Gv(v)&&(e=e||iC,g.scrollbars="yes");const w=Object.entries(g).reduce((S,[j,W])=>`${S}${j}=${W},`,"");if(I1(v)&&f!=="_self")return oC(e||"",f),new iy(null);const T=window.open(e||"",f,w);Se(T,r,"popup-blocked");try{T.focus()}catch{}return new iy(T)}function oC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="__/auth/handler",lC="emulator/auth/handler",uC=encodeURIComponent("fac");async function sy(r,e,t,s,o,l){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:ia,eventId:o};if(e instanceof Nf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",BT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof oa){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await r._getAppCheckToken(),v=g?`#${uC}=${encodeURIComponent(g)}`:"";return`${cC(r)}?${vl(f).slice(1)}${v}`}function cC({config:r}){return r.emulator?Af(r,lC):`https://${r.authDomain}/${aC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="webStorageSupport";class hC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=f_,this._completeRedirectFn=VS,this._overrideRedirectResult=bS}async _openPopup(e,t,s,o){var l;li((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await sy(e,t,s,Kd(),o);return sC(e,h,bf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await sy(e,t,s,Kd(),o);return pS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(li(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await ZS(e),s=new MS(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Od,{type:Od},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Od];h!==void 0&&t(!!h),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return t_()||Qv()||Pf()}}const dC=hC;var oy="@firebase/auth",ay="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mC(r){Ko(new Ws("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:n_(r)},v=new x1(s,o,l,g);return j1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ko(new Ws("auth-internal",e=>{const t=pi(e.getProvider("auth").getImmediate());return(s=>new fC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ns(oy,ay,pC(r)),ns(oy,ay,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=5*60,yC=bv("authIdTokenMaxAge")||gC;let ly=null;const vC=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>yC)return;const o=t==null?void 0:t.token;ly!==o&&(ly=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function _C(r=Fv()){const e=Tf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=F1(r,{popupRedirectResolver:dC,persistence:[IS,hS,f_]}),s=bv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=vC(l.toString());oS(t,h,()=>h(t.currentUser)),sS(t,f=>h(f))}}const o=kv("auth");return o&&U1(t,`http://${o}`),t}function wC(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}k1({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=lr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",wC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mC("Browser");var uy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,E_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,C){function P(){}P.prototype=C.prototype,N.D=C.prototype,N.prototype=new P,N.prototype.constructor=N,N.C=function(x,D,O){for(var R=Array(arguments.length-2),we=2;we<arguments.length;we++)R[we-2]=arguments[we];return C.prototype[D].apply(x,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,C,P){P||(P=0);var x=Array(16);if(typeof C=="string")for(var D=0;16>D;++D)x[D]=C.charCodeAt(P++)|C.charCodeAt(P++)<<8|C.charCodeAt(P++)<<16|C.charCodeAt(P++)<<24;else for(D=0;16>D;++D)x[D]=C[P++]|C[P++]<<8|C[P++]<<16|C[P++]<<24;C=N.g[0],P=N.g[1],D=N.g[2];var O=N.g[3],R=C+(O^P&(D^O))+x[0]+3614090360&4294967295;C=P+(R<<7&4294967295|R>>>25),R=O+(D^C&(P^D))+x[1]+3905402710&4294967295,O=C+(R<<12&4294967295|R>>>20),R=D+(P^O&(C^P))+x[2]+606105819&4294967295,D=O+(R<<17&4294967295|R>>>15),R=P+(C^D&(O^C))+x[3]+3250441966&4294967295,P=D+(R<<22&4294967295|R>>>10),R=C+(O^P&(D^O))+x[4]+4118548399&4294967295,C=P+(R<<7&4294967295|R>>>25),R=O+(D^C&(P^D))+x[5]+1200080426&4294967295,O=C+(R<<12&4294967295|R>>>20),R=D+(P^O&(C^P))+x[6]+2821735955&4294967295,D=O+(R<<17&4294967295|R>>>15),R=P+(C^D&(O^C))+x[7]+4249261313&4294967295,P=D+(R<<22&4294967295|R>>>10),R=C+(O^P&(D^O))+x[8]+1770035416&4294967295,C=P+(R<<7&4294967295|R>>>25),R=O+(D^C&(P^D))+x[9]+2336552879&4294967295,O=C+(R<<12&4294967295|R>>>20),R=D+(P^O&(C^P))+x[10]+4294925233&4294967295,D=O+(R<<17&4294967295|R>>>15),R=P+(C^D&(O^C))+x[11]+2304563134&4294967295,P=D+(R<<22&4294967295|R>>>10),R=C+(O^P&(D^O))+x[12]+1804603682&4294967295,C=P+(R<<7&4294967295|R>>>25),R=O+(D^C&(P^D))+x[13]+4254626195&4294967295,O=C+(R<<12&4294967295|R>>>20),R=D+(P^O&(C^P))+x[14]+2792965006&4294967295,D=O+(R<<17&4294967295|R>>>15),R=P+(C^D&(O^C))+x[15]+1236535329&4294967295,P=D+(R<<22&4294967295|R>>>10),R=C+(D^O&(P^D))+x[1]+4129170786&4294967295,C=P+(R<<5&4294967295|R>>>27),R=O+(P^D&(C^P))+x[6]+3225465664&4294967295,O=C+(R<<9&4294967295|R>>>23),R=D+(C^P&(O^C))+x[11]+643717713&4294967295,D=O+(R<<14&4294967295|R>>>18),R=P+(O^C&(D^O))+x[0]+3921069994&4294967295,P=D+(R<<20&4294967295|R>>>12),R=C+(D^O&(P^D))+x[5]+3593408605&4294967295,C=P+(R<<5&4294967295|R>>>27),R=O+(P^D&(C^P))+x[10]+38016083&4294967295,O=C+(R<<9&4294967295|R>>>23),R=D+(C^P&(O^C))+x[15]+3634488961&4294967295,D=O+(R<<14&4294967295|R>>>18),R=P+(O^C&(D^O))+x[4]+3889429448&4294967295,P=D+(R<<20&4294967295|R>>>12),R=C+(D^O&(P^D))+x[9]+568446438&4294967295,C=P+(R<<5&4294967295|R>>>27),R=O+(P^D&(C^P))+x[14]+3275163606&4294967295,O=C+(R<<9&4294967295|R>>>23),R=D+(C^P&(O^C))+x[3]+4107603335&4294967295,D=O+(R<<14&4294967295|R>>>18),R=P+(O^C&(D^O))+x[8]+1163531501&4294967295,P=D+(R<<20&4294967295|R>>>12),R=C+(D^O&(P^D))+x[13]+2850285829&4294967295,C=P+(R<<5&4294967295|R>>>27),R=O+(P^D&(C^P))+x[2]+4243563512&4294967295,O=C+(R<<9&4294967295|R>>>23),R=D+(C^P&(O^C))+x[7]+1735328473&4294967295,D=O+(R<<14&4294967295|R>>>18),R=P+(O^C&(D^O))+x[12]+2368359562&4294967295,P=D+(R<<20&4294967295|R>>>12),R=C+(P^D^O)+x[5]+4294588738&4294967295,C=P+(R<<4&4294967295|R>>>28),R=O+(C^P^D)+x[8]+2272392833&4294967295,O=C+(R<<11&4294967295|R>>>21),R=D+(O^C^P)+x[11]+1839030562&4294967295,D=O+(R<<16&4294967295|R>>>16),R=P+(D^O^C)+x[14]+4259657740&4294967295,P=D+(R<<23&4294967295|R>>>9),R=C+(P^D^O)+x[1]+2763975236&4294967295,C=P+(R<<4&4294967295|R>>>28),R=O+(C^P^D)+x[4]+1272893353&4294967295,O=C+(R<<11&4294967295|R>>>21),R=D+(O^C^P)+x[7]+4139469664&4294967295,D=O+(R<<16&4294967295|R>>>16),R=P+(D^O^C)+x[10]+3200236656&4294967295,P=D+(R<<23&4294967295|R>>>9),R=C+(P^D^O)+x[13]+681279174&4294967295,C=P+(R<<4&4294967295|R>>>28),R=O+(C^P^D)+x[0]+3936430074&4294967295,O=C+(R<<11&4294967295|R>>>21),R=D+(O^C^P)+x[3]+3572445317&4294967295,D=O+(R<<16&4294967295|R>>>16),R=P+(D^O^C)+x[6]+76029189&4294967295,P=D+(R<<23&4294967295|R>>>9),R=C+(P^D^O)+x[9]+3654602809&4294967295,C=P+(R<<4&4294967295|R>>>28),R=O+(C^P^D)+x[12]+3873151461&4294967295,O=C+(R<<11&4294967295|R>>>21),R=D+(O^C^P)+x[15]+530742520&4294967295,D=O+(R<<16&4294967295|R>>>16),R=P+(D^O^C)+x[2]+3299628645&4294967295,P=D+(R<<23&4294967295|R>>>9),R=C+(D^(P|~O))+x[0]+4096336452&4294967295,C=P+(R<<6&4294967295|R>>>26),R=O+(P^(C|~D))+x[7]+1126891415&4294967295,O=C+(R<<10&4294967295|R>>>22),R=D+(C^(O|~P))+x[14]+2878612391&4294967295,D=O+(R<<15&4294967295|R>>>17),R=P+(O^(D|~C))+x[5]+4237533241&4294967295,P=D+(R<<21&4294967295|R>>>11),R=C+(D^(P|~O))+x[12]+1700485571&4294967295,C=P+(R<<6&4294967295|R>>>26),R=O+(P^(C|~D))+x[3]+2399980690&4294967295,O=C+(R<<10&4294967295|R>>>22),R=D+(C^(O|~P))+x[10]+4293915773&4294967295,D=O+(R<<15&4294967295|R>>>17),R=P+(O^(D|~C))+x[1]+2240044497&4294967295,P=D+(R<<21&4294967295|R>>>11),R=C+(D^(P|~O))+x[8]+1873313359&4294967295,C=P+(R<<6&4294967295|R>>>26),R=O+(P^(C|~D))+x[15]+4264355552&4294967295,O=C+(R<<10&4294967295|R>>>22),R=D+(C^(O|~P))+x[6]+2734768916&4294967295,D=O+(R<<15&4294967295|R>>>17),R=P+(O^(D|~C))+x[13]+1309151649&4294967295,P=D+(R<<21&4294967295|R>>>11),R=C+(D^(P|~O))+x[4]+4149444226&4294967295,C=P+(R<<6&4294967295|R>>>26),R=O+(P^(C|~D))+x[11]+3174756917&4294967295,O=C+(R<<10&4294967295|R>>>22),R=D+(C^(O|~P))+x[2]+718787259&4294967295,D=O+(R<<15&4294967295|R>>>17),R=P+(O^(D|~C))+x[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+O&4294967295}s.prototype.u=function(N,C){C===void 0&&(C=N.length);for(var P=C-this.blockSize,x=this.B,D=this.h,O=0;O<C;){if(D==0)for(;O<=P;)o(this,N,O),O+=this.blockSize;if(typeof N=="string"){for(;O<C;)if(x[D++]=N.charCodeAt(O++),D==this.blockSize){o(this,x),D=0;break}}else for(;O<C;)if(x[D++]=N[O++],D==this.blockSize){o(this,x),D=0;break}}this.h=D,this.o+=C},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;var P=8*this.o;for(C=N.length-8;C<N.length;++C)N[C]=P&255,P/=256;for(this.u(N),N=Array(16),C=P=0;4>C;++C)for(var x=0;32>x;x+=8)N[P++]=this.g[C]>>>x&255;return N};function l(N,C){var P=f;return Object.prototype.hasOwnProperty.call(P,N)?P[N]:P[N]=C(N)}function h(N,C){this.h=C;for(var P=[],x=!0,D=N.length-1;0<=D;D--){var O=N[D]|0;x&&O==C||(P[D]=O,x=!1)}this.g=P}var f={};function g(N){return-128<=N&&128>N?l(N,function(C){return new h([C|0],0>C?-1:0)}):new h([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return T;if(0>N)return V(v(-N));for(var C=[],P=1,x=0;N>=P;x++)C[x]=N/P|0,P*=4294967296;return new h(C,0)}function w(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return V(w(N.substring(1),C));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=v(Math.pow(C,8)),x=T,D=0;D<N.length;D+=8){var O=Math.min(8,N.length-D),R=parseInt(N.substring(D,D+O),C);8>O?(O=v(Math.pow(C,O)),x=x.j(O).add(v(R))):(x=x.j(P),x=x.add(v(R)))}return x}var T=g(0),S=g(1),j=g(16777216);r=h.prototype,r.m=function(){if(B(this))return-V(this).m();for(var N=0,C=1,P=0;P<this.g.length;P++){var x=this.i(P);N+=(0<=x?x:4294967296+x)*C,C*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(W(this))return"0";if(B(this))return"-"+V(this).toString(N);for(var C=v(Math.pow(N,6)),P=this,x="";;){var D=oe(P,C).g;P=te(P,D.j(C));var O=((0<P.g.length?P.g[0]:P.h)>>>0).toString(N);if(P=D,W(P))return O+x;for(;6>O.length;)O="0"+O;x=O+x}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function W(N){if(N.h!=0)return!1;for(var C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function B(N){return N.h==-1}r.l=function(N){return N=te(this,N),B(N)?-1:W(N)?0:1};function V(N){for(var C=N.g.length,P=[],x=0;x<C;x++)P[x]=~N.g[x];return new h(P,~N.h).add(S)}r.abs=function(){return B(this)?V(this):this},r.add=function(N){for(var C=Math.max(this.g.length,N.g.length),P=[],x=0,D=0;D<=C;D++){var O=x+(this.i(D)&65535)+(N.i(D)&65535),R=(O>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);x=R>>>16,O&=65535,R&=65535,P[D]=R<<16|O}return new h(P,P[P.length-1]&-2147483648?-1:0)};function te(N,C){return N.add(V(C))}r.j=function(N){if(W(this)||W(N))return T;if(B(this))return B(N)?V(this).j(V(N)):V(V(this).j(N));if(B(N))return V(this.j(V(N)));if(0>this.l(j)&&0>N.l(j))return v(this.m()*N.m());for(var C=this.g.length+N.g.length,P=[],x=0;x<2*C;x++)P[x]=0;for(x=0;x<this.g.length;x++)for(var D=0;D<N.g.length;D++){var O=this.i(x)>>>16,R=this.i(x)&65535,we=N.i(D)>>>16,de=N.i(D)&65535;P[2*x+2*D]+=R*de,ie(P,2*x+2*D),P[2*x+2*D+1]+=O*de,ie(P,2*x+2*D+1),P[2*x+2*D+1]+=R*we,ie(P,2*x+2*D+1),P[2*x+2*D+2]+=O*we,ie(P,2*x+2*D+2)}for(x=0;x<C;x++)P[x]=P[2*x+1]<<16|P[2*x];for(x=C;x<2*C;x++)P[x]=0;return new h(P,0)};function ie(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function K(N,C){this.g=N,this.h=C}function oe(N,C){if(W(C))throw Error("division by zero");if(W(N))return new K(T,T);if(B(N))return C=oe(V(N),C),new K(V(C.g),V(C.h));if(B(C))return C=oe(N,V(C)),new K(V(C.g),C.h);if(30<N.g.length){if(B(N)||B(C))throw Error("slowDivide_ only works with positive integers.");for(var P=S,x=C;0>=x.l(N);)P=_e(P),x=_e(x);var D=Ne(P,1),O=Ne(x,1);for(x=Ne(x,2),P=Ne(P,2);!W(x);){var R=O.add(x);0>=R.l(N)&&(D=D.add(P),O=R),x=Ne(x,1),P=Ne(P,1)}return C=te(N,D.j(C)),new K(D,C)}for(D=T;0<=N.l(C);){for(P=Math.max(1,Math.floor(N.m()/C.m())),x=Math.ceil(Math.log(P)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),O=v(P),R=O.j(C);B(R)||0<R.l(N);)P-=x,O=v(P),R=O.j(C);W(O)&&(O=S),D=D.add(O),N=te(N,R)}return new K(D,N)}r.A=function(N){return oe(this,N).h},r.and=function(N){for(var C=Math.max(this.g.length,N.g.length),P=[],x=0;x<C;x++)P[x]=this.i(x)&N.i(x);return new h(P,this.h&N.h)},r.or=function(N){for(var C=Math.max(this.g.length,N.g.length),P=[],x=0;x<C;x++)P[x]=this.i(x)|N.i(x);return new h(P,this.h|N.h)},r.xor=function(N){for(var C=Math.max(this.g.length,N.g.length),P=[],x=0;x<C;x++)P[x]=this.i(x)^N.i(x);return new h(P,this.h^N.h)};function _e(N){for(var C=N.g.length+1,P=[],x=0;x<C;x++)P[x]=N.i(x)<<1|N.i(x-1)>>>31;return new h(P,N.h)}function Ne(N,C){var P=C>>5;C%=32;for(var x=N.g.length-P,D=[],O=0;O<x;O++)D[O]=0<C?N.i(O+P)>>>C|N.i(O+P+1)<<32-C:N.i(O+P);return new h(D,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,E_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,rs=h}).apply(typeof uy<"u"?uy:typeof self<"u"?self:typeof window<"u"?window:{});var Bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T_,Qa,I_,ec,Xd,S_,C_,A_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){return u==Array.prototype||u==Object.prototype||(u[p]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bu=="object"&&Bu];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function o(u,p){if(p)e:{var y=s;u=u.split(".");for(var E=0;E<u.length-1;E++){var M=u[E];if(!(M in y))break e;y=y[M]}u=u[u.length-1],E=y[u],p=p(E),p!=E&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var y=0,E=!1,M={next:function(){if(!E&&y<u.length){var H=y++;return{value:p(H,u[H]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function w(u,p,y){return u.call.apply(u.bind,arguments)}function T(u,p,y){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),u.apply(p,M)}}return function(){return u.apply(p,arguments)}}function S(u,p,y){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:T,S.apply(null,arguments)}function j(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function W(u,p){function y(){}y.prototype=p.prototype,u.aa=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(E,M,H){for(var re=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)re[Ze-2]=arguments[Ze];return p.prototype[M].apply(E,re)}}function B(u){const p=u.length;if(0<p){const y=Array(p);for(let E=0;E<p;E++)y[E]=u[E];return y}return[]}function V(u,p){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(g(E)){const M=u.length||0,H=E.length||0;u.length=M+H;for(let re=0;re<H;re++)u[M+re]=E[re]}else u.push(E)}}class te{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ie(u){return/^[\s\xa0]*$/.test(u)}function K(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var _e=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function Ne(u,p,y){for(const E in u)p.call(y,u[E],E,u)}function N(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function C(u){const p={};for(const y in u)p[y]=u[y];return p}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,p){let y,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(y in E)u[y]=E[y];for(let H=0;H<P.length;H++)y=P[H],Object.prototype.hasOwnProperty.call(E,y)&&(u[y]=E[y])}}function D(u){var p=1;u=u.split(":");const y=[];for(;0<p&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function O(u){f.setTimeout(()=>{throw u},0)}function R(){var u=fe;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class we{constructor(){this.h=this.g=null}add(p,y){const E=de.get();E.set(p,y),this.h?this.h.next=E:this.g=E,this.h=E}}var de=new te(()=>new Ve,u=>u.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let me,ne=!1,fe=new we,se=()=>{const u=f.Promise.resolve(void 0);me=()=>{u.then(L)}};var L=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){O(y)}var p=de;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}ne=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};f.addEventListener("test",y,p),f.removeEventListener("test",y,p)}catch{}return u}();function Pe(u,p){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(_e){e:{try{oe(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement);this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}W(Pe,ge);var De={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Ge(u,p,y,E,M){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!E,this.ha=M,this.key=++Be,this.da=this.fa=!1}function ct(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Hn(u){this.src=u,this.g={},this.h=0}Hn.prototype.add=function(u,p,y,E,M){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var re=Wn(u,p,E,M);return-1<re?(p=u[re],y||(p.fa=!1)):(p=new Ge(p,this.src,H,!!E,M),p.fa=y,u.push(p)),p};function ur(u,p){var y=p.type;if(y in u.g){var E=u.g[y],M=Array.prototype.indexOf.call(E,p,void 0),H;(H=0<=M)&&Array.prototype.splice.call(E,M,1),H&&(ct(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Wn(u,p,y,E){for(var M=0;M<u.length;++M){var H=u[M];if(!H.da&&H.listener==p&&H.capture==!!y&&H.ha==E)return M}return-1}var qn="closure_lm_"+(1e6*Math.random()|0),mi={};function Kn(u,p,y,E,M){if(Array.isArray(p)){for(var H=0;H<p.length;H++)Kn(u,p[H],y,E,M);return null}return y=dr(y),u&&u[Fe]?u.K(p,y,v(E)?!!E.capture:!1,M):gi(u,p,y,!1,E,M)}function gi(u,p,y,E,M,H){if(!p)throw Error("Invalid event type");var re=v(M)?!!M.capture:!!M,Ze=cr(u);if(Ze||(u[qn]=Ze=new Hn(u)),y=Ze.add(p,y,E,re,H),y.proxy)return y;if(E=Fr(),y.proxy=E,E.src=u,E.listener=y,u.addEventListener)Re||(M=re),M===void 0&&(M=!1),u.addEventListener(p.toString(),E,M);else if(u.attachEvent)u.attachEvent(Pn(p.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Fr(){function u(y){return p.call(u.src,u.listener,y)}const p=yi;return u}function jr(u,p,y,E,M){if(Array.isArray(p))for(var H=0;H<p.length;H++)jr(u,p[H],y,E,M);else E=v(E)?!!E.capture:!!E,y=dr(y),u&&u[Fe]?(u=u.i,p=String(p).toString(),p in u.g&&(H=u.g[p],y=Wn(H,y,E,M),-1<y&&(ct(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete u.g[p],u.h--)))):u&&(u=cr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Wn(p,y,E,M)),(y=-1<u?p[u]:null)&&Rn(y))}function Rn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Fe])ur(p.i,u);else{var y=u.type,E=u.proxy;p.removeEventListener?p.removeEventListener(y,E,u.capture):p.detachEvent?p.detachEvent(Pn(y),E):p.addListener&&p.removeListener&&p.removeListener(E),(y=cr(p))?(ur(y,u),y.h==0&&(y.src=null,p[qn]=null)):ct(u)}}}function Pn(u){return u in mi?mi[u]:mi[u]="on"+u}function yi(u,p){if(u.da)u=!0;else{p=new Pe(p,this);var y=u.listener,E=u.ha||u.src;u.fa&&Rn(u),u=y.call(E,p)}return u}function cr(u){return u=u[qn],u instanceof Hn?u:null}var hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function dr(u){return typeof u=="function"?u:(u[hr]||(u[hr]=function(p){return u.handleEvent(p)}),u[hr])}function mt(){q.call(this),this.i=new Hn(this),this.M=this,this.F=null}W(mt,q),mt.prototype[Fe]=!0,mt.prototype.removeEventListener=function(u,p,y,E){jr(this,u,p,y,E)};function at(u,p){var y,E=u.F;if(E)for(y=[];E;E=E.F)y.push(E);if(u=u.M,E=p.type||p,typeof p=="string")p=new ge(p,u);else if(p instanceof ge)p.target=p.target||u;else{var M=p;p=new ge(E,u),x(p,M)}if(M=!0,y)for(var H=y.length-1;0<=H;H--){var re=p.g=y[H];M=xn(re,E,!0,p)&&M}if(re=p.g=u,M=xn(re,E,!0,p)&&M,M=xn(re,E,!1,p)&&M,y)for(H=0;H<y.length;H++)re=p.g=y[H],M=xn(re,E,!1,p)&&M}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var y=u.g[p],E=0;E<y.length;E++)ct(y[E]);delete u.g[p],u.h--}}this.F=null},mt.prototype.K=function(u,p,y,E){return this.i.add(String(u),p,!1,y,E)},mt.prototype.L=function(u,p,y,E){return this.i.add(String(u),p,!0,y,E)};function xn(u,p,y,E){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,H=0;H<p.length;++H){var re=p[H];if(re&&!re.da&&re.capture==y){var Ze=re.listener,At=re.ha||re.src;re.fa&&ur(u.i,re),M=Ze.call(At,E)!==!1&&M}}return M&&!E.defaultPrevented}function Ur(u,p,y){if(typeof u=="function")y&&(u=S(u,y));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function yn(u){u.g=Ur(()=>{u.g=null,u.i&&(u.i=!1,yn(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class kn extends q{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:yn(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(u){q.call(this),this.h=u,this.g={}}W(fr,q);var pr=[];function vi(u){Ne(u.g,function(p,y){this.g.hasOwnProperty(y)&&Rn(p)},u),u.g={}}fr.prototype.N=function(){fr.aa.N.call(this),vi(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zr=f.JSON.stringify,Gn=f.JSON.parse,Br=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function mr(){}mr.prototype.h=null;function $r(u){return u.h||(u.h=u.i())}function _i(){}var nn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nn(){ge.call(this,"d")}W(Nn,ge);function wi(){ge.call(this,"c")}W(wi,ge);var bn={},vs=null;function gr(){return vs=vs||new mt}bn.La="serverreachability";function _s(u){ge.call(this,bn.La,u)}W(_s,ge);function Qn(u){const p=gr();at(p,new _s(p))}bn.STAT_EVENT="statevent";function ws(u,p){ge.call(this,bn.STAT_EVENT,u),this.stat=p}W(ws,ge);function ht(u){const p=gr();at(p,new ws(p,u))}bn.Ma="timingevent";function X(u,p){ge.call(this,bn.Ma,u),this.size=p}W(X,ge);function Ce(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function ue(){this.g=!0}ue.prototype.xa=function(){this.g=!1};function Oe(u,p,y,E,M,H){u.info(function(){if(u.g)if(H)for(var re="",Ze=H.split("&"),At=0;At<Ze.length;At++){var $e=Ze[At].split("=");if(1<$e.length){var bt=$e[0];$e=$e[1];var Et=bt.split("_");re=2<=Et.length&&Et[1]=="type"?re+(bt+"="+$e+"&"):re+(bt+"=redacted&")}}else re=null;else re=H;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+p+`
`+y+`
`+re})}function qe(u,p,y,E,M,H,re){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+p+`
`+y+`
`+H+" "+re})}function Je(u,p,y,E){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Qe(u,y)+(E?" "+E:"")})}function gt(u,p){u.info(function(){return"TIMEOUT: "+p})}ue.prototype.info=function(){};function Qe(u,p){if(!u.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var E=y[u];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var H=M[0];if(H!="noop"&&H!="stop"&&H!="close")for(var re=1;re<M.length;re++)M[re]=""}}}}return zr(y)}catch{return p}}var Ye={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sn;function Hr(){}W(Hr,mr),Hr.prototype.g=function(){return new XMLHttpRequest},Hr.prototype.i=function(){return{}},sn=new Hr;function vn(u,p,y,E){this.j=u,this.i=p,this.l=y,this.R=E||1,this.U=new fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rl}function Rl(){this.i=null,this.g="",this.h=!1}var ha={},Zs={};function eo(u,p,y){u.L=1,u.v=Ci(wn(p)),u.m=y,u.P=!0,da(u,null)}function da(u,p){u.F=Date.now(),tt(u),u.A=wn(u.v);var y=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),Ri(y.i,"t",E),u.C=0,y=u.j.J,u.h=new Rl,u.g=Wl(u.j,y?p:null,!u.m),0<u.O&&(u.M=new kn(S(u.Y,u,u.g),u.O)),p=u.U,y=u.g,E=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(pr[0]=M.toString()),M=pr);for(var H=0;H<M.length;H++){var re=Kn(y,M[H],E||p.handleEvent,!1,p.h||p);if(!re)break;p.g[re.key]=re}p=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Qn(),Oe(u.i,u.u,u.A,u.l,u.R,u.m)}vn.prototype.ca=function(u){u=u.target;const p=this.M;p&&an(u)==3?p.j():this.Y(u)},vn.prototype.Y=function(u){try{if(u==this.g)e:{const Et=an(this.g);var p=this.g.Ba();const Vn=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||va(this.g)))){this.J||Et!=4||p==7||(p==8||0>=Vn?Qn(3):Qn(2)),Es(this);var y=this.g.Z();this.X=y;t:if(Pl(this)){var E=va(this.g);u="";var M=E.length,H=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dn(this),Ei(this);var re="";break t}this.h.i=new f.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,u+=this.h.i.decode(E[p],{stream:!(H&&p==M-1)});E.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=y==200,qe(this.i,this.u,this.A,this.l,this.R,Et,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,At=this.g;if((Ze=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Ze)){var $e=Ze;break t}}$e=null}if(y=$e)Je(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fa(this,y);else{this.o=!1,this.s=3,ht(12),Dn(this),Ei(this);break e}}if(this.P){y=!0;let Tn;for(;!this.J&&this.C<re.length;)if(Tn=Xc(this,re),Tn==Zs){Et==4&&(this.s=4,ht(14),y=!1),Je(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==ha){this.s=4,ht(15),Je(this.i,this.l,re,"[Invalid Chunk]"),y=!1;break}else Je(this.i,this.l,Tn,null),fa(this,Tn);if(Pl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||re.length!=0||this.h.h||(this.s=1,ht(16),y=!1),this.o=this.o&&y,!y)Je(this.i,this.l,re,"[Invalid Chunked Response]"),Dn(this),Ei(this);else if(0<re.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),wa(bt),bt.M=!0,ht(11))}}else Je(this.i,this.l,re,null),fa(this,re);Et==4&&Dn(this),this.o&&!this.J&&(Et==4?ho(this.j,this):(this.o=!1,tt(this)))}else oo(this.g),y==400&&0<re.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Dn(this),Ei(this)}}}catch{}finally{}};function Pl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Xc(u,p){var y=u.C,E=p.indexOf(`
`,y);return E==-1?Zs:(y=Number(p.substring(y,E)),isNaN(y)?ha:(E+=1,E+y>p.length?Zs:(p=p.slice(E,E+y),u.C=E+y,p)))}vn.prototype.cancel=function(){this.J=!0,Dn(this)};function tt(u){u.S=Date.now()+u.I,xl(u,u.I)}function xl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ce(S(u.ba,u),p)}function Es(u){u.B&&(f.clearTimeout(u.B),u.B=null)}vn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(gt(this.i,this.A),this.L!=2&&(Qn(),ht(17)),Dn(this),this.s=2,Ei(this)):xl(this,this.S-u)};function Ei(u){u.j.G==0||u.J||ho(u.j,u)}function Dn(u){Es(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,vi(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function fa(u,p){try{var y=u.j;if(y.G!=0&&(y.g==u||Jt(y.h,u))){if(!u.K&&Jt(y.h,u)&&y.G==3){try{var E=y.Da.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)co(y),er(y);else break e;uo(y),ht(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ce(S(y.Za,y),6e3));if(1>=Nl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Qr(y,11)}else if((u.K||y.g==u)&&co(y),!ie(p))for(M=y.Da.g.parse(p),p=0;p<M.length;p++){let $e=M[p];if(y.T=$e[0],$e=$e[1],y.G==2)if($e[0]=="c"){y.K=$e[1],y.ia=$e[2];const bt=$e[3];bt!=null&&(y.la=bt,y.j.info("VER="+y.la));const Et=$e[4];Et!=null&&(y.Aa=Et,y.j.info("SVER="+y.Aa));const Vn=$e[5];Vn!=null&&typeof Vn=="number"&&0<Vn&&(E=1.5*Vn,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const Tn=u.g;if(Tn){const Ps=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ps){var H=E.h;H.g||Ps.indexOf("spdy")==-1&&Ps.indexOf("quic")==-1&&Ps.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(pa(H,H.h),H.h=null))}if(E.D){const po=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;po&&(E.ya=po,et(E.I,E.D,po))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var re=u;if(E.qa=Hl(E,E.J?E.ia:null,E.W),re.K){bl(E.h,re);var Ze=re,At=E.L;At&&(Ze.I=At),Ze.B&&(Es(Ze),tt(Ze)),E.g=re}else Rs(E);0<y.i.length&&wr(y)}else $e[0]!="stop"&&$e[0]!="close"||Qr(y,7);else y.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Qr(y,7):Ft(y):$e[0]!="noop"&&y.l&&y.l.ta($e),y.v=0)}}Qn(4)}catch{}}var kl=class{constructor(u,p){this.g=u,this.map=p}};function Ts(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _n(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Nl(u){return u.h?1:u.g?u.g.size:0}function Jt(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function pa(u,p){u.g?u.g.add(p):u.h=p}function bl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Ts.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Dl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.D);return p}return B(u.i)}function to(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],y=u.length,E=0;E<y;E++)p.push(u[E]);return p}p=[],y=0;for(E in u)p[y++]=u[E];return p}function no(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var y=0;y<u;y++)p.push(y);return p}p=[],y=0;for(const E in u)p[y++]=E;return p}}}function Ti(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var y=no(u),E=to(u),M=E.length,H=0;H<M;H++)p.call(void 0,E[H],y&&y[H],u)}var Is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jc(u,p){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var E=u[y].indexOf("="),M=null;if(0<=E){var H=u[y].substring(0,E);M=u[y].substring(E+1)}else H=u[y];p(H,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Wr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Wr){this.h=u.h,Ss(this,u.j),this.o=u.o,this.g=u.g,Ii(this,u.s),this.l=u.l;var p=u.i,y=new yr;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),Si(this,y),this.m=u.m}else u&&(p=String(u).match(Is))?(this.h=!1,Ss(this,p[1]||"",!0),this.o=ze(p[2]||""),this.g=ze(p[3]||"",!0),Ii(this,p[4]),this.l=ze(p[5]||"",!0),Si(this,p[6]||"",!0),this.m=ze(p[7]||"")):(this.h=!1,this.i=new yr(null,this.h))}Wr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Ai(p,ro,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ai(p,ro,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Ai(y,y.charAt(0)=="/"?Ll:Vl,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Ai(y,ma)),u.join("")};function wn(u){return new Wr(u)}function Ss(u,p,y){u.j=y?ze(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ii(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Si(u,p,y){p instanceof yr?(u.i=p,vr(u.i,u.h)):(y||(p=Ai(p,Ml)),u.i=new yr(p,u.h))}function et(u,p,y){u.i.set(p,y)}function Ci(u){return et(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ze(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ai(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,Ol),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ol(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ro=/[#\/\?@]/g,Vl=/[#\?:]/g,Ll=/[#\?]/g,Ml=/[#\?@]/g,ma=/#/g;function yr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Mt(u){u.g||(u.g=new Map,u.h=0,u.i&&Jc(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=yr.prototype,r.add=function(u,p){Mt(this),this.i=null,u=On(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function Yn(u,p){Mt(u),p=On(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Xn(u,p){return Mt(u),p=On(u,p),u.g.has(p)}r.forEach=function(u,p){Mt(this),this.g.forEach(function(y,E){y.forEach(function(M){u.call(p,M,E,this)},this)},this)},r.na=function(){Mt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let E=0;E<p.length;E++){const M=u[E];for(let H=0;H<M.length;H++)y.push(p[E])}return y},r.V=function(u){Mt(this);let p=[];if(typeof u=="string")Xn(this,u)&&(p=p.concat(this.g.get(On(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)p=p.concat(u[y])}return p},r.set=function(u,p){return Mt(this),this.i=null,u=On(this,u),Xn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Ri(u,p,y){Yn(u,p),0<y.length&&(u.i=null,u.g.set(On(u,p),B(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var E=p[y];const H=encodeURIComponent(String(E)),re=this.V(E);for(E=0;E<re.length;E++){var M=H;re[E]!==""&&(M+="="+encodeURIComponent(String(re[E]))),u.push(M)}}return this.i=u.join("&")};function On(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function vr(u,p){p&&!u.j&&(Mt(u),u.i=null,u.g.forEach(function(y,E){var M=E.toLowerCase();E!=M&&(Yn(this,E),Ri(this,M,y))},u)),u.j=p}function Zc(u,p){const y=new ue;if(f.Image){const E=new Image;E.onload=j(on,y,"TestLoadImage: loaded",!0,p,E),E.onerror=j(on,y,"TestLoadImage: error",!1,p,E),E.onabort=j(on,y,"TestLoadImage: abort",!1,p,E),E.ontimeout=j(on,y,"TestLoadImage: timeout",!1,p,E),f.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else p(!1)}function Fl(u,p){const y=new ue,E=new AbortController,M=setTimeout(()=>{E.abort(),on(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:E.signal}).then(H=>{clearTimeout(M),H.ok?on(y,"TestPingServer: ok",!0,p):on(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),on(y,"TestPingServer: error",!1,p)})}function on(u,p,y,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(y)}catch{}}function eh(){this.g=new Br}function jl(u,p,y){const E=y||"";try{Ti(u,function(M,H){let re=M;v(M)&&(re=zr(M)),p.push(E+H+"="+encodeURIComponent(re))})}catch(M){throw p.push(E+"type="+encodeURIComponent("_badmap")),M}}function qr(u){this.l=u.Ub||null,this.j=u.eb||!1}W(qr,mr),qr.prototype.g=function(){return new Cs(this.l,this.j)},qr.prototype.i=function(u){return function(){return u}}({});function Cs(u,p){mt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}W(Cs,mt),r=Cs.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Zn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ul(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ul(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Jn(this):Zn(this),this.readyState==3&&Ul(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Jn(this))},r.Qa=function(u){this.g&&(this.response=u,Jn(this))},r.ga=function(){this.g&&Jn(this)};function Jn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Zn(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function Zn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Kr(u){let p="";return Ne(u,function(y,E){p+=E,p+=":",p+=y,p+=`\r
`}),p}function Pi(u,p,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=Kr(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):et(u,p,y))}function lt(u){mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}W(lt,mt);var th=/^https?$/i,ga=["POST","PUT"];r=lt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sn.g(),this.v=this.o?$r(this.o):$r(sn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(H){As(this,H);return}if(u=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)y.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const H of E.keys())y.set(H,E.get(H));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),M=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(ga,p,void 0))||E||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,re]of y)this.g.setRequestHeader(H,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{so(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){As(this,H)}};function As(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,io(u),En(u)}function io(u){u.A||(u.A=!0,at(u,"complete"),at(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,at(this,"complete"),at(this,"abort"),En(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),En(this,!0)),lt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ya(this):this.bb())},r.bb=function(){ya(this)};function ya(u){if(u.h&&typeof h<"u"&&(!u.v[1]||an(u)!=4||u.Z()!=2)){if(u.u&&an(u)==4)Ur(u.Ea,0,u);else if(at(u,"readystatechange"),an(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var E;if(E=re===0){var M=String(u.D).match(Is)[1]||null;!M&&f.self&&f.self.location&&(M=f.self.location.protocol.slice(0,-1)),E=!th.test(M?M.toLowerCase():"")}y=E}if(y)at(u,"complete"),at(u,"success");else{u.m=6;try{var H=2<an(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",io(u)}}finally{En(u)}}}}function En(u,p){if(u.g){so(u);const y=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||at(u,"ready");try{y.onreadystatechange=E}catch{}}}function so(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function an(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Gn(p)}};function va(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function oo(u){const p={};u=(u.g&&2<=an(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(ie(u[E]))continue;var y=D(u[E]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=p[M]||[];p[M]=H,H.push(y)}N(p,function(E){return E.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _r(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function _a(u){this.Aa=0,this.i=[],this.j=new ue,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_r("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_r("baseRetryDelayMs",5e3,u),this.cb=_r("retryDelaySeedMs",1e4,u),this.Wa=_r("forwardChannelMaxRetries",2,u),this.wa=_r("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ts(u&&u.concurrentRequestLimit),this.Da=new eh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=_a.prototype,r.la=8,r.G=1,r.connect=function(u,p,y,E){ht(0),this.W=u,this.H=p||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=Hl(this,null,this.W),wr(this)};function Ft(u){if(ao(u),u.G==3){var p=u.U++,y=wn(u.I);if(et(y,"SID",u.K),et(y,"RID",p),et(y,"TYPE","terminate"),Gr(u,y),p=new vn(u,u.j,p),p.L=2,p.v=Ci(wn(y)),y=!1,f.navigator&&f.navigator.sendBeacon)try{y=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&f.Image&&(new Image().src=p.v,y=!0),y||(p.g=Wl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),tt(p)}$l(u)}function er(u){u.g&&(wa(u),u.g.cancel(),u.g=null)}function ao(u){er(u),u.u&&(f.clearTimeout(u.u),u.u=null),co(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function wr(u){if(!_n(u.h)&&!u.s){u.s=!0;var p=u.Ga;me||se(),ne||(me(),ne=!0),fe.add(p,u),u.B=0}}function nh(u,p){return Nl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ce(S(u.Ga,u,p),Bl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new vn(this,this.j,u);let H=this.o;if(this.S&&(H?(H=C(H),x(H,this.S)):H=this.S),this.m!==null||this.O||(M.H=H,H=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=xi(this,M,p),y=wn(this.I),et(y,"RID",u),et(y,"CVER",22),this.D&&et(y,"X-HTTP-Session-Id",this.D),Gr(this,y),H&&(this.O?p="headers="+encodeURIComponent(String(Kr(H)))+"&"+p:this.m&&Pi(y,this.m,H)),pa(this.h,M),this.Ua&&et(y,"TYPE","init"),this.P?(et(y,"$req",p),et(y,"SID","null"),M.T=!0,eo(M,y,null)):eo(M,y,p),this.G=2}}else this.G==3&&(u?lo(this,u):this.i.length==0||_n(this.h)||lo(this))};function lo(u,p){var y;p?y=p.l:y=u.U++;const E=wn(u.I);et(E,"SID",u.K),et(E,"RID",y),et(E,"AID",u.T),Gr(u,E),u.m&&u.o&&Pi(E,u.m,u.o),y=new vn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),p&&(u.i=p.D.concat(u.i)),p=xi(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),pa(u.h,y),eo(y,E,p)}function Gr(u,p){u.H&&Ne(u.H,function(y,E){et(p,E,y)}),u.l&&Ti({},function(y,E){et(p,E,y)})}function xi(u,p,y){y=Math.min(u.i.length,y);var E=u.l?S(u.l.Na,u.l,u):null;e:{var M=u.i;let H=-1;for(;;){const re=["count="+y];H==-1?0<y?(H=M[0].g,re.push("ofs="+H)):H=0:re.push("ofs="+H);let Ze=!0;for(let At=0;At<y;At++){let $e=M[At].g;const bt=M[At].map;if($e-=H,0>$e)H=Math.max(0,M[At].g-100),Ze=!1;else try{jl(bt,re,"req"+$e+"_")}catch{E&&E(bt)}}if(Ze){E=re.join("&");break e}}}return u=u.i.splice(0,y),p.D=u,E}function Rs(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;me||se(),ne||(me(),ne=!0),fe.add(p,u),u.v=0}}function uo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ce(S(u.Fa,u),Bl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,zl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ce(S(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),er(this),zl(this))};function wa(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function zl(u){u.g=new vn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=wn(u.qa);et(p,"RID","rpc"),et(p,"SID",u.K),et(p,"AID",u.T),et(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&et(p,"TO",u.ja),et(p,"TYPE","xmlhttp"),Gr(u,p),u.m&&u.o&&Pi(p,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Ci(wn(p)),y.m=null,y.P=!0,da(y,u)}r.Za=function(){this.C!=null&&(this.C=null,er(this),uo(this),ht(19))};function co(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function ho(u,p){var y=null;if(u.g==p){co(u),wa(u),u.g=null;var E=2}else if(Jt(u.h,p))y=p.D,bl(u.h,p),E=1;else return;if(u.G!=0){if(p.o)if(E==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var M=u.B;E=gr(),at(E,new X(E,y)),wr(u)}else Rs(u);else if(M=p.s,M==3||M==0&&0<p.X||!(E==1&&nh(u,p)||E==2&&uo(u)))switch(y&&0<y.length&&(p=u.h,p.i=p.i.concat(y)),M){case 1:Qr(u,5);break;case 4:Qr(u,10);break;case 3:Qr(u,6);break;default:Qr(u,2)}}}function Bl(u,p){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*p}function Qr(u,p){if(u.j.info("Error code "+p),p==2){var y=S(u.fb,u),E=u.Xa;const M=!E;E=new Wr(E||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ss(E,"https"),Ci(E),M?Zc(E.toString(),y):Fl(E.toString(),y)}else ht(2);u.G=0,u.l&&u.l.sa(p),$l(u),ao(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function $l(u){if(u.G=0,u.ka=[],u.l){const p=Dl(u.h);(p.length!=0||u.i.length!=0)&&(V(u.ka,p),V(u.ka,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.ra()}}function Hl(u,p,y){var E=y instanceof Wr?wn(y):new Wr(y);if(E.g!="")p&&(E.g=p+"."+E.g),Ii(E,E.s);else{var M=f.location;E=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var H=new Wr(null);E&&Ss(H,E),p&&(H.g=p),M&&Ii(H,M),y&&(H.l=y),E=H}return y=u.D,p=u.ya,y&&p&&et(E,y,p),et(E,"VER",u.la),Gr(u,E),E}function Wl(u,p,y){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new lt(new qr({eb:y})):new lt(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ea(){}r=Ea.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function fo(){}fo.prototype.g=function(u,p){return new Zt(u,p)};function Zt(u,p){mt.call(this),this.g=new _a(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!ie(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ie(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Er(this)}W(Zt,mt),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Ft(this.g)},Zt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=zr(u),u=y);p.i.push(new kl(p.Ya++,u)),p.G==3&&wr(p)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Ft(this.g),delete this.g,Zt.aa.N.call(this)};function ql(u){Nn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}W(ql,Nn);function Kl(){wi.call(this),this.status=1}W(Kl,wi);function Er(u){this.g=u}W(Er,Ea),Er.prototype.ua=function(){at(this.g,"a")},Er.prototype.ta=function(u){at(this.g,new ql(u))},Er.prototype.sa=function(u){at(this.g,new Kl)},Er.prototype.ra=function(){at(this.g,"b")},fo.prototype.createWebChannel=fo.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,A_=function(){return new fo},C_=function(){return gr()},S_=bn,Xd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ye.NO_ERROR=0,Ye.TIMEOUT=8,Ye.HTTP_ERROR=6,ec=Ye,rn.COMPLETE="complete",I_=rn,_i.EventType=nn,nn.OPEN="a",nn.CLOSE="b",nn.ERROR="c",nn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Qa=_i,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,T_=lt}).apply(typeof Bu<"u"?Bu:typeof self<"u"?self:typeof window<"u"?window:{});const cy="@firebase/firestore",hy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new wf("@firebase/firestore");function Mo(){return qs.logLevel}function le(r,...e){if(qs.logLevel<=je.DEBUG){const t=e.map(Of);qs.debug(`Firestore (${aa}): ${r}`,...t)}}function ci(r,...e){if(qs.logLevel<=je.ERROR){const t=e.map(Of);qs.error(`Firestore (${aa}): ${r}`,...t)}}function ls(r,...e){if(qs.logLevel<=je.WARN){const t=e.map(Of);qs.warn(`Firestore (${aa}): ${r}`,...t)}}function Of(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,R_(r,s,t)}function R_(r,e,t){let s=`FIRESTORE (${aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ci(s),new Error(s)}function Xe(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||R_(e,o,s)}function be(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends di{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}}class TC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class IC{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new is;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new is,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},f=g=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new is)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string",31837,{l:s}),new P_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class SC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new SC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const s=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,le("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new dy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=RC(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Le(r,e){return r<e?-1:r>e?1:0}function Jd(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Le(s,o);{const l=x_(),h=PC(l.encode(fy(r,t)),l.encode(fy(e,t)));return h!==0?h:Le(s,o)}}t+=s>65535?2:1}return Le(r.length,e.length)}function fy(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function PC(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Le(r[t],e[t]);return Le(r.length,e.length)}function Go(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="__name__";class Rr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Rr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Rr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const s=Rr.isNumericId(e),o=Rr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Rr.extractNumericId(e).compare(Rr.extractNumericId(t)):Jd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rs.fromString(e.substring(4,e.length-2))}}class st extends Rr{construct(e,t,s){return new st(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new st(t)}static emptyPath(){return new st([])}}const xC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends Rr{construct(e,t,s){return new Bt(e,t,s)}static isValidIdentifier(e){return xC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===py}static keyField(){return new Bt([py])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ye(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ye(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new ye(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(t)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(st.fromString(e))}static fromName(e){return new Ee(st.fromString(e).popFirst(5))}static empty(){return new Ee(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(r,e,t){if(!t)throw new ye(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function kC(r,e,t,s){if(e===!0&&s===!0)throw new ye(Q.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function my(r){if(!Ee.isDocumentKey(r))throw new ye(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function gy(r){if(Ee.isDocumentKey(r))throw new ye(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function N_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Lf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function kr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ye(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lf(r);throw new ye(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(r,e){const t={typeString:r};return e&&(t.value=e),t}function El(r,e){if(!N_(r))throw new ye(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ye(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=-62135596800,vy=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*vy);return new ot(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yy)throw new ye(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vy}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(El(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:St("string",ot._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new ot(0,0))}static max(){return new ke(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=-1;function NC(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(s===1e9?new ot(t+1,0):new ot(t,s));return new us(o,Ee.empty(),e)}function bC(r){return new us(r.readTime,r.key,hl)}class us{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new us(ke.min(),Ee.empty(),hl)}static max(){return new us(ke.max(),Ee.empty(),hl)}}function DC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==OC)throw r;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,s)=>{t(e)})}static reject(e){return new G((t,s)=>{s(e)})}static waitFor(e){return new G((t,s)=>{let o=0,l=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++l,h&&l===o&&t()},g=>s(g))}),h=!0,l===o&&t()})}static or(e){let t=G.resolve(!1);for(const s of e)t=t.next(o=>o?G.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new G((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next(w=>{h[v]=w,++f,f===l&&s(h)},w=>o(w))}})}static doWhile(e,t){return new G((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function LC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ua(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Nc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=-1;function bc(r){return r==null}function pc(r){return r===0&&1/r==-1/0}function MC(r){return typeof r=="number"&&Number.isInteger(r)&&!pc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="";function FC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=_y(e)),e=jC(r.get(t),e);return _y(e)}function jC(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case b_:t+="";break;default:t+=l}}return t}function _y(r){return r+b_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function gs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function D_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||zt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $u(this.root,e,this.comparator,!1)}getReverseIterator(){return new $u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $u(this.root,e,this.comparator,!0)}}class $u{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??zt.RED,this.left=o??zt.EMPTY,this.right=l??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new zt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return zt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ey(this.data.getIterator())}getIteratorFrom(e){return new Ey(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class Ey{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new An([])}unionWith(e){let t=new kt(Bt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new An(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new O_("Invalid base64 string: "+l):l}}(e);return new $t(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const UC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cs(r){if(Xe(!!r,39018),typeof r=="string"){let e=0;const t=UC.exec(r);if(Xe(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_t(r.seconds),nanos:_t(r.nanos)}}function _t(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function hs(r){return typeof r=="string"?$t.fromBase64String(r):$t.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="server_timestamp",L_="__type__",M_="__previous_value__",F_="__local_write_time__";function Ff(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[L_])===null||t===void 0?void 0:t.stringValue)===V_}function Dc(r){const e=r.mapValue.fields[M_];return Ff(e)?Dc(e):e}function dl(r){const e=cs(r.mapValue.fields[F_].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t,s,o,l,h,f,g,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=w}}const mc="(default)";class fl{constructor(e,t){this.projectId=e,this.database=t||mc}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database===mc}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="__type__",BC="__max__",Hu={mapValue:{}},U_="__vector__",gc="value";function ds(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ff(r)?4:HC(r)?9007199254740991:$C(r)?10:11:Ae(28295,{value:r})}function Lr(r,e){if(r===e)return!0;const t=ds(r);if(t!==ds(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return dl(r).isEqual(dl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=cs(o.timestampValue),f=cs(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return hs(o.bytesValue).isEqual(hs(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return _t(o.geoPointValue.latitude)===_t(l.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return _t(o.integerValue)===_t(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=_t(o.doubleValue),f=_t(l.doubleValue);return h===f?pc(h)===pc(f):isNaN(h)&&isNaN(f)}return!1}(r,e);case 9:return Go(r.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(wy(h)!==wy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!Lr(h[g],f[g])))return!1;return!0}(r,e);default:return Ae(52216,{left:r})}}function pl(r,e){return(r.values||[]).find(t=>Lr(t,e))!==void 0}function Qo(r,e){if(r===e)return 0;const t=ds(r),s=ds(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return function(l,h){const f=_t(l.integerValue||l.doubleValue),g=_t(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(r,e);case 3:return Ty(r.timestampValue,e.timestampValue);case 4:return Ty(dl(r),dl(e));case 5:return Jd(r.stringValue,e.stringValue);case 6:return function(l,h){const f=hs(l),g=hs(h);return f.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const f=l.split("/"),g=h.split("/");for(let v=0;v<f.length&&v<g.length;v++){const w=Le(f[v],g[v]);if(w!==0)return w}return Le(f.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const f=Le(_t(l.latitude),_t(h.latitude));return f!==0?f:Le(_t(l.longitude),_t(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Iy(r.arrayValue,e.arrayValue);case 10:return function(l,h){var f,g,v,w;const T=l.fields||{},S=h.fields||{},j=(f=T[gc])===null||f===void 0?void 0:f.arrayValue,W=(g=S[gc])===null||g===void 0?void 0:g.arrayValue,B=Le(((v=j==null?void 0:j.values)===null||v===void 0?void 0:v.length)||0,((w=W==null?void 0:W.values)===null||w===void 0?void 0:w.length)||0);return B!==0?B:Iy(j,W)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===Hu.mapValue&&h===Hu.mapValue)return 0;if(l===Hu.mapValue)return 1;if(h===Hu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),v=h.fields||{},w=Object.keys(v);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const S=Jd(g[T],w[T]);if(S!==0)return S;const j=Qo(f[g[T]],v[w[T]]);if(j!==0)return j}return Le(g.length,w.length)}(r.mapValue,e.mapValue);default:throw Ae(23264,{le:t})}}function Ty(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=cs(r),s=cs(e),o=Le(t.seconds,s.seconds);return o!==0?o:Le(t.nanos,s.nanos)}function Iy(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Qo(t[o],s[o]);if(l)return l}return Le(t.length,s.length)}function Yo(r){return Zd(r)}function Zd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=cs(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return hs(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Ee.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Zd(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Zd(t.fields[h])}`;return o+"}"}(r.mapValue):Ae(61005,{value:r})}function tc(r){switch(ds(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dc(r);return e?16+tc(e):16;case 5:return 2*r.stringValue.length;case 6:return hs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+tc(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return gs(s.fields,(l,h)=>{o+=l.length+tc(h)}),o}(r.mapValue);default:throw Ae(13486,{value:r})}}function ef(r){return!!r&&"integerValue"in r}function jf(r){return!!r&&"arrayValue"in r}function Sy(r){return!!r&&"nullValue"in r}function Cy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function nc(r){return!!r&&"mapValue"in r}function $C(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[j_])===null||t===void 0?void 0:t.stringValue)===U_}function tl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return gs(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=tl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function HC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===BC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!nc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(t)}setAll(e){let t=Bt.emptyPath(),s={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=tl(h):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());nc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];nc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){gs(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new gn(tl(this.value))}}function z_(r){const e=[];return gs(r.fields,(t,s)=>{const o=new Bt([t]);if(nc(s)){const l=z_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Yt(e,0,ke.min(),ke.min(),ke.min(),gn.empty(),0)}static newFoundDocument(e,t,s,o){return new Yt(e,1,t,ke.min(),s,o,0)}static newNoDocument(e,t){return new Yt(e,2,t,ke.min(),ke.min(),gn.empty(),0)}static newUnknownDocument(e,t){return new Yt(e,3,t,ke.min(),ke.min(),gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t){this.position=e,this.inclusive=t}}function Ay(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=Ee.comparator(Ee.fromName(h.referenceValue),t.key):s=Qo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ry(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Lr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function WC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{}class xt extends B_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new KC(e,t,s):t==="array-contains"?new YC(e,s):t==="in"?new XC(e,s):t==="not-in"?new JC(e,s):t==="array-contains-any"?new ZC(e,s):new xt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new GC(e,s):new QC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Qo(t,this.value)):t!==null&&ds(this.value)===ds(t)&&this.matchesComparison(Qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mr extends B_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Mr(e,t)}matches(e){return $_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function $_(r){return r.op==="and"}function H_(r){return qC(r)&&$_(r)}function qC(r){for(const e of r.filters)if(e instanceof Mr)return!1;return!0}function tf(r){if(r instanceof xt)return r.field.canonicalString()+r.op.toString()+Yo(r.value);if(H_(r))return r.filters.map(e=>tf(e)).join(",");{const e=r.filters.map(t=>tf(t)).join(",");return`${r.op}(${e})`}}function W_(r,e){return r instanceof xt?function(s,o){return o instanceof xt&&s.op===o.op&&s.field.isEqual(o.field)&&Lr(s.value,o.value)}(r,e):r instanceof Mr?function(s,o){return o instanceof Mr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,f)=>l&&W_(h,o.filters[f]),!0):!1}(r,e):void Ae(19439)}function q_(r){return r instanceof xt?function(t){return`${t.field.canonicalString()} ${t.op} ${Yo(t.value)}`}(r):r instanceof Mr?function(t){return t.op.toString()+" {"+t.getFilters().map(q_).join(" ,")+"}"}(r):"Filter"}class KC extends xt{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class GC extends xt{constructor(e,t){super(e,"in",t),this.keys=K_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class QC extends xt{constructor(e,t){super(e,"not-in",t),this.keys=K_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function K_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Ee.fromName(s.referenceValue))}class YC extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jf(t)&&pl(t.arrayValue,this.value)}}class XC extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pl(this.value.arrayValue,t)}}class JC extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pl(this.value.arrayValue,t)}}class ZC extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>pl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Pe=null}}function Py(r,e=null,t=[],s=[],o=null,l=null,h=null){return new eA(r,e,t,s,o,l,h)}function Uf(r){const e=be(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>tf(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Yo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Yo(s)).join(",")),e.Pe=t}return e.Pe}function zf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!WC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!W_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ry(r.startAt,e.startAt)&&Ry(r.endAt,e.endAt)}function nf(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function tA(r,e,t,s,o,l,h,f){return new Oc(r,e,t,s,o,l,h,f)}function Vc(r){return new Oc(r)}function xy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function nA(r){return r.collectionGroup!==null}function nl(r){const e=be(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new kt(Bt.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(f=f.add(v.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new vc(l,s))}),t.has(Bt.keyField().canonicalString())||e.Te.push(new vc(Bt.keyField(),s))}return e.Te}function Nr(r){const e=be(r);return e.Ie||(e.Ie=rA(e,nl(r))),e.Ie}function rA(r,e){if(r.limitType==="F")return Py(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new vc(o.field,l)});const t=r.endAt?new yc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new yc(r.startAt.position,r.startAt.inclusive):null;return Py(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function rf(r,e,t){return new Oc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Lc(r,e){return zf(Nr(r),Nr(e))&&r.limitType===e.limitType}function G_(r){return`${Uf(Nr(r))}|lt:${r.limitType}`}function Fo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>q_(o)).join(", ")}]`),bc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>Yo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>Yo(o)).join(",")),`Target(${s})`}(Nr(r))}; limitType=${r.limitType})`}function Mc(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ee.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of nl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,f,g){const v=Ay(h,f,g);return h.inclusive?v<=0:v<0}(s.startAt,nl(s),o)||s.endAt&&!function(h,f,g){const v=Ay(h,f,g);return h.inclusive?v>=0:v>0}(s.endAt,nl(s),o))}(r,e)}function iA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Q_(r){return(e,t)=>{let s=!1;for(const o of nl(r)){const l=sA(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function sA(r,e,t){const s=r.field.isKeyField()?Ee.comparator(e.key,t.key):function(l,h,f){const g=h.data.field(l),v=f.data.field(l);return g!==null&&v!==null?Qo(g,v):Ae(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return D_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=new pt(Ee.comparator);function hi(){return oA}const Y_=new pt(Ee.comparator);function Ya(...r){let e=Y_;for(const t of r)e=e.insert(t.key,t);return e}function X_(r){let e=Y_;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function $s(){return rl()}function J_(){return rl()}function rl(){return new Xs(r=>r.toString(),(r,e)=>r.isEqual(e))}const aA=new pt(Ee.comparator),lA=new kt(Ee.comparator);function Ue(...r){let e=lA;for(const t of r)e=e.add(t);return e}const uA=new kt(Le);function cA(){return uA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function Z_(r){return{integerValue:""+r}}function hA(r,e){return MC(e)?Z_(e):Bf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(){this._=void 0}}function dA(r,e,t){return r instanceof _c?function(o,l){const h={fields:{[L_]:{stringValue:V_},[F_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ff(l)&&(l=Dc(l)),l&&(h.fields[M_]=l),{mapValue:h}}(t,e):r instanceof Xo?t0(r,e):r instanceof ml?n0(r,e):function(o,l){const h=e0(o,l),f=ky(h)+ky(o.Ee);return ef(h)&&ef(o.Ee)?Z_(f):Bf(o.serializer,f)}(r,e)}function fA(r,e,t){return r instanceof Xo?t0(r,e):r instanceof ml?n0(r,e):t}function e0(r,e){return r instanceof wc?function(s){return ef(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class _c extends Fc{}class Xo extends Fc{constructor(e){super(),this.elements=e}}function t0(r,e){const t=r0(e);for(const s of r.elements)t.some(o=>Lr(o,s))||t.push(s);return{arrayValue:{values:t}}}class ml extends Fc{constructor(e){super(),this.elements=e}}function n0(r,e){let t=r0(e);for(const s of r.elements)t=t.filter(o=>!Lr(o,s));return{arrayValue:{values:t}}}class wc extends Fc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function ky(r){return _t(r.integerValue||r.doubleValue)}function r0(r){return jf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t){this.field=e,this.transform=t}}function mA(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Xo&&o instanceof Xo||s instanceof ml&&o instanceof ml?Go(s.elements,o.elements,Lr):s instanceof wc&&o instanceof wc?Lr(s.Ee,o.Ee):s instanceof _c&&o instanceof _c}(r.transform,e.transform)}class gA{constructor(e,t){this.version=e,this.transformResults=t}}class br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new br}static exists(e){return new br(void 0,e)}static updateTime(e){return new br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class jc{}function i0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new o0(r.key,br.none()):new Tl(r.key,r.data,br.none());{const t=r.data,s=gn.empty();let o=new kt(Bt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new ys(r.key,s,new An(o.toArray()),br.none())}}function yA(r,e,t){r instanceof Tl?function(o,l,h){const f=o.value.clone(),g=by(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(r,e,t):r instanceof ys?function(o,l,h){if(!rc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=by(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(s0(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function il(r,e,t,s){return r instanceof Tl?function(l,h,f,g){if(!rc(l.precondition,h))return f;const v=l.value.clone(),w=Dy(l.fieldTransforms,g,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null}(r,e,t,s):r instanceof ys?function(l,h,f,g){if(!rc(l.precondition,h))return f;const v=Dy(l.fieldTransforms,g,h),w=h.data;return w.setAll(s0(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(r,e,t,s):function(l,h,f){return rc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(r,e,t)}function vA(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=e0(s.transform,o||null);l!=null&&(t===null&&(t=gn.empty()),t.set(s.field,l))}return t||null}function Ny(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Go(s,o,(l,h)=>mA(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tl extends jc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ys extends jc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function s0(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function by(r,e,t){const s=new Map;Xe(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,fA(h,f,t[o]))}return s}function Dy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,dA(l,h,e))}return s}class o0 extends jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _A extends jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&yA(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=il(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=il(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=J_();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=i0(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(ke.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(t,s)=>Ny(t,s))&&Go(this.baseMutations,e.baseMutations,(t,s)=>Ny(t,s))}}class $f{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Xe(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=function(){return aA}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new $f(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,He;function IA(r){switch(r){case Q.OK:return Ae(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function a0(r){if(r===void 0)return ci("GRPC error has no .code"),Q.UNKNOWN;switch(r){case It.OK:return Q.OK;case It.CANCELLED:return Q.CANCELLED;case It.UNKNOWN:return Q.UNKNOWN;case It.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case It.INTERNAL:return Q.INTERNAL;case It.UNAVAILABLE:return Q.UNAVAILABLE;case It.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case It.NOT_FOUND:return Q.NOT_FOUND;case It.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case It.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case It.ABORTED:return Q.ABORTED;case It.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case It.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case It.DATA_LOSS:return Q.DATA_LOSS;default:return Ae(39323,{code:r})}}(He=It||(It={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new rs([4294967295,4294967295],0);function Oy(r){const e=x_().encode(r),t=new E_;return t.update(e),new Uint8Array(t.digest())}function Vy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new rs([t,s],0),new rs([o,l],0)]}class Hf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Xa(`Invalid padding: ${t}`);if(s<0)throw new Xa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=rs.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(rs.fromNumber(s)));return o.compare(SA)===1&&(o=new rs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Oy(e),[s,o]=Vy(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(s,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Hf(l,o,t);return s.forEach(f=>h.insert(f)),h}insert(e){if(this.fe===0)return;const t=Oy(e),[s,o]=Vy(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(s,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Uc(ke.min(),o,new pt(Le),hi(),Ue())}}class Il{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Il(s,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class l0{constructor(e,t){this.targetId=e,this.De=t}}class u0{constructor(e,t,s=$t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Ly{constructor(){this.ve=0,this.Ce=My(),this.Fe=$t.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ue(),t=Ue(),s=Ue();return this.Ce.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:l})}}),new Il(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=My()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class CA{constructor(e){this.We=e,this.Ge=new Map,this.ze=hi(),this.je=Wu(),this.Je=Wu(),this.He=new pt(Le)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((s,o)=>{this.nt(o)&&t(o)})}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const l=o.target;if(nf(l))if(s===0){const h=new Ee(l.path);this.Xe(t,h,Yt.newNoDocument(h,ke.min()))}else Xe(s===1,20013,{expectedCount:s});else{const h=this.ot(t);if(h!==s){const f=this._t(e),g=f?this.ut(f,e,h):1;if(g!==0){this.rt(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=hs(s).toUint8Array()}catch(g){if(g instanceof O_)return ls("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Hf(h,o,l)}catch(g){return ls(g instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.fe===0?null:f}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const h=this.We.lt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)}),o}Pt(e){const t=new Map;this.Ge.forEach((l,h)=>{const f=this.st(h);if(f){if(l.current&&nf(f.target)){const g=new Ee(f.target.path);this.Tt(g).has(h)||this.It(h,g)||this.Xe(h,g,Yt.newNoDocument(g,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}});let s=Ue();this.Je.forEach((l,h)=>{let f=!0;h.forEachWhile(g=>{const v=this.st(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.ze.forEach((l,h)=>h.setReadTime(e));const o=new Uc(e,t,this.He,this.ze,s);return this.ze=hi(),this.je=Wu(),this.Je=Wu(),this.He=new pt(Le),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Ly,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new kt(Le),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new kt(Le),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ly),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Wu(){return new pt(Ee.comparator)}function My(){return new pt(Ee.comparator)}const AA={asc:"ASCENDING",desc:"DESCENDING"},RA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PA={and:"AND",or:"OR"};class xA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sf(r,e){return r.useProto3Json||bc(e)?e:{value:e}}function Ec(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function kA(r,e){return Ec(r,e.toTimestamp())}function Dr(r){return Xe(!!r,49232),ke.fromTimestamp(function(t){const s=cs(t);return new ot(s.seconds,s.nanos)}(r))}function Wf(r,e){return of(r,e).canonicalString()}function of(r,e){const t=function(o){return new st(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function h0(r){const e=st.fromString(r);return Xe(g0(e),10190,{key:e.toString()}),e}function af(r,e){return Wf(r.databaseId,e.path)}function Vd(r,e){const t=h0(e);if(t.get(1)!==r.databaseId.projectId)throw new ye(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ye(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(f0(t))}function d0(r,e){return Wf(r.databaseId,e)}function NA(r){const e=h0(r);return e.length===4?st.emptyPath():f0(e)}function lf(r){return new st(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function f0(r){return Xe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Fy(r,e,t){return{name:af(r,e),fields:t.value.mapValue.fields}}function bA(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ae(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,w){return v.useProto3Json?(Xe(w===void 0||typeof w=="string",58123),$t.fromBase64String(w||"")):(Xe(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),$t.fromUint8Array(w||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(v){const w=v.code===void 0?Q.UNKNOWN:a0(v.code);return new ye(w,v.message||"")}(h);t=new u0(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Vd(r,s.document.name),l=Dr(s.document.updateTime),h=s.document.createTime?Dr(s.document.createTime):ke.min(),f=new gn({mapValue:{fields:s.document.fields}}),g=Yt.newFoundDocument(o,l,h,f),v=s.targetIds||[],w=s.removedTargetIds||[];t=new ic(v,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Vd(r,s.document),l=s.readTime?Dr(s.readTime):ke.min(),h=Yt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new ic([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Vd(r,s.document),l=s.removedTargetIds||[];t=new ic([],l,o,null)}else{if(!("filter"in e))return Ae(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new TA(o,l),f=s.targetId;t=new l0(f,h)}}return t}function DA(r,e){let t;if(e instanceof Tl)t={update:Fy(r,e.key,e.value)};else if(e instanceof o0)t={delete:af(r,e.key)};else if(e instanceof ys)t={update:Fy(r,e.key,e.data),updateMask:BA(e.fieldMask)};else{if(!(e instanceof _A))return Ae(16599,{Rt:e.type});t={verify:af(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const f=h.transform;if(f instanceof _c)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Xo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ml)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof wc)return{fieldPath:h.field.canonicalString(),increment:f.Ee};throw Ae(20930,{transform:h.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:kA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)}(r,e.precondition)),t}function OA(r,e){return r&&r.length>0?(Xe(e!==void 0,14353),r.map(t=>function(o,l){let h=o.updateTime?Dr(o.updateTime):Dr(l);return h.isEqual(ke.min())&&(h=Dr(l)),new gA(h,o.transformResults||[])}(t,e))):[]}function VA(r,e){return{documents:[d0(r,e.path)]}}function LA(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=d0(r,o);const l=function(v){if(v.length!==0)return m0(Mr.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(v){if(v.length!==0)return v.map(w=>function(S){return{field:jo(S.field),direction:jA(S.dir)}}(w))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=sf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{Vt:t,parent:o}}function MA(r){let e=NA(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Xe(s===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=function(T){const S=p0(T);return S instanceof Mr&&H_(S)?S.getFilters():[S]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(S=>function(W){return new vc(Uo(W.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(W.direction))}(S))}(t.orderBy));let f=null;t.limit&&(f=function(T){let S;return S=typeof T=="object"?T.value:T,bc(S)?null:S}(t.limit));let g=null;t.startAt&&(g=function(T){const S=!!T.before,j=T.values||[];return new yc(j,S)}(t.startAt));let v=null;return t.endAt&&(v=function(T){const S=!T.before,j=T.values||[];return new yc(j,S)}(t.endAt)),tA(e,o,h,l,f,"F",g,v)}function FA(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function p0(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Uo(t.unaryFilter.field);return xt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Uo(t.unaryFilter.field);return xt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Uo(t.unaryFilter.field);return xt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Uo(t.unaryFilter.field);return xt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(r):r.fieldFilter!==void 0?function(t){return xt.create(Uo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Mr.create(t.compositeFilter.filters.map(s=>p0(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(t.compositeFilter.op))}(r):Ae(30097,{filter:r})}function jA(r){return AA[r]}function UA(r){return RA[r]}function zA(r){return PA[r]}function jo(r){return{fieldPath:r.canonicalString()}}function Uo(r){return Bt.fromServerFormat(r.fieldPath)}function m0(r){return r instanceof xt?function(t){if(t.op==="=="){if(Cy(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NAN"}};if(Sy(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cy(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NAN"}};if(Sy(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(t.field),op:UA(t.op),value:t.value}}}(r):r instanceof Mr?function(t){const s=t.getFilters().map(o=>m0(o));return s.length===1?s[0]:{compositeFilter:{op:zA(t.op),filters:s}}}(r):Ae(54877,{filter:r})}function BA(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function g0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t,s,o,l=ke.min(),h=ke.min(),f=$t.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.gt=e}}function HA(r){const e=MA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?rf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.Dn=new qA}addToCollectionParentIndex(e,t){return this.Dn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(us.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(us.min())}updateCollectionGroup(e,t,s){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class qA{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new kt(st.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new kt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},y0=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(y0,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Jo(0)}static ur(){return new Jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="LruGarbageCollector",KA=1048576;function zy([r,e],[t,s]){const o=Le(r,t);return o===0?Le(e,s):o}class GA{constructor(e){this.Tr=e,this.buffer=new kt(zy),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();zy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QA{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){le(Uy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ua(t)?le(Uy,"Ignoring IndexedDB error during garbage collection: ",t):await la(t)}await this.Rr(3e5)})}}class YA{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Nc.ue);const s=new GA(t);return this.Vr.forEachTarget(e,o=>s.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>s.Er(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(jy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jy):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,l,h,f,g,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(s=T,f=Date.now(),this.removeTargets(e,s,t))).next(T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(v=Date.now(),Mo()<=je.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(v-g)+`ms
Total Duration: ${v-w}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T})))}}function XA(r,e){return new YA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.changes=new Xs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?G.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&il(s.mutation,o,An.empty(),ot.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ue()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ue()){const o=$s();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let h=Ya();return l.forEach((f,g)=>{h=h.insert(f,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=$s();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ue()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,s,o){let l=hi();const h=rl(),f=function(){return rl()}();return t.forEach((g,v)=>{const w=s.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof ys)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),il(w.mutation,v,w.mutation.getFieldMask(),ot.now())):h.set(v.key,An.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((v,w)=>h.set(v,w)),t.forEach((v,w)=>{var T;return f.set(v,new ZA(w,(T=h.get(v))!==null&&T!==void 0?T:null))}),f))}recalculateAndSaveOverlays(e,t){const s=rl();let o=new pt((h,f)=>h-f),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(g=>{const v=t.get(g);if(v===null)return;let w=s.get(g)||An.empty();w=f.applyToLocalView(v,w),s.set(g,w);const T=(o.get(f.batchId)||Ue()).add(g);o=o.insert(f.batchId,T)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,w=g.value,T=J_();w.forEach(S=>{if(!l.has(S)){const j=i0(t.get(S),s.get(S));j!==null&&T.set(S,j),l=l.add(S)}}),h.push(this.documentOverlayCache.saveOverlays(e,v,T))}return G.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):G.resolve($s());let f=hl,g=l;return h.next(v=>G.forEach(v,(w,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(w)?G.resolve():this.remoteDocumentCache.getEntry(e,w).next(S=>{g=g.insert(w,S)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,g,v,Ue())).next(w=>({batchId:f,changes:X_(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(s=>{let o=Ya();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Ya();return this.indexManager.getCollectionParents(e,l).next(f=>G.forEach(f,g=>{const v=function(T,S){return new Oc(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next(w=>{w.forEach((T,S)=>{h=h.insert(T,S)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(h=>{l.forEach((g,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,Yt.newInvalidDocument(w)))});let f=Ya();return h.forEach((g,v)=>{const w=l.get(g);w!==void 0&&il(w.mutation,v,An.empty(),ot.now()),Mc(t,v)&&(f=f.insert(g,v))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return G.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Dr(o.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(o){return{name:o.name,query:HA(o.bundledQuery),readTime:Dr(o.readTime)}}(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.overlays=new pt(Ee.comparator),this.kr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const s=$s();return G.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.wt(e,t,l)}),G.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(s)),G.resolve()}getOverlaysForCollection(e,t,s){const o=$s(),l=t.length+1,h=new Ee(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new pt((v,w)=>v-w);const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let w=l.get(v.largestBatchId);w===null&&(w=$s(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const f=$s(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,w)=>f.set(v,w)),!(f.size()>=o)););return G.resolve(f)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new EA(t,s));let l=this.kr.get(t);l===void 0&&(l=Ue(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(){this.qr=new kt(Lt.Qr),this.$r=new kt(Lt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new Lt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Wr(new Lt(e,t))}Gr(e,t){e.forEach(s=>this.removeReference(s,t))}zr(e){const t=new Ee(new st([])),s=new Lt(t,e),o=new Lt(t,e+1),l=[];return this.$r.forEachInRange([s,o],h=>{this.Wr(h),l.push(h.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ee(new st([])),s=new Lt(t,e),o=new Lt(t,e+1);let l=Ue();return this.$r.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Lt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Lt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ee.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new kt(Lt.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new wA(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Yr=this.Yr.add(new Lt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Mf:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Lt(t,0),o=new Lt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,o],h=>{const f=this.Zr(h.Hr);l.push(f)}),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new kt(Le);return t.forEach(o=>{const l=new Lt(o,0),h=new Lt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],f=>{s=s.add(f.Hr)})}),G.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ee.isDocumentKey(l)||(l=l.child(""));const h=new Lt(new Ee(l),0);let f=new kt(Le);return this.Yr.forEachWhile(g=>{const v=g.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(f=f.add(g.Hr)),!0)},h),G.resolve(this.ei(f))}ei(e){const t=[];return e.forEach(s=>{const o=this.Zr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Xe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return G.forEach(t.mutations,o=>{const l=new Lt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,t){const s=new Lt(t,0),o=this.Yr.firstAfterOrEqual(s);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.ni=e,this.docs=function(){return new pt(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return G.resolve(s?s.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let s=hi();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Yt.newInvalidDocument(o))}),G.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=hi();const h=t.path,f=new Ee(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:w}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||DC(bC(w),s)<=0||(o.has(w.key)||Mc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ae(9500)}ri(e,t){return G.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new oR(this)}getSize(e){return G.resolve(this.size)}}class oR extends JA{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)}),G.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.persistence=e,this.ii=new Xs(t=>Uf(t),zf),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.si=0,this.oi=new qf,this.targetCount=0,this._i=Jo.ar()}forEachTarget(e,t){return this.ii.forEach((s,o)=>t(o)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),G.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Jo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.hr(t),G.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ii.forEach((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),G.waitFor(l).next(()=>o)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return G.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),G.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return G.resolve(s)}containsKey(e,t){return G.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t){this.ai={},this.overlays={},this.ui=new Nc(0),this.ci=!1,this.ci=!0,this.li=new rR,this.referenceDelegate=e(this),this.hi=new aR(this),this.indexManager=new WA,this.remoteDocumentCache=function(o){return new sR(o)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new $A(t),this.Ti=new tR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new iR(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){le("MemoryPersistence","Starting transaction:",e);const o=new lR(this.ui.next());return this.referenceDelegate.Ii(),s(o).next(l=>this.referenceDelegate.di(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ei(e,t){return G.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,t)))}}class lR extends VC{constructor(e){super(),this.currentSequenceNumber=e}}class Kf{constructor(e){this.persistence=e,this.Ai=new qf,this.Ri=null}static Vi(e){return new Kf(e)}get mi(){if(this.Ri)return this.Ri;throw Ae(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),G.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(o=>this.mi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.mi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,s=>{const o=Ee.fromPath(s);return this.fi(e,o).next(l=>{l||t.removeEntry(o,ke.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return G.or([()=>G.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Tc{constructor(e,t){this.persistence=e,this.gi=new Xs(s=>FC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=XA(this,t)}static Vi(e,t){return new Tc(e,t)}Ii(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}yr(e){let t=0;return this.gr(e,s=>{t++}).next(()=>t)}gr(e,t){return G.forEach(this.gi,(s,o)=>this.Sr(e,s,o).next(l=>l?G.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,h=>this.Sr(e,h,t).next(f=>{f||(s++,l.removeEntry(h,ke.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tc(e.data.value)),t}Sr(e,t,s){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return G.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=Ue(),o=Ue();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Gf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return LT()?8:LC(Xt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ps(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.ys(e,t,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new uR;return this.ws(e,t,h).next(f=>{if(l.result=f,this.Rs)return this.Ss(e,t,h,f.size)})}).next(()=>l.result)}Ss(e,t,s,o){return s.documentReadCount<this.Vs?(Mo()<=je.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(Mo()<=je.DEBUG&&le("QueryEngine","Query:",Fo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(Mo()<=je.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(t))):G.resolve())}ps(e,t){if(xy(t))return G.resolve(null);let s=Nr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=rf(t,null,"F"),s=Nr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=Ue(...l);return this.gs.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,s).next(g=>{const v=this.bs(t,f);return this.Ds(t,v,h,g.readTime)?this.ps(e,rf(t,null,"F")):this.vs(e,v,t,g)}))})))}ys(e,t,s,o){return xy(t)||o.isEqual(ke.min())?G.resolve(null):this.gs.getDocuments(e,s).next(l=>{const h=this.bs(t,l);return this.Ds(t,h,s,o)?G.resolve(null):(Mo()<=je.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fo(t)),this.vs(e,h,t,NC(o,hl)).next(f=>f))})}bs(e,t){let s=new kt(Q_(e));return t.forEach((o,l)=>{Mc(e,l)&&(s=s.add(l))}),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,s){return Mo()<=je.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Fo(t)),this.gs.getDocumentsMatchingQuery(e,t,us.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="LocalStore",hR=3e8;class dR{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new pt(Le),this.Ms=new Xs(l=>Uf(l),zf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function fR(r,e,t,s){return new dR(r,e,t,s)}async function _0(r,e){const t=be(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],f=[];let g=Ue();for(const v of o){h.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}for(const v of l){f.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next(v=>({Bs:v,removedBatchIds:h,addedBatchIds:f}))})})}function pR(r,e){const t=be(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(f,g,v,w){const T=v.batch,S=T.keys();let j=G.resolve();return S.forEach(W=>{j=j.next(()=>w.getEntry(g,W)).next(B=>{const V=v.docVersions.get(W);Xe(V!==null,48541),B.version.compareTo(V)<0&&(T.applyToRemoteDocument(B,v),B.isValidDocument()&&(B.setReadTime(v.commitVersion),w.addEntry(B)))})}),j.next(()=>f.mutationQueue.removeMutationBatch(g,T))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let g=Ue();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(g=g.add(f.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function w0(r){const e=be(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function mR(r,e){const t=be(r),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach((w,T)=>{const S=o.get(T);if(!S)return;f.push(t.hi.removeMatchingKeys(l,w.removedDocuments,T).next(()=>t.hi.addMatchingKeys(l,w.addedDocuments,T)));let j=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?j=j.withResumeToken($t.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):w.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(w.resumeToken,s)),o=o.insert(T,j),function(B,V,te){return B.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=hR?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0}(S,j,w)&&f.push(t.hi.updateTargetData(l,j))});let g=hi(),v=Ue();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))}),f.push(gR(l,h,e.documentUpdates).next(w=>{g=w.Ls,v=w.ks})),!s.isEqual(ke.min())){const w=t.hi.getLastRemoteSnapshotVersion(l).next(T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(w)}return G.waitFor(f).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,v)).next(()=>g)}).then(l=>(t.Fs=o,l))}function gR(r,e,t){let s=Ue(),o=Ue();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=hi();return t.forEach((f,g)=>{const v=l.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(ke.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):le(Qf,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)}),{Ls:h,ks:o}})}function yR(r,e){const t=be(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Mf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function vR(r,e){const t=be(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.hi.getTargetData(s,e).next(l=>l?(o=l,G.resolve(o)):t.hi.allocateTargetId(s).next(h=>(o=new Ji(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s})}async function uf(r,e,t){const s=be(r),o=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!ua(h))throw h;le(Qf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function By(r,e,t){const s=be(r);let o=ke.min(),l=Ue();return s.persistence.runTransaction("Execute query","readwrite",h=>function(g,v,w){const T=be(g),S=T.Ms.get(w);return S!==void 0?G.resolve(T.Fs.get(S)):T.hi.getTargetData(v,w)}(s,h,Nr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(h,f.targetId).next(g=>{l=g})}).next(()=>s.Cs.getDocumentsMatchingQuery(h,e,t?o:ke.min(),t?l:Ue())).next(f=>(_R(s,iA(e),f),{documents:f,qs:l})))}function _R(r,e,t){let s=r.xs.get(e)||ke.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.xs.set(e,s)}class $y{constructor(){this.activeTargetIds=cA()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wR{constructor(){this.Fo=new $y,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new $y,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="ConnectivityMonitor";class Wy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){le(Hy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){le(Hy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu=null;function cf(){return qu===null?qu=function(){return 268435456+Math.round(2147483648*Math.random())}():qu++,"0x"+qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="RestConnection",TR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===mc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const h=cf(),f=this.Go(e,t.toUriEncodedString());le(Ld,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,l);const{host:v}=new URL(f),w=ra(v);return this.jo(e,f,g,s,w).then(T=>(le(Ld,`Received RPC '${e}' ${h}: `,T),T),T=>{throw ls(Ld,`RPC '${e}' ${h} failed with error: `,T,"url: ",f,"request:",s),T})}Jo(e,t,s,o,l,h){return this.Wo(e,t,s,o,l)}zo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+aa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),s&&s.headers.forEach((o,l)=>e[l]=o)}Go(e,t){const s=TR[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class CR extends IR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,l){const h=cf();return new Promise((f,g)=>{const v=new T_;v.setWithCredentials(!0),v.listenOnce(I_.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case ec.NO_ERROR:const T=v.getResponseJson();le(Gt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),f(T);break;case ec.TIMEOUT:le(Gt,`RPC '${e}' ${h} timed out`),g(new ye(Q.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:const S=v.getStatus();if(le(Gt,`RPC '${e}' ${h} failed with status:`,S,"response text:",v.getResponseText()),S>0){let j=v.getResponseJson();Array.isArray(j)&&(j=j[0]);const W=j==null?void 0:j.error;if(W&&W.status&&W.message){const B=function(te){const ie=te.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(ie)>=0?ie:Q.UNKNOWN}(W.status);g(new ye(B,W.message))}else g(new ye(Q.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ye(Q.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{c_:e,streamId:h,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{le(Gt,`RPC '${e}' ${h} completed.`)}});const w=JSON.stringify(o);le(Gt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",w,s,15)})}P_(e,t,s){const o=cf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=A_(),f=C_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=l.join("");le(Gt,`Creating RPC '${e}' stream ${o}: ${w}`,g);const T=h.createWebChannel(w,g);this.T_(T);let S=!1,j=!1;const W=new SR({Ho:V=>{j?le(Gt,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(S||(le(Gt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),le(Gt,`RPC '${e}' stream ${o} sending:`,V),T.send(V))},Yo:()=>T.close()}),B=(V,te,ie)=>{V.listen(te,K=>{try{ie(K)}catch(oe){setTimeout(()=>{throw oe},0)}})};return B(T,Qa.EventType.OPEN,()=>{j||(le(Gt,`RPC '${e}' stream ${o} transport opened.`),W.s_())}),B(T,Qa.EventType.CLOSE,()=>{j||(j=!0,le(Gt,`RPC '${e}' stream ${o} transport closed`),W.__(),this.I_(T))}),B(T,Qa.EventType.ERROR,V=>{j||(j=!0,ls(Gt,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),W.__(new ye(Q.UNAVAILABLE,"The operation could not be completed")))}),B(T,Qa.EventType.MESSAGE,V=>{var te;if(!j){const ie=V.data[0];Xe(!!ie,16349);const K=ie,oe=(K==null?void 0:K.error)||((te=K[0])===null||te===void 0?void 0:te.error);if(oe){le(Gt,`RPC '${e}' stream ${o} received error:`,oe);const _e=oe.status;let Ne=function(P){const x=It[P];if(x!==void 0)return a0(x)}(_e),N=oe.message;Ne===void 0&&(Ne=Q.INTERNAL,N="Unknown error status: "+_e+" with message "+oe.message),j=!0,W.__(new ye(Ne,N)),T.close()}else le(Gt,`RPC '${e}' stream ${o} received:`,ie),W.a_(ie)}}),B(f,S_.STAT_EVENT,V=>{V.stat===Xd.PROXY?le(Gt,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===Xd.NOPROXY&&le(Gt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{W.o_()},0),W}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(r){return new xA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="PersistentStream";class T0{constructor(e,t,s,o,l,h,f,g){this.Fi=e,this.w_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new E0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(ci(t.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.b_===t&&this.W_(s,o)},s=>{e(()=>{const o=new ye(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)})})}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{s(()=>this.G_(o))}),this.stream.onMessage(o=>{s(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return le(qy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(le(qy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AR extends T0{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=bA(this.serializer,e),s=function(l){if(!("targetChange"in l))return ke.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?ke.min():h.readTime?Dr(h.readTime):ke.min()}(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=lf(this.serializer),t.addTarget=function(l,h){let f;const g=h.target;if(f=nf(g)?{documents:VA(l,g)}:{query:LA(l,g).Vt},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=c0(l,h.resumeToken);const v=sf(l,h.expectedCount);v!==null&&(f.expectedCount=v)}else if(h.snapshotVersion.compareTo(ke.min())>0){f.readTime=Ec(l,h.snapshotVersion.toTimestamp());const v=sf(l,h.expectedCount);v!==null&&(f.expectedCount=v)}return f}(this.serializer,e);const s=FA(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=lf(this.serializer),t.removeTarget=e,this.k_(t)}}class RR extends T0{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=OA(e.writeResults,e.commitTime),s=Dr(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=lf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>DA(this.serializer,s))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{}class xR extends PR{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ye(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Wo(e,of(t,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(Q.UNKNOWN,l.toString())})}Jo(e,t,s,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.Jo(e,of(t,s),o,h,f,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ye(Q.UNKNOWN,h.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class kR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ci(t),this._a=!1):le("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="RemoteStore";class NR{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(h=>{s.enqueueAndForget(async()=>{Js(this)&&(le(Ks,"Restarting streams for network reachability change."),await async function(g){const v=be(g);v.Ia.add(4),await Sl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await Bc(v)}(this))})}),this.Aa=new kR(s,o)}}async function Bc(r){if(Js(r))for(const e of r.da)await e(!0)}async function Sl(r){for(const e of r.da)await e(!1)}function I0(r,e){const t=be(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Zf(t)?Jf(t):ca(t).x_()&&Xf(t,e))}function Yf(r,e){const t=be(r),s=ca(t);t.Ta.delete(e),s.x_()&&S0(t,e),t.Ta.size===0&&(s.x_()?s.B_():Js(t)&&t.Aa.set("Unknown"))}function Xf(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ca(r).H_(e)}function S0(r,e){r.Ra.$e(e),ca(r).Y_(e)}function Jf(r){r.Ra=new CA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),ca(r).start(),r.Aa.aa()}function Zf(r){return Js(r)&&!ca(r).M_()&&r.Ta.size>0}function Js(r){return be(r).Ia.size===0}function C0(r){r.Ra=void 0}async function bR(r){r.Aa.set("Online")}async function DR(r){r.Ta.forEach((e,t)=>{Xf(r,e)})}async function OR(r,e){C0(r),Zf(r)?(r.Aa.la(e),Jf(r)):r.Aa.set("Unknown")}async function VR(r,e,t){if(r.Aa.set("Online"),e instanceof u0&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ta.delete(f),o.Ra.removeTarget(f))}(r,e)}catch(s){le(Ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ic(r,s)}else if(e instanceof ic?r.Ra.Ye(e):e instanceof l0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(ke.min()))try{const s=await w0(r.localStore);t.compareTo(s)>=0&&await function(l,h){const f=l.Ra.Pt(h);return f.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ta.get(v);w&&l.Ta.set(v,w.withResumeToken(g.resumeToken,h))}}),f.targetMismatches.forEach((g,v)=>{const w=l.Ta.get(g);if(!w)return;l.Ta.set(g,w.withResumeToken($t.EMPTY_BYTE_STRING,w.snapshotVersion)),S0(l,g);const T=new Ji(w.target,g,v,w.sequenceNumber);Xf(l,T)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){le(Ks,"Failed to raise snapshot:",s),await Ic(r,s)}}async function Ic(r,e,t){if(!ua(e))throw e;r.Ia.add(1),await Sl(r),r.Aa.set("Offline"),t||(t=()=>w0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{le(Ks,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Bc(r)})}function A0(r,e){return e().catch(t=>Ic(r,t,e))}async function $c(r){const e=be(r),t=fs(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Mf;for(;LR(e);)try{const o=await yR(e.localStore,s);if(o===null){e.Pa.length===0&&t.B_();break}s=o.batchId,MR(e,o)}catch(o){await Ic(e,o)}R0(e)&&P0(e)}function LR(r){return Js(r)&&r.Pa.length<10}function MR(r,e){r.Pa.push(e);const t=fs(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function R0(r){return Js(r)&&!fs(r).M_()&&r.Pa.length>0}function P0(r){fs(r).start()}async function FR(r){fs(r).na()}async function jR(r){const e=fs(r);for(const t of r.Pa)e.X_(t.mutations)}async function UR(r,e,t){const s=r.Pa.shift(),o=$f.from(s,e,t);await A0(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await $c(r)}async function zR(r,e){e&&fs(r).Z_&&await async function(s,o){if(function(h){return IA(h)&&h!==Q.ABORTED}(o.code)){const l=s.Pa.shift();fs(s).N_(),await A0(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await $c(s)}}(r,e),R0(r)&&P0(r)}async function Ky(r,e){const t=be(r);t.asyncQueue.verifyOperationInProgress(),le(Ks,"RemoteStore received new credentials");const s=Js(t);t.Ia.add(3),await Sl(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Bc(t)}async function BR(r,e){const t=be(r);e?(t.Ia.delete(2),await Bc(t)):e||(t.Ia.add(2),await Sl(t),t.Aa.set("Unknown"))}function ca(r){return r.Va||(r.Va=function(t,s,o){const l=be(t);return l.ia(),new AR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:bR.bind(null,r),e_:DR.bind(null,r),n_:OR.bind(null,r),J_:VR.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),Zf(r)?Jf(r):r.Aa.set("Unknown")):(await r.Va.stop(),C0(r))})),r.Va}function fs(r){return r.ma||(r.ma=function(t,s,o){const l=be(t);return l.ia(),new RR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:FR.bind(null,r),n_:zR.bind(null,r),ea:jR.bind(null,r),ta:UR.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await $c(r)):(await r.ma.stop(),r.Pa.length>0&&(le(Ks,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new ep(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tp(r,e){if(ci("AsyncQueue",`${e}: ${r}`),ua(r))return new ye(Q.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{static emptySet(e){return new Wo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=Ya(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Wo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.fa=new pt(Ee.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ae(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,s)=>{e.push(s)}),e}}class Zo{constructor(e,t,s,o,l,h,f,g,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new Zo(e,t,Wo.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class HR{constructor(){this.queries=Qy(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=be(t),l=o.queries;o.queries=Qy(),l.forEach((h,f)=>{for(const g of f.wa)g.onError(s)})})(this,new ye(Q.ABORTED,"Firestore shutting down"))}}function Qy(){return new Xs(r=>G_(r),Lc)}async function x0(r,e){const t=be(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(s=2):(l=new $R,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=tp(h,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&np(t)}async function k0(r,e){const t=be(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function WR(r,e){const t=be(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.wa)f.Ca(o)&&(s=!0);h.ya=o}}s&&np(t)}function qR(r,e,t){const s=be(r),o=s.queries.get(e);if(o)for(const l of o.wa)l.onError(t);s.queries.delete(e)}function np(r){r.Da.forEach(e=>{e.next()})}var hf,Yy;(Yy=hf||(hf={})).Fa="default",Yy.Cache="cache";class N0{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Zo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==hf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this.key=e}}class D0{constructor(e){this.key=e}}class KR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ue(),this.mutatedKeys=Ue(),this.Xa=Q_(e),this.eu=new Wo(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new Gy,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,T)=>{const S=o.get(w),j=Mc(this.query,T)?T:null,W=!!S&&this.mutatedKeys.has(S.key),B=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let V=!1;S&&j?S.data.isEqual(j.data)?W!==B&&(s.track({type:3,doc:j}),V=!0):this.iu(S,j)||(s.track({type:2,doc:j}),V=!0,(g&&this.Xa(j,g)>0||v&&this.Xa(j,v)<0)&&(f=!0)):!S&&j?(s.track({type:0,doc:j}),V=!0):S&&!j&&(s.track({type:1,doc:S}),V=!0,(g||v)&&(f=!0)),V&&(j?(h=h.add(j),l=B?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{eu:h,ru:s,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort((w,T)=>function(j,W){const B=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{At:V})}};return B(j)-B(W)}(w.type,T.type)||this.Xa(w.doc,T.doc)),this.su(s),o=o!=null&&o;const f=t&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,v=g!==this.Ya;return this.Ya=g,h.length!==0||v?{snapshot:new Zo(this.query,e.eu,l,h,e.mutatedKeys,g===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Gy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ue(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const t=[];return e.forEach(s=>{this.Za.has(s)||t.push(new D0(s))}),this.Za.forEach(s=>{e.has(s)||t.push(new b0(s))}),t}uu(e){this.Ha=e.qs,this.Za=Ue();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Zo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const rp="SyncEngine";class GR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class QR{constructor(e){this.key=e,this.lu=!1}}class YR{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new Xs(f=>G_(f),Lc),this.Tu=new Map,this.Iu=new Set,this.du=new pt(Ee.comparator),this.Eu=new Map,this.Au=new qf,this.Ru={},this.Vu=new Map,this.mu=Jo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function XR(r,e,t=!0){const s=j0(r);let o;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await O0(s,e,t,!0),o}async function JR(r,e){const t=j0(r);await O0(t,e,!0,!1)}async function O0(r,e,t,s){const o=await vR(r.localStore,Nr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await ZR(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&I0(r.remoteStore,o),f}async function ZR(r,e,t,s,o){r.gu=(T,S,j)=>async function(B,V,te,ie){let K=V.view.nu(te);K.Ds&&(K=await By(B.localStore,V.query,!1).then(({documents:N})=>V.view.nu(N,K)));const oe=ie&&ie.targetChanges.get(V.targetId),_e=ie&&ie.targetMismatches.get(V.targetId)!=null,Ne=V.view.applyChanges(K,B.isPrimaryClient,oe,_e);return Jy(B,V.targetId,Ne._u),Ne.snapshot}(r,T,S,j);const l=await By(r.localStore,e,!0),h=new KR(e,l.qs),f=h.nu(l.documents),g=Il.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),v=h.applyChanges(f,r.isPrimaryClient,g);Jy(r,t,v._u);const w=new GR(e,t,h);return r.Pu.set(e,w),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function eP(r,e,t){const s=be(r),o=s.Pu.get(e),l=s.Tu.get(o.targetId);if(l.length>1)return s.Tu.set(o.targetId,l.filter(h=>!Lc(h,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await uf(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Yf(s.remoteStore,o.targetId),df(s,o.targetId)}).catch(la)):(df(s,o.targetId),await uf(s.localStore,o.targetId,!0))}async function tP(r,e){const t=be(r),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Yf(t.remoteStore,s.targetId))}async function nP(r,e,t){const s=uP(r);try{const o=await function(h,f){const g=be(h),v=ot.now(),w=f.reduce((j,W)=>j.add(W.key),Ue());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",j=>{let W=hi(),B=Ue();return g.Os.getEntries(j,w).next(V=>{W=V,W.forEach((te,ie)=>{ie.isValidDocument()||(B=B.add(te))})}).next(()=>g.localDocuments.getOverlayedDocuments(j,W)).next(V=>{T=V;const te=[];for(const ie of f){const K=vA(ie,T.get(ie.key).overlayedDocument);K!=null&&te.push(new ys(ie.key,K,z_(K.value.mapValue),br.exists(!0)))}return g.mutationQueue.addMutationBatch(j,v,te,f)}).next(V=>{S=V;const te=V.applyToLocalDocumentSet(T,B);return g.documentOverlayCache.saveOverlays(j,V.batchId,te)})}).then(()=>({batchId:S.batchId,changes:X_(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,f,g){let v=h.Ru[h.currentUser.toKey()];v||(v=new pt(Le)),v=v.insert(f,g),h.Ru[h.currentUser.toKey()]=v}(s,o.batchId,t),await Cl(s,o.changes),await $c(s.remoteStore)}catch(o){const l=tp(o,"Failed to persist write");t.reject(l)}}async function V0(r,e){const t=be(r);try{const s=await mR(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Eu.get(l);h&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?Xe(h.lu,14607):o.removedDocuments.size>0&&(Xe(h.lu,42227),h.lu=!1))}),await Cl(t,s,e)}catch(s){await la(s)}}function Xy(r,e,t){const s=be(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const g=be(h);g.onlineState=f;let v=!1;g.queries.forEach((w,T)=>{for(const S of T.wa)S.va(f)&&(v=!0)}),v&&np(g)}(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function rP(r,e,t){const s=be(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let h=new pt(Ee.comparator);h=h.insert(l,Yt.newNoDocument(l,ke.min()));const f=Ue().add(l),g=new Uc(ke.min(),new Map,new pt(Le),h,f);await V0(s,g),s.du=s.du.remove(l),s.Eu.delete(e),ip(s)}else await uf(s.localStore,e,!1).then(()=>df(s,e,t)).catch(la)}async function iP(r,e){const t=be(r),s=e.batch.batchId;try{const o=await pR(t.localStore,e);M0(t,s,null),L0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Cl(t,o)}catch(o){await la(o)}}async function sP(r,e,t){const s=be(r);try{const o=await function(h,f){const g=be(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let w;return g.mutationQueue.lookupMutationBatch(v,f).next(T=>(Xe(T!==null,37113),w=T.keys(),g.mutationQueue.removeMutationBatch(v,T))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,w,f)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w)).next(()=>g.localDocuments.getDocuments(v,w))})}(s.localStore,e);M0(s,e,t),L0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Cl(s,o)}catch(o){await la(o)}}function L0(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function M0(r,e,t){const s=be(r);let o=s.Ru[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function df(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Tu.get(e))r.Pu.delete(s),t&&r.hu.pu(s,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(s=>{r.Au.containsKey(s)||F0(r,s)})}function F0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Yf(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),ip(r))}function Jy(r,e,t){for(const s of t)s instanceof b0?(r.Au.addReference(s.key,e),oP(r,s)):s instanceof D0?(le(rp,"Document no longer in limbo: "+s.key),r.Au.removeReference(s.key,e),r.Au.containsKey(s.key)||F0(r,s.key)):Ae(19791,{yu:s})}function oP(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Iu.has(s)||(le(rp,"New document in limbo: "+t),r.Iu.add(s),ip(r))}function ip(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Ee(st.fromString(e)),s=r.mu.next();r.Eu.set(s,new QR(t)),r.du=r.du.insert(t,s),I0(r.remoteStore,new Ji(Nr(Vc(t.path)),s,"TargetPurposeLimboResolution",Nc.ue))}}async function Cl(r,e,t){const s=be(r),o=[],l=[],h=[];s.Pu.isEmpty()||(s.Pu.forEach((f,g)=>{h.push(s.gu(g,e,t).then(v=>{var w;if((v||t)&&s.isPrimaryClient){const T=v?!v.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(v){o.push(v);const T=Gf.Es(g.targetId,v);l.push(T)}}))}),await Promise.all(h),s.hu.J_(o),await async function(g,v){const w=be(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>G.forEach(v,S=>G.forEach(S.Is,j=>w.persistence.referenceDelegate.addReference(T,S.targetId,j)).next(()=>G.forEach(S.ds,j=>w.persistence.referenceDelegate.removeReference(T,S.targetId,j)))))}catch(T){if(!ua(T))throw T;le(Qf,"Failed to update sequence numbers: "+T)}for(const T of v){const S=T.targetId;if(!T.fromCache){const j=w.Fs.get(S),W=j.snapshotVersion,B=j.withLastLimboFreeSnapshotVersion(W);w.Fs=w.Fs.insert(S,B)}}}(s.localStore,l))}async function aP(r,e){const t=be(r);if(!t.currentUser.isEqual(e)){le(rp,"User change. New user:",e.toKey());const s=await _0(t.localStore,e);t.currentUser=e,function(l,h){l.Vu.forEach(f=>{f.forEach(g=>{g.reject(new ye(Q.CANCELLED,h))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Cl(t,s.Bs)}}function lP(r,e){const t=be(r),s=t.Eu.get(e);if(s&&s.lu)return Ue().add(s.key);{let o=Ue();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const f=t.Pu.get(h);o=o.unionWith(f.view.tu)}return o}}function j0(r){const e=be(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=V0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rP.bind(null,e),e.hu.J_=WR.bind(null,e.eventManager),e.hu.pu=qR.bind(null,e.eventManager),e}function uP(r){const e=be(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sP.bind(null,e),e}class Sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return fR(this.persistence,new cR,e.initialUser,this.serializer)}Du(e){return new v0(Kf.Vi,this.serializer)}bu(e){return new wR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sc.provider={build:()=>new Sc};class cP extends Sc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Xe(this.persistence.referenceDelegate instanceof Tc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new QA(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new v0(s=>Tc.Vi(s,t),this.serializer)}}class ff{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Xy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=aP.bind(null,this.syncEngine),await BR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HR}()}createDatastore(e){const t=zc(e.databaseInfo.databaseId),s=function(l){return new CR(l)}(e.databaseInfo);return function(l,h,f,g){return new xR(l,h,f,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,h,f){return new NR(s,o,l,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Xy(this.syncEngine,t,0),function(){return Wy.C()?new Wy:new ER}())}createSyncEngine(e,t){return function(o,l,h,f,g,v,w){const T=new YR(o,l,h,f,g,v);return w&&(T.fu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=be(o);le(Ks,"RemoteStore shutting down."),l.Ia.add(5),await Sl(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ff.provider={build:()=>new ff};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="FirestoreClient";class hP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=Vf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{le(ps,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(le(ps,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=tp(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Fd(r,e){r.asyncQueue.verifyOperationInProgress(),le(ps,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await _0(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>{ls("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{le("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{ls("Terminating Firestore due to IndexedDb database deletion failed",o)})}),r._offlineComponents=e}async function Zy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await dP(r);le(ps,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>Ky(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>Ky(e.remoteStore,o)),r._onlineComponents=e}async function dP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){le(ps,"Using user provided OfflineComponentProvider");try{await Fd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;ls("Error using user provided cache. Falling back to memory cache: "+t),await Fd(r,new Sc)}}else le(ps,"Using default OfflineComponentProvider"),await Fd(r,new cP(void 0));return r._offlineComponents}async function z0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(le(ps,"Using user provided OnlineComponentProvider"),await Zy(r,r._uninitializedComponentsProvider._online)):(le(ps,"Using default OnlineComponentProvider"),await Zy(r,new ff))),r._onlineComponents}function fP(r){return z0(r).then(e=>e.syncEngine)}async function pf(r){const e=await z0(r),t=e.eventManager;return t.onListen=XR.bind(null,e.syncEngine),t.onUnlisten=eP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tP.bind(null,e.syncEngine),t}function pP(r,e,t={}){const s=new is;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,f,g,v){const w=new U0({next:S=>{w.Ou(),h.enqueueAndForget(()=>k0(l,T));const j=S.docs.has(f);!j&&S.fromCache?v.reject(new ye(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&S.fromCache&&g&&g.source==="server"?v.reject(new ye(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),T=new N0(Vc(f.path),w,{includeMetadataChanges:!0,ka:!0});return x0(l,T)}(await pf(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="firestore.googleapis.com",tv=!0;class nv{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$0,this.ssl=tv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:tv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=y0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KA)throw new ye(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B0((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ye(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ye(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ye(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new EC;switch(s.type){case"firstParty":return new CC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=ev.get(t);s&&(le("ComponentProvider","Removing Datastore"),ev.delete(t),s.terminate())}(this),Promise.resolve()}}function mP(r,e,t,s={}){var o;r=kr(r,Hc);const l=ra(e),h=r._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${t}`;l&&(Dv(`https://${g}`),Ov("Firestore",!0)),h.host!==$0&&h.host!==g&&ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:g,ssl:l,emulatorOptions:s});if(!os(v,f)&&(r._setSettings(v),s.mockUserToken)){let w,T;if(typeof s.mockUserToken=="string")w=s.mockUserToken,T=Qt.MOCK_USER;else{w=RT(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ye(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Qt(S)}r._authCredentials=new TC(new P_(w,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Wc(this.firestore,e,this._query)}}class wt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(El(t,wt._jsonSchema))return new wt(e,s||null,new Ee(st.fromString(t.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:St("string",wt._jsonSchemaVersion),referencePath:St("string")};class ss extends Wc{constructor(e,t,s){super(e,t,Vc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new Ee(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function Wi(r,e,...t){if(r=Nt(r),k_("collection","path",e),r instanceof Hc){const s=st.fromString(e,...t);return gy(s),new ss(r,null,s)}{if(!(r instanceof wt||r instanceof ss))throw new ye(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...t));return gy(s),new ss(r.firestore,null,s)}}function Ar(r,e,...t){if(r=Nt(r),arguments.length===1&&(e=Vf.newId()),k_("doc","path",e),r instanceof Hc){const s=st.fromString(e,...t);return my(s),new wt(r,null,new Ee(s))}{if(!(r instanceof wt||r instanceof ss))throw new ye(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...t));return my(s),new wt(r.firestore,r instanceof ss?r.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="AsyncQueue";class iv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new E0(this,"async_queue_retry"),this.oc=()=>{const s=Md();s&&le(rv,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Md();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Md();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new is;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ua(e))throw e;le(rv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,ci("INTERNAL UNHANDLED ERROR: ",sv(s)),s}).then(s=>(this.nc=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=ep.createAndSchedule(this,e,t,s,l=>this.lc(l));return this.ec.push(o),o}ac(){this.tc&&Ae(47125,{hc:sv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function sv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class ea extends Hc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new iv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iv(e),this._firestoreClient=void 0,await e}}}function gP(r,e){const t=typeof r=="object"?r:Fv(),s=typeof r=="string"?r:mc,o=Tf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=CT("firestore");l&&mP(o,...l)}return o}function sp(r){if(r._terminated)throw new ye(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||yP(r),r._firestoreClient}function yP(r){var e,t,s;const o=r._freezeSettings(),l=function(f,g,v,w){return new zC(f,g,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,B0(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new hP(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn($t.fromBase64String(e))}catch(t){throw new ye(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bn($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(El(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:St("string",Bn._jsonSchemaVersion),bytes:St("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Or._jsonSchemaVersion}}static fromJSON(e){if(El(e,Or._jsonSchema))return new Or(e.latitude,e.longitude)}}Or._jsonSchemaVersion="firestore/geoPoint/1.0",Or._jsonSchema={type:St("string",Or._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(El(e,Vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Vr(e.vectorValues);throw new ye(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vr._jsonSchemaVersion="firestore/vectorValue/1.0",Vr._jsonSchema={type:St("string",Vr._jsonSchemaVersion),vectorValues:St("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=/^__.*__$/;class _P{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}class H0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ys(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function W0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ec:r})}}class Gc{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Gc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Cc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(W0(this.Ec)&&vP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class wP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||zc(e)}Dc(e,t,s,o=!1){return new Gc({Ec:e,methodName:t,bc:s,path:Bt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function q0(r){const e=r._freezeSettings(),t=zc(r._databaseId);return new wP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function EP(r,e,t,s,o,l={}){const h=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);ap("Data must be an object, but it was:",h,s);const f=K0(s,h);let g,v;if(l.merge)g=new An(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const S=mf(e,T,t);if(!h.contains(S))throw new ye(Q.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Q0(w,S)||w.push(S)}g=new An(w),v=h.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,v=h.fieldTransforms;return new _P(new gn(f),g,v)}class Qc extends Kc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qc}}function TP(r,e,t){return new Gc({Ec:3,bc:e.settings.bc,methodName:r._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class op extends Kc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=TP(this,e,!0),s=this.vc.map(l=>Al(l,t)),o=new Xo(s);return new pA(e.path,o)}isEqual(e){return e instanceof op&&os(this.vc,e.vc)}}function IP(r,e,t,s){const o=r.Dc(1,e,t);ap("Data must be an object, but it was:",o,s);const l=[],h=gn.empty();gs(s,(g,v)=>{const w=lp(e,g,t);v=Nt(v);const T=o.gc(w);if(v instanceof Qc)l.push(w);else{const S=Al(v,T);S!=null&&(l.push(w),h.set(w,S))}});const f=new An(l);return new H0(h,f,o.fieldTransforms)}function SP(r,e,t,s,o,l){const h=r.Dc(1,e,t),f=[mf(e,s,t)],g=[o];if(l.length%2!=0)throw new ye(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(mf(e,l[S])),g.push(l[S+1]);const v=[],w=gn.empty();for(let S=f.length-1;S>=0;--S)if(!Q0(v,f[S])){const j=f[S];let W=g[S];W=Nt(W);const B=h.gc(j);if(W instanceof Qc)v.push(j);else{const V=Al(W,B);V!=null&&(v.push(j),w.set(j,V))}}const T=new An(v);return new H0(w,T,h.fieldTransforms)}function Al(r,e){if(G0(r=Nt(r)))return ap("Unsupported field value:",e,r),K0(r,e);if(r instanceof Kc)return function(s,o){if(!W0(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const f of s){let g=Al(f,o.yc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=Nt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return hA(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ot.fromDate(s);return{timestampValue:Ec(o.serializer,l)}}if(s instanceof ot){const l=new ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ec(o.serializer,l)}}if(s instanceof Or)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bn)return{bytesValue:c0(o.serializer,s._byteString)};if(s instanceof wt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Wf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Vr)return function(h,f){return{mapValue:{fields:{[j_]:{stringValue:U_},[gc]:{arrayValue:{values:h.toArray().map(v=>{if(typeof v!="number")throw f.wc("VectorValues must only contain numeric values.");return Bf(f.serializer,v)})}}}}}}(s,o);throw o.wc(`Unsupported field value: ${Lf(s)}`)}(r,e)}function K0(r,e){const t={};return D_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(r,(s,o)=>{const l=Al(o,e.Vc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function G0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ot||r instanceof Or||r instanceof Bn||r instanceof wt||r instanceof Kc||r instanceof Vr)}function ap(r,e,t){if(!G0(t)||!N_(t)){const s=Lf(t);throw s==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+s)}}function mf(r,e,t){if((e=Nt(e))instanceof qc)return e._internalPath;if(typeof e=="string")return lp(r,e);throw Cc("Field path arguments must be of type string or ",r,!1,void 0,t)}const CP=new RegExp("[~\\*/\\[\\]]");function lp(r,e,t){if(e.search(CP)>=0)throw Cc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new qc(...e.split("."))._internalPath}catch{throw Cc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Cc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ye(Q.INVALID_ARGUMENT,f+r+g)}function Q0(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(X0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AP extends Y0{data(){return super.data()}}function X0(r,e){return typeof e=="string"?lp(r,e):e instanceof qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PP{convertValue(e,t="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return gs(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[gc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>_t(h.doubleValue));return new Vr(l)}convertGeoPoint(e){return new Or(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Dc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(dl(e));default:return null}}convertTimestamp(e){const t=cs(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=st.fromString(e);Xe(g0(s),9688,{name:e});const o=new fl(s.get(1),s.get(3)),l=new Ee(s.popFirst(5));return o.isEqual(t)||ci(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hs extends Y0{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(X0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hs._jsonSchema={type:St("string",Hs._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};class sc extends Hs{data(e={}){return super.data(e)}}class qo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ja(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new sc(this._firestore,this._userDataWriter,s.key,s,new Ja(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(f=>{const g=new sc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ja(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const g=new sc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ja(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return f.type!==0&&(v=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:kP(f.type),doc:g,oldIndex:v,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(r){r=kr(r,wt);const e=kr(r.firestore,ea);return pP(sp(e),r._key).then(t=>ew(e,r,t))}qo._jsonSchemaVersion="firestore/querySnapshot/1.0",qo._jsonSchema={type:St("string",qo._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};class J0 extends PP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}function Ku(r,e,t){r=kr(r,wt);const s=kr(r.firestore,ea),o=xP(r.converter,e,t);return Z0(s,[EP(q0(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,br.none())])}function Gu(r,e,t,...s){r=kr(r,wt);const o=kr(r.firestore,ea),l=q0(o);let h;return h=typeof(e=Nt(e))=="string"||e instanceof qc?SP(l,"updateDoc",r._key,e,t,s):IP(l,"updateDoc",r._key,e),Z0(o,[h.toMutation(r._key,br.exists(!0))])}function Vo(r,...e){var t,s,o;r=Nt(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||ov(e[h])||(l=e[h++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(ov(e[h])){const T=e[h];e[h]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[h+1]=(s=T.error)===null||s===void 0?void 0:s.bind(T),e[h+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let g,v,w;if(r instanceof wt)v=kr(r.firestore,ea),w=Vc(r._key.path),g={next:T=>{e[h]&&e[h](ew(v,r,T))},error:e[h+1],complete:e[h+2]};else{const T=kr(r,Wc);v=kr(T.firestore,ea),w=T._query;const S=new J0(v);g={next:j=>{e[h]&&e[h](new qo(v,S,T,j))},error:e[h+1],complete:e[h+2]},RP(r._query)}return function(S,j,W,B){const V=new U0(B),te=new N0(j,V,W);return S.asyncQueue.enqueueAndForget(async()=>x0(await pf(S),te)),()=>{V.Ou(),S.asyncQueue.enqueueAndForget(async()=>k0(await pf(S),te))}}(sp(v),w,f,g)}function Z0(r,e){return function(s,o){const l=new is;return s.asyncQueue.enqueueAndForget(async()=>nP(await fP(s),o,l)),l.promise}(sp(r),e)}function ew(r,e,t){const s=t.docs.get(e._key),o=new J0(r);return new Hs(r,o,e._key,s,new Ja(t.hasPendingWrites,t.fromCache),e.converter)}function lv(...r){return new op("arrayUnion",r)}(function(e,t=!0){(function(o){aa=o})(ia),Ko(new Ws("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new ea(new IC(s.getProvider("auth-internal")),new AC(h,s.getProvider("app-check-internal")),function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ye(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(v.options.projectId,w)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),ns(cy,hy,e),ns(cy,hy,"esm2017")})();const uv=({rating:r,onRatingChange:e,readOnly:t=!1})=>{const s=[1,2,3,4,5];return I.jsx("div",{className:"star-rating",children:s.map(o=>I.jsx("span",{className:`star ${o<=r?"filled":""}`,"data-value":o,onClick:()=>!t&&e(o),onMouseOver:l=>{if(!t){const h=l.currentTarget;Array.from(h.parentNode.children).forEach(g=>{parseInt(g.dataset.value)<=o?g.classList.add("filled"):g.classList.remove("filled")})}},onMouseOut:l=>{if(!t){const h=l.currentTarget;Array.from(h.parentNode.children).forEach(g=>{parseInt(g.dataset.value)<=r?g.classList.add("filled"):g.classList.remove("filled")})}},style:{cursor:t?"default":"pointer"},children:""},o))})},NP=["fuck","shit","asshole","bitch","cunt","damn","hell"],gf=250,bP=["Certified Nursing Assistant (CNA)","Licensed Practical Nurse (LPN) / Licensed Vocational Nurse (LVN)","Registered Nurse (RN)","Nurse Practitioner (NP)","Family Nurse Practitioner (FNP)","Adult-Gerontology Nurse Practitioner (AGNP)","Pediatric Nurse Practitioner (PNP)","Psychiatric Mental Health Nurse Practitioner (PMHNP)","Acute Care Nurse Practitioner (ACNP)","Women's Health Nurse Practitioner (WHNP)","Certified Registered Nurse Anesthetist (CRNA)","Clinical Nurse Specialist (CNS)","Certified Nurse-Midwife (CNM)","Cardiac Nurse","Critical Care Nurse (ICU Nurse)","Emergency Nurse (ER Nurse)","Oncology Nurse","Pediatric Nurse","Labor and Delivery Nurse","Neonatal Intensive Care Unit (NICU) Nurse","Medical-Surgical Nurse","Geriatric Nurse","Psychiatric/Mental Health Nurse","Home Health Nurse","Public Health Nurse","School Nurse","Perioperative Nurse (Operating Room Nurse)","Rehabilitation Nurse","Hospice Nurse / Palliative Care Nurse","Forensic Nurse","Travel Nurse","Infusion Nurse","Nephrology Nurse","Diabetic Nurse","Dermatology Nurse","Gastroenterology Nurse","Orthopedic Nurse","Urology Nurse","Wound Care Nurse","Ostomy Care Nurse","Informatics Nurse","Research Nurse","Case Management Nurse","Nurse Educator","Nurse Administrator/Manager","Occupational Health Nurse","Flight Nurse / Transport Nurse","Correctional Nurse","IV Therapy Nurse","Transplant Nurse","Genetics Nurse","Pain Management Nurse","Military Nurse","Ambulatory Care Nurse","Endoscopy Nurse","Plastic Surgery Nurse","Rural Health Nurse","Parish Nurse / Faith Community Nurse","Camp Nurse","Hyperbaric Nurse","Legal Nurse Consultant","Integrative Health Nurse"],Lo=["Select your nursing field...",...bP.sort()];function cv(r){const e=r.toLowerCase();for(const t of NP)if(e.includes(t))return{isValid:!1,message:"Content contains inappropriate language."};return r.length>gf?{isValid:!1,message:`Content exceeds ${gf} character limit.`}:{isValid:!0,message:"Content is valid."}}let DP=class extends ii.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ReviewsHubPage ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-120px)] p-4 bg-red-100 text-red-800 rounded-lg shadow-md",children:[I.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong."}),I.jsx("p",{className:"text-lg text-center mb-2",children:"We're sorry, but there was an error loading this section."}),I.jsx("p",{className:"text-sm text-red-600 text-center",children:this.state.error&&this.state.error.toString()}),I.jsxs("details",{className:"mt-4 text-left text-sm p-2 bg-red-50 rounded-md",children:[I.jsx("summary",{className:"font-semibold cursor-pointer",children:"Error Details"}),I.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words text-red-700",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),I.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"mt-6 px-6 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-colors",children:"Try Again"})]}):this.props.children}};const tw=()=>{const{db:r,currentUserId:e,currentUserIsAnonymous:t,authReady:s,appId:o,showMessage:l,setShowAuthModal:h}=z.useContext(Yc),[f,g]=z.useState(""),[v,w]=z.useState([]),[T,S]=z.useState([]),[j,W]=z.useState(!0),[B,V]=z.useState(!1),[te,ie]=z.useState(!1),[K,oe]=z.useState(20),[_e,Ne]=z.useState(null),[N,C]=z.useState(""),[P,x]=z.useState([]),[D,O]=z.useState([]),[R,we]=z.useState(!1),[de,Ve]=z.useState(!1),[me,ne]=z.useState(null),[fe,se]=z.useState([]),[L,q]=z.useState(!1),[ge,Re]=z.useState(!1),[Pe,De]=z.useState(""),[Fe,Be]=z.useState(0),[Ge,ct]=z.useState(Lo[0]),[Hn,ur]=z.useState(""),[Wn,qn]=z.useState([]),[mi,Kn]=z.useState(!1),[gi,Fr]=z.useState(!1),[jr,Rn]=z.useState({}),[Pn,yi]=z.useState({}),[cr,hr]=z.useState(!1),[dr,mt]=z.useState(""),[at,xn]=z.useState(""),[Ur,yn]=z.useState(!1),[kn,fr]=z.useState(""),[pr,vi]=z.useState(""),zr=ii.useRef(null),Gn=ii.useRef(null),Br=ii.useRef(null),mr=ii.useRef(null),$r=ii.useRef(null);console.log("ReviewsHubPage: Component rendered."),z.useEffect(()=>{let X=()=>{};if(console.log("ReviewsHubPage: useEffect for hospital onSnapshot. DB, AppId Ready:",!!r,!!o),r&&o){W(!0),V(!1);const Ce=Wi(r,`artifacts/${o}/public/data/hospitals`);X=Vo(Ce,ue=>{console.log("ReviewsHubPage: onSnapshot triggered for hospitals.");const Oe=[];ue.forEach(qe=>{const Je=qe.data();Je.name&&Oe.push({id:qe.id,name:Je.name,location:Je.location||""})}),Oe.sort((qe,Je)=>qe.name.localeCompare(Je.name)),console.log("ReviewsHubPage: Fetched Hospitals from snapshot:",Oe.length),w(Oe),W(!1),V(Oe.length===0)},ue=>{console.error("ReviewsHubPage: Error fetching hospitals with onSnapshot:",ue),l("Error loading hospitals.","error"),W(!1),V(!0)})}else W(!0),w([]),S([]),V(!1),ie(!1);return()=>{console.log("ReviewsHubPage: Cleaning up hospital onSnapshot listener."),X()}},[r,o,Wi,Vo,l]);const _i=z.useCallback(async X=>{if(X.preventDefault(),!e||t){l("You must be logged in to add a hospital. Please sign up or log in.","error"),h(!0);return}if(!r||!o){l("Firebase not ready to add a hospital.","error");return}if(!dr.trim()||!at.trim()){l("Please enter both hospital name and location.","error");return}try{const ue={id:Date.now().toString(),name:dr.trim(),location:at.trim()};w(qe=>[...qe,ue].sort((Je,gt)=>Je.name.localeCompare(gt.name))),mt(""),xn(""),hr(!1);const Oe=Ar(Wi(r,`artifacts/${o}/public/data/hospitals`));await Ku(Oe,{name:ue.name,location:ue.location,createdAt:new Date().toISOString(),createdBy:e}),l("Hospital added successfully! You can now add doctors to it.","success"),mr.current&&setTimeout(()=>{const qe=document.querySelector(`button.bg-gray-100[data-hospital-name="${ue.name}"]`);qe&&qe.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(Ce){console.error("ReviewsHubPage: Error adding hospital:",Ce),l(`Error adding hospital: ${Ce.message}`,"error"),w(ue=>ue.filter(Oe=>Oe.id!==tempId))}},[e,t,r,o,dr,at,l,Wi,Ar,Ku,h]);z.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering hospitals triggered. HospitalInput:",f,"CurrentDisplayCount:",K);const X=f.trim().toLowerCase(),Ce=v.filter(ue=>ue.name.toLowerCase().includes(X)||ue.location&&ue.location.toLowerCase().includes(X));S(Ce.slice(0,K)),ie(Ce.length>K),V(Ce.length===0&&!j)},[v,f,K,j]);const nn=z.useCallback(()=>{oe(X=>X+20)},[]),Nn=z.useCallback(async X=>{if(console.log("ReviewsHubPage: handleHospitalSelect called for hospital:",X.name),Ne(X),console.log("ReviewsHubPage: Populating hospitalInput with:",X.name),g(X.name),C(""),we(!0),Ve(!1),x([]),O([]),yn(!1),!r||!o||!X.id){l("Firebase or hospital ID missing for fetching doctors.","error"),we(!1),Ve(!0);return}const Ce=Wi(r,`artifacts/${o}/public/data/hospitals/${X.id}/doctors`);return Vo(Ce,Oe=>{console.log("ReviewsHubPage: onSnapshot triggered for doctors.");const qe=[];Oe.forEach(Qe=>{const Ye=Qe.data(),rn=Ye.ratings||[],sn=rn.length>0?rn.reduce((Hr,vn)=>Hr+(vn.stars||0),0)/rn.length:0;Ye.name&&qe.push({id:Qe.id,hospitalId:X.id,...Ye,averageRating:sn,numReviews:rn.length})}),qe.sort((Qe,Ye)=>Qe.name.localeCompare(Ye.name)),console.log("ReviewsHubPage: Fetched Doctors from snapshot for selected hospital:",qe.length),x(qe),we(!1),Ve(qe.length===0);const Je=N.trim().toLowerCase(),gt=qe.filter(Qe=>Qe.name.toLowerCase().includes(Je)||Qe.specialty&&Qe.specialty.toLowerCase().includes(Je));O(gt)},Oe=>{console.error("ReviewsHubPage: Error fetching doctors with onSnapshot:",Oe),l("Error loading doctors.","error"),we(!1),Ve(!0)})},[r,o,l,N,Wi,Vo]);z.useEffect(()=>{_e&&zr.current&&document.activeElement!==document.getElementById("hospital-input")&&(console.log("ReviewsHubPage: Scrolling useEffect triggered for doctor selection section."),setTimeout(()=>{requestAnimationFrame(()=>{zr.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[_e]),z.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering doctors triggered. DoctorInput:",N);const X=N.trim().toLowerCase(),Ce=P.filter(ue=>ue.name.toLowerCase().includes(X)||ue.specialty&&ue.specialty.toLowerCase().includes(X));O(Ce)},[P,N]);const wi=z.useCallback(async X=>{if(X.preventDefault(),!e||t){l("You must be logged in to add a doctor. Please sign up or log in.","error"),h(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!_e||!_e.id){l("Please select a hospital first to add a doctor.","error");return}if(!kn.trim()||!pr.trim()){l("Please enter both doctor name and specialty.","error");return}try{const ue={id:Date.now().toString(),hospitalId:_e.id,name:kn.trim(),specialty:pr.trim(),ratings:[],averageRating:0,numReviews:0};x(qe=>[...qe,ue].sort((Je,gt)=>Je.name.localeCompare(gt.name))),fr(""),vi(""),yn(!1);const Oe=Ar(Wi(r,`artifacts/${o}/public/data/hospitals/${_e.id}/doctors`));await Ku(Oe,{name:ue.name,specialty:ue.specialty,ratings:[],createdAt:new Date().toISOString(),createdBy:e}),l(`Dr. ${ue.name} added successfully to ${_e.name}!`,"success"),$r.current&&setTimeout(()=>{const qe=document.querySelector(`button.bg-gray-100[data-doctor-name="${ue.name}"]`);qe&&qe.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(Ce){console.error("ReviewsHubPage: Error adding doctor:",Ce),l(`Error adding doctor: ${Ce.message}`,"error"),x(ue=>ue.filter(Oe=>Oe.id!==tempId))}},[e,t,r,o,_e,kn,pr,l,Wi,Ar,Ku,h]),bn=z.useCallback(async X=>{console.log("ReviewsHubPage: handleDoctorSelect called for doctor:",X.name),ne(X),C(X.name),q(!0),Re(!1),window.innerWidth<1024?Fr(!1):Fr(!0),Gn.current&&(console.log("ReviewsHubPage: Scrolling to doctor reviews display section."),setTimeout(()=>{Gn.current.scrollIntoView({behavior:"smooth",block:"start"})},100))},[]);z.useEffect(()=>{let X=()=>{};if(me&&r&&o){const Ce=Ar(r,`artifacts/${o}/public/data/hospitals/${me.hospitalId}/doctors/${me.id}`);console.log("ReviewsHubPage: Setting up onSnapshot for doctorDocRef:",Ce.path),X=Vo(Ce,ue=>{var Oe;if(console.log("ReviewsHubPage: onSnapshot triggered for doctorDocRef."),q(!1),!ue.exists()||!((Oe=ue.data())!=null&&Oe.ratings)||ue.data().ratings.length===0)console.log("ReviewsHubPage: No reviews or document data for this doctor found in snapshot."),Re(!0),se([]);else{Re(!1);const Je=ue.data().ratings||[];console.log("ReviewsHubPage: Fetched reviews from snapshot:",Je.length),Je.sort((Qe,Ye)=>{const rn=Qe.date?Qe.date.seconds?Qe.date.seconds*1e3:new Date(Qe.date).getTime():0;return(Ye.date?Ye.date.seconds?Ye.date.seconds*1e3:new Date(Ye.date).getTime():0)-rn});const gt=Je.map(Qe=>({...Qe,date:Qe.date&&typeof Qe.date.toDate=="function"?Qe.date.toDate():new Date(Qe.date),comments:Qe.comments?Qe.comments.map(Ye=>({...Ye,date:Ye.date&&typeof Ye.date.toDate=="function"?Ye.date.toDate():new Date(Ye.date)})):[]}));se(gt),console.log("ReviewsHubPage: Reviews state updated. Current reviews count:",gt.length)}},ue=>{console.error("ReviewsHubPage: Error fetching reviews with onSnapshot:",ue),l("Error loading reviews.","error"),q(!1),Re(!0)})}else se([]),Re(!1),q(!1);return()=>{console.log("ReviewsHubPage: Cleaning up onSnapshot listener."),X()}},[me,r,o,l,Ar,Vo]);const vs=z.useCallback(async()=>{if(console.log("ReviewsHubPage: handleSubmitReview called."),!e||t){l("You must be logged in to submit a review. Please sign up or log in.","error"),h(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!_e||!me){l("Please select a hospital and doctor before submitting a review.","error");return}if(Ge===Lo[0]||Ge.trim()===""){l("Please select or type your nursing field.","error");return}const X=cv(Pe);if(!X.isValid){l(X.message,"error");return}if(Fe===0){l("Please select a star rating.","error");return}try{const Ce=Ar(r,`artifacts/${o}/public/data/hospitals/${_e.id}/doctors/${me.id}`),ue={stars:Fe,comment:Pe,reviewerId:`RN-${e.substring(0,5)}`,date:new Date,hospitalName:_e.name,doctorName:me.name,nursingField:Ge,comments:[]};console.log("ReviewsHubPage: Submitting new review:",ue),await Gu(Ce,{ratings:lv(ue)}),De(""),Be(0),ct(Lo[0]),ur(""),l("Review submitted successfully!","success"),console.log("ReviewsHubPage: Review submitted successfully!")}catch(Ce){console.error("ReviewsHubPage: Error adding review: ",Ce),l(`Error submitting review: ${Ce.message}`,"error")}},[e,t,_e,me,Pe,Fe,Ge,r,o,l,Ar,Gu,lv,h]),gr=z.useCallback(async(X,Ce)=>{if(console.log("ReviewsHubPage: handleAddCommentToReview called."),!e||t){l("You must be logged in to add a comment. Please sign up or log in.","error"),h(!0);return}if(Ce.trim()===""){l("Comment cannot be empty.","error");return}if(!_e||!me){l("Hospital or doctor not selected.","error");return}const ue=cv(Ce);if(!ue.isValid){l(ue.message,"error");return}try{console.log("ReviewsHubPage: Attempting to fetch doctor document for comment update.");const Oe=Ar(r,`artifacts/${o}/public/data/hospitals/${_e.id}/doctors/${me.id}`),qe=await av(Oe);if(qe.exists()){let gt=[...qe.data().ratings||[]];console.log("ReviewsHubPage: Current ratings from doc:",gt);const Qe=gt.findIndex(Ye=>{const rn=Ye.date?typeof Ye.date.toDate=="function"?Ye.date.toDate().getTime():new Date(Ye.date).getTime():0;return console.log(`ReviewsHubPage: Comparing reviewDateMillis ${X} with review date ${rn}`),rn===X});if(Qe!==-1){const Ye={text:Ce,userId:`RN-${e.substring(0,5)}`,date:new Date};gt[Qe].comments=gt[Qe].comments||[],gt[Qe].comments.push(Ye),console.log("ReviewsHubPage: New comment added to array. Updated ratings structure:",gt),console.log("ReviewsHubPage: Updating doc with new comments array."),await Gu(Oe,{ratings:gt}),l("Comment added successfully!","success"),console.log("ReviewsHubPage: Comment added successfully to review index",Qe,"for doctor",me.id),Rn({}),yi({})}else l("Error posting comment: Could not find review to update.","error"),console.error("ReviewsHubPage: Error: Review not found by timestamp for doctor",me.id)}else l("Error posting comment: Doctor document not found.","error"),console.error("ReviewsHubPage: Doctor document not found for comment addition:",me.id)}catch(Oe){console.error("ReviewsHubPage: Error adding comment to review: ",Oe),l(`Error posting comment: ${Oe.message}`,"error")}},[e,t,_e,me,r,o,l,Ar,av,Gu,h]),_s=z.useCallback(()=>{if(!e||t){l("You must be logged in to write a review. Please sign up or log in.","error"),h(!0);return}Fr(!0),Br.current&&Br.current.scrollIntoView({behavior:"smooth",block:"start"})},[e,t,l,h]),Qn=z.useCallback(()=>{Fr(!1),Gn.current&&Gn.current.scrollIntoView({behavior:"smooth",block:"start"})},[]),ws=X=>{const Ce=X.target.value;if(ur(Ce),ct(Ce),Ce.length>0){const ue=Lo.filter(Oe=>Oe.toLowerCase().includes(Ce.toLowerCase())&&Oe!==Lo[0]);qn(ue),Kn(!0)}else qn([]),Kn(!1),ct(Lo[0])},ht=X=>{ur(X),ct(X),Kn(!1),qn([])};return I.jsx(DP,{children:I.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8 pt-20",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:[" ",I.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:["Share Your RN",I.jsx("span",{className:"text-[#CC5500]",children:"Tea"}),"!"]}),I.jsxs("section",{id:"hospital-selection-section",className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[I.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Which hospital are you interested in?"}),I.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[I.jsx("input",{type:"text",id:"hospital-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Search for a hospital...",value:f,onChange:X=>g(X.target.value)}),I.jsx("button",{id:"search-hospital-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Hospital"})]}),I.jsxs("div",{className:"text-center mb-6",children:[I.jsx("button",{onClick:()=>{!e||t?(l("Login or Sign Up to add a hospital.","info"),h(!0)):hr(X=>!X)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:cr&&e&&!t?"Hide Add Hospital Form":I.jsxs(I.Fragment,{children:["or ",I.jsx("span",{className:"text-[#CC5500]",children:"Add Hospital"})]})}),cr&&e&&!t&&I.jsxs("form",{ref:mr,onSubmit:_i,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[I.jsx("input",{type:"text",placeholder:"New Hospital Name",value:dr,onChange:X=>mt(X.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),I.jsx("input",{type:"text",placeholder:"Location (e.g., Boston, MA)",value:at,onChange:X=>xn(X.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),I.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Hospital"}),I.jsx("button",{type:"button",onClick:()=>hr(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]}),cr&&(!e||t)&&I.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a hospital."})]}),I.jsxs("div",{className:"mb-4 mt-8",children:[I.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Hospitals with reviews:"}),I.jsxs("div",{id:"hospitals-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2",children:[j&&I.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading hospitals..."}),B&&!j&&I.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No hospitals found yet. Be the first to add a review!"}),T.map(X=>I.jsx("button",{"data-hospital-name":X.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>Nn(X),children:X.name},X.id))]}),te&&I.jsx("button",{id:"load-more-hospitals-btn",className:"mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 w-full btn-hover-scale",onClick:nn,children:"Load More Hospitals"})]})]}),I.jsxs("section",{id:"doctor-selection-section",ref:zr,className:`bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${_e?"":"hidden"}`,children:[I.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Select a doctor"}),I.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[I.jsx("input",{type:"text",id:"doctor-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"e.g., Dr. Sarah Lee",value:N,onChange:X=>C(X.target.value)}),I.jsx("button",{id:"select-doctor-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Doctor"})]}),I.jsxs("div",{className:"text-center mb-6",children:[I.jsx("button",{onClick:()=>{!e||t?(l("Login or Sign Up to add a doctor.","info"),h(!0)):yn(X=>!X)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:Ur&&e&&!t?"Hide Add Doctor Form":I.jsxs(I.Fragment,{children:["or ",I.jsx("span",{className:"text-[#CC5500]",children:"Add Doctor"})]})}),Ur&&e&&!t&&I.jsxs("form",{ref:$r,onSubmit:wi,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[I.jsx("input",{type:"text",placeholder:"New Doctor Name",value:kn,onChange:X=>fr(X.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),I.jsx("input",{type:"text",placeholder:"Specialty (e.g., Cardiologist)",value:pr,onChange:X=>vi(X.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),I.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Doctor"}),I.jsx("button",{type:"button",onClick:()=>yn(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]}),Ur&&(!e||t)&&I.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a doctor."})]}),I.jsxs("div",{className:"mb-4",children:[I.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:["Doctors with reviews at ",I.jsx("span",{id:"display-selected-hospital",className:"text-gray-800",children:_e==null?void 0:_e.name}),":"]}),I.jsxs("div",{id:"doctors-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2",children:[R&&I.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading doctors..."}),de&&!R&&I.jsx("p",{className:"text-500 italic w-full text-center",children:"No doctors found for this hospital yet."}),D.map(X=>I.jsx("button",{"data-doctor-name":X.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-custom-beige hover:text-gray-800 transition duration-200 btn-hover-scale",onClick:()=>bn(X),children:`${X.name} (${X.specialty||"N/A"}) - Avg. ${X.averageRating.toFixed(1)}  (${X.numReviews})`},X.id))]})]})]}),I.jsxs("div",{id:"reviews-content-grid",className:`grid grid-cols-1 lg:grid-cols-3 gap-8 ${me?"":"hidden"}`,children:[I.jsxs("section",{id:"review-submission-section",ref:Br,className:`lg:col-span-1 bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${gi||window.innerWidth>=1024?"":"hidden"}`,children:[I.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:["Write a Review for ",I.jsx("span",{id:"display-selected-doctor-submission",className:"text-[#CC5500]",children:me==null?void 0:me.name})]}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{htmlFor:"review-stars",className:"block text-gray-700 text-sm font-medium mb-2",children:"Rating"}),I.jsx(uv,{rating:Fe,onRatingChange:Be})]}),I.jsxs("div",{className:"mb-4 relative",children:[" ",I.jsx("label",{htmlFor:"nursing-field-input",className:"block text-gray-700 text-sm font-medium mb-2",children:"Which field of Nursing are you?"}),I.jsx("input",{type:"text",id:"nursing-field-input",className:"w-full p-3 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Start typing your nursing field...",value:Hn,onChange:ws,onFocus:()=>Kn(!0),onBlur:()=>setTimeout(()=>Kn(!1),100)}),mi&&Wn.length>0&&I.jsx("ul",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto mt-1",children:Wn.map((X,Ce)=>I.jsx("li",{className:"p-3 hover:bg-gray-100 cursor-pointer text-gray-800",onClick:()=>ht(X),children:X},Ce))})]}),I.jsx("textarea",{id:"review-text",className:"w-full p-3 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-custom-beige",rows:"6",placeholder:"Share your experience or review here...",value:Pe,onChange:X=>De(X.target.value),maxLength:gf}),I.jsx("button",{id:"submit-review-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full btn-hover-scale",onClick:vs,children:"Submit Review"}),I.jsxs("div",{className:"text-sm text-gray-500 mt-4",children:["Your User ID: ",I.jsx("span",{id:"display-user-id",children:e})]}),window.innerWidth<1024&&I.jsx("button",{id:"cancel-review-mobile-btn",className:"bg-gray-400 text-white px-4 py-2 rounded-full mt-4 w-full",onClick:Qn,children:"Cancel"})]}),I.jsxs("section",{id:"doctor-reviews-display",ref:Gn,className:"lg:col-span-2 bg-custom-beige p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[I.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:["Reviews for ",I.jsx("span",{id:"display-selected-doctor-reviews",className:"text-[#CC5500] font-extrabold",children:me&&me.name?me.name:""})]}),window.innerWidth<1024&&!gi&&I.jsxs("button",{id:"add-review-mobile-btn",className:"bg-[#001346] text-white px-5 py-2 rounded-md hover:bg-[#000A2C] transition duration-200 btn-hover-scale mb-4 w-full",onClick:_s,children:["Write a Review for ",me==null?void 0:me.name]}),L&&I.jsx("p",{className:"text-gray-700 italic text-center",children:"Loading reviews..."}),ge&&!L&&I.jsx("p",{className:"text-gray-700 italic text-center",children:"No reviews found for this doctor yet. Be the first to add one!"}),fe.length>0&&I.jsx("div",{id:"reviews-list",className:"space-y-6",children:fe.map((X,Ce)=>I.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-md border border-gray-200",children:[I.jsx("div",{className:"flex justify-between items-start mb-3",children:I.jsxs("div",{className:"min-w-0",children:[I.jsx(uv,{rating:X.stars,onRatingChange:()=>{},readOnly:!0}),I.jsxs("p",{className:"text-sm text-gray-500 mt-1 break-words",children:[X.nursingField," on: ",X.date instanceof Date?X.date.toLocaleDateString():"N/A"]})]})}),I.jsx("p",{className:"text-gray-800 leading-relaxed mb-4",children:X.comment}),I.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[I.jsxs("h4",{className:"text-md font-semibold text-gray-700 mb-3",children:["Comments (",X.comments?X.comments.length:0,")"]}),X.comments&&X.comments.length>0?I.jsx("div",{className:"space-y-3 mb-4",children:X.comments.map((ue,Oe)=>I.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[I.jsx("p",{children:ue.text}),I.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["by ",ue.userId," on ",ue.date instanceof Date?ue.date.toLocaleDateString():"N/A"]})]},ue.date.getTime()+"_"+Oe))}):I.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"No comments yet. Be the first!"}),I.jsx("button",{onClick:()=>{!e||t?(l("Login or Sign Up to add a comment.","info"),h(!0)):Rn(ue=>({...ue,[X.date.getTime()]:!ue[X.date.getTime()]}))},className:"text-blue-500 hover:underline text-sm mb-3",children:jr[X.date.getTime()]&&e&&!t?"Cancel Comment":"Add a Comment"}),jr[X.date.getTime()]&&e&&!t&&I.jsxs("div",{className:"flex mt-2",children:[I.jsx("input",{type:"text",placeholder:"Write a comment...",className:"flex-grow p-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:ue=>{ue.key==="Enter"&&ue.target.value.trim()&&(gr(X.date.getTime(),ue.target.value),ue.target.value="")},value:Pn[X.date.getTime()]||"",onChange:ue=>yi(Oe=>({...Oe,[X.date.getTime()]:ue.target.value}))}),I.jsx("button",{className:"submit-comment-btn bg-gray-600 text-white px-4 py-2 rounded-r-md hover:bg-gray-700 transition duration-200 btn-hover-scale",onClick:()=>{const ue=Pn[X.date.getTime()];gr(X.date.getTime(),ue)},children:"Post"})]})]})]},X.date.getTime()+Ce))})]})]})]})})},OP=()=>{const r=na(),{auth:e,showMessage:t,appId:s}=z.useContext(Yc),[o,l]=z.useState(""),[h,f]=z.useState(""),[g,v]=z.useState(""),[w,T]=z.useState(""),[S,j]=z.useState(!1);z.useEffect(()=>{if(r.hash){const B=r.hash.substring(1),V=document.getElementById(B);V&&setTimeout(()=>{V.scrollIntoView({behavior:"smooth",block:"start"})},100)}},[r.hash]),z.useEffect(()=>{const B=document.querySelectorAll(".revealable"),V=new IntersectionObserver((te,ie)=>{te.forEach(K=>{K.isIntersecting&&(K.target.style.opacity=1,ie.unobserve(K.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return B.forEach(te=>{V.observe(te)}),()=>{B.forEach(te=>{V.unobserve(te)})}},[]);const W=z.useCallback(async B=>{var V;if(B.preventDefault(),j(!0),!o.trim()||!h.trim()||!g.trim()||!w.trim()){t("Please fill in all required fields.","error"),j(!1);return}try{const ie=`${`https://${s}.cloudfunctions.net`}/sendContactEmail`,K=await fetch(ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{name:o,email:h,subject:g,message:w}})}),oe=await K.json();if(K.ok&&oe.data.success)t("Your message has been sent successfully!","success"),l(""),f(""),v(""),T("");else{const _e=((V=oe.data)==null?void 0:V.message)||"Failed to send message. Please try again.";t(`Error: ${_e}`,"error")}}catch(te){console.error("Error submitting contact form:",te),t(`An unexpected error occurred: ${te.message}`,"error")}finally{j(!1)}},[o,h,g,w,t,s]);return I.jsxs(I.Fragment,{children:[I.jsxs("section",{id:"home",className:"relative bg-custom-beige text-gray-800 py-24 px-6 md:px-10 lg:px-16 text-center rounded-lg mx-4 mb-2 shadow-lg overflow-hidden animate-fade-in section-hover",children:[I.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:I.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[I.jsx("defs",{children:I.jsx("pattern",{id:"dot-pattern",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:I.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"#FFC982"})})}),I.jsx("rect",{x:"0",y:"0",width:"100",height:"100",fill:"url(#dot-pattern)"})]})}),I.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[I.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 leading-tight animate-fade-in-down drop-shadow-md",children:"RNTea: Rate, Navigate, Trust."}),I.jsx("p",{className:"text-xl md:text-2xl mb-10 text-gray-700 animate-fade-in-up",children:" Do you really trust your Doctors? Let's hear from experienced RNs for a change. "}),I.jsx(qi,{to:"#full-reviews-hub",className:"bg-white text-gray-800 hover:bg-gray-100 font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 hover:shadow-2xl border border-gray-200 animate-fade-in-up antialiased",children:" View All Reviews "})]})]}),I.jsx("section",{id:"about",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 mt-2 mb-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:I.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-center gap-12",children:[I.jsx("div",{className:"md:w-1/2 flex justify-center order-2 md:order-1 animate-slide-in-left",children:I.jsx("img",{src:"/Express-collage.jpg",alt:"Collage of diverse medical professionals",className:"rounded-lg shadow-xl border-4 w-full max-w-md object-cover",onError:B=>{B.target.onerror=null,B.target.src="https://placehold.co/400x300/F0F0F0/888888?text=Image+Not+Loaded"}})}),I.jsxs("div",{className:"md:w-1/2 text-center md:text-left order-1 md:order-2 animate-slide-in-right",children:[I.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-6",children:"Our Philosophy"}),I.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-4 antialiased",children:"At RNTea, we believe in transparency and community to help you find the best care. Discover insights, share experiences, and make informed decisions with confidence."}),I.jsx("p",{className:"text-lg text-gray-700 leading-relaxed antialiased",children:"Our platform empowers Registered Nurses to share their honest experiences, providing a unique and invaluable perspective on healthcare providers. We aim to build a trusted resource for patients seeking reliable and empathetic care, while also helping nurses navigate career decisions whether it be short term travel contracts or a potential employer."}),I.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mt-4 font-semibold antialiased",children:"Now spill some RNTea!"})]})]})}),I.jsx("section",{id:"full-reviews-hub",className:"relative z-10 scroll-margin-top-adjusted revealable",children:I.jsx(tw,{})}),I.jsx("section",{id:"contact",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 my-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:I.jsxs("div",{className:"container mx-auto",children:[I.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 text-center mb-16 animate-fade-in-down",children:"Contact Us!"}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[I.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-left",children:[I.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Send us a Message"}),I.jsxs("form",{onSubmit:W,children:[I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{htmlFor:"your-name",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Name"}),I.jsx("input",{type:"text",id:"your-name",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"John Doe",value:o,onChange:B=>l(B.target.value),required:!0})]}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{htmlFor:"your-email",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Email"}),I.jsx("input",{type:"email",id:"your-email",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"you@example.com",value:h,onChange:B=>f(B.target.value),required:!0})]}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{htmlFor:"subject",className:"block text-gray-700 text-sm font-medium mb-2",children:"Subject"}),I.jsx("input",{type:"text",id:"subject",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Regarding a review...",value:g,onChange:B=>v(B.target.value),required:!0})]}),I.jsxs("div",{className:"mb-6",children:[I.jsxs("label",{htmlFor:"your-message",className:"block text-gray-700 text-sm font-medium mb-2",children:["Your Message ",I.jsx("span",{className:"text-gray-500",children:"(optional)"})]}),I.jsx("textarea",{id:"your-message",rows:"5",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Share your experience... (optional)",value:w,onChange:B=>T(B.target.value),required:!0})]}),I.jsxs("div",{className:"mb-6 bg-gray-200 p-4 rounded text-center text-gray-600 text-sm",children:["[ReCAPTCHA Placeholder]",I.jsx("p",{className:"text-xs mt-2",children:"ERROR for site owner: Invalid domain for site key"}),I.jsx("p",{className:"text-xs",children:"reCAPTCHA Privacy - Terms"})]}),I.jsx("button",{type:"submit",className:"bg-[#FFDEB5] hover:bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-md w-full transition duration-300 ease-in-out",disabled:S,children:S?"Sending...":"Send Message"})]})]}),I.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-right",children:[I.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Find Us"}),I.jsxs("div",{className:"mb-8",children:[I.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Email Addresses"}),I.jsxs("div",{className:"flex items-center mb-3",children:[I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),I.jsxs("div",{children:[I.jsx("p",{className:"text-gray-700 font-medium",children:"General Questions"}),I.jsx("a",{href:"mailto:questions@rntea.com",className:"text-blue-600 hover:underline",children:"questions@rntea.com"})]})]}),I.jsxs("div",{className:"flex items-center",children:[I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15.75c-2.648 0-5.195-.429-7.669-1.245a2.793 2.793 0 01-1.342-2.934 11.233 11.233 0 013.744-6.436 2.922 2.922 0 011.644-1.018 10.38 10.38 0 015.894 0 2.922 2.922 0 011.644 1.018 11.233 11.233 0 013.744 6.436 2.793 2.793 0 01-1.342 2.934z"})}),I.jsxs("div",{children:[I.jsx("p",{className:"text-gray-700 font-medium",children:"Business Inquiries"}),I.jsx("a",{href:"mailto:business@rntea.com",className:"text-blue-600 hover:underline",children:"business@rntea.com"})]})]})]}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Connect with Us"}),I.jsxs("div",{className:"flex space-x-6 justify-start",children:[I.jsx("a",{href:"https://facebook.com/rntea",target:"_blank",className:"social-icon-hover text-blue-600 hover:text-blue-700 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:I.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.271 0-4.192 1.552-4.192 4.615v3.385z"})})}),I.jsx("a",{href:"https://twitter.com/rntea_official",target:"_blank",className:"social-icon-hover text-gray-800 hover:text-black transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:I.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 1200 1227",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",children:I.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 671.544L0 1226.37H105.866L515.414 750.206L852.076 1226.37H1200L714.163 519.284ZM569.165 687.828L521.617 619.927L144.036 79.6262H302.46L603.935 515.043L651.483 582.944L1055.03 1147.37H896.59L569.165 687.828Z"})})}),I.jsx("a",{href:"https://linkedin.com/company/rntea",target:"_blank",className:"social-icon-hover text-blue-700 hover:text-blue-800 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:I.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),I.jsx("a",{href:"https://instagram.com/rntea_official",target:"_blank",className:"social-icon-hover text-pink-500 hover:text-pink-600 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:I.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:I.jsx("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4c0 3.2-2.6 5.8-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8C2 4.6 4.6 2 7.8 2zm-.2 2A2.2 2.2 0 0 0 5.4 6.2v8.4c0 1.2.9 2.2 2.2 2.2h8.4a2.2 2.2 0 0 0 2.2-2.2V6.2A2.2 2.2 0 0 0 16.2 4H7.6zM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm6.5-3A1.5 1.5 0 1 0 18.5 7 1.5 1.5 0 0 0 18.5 4z"})})})]})]})]})]})]})})]})},VP=({message:r,type:e})=>{if(!r)return null;const t=e==="success"?"bg-green-100":"bg-red-100",s=e==="success"?"text-green-700":"text-red-700";return I.jsx("div",{className:`p-3 rounded-md ${t} ${s} my-4 message-box-fade show`,children:r})},LP=({onClose:r})=>{var P;const{signUpWithEmailPassword:e,signInWithEmailPassword:t,signInWithApple:s,linkAnonymousWithEmailPassword:o,linkAnonymousWithApple:l,auth:h,currentUserId:f}=z.useContext(Yc),[g,v]=z.useState(!0),[w,T]=z.useState(""),[S,j]=z.useState(""),[W,B]=z.useState(""),[V,te]=z.useState(""),[ie,K]=z.useState(""),oe=z.useCallback((x,D)=>{te(x),K(D),setTimeout(()=>{te(""),K("")},5e3)},[]),_e=(P=h==null?void 0:h.currentUser)==null?void 0:P.isAnonymous,Ne=async x=>{if(x.preventDefault(),te(""),!w||!S){oe("Please enter both email and password.","error");return}if(!g&&S!==W){oe("Passwords do not match.","error");return}if(g)if(_e)if(await o(w,S))oe("Anonymous account linked and signed in!","success"),r();else try{const O=await signInWithEmailAndPassword(h,w,S);oe("Signed in successfully!","success"),r()}catch(O){oe(`Login Failed: ${O.message}`,"error")}else await t(w,S)&&(oe("Signed in successfully!","success"),r());else await e(w,S)&&(oe("Account created and signed in!","success"),r())},N=async()=>{oe("Google Sign-In not yet implemented.","info")},C=async()=>{_e?await l()&&(oe("Anonymous account linked with Apple and signed in!","success"),r()):await s()&&(oe("Signed in with Apple successfully!","success"),r())};return I.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:I.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-md relative animate-scale-in",children:[I.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold",children:""}),I.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:g?"Sign In":"Sign Up"}),V&&I.jsx("div",{className:`p-3 mb-4 rounded-md text-center ${ie==="error"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:V}),I.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2",children:"Email"}),I.jsx("input",{type:"email",id:"email",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"your.email@example.com",value:w,onChange:x=>T(x.target.value),required:!0})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2",children:"Password"}),I.jsx("input",{type:"password",id:"password",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"********",value:S,onChange:x=>j(x.target.value),required:!0})]}),!g&&I.jsxs("div",{children:[I.jsx("label",{htmlFor:"confirm-password",className:"block text-gray-700 text-sm font-medium mb-2",children:"Confirm Password"}),I.jsx("input",{type:"password",id:"confirm-password",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"********",value:W,onChange:x=>B(x.target.value),required:!0})]}),I.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-md hover:bg-blue-700 transition duration-300 shadow-md btn-hover-scale",children:g?"Sign In":"Sign Up"})]}),I.jsxs("div",{className:"mt-6 text-center",children:[I.jsxs("p",{className:"text-gray-600",children:[g?"Don't have an account? ":"Already have an account? ",I.jsx("button",{onClick:()=>v(x=>!x),className:"text-blue-500 hover:underline font-semibold",children:g?"Sign Up":"Sign In"})]}),g&&I.jsx("button",{onClick:()=>oe("Password reset functionality not yet implemented.","info"),className:"text-blue-500 hover:underline text-sm mt-2",children:"Forgot Password?"})]}),I.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6 space-y-4",children:[I.jsx("p",{className:"text-center text-gray-600",children:"Or continue with"}),I.jsxs("div",{className:"flex justify-center gap-4",children:[I.jsxs("button",{onClick:N,className:"flex items-center justify-center w-1/2 bg-white border border-gray-300 text-gray-800 py-3 px-4 rounded-md shadow-sm hover:bg-gray-50 transition duration-300 btn-hover-scale",children:[I.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:[I.jsx("path",{d:"M12.0003 4.75C14.0273 4.75 15.8053 5.438 17.1523 6.694L18.9643 4.882C17.0183 3.033 14.6063 2 12.0003 2C8.87533 2 6.07133 3.453 4.38633 5.859L6.04633 7.153C6.88233 5.761 8.39633 4.75 12.0003 4.75Z",fill:"#EA4335"}),I.jsx("path",{d:"M23.4999 12.272C23.4999 11.492 23.4249 10.721 23.2999 9.969H12.2009V14.51H18.7959C18.5919 15.534 17.9739 16.395 17.1199 16.989L18.7959 18.293C19.8669 17.335 20.6699 16.035 21.1899 14.51L23.4999 12.272Z",fill:"#4285F4"}),I.jsx("path",{d:"M6.04625 16.847L4.38625 18.141C5.97125 20.547 8.87525 22 12.0003 22C14.5943 22 17.0003 20.967 18.9353 19.14L17.1433 17.714C15.8053 18.528 14.0273 19.002 12.0003 19.002C8.39633 19.002 6.88233 17.991 6.04625 16.847Z",fill:"#34A853"}),I.jsx("path",{d:"M4.70725 14.51L2.39725 16.75C1.61525 15.226 1.12725 13.626 1.12725 12C1.12725 10.374 1.61525 8.774 2.39725 7.25L4.70725 9.488C4.24925 10.492 3.99925 11.25 3.99925 12C3.99925 12.75 4.24925 13.508 4.70725 14.51Z",fill:"#FBBC04"})]}),"Google"]}),I.jsxs("button",{onClick:C,className:"flex items-center justify-center w-1/2 bg-black text-white py-3 px-4 rounded-md shadow-sm hover:bg-gray-800 transition duration-300 btn-hover-scale",children:[I.jsx("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor"}),"Apple"]})]})]})]})})},Yc=z.createContext(null),qa=null,MP=null;class FP extends ii.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("App.jsx ErrorBoundary: Uncaught error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-100 text-red-800 p-4 rounded-lg shadow-lg m-4",children:[I.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong in App.jsx!"}),I.jsx("p",{className:"text-lg mb-2 text-center",children:"We're sorry, but there was an issue rendering the application. Details below:"}),I.jsxs("details",{className:"mt-4 text-left p-4 bg-red-50 rounded-lg border border-red-200 overflow-auto max-w-lg",children:[I.jsx("summary",{className:"font-semibold cursor-pointer text-red-700",children:"Click for Error Details"}),I.jsx("pre",{className:"mt-2 text-sm whitespace-pre-wrap break-words font-mono text-red-900",children:this.state.error&&this.state.error.toString()}),this.state.errorInfo&&I.jsxs("pre",{className:"mt-2 text-xs text-red-600 font-mono whitespace-pre-wrap break-words",children:["Component Stack: ",this.state.errorInfo.componentStack]})]})]}):this.props.children}}function jP(){const[r,e]=z.useState(null),[t,s]=z.useState(null),[o,l]=z.useState(null),[h,f]=z.useState(null),[g,v]=z.useState(!1),[w,T]=z.useState(!0),[S,j]=z.useState({text:"",type:""}),[W,B]=z.useState(!1),V=na();Tv();const[te,ie]=z.useState(!1),K=z.useCallback((we,de)=>{j({text:we,type:de}),setTimeout(()=>j({text:"",type:""}),5e3)},[]);z.useEffect(()=>{console.log("App.jsx: useEffect for Firebase Initialization triggered."),console.log("App.jsx: Current path detected by React Router:",V.pathname),(async()=>{try{console.log("App.jsx: Loading Firebase...");let de=null,Ve="Unknown";const me={apiKey:"AIzaSyBEwSVX9UY7-MNxeYwdbY0ZmDuXzYyt56g",authDomain:"rntea-cca78.firebaseapp.com",projectId:"rntea-cca78",storageBucket:"rntea-cca78.appspot.com",messagingSenderId:"806310857835",appId:"1:806310857835:web:b03b05847c818ee4fe352e",measurementId:"G-ZKBPS9FGE"};if(console.log("App.jsx DEBUG: Checking import.meta.env values:"),console.log("  VITE_FIREBASE_API_KEY:","AIzaSyBEwSVX9UY7-MNxeYwdbY0ZmDuXzYyt56g"),console.log("  VITE_FIREBASE_AUTH_DOMAIN:","rntea-cca78.firebaseapp.com"),console.log("  VITE_FIREBASE_PROJECT_ID:","rntea-cca78"),console.log("  VITE_FIREBASE_APP_ID:","1:806310857835:web:b03b05847c818ee4fe352e"),console.log("App.jsx DEBUG: Constructed viteConfig object:",me),me.apiKey&&me.projectId&&me.appId)de=me,Ve="Vite Environment Variables (import.meta.env)";else if(!(qa&&qa.apiKey&&qa.projectId&&qa.appId))throw new Error("Firebase configuration is incomplete or missing from both Vite environment variables and Canvas setup. Please ensure either .env file is correct or Canvas variables are provided.");if(console.log(`App.jsx: Firebase config source: ${Ve}`),console.log("App.jsx: Firebase config being used (sensitive parts masked):",{apiKey:de!=null&&de.apiKey?"********":"N/A",authDomain:de==null?void 0:de.authDomain,projectId:de==null?void 0:de.projectId,storageBucket:de==null?void 0:de.storageBucket,messagingSenderId:de==null?void 0:de.messagingSenderId,appId:de!=null&&de.appId?"********":"N/A",measurementId:de==null?void 0:de.measurementId}),!de||!de.apiKey||!de.projectId||!de.appId)throw new Error(`Firebase configuration is incomplete from ${Ve}. Missing apiKey, projectId, or appId. This should not happen if previous checks passed.`);const ne=Mv(de),fe=_C(ne),se=gP(ne);e(ne),l(fe),s(se),console.log("App.jsx: Firebase Loaded, Awaiting Auth...");const L=aS(fe,async q=>{var ge,Re;if(console.log("App.jsx: onAuthStateChanged - User status changed. User:",q),q)f(q.uid);else{console.log("App.jsx: No user found. Checking for custom token.");let Pe=null;try{Pe=typeof __initial_auth_token<"u"?__initial_auth_token:null}catch(De){console.warn("App.jsx: __initial_auth_token is not declared or accessible:",De)}if(Pe){console.log("App.jsx: Signing in with custom token...");try{await nS(fe,Pe),f((ge=fe.currentUser)==null?void 0:ge.uid),console.log("App.jsx: Custom token sign-in successful. Current user ID:",(Re=fe.currentUser)==null?void 0:Re.uid)}catch(De){console.error("App.jsx: Error during custom token authentication:",De),K(`Authentication failed: ${De.message}`,"error"),f(null)}}else console.log("App.jsx: No custom token found. User remains signed out by default."),f(null)}v(!0),T(!1),console.log("App.jsx: Firebase initialization complete. AuthReady:",!0,"LoadingFirebase:",!1)});return()=>{console.log("App.jsx: useEffect cleanup - Unsubscribing from auth state changes."),L()}}catch(de){console.error("App.jsx: FATAL ERROR: Failed to initialize Firebase application:",de),K("Failed to initialize application. Please try again later.","error"),T(!1),v(!1)}})()},[V.pathname,qa,K]);const oe=z.useCallback(async(we,de)=>{if(!o)return K("Firebase Auth not initialized.","error"),null;try{const Ve=await rS(o,we,de);return K("Account created successfully!","success"),B(!1),Ve.user}catch(Ve){return console.error("Error signing up with email/password:",Ve),K(`Sign Up Failed: ${Ve.message}`,"error"),null}},[o,K]),_e=z.useCallback(async(we,de)=>{if(!o)return K("Firebase Auth not initialized.","error"),null;try{const Ve=await iS(o,we,de);return K("Signed in successfully!","success"),B(!1),Ve.user}catch(Ve){return console.error("Error signing in with email/password:",Ve),K(`Sign In Failed: ${Ve.message}`,"error"),null}},[o,K]),Ne=z.useCallback(async()=>{if(!o)return K("Firebase Auth not initialized.","error"),null;try{const we=new Ho("apple.com"),de=await PS(o,we);return K("Signed in with Apple successfully!","success"),B(!1),de.user}catch(we){return console.error("Error signing in with Apple:",we),K(`Apple Sign In Failed: ${we.message}`,"error"),null}},[o,K]),N=z.useCallback(async()=>{if(!o){K("Firebase Auth not initialized.","error");return}try{await lS(o),f(null),K("Signed out successfully!","success")}catch(we){console.error("Error signing out:",we),K(`Sign Out Failed: ${we.message}`,"error")}},[o,K]),C=z.useCallback(async(we,de)=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return K("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const Ve=Ys.credential(we,de),me=await Zg(o.currentUser,Ve);return K("Anonymous account linked with email/password!","success"),B(!1),me.user}catch(Ve){return console.error("Error linking anonymous account with email/password:",Ve),K(`Linking Failed: ${Ve.message}`,"error"),null}},[o,K]),P=z.useCallback(async()=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return K("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const we=new Ho("apple.com"),de=await Zg(o.currentUser,we);return K("Anonymous account linked with Apple!","success"),B(!1),de.user}catch(we){return console.error("Error linking anonymous account with Apple:",we),K(`Linking Failed: ${we.message}`,"error"),null}},[o,K]),x=z.useMemo(()=>({app:r,db:t,auth:o,currentUserId:h,authReady:g,appId:"rntea-cca78",showMessage:K,signUpWithEmailPassword:oe,signInWithEmailPassword:_e,signInWithApple:Ne,signOutUser:N,linkAnonymousWithEmailPassword:C,linkAnonymousWithApple:P,setShowAuthModal:B}),[r,t,o,h,g,MP,K,oe,_e,Ne,N,C,P,B]),D=z.useCallback(()=>{ie(we=>!we),document.body.style.overflow=te?"":"hidden"},[te]),O=z.useCallback(()=>{ie(!1),document.body.style.overflow=""},[]),R=z.useCallback(we=>{if(we==="/")return V.pathname==="/";if(we==="/reviews")return V.pathname==="/reviews";if(we.startsWith("/#")){const de=we.substring(2);return V.pathname==="/"&&V.hash===`#${de}`}return!1},[V.pathname,V.hash]);return I.jsxs("div",{className:"min-h-screen flex flex-col",children:[I.jsxs("header",{className:"bg-white shadow-sm py-8 px-6 md:px-10 lg:px-16 flex justify-between items-center rounded-b-lg fixed top-0 w-full z-30",children:[I.jsx(qi,{to:"/",className:"text-3xl font-bold text-gray-800 rntea-brand",children:"RNTea"}),I.jsx("nav",{className:"hidden md:block",children:I.jsxs("ul",{className:"flex space-x-6 items-center",children:[I.jsx("li",{children:I.jsx(qi,{to:"/#about",className:`text-lg text-gray-700 font-medium animated-link ${R("/#about")?"font-bold":""}`,children:"About"})}),I.jsx("li",{children:I.jsx(qi,{to:"/reviews",className:`text-lg text-gray-700 font-medium animated-link ${R("/reviews")?"font-bold":""}`,children:"Reviews"})}),I.jsx("li",{children:I.jsx(qi,{to:"/#contact",className:`text-lg text-gray-700 font-medium animated-link ${R("/#contact")?"font-bold":""}`,children:"Contact"})}),I.jsx("li",{children:h?I.jsx("button",{onClick:N,className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):I.jsx("button",{onClick:()=>B(!0),className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})})]})}),I.jsxs("div",{className:`hamburger-menu md:hidden flex flex-col justify-around w-8 h-6 cursor-pointer z-50 ${te?"open":""}`,id:"hamburger-menu",onClick:D,children:[I.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),I.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),I.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"})]})]}),I.jsxs("div",{className:`mobile-nav-overlay md:hidden fixed top-0 left-0 w-full h-full bg-white bg-opacity-98 z-40 flex flex-col justify-center items-center transition-transform duration-400 ease-in-out ${te?"open":""}`,id:"mobile-nav-overlay",children:[I.jsx("button",{className:"absolute top-6 right-6 text-gray-800 hover:text-gray-600 text-4xl focus:outline-none z-50",onClick:O,"aria-label":"Close navigation menu",children:""}),I.jsx(qi,{to:"/#about",className:"text-2xl text-gray-800 my-4 animated-link transition duration-300 ease-in-out hover:text-custom-beige",onClick:O,style:{animationDelay:"0.1s"},children:"About"}),I.jsx(qi,{to:"/reviews",className:"text-2xl text-gray-800 my-4 animated-link transition duration-300 ease-in-out hover:text-custom-beige",onClick:O,style:{animationDelay:"0.2s"},children:"Reviews"}),I.jsx(qi,{to:"/#contact",className:"text-2xl text-gray-800 my-4 animated-link transition duration-300 ease-in-out hover:text-custom-beige",onClick:O,style:{animationDelay:"0.3s"},children:"Contact"}),h?I.jsx("button",{onClick:()=>{N(),O()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):I.jsx("button",{onClick:()=>{B(!0),O()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})]}),I.jsxs("main",{className:"flex-grow w-full flex flex-col mt-[120px]",children:[I.jsx(VP,{message:S.text,type:S.type}),I.jsx(FP,{children:w?I.jsx("p",{className:"text-center text-gray-500 py-8",children:"App.jsx: Initializing application and Firebase..."}):I.jsxs(Yc.Provider,{value:x,children:[I.jsxs(oT,{children:[console.log(`App.jsx: Route matched for path: ${V.pathname}`),I.jsx(Qu,{path:"/",element:I.jsx(OP,{})}),I.jsx(Qu,{path:"/reviews",element:I.jsx(tw,{})}),I.jsx(Qu,{path:"/test-route",element:I.jsx("h2",{className:"text-center text-2xl mt-8",children:"This is a Test Route."})})]}),W&&I.jsx(LP,{onClose:()=>B(!1)})]})})]})]})}const hv=document.getElementById("root");hv?(console.log("main.jsx: Root element found. Attempting to mount React App with Router..."),mE.createRoot(hv).render(I.jsx(ii.StrictMode,{children:I.jsx(fT,{children:I.jsx(jP,{})})})),console.log("main.jsx: React App with Router mount instruction sent.")):console.error("main.jsx: ERROR - Root element not found in DOM. Cannot mount React App.");
