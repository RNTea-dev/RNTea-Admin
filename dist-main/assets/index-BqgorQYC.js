function IE(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Cv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Nd={exports:{}},Ka={},Dd={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function xE(){if(Ag)return Be;Ag=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function C(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,H={};function F(V,q,me){this.props=V,this.context=q,this.refs=H,this.updater=me||j}F.prototype.isReactComponent={},F.prototype.setState=function(V,q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,q,"setState")},F.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ee(){}ee.prototype=F.prototype;function re(V,q,me){this.props=V,this.context=q,this.refs=H,this.updater=me||j}var X=re.prototype=new ee;X.constructor=re,W(X,F.prototype),X.isPureReactComponent=!0;var ve=Array.isArray,le=Object.prototype.hasOwnProperty,Se={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function S(V,q,me){var xe,De={},Ce=null,je=null;if(q!=null)for(xe in q.ref!==void 0&&(je=q.ref),q.key!==void 0&&(Ce=""+q.key),q)le.call(q,xe)&&!b.hasOwnProperty(xe)&&(De[xe]=q[xe]);var te=arguments.length-2;if(te===1)De.children=me;else if(1<te){for(var ne=Array(te),we=0;we<te;we++)ne[we]=arguments[we+2];De.children=ne}if(V&&V.defaultProps)for(xe in te=V.defaultProps,te)De[xe]===void 0&&(De[xe]=te[xe]);return{$$typeof:r,type:V,key:Ce,ref:je,props:De,_owner:Se.current}}function x(V,q){return{$$typeof:r,type:V.type,key:q,ref:V.ref,props:V.props,_owner:V._owner}}function k(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function N(V){var q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(me){return q[me]})}var L=/\/+/g;function R(V,q){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):q.toString(36)}function ue(V,q,me,xe,De){var Ce=typeof V;(Ce==="undefined"||Ce==="boolean")&&(V=null);var je=!1;if(V===null)je=!0;else switch(Ce){case"string":case"number":je=!0;break;case"object":switch(V.$$typeof){case r:case e:je=!0}}if(je)return je=V,De=De(je),V=xe===""?"."+R(je,0):xe,ve(De)?(me="",V!=null&&(me=V.replace(L,"$&/")+"/"),ue(De,q,me,"",function(we){return we})):De!=null&&(k(De)&&(De=x(De,me+(!De.key||je&&je.key===De.key?"":(""+De.key).replace(L,"$&/")+"/")+V)),q.push(De)),1;if(je=0,xe=xe===""?".":xe+":",ve(V))for(var te=0;te<V.length;te++){Ce=V[te];var ne=xe+R(Ce,te);je+=ue(Ce,q,me,ne,De)}else if(ne=C(V),typeof ne=="function")for(V=ne.call(V),te=0;!(Ce=V.next()).done;)Ce=Ce.value,ne=xe+R(Ce,te++),je+=ue(Ce,q,me,ne,De);else if(Ce==="object")throw q=String(V),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return je}function tt(V,q,me){if(V==null)return V;var xe=[],De=0;return ue(V,xe,"","",function(Ce){return q.call(me,Ce,De++)}),xe}function it(V){if(V._status===-1){var q=V._result;q=q(),q.then(function(me){(V._status===0||V._status===-1)&&(V._status=1,V._result=me)},function(me){(V._status===0||V._status===-1)&&(V._status=2,V._result=me)}),V._status===-1&&(V._status=0,V._result=q)}if(V._status===1)return V._result.default;throw V._result}var pe={current:null},se={transition:null},he={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:se,ReactCurrentOwner:Se};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Be.Children={map:tt,forEach:function(V,q,me){tt(V,function(){q.apply(this,arguments)},me)},count:function(V){var q=0;return tt(V,function(){q++}),q},toArray:function(V){return tt(V,function(q){return q})||[]},only:function(V){if(!k(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Be.Component=F,Be.Fragment=t,Be.Profiler=o,Be.PureComponent=re,Be.StrictMode=i,Be.Suspense=g,Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,Be.act=oe,Be.cloneElement=function(V,q,me){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var xe=W({},V.props),De=V.key,Ce=V.ref,je=V._owner;if(q!=null){if(q.ref!==void 0&&(Ce=q.ref,je=Se.current),q.key!==void 0&&(De=""+q.key),V.type&&V.type.defaultProps)var te=V.type.defaultProps;for(ne in q)le.call(q,ne)&&!b.hasOwnProperty(ne)&&(xe[ne]=q[ne]===void 0&&te!==void 0?te[ne]:q[ne])}var ne=arguments.length-2;if(ne===1)xe.children=me;else if(1<ne){te=Array(ne);for(var we=0;we<ne;we++)te[we]=arguments[we+2];xe.children=te}return{$$typeof:r,type:V.type,key:De,ref:Ce,props:xe,_owner:je}},Be.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},Be.createElement=S,Be.createFactory=function(V){var q=S.bind(null,V);return q.type=V,q},Be.createRef=function(){return{current:null}},Be.forwardRef=function(V){return{$$typeof:f,render:V}},Be.isValidElement=k,Be.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:it}},Be.memo=function(V,q){return{$$typeof:_,type:V,compare:q===void 0?null:q}},Be.startTransition=function(V){var q=se.transition;se.transition={};try{V()}finally{se.transition=q}},Be.unstable_act=oe,Be.useCallback=function(V,q){return pe.current.useCallback(V,q)},Be.useContext=function(V){return pe.current.useContext(V)},Be.useDebugValue=function(){},Be.useDeferredValue=function(V){return pe.current.useDeferredValue(V)},Be.useEffect=function(V,q){return pe.current.useEffect(V,q)},Be.useId=function(){return pe.current.useId()},Be.useImperativeHandle=function(V,q,me){return pe.current.useImperativeHandle(V,q,me)},Be.useInsertionEffect=function(V,q){return pe.current.useInsertionEffect(V,q)},Be.useLayoutEffect=function(V,q){return pe.current.useLayoutEffect(V,q)},Be.useMemo=function(V,q){return pe.current.useMemo(V,q)},Be.useReducer=function(V,q,me){return pe.current.useReducer(V,q,me)},Be.useRef=function(V){return pe.current.useRef(V)},Be.useState=function(V){return pe.current.useState(V)},Be.useSyncExternalStore=function(V,q,me){return pe.current.useSyncExternalStore(V,q,me)},Be.useTransition=function(){return pe.current.useTransition()},Be.version="18.3.1",Be}var Rg;function Af(){return Rg||(Rg=1,Dd.exports=xE()),Dd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function SE(){if(Pg)return Ka;Pg=1;var r=Af(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,_){var E,T={},C=null,j=null;_!==void 0&&(C=""+_),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(j=g.ref);for(E in g)i.call(g,E)&&!l.hasOwnProperty(E)&&(T[E]=g[E]);if(f&&f.defaultProps)for(E in g=f.defaultProps,g)T[E]===void 0&&(T[E]=g[E]);return{$$typeof:e,type:f,key:C,ref:j,props:T,_owner:o.current}}return Ka.Fragment=t,Ka.jsx=h,Ka.jsxs=h,Ka}var bg;function CE(){return bg||(bg=1,Nd.exports=SE()),Nd.exports}var v=CE(),O=Af();const ci=Cv(O),AE=IE({__proto__:null,default:ci},[O]);var Ku={},Vd={exports:{}},Sn={},Od={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function RE(){return kg||(kg=1,function(r){function e(se,he){var oe=se.length;se.push(he);e:for(;0<oe;){var V=oe-1>>>1,q=se[V];if(0<o(q,he))se[V]=he,se[oe]=q,oe=V;else break e}}function t(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var he=se[0],oe=se.pop();if(oe!==he){se[0]=oe;e:for(var V=0,q=se.length,me=q>>>1;V<me;){var xe=2*(V+1)-1,De=se[xe],Ce=xe+1,je=se[Ce];if(0>o(De,oe))Ce<q&&0>o(je,De)?(se[V]=je,se[Ce]=oe,V=Ce):(se[V]=De,se[xe]=oe,V=xe);else if(Ce<q&&0>o(je,oe))se[V]=je,se[Ce]=oe,V=Ce;else break e}}return he}function o(se,he){var oe=se.sortIndex-he.sortIndex;return oe!==0?oe:se.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],_=[],E=1,T=null,C=3,j=!1,W=!1,H=!1,F=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(se){for(var he=t(_);he!==null;){if(he.callback===null)i(_);else if(he.startTime<=se)i(_),he.sortIndex=he.expirationTime,e(g,he);else break;he=t(_)}}function ve(se){if(H=!1,X(se),!W)if(t(g)!==null)W=!0,it(le);else{var he=t(_);he!==null&&pe(ve,he.startTime-se)}}function le(se,he){W=!1,H&&(H=!1,ee(S),S=-1),j=!0;var oe=C;try{for(X(he),T=t(g);T!==null&&(!(T.expirationTime>he)||se&&!N());){var V=T.callback;if(typeof V=="function"){T.callback=null,C=T.priorityLevel;var q=V(T.expirationTime<=he);he=r.unstable_now(),typeof q=="function"?T.callback=q:T===t(g)&&i(g),X(he)}else i(g);T=t(g)}if(T!==null)var me=!0;else{var xe=t(_);xe!==null&&pe(ve,xe.startTime-he),me=!1}return me}finally{T=null,C=oe,j=!1}}var Se=!1,b=null,S=-1,x=5,k=-1;function N(){return!(r.unstable_now()-k<x)}function L(){if(b!==null){var se=r.unstable_now();k=se;var he=!0;try{he=b(!0,se)}finally{he?R():(Se=!1,b=null)}}else Se=!1}var R;if(typeof re=="function")R=function(){re(L)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,tt=ue.port2;ue.port1.onmessage=L,R=function(){tt.postMessage(null)}}else R=function(){F(L,0)};function it(se){b=se,Se||(Se=!0,R())}function pe(se,he){S=F(function(){se(r.unstable_now())},he)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(se){se.callback=null},r.unstable_continueExecution=function(){W||j||(W=!0,it(le))},r.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<se?Math.floor(1e3/se):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(se){switch(C){case 1:case 2:case 3:var he=3;break;default:he=C}var oe=C;C=he;try{return se()}finally{C=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(se,he){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var oe=C;C=se;try{return he()}finally{C=oe}},r.unstable_scheduleCallback=function(se,he,oe){var V=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?V+oe:V):oe=V,se){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=oe+q,se={id:E++,callback:he,priorityLevel:se,startTime:oe,expirationTime:q,sortIndex:-1},oe>V?(se.sortIndex=oe,e(_,se),t(g)===null&&se===t(_)&&(H?(ee(S),S=-1):H=!0,pe(ve,oe-V))):(se.sortIndex=q,e(g,se),W||j||(W=!0,it(le))),se},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(se){var he=C;return function(){var oe=C;C=he;try{return se.apply(this,arguments)}finally{C=oe}}}}(Ld)),Ld}var Ng;function PE(){return Ng||(Ng=1,Od.exports=RE()),Od.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function bE(){if(Dg)return Sn;Dg=1;var r=Af(),e=PE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function C(n){return g.call(T,n)?!0:g.call(E,n)?!1:_.test(n)?T[n]=!0:(E[n]=!0,!1)}function j(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,s,a,c){if(s===null||typeof s>"u"||j(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function H(n,s,a,c,d,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){F[n]=new H(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];F[s]=new H(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){F[n]=new H(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){F[n]=new H(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){F[n]=new H(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){F[n]=new H(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){F[n]=new H(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){F[n]=new H(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){F[n]=new H(n,5,!1,n.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function re(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(ee,re);F[s]=new H(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(ee,re);F[s]=new H(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(ee,re);F[s]=new H(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){F[n]=new H(n,1,!1,n.toLowerCase(),null,!1,!1)}),F.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){F[n]=new H(n,1,!1,n.toLowerCase(),null,!0,!0)});function X(n,s,a,c){var d=F.hasOwnProperty(s)?F[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(W(s,a,d,c)&&(a=null),c||d===null?C(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var ve=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),Se=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),tt=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),se=Symbol.iterator;function he(n){return n===null||typeof n!="object"?null:(n=se&&n[se]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,V;function q(n){if(V===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||""}return`
`+V+n}var me=!1;function xe(n,s){if(!n||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(B){var c=B}Reflect.construct(n,[],s)}else{try{s.call()}catch(B){c=B}n.call(s.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),m=c.stack.split(`
`),w=d.length-1,A=m.length-1;1<=w&&0<=A&&d[w]!==m[A];)A--;for(;1<=w&&0<=A;w--,A--)if(d[w]!==m[A]){if(w!==1||A!==1)do if(w--,A--,0>A||d[w]!==m[A]){var P=`
`+d[w].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=w&&0<=A);break}}}finally{me=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?q(n):""}function De(n){switch(n.tag){case 5:return q(n.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return n=xe(n.type,!1),n;case 11:return n=xe(n.type.render,!1),n;case 1:return n=xe(n.type,!0),n;default:return""}}function Ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case Se:return"Portal";case x:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case ue:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case L:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case tt:return s=n.displayName||null,s!==null?s:Ce(n.type)||"Memo";case it:s=n._payload,n=n._init;try{return Ce(n(s))}catch{}}return null}function je(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function te(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ne(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function we(n){var s=ne(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Je(n){n._valueTracker||(n._valueTracker=we(n))}function yt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=ne(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Ue(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function un(n,s){var a=s.checked;return oe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Pn(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=te(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function At(n,s){s=s.checked,s!=null&&X(n,"checked",s,!1)}function ar(n,s){At(n,s);var a=te(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?mn(n,s.type,a):s.hasOwnProperty("defaultValue")&&mn(n,s.type,te(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Hn(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function mn(n,s,a){(s!=="number"||Ue(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Vt=Array.isArray;function gn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+te(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Ir(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function bn(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Vt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:te(a)}}function Ee(n,s){var a=te(s.value),c=te(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Oe(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function dt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?dt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var $n,qr=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for($n=$n||document.createElement("div"),$n.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=$n.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function kn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Wn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xr=["Webkit","ms","Moz","O"];Object.keys(Wn).forEach(function(n){xr.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Wn[s]=Wn[n]})});function Sr(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Wn.hasOwnProperty(n)&&Wn[n]?(""+s).trim():s+"px"}function Ei(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Sr(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Ti=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ii(n,s){if(s){if(Ti[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Cr(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qn=null;function Ar(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Gn=null,Xt=null,Nn=null;function Gr(n){if(n=Da(n)){if(typeof Gn!="function")throw Error(t(280));var s=n.stateNode;s&&(s=uu(s),Gn(n.stateNode,n.type,s))}}function Kn(n){Xt?Nn?Nn.push(n):Nn=[n]:Xt=n}function Is(){if(Xt){var n=Xt,s=Nn;if(Nn=Xt=null,Gr(n),s)for(n=0;n<s.length;n++)Gr(s[n])}}function Kr(n,s){return n(s)}function xs(){}var lr=!1;function Ss(n,s,a){if(lr)return n(s,a);lr=!0;try{return Kr(n,s,a)}finally{lr=!1,(Xt!==null||Nn!==null)&&(xs(),Is())}}function pt(n,s){var a=n.stateNode;if(a===null)return null;var c=uu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var xi=!1;if(f)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){xi=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{xi=!1}function Qr(n,s,a,c,d,m,w,A,P){var B=Array.prototype.slice.call(arguments,3);try{s.apply(a,B)}catch(J){this.onError(J)}}var Yr=!1,G=null,ke=!1,Ne=null,Ae={onError:function(n){Yr=!0,G=n}};function He(n,s,a,c,d,m,w,A,P){Yr=!1,G=null,Qr.apply(Ae,arguments)}function Et(n,s,a,c,d,m,w,A,P){if(He.apply(this,arguments),Yr){if(Yr){var B=G;Yr=!1,G=null}else throw Error(t(198));ke||(ke=!0,Ne=B)}}function rt(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function qe(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Ge(n){if(rt(n)!==n)throw Error(t(188))}function yn(n){var s=n.alternate;if(!s){if(s=rt(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Ge(d),n;if(m===c)return Ge(d),s;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var w=!1,A=d.child;A;){if(A===a){w=!0,a=d,c=m;break}if(A===c){w=!0,c=d,a=m;break}A=A.sibling}if(!w){for(A=m.child;A;){if(A===a){w=!0,a=m,c=d;break}if(A===c){w=!0,c=m,a=d;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Si(n){return n=yn(n),n!==null?Ci(n):null}function Ci(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ci(n);if(s!==null)return s;n=n.sibling}return null}var Ai=e.unstable_scheduleCallback,ma=e.unstable_cancelCallback,Ll=e.unstable_shouldYield,ah=e.unstable_requestPaint,ot=e.unstable_now,jl=e.unstable_getCurrentPriorityLevel,Cs=e.unstable_ImmediatePriority,Ri=e.unstable_UserBlockingPriority,Qn=e.unstable_NormalPriority,ga=e.unstable_LowPriority,Ml=e.unstable_IdlePriority,As=null,Vn=null;function Fl(n){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(As,n,void 0,(n.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:zl,ya=Math.log,Ul=Math.LN2;function zl(n){return n>>>=0,n===0?32:31-(ya(n)/Ul|0)|0}var io=64,so=4194304;function Pi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Rs(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var A=w&~d;A!==0?c=Pi(A):(m&=w,m!==0&&(c=Pi(m)))}else w=a&~d,w!==0?c=Pi(w):m!==0&&(c=Pi(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,m=s&-s,d>=m||d===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-cn(s),d=1<<a,c|=n[a],s&=~d;return c}function lh(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-cn(m),A=1<<w,P=d[w];P===-1?((A&a)===0||(A&c)!==0)&&(d[w]=lh(A,s)):P<=s&&(n.expiredLanes|=A),m&=~A}}function On(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ps(){var n=io;return io<<=1,(io&4194240)===0&&(io=64),n}function bi(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function ki(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-cn(s),n[s]=a}function st(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-cn(a),m=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Ni(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-cn(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Ke=0;function Di(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Bl,oo,Hl,$l,Wl,va=!1,Rr=[],Wt=null,ur=null,cr=null,Vi=new Map,Yn=new Map,Pr=[],uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ql(n,s){switch(n){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Vi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(s.pointerId)}}function vn(n,s,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},s!==null&&(s=Da(s),s!==null&&oo(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function ch(n,s,a,c,d){switch(s){case"focusin":return Wt=vn(Wt,n,s,a,c,d),!0;case"dragenter":return ur=vn(ur,n,s,a,c,d),!0;case"mouseover":return cr=vn(cr,n,s,a,c,d),!0;case"pointerover":var m=d.pointerId;return Vi.set(m,vn(Vi.get(m)||null,n,s,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,Yn.set(m,vn(Yn.get(m)||null,n,s,a,c,d)),!0}return!1}function Gl(n){var s=Vs(n.target);if(s!==null){var a=rt(s);if(a!==null){if(s=a.tag,s===13){if(s=qe(a),s!==null){n.blockedOn=s,Wl(n.priority,function(){Hl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=ao(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);qn=c,a.target.dispatchEvent(c),qn=null}else return s=Da(a),s!==null&&oo(s),n.blockedOn=a,!1;s.shift()}return!0}function bs(n,s,a){Xr(n)&&a.delete(s)}function Kl(){va=!1,Wt!==null&&Xr(Wt)&&(Wt=null),ur!==null&&Xr(ur)&&(ur=null),cr!==null&&Xr(cr)&&(cr=null),Vi.forEach(bs),Yn.forEach(bs)}function hr(n,s){n.blockedOn===s&&(n.blockedOn=null,va||(va=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Kl)))}function dr(n){function s(d){return hr(d,n)}if(0<Rr.length){hr(Rr[0],n);for(var a=1;a<Rr.length;a++){var c=Rr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Wt!==null&&hr(Wt,n),ur!==null&&hr(ur,n),cr!==null&&hr(cr,n),Vi.forEach(s),Yn.forEach(s),a=0;a<Pr.length;a++)c=Pr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Pr.length&&(a=Pr[0],a.blockedOn===null);)Gl(a),a.blockedOn===null&&Pr.shift()}var Zr=ve.ReactCurrentBatchConfig,Oi=!0;function mt(n,s,a,c){var d=Ke,m=Zr.transition;Zr.transition=null;try{Ke=1,_a(n,s,a,c)}finally{Ke=d,Zr.transition=m}}function hh(n,s,a,c){var d=Ke,m=Zr.transition;Zr.transition=null;try{Ke=4,_a(n,s,a,c)}finally{Ke=d,Zr.transition=m}}function _a(n,s,a,c){if(Oi){var d=ao(n,s,a,c);if(d===null)Th(n,s,c,ks,a),ql(n,c);else if(ch(d,n,s,a,c))c.stopPropagation();else if(ql(n,c),s&4&&-1<uh.indexOf(n)){for(;d!==null;){var m=Da(d);if(m!==null&&Bl(m),m=ao(n,s,a,c),m===null&&Th(n,s,c,ks,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Th(n,s,c,null,a)}}var ks=null;function ao(n,s,a,c){if(ks=null,n=Ar(c),n=Vs(n),n!==null)if(s=rt(n),s===null)n=null;else if(a=s.tag,a===13){if(n=qe(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ks=n,null}function wa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jl()){case Cs:return 1;case Ri:return 4;case Qn:case ga:return 16;case Ml:return 536870912;default:return 16}default:return 16}}var Ln=null,lo=null,_n=null;function Ea(){if(_n)return _n;var n,s=lo,a=s.length,c,d="value"in Ln?Ln.value:Ln.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[m-c];c++);return _n=d.slice(n,1<c?1-c:void 0)}function uo(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function br(){return!0}function Ta(){return!1}function qt(n){function s(a,c,d,m,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?br:Ta,this.isPropagationStopped=Ta,this}return oe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),s}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},co=qt(fr),kr=oe({},fr,{view:0,detail:0}),dh=qt(kr),ho,ei,Li,Ns=oe({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Li&&(Li&&n.type==="mousemove"?(ho=n.screenX-Li.screenX,ei=n.screenY-Li.screenY):ei=ho=0,Li=n),ho)},movementY:function(n){return"movementY"in n?n.movementY:ei}}),fo=qt(Ns),Ia=oe({},Ns,{dataTransfer:0}),Ql=qt(Ia),po=oe({},kr,{relatedTarget:0}),mo=qt(po),Yl=oe({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),ti=qt(Yl),Jl=oe({},fr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Xl=qt(Jl),Zl=oe({},fr,{data:0}),xa=qt(Zl),go={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=eu[n])?!!s[n]:!1}function Nr(){return tu}var u=oe({},kr,{key:function(n){if(n.key){var s=go[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=uo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(n){return n.type==="keypress"?uo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?uo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=qt(u),y=oe({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=qt(y),M=oe({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr}),$=qt(M),ae=oe({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),nt=qt(ae),Ot=oe({},Ns,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Qe=qt(Ot),Ut=[9,13,27,32],Rt=f&&"CompositionEvent"in window,Jn=null;f&&"documentMode"in document&&(Jn=document.documentMode);var jn=f&&"TextEvent"in window&&!Jn,Ds=f&&(!Rt||Jn&&8<Jn&&11>=Jn),yo=" ",Ep=!1;function Tp(n,s){switch(n){case"keyup":return Ut.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vo=!1;function ww(n,s){switch(n){case"compositionend":return Ip(s);case"keypress":return s.which!==32?null:(Ep=!0,yo);case"textInput":return n=s.data,n===yo&&Ep?null:n;default:return null}}function Ew(n,s){if(vo)return n==="compositionend"||!Rt&&Tp(n,s)?(n=Ea(),_n=lo=Ln=null,vo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ds&&s.locale!=="ko"?null:s.data;default:return null}}var Tw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Tw[n.type]:s==="textarea"}function Sp(n,s,a,c){Kn(c),s=ou(s,"onChange"),0<s.length&&(a=new co("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Sa=null,Ca=null;function Iw(n){Hp(n,0)}function nu(n){var s=Io(n);if(yt(s))return n}function xw(n,s){if(n==="change")return s}var Cp=!1;if(f){var fh;if(f){var ph="oninput"in document;if(!ph){var Ap=document.createElement("div");Ap.setAttribute("oninput","return;"),ph=typeof Ap.oninput=="function"}fh=ph}else fh=!1;Cp=fh&&(!document.documentMode||9<document.documentMode)}function Rp(){Sa&&(Sa.detachEvent("onpropertychange",Pp),Ca=Sa=null)}function Pp(n){if(n.propertyName==="value"&&nu(Ca)){var s=[];Sp(s,Ca,n,Ar(n)),Ss(Iw,s)}}function Sw(n,s,a){n==="focusin"?(Rp(),Sa=s,Ca=a,Sa.attachEvent("onpropertychange",Pp)):n==="focusout"&&Rp()}function Cw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return nu(Ca)}function Aw(n,s){if(n==="click")return nu(s)}function Rw(n,s){if(n==="input"||n==="change")return nu(s)}function Pw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var pr=typeof Object.is=="function"?Object.is:Pw;function Aa(n,s){if(pr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!pr(n[d],s[d]))return!1}return!0}function bp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kp(n,s){var a=bp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bp(a)}}function Np(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Np(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Dp(){for(var n=window,s=Ue();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Ue(n.document)}return s}function mh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function bw(n){var s=Dp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Np(a.ownerDocument.documentElement,a)){if(c!==null&&mh(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=kp(a,m);var w=kp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var kw=f&&"documentMode"in document&&11>=document.documentMode,_o=null,gh=null,Ra=null,yh=!1;function Vp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yh||_o==null||_o!==Ue(c)||(c=_o,"selectionStart"in c&&mh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ra&&Aa(Ra,c)||(Ra=c,c=ou(gh,"onSelect"),0<c.length&&(s=new co("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=_o)))}function ru(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var wo={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},vh={},Op={};f&&(Op=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function iu(n){if(vh[n])return vh[n];if(!wo[n])return n;var s=wo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Op)return vh[n]=s[a];return n}var Lp=iu("animationend"),jp=iu("animationiteration"),Mp=iu("animationstart"),Fp=iu("transitionend"),Up=new Map,zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(n,s){Up.set(n,s),l(s,[n])}for(var _h=0;_h<zp.length;_h++){var wh=zp[_h],Nw=wh.toLowerCase(),Dw=wh[0].toUpperCase()+wh.slice(1);ji(Nw,"on"+Dw)}ji(Lp,"onAnimationEnd"),ji(jp,"onAnimationIteration"),ji(Mp,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(Fp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function Bp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Et(c,s,void 0,n),n.currentTarget=null}function Hp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var w=c.length-1;0<=w;w--){var A=c[w],P=A.instance,B=A.currentTarget;if(A=A.listener,P!==m&&d.isPropagationStopped())break e;Bp(d,A,B),m=P}else for(w=0;w<c.length;w++){if(A=c[w],P=A.instance,B=A.currentTarget,A=A.listener,P!==m&&d.isPropagationStopped())break e;Bp(d,A,B),m=P}}}if(ke)throw n=Ne,ke=!1,Ne=null,n}function lt(n,s){var a=s[Rh];a===void 0&&(a=s[Rh]=new Set);var c=n+"__bubble";a.has(c)||($p(s,n,2,!1),a.add(c))}function Eh(n,s,a){var c=0;s&&(c|=4),$p(a,n,c,s)}var su="_reactListening"+Math.random().toString(36).slice(2);function ba(n){if(!n[su]){n[su]=!0,i.forEach(function(a){a!=="selectionchange"&&(Vw.has(a)||Eh(a,!1,n),Eh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[su]||(s[su]=!0,Eh("selectionchange",!1,s))}}function $p(n,s,a,c){switch(wa(s)){case 1:var d=mt;break;case 4:d=hh;break;default:d=_a}a=d.bind(null,s,a,n),d=void 0,!xi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Th(n,s,a,c,d){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var P=w.tag;if((P===3||P===4)&&(P=w.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;w=w.return}for(;A!==null;){if(w=Vs(A),w===null)return;if(P=w.tag,P===5||P===6){c=m=w;continue e}A=A.parentNode}}c=c.return}Ss(function(){var B=m,J=Ar(a),Z=[];e:{var Y=Up.get(n);if(Y!==void 0){var de=co,ye=n;switch(n){case"keypress":if(uo(a)===0)break e;case"keydown":case"keyup":de=p;break;case"focusin":ye="focus",de=mo;break;case"focusout":ye="blur",de=mo;break;case"beforeblur":case"afterblur":de=mo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=$;break;case Lp:case jp:case Mp:de=ti;break;case Fp:de=nt;break;case"scroll":de=dh;break;case"wheel":de=Qe;break;case"copy":case"cut":case"paste":de=Xl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=I}var _e=(s&4)!==0,It=!_e&&n==="scroll",U=_e?Y!==null?Y+"Capture":null:Y;_e=[];for(var D=B,z;D!==null;){z=D;var ie=z.stateNode;if(z.tag===5&&ie!==null&&(z=ie,U!==null&&(ie=pt(D,U),ie!=null&&_e.push(ka(D,ie,z)))),It)break;D=D.return}0<_e.length&&(Y=new de(Y,ye,null,a,J),Z.push({event:Y,listeners:_e}))}}if((s&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",de=n==="mouseout"||n==="pointerout",Y&&a!==qn&&(ye=a.relatedTarget||a.fromElement)&&(Vs(ye)||ye[ni]))break e;if((de||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,de?(ye=a.relatedTarget||a.toElement,de=B,ye=ye?Vs(ye):null,ye!==null&&(It=rt(ye),ye!==It||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(de=null,ye=B),de!==ye)){if(_e=fo,ie="onMouseLeave",U="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(_e=I,ie="onPointerLeave",U="onPointerEnter",D="pointer"),It=de==null?Y:Io(de),z=ye==null?Y:Io(ye),Y=new _e(ie,D+"leave",de,a,J),Y.target=It,Y.relatedTarget=z,ie=null,Vs(J)===B&&(_e=new _e(U,D+"enter",ye,a,J),_e.target=z,_e.relatedTarget=It,ie=_e),It=ie,de&&ye)t:{for(_e=de,U=ye,D=0,z=_e;z;z=Eo(z))D++;for(z=0,ie=U;ie;ie=Eo(ie))z++;for(;0<D-z;)_e=Eo(_e),D--;for(;0<z-D;)U=Eo(U),z--;for(;D--;){if(_e===U||U!==null&&_e===U.alternate)break t;_e=Eo(_e),U=Eo(U)}_e=null}else _e=null;de!==null&&Wp(Z,Y,de,_e,!1),ye!==null&&It!==null&&Wp(Z,It,ye,_e,!0)}}e:{if(Y=B?Io(B):window,de=Y.nodeName&&Y.nodeName.toLowerCase(),de==="select"||de==="input"&&Y.type==="file")var Ie=xw;else if(xp(Y))if(Cp)Ie=Rw;else{Ie=Cw;var Pe=Sw}else(de=Y.nodeName)&&de.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(Ie=Aw);if(Ie&&(Ie=Ie(n,B))){Sp(Z,Ie,a,J);break e}Pe&&Pe(n,Y,B),n==="focusout"&&(Pe=Y._wrapperState)&&Pe.controlled&&Y.type==="number"&&mn(Y,"number",Y.value)}switch(Pe=B?Io(B):window,n){case"focusin":(xp(Pe)||Pe.contentEditable==="true")&&(_o=Pe,gh=B,Ra=null);break;case"focusout":Ra=gh=_o=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,Vp(Z,a,J);break;case"selectionchange":if(kw)break;case"keydown":case"keyup":Vp(Z,a,J)}var be;if(Rt)e:{switch(n){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else vo?Tp(n,a)&&(Le="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(Ds&&a.locale!=="ko"&&(vo||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&vo&&(be=Ea()):(Ln=J,lo="value"in Ln?Ln.value:Ln.textContent,vo=!0)),Pe=ou(B,Le),0<Pe.length&&(Le=new xa(Le,n,null,a,J),Z.push({event:Le,listeners:Pe}),be?Le.data=be:(be=Ip(a),be!==null&&(Le.data=be)))),(be=jn?ww(n,a):Ew(n,a))&&(B=ou(B,"onBeforeInput"),0<B.length&&(J=new xa("onBeforeInput","beforeinput",null,a,J),Z.push({event:J,listeners:B}),J.data=be))}Hp(Z,s)})}function ka(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ou(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=pt(n,a),m!=null&&c.unshift(ka(n,m,d)),m=pt(n,s),m!=null&&c.push(ka(n,m,d))),n=n.return}return c}function Eo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Wp(n,s,a,c,d){for(var m=s._reactName,w=[];a!==null&&a!==c;){var A=a,P=A.alternate,B=A.stateNode;if(P!==null&&P===c)break;A.tag===5&&B!==null&&(A=B,d?(P=pt(a,m),P!=null&&w.unshift(ka(a,P,A))):d||(P=pt(a,m),P!=null&&w.push(ka(a,P,A)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var Ow=/\r\n?/g,Lw=/\u0000|\uFFFD/g;function qp(n){return(typeof n=="string"?n:""+n).replace(Ow,`
`).replace(Lw,"")}function au(n,s,a){if(s=qp(s),qp(n)!==s&&a)throw Error(t(425))}function lu(){}var Ih=null,xh=null;function Sh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ch=typeof setTimeout=="function"?setTimeout:void 0,jw=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,Mw=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(n){return Gp.resolve(null).then(n).catch(Fw)}:Ch;function Fw(n){setTimeout(function(){throw n})}function Ah(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),dr(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);dr(s)}function Mi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Kp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var To=Math.random().toString(36).slice(2),Dr="__reactFiber$"+To,Na="__reactProps$"+To,ni="__reactContainer$"+To,Rh="__reactEvents$"+To,Uw="__reactListeners$"+To,zw="__reactHandles$"+To;function Vs(n){var s=n[Dr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[ni]||a[Dr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Kp(n);n!==null;){if(a=n[Dr])return a;n=Kp(n)}return s}n=a,a=n.parentNode}return null}function Da(n){return n=n[Dr]||n[ni],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Io(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function uu(n){return n[Na]||null}var Ph=[],xo=-1;function Fi(n){return{current:n}}function ut(n){0>xo||(n.current=Ph[xo],Ph[xo]=null,xo--)}function at(n,s){xo++,Ph[xo]=n.current,n.current=s}var Ui={},Zt=Fi(Ui),wn=Fi(!1),Os=Ui;function So(n,s){var a=n.type.contextTypes;if(!a)return Ui;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function En(n){return n=n.childContextTypes,n!=null}function cu(){ut(wn),ut(Zt)}function Qp(n,s,a){if(Zt.current!==Ui)throw Error(t(168));at(Zt,s),at(wn,a)}function Yp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,je(n)||"Unknown",d));return oe({},a,c)}function hu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ui,Os=Zt.current,at(Zt,n),at(wn,wn.current),!0}function Jp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Yp(n,s,Os),c.__reactInternalMemoizedMergedChildContext=n,ut(wn),ut(Zt),at(Zt,n)):ut(wn),at(wn,a)}var ri=null,du=!1,bh=!1;function Xp(n){ri===null?ri=[n]:ri.push(n)}function Bw(n){du=!0,Xp(n)}function zi(){if(!bh&&ri!==null){bh=!0;var n=0,s=Ke;try{var a=ri;for(Ke=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}ri=null,du=!1}catch(d){throw ri!==null&&(ri=ri.slice(n+1)),Ai(Cs,zi),d}finally{Ke=s,bh=!1}}return null}var Co=[],Ao=0,fu=null,pu=0,Xn=[],Zn=0,Ls=null,ii=1,si="";function js(n,s){Co[Ao++]=pu,Co[Ao++]=fu,fu=n,pu=s}function Zp(n,s,a){Xn[Zn++]=ii,Xn[Zn++]=si,Xn[Zn++]=Ls,Ls=n;var c=ii;n=si;var d=32-cn(c)-1;c&=~(1<<d),a+=1;var m=32-cn(s)+d;if(30<m){var w=d-d%5;m=(c&(1<<w)-1).toString(32),c>>=w,d-=w,ii=1<<32-cn(s)+d|a<<d|c,si=m+n}else ii=1<<m|a<<d|c,si=n}function kh(n){n.return!==null&&(js(n,1),Zp(n,1,0))}function Nh(n){for(;n===fu;)fu=Co[--Ao],Co[Ao]=null,pu=Co[--Ao],Co[Ao]=null;for(;n===Ls;)Ls=Xn[--Zn],Xn[Zn]=null,si=Xn[--Zn],Xn[Zn]=null,ii=Xn[--Zn],Xn[Zn]=null}var Mn=null,Fn=null,gt=!1,mr=null;function em(n,s){var a=rr(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function tm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Mn=n,Fn=Mi(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Mn=n,Fn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ls!==null?{id:ii,overflow:si}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=rr(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Mn=n,Fn=null,!0):!1;default:return!1}}function Dh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Vh(n){if(gt){var s=Fn;if(s){var a=s;if(!tm(n,s)){if(Dh(n))throw Error(t(418));s=Mi(a.nextSibling);var c=Mn;s&&tm(n,s)?em(c,a):(n.flags=n.flags&-4097|2,gt=!1,Mn=n)}}else{if(Dh(n))throw Error(t(418));n.flags=n.flags&-4097|2,gt=!1,Mn=n}}}function nm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Mn=n}function mu(n){if(n!==Mn)return!1;if(!gt)return nm(n),gt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Sh(n.type,n.memoizedProps)),s&&(s=Fn)){if(Dh(n))throw rm(),Error(t(418));for(;s;)em(n,s),s=Mi(s.nextSibling)}if(nm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Fn=Mi(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Fn=null}}else Fn=Mn?Mi(n.stateNode.nextSibling):null;return!0}function rm(){for(var n=Fn;n;)n=Mi(n.nextSibling)}function Ro(){Fn=Mn=null,gt=!1}function Oh(n){mr===null?mr=[n]:mr.push(n)}var Hw=ve.ReactCurrentBatchConfig;function Va(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var A=d.refs;w===null?delete A[m]:A[m]=w},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function gu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function im(n){var s=n._init;return s(n._payload)}function sm(n){function s(U,D){if(n){var z=U.deletions;z===null?(U.deletions=[D],U.flags|=16):z.push(D)}}function a(U,D){if(!n)return null;for(;D!==null;)s(U,D),D=D.sibling;return null}function c(U,D){for(U=new Map;D!==null;)D.key!==null?U.set(D.key,D):U.set(D.index,D),D=D.sibling;return U}function d(U,D){return U=Qi(U,D),U.index=0,U.sibling=null,U}function m(U,D,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<D?(U.flags|=2,D):z):(U.flags|=2,D)):(U.flags|=1048576,D)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function A(U,D,z,ie){return D===null||D.tag!==6?(D=Cd(z,U.mode,ie),D.return=U,D):(D=d(D,z),D.return=U,D)}function P(U,D,z,ie){var Ie=z.type;return Ie===b?J(U,D,z.props.children,ie,z.key):D!==null&&(D.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===it&&im(Ie)===D.type)?(ie=d(D,z.props),ie.ref=Va(U,D,z),ie.return=U,ie):(ie=Uu(z.type,z.key,z.props,null,U.mode,ie),ie.ref=Va(U,D,z),ie.return=U,ie)}function B(U,D,z,ie){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=Ad(z,U.mode,ie),D.return=U,D):(D=d(D,z.children||[]),D.return=U,D)}function J(U,D,z,ie,Ie){return D===null||D.tag!==7?(D=Ws(z,U.mode,ie,Ie),D.return=U,D):(D=d(D,z),D.return=U,D)}function Z(U,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Cd(""+D,U.mode,z),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case le:return z=Uu(D.type,D.key,D.props,null,U.mode,z),z.ref=Va(U,null,D),z.return=U,z;case Se:return D=Ad(D,U.mode,z),D.return=U,D;case it:var ie=D._init;return Z(U,ie(D._payload),z)}if(Vt(D)||he(D))return D=Ws(D,U.mode,z,null),D.return=U,D;gu(U,D)}return null}function Y(U,D,z,ie){var Ie=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Ie!==null?null:A(U,D,""+z,ie);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case le:return z.key===Ie?P(U,D,z,ie):null;case Se:return z.key===Ie?B(U,D,z,ie):null;case it:return Ie=z._init,Y(U,D,Ie(z._payload),ie)}if(Vt(z)||he(z))return Ie!==null?null:J(U,D,z,ie,null);gu(U,z)}return null}function de(U,D,z,ie,Ie){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return U=U.get(z)||null,A(D,U,""+ie,Ie);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case le:return U=U.get(ie.key===null?z:ie.key)||null,P(D,U,ie,Ie);case Se:return U=U.get(ie.key===null?z:ie.key)||null,B(D,U,ie,Ie);case it:var Pe=ie._init;return de(U,D,z,Pe(ie._payload),Ie)}if(Vt(ie)||he(ie))return U=U.get(z)||null,J(D,U,ie,Ie,null);gu(D,ie)}return null}function ye(U,D,z,ie){for(var Ie=null,Pe=null,be=D,Le=D=0,Ht=null;be!==null&&Le<z.length;Le++){be.index>Le?(Ht=be,be=null):Ht=be.sibling;var Ze=Y(U,be,z[Le],ie);if(Ze===null){be===null&&(be=Ht);break}n&&be&&Ze.alternate===null&&s(U,be),D=m(Ze,D,Le),Pe===null?Ie=Ze:Pe.sibling=Ze,Pe=Ze,be=Ht}if(Le===z.length)return a(U,be),gt&&js(U,Le),Ie;if(be===null){for(;Le<z.length;Le++)be=Z(U,z[Le],ie),be!==null&&(D=m(be,D,Le),Pe===null?Ie=be:Pe.sibling=be,Pe=be);return gt&&js(U,Le),Ie}for(be=c(U,be);Le<z.length;Le++)Ht=de(be,U,Le,z[Le],ie),Ht!==null&&(n&&Ht.alternate!==null&&be.delete(Ht.key===null?Le:Ht.key),D=m(Ht,D,Le),Pe===null?Ie=Ht:Pe.sibling=Ht,Pe=Ht);return n&&be.forEach(function(Yi){return s(U,Yi)}),gt&&js(U,Le),Ie}function _e(U,D,z,ie){var Ie=he(z);if(typeof Ie!="function")throw Error(t(150));if(z=Ie.call(z),z==null)throw Error(t(151));for(var Pe=Ie=null,be=D,Le=D=0,Ht=null,Ze=z.next();be!==null&&!Ze.done;Le++,Ze=z.next()){be.index>Le?(Ht=be,be=null):Ht=be.sibling;var Yi=Y(U,be,Ze.value,ie);if(Yi===null){be===null&&(be=Ht);break}n&&be&&Yi.alternate===null&&s(U,be),D=m(Yi,D,Le),Pe===null?Ie=Yi:Pe.sibling=Yi,Pe=Yi,be=Ht}if(Ze.done)return a(U,be),gt&&js(U,Le),Ie;if(be===null){for(;!Ze.done;Le++,Ze=z.next())Ze=Z(U,Ze.value,ie),Ze!==null&&(D=m(Ze,D,Le),Pe===null?Ie=Ze:Pe.sibling=Ze,Pe=Ze);return gt&&js(U,Le),Ie}for(be=c(U,be);!Ze.done;Le++,Ze=z.next())Ze=de(be,U,Le,Ze.value,ie),Ze!==null&&(n&&Ze.alternate!==null&&be.delete(Ze.key===null?Le:Ze.key),D=m(Ze,D,Le),Pe===null?Ie=Ze:Pe.sibling=Ze,Pe=Ze);return n&&be.forEach(function(TE){return s(U,TE)}),gt&&js(U,Le),Ie}function It(U,D,z,ie){if(typeof z=="object"&&z!==null&&z.type===b&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case le:e:{for(var Ie=z.key,Pe=D;Pe!==null;){if(Pe.key===Ie){if(Ie=z.type,Ie===b){if(Pe.tag===7){a(U,Pe.sibling),D=d(Pe,z.props.children),D.return=U,U=D;break e}}else if(Pe.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===it&&im(Ie)===Pe.type){a(U,Pe.sibling),D=d(Pe,z.props),D.ref=Va(U,Pe,z),D.return=U,U=D;break e}a(U,Pe);break}else s(U,Pe);Pe=Pe.sibling}z.type===b?(D=Ws(z.props.children,U.mode,ie,z.key),D.return=U,U=D):(ie=Uu(z.type,z.key,z.props,null,U.mode,ie),ie.ref=Va(U,D,z),ie.return=U,U=ie)}return w(U);case Se:e:{for(Pe=z.key;D!==null;){if(D.key===Pe)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){a(U,D.sibling),D=d(D,z.children||[]),D.return=U,U=D;break e}else{a(U,D);break}else s(U,D);D=D.sibling}D=Ad(z,U.mode,ie),D.return=U,U=D}return w(U);case it:return Pe=z._init,It(U,D,Pe(z._payload),ie)}if(Vt(z))return ye(U,D,z,ie);if(he(z))return _e(U,D,z,ie);gu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,D!==null&&D.tag===6?(a(U,D.sibling),D=d(D,z),D.return=U,U=D):(a(U,D),D=Cd(z,U.mode,ie),D.return=U,U=D),w(U)):a(U,D)}return It}var Po=sm(!0),om=sm(!1),yu=Fi(null),vu=null,bo=null,Lh=null;function jh(){Lh=bo=vu=null}function Mh(n){var s=yu.current;ut(yu),n._currentValue=s}function Fh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function ko(n,s){vu=n,Lh=bo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Tn=!0),n.firstContext=null)}function er(n){var s=n._currentValue;if(Lh!==n)if(n={context:n,memoizedValue:s,next:null},bo===null){if(vu===null)throw Error(t(308));bo=n,vu.dependencies={lanes:0,firstContext:n}}else bo=bo.next=n;return s}var Ms=null;function Uh(n){Ms===null?Ms=[n]:Ms.push(n)}function am(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Uh(s)):(a.next=d.next,d.next=a),s.interleaved=a,oi(n,c)}function oi(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Bi=!1;function zh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ai(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Hi(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,oi(n,a)}return d=c.interleaved,d===null?(s.next=s,Uh(c)):(s.next=d.next,d.next=s),c.interleaved=s,oi(n,a)}function _u(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Ni(n,a)}}function um(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function wu(n,s,a,c){var d=n.updateQueue;Bi=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var P=A,B=P.next;P.next=null,w===null?m=B:w.next=B,w=P;var J=n.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==w&&(A===null?J.firstBaseUpdate=B:A.next=B,J.lastBaseUpdate=P))}if(m!==null){var Z=d.baseState;w=0,J=B=P=null,A=m;do{var Y=A.lane,de=A.eventTime;if((c&Y)===Y){J!==null&&(J=J.next={eventTime:de,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ye=n,_e=A;switch(Y=s,de=a,_e.tag){case 1:if(ye=_e.payload,typeof ye=="function"){Z=ye.call(de,Z,Y);break e}Z=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=_e.payload,Y=typeof ye=="function"?ye.call(de,Z,Y):ye,Y==null)break e;Z=oe({},Z,Y);break e;case 2:Bi=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,Y=d.effects,Y===null?d.effects=[A]:Y.push(A))}else de={eventTime:de,lane:Y,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(B=J=de,P=Z):J=J.next=de,w|=Y;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;Y=A,A=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(J===null&&(P=Z),d.baseState=P,d.firstBaseUpdate=B,d.lastBaseUpdate=J,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else m===null&&(d.shared.lanes=0);zs|=w,n.lanes=w,n.memoizedState=Z}}function cm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Oa={},Vr=Fi(Oa),La=Fi(Oa),ja=Fi(Oa);function Fs(n){if(n===Oa)throw Error(t(174));return n}function Bh(n,s){switch(at(ja,s),at(La,n),at(Vr,Oa),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ft(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=ft(s,n)}ut(Vr),at(Vr,s)}function No(){ut(Vr),ut(La),ut(ja)}function hm(n){Fs(ja.current);var s=Fs(Vr.current),a=ft(s,n.type);s!==a&&(at(La,n),at(Vr,a))}function Hh(n){La.current===n&&(ut(Vr),ut(La))}var vt=Fi(0);function Eu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $h=[];function Wh(){for(var n=0;n<$h.length;n++)$h[n]._workInProgressVersionPrimary=null;$h.length=0}var Tu=ve.ReactCurrentDispatcher,qh=ve.ReactCurrentBatchConfig,Us=0,_t=null,Lt=null,zt=null,Iu=!1,Ma=!1,Fa=0,$w=0;function en(){throw Error(t(321))}function Gh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!pr(n[a],s[a]))return!1;return!0}function Kh(n,s,a,c,d,m){if(Us=m,_t=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Tu.current=n===null||n.memoizedState===null?Kw:Qw,n=a(c,d),Ma){m=0;do{if(Ma=!1,Fa=0,25<=m)throw Error(t(301));m+=1,zt=Lt=null,s.updateQueue=null,Tu.current=Yw,n=a(c,d)}while(Ma)}if(Tu.current=Cu,s=Lt!==null&&Lt.next!==null,Us=0,zt=Lt=_t=null,Iu=!1,s)throw Error(t(300));return n}function Qh(){var n=Fa!==0;return Fa=0,n}function Or(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?_t.memoizedState=zt=n:zt=zt.next=n,zt}function tr(){if(Lt===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=Lt.next;var s=zt===null?_t.memoizedState:zt.next;if(s!==null)zt=s,Lt=n;else{if(n===null)throw Error(t(310));Lt=n,n={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},zt===null?_t.memoizedState=zt=n:zt=zt.next=n}return zt}function Ua(n,s){return typeof s=="function"?s(n):s}function Yh(n){var s=tr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Lt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var A=w=null,P=null,B=m;do{var J=B.lane;if((Us&J)===J)P!==null&&(P=P.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var Z={lane:J,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};P===null?(A=P=Z,w=c):P=P.next=Z,_t.lanes|=J,zs|=J}B=B.next}while(B!==null&&B!==m);P===null?w=c:P.next=A,pr(c,s.memoizedState)||(Tn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=P,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,_t.lanes|=m,zs|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Jh(n){var s=tr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=n(m,w.action),w=w.next;while(w!==d);pr(m,s.memoizedState)||(Tn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function dm(){}function fm(n,s){var a=_t,c=tr(),d=s(),m=!pr(c.memoizedState,d);if(m&&(c.memoizedState=d,Tn=!0),c=c.queue,Xh(gm.bind(null,a,c,n),[n]),c.getSnapshot!==s||m||zt!==null&&zt.memoizedState.tag&1){if(a.flags|=2048,za(9,mm.bind(null,a,c,d,s),void 0,null),Bt===null)throw Error(t(349));(Us&30)!==0||pm(a,s,d)}return d}function pm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=_t.updateQueue,s===null?(s={lastEffect:null,stores:null},_t.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function mm(n,s,a,c){s.value=a,s.getSnapshot=c,ym(s)&&vm(n)}function gm(n,s,a){return a(function(){ym(s)&&vm(n)})}function ym(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!pr(n,a)}catch{return!0}}function vm(n){var s=oi(n,1);s!==null&&_r(s,n,1,-1)}function _m(n){var s=Or();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:n},s.queue=n,n=n.dispatch=Gw.bind(null,_t,n),[s.memoizedState,n]}function za(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=_t.updateQueue,s===null?(s={lastEffect:null,stores:null},_t.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function wm(){return tr().memoizedState}function xu(n,s,a,c){var d=Or();_t.flags|=n,d.memoizedState=za(1|s,a,void 0,c===void 0?null:c)}function Su(n,s,a,c){var d=tr();c=c===void 0?null:c;var m=void 0;if(Lt!==null){var w=Lt.memoizedState;if(m=w.destroy,c!==null&&Gh(c,w.deps)){d.memoizedState=za(s,a,m,c);return}}_t.flags|=n,d.memoizedState=za(1|s,a,m,c)}function Em(n,s){return xu(8390656,8,n,s)}function Xh(n,s){return Su(2048,8,n,s)}function Tm(n,s){return Su(4,2,n,s)}function Im(n,s){return Su(4,4,n,s)}function xm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Sm(n,s,a){return a=a!=null?a.concat([n]):null,Su(4,4,xm.bind(null,s,n),a)}function Zh(){}function Cm(n,s){var a=tr();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Gh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Am(n,s){var a=tr();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Gh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Rm(n,s,a){return(Us&21)===0?(n.baseState&&(n.baseState=!1,Tn=!0),n.memoizedState=a):(pr(a,s)||(a=Ps(),_t.lanes|=a,zs|=a,n.baseState=!0),s)}function Ww(n,s){var a=Ke;Ke=a!==0&&4>a?a:4,n(!0);var c=qh.transition;qh.transition={};try{n(!1),s()}finally{Ke=a,qh.transition=c}}function Pm(){return tr().memoizedState}function qw(n,s,a){var c=Gi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},bm(n))km(s,a);else if(a=am(n,s,a,c),a!==null){var d=fn();_r(a,n,c,d),Nm(a,s,c)}}function Gw(n,s,a){var c=Gi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(bm(n))km(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,A=m(w,a);if(d.hasEagerState=!0,d.eagerState=A,pr(A,w)){var P=s.interleaved;P===null?(d.next=d,Uh(s)):(d.next=P.next,P.next=d),s.interleaved=d;return}}catch{}finally{}a=am(n,s,d,c),a!==null&&(d=fn(),_r(a,n,c,d),Nm(a,s,c))}}function bm(n){var s=n.alternate;return n===_t||s!==null&&s===_t}function km(n,s){Ma=Iu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Nm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Ni(n,a)}}var Cu={readContext:er,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},Kw={readContext:er,useCallback:function(n,s){return Or().memoizedState=[n,s===void 0?null:s],n},useContext:er,useEffect:Em,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,xu(4194308,4,xm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return xu(4194308,4,n,s)},useInsertionEffect:function(n,s){return xu(4,2,n,s)},useMemo:function(n,s){var a=Or();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Or();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=qw.bind(null,_t,n),[c.memoizedState,n]},useRef:function(n){var s=Or();return n={current:n},s.memoizedState=n},useState:_m,useDebugValue:Zh,useDeferredValue:function(n){return Or().memoizedState=n},useTransition:function(){var n=_m(!1),s=n[0];return n=Ww.bind(null,n[1]),Or().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=_t,d=Or();if(gt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Bt===null)throw Error(t(349));(Us&30)!==0||pm(c,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,Em(gm.bind(null,c,m,n),[n]),c.flags|=2048,za(9,mm.bind(null,c,m,a,s),void 0,null),a},useId:function(){var n=Or(),s=Bt.identifierPrefix;if(gt){var a=si,c=ii;a=(c&~(1<<32-cn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Fa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=$w++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Qw={readContext:er,useCallback:Cm,useContext:er,useEffect:Xh,useImperativeHandle:Sm,useInsertionEffect:Tm,useLayoutEffect:Im,useMemo:Am,useReducer:Yh,useRef:wm,useState:function(){return Yh(Ua)},useDebugValue:Zh,useDeferredValue:function(n){var s=tr();return Rm(s,Lt.memoizedState,n)},useTransition:function(){var n=Yh(Ua)[0],s=tr().memoizedState;return[n,s]},useMutableSource:dm,useSyncExternalStore:fm,useId:Pm,unstable_isNewReconciler:!1},Yw={readContext:er,useCallback:Cm,useContext:er,useEffect:Xh,useImperativeHandle:Sm,useInsertionEffect:Tm,useLayoutEffect:Im,useMemo:Am,useReducer:Jh,useRef:wm,useState:function(){return Jh(Ua)},useDebugValue:Zh,useDeferredValue:function(n){var s=tr();return Lt===null?s.memoizedState=n:Rm(s,Lt.memoizedState,n)},useTransition:function(){var n=Jh(Ua)[0],s=tr().memoizedState;return[n,s]},useMutableSource:dm,useSyncExternalStore:fm,useId:Pm,unstable_isNewReconciler:!1};function gr(n,s){if(n&&n.defaultProps){s=oe({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function ed(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:oe({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Au={isMounted:function(n){return(n=n._reactInternals)?rt(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=fn(),d=Gi(n),m=ai(c,d);m.payload=s,a!=null&&(m.callback=a),s=Hi(n,m,d),s!==null&&(_r(s,n,d,c),_u(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=fn(),d=Gi(n),m=ai(c,d);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=Hi(n,m,d),s!==null&&(_r(s,n,d,c),_u(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=fn(),c=Gi(n),d=ai(a,c);d.tag=2,s!=null&&(d.callback=s),s=Hi(n,d,c),s!==null&&(_r(s,n,c,a),_u(s,n,c))}};function Dm(n,s,a,c,d,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):s.prototype&&s.prototype.isPureReactComponent?!Aa(a,c)||!Aa(d,m):!0}function Vm(n,s,a){var c=!1,d=Ui,m=s.contextType;return typeof m=="object"&&m!==null?m=er(m):(d=En(s)?Os:Zt.current,c=s.contextTypes,m=(c=c!=null)?So(n,d):Ui),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Au,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),s}function Om(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Au.enqueueReplaceState(s,s.state,null)}function td(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},zh(n);var m=s.contextType;typeof m=="object"&&m!==null?d.context=er(m):(m=En(s)?Os:Zt.current,d.context=So(n,m)),d.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(ed(n,s,m,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Au.enqueueReplaceState(d,d.state,null),wu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Do(n,s){try{var a="",c=s;do a+=De(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:d,digest:null}}function nd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function rd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Jw=typeof WeakMap=="function"?WeakMap:Map;function Lm(n,s,a){a=ai(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Vu||(Vu=!0,vd=c),rd(n,s)},a}function jm(n,s,a){a=ai(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){rd(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){rd(n,s),typeof c!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Mm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Jw;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=hE.bind(null,n,s,a),s.then(n,n))}function Fm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Um(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ai(-1,1),s.tag=2,Hi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Xw=ve.ReactCurrentOwner,Tn=!1;function dn(n,s,a,c){s.child=n===null?om(s,null,a,c):Po(s,n.child,a,c)}function zm(n,s,a,c,d){a=a.render;var m=s.ref;return ko(s,d),c=Kh(n,s,a,c,m,d),a=Qh(),n!==null&&!Tn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,li(n,s,d)):(gt&&a&&kh(s),s.flags|=1,dn(n,s,c,d),s.child)}function Bm(n,s,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!Sd(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,Hm(n,s,m,c,d)):(n=Uu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Aa,a(w,c)&&n.ref===s.ref)return li(n,s,d)}return s.flags|=1,n=Qi(m,c),n.ref=s.ref,n.return=s,s.child=n}function Hm(n,s,a,c,d){if(n!==null){var m=n.memoizedProps;if(Aa(m,c)&&n.ref===s.ref)if(Tn=!1,s.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Tn=!0);else return s.lanes=n.lanes,li(n,s,d)}return id(n,s,a,c,d)}function $m(n,s,a){var c=s.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(Oo,Un),Un|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,at(Oo,Un),Un|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,at(Oo,Un),Un|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,at(Oo,Un),Un|=c;return dn(n,s,d,a),s.child}function Wm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function id(n,s,a,c,d){var m=En(a)?Os:Zt.current;return m=So(s,m),ko(s,d),a=Kh(n,s,a,c,m,d),c=Qh(),n!==null&&!Tn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,li(n,s,d)):(gt&&c&&kh(s),s.flags|=1,dn(n,s,a,d),s.child)}function qm(n,s,a,c,d){if(En(a)){var m=!0;hu(s)}else m=!1;if(ko(s,d),s.stateNode===null)Pu(n,s),Vm(s,a,c),td(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,A=s.memoizedProps;w.props=A;var P=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=er(B):(B=En(a)?Os:Zt.current,B=So(s,B));var J=a.getDerivedStateFromProps,Z=typeof J=="function"||typeof w.getSnapshotBeforeUpdate=="function";Z||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==c||P!==B)&&Om(s,w,c,B),Bi=!1;var Y=s.memoizedState;w.state=Y,wu(s,c,w,d),P=s.memoizedState,A!==c||Y!==P||wn.current||Bi?(typeof J=="function"&&(ed(s,a,J,c),P=s.memoizedState),(A=Bi||Dm(s,a,A,c,Y,P,B))?(Z||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=P),w.props=c,w.state=P,w.context=B,c=A):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,lm(n,s),A=s.memoizedProps,B=s.type===s.elementType?A:gr(s.type,A),w.props=B,Z=s.pendingProps,Y=w.context,P=a.contextType,typeof P=="object"&&P!==null?P=er(P):(P=En(a)?Os:Zt.current,P=So(s,P));var de=a.getDerivedStateFromProps;(J=typeof de=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==Z||Y!==P)&&Om(s,w,c,P),Bi=!1,Y=s.memoizedState,w.state=Y,wu(s,c,w,d);var ye=s.memoizedState;A!==Z||Y!==ye||wn.current||Bi?(typeof de=="function"&&(ed(s,a,de,c),ye=s.memoizedState),(B=Bi||Dm(s,a,B,c,Y,ye,P)||!1)?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ye,P),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ye,P)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ye),w.props=c,w.state=ye,w.context=P,c=B):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),c=!1)}return sd(n,s,a,c,m,d)}function sd(n,s,a,c,d,m){Wm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&Jp(s,a,!1),li(n,s,m);c=s.stateNode,Xw.current=s;var A=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=Po(s,n.child,null,m),s.child=Po(s,null,A,m)):dn(n,s,A,m),s.memoizedState=c.state,d&&Jp(s,a,!0),s.child}function Gm(n){var s=n.stateNode;s.pendingContext?Qp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Qp(n,s.context,!1),Bh(n,s.containerInfo)}function Km(n,s,a,c,d){return Ro(),Oh(d),s.flags|=256,dn(n,s,a,c),s.child}var od={dehydrated:null,treeContext:null,retryLane:0};function ad(n){return{baseLanes:n,cachePool:null,transitions:null}}function Qm(n,s,a){var c=s.pendingProps,d=vt.current,m=!1,w=(s.flags&128)!==0,A;if((A=w)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),at(vt,d&1),n===null)return Vh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=s.mode,m=s.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=zu(w,c,0,null),n=Ws(n,c,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=ad(a),s.memoizedState=od,n):ld(s,w));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return Zw(n,s,w,c,A,d,a);if(m){m=c.fallback,w=s.mode,d=n.child,A=d.sibling;var P={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=P,s.deletions=null):(c=Qi(d,P),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?m=Qi(A,m):(m=Ws(m,w,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,w=n.child.memoizedState,w=w===null?ad(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,s.memoizedState=od,c}return m=n.child,n=m.sibling,c=Qi(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function ld(n,s){return s=zu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Ru(n,s,a,c){return c!==null&&Oh(c),Po(s,n.child,null,a),n=ld(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Zw(n,s,a,c,d,m,w){if(a)return s.flags&256?(s.flags&=-257,c=nd(Error(t(422))),Ru(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,d=s.mode,c=zu({mode:"visible",children:c.children},d,0,null),m=Ws(m,d,w,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&Po(s,n.child,null,w),s.child.memoizedState=ad(w),s.memoizedState=od,m);if((s.mode&1)===0)return Ru(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,m=Error(t(419)),c=nd(m,c,void 0),Ru(n,s,w,c)}if(A=(w&n.childLanes)!==0,Tn||A){if(c=Bt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,oi(n,d),_r(c,n,d,-1))}return xd(),c=nd(Error(t(421))),Ru(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=dE.bind(null,n),d._reactRetry=s,null):(n=m.treeContext,Fn=Mi(d.nextSibling),Mn=s,gt=!0,mr=null,n!==null&&(Xn[Zn++]=ii,Xn[Zn++]=si,Xn[Zn++]=Ls,ii=n.id,si=n.overflow,Ls=s),s=ld(s,c.children),s.flags|=4096,s)}function Ym(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Fh(n.return,s,a)}function ud(n,s,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function Jm(n,s,a){var c=s.pendingProps,d=c.revealOrder,m=c.tail;if(dn(n,s,c.children,a),c=vt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ym(n,a,s);else if(n.tag===19)Ym(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(at(vt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&Eu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),ud(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Eu(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ud(s,!0,a,null,m);break;case"together":ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function li(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),zs|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Qi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Qi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function eE(n,s,a){switch(s.tag){case 3:Gm(s),Ro();break;case 5:hm(s);break;case 1:En(s.type)&&hu(s);break;case 4:Bh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;at(yu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(at(vt,vt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Qm(n,s,a):(at(vt,vt.current&1),n=li(n,s,a),n!==null?n.sibling:null);at(vt,vt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Jm(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),at(vt,vt.current),c)break;return null;case 22:case 23:return s.lanes=0,$m(n,s,a)}return li(n,s,a)}var Xm,cd,Zm,eg;Xm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},cd=function(){},Zm=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,Fs(Vr.current);var m=null;switch(a){case"input":d=un(n,d),c=un(n,c),m=[];break;case"select":d=oe({},d,{value:void 0}),c=oe({},c,{value:void 0}),m=[];break;case"textarea":d=Ir(n,d),c=Ir(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=lu)}Ii(a,c);var w;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var A=d[B];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in c){var P=c[B];if(A=d!=null?d[B]:void 0,c.hasOwnProperty(B)&&P!==A&&(P!=null||A!=null))if(B==="style")if(A){for(w in A)!A.hasOwnProperty(w)||P&&P.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in P)P.hasOwnProperty(w)&&A[w]!==P[w]&&(a||(a={}),a[w]=P[w])}else a||(m||(m=[]),m.push(B,a)),a=P;else B==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,A=A?A.__html:void 0,P!=null&&A!==P&&(m=m||[]).push(B,P)):B==="children"?typeof P!="string"&&typeof P!="number"||(m=m||[]).push(B,""+P):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(P!=null&&B==="onScroll"&&lt("scroll",n),m||A===P||(m=[])):(m=m||[]).push(B,P))}a&&(m=m||[]).push("style",a);var B=m;(s.updateQueue=B)&&(s.flags|=4)}},eg=function(n,s,a,c){a!==c&&(s.flags|=4)};function Ba(n,s){if(!gt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function tn(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function tE(n,s,a){var c=s.pendingProps;switch(Nh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(s),null;case 1:return En(s.type)&&cu(),tn(s),null;case 3:return c=s.stateNode,No(),ut(wn),ut(Zt),Wh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(mu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,mr!==null&&(Ed(mr),mr=null))),cd(n,s),tn(s),null;case 5:Hh(s);var d=Fs(ja.current);if(a=s.type,n!==null&&s.stateNode!=null)Zm(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return tn(s),null}if(n=Fs(Vr.current),mu(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[Dr]=s,c[Na]=m,n=(s.mode&1)!==0,a){case"dialog":lt("cancel",c),lt("close",c);break;case"iframe":case"object":case"embed":lt("load",c);break;case"video":case"audio":for(d=0;d<Pa.length;d++)lt(Pa[d],c);break;case"source":lt("error",c);break;case"img":case"image":case"link":lt("error",c),lt("load",c);break;case"details":lt("toggle",c);break;case"input":Pn(c,m),lt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},lt("invalid",c);break;case"textarea":bn(c,m),lt("invalid",c)}Ii(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var A=m[w];w==="children"?typeof A=="string"?c.textContent!==A&&(m.suppressHydrationWarning!==!0&&au(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(m.suppressHydrationWarning!==!0&&au(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&lt("scroll",c)}switch(a){case"input":Je(c),Hn(c,m,!0);break;case"textarea":Je(c),Oe(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=lu)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=dt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Dr]=s,n[Na]=c,Xm(n,s,!1,!1),s.stateNode=n;e:{switch(w=Cr(a,c),a){case"dialog":lt("cancel",n),lt("close",n),d=c;break;case"iframe":case"object":case"embed":lt("load",n),d=c;break;case"video":case"audio":for(d=0;d<Pa.length;d++)lt(Pa[d],n);d=c;break;case"source":lt("error",n),d=c;break;case"img":case"image":case"link":lt("error",n),lt("load",n),d=c;break;case"details":lt("toggle",n),d=c;break;case"input":Pn(n,c),d=un(n,c),lt("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=oe({},c,{value:void 0}),lt("invalid",n);break;case"textarea":bn(n,c),d=Ir(n,c),lt("invalid",n);break;default:d=c}Ii(a,d),A=d;for(m in A)if(A.hasOwnProperty(m)){var P=A[m];m==="style"?Ei(n,P):m==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&qr(n,P)):m==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&kn(n,P):typeof P=="number"&&kn(n,""+P):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?P!=null&&m==="onScroll"&&lt("scroll",n):P!=null&&X(n,m,P,w))}switch(a){case"input":Je(n),Hn(n,c,!1);break;case"textarea":Je(n),Oe(n);break;case"option":c.value!=null&&n.setAttribute("value",""+te(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?gn(n,!!c.multiple,m,!1):c.defaultValue!=null&&gn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=lu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return tn(s),null;case 6:if(n&&s.stateNode!=null)eg(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Fs(ja.current),Fs(Vr.current),mu(s)){if(c=s.stateNode,a=s.memoizedProps,c[Dr]=s,(m=c.nodeValue!==a)&&(n=Mn,n!==null))switch(n.tag){case 3:au(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&au(c.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Dr]=s,s.stateNode=c}return tn(s),null;case 13:if(ut(vt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(gt&&Fn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)rm(),Ro(),s.flags|=98560,m=!1;else if(m=mu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Dr]=s}else Ro(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),m=!1}else mr!==null&&(Ed(mr),mr=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(vt.current&1)!==0?jt===0&&(jt=3):xd())),s.updateQueue!==null&&(s.flags|=4),tn(s),null);case 4:return No(),cd(n,s),n===null&&ba(s.stateNode.containerInfo),tn(s),null;case 10:return Mh(s.type._context),tn(s),null;case 17:return En(s.type)&&cu(),tn(s),null;case 19:if(ut(vt),m=s.memoizedState,m===null)return tn(s),null;if(c=(s.flags&128)!==0,w=m.rendering,w===null)if(c)Ba(m,!1);else{if(jt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=Eu(n),w!==null){for(s.flags|=128,Ba(m,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return at(vt,vt.current&1|2),s.child}n=n.sibling}m.tail!==null&&ot()>Lo&&(s.flags|=128,c=!0,Ba(m,!1),s.lanes=4194304)}else{if(!c)if(n=Eu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ba(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!gt)return tn(s),null}else 2*ot()-m.renderingStartTime>Lo&&a!==1073741824&&(s.flags|=128,c=!0,Ba(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(a=m.last,a!==null?a.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=ot(),s.sibling=null,a=vt.current,at(vt,c?a&1|2:a&1),s):(tn(s),null);case 22:case 23:return Id(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Un&1073741824)!==0&&(tn(s),s.subtreeFlags&6&&(s.flags|=8192)):tn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function nE(n,s){switch(Nh(s),s.tag){case 1:return En(s.type)&&cu(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return No(),ut(wn),ut(Zt),Wh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Hh(s),null;case 13:if(ut(vt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ro()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ut(vt),null;case 4:return No(),null;case 10:return Mh(s.type._context),null;case 22:case 23:return Id(),null;case 24:return null;default:return null}}var bu=!1,nn=!1,rE=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Vo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Tt(n,s,c)}else a.current=null}function hd(n,s,a){try{a()}catch(c){Tt(n,s,c)}}var tg=!1;function iE(n,s){if(Ih=Oi,n=Dp(),mh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,A=-1,P=-1,B=0,J=0,Z=n,Y=null;t:for(;;){for(var de;Z!==a||d!==0&&Z.nodeType!==3||(A=w+d),Z!==m||c!==0&&Z.nodeType!==3||(P=w+c),Z.nodeType===3&&(w+=Z.nodeValue.length),(de=Z.firstChild)!==null;)Y=Z,Z=de;for(;;){if(Z===n)break t;if(Y===a&&++B===d&&(A=w),Y===m&&++J===c&&(P=w),(de=Z.nextSibling)!==null)break;Z=Y,Y=Z.parentNode}Z=de}a=A===-1||P===-1?null:{start:A,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(xh={focusedElem:n,selectionRange:a},Oi=!1,ge=s;ge!==null;)if(s=ge,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ge=n;else for(;ge!==null;){s=ge;try{var ye=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var _e=ye.memoizedProps,It=ye.memoizedState,U=s.stateNode,D=U.getSnapshotBeforeUpdate(s.elementType===s.type?_e:gr(s.type,_e),It);U.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){Tt(s,s.return,ie)}if(n=s.sibling,n!==null){n.return=s.return,ge=n;break}ge=s.return}return ye=tg,tg=!1,ye}function Ha(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&hd(s,a,m)}d=d.next}while(d!==c)}}function ku(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function dd(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ng(n){var s=n.alternate;s!==null&&(n.alternate=null,ng(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Dr],delete s[Na],delete s[Rh],delete s[Uw],delete s[zw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function rg(n){return n.tag===5||n.tag===3||n.tag===4}function ig(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||rg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=lu));else if(c!==4&&(n=n.child,n!==null))for(fd(n,s,a),n=n.sibling;n!==null;)fd(n,s,a),n=n.sibling}function pd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(pd(n,s,a),n=n.sibling;n!==null;)pd(n,s,a),n=n.sibling}var Gt=null,yr=!1;function $i(n,s,a){for(a=a.child;a!==null;)sg(n,s,a),a=a.sibling}function sg(n,s,a){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(As,a)}catch{}switch(a.tag){case 5:nn||Vo(a,s);case 6:var c=Gt,d=yr;Gt=null,$i(n,s,a),Gt=c,yr=d,Gt!==null&&(yr?(n=Gt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Gt.removeChild(a.stateNode));break;case 18:Gt!==null&&(yr?(n=Gt,a=a.stateNode,n.nodeType===8?Ah(n.parentNode,a):n.nodeType===1&&Ah(n,a),dr(n)):Ah(Gt,a.stateNode));break;case 4:c=Gt,d=yr,Gt=a.stateNode.containerInfo,yr=!0,$i(n,s,a),Gt=c,yr=d;break;case 0:case 11:case 14:case 15:if(!nn&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&hd(a,s,w),d=d.next}while(d!==c)}$i(n,s,a);break;case 1:if(!nn&&(Vo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){Tt(a,s,A)}$i(n,s,a);break;case 21:$i(n,s,a);break;case 22:a.mode&1?(nn=(c=nn)||a.memoizedState!==null,$i(n,s,a),nn=c):$i(n,s,a);break;default:$i(n,s,a)}}function og(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new rE),s.forEach(function(c){var d=fE.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function vr(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,w=s,A=w;e:for(;A!==null;){switch(A.tag){case 5:Gt=A.stateNode,yr=!1;break e;case 3:Gt=A.stateNode.containerInfo,yr=!0;break e;case 4:Gt=A.stateNode.containerInfo,yr=!0;break e}A=A.return}if(Gt===null)throw Error(t(160));sg(m,w,d),Gt=null,yr=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch(B){Tt(d,s,B)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ag(s,n),s=s.sibling}function ag(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(vr(s,n),Lr(n),c&4){try{Ha(3,n,n.return),ku(3,n)}catch(_e){Tt(n,n.return,_e)}try{Ha(5,n,n.return)}catch(_e){Tt(n,n.return,_e)}}break;case 1:vr(s,n),Lr(n),c&512&&a!==null&&Vo(a,a.return);break;case 5:if(vr(s,n),Lr(n),c&512&&a!==null&&Vo(a,a.return),n.flags&32){var d=n.stateNode;try{kn(d,"")}catch(_e){Tt(n,n.return,_e)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,A=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{A==="input"&&m.type==="radio"&&m.name!=null&&At(d,m),Cr(A,w);var B=Cr(A,m);for(w=0;w<P.length;w+=2){var J=P[w],Z=P[w+1];J==="style"?Ei(d,Z):J==="dangerouslySetInnerHTML"?qr(d,Z):J==="children"?kn(d,Z):X(d,J,Z,B)}switch(A){case"input":ar(d,m);break;case"textarea":Ee(d,m);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var de=m.value;de!=null?gn(d,!!m.multiple,de,!1):Y!==!!m.multiple&&(m.defaultValue!=null?gn(d,!!m.multiple,m.defaultValue,!0):gn(d,!!m.multiple,m.multiple?[]:"",!1))}d[Na]=m}catch(_e){Tt(n,n.return,_e)}}break;case 6:if(vr(s,n),Lr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(_e){Tt(n,n.return,_e)}}break;case 3:if(vr(s,n),Lr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{dr(s.containerInfo)}catch(_e){Tt(n,n.return,_e)}break;case 4:vr(s,n),Lr(n);break;case 13:vr(s,n),Lr(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(yd=ot())),c&4&&og(n);break;case 22:if(J=a!==null&&a.memoizedState!==null,n.mode&1?(nn=(B=nn)||J,vr(s,n),nn=B):vr(s,n),Lr(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!J&&(n.mode&1)!==0)for(ge=n,J=n.child;J!==null;){for(Z=ge=J;ge!==null;){switch(Y=ge,de=Y.child,Y.tag){case 0:case 11:case 14:case 15:Ha(4,Y,Y.return);break;case 1:Vo(Y,Y.return);var ye=Y.stateNode;if(typeof ye.componentWillUnmount=="function"){c=Y,a=Y.return;try{s=c,ye.props=s.memoizedProps,ye.state=s.memoizedState,ye.componentWillUnmount()}catch(_e){Tt(c,a,_e)}}break;case 5:Vo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){cg(Z);continue}}de!==null?(de.return=Y,ge=de):cg(Z)}J=J.sibling}e:for(J=null,Z=n;;){if(Z.tag===5){if(J===null){J=Z;try{d=Z.stateNode,B?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(A=Z.stateNode,P=Z.memoizedProps.style,w=P!=null&&P.hasOwnProperty("display")?P.display:null,A.style.display=Sr("display",w))}catch(_e){Tt(n,n.return,_e)}}}else if(Z.tag===6){if(J===null)try{Z.stateNode.nodeValue=B?"":Z.memoizedProps}catch(_e){Tt(n,n.return,_e)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;J===Z&&(J=null),Z=Z.return}J===Z&&(J=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:vr(s,n),Lr(n),c&4&&og(n);break;case 21:break;default:vr(s,n),Lr(n)}}function Lr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(rg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(kn(d,""),c.flags&=-33);var m=ig(n);pd(n,m,d);break;case 3:case 4:var w=c.stateNode.containerInfo,A=ig(n);fd(n,A,w);break;default:throw Error(t(161))}}catch(P){Tt(n,n.return,P)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function sE(n,s,a){ge=n,lg(n)}function lg(n,s,a){for(var c=(n.mode&1)!==0;ge!==null;){var d=ge,m=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||bu;if(!w){var A=d.alternate,P=A!==null&&A.memoizedState!==null||nn;A=bu;var B=nn;if(bu=w,(nn=P)&&!B)for(ge=d;ge!==null;)w=ge,P=w.child,w.tag===22&&w.memoizedState!==null?hg(d):P!==null?(P.return=w,ge=P):hg(d);for(;m!==null;)ge=m,lg(m),m=m.sibling;ge=d,bu=A,nn=B}ug(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,ge=m):ug(n)}}function ug(n){for(;ge!==null;){var s=ge;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:nn||ku(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!nn)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:gr(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&cm(s,m,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}cm(s,w,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var P=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var B=s.alternate;if(B!==null){var J=B.memoizedState;if(J!==null){var Z=J.dehydrated;Z!==null&&dr(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}nn||s.flags&512&&dd(s)}catch(Y){Tt(s,s.return,Y)}}if(s===n){ge=null;break}if(a=s.sibling,a!==null){a.return=s.return,ge=a;break}ge=s.return}}function cg(n){for(;ge!==null;){var s=ge;if(s===n){ge=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ge=a;break}ge=s.return}}function hg(n){for(;ge!==null;){var s=ge;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{ku(4,s)}catch(P){Tt(s,a,P)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(P){Tt(s,d,P)}}var m=s.return;try{dd(s)}catch(P){Tt(s,m,P)}break;case 5:var w=s.return;try{dd(s)}catch(P){Tt(s,w,P)}}}catch(P){Tt(s,s.return,P)}if(s===n){ge=null;break}var A=s.sibling;if(A!==null){A.return=s.return,ge=A;break}ge=s.return}}var oE=Math.ceil,Nu=ve.ReactCurrentDispatcher,md=ve.ReactCurrentOwner,nr=ve.ReactCurrentBatchConfig,Xe=0,Bt=null,Pt=null,Kt=0,Un=0,Oo=Fi(0),jt=0,$a=null,zs=0,Du=0,gd=0,Wa=null,In=null,yd=0,Lo=1/0,ui=null,Vu=!1,vd=null,Wi=null,Ou=!1,qi=null,Lu=0,qa=0,_d=null,ju=-1,Mu=0;function fn(){return(Xe&6)!==0?ot():ju!==-1?ju:ju=ot()}function Gi(n){return(n.mode&1)===0?1:(Xe&2)!==0&&Kt!==0?Kt&-Kt:Hw.transition!==null?(Mu===0&&(Mu=Ps()),Mu):(n=Ke,n!==0||(n=window.event,n=n===void 0?16:wa(n.type)),n)}function _r(n,s,a,c){if(50<qa)throw qa=0,_d=null,Error(t(185));ki(n,a,c),((Xe&2)===0||n!==Bt)&&(n===Bt&&((Xe&2)===0&&(Du|=a),jt===4&&Ki(n,Kt)),xn(n,c),a===1&&Xe===0&&(s.mode&1)===0&&(Lo=ot()+500,du&&zi()))}function xn(n,s){var a=n.callbackNode;Jr(n,s);var c=Rs(n,n===Bt?Kt:0);if(c===0)a!==null&&ma(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&ma(a),s===1)n.tag===0?Bw(fg.bind(null,n)):Xp(fg.bind(null,n)),Mw(function(){(Xe&6)===0&&zi()}),a=null;else{switch(Di(c)){case 1:a=Cs;break;case 4:a=Ri;break;case 16:a=Qn;break;case 536870912:a=Ml;break;default:a=Qn}a=Eg(a,dg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function dg(n,s){if(ju=-1,Mu=0,(Xe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(jo()&&n.callbackNode!==a)return null;var c=Rs(n,n===Bt?Kt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Fu(n,c);else{s=c;var d=Xe;Xe|=2;var m=mg();(Bt!==n||Kt!==s)&&(ui=null,Lo=ot()+500,Hs(n,s));do try{uE();break}catch(A){pg(n,A)}while(!0);jh(),Nu.current=m,Xe=d,Pt!==null?s=0:(Bt=null,Kt=0,s=jt)}if(s!==0){if(s===2&&(d=On(n),d!==0&&(c=d,s=wd(n,d))),s===1)throw a=$a,Hs(n,0),Ki(n,c),xn(n,ot()),a;if(s===6)Ki(n,c);else{if(d=n.current.alternate,(c&30)===0&&!aE(d)&&(s=Fu(n,c),s===2&&(m=On(n),m!==0&&(c=m,s=wd(n,m))),s===1))throw a=$a,Hs(n,0),Ki(n,c),xn(n,ot()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:$s(n,In,ui);break;case 3:if(Ki(n,c),(c&130023424)===c&&(s=yd+500-ot(),10<s)){if(Rs(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){fn(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Ch($s.bind(null,n,In,ui),s);break}$s(n,In,ui);break;case 4:if(Ki(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-cn(c);m=1<<w,w=s[w],w>d&&(d=w),c&=~m}if(c=d,c=ot()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*oE(c/1960))-c,10<c){n.timeoutHandle=Ch($s.bind(null,n,In,ui),c);break}$s(n,In,ui);break;case 5:$s(n,In,ui);break;default:throw Error(t(329))}}}return xn(n,ot()),n.callbackNode===a?dg.bind(null,n):null}function wd(n,s){var a=Wa;return n.current.memoizedState.isDehydrated&&(Hs(n,s).flags|=256),n=Fu(n,s),n!==2&&(s=In,In=a,s!==null&&Ed(s)),n}function Ed(n){In===null?In=n:In.push.apply(In,n)}function aE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!pr(m(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ki(n,s){for(s&=~gd,s&=~Du,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-cn(s),c=1<<a;n[a]=-1,s&=~c}}function fg(n){if((Xe&6)!==0)throw Error(t(327));jo();var s=Rs(n,0);if((s&1)===0)return xn(n,ot()),null;var a=Fu(n,s);if(n.tag!==0&&a===2){var c=On(n);c!==0&&(s=c,a=wd(n,c))}if(a===1)throw a=$a,Hs(n,0),Ki(n,s),xn(n,ot()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,$s(n,In,ui),xn(n,ot()),null}function Td(n,s){var a=Xe;Xe|=1;try{return n(s)}finally{Xe=a,Xe===0&&(Lo=ot()+500,du&&zi())}}function Bs(n){qi!==null&&qi.tag===0&&(Xe&6)===0&&jo();var s=Xe;Xe|=1;var a=nr.transition,c=Ke;try{if(nr.transition=null,Ke=1,n)return n()}finally{Ke=c,nr.transition=a,Xe=s,(Xe&6)===0&&zi()}}function Id(){Un=Oo.current,ut(Oo)}function Hs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,jw(a)),Pt!==null)for(a=Pt.return;a!==null;){var c=a;switch(Nh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&cu();break;case 3:No(),ut(wn),ut(Zt),Wh();break;case 5:Hh(c);break;case 4:No();break;case 13:ut(vt);break;case 19:ut(vt);break;case 10:Mh(c.type._context);break;case 22:case 23:Id()}a=a.return}if(Bt=n,Pt=n=Qi(n.current,null),Kt=Un=s,jt=0,$a=null,gd=Du=zs=0,In=Wa=null,Ms!==null){for(s=0;s<Ms.length;s++)if(a=Ms[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,c.next=w}a.pending=c}Ms=null}return n}function pg(n,s){do{var a=Pt;try{if(jh(),Tu.current=Cu,Iu){for(var c=_t.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Iu=!1}if(Us=0,zt=Lt=_t=null,Ma=!1,Fa=0,md.current=null,a===null||a.return===null){jt=1,$a=s,Pt=null;break}e:{var m=n,w=a.return,A=a,P=s;if(s=Kt,A.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var B=P,J=A,Z=J.tag;if((J.mode&1)===0&&(Z===0||Z===11||Z===15)){var Y=J.alternate;Y?(J.updateQueue=Y.updateQueue,J.memoizedState=Y.memoizedState,J.lanes=Y.lanes):(J.updateQueue=null,J.memoizedState=null)}var de=Fm(w);if(de!==null){de.flags&=-257,Um(de,w,A,m,s),de.mode&1&&Mm(m,B,s),s=de,P=B;var ye=s.updateQueue;if(ye===null){var _e=new Set;_e.add(P),s.updateQueue=_e}else ye.add(P);break e}else{if((s&1)===0){Mm(m,B,s),xd();break e}P=Error(t(426))}}else if(gt&&A.mode&1){var It=Fm(w);if(It!==null){(It.flags&65536)===0&&(It.flags|=256),Um(It,w,A,m,s),Oh(Do(P,A));break e}}m=P=Do(P,A),jt!==4&&(jt=2),Wa===null?Wa=[m]:Wa.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var U=Lm(m,P,s);um(m,U);break e;case 1:A=P;var D=m.type,z=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Wi===null||!Wi.has(z)))){m.flags|=65536,s&=-s,m.lanes|=s;var ie=jm(m,A,s);um(m,ie);break e}}m=m.return}while(m!==null)}yg(a)}catch(Ie){s=Ie,Pt===a&&a!==null&&(Pt=a=a.return);continue}break}while(!0)}function mg(){var n=Nu.current;return Nu.current=Cu,n===null?Cu:n}function xd(){(jt===0||jt===3||jt===2)&&(jt=4),Bt===null||(zs&268435455)===0&&(Du&268435455)===0||Ki(Bt,Kt)}function Fu(n,s){var a=Xe;Xe|=2;var c=mg();(Bt!==n||Kt!==s)&&(ui=null,Hs(n,s));do try{lE();break}catch(d){pg(n,d)}while(!0);if(jh(),Xe=a,Nu.current=c,Pt!==null)throw Error(t(261));return Bt=null,Kt=0,jt}function lE(){for(;Pt!==null;)gg(Pt)}function uE(){for(;Pt!==null&&!Ll();)gg(Pt)}function gg(n){var s=wg(n.alternate,n,Un);n.memoizedProps=n.pendingProps,s===null?yg(n):Pt=s,md.current=null}function yg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=tE(a,s,Un),a!==null){Pt=a;return}}else{if(a=nE(a,s),a!==null){a.flags&=32767,Pt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{jt=6,Pt=null;return}}if(s=s.sibling,s!==null){Pt=s;return}Pt=s=n}while(s!==null);jt===0&&(jt=5)}function $s(n,s,a){var c=Ke,d=nr.transition;try{nr.transition=null,Ke=1,cE(n,s,a,c)}finally{nr.transition=d,Ke=c}return null}function cE(n,s,a,c){do jo();while(qi!==null);if((Xe&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(st(n,m),n===Bt&&(Pt=Bt=null,Kt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ou||(Ou=!0,Eg(Qn,function(){return jo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=nr.transition,nr.transition=null;var w=Ke;Ke=1;var A=Xe;Xe|=4,md.current=null,iE(n,a),ag(a,n),bw(xh),Oi=!!Ih,xh=Ih=null,n.current=a,sE(a),ah(),Xe=A,Ke=w,nr.transition=m}else n.current=a;if(Ou&&(Ou=!1,qi=n,Lu=d),m=n.pendingLanes,m===0&&(Wi=null),Fl(a.stateNode),xn(n,ot()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Vu)throw Vu=!1,n=vd,vd=null,n;return(Lu&1)!==0&&n.tag!==0&&jo(),m=n.pendingLanes,(m&1)!==0?n===_d?qa++:(qa=0,_d=n):qa=0,zi(),null}function jo(){if(qi!==null){var n=Di(Lu),s=nr.transition,a=Ke;try{if(nr.transition=null,Ke=16>n?16:n,qi===null)var c=!1;else{if(n=qi,qi=null,Lu=0,(Xe&6)!==0)throw Error(t(331));var d=Xe;for(Xe|=4,ge=n.current;ge!==null;){var m=ge,w=m.child;if((ge.flags&16)!==0){var A=m.deletions;if(A!==null){for(var P=0;P<A.length;P++){var B=A[P];for(ge=B;ge!==null;){var J=ge;switch(J.tag){case 0:case 11:case 15:Ha(8,J,m)}var Z=J.child;if(Z!==null)Z.return=J,ge=Z;else for(;ge!==null;){J=ge;var Y=J.sibling,de=J.return;if(ng(J),J===B){ge=null;break}if(Y!==null){Y.return=de,ge=Y;break}ge=de}}}var ye=m.alternate;if(ye!==null){var _e=ye.child;if(_e!==null){ye.child=null;do{var It=_e.sibling;_e.sibling=null,_e=It}while(_e!==null)}}ge=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,ge=w;else e:for(;ge!==null;){if(m=ge,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Ha(9,m,m.return)}var U=m.sibling;if(U!==null){U.return=m.return,ge=U;break e}ge=m.return}}var D=n.current;for(ge=D;ge!==null;){w=ge;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,ge=z;else e:for(w=D;ge!==null;){if(A=ge,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:ku(9,A)}}catch(Ie){Tt(A,A.return,Ie)}if(A===w){ge=null;break e}var ie=A.sibling;if(ie!==null){ie.return=A.return,ge=ie;break e}ge=A.return}}if(Xe=d,zi(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(As,n)}catch{}c=!0}return c}finally{Ke=a,nr.transition=s}}return!1}function vg(n,s,a){s=Do(a,s),s=Lm(n,s,1),n=Hi(n,s,1),s=fn(),n!==null&&(ki(n,1,s),xn(n,s))}function Tt(n,s,a){if(n.tag===3)vg(n,n,a);else for(;s!==null;){if(s.tag===3){vg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Wi===null||!Wi.has(c))){n=Do(a,n),n=jm(s,n,1),s=Hi(s,n,1),n=fn(),s!==null&&(ki(s,1,n),xn(s,n));break}}s=s.return}}function hE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=fn(),n.pingedLanes|=n.suspendedLanes&a,Bt===n&&(Kt&a)===a&&(jt===4||jt===3&&(Kt&130023424)===Kt&&500>ot()-yd?Hs(n,0):gd|=a),xn(n,s)}function _g(n,s){s===0&&((n.mode&1)===0?s=1:(s=so,so<<=1,(so&130023424)===0&&(so=4194304)));var a=fn();n=oi(n,s),n!==null&&(ki(n,s,a),xn(n,a))}function dE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),_g(n,a)}function fE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),_g(n,a)}var wg;wg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||wn.current)Tn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Tn=!1,eE(n,s,a);Tn=(n.flags&131072)!==0}else Tn=!1,gt&&(s.flags&1048576)!==0&&Zp(s,pu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Pu(n,s),n=s.pendingProps;var d=So(s,Zt.current);ko(s,a),d=Kh(null,s,c,n,d,a);var m=Qh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,En(c)?(m=!0,hu(s)):m=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,zh(s),d.updater=Au,s.stateNode=d,d._reactInternals=s,td(s,c,n,a),s=sd(null,s,c,!0,m,a)):(s.tag=0,gt&&m&&kh(s),dn(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Pu(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=mE(c),n=gr(c,n),d){case 0:s=id(null,s,c,n,a);break e;case 1:s=qm(null,s,c,n,a);break e;case 11:s=zm(null,s,c,n,a);break e;case 14:s=Bm(null,s,c,gr(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:gr(c,d),id(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:gr(c,d),qm(n,s,c,d,a);case 3:e:{if(Gm(s),n===null)throw Error(t(387));c=s.pendingProps,m=s.memoizedState,d=m.element,lm(n,s),wu(s,c,null,a);var w=s.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){d=Do(Error(t(423)),s),s=Km(n,s,c,a,d);break e}else if(c!==d){d=Do(Error(t(424)),s),s=Km(n,s,c,a,d);break e}else for(Fn=Mi(s.stateNode.containerInfo.firstChild),Mn=s,gt=!0,mr=null,a=om(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ro(),c===d){s=li(n,s,a);break e}dn(n,s,c,a)}s=s.child}return s;case 5:return hm(s),n===null&&Vh(s),c=s.type,d=s.pendingProps,m=n!==null?n.memoizedProps:null,w=d.children,Sh(c,d)?w=null:m!==null&&Sh(c,m)&&(s.flags|=32),Wm(n,s),dn(n,s,w,a),s.child;case 6:return n===null&&Vh(s),null;case 13:return Qm(n,s,a);case 4:return Bh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Po(s,null,c,a):dn(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:gr(c,d),zm(n,s,c,d,a);case 7:return dn(n,s,s.pendingProps,a),s.child;case 8:return dn(n,s,s.pendingProps.children,a),s.child;case 12:return dn(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,m=s.memoizedProps,w=d.value,at(yu,c._currentValue),c._currentValue=w,m!==null)if(pr(m.value,w)){if(m.children===d.children&&!wn.current){s=li(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var A=m.dependencies;if(A!==null){w=m.child;for(var P=A.firstContext;P!==null;){if(P.context===c){if(m.tag===1){P=ai(-1,a&-a),P.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var J=B.pending;J===null?P.next=P:(P.next=J.next,J.next=P),B.pending=P}}m.lanes|=a,P=m.alternate,P!==null&&(P.lanes|=a),Fh(m.return,a,s),A.lanes|=a;break}P=P.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),Fh(w,a,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}dn(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,ko(s,a),d=er(d),c=c(d),s.flags|=1,dn(n,s,c,a),s.child;case 14:return c=s.type,d=gr(c,s.pendingProps),d=gr(c.type,d),Bm(n,s,c,d,a);case 15:return Hm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:gr(c,d),Pu(n,s),s.tag=1,En(c)?(n=!0,hu(s)):n=!1,ko(s,a),Vm(s,c,d),td(s,c,d,a),sd(null,s,c,!0,n,a);case 19:return Jm(n,s,a);case 22:return $m(n,s,a)}throw Error(t(156,s.tag))};function Eg(n,s){return Ai(n,s)}function pE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(n,s,a,c){return new pE(n,s,a,c)}function Sd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function mE(n){if(typeof n=="function")return Sd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===L)return 11;if(n===tt)return 14}return 2}function Qi(n,s){var a=n.alternate;return a===null?(a=rr(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Uu(n,s,a,c,d,m){var w=2;if(c=n,typeof n=="function")Sd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case b:return Ws(a.children,d,m,s);case S:w=8,d|=8;break;case x:return n=rr(12,a,s,d|2),n.elementType=x,n.lanes=m,n;case R:return n=rr(13,a,s,d),n.elementType=R,n.lanes=m,n;case ue:return n=rr(19,a,s,d),n.elementType=ue,n.lanes=m,n;case pe:return zu(a,d,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:w=10;break e;case N:w=9;break e;case L:w=11;break e;case tt:w=14;break e;case it:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=rr(w,a,s,d),s.elementType=n,s.type=c,s.lanes=m,s}function Ws(n,s,a,c){return n=rr(7,n,c,s),n.lanes=a,n}function zu(n,s,a,c){return n=rr(22,n,c,s),n.elementType=pe,n.lanes=a,n.stateNode={isHidden:!1},n}function Cd(n,s,a){return n=rr(6,n,null,s),n.lanes=a,n}function Ad(n,s,a){return s=rr(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function gE(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bi(0),this.expirationTimes=bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Rd(n,s,a,c,d,m,w,A,P){return n=new gE(n,s,a,A,P),s===1?(s=1,m===!0&&(s|=8)):s=0,m=rr(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},zh(m),n}function yE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Se,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Tg(n){if(!n)return Ui;n=n._reactInternals;e:{if(rt(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(En(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(En(a))return Yp(n,a,s)}return s}function Ig(n,s,a,c,d,m,w,A,P){return n=Rd(a,c,!0,n,d,m,w,A,P),n.context=Tg(null),a=n.current,c=fn(),d=Gi(a),m=ai(c,d),m.callback=s??null,Hi(a,m,d),n.current.lanes=d,ki(n,d,c),xn(n,c),n}function Bu(n,s,a,c){var d=s.current,m=fn(),w=Gi(d);return a=Tg(a),s.context===null?s.context=a:s.pendingContext=a,s=ai(m,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Hi(d,s,w),n!==null&&(_r(n,d,w,m),_u(n,d,w)),w}function Hu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Pd(n,s){xg(n,s),(n=n.alternate)&&xg(n,s)}function vE(){return null}var Sg=typeof reportError=="function"?reportError:function(n){console.error(n)};function bd(n){this._internalRoot=n}$u.prototype.render=bd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Bu(n,s,null,null)},$u.prototype.unmount=bd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Bs(function(){Bu(null,n,null,null)}),s[ni]=null}};function $u(n){this._internalRoot=n}$u.prototype.unstable_scheduleHydration=function(n){if(n){var s=$l();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Pr.length&&s!==0&&s<Pr[a].priority;a++);Pr.splice(a,0,n),a===0&&Gl(n)}};function kd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Wu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Cg(){}function _E(n,s,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var B=Hu(w);m.call(B)}}var w=Ig(s,c,n,0,null,!1,!1,"",Cg);return n._reactRootContainer=w,n[ni]=w.current,ba(n.nodeType===8?n.parentNode:n),Bs(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var B=Hu(P);A.call(B)}}var P=Rd(n,0,!1,null,null,!1,!1,"",Cg);return n._reactRootContainer=P,n[ni]=P.current,ba(n.nodeType===8?n.parentNode:n),Bs(function(){Bu(s,P,a,c)}),P}function qu(n,s,a,c,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var A=d;d=function(){var P=Hu(w);A.call(P)}}Bu(s,w,n,d)}else w=_E(a,s,n,d,c);return Hu(w)}Bl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Pi(s.pendingLanes);a!==0&&(Ni(s,a|1),xn(s,ot()),(Xe&6)===0&&(Lo=ot()+500,zi()))}break;case 13:Bs(function(){var c=oi(n,1);if(c!==null){var d=fn();_r(c,n,1,d)}}),Pd(n,1)}},oo=function(n){if(n.tag===13){var s=oi(n,134217728);if(s!==null){var a=fn();_r(s,n,134217728,a)}Pd(n,134217728)}},Hl=function(n){if(n.tag===13){var s=Gi(n),a=oi(n,s);if(a!==null){var c=fn();_r(a,n,s,c)}Pd(n,s)}},$l=function(){return Ke},Wl=function(n,s){var a=Ke;try{return Ke=n,s()}finally{Ke=a}},Gn=function(n,s,a){switch(s){case"input":if(ar(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=uu(c);if(!d)throw Error(t(90));yt(c),ar(c,d)}}}break;case"textarea":Ee(n,a);break;case"select":s=a.value,s!=null&&gn(n,!!a.multiple,s,!1)}},Kr=Td,xs=Bs;var wE={usingClientEntryPoint:!1,Events:[Da,Io,uu,Kn,Is,Td]},Ga={findFiberByHostInstance:Vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EE={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ve.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Si(n),n===null?null:n.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||vE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gu.isDisabled&&Gu.supportsFiber)try{As=Gu.inject(EE),Vn=Gu}catch{}}return Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wE,Sn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kd(s))throw Error(t(200));return yE(n,s,null,a)},Sn.createRoot=function(n,s){if(!kd(n))throw Error(t(299));var a=!1,c="",d=Sg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Rd(n,1,!1,null,null,a,!1,c,d),n[ni]=s.current,ba(n.nodeType===8?n.parentNode:n),new bd(s)},Sn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Si(s),n=n===null?null:n.stateNode,n},Sn.flushSync=function(n){return Bs(n)},Sn.hydrate=function(n,s,a){if(!Wu(s))throw Error(t(200));return qu(null,n,s,!0,a)},Sn.hydrateRoot=function(n,s,a){if(!kd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",w=Sg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Ig(s,null,n,1,a??null,d,!1,m,w),n[ni]=s.current,ba(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new $u(s)},Sn.render=function(n,s,a){if(!Wu(s))throw Error(t(200));return qu(null,n,s,!1,a)},Sn.unmountComponentAtNode=function(n){if(!Wu(n))throw Error(t(40));return n._reactRootContainer?(Bs(function(){qu(null,null,n,!1,function(){n._reactRootContainer=null,n[ni]=null})}),!0):!1},Sn.unstable_batchedUpdates=Td,Sn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Wu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return qu(n,s,a,!1,c)},Sn.version="18.3.1-next-f1338f8080-20240426",Sn}var Vg;function Av(){if(Vg)return Vd.exports;Vg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vd.exports=bE(),Vd.exports}var Og;function kE(){if(Og)return Ku;Og=1;var r=Av();return Ku.createRoot=r.createRoot,Ku.hydrateRoot=r.hydrateRoot,Ku}var NE=kE();const DE=Cv(NE);Av();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pl(){return pl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},pl.apply(this,arguments)}var rs;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(rs||(rs={}));const Lg="popstate";function VE(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:h,hash:f}=i.location;return Jd("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:mc(o)}return LE(e,t,null,r)}function Dt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Rv(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OE(){return Math.random().toString(36).substr(2,8)}function jg(r,e){return{usr:r.state,key:r.key,idx:e}}function Jd(r,e,t,i){return t===void 0&&(t=null),pl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?sa(e):e,{state:t,key:e&&e.key||i||OE()})}function mc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function sa(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function LE(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,f=rs.Pop,g=null,_=E();_==null&&(_=0,h.replaceState(pl({},h.state,{idx:_}),""));function E(){return(h.state||{idx:null}).idx}function T(){f=rs.Pop;let F=E(),ee=F==null?null:F-_;_=F,g&&g({action:f,location:H.location,delta:ee})}function C(F,ee){f=rs.Push;let re=Jd(H.location,F,ee);_=E()+1;let X=jg(re,_),ve=H.createHref(re);try{h.pushState(X,"",ve)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(ve)}l&&g&&g({action:f,location:H.location,delta:1})}function j(F,ee){f=rs.Replace;let re=Jd(H.location,F,ee);_=E();let X=jg(re,_),ve=H.createHref(re);h.replaceState(X,"",ve),l&&g&&g({action:f,location:H.location,delta:0})}function W(F){let ee=o.location.origin!=="null"?o.location.origin:o.location.href,re=typeof F=="string"?F:mc(F);return re=re.replace(/ $/,"%20"),Dt(ee,"No window.location.(origin|href) available to create URL for href: "+re),new URL(re,ee)}let H={get action(){return f},get location(){return r(o,h)},listen(F){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Lg,T),g=F,()=>{o.removeEventListener(Lg,T),g=null}},createHref(F){return e(o,F)},createURL:W,encodeLocation(F){let ee=W(F);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:C,replace:j,go(F){return h.go(F)}};return H}var Mg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Mg||(Mg={}));function jE(r,e,t){return t===void 0&&(t="/"),ME(r,e,t)}function ME(r,e,t,i){let o=typeof e=="string"?sa(e):e,l=Rf(o.pathname||"/",t);if(l==null)return null;let h=Pv(r);FE(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let _=JE(l);f=KE(h[g],_)}return f}function Pv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(Dt(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let _=ss([i,g.relativePath]),E=t.concat(g);l.children&&l.children.length>0&&(Dt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),Pv(l.children,e,E,_)),!(l.path==null&&!l.index)&&e.push({path:_,score:qE(_,l.index),routesMeta:E})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of bv(l.path))o(l,h,g)}),e}function bv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=bv(i.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function FE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:GE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const UE=/^:[\w-]+$/,zE=3,BE=2,HE=1,$E=10,WE=-2,Fg=r=>r==="*";function qE(r,e){let t=r.split("/"),i=t.length;return t.some(Fg)&&(i+=WE),e&&(i+=BE),t.filter(o=>!Fg(o)).reduce((o,l)=>o+(UE.test(l)?zE:l===""?HE:$E),i)}function GE(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function KE(r,e,t){let{routesMeta:i}=r,o={},l="/",h=[];for(let f=0;f<i.length;++f){let g=i[f],_=f===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",T=QE({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},E),C=g.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:ss([l,T.pathname]),pathnameBase:tT(ss([l,T.pathnameBase])),route:C}),T.pathnameBase!=="/"&&(l=ss([l,T.pathnameBase]))}return h}function QE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=YE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((_,E,T)=>{let{paramName:C,isOptional:j}=E;if(C==="*"){let H=f[T]||"";h=l.slice(0,l.length-H.length).replace(/(.)\/+$/,"$1")}const W=f[T];return j&&!W?_[C]=void 0:_[C]=(W||"").replace(/%2F/g,"/"),_},{}),pathname:l,pathnameBase:h,pattern:r}}function YE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Rv(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(i.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function JE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rv(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Rf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}function XE(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?sa(r):r;return{pathname:t?t.startsWith("/")?t:ZE(t,e):e,search:nT(i),hash:rT(o)}}function ZE(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function jd(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function kv(r,e){let t=eT(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Nv(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=sa(r):(o=pl({},r),Dt(!o.pathname||!o.pathname.includes("?"),jd("?","pathname","search",o)),Dt(!o.pathname||!o.pathname.includes("#"),jd("#","pathname","hash",o)),Dt(!o.search||!o.search.includes("#"),jd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!i&&h.startsWith("..")){let C=h.split("/");for(;C[0]==="..";)C.shift(),T-=1;o.pathname=C.join("/")}f=T>=0?e[T]:"/"}let g=XE(o,f),_=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(_||E)&&(g.pathname+="/"),g}const ss=r=>r.join("/").replace(/\/\/+/g,"/"),tT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),nT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,rT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function iT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Dv=["post","put","patch","delete"];new Set(Dv);const sT=["get",...Dv];new Set(sT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ml(){return ml=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ml.apply(this,arguments)}const Pf=O.createContext(null),oT=O.createContext(null),Zs=O.createContext(null),Lc=O.createContext(null),eo=O.createContext({outlet:null,matches:[],isDataRoute:!1}),Vv=O.createContext(null);function aT(r,e){let{relative:t}=e===void 0?{}:e;Sl()||Dt(!1);let{basename:i,navigator:o}=O.useContext(Zs),{hash:l,pathname:h,search:f}=jv(r,{relative:t}),g=h;return i!=="/"&&(g=h==="/"?i:ss([i,h])),o.createHref({pathname:g,search:f,hash:l})}function Sl(){return O.useContext(Lc)!=null}function oa(){return Sl()||Dt(!1),O.useContext(Lc).location}function Ov(r){O.useContext(Zs).static||O.useLayoutEffect(r)}function Lv(){let{isDataRoute:r}=O.useContext(eo);return r?wT():lT()}function lT(){Sl()||Dt(!1);let r=O.useContext(Pf),{basename:e,future:t,navigator:i}=O.useContext(Zs),{matches:o}=O.useContext(eo),{pathname:l}=oa(),h=JSON.stringify(kv(o,t.v7_relativeSplatPath)),f=O.useRef(!1);return Ov(()=>{f.current=!0}),O.useCallback(function(_,E){if(E===void 0&&(E={}),!f.current)return;if(typeof _=="number"){i.go(_);return}let T=Nv(_,JSON.parse(h),l,E.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:ss([e,T.pathname])),(E.replace?i.replace:i.push)(T,E.state,E)},[e,i,h,l,r])}function jv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=O.useContext(Zs),{matches:o}=O.useContext(eo),{pathname:l}=oa(),h=JSON.stringify(kv(o,i.v7_relativeSplatPath));return O.useMemo(()=>Nv(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function uT(r,e){return cT(r,e)}function cT(r,e,t,i){Sl()||Dt(!1);let{navigator:o}=O.useContext(Zs),{matches:l}=O.useContext(eo),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let _=oa(),E;if(e){var T;let F=typeof e=="string"?sa(e):e;g==="/"||(T=F.pathname)!=null&&T.startsWith(g)||Dt(!1),E=F}else E=_;let C=E.pathname||"/",j=C;if(g!=="/"){let F=g.replace(/^\//,"").split("/");j="/"+C.replace(/^\//,"").split("/").slice(F.length).join("/")}let W=jE(r,{pathname:j}),H=mT(W&&W.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:ss([g,o.encodeLocation?o.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:ss([g,o.encodeLocation?o.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),l,t,i);return e&&H?O.createElement(Lc.Provider,{value:{location:ml({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:rs.Pop}},H):H}function hT(){let r=_T(),e=iT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:o},t):null,null)}const dT=O.createElement(hT,null);class fT extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?O.createElement(eo.Provider,{value:this.props.routeContext},O.createElement(Vv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pT(r){let{routeContext:e,match:t,children:i}=r,o=O.useContext(Pf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),O.createElement(eo.Provider,{value:e},i)}function mT(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let E=h.findIndex(T=>T.route.id&&(f==null?void 0:f[T.route.id])!==void 0);E>=0||Dt(!1),h=h.slice(0,Math.min(h.length,E+1))}let g=!1,_=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<h.length;E++){let T=h[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(_=E),T.route.id){let{loaderData:C,errors:j}=t,W=T.route.loader&&C[T.route.id]===void 0&&(!j||j[T.route.id]===void 0);if(T.route.lazy||W){g=!0,_>=0?h=h.slice(0,_+1):h=[h[0]];break}}}return h.reduceRight((E,T,C)=>{let j,W=!1,H=null,F=null;t&&(j=f&&T.route.id?f[T.route.id]:void 0,H=T.route.errorElement||dT,g&&(_<0&&C===0?(ET("route-fallback"),W=!0,F=null):_===C&&(W=!0,F=T.route.hydrateFallbackElement||null)));let ee=e.concat(h.slice(0,C+1)),re=()=>{let X;return j?X=H:W?X=F:T.route.Component?X=O.createElement(T.route.Component,null):T.route.element?X=T.route.element:X=E,O.createElement(pT,{match:T,routeContext:{outlet:E,matches:ee,isDataRoute:t!=null},children:X})};return t&&(T.route.ErrorBoundary||T.route.errorElement||C===0)?O.createElement(fT,{location:t.location,revalidation:t.revalidation,component:H,error:j,children:re(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):re()},null)}var Mv=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Mv||{}),Fv=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Fv||{});function gT(r){let e=O.useContext(Pf);return e||Dt(!1),e}function yT(r){let e=O.useContext(oT);return e||Dt(!1),e}function vT(r){let e=O.useContext(eo);return e||Dt(!1),e}function Uv(r){let e=vT(),t=e.matches[e.matches.length-1];return t.route.id||Dt(!1),t.route.id}function _T(){var r;let e=O.useContext(Vv),t=yT(),i=Uv();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function wT(){let{router:r}=gT(Mv.UseNavigateStable),e=Uv(Fv.UseNavigateStable),t=O.useRef(!1);return Ov(()=>{t.current=!0}),O.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,ml({fromRouteId:e},l)))},[r,e])}const Ug={};function ET(r,e,t){Ug[r]||(Ug[r]=!0)}function TT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function ic(r){Dt(!1)}function IT(r){let{basename:e="/",children:t=null,location:i,navigationType:o=rs.Pop,navigator:l,static:h=!1,future:f}=r;Sl()&&Dt(!1);let g=e.replace(/^\/*/,"/"),_=O.useMemo(()=>({basename:g,navigator:l,static:h,future:ml({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof i=="string"&&(i=sa(i));let{pathname:E="/",search:T="",hash:C="",state:j=null,key:W="default"}=i,H=O.useMemo(()=>{let F=Rf(E,g);return F==null?null:{location:{pathname:F,search:T,hash:C,state:j,key:W},navigationType:o}},[g,E,T,C,j,W,o]);return H==null?null:O.createElement(Zs.Provider,{value:_},O.createElement(Lc.Provider,{children:t,value:H}))}function xT(r){let{children:e,location:t}=r;return uT(Xd(e),t)}new Promise(()=>{});function Xd(r,e){e===void 0&&(e=[]);let t=[];return O.Children.forEach(r,(i,o)=>{if(!O.isValidElement(i))return;let l=[...e,o];if(i.type===O.Fragment){t.push.apply(t,Xd(i.props.children,l));return}i.type!==ic&&Dt(!1),!i.props.index||!i.props.children||Dt(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Xd(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zd(){return Zd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Zd.apply(this,arguments)}function ST(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function CT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function AT(r,e){return r.button===0&&(!e||e==="_self")&&!CT(r)}const RT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PT="6";try{window.__reactRouterVersion=PT}catch{}const bT="startTransition",zg=AE[bT];function kT(r){let{basename:e,children:t,future:i,window:o}=r,l=O.useRef();l.current==null&&(l.current=VE({window:o,v5Compat:!0}));let h=l.current,[f,g]=O.useState({action:h.action,location:h.location}),{v7_startTransition:_}=i||{},E=O.useCallback(T=>{_&&zg?zg(()=>g(T)):g(T)},[g,_]);return O.useLayoutEffect(()=>h.listen(E),[h,E]),O.useEffect(()=>TT(i),[i]),O.createElement(IT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:i})}const NT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zi=O.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:_,preventScrollReset:E,viewTransition:T}=e,C=ST(e,RT),{basename:j}=O.useContext(Zs),W,H=!1;if(typeof _=="string"&&DT.test(_)&&(W=_,NT))try{let X=new URL(window.location.href),ve=_.startsWith("//")?new URL(X.protocol+_):new URL(_),le=Rf(ve.pathname,j);ve.origin===X.origin&&le!=null?_=le+ve.search+ve.hash:H=!0}catch{}let F=aT(_,{relative:o}),ee=VT(_,{replace:h,state:f,target:g,preventScrollReset:E,relative:o,viewTransition:T});function re(X){i&&i(X),X.defaultPrevented||ee(X)}return O.createElement("a",Zd({},C,{href:W||F,onClick:H||l?i:re,ref:t,target:g}))});var Bg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Bg||(Bg={}));var Hg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Hg||(Hg={}));function VT(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=Lv(),_=oa(),E=jv(r,{relative:h});return O.useCallback(T=>{if(AT(T,t)){T.preventDefault();let C=i!==void 0?i:mc(_)===mc(E);g(r,{replace:C,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[_,g,E,i,o,t,r,l,h,f])}const OT=()=>{};var $g={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},LT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Bv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,E=l>>2,T=(l&3)<<4|f>>4;let C=(f&15)<<2|_>>6,j=_&63;g||(j=64,h||(C=64)),i.push(t[E],t[T],t[C],t[j])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(zv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):LT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||_==null||T==null)throw new jT;const C=l<<2|f>>4;if(i.push(C),_!==64){const j=f<<4&240|_>>2;if(i.push(j),T!==64){const W=_<<6&192|T;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class jT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MT=function(r){const e=zv(r);return Bv.encodeByteArray(e,!0)},gc=function(r){return MT(r).replace(/\./g,"")},Hv=function(r){try{return Bv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=()=>FT().__FIREBASE_DEFAULTS__,zT=()=>{if(typeof process>"u"||typeof $g>"u")return;const r=$g.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},BT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Hv(r[1]);return e&&JSON.parse(e)},jc=()=>{try{return OT()||UT()||zT()||BT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},$v=r=>{var e,t;return(t=(e=jc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},HT=r=>{const e=$v(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Wv=()=>{var r;return(r=jc())===null||r===void 0?void 0:r.config},qv=r=>{var e;return(e=jc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[gc(JSON.stringify(t)),gc(JSON.stringify(h)),""].join(".")}const sl={};function qT(){const r={prod:[],emulator:[]};for(const e of Object.keys(sl))sl[e]?r.emulator.push(e):r.prod.push(e);return r}function GT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Wg=!1;function Kv(r,e){if(typeof window>"u"||typeof document>"u"||!aa(window.location.host)||sl[r]===e||sl[r]||Wg)return;sl[r]=e;function t(C){return`__firebase__banner__${C}`}const i="__firebase__banner",l=qT().prod.length>0;function h(){const C=document.getElementById(i);C&&C.remove()}function f(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function g(C,j){C.setAttribute("width","24"),C.setAttribute("id",j),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function _(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Wg=!0,h()},C}function E(C,j){C.setAttribute("id",j),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=GT(i),j=t("text"),W=document.getElementById(j)||document.createElement("span"),H=t("learnmore"),F=document.getElementById(H)||document.createElement("a"),ee=t("preprendIcon"),re=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const X=C.element;f(X),E(F,H);const ve=_();g(re,ee),X.append(re,W,F,ve),document.body.appendChild(X)}l?(W.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function QT(){var r;const e=(r=jc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function XT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZT(){const r=an();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function eI(){return!QT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tI(){try{return typeof indexedDB=="object"}catch{return!1}}function nI(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="FirebaseError";class _i extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=rI,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cl.prototype.create)}}class Cl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?iI(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new _i(o,f,i)}}function iI(r,e){return r.replace(sI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const sI=/\{\$([^}]+)}/g;function oI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ds(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(qg(l)&&qg(h)){if(!ds(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function qg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ja(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Xa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function aI(r,e){const t=new lI(r,e);return t.subscribe.bind(t)}class lI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");uI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Md),o.error===void 0&&(o.error=Md),o.complete===void 0&&(o.complete=Md);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Md(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(r){return r&&r._delegate?r._delegate:r}class Ys{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new $T;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dI(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hI(r){return r===qs?void 0:r}function dI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})($e||($e={}));const pI={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},mI=$e.INFO,gI={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},yI=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=gI[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bf{constructor(e){this.name=e,this._logLevel=mI,this._logHandler=yI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const vI=(r,e)=>e.some(t=>r instanceof t);let Gg,Kg;function _I(){return Gg||(Gg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wI(){return Kg||(Kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qv=new WeakMap,ef=new WeakMap,Yv=new WeakMap,Fd=new WeakMap,kf=new WeakMap;function EI(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(os(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Qv.set(t,r)}).catch(()=>{}),kf.set(e,r),e}function TI(r){if(ef.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});ef.set(r,e)}let tf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return ef.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Yv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return os(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function II(r){tf=r(tf)}function xI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Ud(this),e,...t);return Yv.set(i,e.sort?e.sort():[e]),os(i)}:wI().includes(r)?function(...e){return r.apply(Ud(this),e),os(Qv.get(this))}:function(...e){return os(r.apply(Ud(this),e))}}function SI(r){return typeof r=="function"?xI(r):(r instanceof IDBTransaction&&TI(r),vI(r,_I())?new Proxy(r,tf):r)}function os(r){if(r instanceof IDBRequest)return EI(r);if(Fd.has(r))return Fd.get(r);const e=SI(r);return e!==r&&(Fd.set(r,e),kf.set(e,r)),e}const Ud=r=>kf.get(r);function CI(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=os(h);return i&&h.addEventListener("upgradeneeded",g=>{i(os(h.result),g.oldVersion,g.newVersion,os(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),f}const AI=["get","getKey","getAll","getAllKeys","count"],RI=["put","add","delete","clear"],zd=new Map;function Qg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(zd.get(e))return zd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=RI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||AI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(f.shift())),(await Promise.all([_[t](...f),o&&g.done]))[0]};return zd.set(e,l),l}II(r=>({...r,get:(e,t,i)=>Qg(e,t)||r.get(e,t,i),has:(e,t)=>!!Qg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(bI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function bI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",Yg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new bf("@firebase/app"),kI="@firebase/app-compat",NI="@firebase/analytics-compat",DI="@firebase/analytics",VI="@firebase/app-check-compat",OI="@firebase/app-check",LI="@firebase/auth",jI="@firebase/auth-compat",MI="@firebase/database",FI="@firebase/data-connect",UI="@firebase/database-compat",zI="@firebase/functions",BI="@firebase/functions-compat",HI="@firebase/installations",$I="@firebase/installations-compat",WI="@firebase/messaging",qI="@firebase/messaging-compat",GI="@firebase/performance",KI="@firebase/performance-compat",QI="@firebase/remote-config",YI="@firebase/remote-config-compat",JI="@firebase/storage",XI="@firebase/storage-compat",ZI="@firebase/firestore",ex="@firebase/ai",tx="@firebase/firestore-compat",nx="firebase",rx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",ix={[nf]:"fire-core",[kI]:"fire-core-compat",[DI]:"fire-analytics",[NI]:"fire-analytics-compat",[OI]:"fire-app-check",[VI]:"fire-app-check-compat",[LI]:"fire-auth",[jI]:"fire-auth-compat",[MI]:"fire-rtdb",[FI]:"fire-data-connect",[UI]:"fire-rtdb-compat",[zI]:"fire-fn",[BI]:"fire-fn-compat",[HI]:"fire-iid",[$I]:"fire-iid-compat",[WI]:"fire-fcm",[qI]:"fire-fcm-compat",[GI]:"fire-perf",[KI]:"fire-perf-compat",[QI]:"fire-rc",[YI]:"fire-rc-compat",[JI]:"fire-gcs",[XI]:"fire-gcs-compat",[ZI]:"fire-fst",[tx]:"fire-fst-compat",[ex]:"fire-vertex","fire-js":"fire-js",[nx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Map,sx=new Map,sf=new Map;function Jg(r,e){try{r.container.addComponent(e)}catch(t){pi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Jo(r){const e=r.name;if(sf.has(e))return pi.debug(`There were multiple attempts to register component ${e}.`),!1;sf.set(e,r);for(const t of yc.values())Jg(t,r);for(const t of sx.values())Jg(t,r);return!0}function Nf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function pn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new Cl("app","Firebase",ox);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=rx;function Jv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:rf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw as.create("bad-app-name",{appName:String(o)});if(t||(t=Wv()),!t)throw as.create("no-options");const l=yc.get(o);if(l){if(ds(t,l.options)&&ds(i,l.config))return l;throw as.create("duplicate-app",{appName:o})}const h=new fI(o);for(const g of sf.values())h.addComponent(g);const f=new ax(t,i,h);return yc.set(o,f),f}function Xv(r=rf){const e=yc.get(r);if(!e&&r===rf&&Wv())return Jv();if(!e)throw as.create("no-app",{appName:r});return e}function ls(r,e,t){var i;let o=(i=ix[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pi.warn(f.join(" "));return}Jo(new Ys(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="firebase-heartbeat-database",ux=1,gl="firebase-heartbeat-store";let Bd=null;function Zv(){return Bd||(Bd=CI(lx,ux,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(gl)}catch(t){console.warn(t)}}}}).catch(r=>{throw as.create("idb-open",{originalErrorMessage:r.message})})),Bd}async function cx(r){try{const t=(await Zv()).transaction(gl),i=await t.objectStore(gl).get(e_(r));return await t.done,i}catch(e){if(e instanceof _i)pi.warn(e.message);else{const t=as.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pi.warn(t.message)}}}async function Xg(r,e){try{const i=(await Zv()).transaction(gl,"readwrite");await i.objectStore(gl).put(e,e_(r)),await i.done}catch(t){if(t instanceof _i)pi.warn(t.message);else{const i=as.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});pi.warn(i.message)}}}function e_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=1024,dx=30;class fx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mx(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Zg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>dx){const h=gx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){pi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zg(),{heartbeatsToSend:i,unsentEntries:o}=px(this._heartbeatsCache.heartbeats),l=gc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return pi.warn(t),""}}}function Zg(){return new Date().toISOString().substring(0,10)}function px(r,e=hx){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),ey(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ey(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class mx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tI()?nI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ey(r){return gc(JSON.stringify({version:2,heartbeats:r})).length}function gx(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(r){Jo(new Ys("platform-logger",e=>new PI(e),"PRIVATE")),Jo(new Ys("heartbeat",e=>new fx(e),"PRIVATE")),ls(nf,Yg,r),ls(nf,Yg,"esm2017"),ls("fire-js","")}yx("");var vx="firebase",_x="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls(vx,_x,"app");function Df(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function t_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wx=t_,n_=new Cl("auth","Firebase",t_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new bf("@firebase/auth");function Ex(r,...e){vc.logLevel<=$e.WARN&&vc.warn(`Auth (${ua}): ${r}`,...e)}function sc(r,...e){vc.logLevel<=$e.ERROR&&vc.error(`Auth (${ua}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(r,...e){throw Of(r,...e)}function Rn(r,...e){return Of(r,...e)}function Vf(r,e,t){const i=Object.assign(Object.assign({},wx()),{[e]:t});return new Cl("auth","Firebase",i).create(e,{appName:r.name})}function Tr(r){return Vf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tx(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&sr(r,"argument-error"),Vf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Of(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return n_.create(r,...e)}function ce(r,e,...t){if(!r)throw Of(e,...t)}function di(r){const e="INTERNAL ASSERTION FAILED: "+r;throw sc(e),new Error(e)}function mi(r,e){r||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function Lf(){return ty()==="http:"||ty()==="https:"}function ty(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lf()||JT()||"connection"in navigator)?navigator.onLine:!0}function xx(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,t){this.shortDelay=e,this.longDelay=t,mi(t>e,"Short delay should be less than long delay!"),this.isMobile=KT()||XT()}get(){return Ix()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(r,e){mi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ax=new Al(3e4,6e4);function ln(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Bn(r,e,t,i,o={}){return i_(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=la(Object.assign({key:r.config.apiKey},h)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _=Object.assign({method:e,headers:g},l);return YT()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&aa(r.emulatorConfig.host)&&(_.credentials="include"),r_.fetch()(await s_(r,r.config.apiHost,t,f),_)})}async function i_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},Sx),e);try{const o=new Px(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Za(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,_]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Za(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Za(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Za(r,"user-disabled",h);const E=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Vf(r,E,_);sr(r,E)}}catch(o){if(o instanceof _i)throw o;sr(r,"network-request-failed",{message:String(o)})}}async function wi(r,e,t,i,o={}){const l=await Bn(r,e,t,i,o);return"mfaPendingCredential"in l&&sr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function s_(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?jf(r.config,o):`${r.config.apiScheme}://${o}`;return Cx.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function Rx(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Px{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Rn(this.auth,"network-request-failed")),Ax.get())})}}function Za(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Rn(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(r){return r!==void 0&&r.getResponse!==void 0}function ry(r){return r!==void 0&&r.enterprise!==void 0}class o_{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Rx(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bx(r){return(await Bn(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function a_(r,e){return Bn(r,"GET","/v2/recaptchaConfig",ln(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kx(r,e){return Bn(r,"POST","/v1/accounts:delete",e)}async function wc(r,e){return Bn(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Nx(r,e=!1){const t=Ct(r),i=await t.getIdToken(e),o=Mf(i);ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:ol(Hd(o.auth_time)),issuedAtTime:ol(Hd(o.iat)),expirationTime:ol(Hd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Hd(r){return Number(r)*1e3}function Mf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return sc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Hv(t);return o?JSON.parse(o):(sc("Failed to decode base64 JWT payload"),null)}catch(o){return sc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function iy(r){const e=Mf(r);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof _i&&Dx(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function Dx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ol(this.lastLoginAt),this.creationTime=ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(r){var e;const t=r.auth,i=await r.getIdToken(),o=await yl(r,wc(t,{idToken:i}));ce(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?l_(l.providerUserInfo):[],f=Lx(r.providerData,h),g=r.isAnonymous,_=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),E=g?_:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new of(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,T)}async function Ox(r){const e=Ct(r);await vl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Lx(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function l_(r){return r.map(e=>{var{providerId:t}=e,i=Df(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(r,e){const t=await i_(r,{},async()=>{const i=la({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await s_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return r.emulatorConfig&&aa(r.emulatorConfig.host)&&(g.credentials="include"),r_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Mx(r,e){return Bn(r,"POST","/v2/accounts:revokeToken",ln(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const t=iy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await jx(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new $o;return i&&(ce(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(ce(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(ce(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(r,e){ce(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Er{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Df(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new of(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await yl(this,this.stsTokenManager.getToken(this.auth,e));return ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Nx(this,e)}reload(){return Ox(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await vl(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(Tr(this.auth));const e=await this.getIdToken();return await yl(this,kx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,f,g,_,E;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,C=(o=t.email)!==null&&o!==void 0?o:void 0,j=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,W=(h=t.photoURL)!==null&&h!==void 0?h:void 0,H=(f=t.tenantId)!==null&&f!==void 0?f:void 0,F=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,ee=(_=t.createdAt)!==null&&_!==void 0?_:void 0,re=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:X,emailVerified:ve,isAnonymous:le,providerData:Se,stsTokenManager:b}=t;ce(X&&b,e,"internal-error");const S=$o.fromJSON(this.name,b);ce(typeof X=="string",e,"internal-error"),Ji(T,e.name),Ji(C,e.name),ce(typeof ve=="boolean",e,"internal-error"),ce(typeof le=="boolean",e,"internal-error"),Ji(j,e.name),Ji(W,e.name),Ji(H,e.name),Ji(F,e.name),Ji(ee,e.name),Ji(re,e.name);const x=new Er({uid:X,auth:e,email:C,emailVerified:ve,displayName:T,isAnonymous:le,photoURL:W,phoneNumber:j,tenantId:H,stsTokenManager:S,createdAt:ee,lastLoginAt:re});return Se&&Array.isArray(Se)&&(x.providerData=Se.map(k=>Object.assign({},k))),F&&(x._redirectEventId=F),x}static async _fromIdTokenResponse(e,t,i=!1){const o=new $o;o.updateFromServerResponse(t);const l=new Er({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await vl(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ce(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?l_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new $o;f.updateFromIdToken(i);const g=new Er({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new of(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new Map;function fi(r){mi(r instanceof Function,"Expected a class definition");let e=sy.get(r);return e?(mi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,sy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}u_.type="NONE";const oy=u_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(r,e,t){return`firebase:${r}:${e}:${t}`}class Wo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=oc(this.userKey,o.apiKey,l),this.fullPersistenceKey=oc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await wc(this.auth,{idToken:e}).catch(()=>{});return t?Er._fromGetAccountInfoResponse(this.auth,t,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Wo(fi(oy),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||fi(oy);const h=oc(i,e.config.apiKey,e.name);let f=null;for(const _ of t)try{const E=await _._get(h);if(E){let T;if(typeof E=="string"){const C=await wc(e,{idToken:E}).catch(()=>{});if(!C)break;T=await Er._fromGetAccountInfoResponse(e,C,E)}else T=Er._fromJSON(e,E);_!==l&&(f=T),l=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Wo(l,e,i):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(h)}catch{}})),new Wo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(f_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m_(e))return"Blackberry";if(g_(e))return"Webos";if(h_(e))return"Safari";if((e.includes("chrome/")||d_(e))&&!e.includes("edge/"))return"Chrome";if(p_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function c_(r=an()){return/firefox\//i.test(r)}function h_(r=an()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d_(r=an()){return/crios\//i.test(r)}function f_(r=an()){return/iemobile/i.test(r)}function p_(r=an()){return/android/i.test(r)}function m_(r=an()){return/blackberry/i.test(r)}function g_(r=an()){return/webos/i.test(r)}function Ff(r=an()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Fx(r=an()){var e;return Ff(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ux(){return ZT()&&document.documentMode===10}function y_(r=an()){return Ff(r)||p_(r)||g_(r)||m_(r)||/windows phone/i.test(r)||f_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(r,e=[]){let t;switch(r){case"Browser":t=ay(an());break;case"Worker":t=`${ay(an())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ua}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bx(r,e={}){return Bn(r,"GET","/v2/passwordPolicy",ln(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=6;class $x{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:Hx,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,f;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(f=g.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ly(this),this.idTokenSubscription=new ly(this),this.beforeStateQueue=new zx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fi(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Wo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wc(this,{idToken:e}),i=await Er._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(pn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(Tr(this));const t=e?Ct(e):null;return t&&ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(Tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(Tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Bx(this),t=new $x(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Mx(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fi(e)||this._popupRedirectResolver;ce(t,this,"argument-error"),this.redirectPersistenceManager=await Wo.create(this,[fi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Ex(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function or(r){return Ct(r)}class ly{constructor(e){this.auth=e,this.observer=null,this.addObserver=aI(t=>this.observer=t)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qx(r){Rl=r}function Uf(r){return Rl.loadJS(r)}function Gx(){return Rl.recaptchaV2Script}function Kx(){return Rl.recaptchaEnterpriseScript}function Qx(){return Rl.gapiScript}function __(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=500,Jx=6e4,Qu=1e12;class Xx{constructor(e){this.auth=e,this.counter=Qu,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new tS(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;const i=e||Qu;(t=this._widgets.get(i))===null||t===void 0||t.delete(),this._widgets.delete(i)}getResponse(e){var t;const i=e||Qu;return((t=this._widgets.get(i))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const i=e||Qu;return(t=this._widgets.get(i))===null||t===void 0||t.execute(),""}}class Zx{constructor(){this.enterprise=new eS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class tS{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;ce(o,"argument-error",{appName:t}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=nS(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},Jx)},Yx))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function nS(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<r;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const rS="recaptcha-enterprise",al="NO_RECAPTCHA";class w_{constructor(e){this.type=rS,this.auth=or(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{a_(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const _=new o_(g);return l.tenantId==null?l._agentRecaptchaConfig=_:l._tenantRecaptchaConfigs[l.tenantId]=_,h(_.siteKey)}}).catch(g=>{f(g)})})}function o(l,h,f){const g=window.grecaptcha;ry(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(_=>{h(_)}).catch(()=>{h(al)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Zx().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(f=>{if(!t&&ry(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Kx();g.length!==0&&(g+=f),Uf(g).then(()=>{o(f,l,h)}).catch(_=>{h(_)})}}).catch(f=>{h(f)})})}}async function Qa(r,e,t,i=!1,o=!1){const l=new w_(r);let h;if(o)h=al;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,_=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function qo(r,e,t,i,o){var l,h;if(o==="EMAIL_PASSWORD_PROVIDER")if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Qa(r,e,t,t==="getOobCode");return i(r,f)}else return i(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await Qa(r,e,t,t==="getOobCode");return i(r,g)}else return Promise.reject(f)});else if(o==="PHONE_PROVIDER")if(!((h=r._getRecaptchaConfig())===null||h===void 0)&&h.isProviderEnabled("PHONE_PROVIDER")){const f=await Qa(r,e,t);return i(r,f).catch(async g=>{var _;if(((_=r._getRecaptchaConfig())===null||_===void 0?void 0:_.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(g.code==="auth/missing-recaptcha-token"||g.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const E=await Qa(r,e,t,!1,!0);return i(r,E)}return Promise.reject(g)})}else{const f=await Qa(r,e,t,!1,!0);return i(r,f)}else return Promise.reject(o+" provider is not supported.")}async function iS(r){const e=or(r),t=await a_(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new o_(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new w_(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(r,e){const t=Nf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ds(l,e??{}))return o;sr(o,"already-initialized")}return t.initialize({options:e})}function oS(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(fi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function aS(r,e,t){const i=or(r);ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=E_(e),{host:h,port:f}=lS(e),g=f===null?"":`:${f}`,_={url:`${l}//${h}${g}/`},E=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ce(ds(_,i.config.emulator)&&ds(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=_,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,aa(h)?(Gv(`${l}//${h}${g}`),Kv("Auth",!0)):uS()}function E_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function lS(r){const e=E_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:uy(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:uy(h)}}}function uy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function uS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,t){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}async function cS(r,e){return Bn(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(r,e){return wi(r,"POST","/v1/accounts:signInWithPassword",ln(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(r,e){return wi(r,"POST","/v1/accounts:signInWithEmailLink",ln(r,e))}async function fS(r,e){return wi(r,"POST","/v1/accounts:signInWithEmailLink",ln(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends Mc{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new _l(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new _l(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qo(e,t,"signInWithPassword",hS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return dS(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qo(e,i,"signUpPassword",cS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return fS(e,{idToken:t,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(r,e){return wi(r,"POST","/v1/accounts:signInWithIdp",ln(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="http://localhost";class gi extends Mc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Df(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new gi(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Go(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Go(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Go(e,t)}buildRequest(){const e={requestUri:pS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=la(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cy(r,e){return Bn(r,"POST","/v1/accounts:sendVerificationCode",ln(r,e))}async function mS(r,e){return wi(r,"POST","/v1/accounts:signInWithPhoneNumber",ln(r,e))}async function gS(r,e){const t=await wi(r,"POST","/v1/accounts:signInWithPhoneNumber",ln(r,e));if(t.temporaryProof)throw Za(r,"account-exists-with-different-credential",t);return t}const yS={USER_NOT_FOUND:"user-not-found"};async function vS(r,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return wi(r,"POST","/v1/accounts:signInWithPhoneNumber",ln(r,t),yS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends Mc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ll({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ll({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return mS(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return gS(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return vS(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:o,temporaryProof:l}=e;return!i&&!t&&!o&&!l?null:new ll({verificationId:t,verificationCode:i,phoneNumber:o,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wS(r){const e=Ja(Xa(r)).link,t=e?Ja(Xa(e)).deep_link_id:null,i=Ja(Xa(r)).deep_link_id;return(i?Ja(Xa(i)).link:null)||i||t||e||r}class zf{constructor(e){var t,i,o,l,h,f;const g=Ja(Xa(e)),_=(t=g.apiKey)!==null&&t!==void 0?t:null,E=(i=g.oobCode)!==null&&i!==void 0?i:null,T=_S((o=g.mode)!==null&&o!==void 0?o:null);ce(_&&E&&T,"argument-error"),this.apiKey=_,this.operation=T,this.code=E,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=g.lang)!==null&&h!==void 0?h:null,this.tenantId=(f=g.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=wS(e);try{return new zf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.providerId=to.PROVIDER_ID}static credential(e,t){return _l._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=zf.parseLink(t);return ce(i,"argument-error"),_l._fromEmailAndCode(e,i.code,i.tenantId)}}to.PROVIDER_ID="password";to.EMAIL_PASSWORD_SIGN_IN_METHOD="password";to.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends Bf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ko extends ca{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ce("providerId"in t&&"signInMethod"in t,"argument-error"),gi._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ce(e.idToken||e.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ko.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ko.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:l,nonce:h,providerId:f}=e;if(!i&&!o&&!t&&!l||!f)return null;try{return new Ko(f)._credential({idToken:t,accessToken:i,nonce:h,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends ca{constructor(){super("facebook.com")}static credential(e){return gi._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.FACEBOOK_SIGN_IN_METHOD="facebook.com";es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends ca{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gi._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return hi.credential(t,i)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends ca{constructor(){super("github.com")}static credential(e){return gi._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends ca{constructor(){super("twitter.com")}static credential(e,t){return gi._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ns.credential(t,i)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(r,e){return wi(r,"POST","/v1/accounts:signUp",ln(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Er._fromIdTokenResponse(e,i,o),h=hy(i);return new fs({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=hy(i);return new fs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function hy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends _i{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Ec(e,t,i,o)}}function T_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ec._fromErrorAndOperation(r,l,e,i):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}async function I_(r,e,t=!1){const i=await yl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return fs._forOperation(r,"link",i)}async function IS(r,e,t){await vl(e);const i=TS(e.providerData);ce(i.has(t)===r,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(r,e,t=!1){const{auth:i}=r;if(pn(i.app))return Promise.reject(Tr(i));const o="reauthenticate";try{const l=await yl(r,T_(i,o,e,r),t);ce(l.idToken,i,"internal-error");const h=Mf(l.idToken);ce(h,i,"internal-error");const{sub:f}=h;return ce(r.uid===f,i,"user-mismatch"),fs._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&sr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x_(r,e,t=!1){if(pn(r.app))return Promise.reject(Tr(r));const i="signIn",o=await T_(r,i,e),l=await fs._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function S_(r,e){return x_(or(r),e)}async function Yu(r,e){const t=Ct(r);return await IS(!1,t,e.providerId),I_(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(r,e){return wi(r,"POST","/v1/accounts:signInWithCustomToken",ln(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(r,e){if(pn(r.app))return Promise.reject(Tr(r));const t=or(r),i=await SS(t,{token:e,returnSecureToken:!0}),o=await fs._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C_(r){const e=or(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AS(r,e,t){if(pn(r.app))return Promise.reject(Tr(r));const i=or(r),h=await qo(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ES,"EMAIL_PASSWORD_PROVIDER").catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&C_(r),g}),f=await fs._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(f.user),f}function RS(r,e,t){return pn(r.app)?Promise.reject(Tr(r)):S_(Ct(r),to.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&C_(r),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(r,e){return Bn(r,"POST","/v1/accounts:createAuthUri",ln(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(r,e){const t=Lf()?_c():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:o}=await PS(Ct(r),i);return o||[]}function kS(r,e,t,i){return Ct(r).onIdTokenChanged(e,t,i)}function NS(r,e,t){return Ct(r).beforeAuthStateChanged(e,t)}function DS(r,e,t,i){return Ct(r).onAuthStateChanged(e,t,i)}function VS(r){return Ct(r).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(r,e){return Bn(r,"POST","/v2/accounts/mfaEnrollment:start",ln(r,e))}const Tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tc,"1"),this.storage.removeItem(Tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=1e3,LS=10;class R_ extends A_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);Ux()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,LS):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},OS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}R_.type="LOCAL";const jS=R_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends A_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}P_.type="SESSION";const b_=P_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Fc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async _=>_(t.origin,l)),g=await MS(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const _=Hf("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const C=T;if(C.data.eventId===_)switch(C.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(C.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return window}function US(r){kt().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(){return typeof kt().WorkerGlobalScope<"u"&&typeof kt().importScripts=="function"}async function zS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function HS(){return $f()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="firebaseLocalStorageDb",$S=1,Ic="firebaseLocalStorage",N_="fbase_key";class Pl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uc(r,e){return r.transaction([Ic],e?"readwrite":"readonly").objectStore(Ic)}function WS(){const r=indexedDB.deleteDatabase(k_);return new Pl(r).toPromise()}function af(){const r=indexedDB.open(k_,$S);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Ic,{keyPath:N_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Ic)?e(i):(i.close(),await WS(),e(await af()))})})}async function fy(r,e,t){const i=Uc(r,!0).put({[N_]:e,value:t});return new Pl(i).toPromise()}async function qS(r,e){const t=Uc(r,!1).get(e),i=await new Pl(t).toPromise();return i===void 0?null:i.value}function py(r,e){const t=Uc(r,!0).delete(e);return new Pl(t).toPromise()}const GS=800,KS=3;class D_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await af(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>KS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $f()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(HS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await zS(),!this.activeServiceWorker)return;this.sender=new FS(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await af();return await fy(e,Tc,"1"),await py(e,Tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>fy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>qS(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>py(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Uc(o,!1).getAll();return new Pl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D_.type="LOCAL";const QS=D_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(r,e){return Bn(r,"POST","/v2/accounts/mfaSignIn:start",ln(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=__("rcb"),YS=new Al(3e4,6e4);class JS{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=kt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return ce(XS(t),e,"argument-error"),this.shouldResolveImmediately(t)&&ny(kt().grecaptcha)?Promise.resolve(kt().grecaptcha):new Promise((i,o)=>{const l=kt().setTimeout(()=>{o(Rn(e,"network-request-failed"))},YS.get());kt()[$d]=()=>{kt().clearTimeout(l),delete kt()[$d];const f=kt().grecaptcha;if(!f||!ny(f)){o(Rn(e,"internal-error"));return}const g=f.render;f.render=(_,E)=>{const T=g(_,E);return this.counter++,T},this.hostLanguage=t,i(f)};const h=`${Gx()}?${la({onload:$d,render:"explicit",hl:t})}`;Uf(h).catch(()=>{clearTimeout(l),o(Rn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=kt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function XS(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}class ZS{async load(e){return new Xx(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul="recaptcha",e1={theme:"light",type:"image"};class V_{constructor(e,t,i=Object.assign({},e1)){this.parameters=i,this.type=ul,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=or(e),this.isInvisible=this.parameters.size==="invisible",ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof t=="string"?document.getElementById(t):t;ce(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ZS:new JS,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(o=>{const l=h=>{h&&(this.tokenChangeListeners.delete(l),o(h))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=kt()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ce(Lf()&&!$f(),this.auth,"internal-error"),await t1(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await bx(this.auth);ce(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function t1(){let r=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}r=()=>e(),window.addEventListener("load",r)}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ll._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function r1(r,e,t){if(pn(r.app))return Promise.reject(Tr(r));const i=or(r),o=await i1(i,e,Ct(t));return new n1(o,l=>S_(i,l))}async function i1(r,e,t){var i;if(!r._getRecaptchaConfig())try{await iS(r)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const l=o.session;if("phoneNumber"in o){ce(l.type==="enroll",r,"internal-error");const h={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await qo(r,h,"mfaSmsEnrollment",async(E,T)=>{if(T.phoneEnrollmentInfo.captchaResponse===al){ce((t==null?void 0:t.type)===ul,E,"argument-error");const C=await Wd(E,T,t);return dy(E,C)}return dy(E,T)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneSessionInfo.sessionInfo}else{ce(l.type==="signin",r,"internal-error");const h=((i=o.multiFactorHint)===null||i===void 0?void 0:i.uid)||o.multiFactorUid;ce(h,r,"missing-multi-factor-info");const f={mfaPendingCredential:l.credential,mfaEnrollmentId:h,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await qo(r,f,"mfaSmsSignIn",async(T,C)=>{if(C.phoneSignInInfo.captchaResponse===al){ce((t==null?void 0:t.type)===ul,T,"argument-error");const j=await Wd(T,C,t);return my(T,j)}return my(T,C)},"PHONE_PROVIDER").catch(T=>Promise.reject(T))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await qo(r,l,"sendVerificationCode",async(_,E)=>{if(E.captchaResponse===al){ce((t==null?void 0:t.type)===ul,_,"argument-error");const T=await Wd(_,E,t);return cy(_,T)}return cy(_,E)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).sessionInfo}}finally{t==null||t._reset()}}async function Wd(r,e,t){ce(t.type===ul,r,"argument-error");const i=await t.verify();ce(typeof i=="string",r,"argument-error");const o=Object.assign({},e);if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,h=o.phoneEnrollmentInfo.captchaResponse,f=o.phoneEnrollmentInfo.clientType,g=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:i,captchaResponse:h,clientType:f,recaptchaVersion:g}}),o}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.captchaResponse,h=o.phoneSignInInfo.clientType,f=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:l,clientType:h,recaptchaVersion:f}}),o}else return Object.assign(o,{recaptchaToken:i}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(r,e){return e?fi(e):(ce(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends Mc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Go(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Go(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Go(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function s1(r){return x_(r.auth,new Wf(r),r.bypassAuthState)}function o1(r){const{auth:e,user:t}=r;return ce(t,e,"internal-error"),xS(t,new Wf(r),r.bypassAuthState)}async function a1(r){const{auth:e,user:t}=r;return ce(t,e,"internal-error"),I_(t,new Wf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return s1;case"linkViaPopup":case"linkViaRedirect":return a1;case"reauthViaPopup":case"reauthViaRedirect":return o1;default:sr(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new Al(2e3,1e4);async function Ju(r,e,t){if(pn(r.app))return Promise.reject(Rn(r,"operation-not-supported-in-this-environment"));const i=or(r);Tx(r,e,Bf);const o=O_(i,t);return new Gs(i,"signInViaPopup",e,o).executeNotNull()}class Gs extends L_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Gs.currentPopupAction&&Gs.currentPopupAction.cancel(),Gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Rn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,l1.get())};e()}}Gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="pendingRedirect",ac=new Map;class c1 extends L_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ac.get(this.auth._key());if(!e){try{const i=await h1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ac.set(this.auth._key(),e)}return this.bypassAuthState||ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function h1(r,e){const t=p1(e),i=f1(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function d1(r,e){ac.set(r._key(),e)}function f1(r){return fi(r._redirectPersistence)}function p1(r){return oc(u1,r.config.apiKey,r.name)}async function m1(r,e,t=!1){if(pn(r.app))return Promise.reject(Tr(r));const i=or(r),o=O_(i,e),h=await new c1(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=10*60*1e3;class y1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!v1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!j_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Rn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=g1&&this.cachedEventUids.clear(),this.cachedEventUids.has(gy(e))}saveEventToCache(e){this.cachedEventUids.add(gy(e)),this.lastProcessedEventTime=Date.now()}}function gy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function j_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function v1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(r,e={}){return Bn(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E1=/^https?/;async function T1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await _1(r);for(const t of e)try{if(I1(t))return}catch{}sr(r,"unauthorized-domain")}function I1(r){const e=_c(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!E1.test(t))return!1;if(w1.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=new Al(3e4,6e4);function yy(){const r=kt().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function S1(r){return new Promise((e,t)=>{var i,o,l;function h(){yy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yy(),t(Rn(r,"network-request-failed"))},timeout:x1.get()})}if(!((o=(i=kt().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=kt().gapi)===null||l===void 0)&&l.load)h();else{const f=__("iframefcb");return kt()[f]=()=>{gapi.load?h():t(Rn(r,"network-request-failed"))},Uf(`${Qx()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw lc=null,e})}let lc=null;function C1(r){return lc=lc||S1(r),lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=new Al(5e3,15e3),R1="__/auth/iframe",P1="emulator/auth/iframe",b1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N1(r){const e=r.config;ce(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?jf(e,P1):`https://${r.config.authDomain}/${R1}`,i={apiKey:e.apiKey,appName:r.name,v:ua},o=k1.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${la(i).slice(1)}`}async function D1(r){const e=await C1(r),t=kt().gapi;return ce(t,r,"internal-error"),e.open({where:document.body,url:N1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:b1,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Rn(r,"network-request-failed"),f=kt().setTimeout(()=>{l(h)},A1.get());function g(){kt().clearTimeout(f),o(i)}i.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},O1=500,L1=600,j1="_blank",M1="http://localhost";class vy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function F1(r,e,t,i=O1,o=L1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g=Object.assign(Object.assign({},V1),{width:i.toString(),height:o.toString(),top:l,left:h}),_=an().toLowerCase();t&&(f=d_(_)?j1:t),c_(_)&&(e=e||M1,g.scrollbars="yes");const E=Object.entries(g).reduce((C,[j,W])=>`${C}${j}=${W},`,"");if(Fx(_)&&f!=="_self")return U1(e||"",f),new vy(null);const T=window.open(e||"",f,E);ce(T,r,"popup-blocked");try{T.focus()}catch{}return new vy(T)}function U1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="__/auth/handler",B1="emulator/auth/handler",H1=encodeURIComponent("fac");async function _y(r,e,t,i,o,l){ce(r.config.authDomain,r,"auth-domain-config-required"),ce(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ua,eventId:o};if(e instanceof Bf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",oI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(e instanceof ca){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const g=await r._getAppCheckToken(),_=g?`#${H1}=${encodeURIComponent(g)}`:"";return`${$1(r)}?${la(f).slice(1)}${_}`}function $1({config:r}){return r.emulator?jf(r,B1):`https://${r.authDomain}/${z1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="webStorageSupport";class W1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b_,this._completeRedirectFn=m1,this._overrideRedirectResult=d1}async _openPopup(e,t,i,o){var l;mi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await _y(e,t,i,_c(),o);return F1(e,h,Hf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await _y(e,t,i,_c(),o);return US(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(mi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await D1(e),i=new y1(e);return t.register("authEvent",o=>(ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qd,{type:qd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[qd];h!==void 0&&t(!!h),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=T1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return y_()||h_()||Ff()}}const q1=W1;var wy="@firebase/auth",Ey="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q1(r){Jo(new Ys("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;ce(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v_(r)},_=new Wx(i,o,l,g);return oS(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Jo(new Ys("auth-internal",e=>{const t=or(e.getProvider("auth").getImmediate());return(i=>new G1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ls(wy,Ey,K1(r)),ls(wy,Ey,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=5*60,J1=qv("authIdTokenMaxAge")||Y1;let Ty=null;const X1=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>J1)return;const o=t==null?void 0:t.token;Ty!==o&&(Ty=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function M_(r=Xv()){const e=Nf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=sS(r,{popupRedirectResolver:q1,persistence:[QS,jS,b_]}),i=qv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=X1(l.toString());NS(t,h,()=>h(t.currentUser)),kS(t,f=>h(f))}}const o=$v("auth");return o&&aS(t,`http://${o}`),t}function Z1(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}qx({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Rn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",Z1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q1("Browser");var Iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,F_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,S){function x(){}x.prototype=S.prototype,b.D=S.prototype,b.prototype=new x,b.prototype.constructor=b,b.C=function(k,N,L){for(var R=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)R[ue-2]=arguments[ue];return S.prototype[N].apply(k,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,S,x){x||(x=0);var k=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)k[N]=S.charCodeAt(x++)|S.charCodeAt(x++)<<8|S.charCodeAt(x++)<<16|S.charCodeAt(x++)<<24;else for(N=0;16>N;++N)k[N]=S[x++]|S[x++]<<8|S[x++]<<16|S[x++]<<24;S=b.g[0],x=b.g[1],N=b.g[2];var L=b.g[3],R=S+(L^x&(N^L))+k[0]+3614090360&4294967295;S=x+(R<<7&4294967295|R>>>25),R=L+(N^S&(x^N))+k[1]+3905402710&4294967295,L=S+(R<<12&4294967295|R>>>20),R=N+(x^L&(S^x))+k[2]+606105819&4294967295,N=L+(R<<17&4294967295|R>>>15),R=x+(S^N&(L^S))+k[3]+3250441966&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(L^x&(N^L))+k[4]+4118548399&4294967295,S=x+(R<<7&4294967295|R>>>25),R=L+(N^S&(x^N))+k[5]+1200080426&4294967295,L=S+(R<<12&4294967295|R>>>20),R=N+(x^L&(S^x))+k[6]+2821735955&4294967295,N=L+(R<<17&4294967295|R>>>15),R=x+(S^N&(L^S))+k[7]+4249261313&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(L^x&(N^L))+k[8]+1770035416&4294967295,S=x+(R<<7&4294967295|R>>>25),R=L+(N^S&(x^N))+k[9]+2336552879&4294967295,L=S+(R<<12&4294967295|R>>>20),R=N+(x^L&(S^x))+k[10]+4294925233&4294967295,N=L+(R<<17&4294967295|R>>>15),R=x+(S^N&(L^S))+k[11]+2304563134&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(L^x&(N^L))+k[12]+1804603682&4294967295,S=x+(R<<7&4294967295|R>>>25),R=L+(N^S&(x^N))+k[13]+4254626195&4294967295,L=S+(R<<12&4294967295|R>>>20),R=N+(x^L&(S^x))+k[14]+2792965006&4294967295,N=L+(R<<17&4294967295|R>>>15),R=x+(S^N&(L^S))+k[15]+1236535329&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(N^L&(x^N))+k[1]+4129170786&4294967295,S=x+(R<<5&4294967295|R>>>27),R=L+(x^N&(S^x))+k[6]+3225465664&4294967295,L=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(L^S))+k[11]+643717713&4294967295,N=L+(R<<14&4294967295|R>>>18),R=x+(L^S&(N^L))+k[0]+3921069994&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(N^L&(x^N))+k[5]+3593408605&4294967295,S=x+(R<<5&4294967295|R>>>27),R=L+(x^N&(S^x))+k[10]+38016083&4294967295,L=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(L^S))+k[15]+3634488961&4294967295,N=L+(R<<14&4294967295|R>>>18),R=x+(L^S&(N^L))+k[4]+3889429448&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(N^L&(x^N))+k[9]+568446438&4294967295,S=x+(R<<5&4294967295|R>>>27),R=L+(x^N&(S^x))+k[14]+3275163606&4294967295,L=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(L^S))+k[3]+4107603335&4294967295,N=L+(R<<14&4294967295|R>>>18),R=x+(L^S&(N^L))+k[8]+1163531501&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(N^L&(x^N))+k[13]+2850285829&4294967295,S=x+(R<<5&4294967295|R>>>27),R=L+(x^N&(S^x))+k[2]+4243563512&4294967295,L=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(L^S))+k[7]+1735328473&4294967295,N=L+(R<<14&4294967295|R>>>18),R=x+(L^S&(N^L))+k[12]+2368359562&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(x^N^L)+k[5]+4294588738&4294967295,S=x+(R<<4&4294967295|R>>>28),R=L+(S^x^N)+k[8]+2272392833&4294967295,L=S+(R<<11&4294967295|R>>>21),R=N+(L^S^x)+k[11]+1839030562&4294967295,N=L+(R<<16&4294967295|R>>>16),R=x+(N^L^S)+k[14]+4259657740&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(x^N^L)+k[1]+2763975236&4294967295,S=x+(R<<4&4294967295|R>>>28),R=L+(S^x^N)+k[4]+1272893353&4294967295,L=S+(R<<11&4294967295|R>>>21),R=N+(L^S^x)+k[7]+4139469664&4294967295,N=L+(R<<16&4294967295|R>>>16),R=x+(N^L^S)+k[10]+3200236656&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(x^N^L)+k[13]+681279174&4294967295,S=x+(R<<4&4294967295|R>>>28),R=L+(S^x^N)+k[0]+3936430074&4294967295,L=S+(R<<11&4294967295|R>>>21),R=N+(L^S^x)+k[3]+3572445317&4294967295,N=L+(R<<16&4294967295|R>>>16),R=x+(N^L^S)+k[6]+76029189&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(x^N^L)+k[9]+3654602809&4294967295,S=x+(R<<4&4294967295|R>>>28),R=L+(S^x^N)+k[12]+3873151461&4294967295,L=S+(R<<11&4294967295|R>>>21),R=N+(L^S^x)+k[15]+530742520&4294967295,N=L+(R<<16&4294967295|R>>>16),R=x+(N^L^S)+k[2]+3299628645&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(N^(x|~L))+k[0]+4096336452&4294967295,S=x+(R<<6&4294967295|R>>>26),R=L+(x^(S|~N))+k[7]+1126891415&4294967295,L=S+(R<<10&4294967295|R>>>22),R=N+(S^(L|~x))+k[14]+2878612391&4294967295,N=L+(R<<15&4294967295|R>>>17),R=x+(L^(N|~S))+k[5]+4237533241&4294967295,x=N+(R<<21&4294967295|R>>>11),R=S+(N^(x|~L))+k[12]+1700485571&4294967295,S=x+(R<<6&4294967295|R>>>26),R=L+(x^(S|~N))+k[3]+2399980690&4294967295,L=S+(R<<10&4294967295|R>>>22),R=N+(S^(L|~x))+k[10]+4293915773&4294967295,N=L+(R<<15&4294967295|R>>>17),R=x+(L^(N|~S))+k[1]+2240044497&4294967295,x=N+(R<<21&4294967295|R>>>11),R=S+(N^(x|~L))+k[8]+1873313359&4294967295,S=x+(R<<6&4294967295|R>>>26),R=L+(x^(S|~N))+k[15]+4264355552&4294967295,L=S+(R<<10&4294967295|R>>>22),R=N+(S^(L|~x))+k[6]+2734768916&4294967295,N=L+(R<<15&4294967295|R>>>17),R=x+(L^(N|~S))+k[13]+1309151649&4294967295,x=N+(R<<21&4294967295|R>>>11),R=S+(N^(x|~L))+k[4]+4149444226&4294967295,S=x+(R<<6&4294967295|R>>>26),R=L+(x^(S|~N))+k[11]+3174756917&4294967295,L=S+(R<<10&4294967295|R>>>22),R=N+(S^(L|~x))+k[2]+718787259&4294967295,N=L+(R<<15&4294967295|R>>>17),R=x+(L^(N|~S))+k[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,b.g[2]=b.g[2]+N&4294967295,b.g[3]=b.g[3]+L&4294967295}i.prototype.u=function(b,S){S===void 0&&(S=b.length);for(var x=S-this.blockSize,k=this.B,N=this.h,L=0;L<S;){if(N==0)for(;L<=x;)o(this,b,L),L+=this.blockSize;if(typeof b=="string"){for(;L<S;)if(k[N++]=b.charCodeAt(L++),N==this.blockSize){o(this,k),N=0;break}}else for(;L<S;)if(k[N++]=b[L++],N==this.blockSize){o(this,k),N=0;break}}this.h=N,this.o+=S},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;var x=8*this.o;for(S=b.length-8;S<b.length;++S)b[S]=x&255,x/=256;for(this.u(b),b=Array(16),S=x=0;4>S;++S)for(var k=0;32>k;k+=8)b[x++]=this.g[S]>>>k&255;return b};function l(b,S){var x=f;return Object.prototype.hasOwnProperty.call(x,b)?x[b]:x[b]=S(b)}function h(b,S){this.h=S;for(var x=[],k=!0,N=b.length-1;0<=N;N--){var L=b[N]|0;k&&L==S||(x[N]=L,k=!1)}this.g=x}var f={};function g(b){return-128<=b&&128>b?l(b,function(S){return new h([S|0],0>S?-1:0)}):new h([b|0],0>b?-1:0)}function _(b){if(isNaN(b)||!isFinite(b))return T;if(0>b)return F(_(-b));for(var S=[],x=1,k=0;b>=x;k++)S[k]=b/x|0,x*=4294967296;return new h(S,0)}function E(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return F(E(b.substring(1),S));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=_(Math.pow(S,8)),k=T,N=0;N<b.length;N+=8){var L=Math.min(8,b.length-N),R=parseInt(b.substring(N,N+L),S);8>L?(L=_(Math.pow(S,L)),k=k.j(L).add(_(R))):(k=k.j(x),k=k.add(_(R)))}return k}var T=g(0),C=g(1),j=g(16777216);r=h.prototype,r.m=function(){if(H(this))return-F(this).m();for(var b=0,S=1,x=0;x<this.g.length;x++){var k=this.i(x);b+=(0<=k?k:4294967296+k)*S,S*=4294967296}return b},r.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(W(this))return"0";if(H(this))return"-"+F(this).toString(b);for(var S=_(Math.pow(b,6)),x=this,k="";;){var N=ve(x,S).g;x=ee(x,N.j(S));var L=((0<x.g.length?x.g[0]:x.h)>>>0).toString(b);if(x=N,W(x))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},r.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function W(b){if(b.h!=0)return!1;for(var S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function H(b){return b.h==-1}r.l=function(b){return b=ee(this,b),H(b)?-1:W(b)?0:1};function F(b){for(var S=b.g.length,x=[],k=0;k<S;k++)x[k]=~b.g[k];return new h(x,~b.h).add(C)}r.abs=function(){return H(this)?F(this):this},r.add=function(b){for(var S=Math.max(this.g.length,b.g.length),x=[],k=0,N=0;N<=S;N++){var L=k+(this.i(N)&65535)+(b.i(N)&65535),R=(L>>>16)+(this.i(N)>>>16)+(b.i(N)>>>16);k=R>>>16,L&=65535,R&=65535,x[N]=R<<16|L}return new h(x,x[x.length-1]&-2147483648?-1:0)};function ee(b,S){return b.add(F(S))}r.j=function(b){if(W(this)||W(b))return T;if(H(this))return H(b)?F(this).j(F(b)):F(F(this).j(b));if(H(b))return F(this.j(F(b)));if(0>this.l(j)&&0>b.l(j))return _(this.m()*b.m());for(var S=this.g.length+b.g.length,x=[],k=0;k<2*S;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<b.g.length;N++){var L=this.i(k)>>>16,R=this.i(k)&65535,ue=b.i(N)>>>16,tt=b.i(N)&65535;x[2*k+2*N]+=R*tt,re(x,2*k+2*N),x[2*k+2*N+1]+=L*tt,re(x,2*k+2*N+1),x[2*k+2*N+1]+=R*ue,re(x,2*k+2*N+1),x[2*k+2*N+2]+=L*ue,re(x,2*k+2*N+2)}for(k=0;k<S;k++)x[k]=x[2*k+1]<<16|x[2*k];for(k=S;k<2*S;k++)x[k]=0;return new h(x,0)};function re(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function X(b,S){this.g=b,this.h=S}function ve(b,S){if(W(S))throw Error("division by zero");if(W(b))return new X(T,T);if(H(b))return S=ve(F(b),S),new X(F(S.g),F(S.h));if(H(S))return S=ve(b,F(S)),new X(F(S.g),S.h);if(30<b.g.length){if(H(b)||H(S))throw Error("slowDivide_ only works with positive integers.");for(var x=C,k=S;0>=k.l(b);)x=le(x),k=le(k);var N=Se(x,1),L=Se(k,1);for(k=Se(k,2),x=Se(x,2);!W(k);){var R=L.add(k);0>=R.l(b)&&(N=N.add(x),L=R),k=Se(k,1),x=Se(x,1)}return S=ee(b,N.j(S)),new X(N,S)}for(N=T;0<=b.l(S);){for(x=Math.max(1,Math.floor(b.m()/S.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=_(x),R=L.j(S);H(R)||0<R.l(b);)x-=k,L=_(x),R=L.j(S);W(L)&&(L=C),N=N.add(L),b=ee(b,R)}return new X(N,b)}r.A=function(b){return ve(this,b).h},r.and=function(b){for(var S=Math.max(this.g.length,b.g.length),x=[],k=0;k<S;k++)x[k]=this.i(k)&b.i(k);return new h(x,this.h&b.h)},r.or=function(b){for(var S=Math.max(this.g.length,b.g.length),x=[],k=0;k<S;k++)x[k]=this.i(k)|b.i(k);return new h(x,this.h|b.h)},r.xor=function(b){for(var S=Math.max(this.g.length,b.g.length),x=[],k=0;k<S;k++)x[k]=this.i(k)^b.i(k);return new h(x,this.h^b.h)};function le(b){for(var S=b.g.length+1,x=[],k=0;k<S;k++)x[k]=b.i(k)<<1|b.i(k-1)>>>31;return new h(x,b.h)}function Se(b,S){var x=S>>5;S%=32;for(var k=b.g.length-x,N=[],L=0;L<k;L++)N[L]=0<S?b.i(L+x)>>>S|b.i(L+x+1)<<32-S:b.i(L+x);return new h(N,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,F_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,us=h}).apply(typeof Iy<"u"?Iy:typeof self<"u"?self:typeof window<"u"?window:{});var Xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var U_,el,z_,uc,lf,B_,H_,$_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){return u==Array.prototype||u==Object.prototype||(u[p]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xu=="object"&&Xu];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var y=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var M=u[I];if(!(M in y))break e;y=y[M]}u=u[u.length-1],I=y[u],p=p(I),p!=I&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var y=0,I=!1,M={next:function(){if(!I&&y<u.length){var $=y++;return{value:p($,u[$]),done:!1}}return I=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function _(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,y){return u.call.apply(u.bind,arguments)}function T(u,p,y){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,I),u.apply(p,M)}}return function(){return u.apply(p,arguments)}}function C(u,p,y){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:T,C.apply(null,arguments)}function j(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function W(u,p){function y(){}y.prototype=p.prototype,u.aa=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(I,M,$){for(var ae=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)ae[nt-2]=arguments[nt];return p.prototype[M].apply(I,ae)}}function H(u){const p=u.length;if(0<p){const y=Array(p);for(let I=0;I<p;I++)y[I]=u[I];return y}return[]}function F(u,p){for(let y=1;y<arguments.length;y++){const I=arguments[y];if(g(I)){const M=u.length||0,$=I.length||0;u.length=M+$;for(let ae=0;ae<$;ae++)u[M+ae]=I[ae]}else u.push(I)}}class ee{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function re(u){return/^[\s\xa0]*$/.test(u)}function X(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function ve(u){return ve[" "](u),u}ve[" "]=function(){};var le=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function Se(u,p,y){for(const I in u)p.call(y,u[I],I,u)}function b(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function S(u){const p={};for(const y in u)p[y]=u[y];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,p){let y,I;for(let M=1;M<arguments.length;M++){I=arguments[M];for(y in I)u[y]=I[y];for(let $=0;$<x.length;$++)y=x[$],Object.prototype.hasOwnProperty.call(I,y)&&(u[y]=I[y])}}function N(u){var p=1;u=u.split(":");const y=[];for(;0<p&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function L(u){f.setTimeout(()=>{throw u},0)}function R(){var u=he;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ue{constructor(){this.h=this.g=null}add(p,y){const I=tt.get();I.set(p,y),this.h?this.h.next=I:this.g=I,this.h=I}}var tt=new ee(()=>new it,u=>u.reset());class it{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,se=!1,he=new ue,oe=()=>{const u=f.Promise.resolve(void 0);pe=()=>{u.then(V)}};var V=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){L(y)}var p=tt;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}se=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var xe=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};f.addEventListener("test",y,p),f.removeEventListener("test",y,p)}catch{}return u}();function De(u,p){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(le){e:{try{ve(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ce[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&De.aa.h.call(this)}}W(De,me);var Ce={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),te=0;function ne(u,p,y,I,M){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!I,this.ha=M,this.key=++te,this.da=this.fa=!1}function we(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Je(u){this.src=u,this.g={},this.h=0}Je.prototype.add=function(u,p,y,I,M){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var ae=Ue(u,p,I,M);return-1<ae?(p=u[ae],y||(p.fa=!1)):(p=new ne(p,this.src,$,!!I,M),p.fa=y,u.push(p)),p};function yt(u,p){var y=p.type;if(y in u.g){var I=u.g[y],M=Array.prototype.indexOf.call(I,p,void 0),$;($=0<=M)&&Array.prototype.splice.call(I,M,1),$&&(we(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Ue(u,p,y,I){for(var M=0;M<u.length;++M){var $=u[M];if(!$.da&&$.listener==p&&$.capture==!!y&&$.ha==I)return M}return-1}var un="closure_lm_"+(1e6*Math.random()|0),Pn={};function At(u,p,y,I,M){if(Array.isArray(p)){for(var $=0;$<p.length;$++)At(u,p[$],y,I,M);return null}return y=Oe(y),u&&u[je]?u.K(p,y,_(I)?!!I.capture:!1,M):ar(u,p,y,!1,I,M)}function ar(u,p,y,I,M,$){if(!p)throw Error("Invalid event type");var ae=_(M)?!!M.capture:!!M,nt=bn(u);if(nt||(u[un]=nt=new Je(u)),y=nt.add(p,y,I,ae,$),y.proxy)return y;if(I=Hn(),y.proxy=I,I.src=u,I.listener=y,u.addEventListener)xe||(M=ae),M===void 0&&(M=!1),u.addEventListener(p.toString(),I,M);else if(u.attachEvent)u.attachEvent(gn(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Hn(){function u(y){return p.call(u.src,u.listener,y)}const p=Ir;return u}function mn(u,p,y,I,M){if(Array.isArray(p))for(var $=0;$<p.length;$++)mn(u,p[$],y,I,M);else I=_(I)?!!I.capture:!!I,y=Oe(y),u&&u[je]?(u=u.i,p=String(p).toString(),p in u.g&&($=u.g[p],y=Ue($,y,I,M),-1<y&&(we($[y]),Array.prototype.splice.call($,y,1),$.length==0&&(delete u.g[p],u.h--)))):u&&(u=bn(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Ue(p,y,I,M)),(y=-1<u?p[u]:null)&&Vt(y))}function Vt(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[je])yt(p.i,u);else{var y=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(y,I,u.capture):p.detachEvent?p.detachEvent(gn(y),I):p.addListener&&p.removeListener&&p.removeListener(I),(y=bn(p))?(yt(y,u),y.h==0&&(y.src=null,p[un]=null)):we(u)}}}function gn(u){return u in Pn?Pn[u]:Pn[u]="on"+u}function Ir(u,p){if(u.da)u=!0;else{p=new De(p,this);var y=u.listener,I=u.ha||u.src;u.fa&&Vt(u),u=y.call(I,p)}return u}function bn(u){return u=u[un],u instanceof Je?u:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oe(u){return typeof u=="function"?u:(u[Ee]||(u[Ee]=function(p){return u.handleEvent(p)}),u[Ee])}function dt(){q.call(this),this.i=new Je(this),this.M=this,this.F=null}W(dt,q),dt.prototype[je]=!0,dt.prototype.removeEventListener=function(u,p,y,I){mn(this,u,p,y,I)};function ft(u,p){var y,I=u.F;if(I)for(y=[];I;I=I.F)y.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new me(p,u);else if(p instanceof me)p.target=p.target||u;else{var M=p;p=new me(I,u),k(p,M)}if(M=!0,y)for(var $=y.length-1;0<=$;$--){var ae=p.g=y[$];M=$n(ae,I,!0,p)&&M}if(ae=p.g=u,M=$n(ae,I,!0,p)&&M,M=$n(ae,I,!1,p)&&M,y)for($=0;$<y.length;$++)ae=p.g=y[$],M=$n(ae,I,!1,p)&&M}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var y=u.g[p],I=0;I<y.length;I++)we(y[I]);delete u.g[p],u.h--}}this.F=null},dt.prototype.K=function(u,p,y,I){return this.i.add(String(u),p,!1,y,I)},dt.prototype.L=function(u,p,y,I){return this.i.add(String(u),p,!0,y,I)};function $n(u,p,y,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,$=0;$<p.length;++$){var ae=p[$];if(ae&&!ae.da&&ae.capture==y){var nt=ae.listener,Ot=ae.ha||ae.src;ae.fa&&yt(u.i,ae),M=nt.call(Ot,I)!==!1&&M}}return M&&!I.defaultPrevented}function qr(u,p,y){if(typeof u=="function")y&&(u=C(u,y));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function kn(u){u.g=qr(()=>{u.g=null,u.i&&(u.i=!1,kn(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Wn extends q{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:kn(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xr(u){q.call(this),this.h=u,this.g={}}W(xr,q);var Sr=[];function Ei(u){Se(u.g,function(p,y){this.g.hasOwnProperty(y)&&Vt(p)},u),u.g={}}xr.prototype.N=function(){xr.aa.N.call(this),Ei(this)},xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ti=f.JSON.stringify,Ii=f.JSON.parse,Cr=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function qn(){}qn.prototype.h=null;function Ar(u){return u.h||(u.h=u.i())}function Gn(){}var Xt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nn(){me.call(this,"d")}W(Nn,me);function Gr(){me.call(this,"c")}W(Gr,me);var Kn={},Is=null;function Kr(){return Is=Is||new dt}Kn.La="serverreachability";function xs(u){me.call(this,Kn.La,u)}W(xs,me);function lr(u){const p=Kr();ft(p,new xs(p))}Kn.STAT_EVENT="statevent";function Ss(u,p){me.call(this,Kn.STAT_EVENT,u),this.stat=p}W(Ss,me);function pt(u){const p=Kr();ft(p,new Ss(p,u))}Kn.Ma="timingevent";function xi(u,p){me.call(this,Kn.Ma,u),this.size=p}W(xi,me);function Dn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Qr(){this.g=!0}Qr.prototype.xa=function(){this.g=!1};function Yr(u,p,y,I,M,$){u.info(function(){if(u.g)if($)for(var ae="",nt=$.split("&"),Ot=0;Ot<nt.length;Ot++){var Qe=nt[Ot].split("=");if(1<Qe.length){var Ut=Qe[0];Qe=Qe[1];var Rt=Ut.split("_");ae=2<=Rt.length&&Rt[1]=="type"?ae+(Ut+"="+Qe+"&"):ae+(Ut+"=redacted&")}}else ae=null;else ae=$;return"XMLHTTP REQ ("+I+") [attempt "+M+"]: "+p+`
`+y+`
`+ae})}function G(u,p,y,I,M,$,ae){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+M+"]: "+p+`
`+y+`
`+$+" "+ae})}function ke(u,p,y,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ae(u,y)+(I?" "+I:"")})}function Ne(u,p){u.info(function(){return"TIMEOUT: "+p})}Qr.prototype.info=function(){};function Ae(u,p){if(!u.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var I=y[u];if(!(2>I.length)){var M=I[1];if(Array.isArray(M)&&!(1>M.length)){var $=M[0];if($!="noop"&&$!="stop"&&$!="close")for(var ae=1;ae<M.length;ae++)M[ae]=""}}}}return Ti(y)}catch{return p}}var He={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Et={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rt;function qe(){}W(qe,qn),qe.prototype.g=function(){return new XMLHttpRequest},qe.prototype.i=function(){return{}},rt=new qe;function Ge(u,p,y,I){this.j=u,this.i=p,this.l=y,this.R=I||1,this.U=new xr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yn}function yn(){this.i=null,this.g="",this.h=!1}var Si={},Ci={};function Ai(u,p,y){u.L=1,u.v=Ni(On(p)),u.m=y,u.P=!0,ma(u,null)}function ma(u,p){u.F=Date.now(),ot(u),u.A=On(u.v);var y=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Vi(y.i,"t",I),u.C=0,y=u.j.J,u.h=new yn,u.g=Zl(u.j,y?p:null,!u.m),0<u.O&&(u.M=new Wn(C(u.Y,u,u.g),u.O)),p=u.U,y=u.g,I=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Sr[0]=M.toString()),M=Sr);for(var $=0;$<M.length;$++){var ae=At(y,M[$],I||p.handleEvent,!1,p.h||p);if(!ae)break;p.g[ae.key]=ae}p=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),lr(),Yr(u.i,u.u,u.A,u.l,u.R,u.m)}Ge.prototype.ca=function(u){u=u.target;const p=this.M;p&&_n(u)==3?p.j():this.Y(u)},Ge.prototype.Y=function(u){try{if(u==this.g)e:{const Rt=_n(this.g);var p=this.g.Ba();const Jn=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||Ea(this.g)))){this.J||Rt!=4||p==7||(p==8||0>=Jn?lr(3):lr(2)),Cs(this);var y=this.g.Z();this.X=y;t:if(Ll(this)){var I=Ea(this.g);u="";var M=I.length,$=_n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qn(this),Ri(this);var ae="";break t}this.h.i=new f.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!($&&p==M-1)});I.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=y==200,G(this.i,this.u,this.A,this.l,this.R,Rt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,Ot=this.g;if((nt=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(nt)){var Qe=nt;break t}}Qe=null}if(y=Qe)ke(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ga(this,y);else{this.o=!1,this.s=3,pt(12),Qn(this),Ri(this);break e}}if(this.P){y=!0;let jn;for(;!this.J&&this.C<ae.length;)if(jn=ah(this,ae),jn==Ci){Rt==4&&(this.s=4,pt(14),y=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==Si){this.s=4,pt(15),ke(this.i,this.l,ae,"[Invalid Chunk]"),y=!1;break}else ke(this.i,this.l,jn,null),ga(this,jn);if(Ll(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||ae.length!=0||this.h.h||(this.s=1,pt(16),y=!1),this.o=this.o&&y,!y)ke(this.i,this.l,ae,"[Invalid Chunked Response]"),Qn(this),Ri(this);else if(0<ae.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Ia(Ut),Ut.M=!0,pt(11))}}else ke(this.i,this.l,ae,null),ga(this,ae);Rt==4&&Qn(this),this.o&&!this.J&&(Rt==4?mo(this.j,this):(this.o=!1,ot(this)))}else uo(this.g),y==400&&0<ae.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Qn(this),Ri(this)}}}catch{}finally{}};function Ll(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ah(u,p){var y=u.C,I=p.indexOf(`
`,y);return I==-1?Ci:(y=Number(p.substring(y,I)),isNaN(y)?Si:(I+=1,I+y>p.length?Ci:(p=p.slice(I,I+y),u.C=I+y,p)))}Ge.prototype.cancel=function(){this.J=!0,Qn(this)};function ot(u){u.S=Date.now()+u.I,jl(u,u.I)}function jl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Dn(C(u.ba,u),p)}function Cs(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Ge.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ne(this.i,this.A),this.L!=2&&(lr(),pt(17)),Qn(this),this.s=2,Ri(this)):jl(this,this.S-u)};function Ri(u){u.j.G==0||u.J||mo(u.j,u)}function Qn(u){Cs(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Ei(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function ga(u,p){try{var y=u.j;if(y.G!=0&&(y.g==u||cn(y.h,u))){if(!u.K&&cn(y.h,u)&&y.G==3){try{var I=y.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var M=I;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)po(y),fr(y);else break e;fo(y),pt(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=Dn(C(y.Za,y),6e3));if(1>=Fl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ti(y,11)}else if((u.K||y.g==u)&&po(y),!re(p))for(M=y.Da.g.parse(p),p=0;p<M.length;p++){let Qe=M[p];if(y.T=Qe[0],Qe=Qe[1],y.G==2)if(Qe[0]=="c"){y.K=Qe[1],y.ia=Qe[2];const Ut=Qe[3];Ut!=null&&(y.la=Ut,y.j.info("VER="+y.la));const Rt=Qe[4];Rt!=null&&(y.Aa=Rt,y.j.info("SVER="+y.Aa));const Jn=Qe[5];Jn!=null&&typeof Jn=="number"&&0<Jn&&(I=1.5*Jn,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const jn=u.g;if(jn){const Ds=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ds){var $=I.h;$.g||Ds.indexOf("spdy")==-1&&Ds.indexOf("quic")==-1&&Ds.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ya($,$.h),$.h=null))}if(I.D){const yo=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;yo&&(I.ya=yo,st(I.I,I.D,yo))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var ae=u;if(I.qa=Xl(I,I.J?I.ia:null,I.W),ae.K){Ul(I.h,ae);var nt=ae,Ot=I.L;Ot&&(nt.I=Ot),nt.B&&(Cs(nt),ot(nt)),I.g=ae}else Ns(I);0<y.i.length&&kr(y)}else Qe[0]!="stop"&&Qe[0]!="close"||ti(y,7);else y.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?ti(y,7):qt(y):Qe[0]!="noop"&&y.l&&y.l.ta(Qe),y.v=0)}}lr(4)}catch{}}var Ml=class{constructor(u,p){this.g=u,this.map=p}};function As(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Fl(u){return u.h?1:u.g?u.g.size:0}function cn(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function ya(u,p){u.g?u.g.add(p):u.h=p}function Ul(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}As.prototype.cancel=function(){if(this.i=zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function zl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.D);return p}return H(u.i)}function io(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],y=u.length,I=0;I<y;I++)p.push(u[I]);return p}p=[],y=0;for(I in u)p[y++]=u[I];return p}function so(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var y=0;y<u;y++)p.push(y);return p}p=[],y=0;for(const I in u)p[y++]=I;return p}}}function Pi(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var y=so(u),I=io(u),M=I.length,$=0;$<M;$++)p.call(void 0,I[$],y&&y[$],u)}var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lh(u,p){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var I=u[y].indexOf("="),M=null;if(0<=I){var $=u[y].substring(0,I);M=u[y].substring(I+1)}else $=u[y];p($,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Jr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Jr){this.h=u.h,Ps(this,u.j),this.o=u.o,this.g=u.g,bi(this,u.s),this.l=u.l;var p=u.i,y=new Rr;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),ki(this,y),this.m=u.m}else u&&(p=String(u).match(Rs))?(this.h=!1,Ps(this,p[1]||"",!0),this.o=Ke(p[2]||""),this.g=Ke(p[3]||"",!0),bi(this,p[4]),this.l=Ke(p[5]||"",!0),ki(this,p[6]||"",!0),this.m=Ke(p[7]||"")):(this.h=!1,this.i=new Rr(null,this.h))}Jr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Di(p,oo,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Di(p,oo,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Di(y,y.charAt(0)=="/"?$l:Hl,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Di(y,va)),u.join("")};function On(u){return new Jr(u)}function Ps(u,p,y){u.j=y?Ke(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function bi(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function ki(u,p,y){p instanceof Rr?(u.i=p,Pr(u.i,u.h)):(y||(p=Di(p,Wl)),u.i=new Rr(p,u.h))}function st(u,p,y){u.i.set(p,y)}function Ni(u){return st(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ke(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Di(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,Bl),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Bl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var oo=/[#\/\?@]/g,Hl=/[#\?:]/g,$l=/[#\?]/g,Wl=/[#\?@]/g,va=/#/g;function Rr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Wt(u){u.g||(u.g=new Map,u.h=0,u.i&&lh(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=Rr.prototype,r.add=function(u,p){Wt(this),this.i=null,u=Yn(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function ur(u,p){Wt(u),p=Yn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function cr(u,p){return Wt(u),p=Yn(u,p),u.g.has(p)}r.forEach=function(u,p){Wt(this),this.g.forEach(function(y,I){y.forEach(function(M){u.call(p,M,I,this)},this)},this)},r.na=function(){Wt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let I=0;I<p.length;I++){const M=u[I];for(let $=0;$<M.length;$++)y.push(p[I])}return y},r.V=function(u){Wt(this);let p=[];if(typeof u=="string")cr(this,u)&&(p=p.concat(this.g.get(Yn(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)p=p.concat(u[y])}return p},r.set=function(u,p){return Wt(this),this.i=null,u=Yn(this,u),cr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Vi(u,p,y){ur(u,p),0<y.length&&(u.i=null,u.g.set(Yn(u,p),H(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var I=p[y];const $=encodeURIComponent(String(I)),ae=this.V(I);for(I=0;I<ae.length;I++){var M=$;ae[I]!==""&&(M+="="+encodeURIComponent(String(ae[I]))),u.push(M)}}return this.i=u.join("&")};function Yn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Pr(u,p){p&&!u.j&&(Wt(u),u.i=null,u.g.forEach(function(y,I){var M=I.toLowerCase();I!=M&&(ur(this,I),Vi(this,M,y))},u)),u.j=p}function uh(u,p){const y=new Qr;if(f.Image){const I=new Image;I.onload=j(vn,y,"TestLoadImage: loaded",!0,p,I),I.onerror=j(vn,y,"TestLoadImage: error",!1,p,I),I.onabort=j(vn,y,"TestLoadImage: abort",!1,p,I),I.ontimeout=j(vn,y,"TestLoadImage: timeout",!1,p,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function ql(u,p){const y=new Qr,I=new AbortController,M=setTimeout(()=>{I.abort(),vn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then($=>{clearTimeout(M),$.ok?vn(y,"TestPingServer: ok",!0,p):vn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),vn(y,"TestPingServer: error",!1,p)})}function vn(u,p,y,I,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),I(y)}catch{}}function ch(){this.g=new Cr}function Gl(u,p,y){const I=y||"";try{Pi(u,function(M,$){let ae=M;_(M)&&(ae=Ti(M)),p.push(I+$+"="+encodeURIComponent(ae))})}catch(M){throw p.push(I+"type="+encodeURIComponent("_badmap")),M}}function Xr(u){this.l=u.Ub||null,this.j=u.eb||!1}W(Xr,qn),Xr.prototype.g=function(){return new bs(this.l,this.j)},Xr.prototype.i=function(u){return function(){return u}}({});function bs(u,p){dt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}W(bs,dt),r=bs.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,dr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,dr(this)),this.g&&(this.readyState=3,dr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?hr(this):dr(this),this.readyState==3&&Kl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,hr(this))},r.Qa=function(u){this.g&&(this.response=u,hr(this))},r.ga=function(){this.g&&hr(this)};function hr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,dr(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function dr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Zr(u){let p="";return Se(u,function(y,I){p+=I,p+=":",p+=y,p+=`\r
`}),p}function Oi(u,p,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Zr(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):st(u,p,y))}function mt(u){dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}W(mt,dt);var hh=/^https?$/i,_a=["POST","PUT"];r=mt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rt.g(),this.v=this.o?Ar(this.o):Ar(rt),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch($){ks(this,$);return}if(u=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var M in I)y.set(M,I[M]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())y.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),M=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(_a,p,void 0))||I||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ae]of y)this.g.setRequestHeader($,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lo(this),this.u=!0,this.g.send(u),this.u=!1}catch($){ks(this,$)}};function ks(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,ao(u),Ln(u)}function ao(u){u.A||(u.A=!0,ft(u,"complete"),ft(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ft(this,"complete"),ft(this,"abort"),Ln(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ln(this,!0)),mt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?wa(this):this.bb())},r.bb=function(){wa(this)};function wa(u){if(u.h&&typeof h<"u"&&(!u.v[1]||_n(u)!=4||u.Z()!=2)){if(u.u&&_n(u)==4)qr(u.Ea,0,u);else if(ft(u,"readystatechange"),_n(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var I;if(I=ae===0){var M=String(u.D).match(Rs)[1]||null;!M&&f.self&&f.self.location&&(M=f.self.location.protocol.slice(0,-1)),I=!hh.test(M?M.toLowerCase():"")}y=I}if(y)ft(u,"complete"),ft(u,"success");else{u.m=6;try{var $=2<_n(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",ao(u)}}finally{Ln(u)}}}}function Ln(u,p){if(u.g){lo(u);const y=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ft(u,"ready");try{y.onreadystatechange=I}catch{}}}function lo(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function _n(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<_n(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ii(p)}};function Ea(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function uo(u){const p={};u=(u.g&&2<=_n(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(re(u[I]))continue;var y=N(u[I]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const $=p[M]||[];p[M]=$,$.push(y)}b(p,function(I){return I.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function Ta(u){this.Aa=0,this.i=[],this.j=new Qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=br("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=br("baseRetryDelayMs",5e3,u),this.cb=br("retryDelaySeedMs",1e4,u),this.Wa=br("forwardChannelMaxRetries",2,u),this.wa=br("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new As(u&&u.concurrentRequestLimit),this.Da=new ch,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ta.prototype,r.la=8,r.G=1,r.connect=function(u,p,y,I){pt(0),this.W=u,this.H=p||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=Xl(this,null,this.W),kr(this)};function qt(u){if(co(u),u.G==3){var p=u.U++,y=On(u.I);if(st(y,"SID",u.K),st(y,"RID",p),st(y,"TYPE","terminate"),ei(u,y),p=new Ge(u,u.j,p),p.L=2,p.v=Ni(On(y)),y=!1,f.navigator&&f.navigator.sendBeacon)try{y=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&f.Image&&(new Image().src=p.v,y=!0),y||(p.g=Zl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ot(p)}Jl(u)}function fr(u){u.g&&(Ia(u),u.g.cancel(),u.g=null)}function co(u){fr(u),u.u&&(f.clearTimeout(u.u),u.u=null),po(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function kr(u){if(!Vn(u.h)&&!u.s){u.s=!0;var p=u.Ga;pe||oe(),se||(pe(),se=!0),he.add(p,u),u.B=0}}function dh(u,p){return Fl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Dn(C(u.Ga,u,p),Yl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Ge(this,this.j,u);let $=this.o;if(this.S&&($?($=S($),k($,this.S)):$=this.S),this.m!==null||this.O||(M.H=$,$=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Li(this,M,p),y=On(this.I),st(y,"RID",u),st(y,"CVER",22),this.D&&st(y,"X-HTTP-Session-Id",this.D),ei(this,y),$&&(this.O?p="headers="+encodeURIComponent(String(Zr($)))+"&"+p:this.m&&Oi(y,this.m,$)),ya(this.h,M),this.Ua&&st(y,"TYPE","init"),this.P?(st(y,"$req",p),st(y,"SID","null"),M.T=!0,Ai(M,y,null)):Ai(M,y,p),this.G=2}}else this.G==3&&(u?ho(this,u):this.i.length==0||Vn(this.h)||ho(this))};function ho(u,p){var y;p?y=p.l:y=u.U++;const I=On(u.I);st(I,"SID",u.K),st(I,"RID",y),st(I,"AID",u.T),ei(u,I),u.m&&u.o&&Oi(I,u.m,u.o),y=new Ge(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Li(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ya(u.h,y),Ai(y,I,p)}function ei(u,p){u.H&&Se(u.H,function(y,I){st(p,I,y)}),u.l&&Pi({},function(y,I){st(p,I,y)})}function Li(u,p,y){y=Math.min(u.i.length,y);var I=u.l?C(u.l.Na,u.l,u):null;e:{var M=u.i;let $=-1;for(;;){const ae=["count="+y];$==-1?0<y?($=M[0].g,ae.push("ofs="+$)):$=0:ae.push("ofs="+$);let nt=!0;for(let Ot=0;Ot<y;Ot++){let Qe=M[Ot].g;const Ut=M[Ot].map;if(Qe-=$,0>Qe)$=Math.max(0,M[Ot].g-100),nt=!1;else try{Gl(Ut,ae,"req"+Qe+"_")}catch{I&&I(Ut)}}if(nt){I=ae.join("&");break e}}}return u=u.i.splice(0,y),p.D=u,I}function Ns(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;pe||oe(),se||(pe(),se=!0),he.add(p,u),u.v=0}}function fo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Dn(C(u.Fa,u),Yl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Dn(C(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),fr(this),Ql(this))};function Ia(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Ql(u){u.g=new Ge(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=On(u.qa);st(p,"RID","rpc"),st(p,"SID",u.K),st(p,"AID",u.T),st(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&st(p,"TO",u.ja),st(p,"TYPE","xmlhttp"),ei(u,p),u.m&&u.o&&Oi(p,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Ni(On(p)),y.m=null,y.P=!0,ma(y,u)}r.Za=function(){this.C!=null&&(this.C=null,fr(this),fo(this),pt(19))};function po(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function mo(u,p){var y=null;if(u.g==p){po(u),Ia(u),u.g=null;var I=2}else if(cn(u.h,p))y=p.D,Ul(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var M=u.B;I=Kr(),ft(I,new xi(I,y)),kr(u)}else Ns(u);else if(M=p.s,M==3||M==0&&0<p.X||!(I==1&&dh(u,p)||I==2&&fo(u)))switch(y&&0<y.length&&(p=u.h,p.i=p.i.concat(y)),M){case 1:ti(u,5);break;case 4:ti(u,10);break;case 3:ti(u,6);break;default:ti(u,2)}}}function Yl(u,p){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*p}function ti(u,p){if(u.j.info("Error code "+p),p==2){var y=C(u.fb,u),I=u.Xa;const M=!I;I=new Jr(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ps(I,"https"),Ni(I),M?uh(I.toString(),y):ql(I.toString(),y)}else pt(2);u.G=0,u.l&&u.l.sa(p),Jl(u),co(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Jl(u){if(u.G=0,u.ka=[],u.l){const p=zl(u.h);(p.length!=0||u.i.length!=0)&&(F(u.ka,p),F(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function Xl(u,p,y){var I=y instanceof Jr?On(y):new Jr(y);if(I.g!="")p&&(I.g=p+"."+I.g),bi(I,I.s);else{var M=f.location;I=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var $=new Jr(null);I&&Ps($,I),p&&($.g=p),M&&bi($,M),y&&($.l=y),I=$}return y=u.D,p=u.ya,y&&p&&st(I,y,p),st(I,"VER",u.la),ei(u,I),I}function Zl(u,p,y){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new mt(new Xr({eb:y})):new mt(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function xa(){}r=xa.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function go(){}go.prototype.g=function(u,p){return new hn(u,p)};function hn(u,p){dt.call(this),this.g=new Ta(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!re(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!re(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Nr(this)}W(hn,dt),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){qt(this.g)},hn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Ti(u),u=y);p.i.push(new Ml(p.Ya++,u)),p.G==3&&kr(p)},hn.prototype.N=function(){this.g.l=null,delete this.j,qt(this.g),delete this.g,hn.aa.N.call(this)};function eu(u){Nn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}W(eu,Nn);function tu(){Gr.call(this),this.status=1}W(tu,Gr);function Nr(u){this.g=u}W(Nr,xa),Nr.prototype.ua=function(){ft(this.g,"a")},Nr.prototype.ta=function(u){ft(this.g,new eu(u))},Nr.prototype.sa=function(u){ft(this.g,new tu)},Nr.prototype.ra=function(){ft(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,$_=function(){return new go},H_=function(){return Kr()},B_=Kn,lf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},He.NO_ERROR=0,He.TIMEOUT=8,He.HTTP_ERROR=6,uc=He,Et.COMPLETE="complete",z_=Et,Gn.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",dt.prototype.listen=dt.prototype.K,el=Gn,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,U_=mt}).apply(typeof Xu<"u"?Xu:typeof self<"u"?self:typeof window<"u"?window:{});const xy="@firebase/firestore",Sy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new bf("@firebase/firestore");function Uo(){return Js.logLevel}function fe(r,...e){if(Js.logLevel<=$e.DEBUG){const t=e.map(qf);Js.debug(`Firestore (${ha}): ${r}`,...t)}}function yi(r,...e){if(Js.logLevel<=$e.ERROR){const t=e.map(qf);Js.error(`Firestore (${ha}): ${r}`,...t)}}function ps(r,...e){if(Js.logLevel<=$e.WARN){const t=e.map(qf);Js.warn(`Firestore (${ha}): ${r}`,...t)}}function qf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,W_(r,i,t)}function W_(r,e,t){let i=`FIRESTORE (${ha}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw yi(i),new Error(i)}function et(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||W_(e,o,i)}function Fe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends _i{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(sn.UNAUTHENTICATED))}shutdown(){}}class tC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nC{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new cs,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},f=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new cs)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string",31837,{l:i}),new q_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class rC{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iC{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new rC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const i=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=oC(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function ze(r,e){return r<e?-1:r>e?1:0}function uf(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return ze(i,o);{const l=G_(),h=aC(l.encode(Ay(r,t)),l.encode(Ay(e,t)));return h!==0?h:ze(i,o)}}t+=i>65535?2:1}return ze(r.length,e.length)}function Ay(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function aC(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return ze(r[t],e[t]);return ze(r.length,e.length)}function Xo(r,e,t){return r.length===e.length&&r.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="__name__";class jr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ve(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ve(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return jr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=jr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return ze(e.length,t.length)}static compareSegments(e,t){const i=jr.isNumericId(e),o=jr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?jr.extractNumericId(e).compare(jr.extractNumericId(t)):uf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class ct extends jr{construct(e,t,i){return new ct(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new ct(t)}static emptyPath(){return new ct([])}}const lC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends jr{construct(e,t,i){return new Yt(e,t,i)}static isValidIdentifier(e){return lC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ry}static keyField(){return new Yt([Ry])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Te(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new Te(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Te(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new Te(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(t)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(ct.fromString(e))}static fromName(e){return new Re(ct.fromString(e).popFirst(5))}static empty(){return new Re(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(r,e,t){if(!t)throw new Te(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function uC(r,e,t,i){if(e===!0&&i===!0)throw new Te(Q.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Py(r){if(!Re.isDocumentKey(r))throw new Te(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function by(r){if(Re.isDocumentKey(r))throw new Te(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Q_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Kf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ve(12329,{type:typeof r})}function Mr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Te(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kf(r);throw new Te(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(r,e){const t={typeString:r};return e&&(t.value=e),t}function bl(r,e){if(!Q_(r))throw new Te(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Te(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=-62135596800,Ny=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ny);return new ht(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ky)throw new Te(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ny}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bl(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ky;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Nt("string",ht._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new ht(0,0))}static max(){return new Me(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=-1;function cC(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Me.fromTimestamp(i===1e9?new ht(t+1,0):new ht(t,i));return new ms(o,Re.empty(),e)}function hC(r){return new ms(r.readTime,r.key,wl)}class ms{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ms(Me.min(),Re.empty(),wl)}static max(){return new ms(Me.max(),Re.empty(),wl)}}function dC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(r.documentKey,e.documentKey),t!==0?t:ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==fC)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,i)=>{t(e)})}static reject(e){return new K((t,i)=>{i(e)})}static waitFor(e){return new K((t,i)=>{let o=0,l=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++l,h&&l===o&&t()},g=>i(g))}),h=!0,l===o&&t()})}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next(o=>o?K.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new K((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const _=g;t(e[_]).next(E=>{h[_]=E,++f,f===l&&i(h)},E=>o(E))}})}static doWhile(e,t){return new K((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function mC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fa(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}zc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=-1;function Bc(r){return r==null}function xc(r){return r===0&&1/r==-1/0}function gC(r){return typeof r=="number"&&Number.isInteger(r)&&!xc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="";function yC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Dy(e)),e=vC(r.get(t),e);return Dy(e)}function vC(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Y_:t+="";break;default:t+=l}}return t}function Dy(r){return r+Y_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Es(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function J_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zu(this.root,e,this.comparator,!0)}}class Zu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Qt.RED,this.left=o??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Qt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oy(this.data.getIterator())}getIteratorFrom(e){return new Oy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class Oy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new zn([])}unionWith(e){let t=new Ft(Yt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new X_("Invalid base64 string: "+l):l}}(e);return new Jt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new Jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const _C=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gs(r){if(et(!!r,39018),typeof r=="string"){let e=0;const t=_C.exec(r);if(et(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xt(r.seconds),nanos:xt(r.nanos)}}function xt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ys(r){return typeof r=="string"?Jt.fromBase64String(r):Jt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="server_timestamp",e0="__type__",t0="__previous_value__",n0="__local_write_time__";function Yf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[e0])===null||t===void 0?void 0:t.stringValue)===Z_}function Hc(r){const e=r.mapValue.fields[t0];return Yf(e)?Hc(e):e}function El(r){const e=gs(r.mapValue.fields[n0].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t,i,o,l,h,f,g,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=E}}const Sc="(default)";class Tl{constructor(e,t){this.projectId=e,this.database=t||Sc}static empty(){return new Tl("","")}get isDefaultDatabase(){return this.database===Sc}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="__type__",EC="__max__",ec={mapValue:{}},i0="__vector__",Cc="value";function vs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Yf(r)?4:IC(r)?9007199254740991:TC(r)?10:11:Ve(28295,{value:r})}function $r(r,e){if(r===e)return!0;const t=vs(r);if(t!==vs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return El(r).isEqual(El(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=gs(o.timestampValue),f=gs(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return ys(o.bytesValue).isEqual(ys(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return xt(o.geoPointValue.latitude)===xt(l.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return xt(o.integerValue)===xt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=xt(o.doubleValue),f=xt(l.doubleValue);return h===f?xc(h)===xc(f):isNaN(h)&&isNaN(f)}return!1}(r,e);case 9:return Xo(r.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Vy(h)!==Vy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!$r(h[g],f[g])))return!1;return!0}(r,e);default:return Ve(52216,{left:r})}}function Il(r,e){return(r.values||[]).find(t=>$r(t,e))!==void 0}function Zo(r,e){if(r===e)return 0;const t=vs(r),i=vs(e);if(t!==i)return ze(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(r.booleanValue,e.booleanValue);case 2:return function(l,h){const f=xt(l.integerValue||l.doubleValue),g=xt(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(r,e);case 3:return Ly(r.timestampValue,e.timestampValue);case 4:return Ly(El(r),El(e));case 5:return uf(r.stringValue,e.stringValue);case 6:return function(l,h){const f=ys(l),g=ys(h);return f.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const f=l.split("/"),g=h.split("/");for(let _=0;_<f.length&&_<g.length;_++){const E=ze(f[_],g[_]);if(E!==0)return E}return ze(f.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const f=ze(xt(l.latitude),xt(h.latitude));return f!==0?f:ze(xt(l.longitude),xt(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return jy(r.arrayValue,e.arrayValue);case 10:return function(l,h){var f,g,_,E;const T=l.fields||{},C=h.fields||{},j=(f=T[Cc])===null||f===void 0?void 0:f.arrayValue,W=(g=C[Cc])===null||g===void 0?void 0:g.arrayValue,H=ze(((_=j==null?void 0:j.values)===null||_===void 0?void 0:_.length)||0,((E=W==null?void 0:W.values)===null||E===void 0?void 0:E.length)||0);return H!==0?H:jy(j,W)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===ec.mapValue&&h===ec.mapValue)return 0;if(l===ec.mapValue)return 1;if(h===ec.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),_=h.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const C=uf(g[T],E[T]);if(C!==0)return C;const j=Zo(f[g[T]],_[E[T]]);if(j!==0)return j}return ze(g.length,E.length)}(r.mapValue,e.mapValue);default:throw Ve(23264,{le:t})}}function Ly(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ze(r,e);const t=gs(r),i=gs(e),o=ze(t.seconds,i.seconds);return o!==0?o:ze(t.nanos,i.nanos)}function jy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Zo(t[o],i[o]);if(l)return l}return ze(t.length,i.length)}function ea(r){return cf(r)}function cf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const i=gs(t);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return ys(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Re.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=cf(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${cf(t.fields[h])}`;return o+"}"}(r.mapValue):Ve(61005,{value:r})}function cc(r){switch(vs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hc(r);return e?16+cc(e):16;case 5:return 2*r.stringValue.length;case 6:return ys(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+cc(l),0)}(r.arrayValue);case 10:case 11:return function(i){let o=0;return Es(i.fields,(l,h)=>{o+=l.length+cc(h)}),o}(r.mapValue);default:throw Ve(13486,{value:r})}}function hf(r){return!!r&&"integerValue"in r}function Jf(r){return!!r&&"arrayValue"in r}function My(r){return!!r&&"nullValue"in r}function Fy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function hc(r){return!!r&&"mapValue"in r}function TC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[r0])===null||t===void 0?void 0:t.stringValue)===i0}function cl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Es(r.mapValue.fields,(t,i)=>e.mapValue.fields[t]=cl(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function IC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===EC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!hc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cl(t)}setAll(e){let t=Yt.emptyPath(),i={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=cl(h):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());hc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];hc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Es(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new An(cl(this.value))}}function s0(r){const e=[];return Es(r.fields,(t,i)=>{const o=new Yt([t]);if(hc(i)){const l=s0(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new on(e,0,Me.min(),Me.min(),Me.min(),An.empty(),0)}static newFoundDocument(e,t,i,o){return new on(e,1,t,Me.min(),i,o,0)}static newNoDocument(e,t){return new on(e,2,t,Me.min(),Me.min(),An.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Me.min(),Me.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){this.position=e,this.inclusive=t}}function Uy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=Re.comparator(Re.fromName(h.referenceValue),t.key):i=Zo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function zy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!$r(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t="asc"){this.field=e,this.dir=t}}function xC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{}class Mt extends o0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new CC(e,t,i):t==="array-contains"?new PC(e,i):t==="in"?new bC(e,i):t==="not-in"?new kC(e,i):t==="array-contains-any"?new NC(e,i):new Mt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new AC(e,i):new RC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zo(t,this.value)):t!==null&&vs(this.value)===vs(t)&&this.matchesComparison(Zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wr extends o0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Wr(e,t)}matches(e){return a0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function a0(r){return r.op==="and"}function l0(r){return SC(r)&&a0(r)}function SC(r){for(const e of r.filters)if(e instanceof Wr)return!1;return!0}function df(r){if(r instanceof Mt)return r.field.canonicalString()+r.op.toString()+ea(r.value);if(l0(r))return r.filters.map(e=>df(e)).join(",");{const e=r.filters.map(t=>df(t)).join(",");return`${r.op}(${e})`}}function u0(r,e){return r instanceof Mt?function(i,o){return o instanceof Mt&&i.op===o.op&&i.field.isEqual(o.field)&&$r(i.value,o.value)}(r,e):r instanceof Wr?function(i,o){return o instanceof Wr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,h,f)=>l&&u0(h,o.filters[f]),!0):!1}(r,e):void Ve(19439)}function c0(r){return r instanceof Mt?function(t){return`${t.field.canonicalString()} ${t.op} ${ea(t.value)}`}(r):r instanceof Wr?function(t){return t.op.toString()+" {"+t.getFilters().map(c0).join(" ,")+"}"}(r):"Filter"}class CC extends Mt{constructor(e,t,i){super(e,t,i),this.key=Re.fromName(i.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class AC extends Mt{constructor(e,t){super(e,"in",t),this.keys=h0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RC extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=h0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function h0(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Re.fromName(i.referenceValue))}class PC extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jf(t)&&Il(t.arrayValue,this.value)}}class bC extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Il(this.value.arrayValue,t)}}class kC extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Il(this.value.arrayValue,t)}}class NC extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Il(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Pe=null}}function By(r,e=null,t=[],i=[],o=null,l=null,h=null){return new DC(r,e,t,i,o,l,h)}function Xf(r){const e=Fe(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>df(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ea(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ea(i)).join(",")),e.Pe=t}return e.Pe}function Zf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!xC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!u0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!zy(r.startAt,e.startAt)&&zy(r.endAt,e.endAt)}function ff(r){return Re.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function VC(r,e,t,i,o,l,h,f){return new $c(r,e,t,i,o,l,h,f)}function Wc(r){return new $c(r)}function Hy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function OC(r){return r.collectionGroup!==null}function hl(r){const e=Fe(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Ft(Yt.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(f=f.add(_.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Rc(l,i))}),t.has(Yt.keyField().canonicalString())||e.Te.push(new Rc(Yt.keyField(),i))}return e.Te}function Fr(r){const e=Fe(r);return e.Ie||(e.Ie=LC(e,hl(r))),e.Ie}function LC(r,e){if(r.limitType==="F")return By(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Rc(o.field,l)});const t=r.endAt?new Ac(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Ac(r.startAt.position,r.startAt.inclusive):null;return By(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function pf(r,e,t){return new $c(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function qc(r,e){return Zf(Fr(r),Fr(e))&&r.limitType===e.limitType}function d0(r){return`${Xf(Fr(r))}|lt:${r.limitType}`}function zo(r){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>c0(o)).join(", ")}]`),Bc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>ea(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>ea(o)).join(",")),`Target(${i})`}(Fr(r))}; limitType=${r.limitType})`}function Gc(r,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Re.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,e)&&function(i,o){for(const l of hl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(i,o){return!(i.startAt&&!function(h,f,g){const _=Uy(h,f,g);return h.inclusive?_<=0:_<0}(i.startAt,hl(i),o)||i.endAt&&!function(h,f,g){const _=Uy(h,f,g);return h.inclusive?_>=0:_>0}(i.endAt,hl(i),o))}(r,e)}function jC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function f0(r){return(e,t)=>{let i=!1;for(const o of hl(r)){const l=MC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function MC(r,e,t){const i=r.field.isKeyField()?Re.comparator(e.key,t.key):function(l,h,f){const g=h.data.field(l),_=f.data.field(l);return g!==null&&_!==null?Zo(g,_):Ve(42886)}(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ve(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return J_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new wt(Re.comparator);function vi(){return FC}const p0=new wt(Re.comparator);function tl(...r){let e=p0;for(const t of r)e=e.insert(t.key,t);return e}function m0(r){let e=p0;return r.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ks(){return dl()}function g0(){return dl()}function dl(){return new no(r=>r.toString(),(r,e)=>r.isEqual(e))}const UC=new wt(Re.comparator),zC=new Ft(Re.comparator);function We(...r){let e=zC;for(const t of r)e=e.add(t);return e}const BC=new Ft(ze);function HC(){return BC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xc(e)?"-0":e}}function y0(r){return{integerValue:""+r}}function $C(r,e){return gC(e)?y0(e):ep(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this._=void 0}}function WC(r,e,t){return r instanceof Pc?function(o,l){const h={fields:{[e0]:{stringValue:Z_},[n0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Yf(l)&&(l=Hc(l)),l&&(h.fields[t0]=l),{mapValue:h}}(t,e):r instanceof ta?_0(r,e):r instanceof xl?w0(r,e):function(o,l){const h=v0(o,l),f=$y(h)+$y(o.Ee);return hf(h)&&hf(o.Ee)?y0(f):ep(o.serializer,f)}(r,e)}function qC(r,e,t){return r instanceof ta?_0(r,e):r instanceof xl?w0(r,e):t}function v0(r,e){return r instanceof bc?function(i){return hf(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Pc extends Kc{}class ta extends Kc{constructor(e){super(),this.elements=e}}function _0(r,e){const t=E0(e);for(const i of r.elements)t.some(o=>$r(o,i))||t.push(i);return{arrayValue:{values:t}}}class xl extends Kc{constructor(e){super(),this.elements=e}}function w0(r,e){let t=E0(e);for(const i of r.elements)t=t.filter(o=>!$r(o,i));return{arrayValue:{values:t}}}class bc extends Kc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function $y(r){return xt(r.integerValue||r.doubleValue)}function E0(r){return Jf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t){this.field=e,this.transform=t}}function KC(r,e){return r.field.isEqual(e.field)&&function(i,o){return i instanceof ta&&o instanceof ta||i instanceof xl&&o instanceof xl?Xo(i.elements,o.elements,$r):i instanceof bc&&o instanceof bc?$r(i.Ee,o.Ee):i instanceof Pc&&o instanceof Pc}(r.transform,e.transform)}class QC{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Qc{}function T0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new x0(r.key,Ur.none()):new kl(r.key,r.data,Ur.none());{const t=r.data,i=An.empty();let o=new Ft(Yt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ts(r.key,i,new zn(o.toArray()),Ur.none())}}function YC(r,e,t){r instanceof kl?function(o,l,h){const f=o.value.clone(),g=qy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(r,e,t):r instanceof Ts?function(o,l,h){if(!dc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=qy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(I0(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function fl(r,e,t,i){return r instanceof kl?function(l,h,f,g){if(!dc(l.precondition,h))return f;const _=l.value.clone(),E=Gy(l.fieldTransforms,g,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(r,e,t,i):r instanceof Ts?function(l,h,f,g){if(!dc(l.precondition,h))return f;const _=Gy(l.fieldTransforms,g,h),E=h.data;return E.setAll(I0(l)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(r,e,t,i):function(l,h,f){return dc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(r,e,t)}function JC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=v0(i.transform,o||null);l!=null&&(t===null&&(t=An.empty()),t.set(i.field,l))}return t||null}function Wy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Xo(i,o,(l,h)=>KC(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class kl extends Qc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ts extends Qc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function I0(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}}),e}function qy(r,e,t){const i=new Map;et(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,qC(h,f,t[o]))}return i}function Gy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,WC(l,h,e))}return i}class x0 extends Qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XC extends Qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&YC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=fl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=fl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=g0();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=T0(h,f);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Me.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),We())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(t,i)=>Wy(t,i))&&Xo(this.baseMutations,e.baseMutations,(t,i)=>Wy(t,i))}}class tp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){et(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=function(){return UC}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new tp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Ye;function nA(r){switch(r){case Q.OK:return Ve(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return Ve(15467,{code:r})}}function S0(r){if(r===void 0)return yi("GRPC error has no .code"),Q.UNKNOWN;switch(r){case bt.OK:return Q.OK;case bt.CANCELLED:return Q.CANCELLED;case bt.UNKNOWN:return Q.UNKNOWN;case bt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case bt.INTERNAL:return Q.INTERNAL;case bt.UNAVAILABLE:return Q.UNAVAILABLE;case bt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case bt.NOT_FOUND:return Q.NOT_FOUND;case bt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case bt.ABORTED:return Q.ABORTED;case bt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case bt.DATA_LOSS:return Q.DATA_LOSS;default:return Ve(39323,{code:r})}}(Ye=bt||(bt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=new us([4294967295,4294967295],0);function Ky(r){const e=G_().encode(r),t=new F_;return t.update(e),new Uint8Array(t.digest())}function Qy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new us([t,i],0),new us([o,l],0)]}class np{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new nl(`Invalid padding: ${t}`);if(i<0)throw new nl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new nl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=us.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(us.fromNumber(i)));return o.compare(rA)===1&&(o=new us([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Ky(e),[i,o]=Qy(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new np(l,o,t);return i.forEach(f=>h.insert(f)),h}insert(e){if(this.fe===0)return;const t=Ky(e),[i,o]=Qy(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Nl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Yc(Me.min(),o,new wt(ze),vi(),We())}}class Nl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Nl(i,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class C0{constructor(e,t){this.targetId=e,this.De=t}}class A0{constructor(e,t,i=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Yy{constructor(){this.ve=0,this.Ce=Jy(),this.Fe=Jt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=We(),t=We(),i=We();return this.Ce.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ve(38017,{changeType:l})}}),new Nl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Jy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class iA{constructor(e){this.We=e,this.Ge=new Map,this.ze=vi(),this.je=tc(),this.Je=tc(),this.He=new wt(ze)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ve(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,o)=>{this.nt(o)&&t(o)})}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(ff(l))if(i===0){const h=new Re(l.path);this.Xe(t,h,on.newNoDocument(h,Me.min()))}else et(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const f=this._t(e),g=f?this.ut(f,e,h):1;if(g!==0){this.rt(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,_)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=ys(i).toUint8Array()}catch(g){if(g instanceof X_)return ps("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new np(h,o,l)}catch(g){return ps(g instanceof nl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.fe===0?null:f}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const h=this.We.lt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)}),o}Pt(e){const t=new Map;this.Ge.forEach((l,h)=>{const f=this.st(h);if(f){if(l.current&&ff(f.target)){const g=new Re(f.target.path);this.Tt(g).has(h)||this.It(h,g)||this.Xe(h,g,on.newNoDocument(g,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}});let i=We();this.Je.forEach((l,h)=>{let f=!0;h.forEachWhile(g=>{const _=this.st(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.ze.forEach((l,h)=>h.setReadTime(e));const o=new Yc(e,t,this.He,this.ze,i);return this.ze=vi(),this.je=tc(),this.Je=tc(),this.He=new wt(ze),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Yy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ft(ze),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ft(ze),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Yy),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function tc(){return new wt(Re.comparator)}function Jy(){return new wt(Re.comparator)}const sA={asc:"ASCENDING",desc:"DESCENDING"},oA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aA={and:"AND",or:"OR"};class lA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mf(r,e){return r.useProto3Json||Bc(e)?e:{value:e}}function kc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function uA(r,e){return kc(r,e.toTimestamp())}function zr(r){return et(!!r,49232),Me.fromTimestamp(function(t){const i=gs(t);return new ht(i.seconds,i.nanos)}(r))}function rp(r,e){return gf(r,e).canonicalString()}function gf(r,e){const t=function(o){return new ct(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function P0(r){const e=ct.fromString(r);return et(V0(e),10190,{key:e.toString()}),e}function yf(r,e){return rp(r.databaseId,e.path)}function Gd(r,e){const t=P0(e);if(t.get(1)!==r.databaseId.projectId)throw new Te(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Te(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Re(k0(t))}function b0(r,e){return rp(r.databaseId,e)}function cA(r){const e=P0(r);return e.length===4?ct.emptyPath():k0(e)}function vf(r){return new ct(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function k0(r){return et(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Xy(r,e,t){return{name:yf(r,e),fields:t.value.mapValue.fields}}function hA(r,e){let t;if("targetChange"in e){e.targetChange;const i=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ve(39313,{state:_})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(_,E){return _.useProto3Json?(et(E===void 0||typeof E=="string",58123),Jt.fromBase64String(E||"")):(et(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Jt.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(_){const E=_.code===void 0?Q.UNKNOWN:S0(_.code);return new Te(E,_.message||"")}(h);t=new A0(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Gd(r,i.document.name),l=zr(i.document.updateTime),h=i.document.createTime?zr(i.document.createTime):Me.min(),f=new An({mapValue:{fields:i.document.fields}}),g=on.newFoundDocument(o,l,h,f),_=i.targetIds||[],E=i.removedTargetIds||[];t=new fc(_,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Gd(r,i.document),l=i.readTime?zr(i.readTime):Me.min(),h=on.newNoDocument(o,l),f=i.removedTargetIds||[];t=new fc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Gd(r,i.document),l=i.removedTargetIds||[];t=new fc([],l,o,null)}else{if(!("filter"in e))return Ve(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new tA(o,l),f=i.targetId;t=new C0(f,h)}}return t}function dA(r,e){let t;if(e instanceof kl)t={update:Xy(r,e.key,e.value)};else if(e instanceof x0)t={delete:yf(r,e.key)};else if(e instanceof Ts)t={update:Xy(r,e.key,e.data),updateMask:EA(e.fieldMask)};else{if(!(e instanceof XC))return Ve(16599,{Rt:e.type});t={verify:yf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const f=h.transform;if(f instanceof Pc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ta)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof xl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof bc)return{fieldPath:h.field.canonicalString(),increment:f.Ee};throw Ve(20930,{transform:h.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:uA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ve(27497)}(r,e.precondition)),t}function fA(r,e){return r&&r.length>0?(et(e!==void 0,14353),r.map(t=>function(o,l){let h=o.updateTime?zr(o.updateTime):zr(l);return h.isEqual(Me.min())&&(h=zr(l)),new QC(h,o.transformResults||[])}(t,e))):[]}function pA(r,e){return{documents:[b0(r,e.path)]}}function mA(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=b0(r,o);const l=function(_){if(_.length!==0)return D0(Wr.create(_,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(_){if(_.length!==0)return _.map(E=>function(C){return{field:Bo(C.field),direction:vA(C.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=mf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{Vt:t,parent:o}}function gA(r){let e=cA(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){et(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(T){const C=N0(T);return C instanceof Wr&&l0(C)?C.getFilters():[C]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(C=>function(W){return new Rc(Ho(W.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(W.direction))}(C))}(t.orderBy));let f=null;t.limit&&(f=function(T){let C;return C=typeof T=="object"?T.value:T,Bc(C)?null:C}(t.limit));let g=null;t.startAt&&(g=function(T){const C=!!T.before,j=T.values||[];return new Ac(j,C)}(t.startAt));let _=null;return t.endAt&&(_=function(T){const C=!T.before,j=T.values||[];return new Ac(j,C)}(t.endAt)),VC(e,o,h,l,f,"F",g,_)}function yA(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function N0(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ho(t.unaryFilter.field);return Mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ho(t.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ho(t.unaryFilter.field);return Mt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ho(t.unaryFilter.field);return Mt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}}(r):r.fieldFilter!==void 0?function(t){return Mt.create(Ho(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Wr.create(t.compositeFilter.filters.map(i=>N0(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}}(t.compositeFilter.op))}(r):Ve(30097,{filter:r})}function vA(r){return sA[r]}function _A(r){return oA[r]}function wA(r){return aA[r]}function Bo(r){return{fieldPath:r.canonicalString()}}function Ho(r){return Yt.fromServerFormat(r.fieldPath)}function D0(r){return r instanceof Mt?function(t){if(t.op==="=="){if(Fy(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NAN"}};if(My(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Fy(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NAN"}};if(My(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(t.field),op:_A(t.op),value:t.value}}}(r):r instanceof Wr?function(t){const i=t.getFilters().map(o=>D0(o));return i.length===1?i[0]:{compositeFilter:{op:wA(t.op),filters:i}}}(r):Ve(54877,{filter:r})}function EA(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function V0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,i,o,l=Me.min(),h=Me.min(),f=Jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.gt=e}}function IA(r){const e=gA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?pf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.Dn=new SA}addToCollectionParentIndex(e,t){return this.Dn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(ms.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class SA{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ft(ct.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ft(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O0=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(O0,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new na(0)}static ur(){return new na(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="LruGarbageCollector",CA=1048576;function tv([r,e],[t,i]){const o=ze(r,t);return o===0?ze(e,i):o}class AA{constructor(e){this.Tr=e,this.buffer=new Ft(tv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();tv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class RA{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){fe(ev,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fa(t)?fe(ev,"Ignoring IndexedDB error during garbage collection: ",t):await da(t)}await this.Rr(3e5)})}}class PA{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return K.resolve(zc.ue);const i=new AA(t);return this.Vr.forEachTarget(e,o=>i.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>i.Er(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Zy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zy):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,f,g,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(i=T,f=Date.now(),this.removeTargets(e,i,t))).next(T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(_=Date.now(),Uo()<=$e.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T})))}}function bA(r,e){return new PA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.changes=new no(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&fl(i.mutation,o,zn.empty(),ht.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,We()).next(()=>i))}getLocalViewOfDocuments(e,t,i=We()){const o=Ks();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let h=tl();return l.forEach((f,g)=>{h=h.insert(f,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=Ks();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,We()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,i,o){let l=vi();const h=dl(),f=function(){return dl()}();return t.forEach((g,_)=>{const E=i.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof Ts)?l=l.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),fl(E.mutation,_,E.mutation.getFieldMask(),ht.now())):h.set(_.key,zn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((_,E)=>h.set(_,E)),t.forEach((_,E)=>{var T;return f.set(_,new NA(E,(T=h.get(_))!==null&&T!==void 0?T:null))}),f))}recalculateAndSaveOverlays(e,t){const i=dl();let o=new wt((h,f)=>h-f),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(g=>{const _=t.get(g);if(_===null)return;let E=i.get(g)||zn.empty();E=f.applyToLocalView(_,E),i.set(g,E);const T=(o.get(f.batchId)||We()).add(g);o=o.insert(f.batchId,T)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),_=g.key,E=g.value,T=g0();E.forEach(C=>{if(!l.has(C)){const j=T0(t.get(C),i.get(C));j!==null&&T.set(C,j),l=l.add(C)}}),h.push(this.documentOverlayCache.saveOverlays(e,_,T))}return K.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return Re.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):OC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):K.resolve(Ks());let f=wl,g=l;return h.next(_=>K.forEach(_,(E,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(E)?K.resolve():this.remoteDocumentCache.getEntry(e,E).next(C=>{g=g.insert(E,C)}))).next(()=>this.populateOverlays(e,_,l)).next(()=>this.computeViews(e,g,_,We())).next(E=>({batchId:f,changes:m0(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next(i=>{let o=tl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=tl();return this.indexManager.getCollectionParents(e,l).next(f=>K.forEach(f,g=>{const _=function(T,C){return new $c(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next(E=>{E.forEach((T,C)=>{h=h.insert(T,C)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(h=>{l.forEach((g,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,on.newInvalidDocument(E)))});let f=tl();return h.forEach((g,_)=>{const E=l.get(g);E!==void 0&&fl(E.mutation,_,zn.empty(),ht.now()),Gc(t,_)&&(f=f.insert(g,_))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return K.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(o){return{id:o.id,version:o.version,createTime:zr(o.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(o){return{name:o.name,query:IA(o.bundledQuery),readTime:zr(o.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.overlays=new wt(Re.comparator),this.kr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ks();return K.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.wt(e,t,l)}),K.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const o=Ks(),l=t.length+1,h=new Re(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new wt((_,E)=>_-E);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let E=l.get(_.largestBatchId);E===null&&(E=Ks(),l=l.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const f=Ks(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,E)=>f.set(_,E)),!(f.size()>=o)););return K.resolve(f)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new eA(t,i));let l=this.kr.get(t);l===void 0&&(l=We(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(){this.qr=new Ft($t.Qr),this.$r=new Ft($t.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new $t(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new $t(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){const t=new Re(new ct([])),i=new $t(t,e),o=new $t(t,e+1),l=[];return this.$r.forEachInRange([i,o],h=>{this.Wr(h),l.push(h.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Re(new ct([])),i=new $t(t,e),o=new $t(t,e+1);let l=We();return this.$r.forEachInRange([i,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new $t(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Re.comparator(e.key,t.key)||ze(e.Hr,t.Hr)}static Ur(e,t){return ze(e.Hr,t.Hr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ft($t.Qr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new ZC(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Yr=this.Yr.add(new $t(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Qf:this.er-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $t(t,0),o=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],h=>{const f=this.Zr(h.Hr);l.push(f)}),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ft(ze);return t.forEach(o=>{const l=new $t(o,0),h=new $t(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],f=>{i=i.add(f.Hr)})}),K.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Re.isDocumentKey(l)||(l=l.child(""));const h=new $t(new Re(l),0);let f=new Ft(ze);return this.Yr.forEachWhile(g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(f=f.add(g.Hr)),!0)},h),K.resolve(this.ei(f))}ei(e){const t=[];return e.forEach(i=>{const o=this.Zr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){et(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return K.forEach(t.mutations,o=>{const l=new $t(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){const i=new $t(t,0),o=this.Yr.firstAfterOrEqual(i);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.ni=e,this.docs=function(){return new wt(Re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let i=vi();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():on.newInvalidDocument(o))}),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=vi();const h=t.path,f=new Re(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||dC(hC(E),i)<=0||(o.has(E.key)||Gc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ve(9500)}ri(e,t){return K.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new FA(this)}getSize(e){return K.resolve(this.size)}}class FA extends kA{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)}),K.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.persistence=e,this.ii=new no(t=>Xf(t),Zf),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.si=0,this.oi=new ip,this.targetCount=0,this._i=na.ar()}forEachTarget(e,t){return this.ii.forEach((i,o)=>t(o)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),K.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new na(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.hr(t),K.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),K.waitFor(l).next(()=>o)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t){this.ai={},this.overlays={},this.ui=new zc(0),this.ci=!1,this.ci=!0,this.li=new LA,this.referenceDelegate=e(this),this.hi=new UA(this),this.indexManager=new xA,this.remoteDocumentCache=function(o){return new MA(o)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new TA(t),this.Ti=new VA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new jA(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const o=new zA(this.ui.next());return this.referenceDelegate.Ii(),i(o).next(l=>this.referenceDelegate.di(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ei(e,t){return K.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}}class zA extends pC{constructor(e){super(),this.currentSequenceNumber=e}}class sp{constructor(e){this.persistence=e,this.Ai=new ip,this.Ri=null}static Vi(e){return new sp(e)}get mi(){if(this.Ri)return this.Ri;throw Ve(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(o=>this.mi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.mi.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.mi,i=>{const o=Re.fromPath(i);return this.fi(e,o).next(l=>{l||t.removeEntry(o,Me.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return K.or([()=>K.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Nc{constructor(e,t){this.persistence=e,this.gi=new no(i=>yC(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=bA(this,t)}static Vi(e,t){return new Nc(e,t)}Ii(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return K.forEach(this.gi,(i,o)=>this.Sr(e,i,o).next(l=>l?K.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,h=>this.Sr(e,h,t).next(f=>{f||(i++,l.removeEntry(h,Me.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cc(e.data.value)),t}Sr(e,t,i){return K.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return K.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=We(),o=We();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new op(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return eI()?8:mC(an())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.ys(e,t,o,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new BA;return this.ws(e,t,h).next(f=>{if(l.result=f,this.Rs)return this.Ss(e,t,h,f.size)})}).next(()=>l.result)}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Uo()<=$e.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),K.resolve()):(Uo()<=$e.DEBUG&&fe("QueryEngine","Query:",zo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Uo()<=$e.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):K.resolve())}ps(e,t){if(Hy(t))return K.resolve(null);let i=Fr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=pf(t,null,"F"),i=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=We(...l);return this.gs.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,i).next(g=>{const _=this.bs(t,f);return this.Ds(t,_,h,g.readTime)?this.ps(e,pf(t,null,"F")):this.vs(e,_,t,g)}))})))}ys(e,t,i,o){return Hy(t)||o.isEqual(Me.min())?K.resolve(null):this.gs.getDocuments(e,i).next(l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?K.resolve(null):(Uo()<=$e.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zo(t)),this.vs(e,h,t,cC(o,wl)).next(f=>f))})}bs(e,t){let i=new Ft(f0(e));return t.forEach((o,l)=>{Gc(e,l)&&(i=i.add(l))}),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Uo()<=$e.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",zo(t)),this.gs.getDocumentsMatchingQuery(e,t,ms.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="LocalStore",$A=3e8;class WA{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new wt(ze),this.Ms=new no(l=>Xf(l),Zf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DA(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function qA(r,e,t,i){return new WA(r,e,t,i)}async function j0(r,e){const t=Fe(r);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],f=[];let g=We();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of l){f.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next(_=>({Bs:_,removedBatchIds:h,addedBatchIds:f}))})})}function GA(r,e){const t=Fe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(f,g,_,E){const T=_.batch,C=T.keys();let j=K.resolve();return C.forEach(W=>{j=j.next(()=>E.getEntry(g,W)).next(H=>{const F=_.docVersions.get(W);et(F!==null,48541),H.version.compareTo(F)<0&&(T.applyToRemoteDocument(H,_),H.isValidDocument()&&(H.setReadTime(_.commitVersion),E.addEntry(H)))})}),j.next(()=>f.mutationQueue.removeMutationBatch(g,T))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let g=We();for(let _=0;_<f.mutationResults.length;++_)f.mutationResults[_].transformResults.length>0&&(g=g.add(f.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function M0(r){const e=Fe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function KA(r,e){const t=Fe(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach((E,T)=>{const C=o.get(T);if(!C)return;f.push(t.hi.removeMatchingKeys(l,E.removedDocuments,T).next(()=>t.hi.addMatchingKeys(l,E.addedDocuments,T)));let j=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?j=j.withResumeToken(Jt.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):E.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(E.resumeToken,i)),o=o.insert(T,j),function(H,F,ee){return H.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=$A?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0}(C,j,E)&&f.push(t.hi.updateTargetData(l,j))});let g=vi(),_=We();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),f.push(QA(l,h,e.documentUpdates).next(E=>{g=E.Ls,_=E.ks})),!i.isEqual(Me.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next(T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(E)}return K.waitFor(f).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,_)).next(()=>g)}).then(l=>(t.Fs=o,l))}function QA(r,e,t){let i=We(),o=We();return t.forEach(l=>i=i.add(l)),e.getEntries(r,i).next(l=>{let h=vi();return t.forEach((f,g)=>{const _=l.get(f);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Me.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):fe(ap,"Ignoring outdated watch update for ",f,". Current version:",_.version," Watch version:",g.version)}),{Ls:h,ks:o}})}function YA(r,e){const t=Fe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Qf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function JA(r,e){const t=Fe(r);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.hi.getTargetData(i,e).next(l=>l?(o=l,K.resolve(o)):t.hi.allocateTargetId(i).next(h=>(o=new is(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}async function _f(r,e,t){const i=Fe(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!fa(h))throw h;fe(ap,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function nv(r,e,t){const i=Fe(r);let o=Me.min(),l=We();return i.persistence.runTransaction("Execute query","readwrite",h=>function(g,_,E){const T=Fe(g),C=T.Ms.get(E);return C!==void 0?K.resolve(T.Fs.get(C)):T.hi.getTargetData(_,E)}(i,h,Fr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,f.targetId).next(g=>{l=g})}).next(()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Me.min(),t?l:We())).next(f=>(XA(i,jC(e),f),{documents:f,qs:l})))}function XA(r,e,t){let i=r.xs.get(e)||Me.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.xs.set(e,i)}class rv{constructor(){this.activeTargetIds=HC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZA{constructor(){this.Fo=new rv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new rv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="ConnectivityMonitor";class sv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){fe(iv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){fe(iv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc=null;function wf(){return nc===null?nc=function(){return 268435456+Math.round(2147483648*Math.random())}():nc++,"0x"+nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="RestConnection",tR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Sc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=wf(),f=this.Go(e,t.toUriEncodedString());fe(Kd,`Sending RPC '${e}' ${h}:`,f,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,l);const{host:_}=new URL(f),E=aa(_);return this.jo(e,f,g,i,E).then(T=>(fe(Kd,`Received RPC '${e}' ${h}: `,T),T),T=>{throw ps(Kd,`RPC '${e}' ${h} failed with error: `,T,"url: ",f,"request:",i),T})}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ha}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),i&&i.headers.forEach((o,l)=>e[l]=o)}Go(e,t){const i=tR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class iR extends nR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=wf();return new Promise((f,g)=>{const _=new U_;_.setWithCredentials(!0),_.listenOnce(z_.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case uc.NO_ERROR:const T=_.getResponseJson();fe(rn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),f(T);break;case uc.TIMEOUT:fe(rn,`RPC '${e}' ${h} timed out`),g(new Te(Q.DEADLINE_EXCEEDED,"Request time out"));break;case uc.HTTP_ERROR:const C=_.getStatus();if(fe(rn,`RPC '${e}' ${h} failed with status:`,C,"response text:",_.getResponseText()),C>0){let j=_.getResponseJson();Array.isArray(j)&&(j=j[0]);const W=j==null?void 0:j.error;if(W&&W.status&&W.message){const H=function(ee){const re=ee.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(re)>=0?re:Q.UNKNOWN}(W.status);g(new Te(H,W.message))}else g(new Te(Q.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Te(Q.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{c_:e,streamId:h,l_:_.getLastErrorCode(),h_:_.getLastError()})}}finally{fe(rn,`RPC '${e}' ${h} completed.`)}});const E=JSON.stringify(o);fe(rn,`RPC '${e}' ${h} sending request:`,o),_.send(t,"POST",E,i,15)})}P_(e,t,i){const o=wf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=$_(),f=H_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=l.join("");fe(rn,`Creating RPC '${e}' stream ${o}: ${E}`,g);const T=h.createWebChannel(E,g);this.T_(T);let C=!1,j=!1;const W=new rR({Ho:F=>{j?fe(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(C||(fe(rn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),C=!0),fe(rn,`RPC '${e}' stream ${o} sending:`,F),T.send(F))},Yo:()=>T.close()}),H=(F,ee,re)=>{F.listen(ee,X=>{try{re(X)}catch(ve){setTimeout(()=>{throw ve},0)}})};return H(T,el.EventType.OPEN,()=>{j||(fe(rn,`RPC '${e}' stream ${o} transport opened.`),W.s_())}),H(T,el.EventType.CLOSE,()=>{j||(j=!0,fe(rn,`RPC '${e}' stream ${o} transport closed`),W.__(),this.I_(T))}),H(T,el.EventType.ERROR,F=>{j||(j=!0,ps(rn,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),W.__(new Te(Q.UNAVAILABLE,"The operation could not be completed")))}),H(T,el.EventType.MESSAGE,F=>{var ee;if(!j){const re=F.data[0];et(!!re,16349);const X=re,ve=(X==null?void 0:X.error)||((ee=X[0])===null||ee===void 0?void 0:ee.error);if(ve){fe(rn,`RPC '${e}' stream ${o} received error:`,ve);const le=ve.status;let Se=function(x){const k=bt[x];if(k!==void 0)return S0(k)}(le),b=ve.message;Se===void 0&&(Se=Q.INTERNAL,b="Unknown error status: "+le+" with message "+ve.message),j=!0,W.__(new Te(Se,b)),T.close()}else fe(rn,`RPC '${e}' stream ${o} received:`,re),W.a_(re)}}),H(f,B_.STAT_EVENT,F=>{F.stat===lf.PROXY?fe(rn,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===lf.NOPROXY&&fe(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{W.o_()},0),W}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(r){return new lA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="PersistentStream";class U0{constructor(e,t,i,o,l,h,f,g){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new F0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(yi(t.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.b_===t&&this.W_(i,o)},i=>{e(()=>{const o=new Te(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)})})}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{i(()=>this.G_(o))}),this.stream.onMessage(o=>{i(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return fe(ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(fe(ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sR extends U0{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=hA(this.serializer,e),i=function(l){if(!("targetChange"in l))return Me.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Me.min():h.readTime?zr(h.readTime):Me.min()}(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=vf(this.serializer),t.addTarget=function(l,h){let f;const g=h.target;if(f=ff(g)?{documents:pA(l,g)}:{query:mA(l,g).Vt},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=R0(l,h.resumeToken);const _=mf(l,h.expectedCount);_!==null&&(f.expectedCount=_)}else if(h.snapshotVersion.compareTo(Me.min())>0){f.readTime=kc(l,h.snapshotVersion.toTimestamp());const _=mf(l,h.expectedCount);_!==null&&(f.expectedCount=_)}return f}(this.serializer,e);const i=yA(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=vf(this.serializer),t.removeTarget=e,this.k_(t)}}class oR extends U0{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=fA(e.writeResults,e.commitTime),i=zr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=vf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>dA(this.serializer,i))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{}class lR extends aR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Te(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Wo(e,gf(t,i),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(Q.UNKNOWN,l.toString())})}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.Jo(e,gf(t,i),o,h,f,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Te(Q.UNKNOWN,h.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class uR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(yi(t),this._a=!1):fe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="RemoteStore";class cR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(h=>{i.enqueueAndForget(async()=>{ro(this)&&(fe(Xs,"Restarting streams for network reachability change."),await async function(g){const _=Fe(g);_.Ia.add(4),await Dl(_),_.Aa.set("Unknown"),_.Ia.delete(4),await Xc(_)}(this))})}),this.Aa=new uR(i,o)}}async function Xc(r){if(ro(r))for(const e of r.da)await e(!0)}async function Dl(r){for(const e of r.da)await e(!1)}function z0(r,e){const t=Fe(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),hp(t)?cp(t):pa(t).x_()&&up(t,e))}function lp(r,e){const t=Fe(r),i=pa(t);t.Ta.delete(e),i.x_()&&B0(t,e),t.Ta.size===0&&(i.x_()?i.B_():ro(t)&&t.Aa.set("Unknown"))}function up(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pa(r).H_(e)}function B0(r,e){r.Ra.$e(e),pa(r).Y_(e)}function cp(r){r.Ra=new iA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),pa(r).start(),r.Aa.aa()}function hp(r){return ro(r)&&!pa(r).M_()&&r.Ta.size>0}function ro(r){return Fe(r).Ia.size===0}function H0(r){r.Ra=void 0}async function hR(r){r.Aa.set("Online")}async function dR(r){r.Ta.forEach((e,t)=>{up(r,e)})}async function fR(r,e){H0(r),hp(r)?(r.Aa.la(e),cp(r)):r.Aa.set("Unknown")}async function pR(r,e,t){if(r.Aa.set("Online"),e instanceof A0&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ta.delete(f),o.Ra.removeTarget(f))}(r,e)}catch(i){fe(Xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dc(r,i)}else if(e instanceof fc?r.Ra.Ye(e):e instanceof C0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Me.min()))try{const i=await M0(r.localStore);t.compareTo(i)>=0&&await function(l,h){const f=l.Ra.Pt(h);return f.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.Ta.get(_);E&&l.Ta.set(_,E.withResumeToken(g.resumeToken,h))}}),f.targetMismatches.forEach((g,_)=>{const E=l.Ta.get(g);if(!E)return;l.Ta.set(g,E.withResumeToken(Jt.EMPTY_BYTE_STRING,E.snapshotVersion)),B0(l,g);const T=new is(E.target,g,_,E.sequenceNumber);up(l,T)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(i){fe(Xs,"Failed to raise snapshot:",i),await Dc(r,i)}}async function Dc(r,e,t){if(!fa(e))throw e;r.Ia.add(1),await Dl(r),r.Aa.set("Offline"),t||(t=()=>M0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{fe(Xs,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Xc(r)})}function $0(r,e){return e().catch(t=>Dc(r,t,e))}async function Zc(r){const e=Fe(r),t=_s(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Qf;for(;mR(e);)try{const o=await YA(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,gR(e,o)}catch(o){await Dc(e,o)}W0(e)&&q0(e)}function mR(r){return ro(r)&&r.Pa.length<10}function gR(r,e){r.Pa.push(e);const t=_s(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function W0(r){return ro(r)&&!_s(r).M_()&&r.Pa.length>0}function q0(r){_s(r).start()}async function yR(r){_s(r).na()}async function vR(r){const e=_s(r);for(const t of r.Pa)e.X_(t.mutations)}async function _R(r,e,t){const i=r.Pa.shift(),o=tp.from(i,e,t);await $0(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Zc(r)}async function wR(r,e){e&&_s(r).Z_&&await async function(i,o){if(function(h){return nA(h)&&h!==Q.ABORTED}(o.code)){const l=i.Pa.shift();_s(i).N_(),await $0(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Zc(i)}}(r,e),W0(r)&&q0(r)}async function av(r,e){const t=Fe(r);t.asyncQueue.verifyOperationInProgress(),fe(Xs,"RemoteStore received new credentials");const i=ro(t);t.Ia.add(3),await Dl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Xc(t)}async function ER(r,e){const t=Fe(r);e?(t.Ia.delete(2),await Xc(t)):e||(t.Ia.add(2),await Dl(t),t.Aa.set("Unknown"))}function pa(r){return r.Va||(r.Va=function(t,i,o){const l=Fe(t);return l.ia(),new sR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:hR.bind(null,r),e_:dR.bind(null,r),n_:fR.bind(null,r),J_:pR.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),hp(r)?cp(r):r.Aa.set("Unknown")):(await r.Va.stop(),H0(r))})),r.Va}function _s(r){return r.ma||(r.ma=function(t,i,o){const l=Fe(t);return l.ia(),new oR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:yR.bind(null,r),n_:wR.bind(null,r),ea:vR.bind(null,r),ta:_R.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await Zc(r)):(await r.ma.stop(),r.Pa.length>0&&(fe(Xs,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new dp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fp(r,e){if(yi("AsyncQueue",`${e}: ${r}`),fa(r))return new Te(Q.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Re.comparator(t.key,i.key):(t,i)=>Re.comparator(t.key,i.key),this.keyedMap=tl(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Qo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.fa=new wt(Re.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ve(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}}class ra{constructor(e,t,i,o,l,h,f,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new ra(e,t,Qo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class IR{constructor(){this.queries=uv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Fe(t),l=o.queries;o.queries=uv(),l.forEach((h,f)=>{for(const g of f.wa)g.onError(i)})})(this,new Te(Q.ABORTED,"Firestore shutting down"))}}function uv(){return new no(r=>d0(r),qc)}async function G0(r,e){const t=Fe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new TR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=fp(h,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&pp(t)}async function K0(r,e){const t=Fe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function xR(r,e){const t=Fe(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.wa)f.Ca(o)&&(i=!0);h.ya=o}}i&&pp(t)}function SR(r,e,t){const i=Fe(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function pp(r){r.Da.forEach(e=>{e.next()})}var Ef,cv;(cv=Ef||(Ef={})).Fa="default",cv.Cache="cache";class Q0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ra(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ef.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e){this.key=e}}class J0{constructor(e){this.key=e}}class CR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=We(),this.mutatedKeys=We(),this.Xa=f0(e),this.eu=new Qo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new lv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,T)=>{const C=o.get(E),j=Gc(this.query,T)?T:null,W=!!C&&this.mutatedKeys.has(C.key),H=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let F=!1;C&&j?C.data.isEqual(j.data)?W!==H&&(i.track({type:3,doc:j}),F=!0):this.iu(C,j)||(i.track({type:2,doc:j}),F=!0,(g&&this.Xa(j,g)>0||_&&this.Xa(j,_)<0)&&(f=!0)):!C&&j?(i.track({type:0,doc:j}),F=!0):C&&!j&&(i.track({type:1,doc:C}),F=!0,(g||_)&&(f=!0)),F&&(j?(h=h.add(j),l=H?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{eu:h,ru:i,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort((E,T)=>function(j,W){const H=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{At:F})}};return H(j)-H(W)}(E.type,T.type)||this.Xa(E.doc,T.doc)),this.su(i),o=o!=null&&o;const f=t&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,_=g!==this.Ya;return this.Ya=g,h.length!==0||_?{snapshot:new ra(this.query,e.eu,l,h,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new lv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=We(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new J0(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new Y0(i))}),t}uu(e){this.Ha=e.qs,this.Za=We();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ra.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const mp="SyncEngine";class AR{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class RR{constructor(e){this.key=e,this.lu=!1}}class PR{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new no(f=>d0(f),qc),this.Tu=new Map,this.Iu=new Set,this.du=new wt(Re.comparator),this.Eu=new Map,this.Au=new ip,this.Ru={},this.Vu=new Map,this.mu=na.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function bR(r,e,t=!0){const i=rw(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await X0(i,e,t,!0),o}async function kR(r,e){const t=rw(r);await X0(t,e,!0,!1)}async function X0(r,e,t,i){const o=await JA(r.localStore,Fr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await NR(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&z0(r.remoteStore,o),f}async function NR(r,e,t,i,o){r.gu=(T,C,j)=>async function(H,F,ee,re){let X=F.view.nu(ee);X.Ds&&(X=await nv(H.localStore,F.query,!1).then(({documents:b})=>F.view.nu(b,X)));const ve=re&&re.targetChanges.get(F.targetId),le=re&&re.targetMismatches.get(F.targetId)!=null,Se=F.view.applyChanges(X,H.isPrimaryClient,ve,le);return dv(H,F.targetId,Se._u),Se.snapshot}(r,T,C,j);const l=await nv(r.localStore,e,!0),h=new CR(e,l.qs),f=h.nu(l.documents),g=Nl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),_=h.applyChanges(f,r.isPrimaryClient,g);dv(r,t,_._u);const E=new AR(e,t,h);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),_.snapshot}async function DR(r,e,t){const i=Fe(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter(h=>!qc(h,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await _f(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&lp(i.remoteStore,o.targetId),Tf(i,o.targetId)}).catch(da)):(Tf(i,o.targetId),await _f(i.localStore,o.targetId,!0))}async function VR(r,e){const t=Fe(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),lp(t.remoteStore,i.targetId))}async function OR(r,e,t){const i=BR(r);try{const o=await function(h,f){const g=Fe(h),_=ht.now(),E=f.reduce((j,W)=>j.add(W.key),We());let T,C;return g.persistence.runTransaction("Locally write mutations","readwrite",j=>{let W=vi(),H=We();return g.Os.getEntries(j,E).next(F=>{W=F,W.forEach((ee,re)=>{re.isValidDocument()||(H=H.add(ee))})}).next(()=>g.localDocuments.getOverlayedDocuments(j,W)).next(F=>{T=F;const ee=[];for(const re of f){const X=JC(re,T.get(re.key).overlayedDocument);X!=null&&ee.push(new Ts(re.key,X,s0(X.value.mapValue),Ur.exists(!0)))}return g.mutationQueue.addMutationBatch(j,_,ee,f)}).next(F=>{C=F;const ee=F.applyToLocalDocumentSet(T,H);return g.documentOverlayCache.saveOverlays(j,F.batchId,ee)})}).then(()=>({batchId:C.batchId,changes:m0(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,f,g){let _=h.Ru[h.currentUser.toKey()];_||(_=new wt(ze)),_=_.insert(f,g),h.Ru[h.currentUser.toKey()]=_}(i,o.batchId,t),await Vl(i,o.changes),await Zc(i.remoteStore)}catch(o){const l=fp(o,"Failed to persist write");t.reject(l)}}async function Z0(r,e){const t=Fe(r);try{const i=await KA(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Eu.get(l);h&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?et(h.lu,14607):o.removedDocuments.size>0&&(et(h.lu,42227),h.lu=!1))}),await Vl(t,i,e)}catch(i){await da(i)}}function hv(r,e,t){const i=Fe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const g=Fe(h);g.onlineState=f;let _=!1;g.queries.forEach((E,T)=>{for(const C of T.wa)C.va(f)&&(_=!0)}),_&&pp(g)}(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function LR(r,e,t){const i=Fe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new wt(Re.comparator);h=h.insert(l,on.newNoDocument(l,Me.min()));const f=We().add(l),g=new Yc(Me.min(),new Map,new wt(ze),h,f);await Z0(i,g),i.du=i.du.remove(l),i.Eu.delete(e),gp(i)}else await _f(i.localStore,e,!1).then(()=>Tf(i,e,t)).catch(da)}async function jR(r,e){const t=Fe(r),i=e.batch.batchId;try{const o=await GA(t.localStore,e);tw(t,i,null),ew(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Vl(t,o)}catch(o){await da(o)}}async function MR(r,e,t){const i=Fe(r);try{const o=await function(h,f){const g=Fe(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.mutationQueue.lookupMutationBatch(_,f).next(T=>(et(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(_,T))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,f)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>g.localDocuments.getDocuments(_,E))})}(i.localStore,e);tw(i,e,t),ew(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Vl(i,o)}catch(o){await da(o)}}function ew(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function tw(r,e,t){const i=Fe(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Tf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(i=>{r.Au.containsKey(i)||nw(r,i)})}function nw(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(lp(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),gp(r))}function dv(r,e,t){for(const i of t)i instanceof Y0?(r.Au.addReference(i.key,e),FR(r,i)):i instanceof J0?(fe(mp,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||nw(r,i.key)):Ve(19791,{yu:i})}function FR(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(fe(mp,"New document in limbo: "+t),r.Iu.add(i),gp(r))}function gp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Re(ct.fromString(e)),i=r.mu.next();r.Eu.set(i,new RR(t)),r.du=r.du.insert(t,i),z0(r.remoteStore,new is(Fr(Wc(t.path)),i,"TargetPurposeLimboResolution",zc.ue))}}async function Vl(r,e,t){const i=Fe(r),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach((f,g)=>{h.push(i.gu(g,e,t).then(_=>{var E;if((_||t)&&i.isPrimaryClient){const T=_?!_.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(_){o.push(_);const T=op.Es(g.targetId,_);l.push(T)}}))}),await Promise.all(h),i.hu.J_(o),await async function(g,_){const E=Fe(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>K.forEach(_,C=>K.forEach(C.Is,j=>E.persistence.referenceDelegate.addReference(T,C.targetId,j)).next(()=>K.forEach(C.ds,j=>E.persistence.referenceDelegate.removeReference(T,C.targetId,j)))))}catch(T){if(!fa(T))throw T;fe(ap,"Failed to update sequence numbers: "+T)}for(const T of _){const C=T.targetId;if(!T.fromCache){const j=E.Fs.get(C),W=j.snapshotVersion,H=j.withLastLimboFreeSnapshotVersion(W);E.Fs=E.Fs.insert(C,H)}}}(i.localStore,l))}async function UR(r,e){const t=Fe(r);if(!t.currentUser.isEqual(e)){fe(mp,"User change. New user:",e.toKey());const i=await j0(t.localStore,e);t.currentUser=e,function(l,h){l.Vu.forEach(f=>{f.forEach(g=>{g.reject(new Te(Q.CANCELLED,h))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vl(t,i.Bs)}}function zR(r,e){const t=Fe(r),i=t.Eu.get(e);if(i&&i.lu)return We().add(i.key);{let o=We();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const f=t.Pu.get(h);o=o.unionWith(f.view.tu)}return o}}function rw(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Z0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LR.bind(null,e),e.hu.J_=xR.bind(null,e.eventManager),e.hu.pu=SR.bind(null,e.eventManager),e}function BR(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MR.bind(null,e),e}class Vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return qA(this.persistence,new HA,e.initialUser,this.serializer)}Du(e){return new L0(sp.Vi,this.serializer)}bu(e){return new ZA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vc.provider={build:()=>new Vc};class HR extends Vc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){et(this.persistence.referenceDelegate instanceof Nc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new RA(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new L0(i=>Nc.Vi(i,t),this.serializer)}}class If{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>hv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=UR.bind(null,this.syncEngine),await ER(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IR}()}createDatastore(e){const t=Jc(e.databaseInfo.databaseId),i=function(l){return new iR(l)}(e.databaseInfo);return function(l,h,f,g){return new lR(l,h,f,g)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,h,f){return new cR(i,o,l,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>hv(this.syncEngine,t,0),function(){return sv.C()?new sv:new eR}())}createSyncEngine(e,t){return function(o,l,h,f,g,_,E){const T=new PR(o,l,h,f,g,_);return E&&(T.fu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Fe(o);fe(Xs,"RemoteStore shutting down."),l.Ia.add(5),await Dl(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}If.provider={build:()=>new If};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="FirestoreClient";class $R{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=Gf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async h=>{fe(ws,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(fe(ws,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=fp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Yd(r,e){r.asyncQueue.verifyOperationInProgress(),fe(ws,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener(async o=>{i.isEqual(o)||(await j0(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>{ps("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{fe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{ps("Terminating Firestore due to IndexedDb database deletion failed",o)})}),r._offlineComponents=e}async function fv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await WR(r);fe(ws,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(i=>av(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,o)=>av(e.remoteStore,o)),r._onlineComponents=e}async function WR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(ws,"Using user provided OfflineComponentProvider");try{await Yd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;ps("Error using user provided cache. Falling back to memory cache: "+t),await Yd(r,new Vc)}}else fe(ws,"Using default OfflineComponentProvider"),await Yd(r,new HR(void 0));return r._offlineComponents}async function sw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(ws,"Using user provided OnlineComponentProvider"),await fv(r,r._uninitializedComponentsProvider._online)):(fe(ws,"Using default OnlineComponentProvider"),await fv(r,new If))),r._onlineComponents}function qR(r){return sw(r).then(e=>e.syncEngine)}async function xf(r){const e=await sw(r),t=e.eventManager;return t.onListen=bR.bind(null,e.syncEngine),t.onUnlisten=DR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=VR.bind(null,e.syncEngine),t}function GR(r,e,t={}){const i=new cs;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,f,g,_){const E=new iw({next:C=>{E.Ou(),h.enqueueAndForget(()=>K0(l,T));const j=C.docs.has(f);!j&&C.fromCache?_.reject(new Te(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&C.fromCache&&g&&g.source==="server"?_.reject(new Te(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(C)},error:C=>_.reject(C)}),T=new Q0(Wc(f.path),E,{includeMetadataChanges:!0,ka:!0});return G0(l,T)}(await xf(r),r.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="firestore.googleapis.com",mv=!0;class gv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aw,this.ssl=mv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:mv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CA)throw new Te(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ow((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new eC;switch(i.type){case"firstParty":return new iC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=pv.get(t);i&&(fe("ComponentProvider","Removing Datastore"),pv.delete(t),i.terminate())}(this),Promise.resolve()}}function KR(r,e,t,i={}){var o;r=Mr(r,eh);const l=aa(e),h=r._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${t}`;l&&(Gv(`https://${g}`),Kv("Firestore",!0)),h.host!==aw&&h.host!==g&&ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _=Object.assign(Object.assign({},h),{host:g,ssl:l,emulatorOptions:i});if(!ds(_,f)&&(r._setSettings(_),i.mockUserToken)){let E,T;if(typeof i.mockUserToken=="string")E=i.mockUserToken,T=sn.MOCK_USER;else{E=WT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new Te(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new sn(C)}r._authCredentials=new tC(new q_(E,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new th(this.firestore,e,this._query)}}class St{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(bl(t,St._jsonSchema))return new St(e,i||null,new Re(ct.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:Nt("string",St._jsonSchemaVersion),referencePath:Nt("string")};class hs extends th{constructor(e,t,i){super(e,t,Wc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new Re(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Xi(r,e,...t){if(r=Ct(r),K_("collection","path",e),r instanceof eh){const i=ct.fromString(e,...t);return by(i),new hs(r,null,i)}{if(!(r instanceof St||r instanceof hs))throw new Te(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ct.fromString(e,...t));return by(i),new hs(r.firestore,null,i)}}function wr(r,e,...t){if(r=Ct(r),arguments.length===1&&(e=Gf.newId()),K_("doc","path",e),r instanceof eh){const i=ct.fromString(e,...t);return Py(i),new St(r,null,new Re(i))}{if(!(r instanceof St||r instanceof hs))throw new Te(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ct.fromString(e,...t));return Py(i),new St(r.firestore,r instanceof hs?r.converter:null,new Re(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="AsyncQueue";class vv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new F0(this,"async_queue_retry"),this.oc=()=>{const i=Qd();i&&fe(yv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Qd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Qd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new cs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!fa(e))throw e;fe(yv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,yi("INTERNAL UNHANDLED ERROR: ",_v(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=dp.createAndSchedule(this,e,t,i,l=>this.lc(l));return this.ec.push(o),o}ac(){this.tc&&Ve(47125,{hc:_v(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function _v(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(r){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class ia extends eh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new vv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vv(e),this._firestoreClient=void 0,await e}}}function QR(r,e){const t=typeof r=="object"?r:Xv(),i=typeof r=="string"?r:Sc,o=Nf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=HT("firestore");l&&KR(o,...l)}return o}function yp(r){if(r._terminated)throw new Te(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||YR(r),r._firestoreClient}function YR(r){var e,t,i;const o=r._freezeSettings(),l=function(f,g,_,E){return new wC(f,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,ow(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new $R(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ir(Jt.fromBase64String(e))}catch(t){throw new Te(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ir(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bl(e,ir._jsonSchema))return ir.fromBase64String(e.bytes)}}ir._jsonSchemaVersion="firestore/bytes/1.0",ir._jsonSchema={type:Nt("string",ir._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(bl(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:Nt("string",Br._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bl(e,Hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Hr(e.vectorValues);throw new Te(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:Nt("string",Hr._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=/^__.*__$/;class XR{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new kl(e,this.data,t,this.fieldTransforms)}}class lw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ec:r})}}class ih{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ih(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Oc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(uw(this.Ec)&&JR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class ZR{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Jc(e)}Dc(e,t,i,o=!1){return new ih({Ec:e,methodName:t,bc:i,path:Yt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cw(r){const e=r._freezeSettings(),t=Jc(r._databaseId);return new ZR(r._databaseId,!!e.ignoreUndefinedProperties,t)}function eP(r,e,t,i,o,l={}){const h=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);_p("Data must be an object, but it was:",h,i);const f=hw(i,h);let g,_;if(l.merge)g=new zn(h.fieldMask),_=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const T of l.mergeFields){const C=Sf(e,T,t);if(!h.contains(C))throw new Te(Q.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);fw(E,C)||E.push(C)}g=new zn(E),_=h.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,_=h.fieldTransforms;return new XR(new An(f),g,_)}class sh extends rh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sh}}function tP(r,e,t){return new ih({Ec:3,bc:e.settings.bc,methodName:r._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vp extends rh{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=tP(this,e,!0),i=this.vc.map(l=>Ol(l,t)),o=new ta(i);return new GC(e.path,o)}isEqual(e){return e instanceof vp&&ds(this.vc,e.vc)}}function nP(r,e,t,i){const o=r.Dc(1,e,t);_p("Data must be an object, but it was:",o,i);const l=[],h=An.empty();Es(i,(g,_)=>{const E=wp(e,g,t);_=Ct(_);const T=o.gc(E);if(_ instanceof sh)l.push(E);else{const C=Ol(_,T);C!=null&&(l.push(E),h.set(E,C))}});const f=new zn(l);return new lw(h,f,o.fieldTransforms)}function rP(r,e,t,i,o,l){const h=r.Dc(1,e,t),f=[Sf(e,i,t)],g=[o];if(l.length%2!=0)throw new Te(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)f.push(Sf(e,l[C])),g.push(l[C+1]);const _=[],E=An.empty();for(let C=f.length-1;C>=0;--C)if(!fw(_,f[C])){const j=f[C];let W=g[C];W=Ct(W);const H=h.gc(j);if(W instanceof sh)_.push(j);else{const F=Ol(W,H);F!=null&&(_.push(j),E.set(j,F))}}const T=new zn(_);return new lw(E,T,h.fieldTransforms)}function Ol(r,e){if(dw(r=Ct(r)))return _p("Unsupported field value:",e,r),hw(r,e);if(r instanceof rh)return function(i,o){if(!uw(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,o){const l=[];let h=0;for(const f of i){let g=Ol(f,o.yc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(r,e)}return function(i,o){if((i=Ct(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $C(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ht.fromDate(i);return{timestampValue:kc(o.serializer,l)}}if(i instanceof ht){const l=new ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kc(o.serializer,l)}}if(i instanceof Br)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ir)return{bytesValue:R0(o.serializer,i._byteString)};if(i instanceof St){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:rp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Hr)return function(h,f){return{mapValue:{fields:{[r0]:{stringValue:i0},[Cc]:{arrayValue:{values:h.toArray().map(_=>{if(typeof _!="number")throw f.wc("VectorValues must only contain numeric values.");return ep(f.serializer,_)})}}}}}}(i,o);throw o.wc(`Unsupported field value: ${Kf(i)}`)}(r,e)}function hw(r,e){const t={};return J_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(r,(i,o)=>{const l=Ol(o,e.Vc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function dw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ht||r instanceof Br||r instanceof ir||r instanceof St||r instanceof rh||r instanceof Hr)}function _p(r,e,t){if(!dw(t)||!Q_(t)){const i=Kf(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function Sf(r,e,t){if((e=Ct(e))instanceof nh)return e._internalPath;if(typeof e=="string")return wp(r,e);throw Oc("Field path arguments must be of type string or ",r,!1,void 0,t)}const iP=new RegExp("[~\\*/\\[\\]]");function wp(r,e,t){if(e.search(iP)>=0)throw Oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new nh(...e.split("."))._internalPath}catch{throw Oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Oc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new Te(Q.INVALID_ARGUMENT,f+r+g)}function fw(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sP extends pw{data(){return super.data()}}function mw(r,e){return typeof e=="string"?wp(r,e):e instanceof nh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Te(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aP{convertValue(e,t="none"){switch(vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Es(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Cc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>xt(h.doubleValue));return new Hr(l)}convertGeoPoint(e){return new Br(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Hc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=gs(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ct.fromString(e);et(V0(i),9688,{name:e});const o=new Tl(i.get(1),i.get(3)),l=new Re(i.popFirst(5));return o.isEqual(t)||yi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qs extends pw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(mw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Qs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qs._jsonSchema={type:Nt("string",Qs._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class pc extends Qs{data(e={}){return super.data(e)}}class Yo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new rl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new pc(this._firestore,this._userDataWriter,i.key,i,new rl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(f=>{const g=new pc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new rl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const g=new pc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new rl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return f.type!==0&&(_=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:uP(f.type),doc:g,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(r){r=Mr(r,St);const e=Mr(r.firestore,ia);return GR(yp(e),r._key).then(t=>vw(e,r,t))}Yo._jsonSchemaVersion="firestore/querySnapshot/1.0",Yo._jsonSchema={type:Nt("string",Yo._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class gw extends aP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function il(r,e,t){r=Mr(r,St);const i=Mr(r.firestore,ia),o=lP(r.converter,e,t);return yw(i,[eP(cw(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Ur.none())])}function rc(r,e,t,...i){r=Mr(r,St);const o=Mr(r.firestore,ia),l=cw(o);let h;return h=typeof(e=Ct(e))=="string"||e instanceof nh?rP(l,"updateDoc",r._key,e,t,i):nP(l,"updateDoc",r._key,e),yw(o,[h.toMutation(r._key,Ur.exists(!0))])}function Mo(r,...e){var t,i,o;r=Ct(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||wv(e[h])||(l=e[h++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(wv(e[h])){const T=e[h];e[h]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[h+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[h+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let g,_,E;if(r instanceof St)_=Mr(r.firestore,ia),E=Wc(r._key.path),g={next:T=>{e[h]&&e[h](vw(_,r,T))},error:e[h+1],complete:e[h+2]};else{const T=Mr(r,th);_=Mr(T.firestore,ia),E=T._query;const C=new gw(_);g={next:j=>{e[h]&&e[h](new Yo(_,C,T,j))},error:e[h+1],complete:e[h+2]},oP(r._query)}return function(C,j,W,H){const F=new iw(H),ee=new Q0(j,F,W);return C.asyncQueue.enqueueAndForget(async()=>G0(await xf(C),ee)),()=>{F.Ou(),C.asyncQueue.enqueueAndForget(async()=>K0(await xf(C),ee))}}(yp(_),E,f,g)}function yw(r,e){return function(i,o){const l=new cs;return i.asyncQueue.enqueueAndForget(async()=>OR(await qR(i),o,l)),l.promise}(yp(r),e)}function vw(r,e,t){const i=t.docs.get(e._key),o=new gw(r);return new Qs(r,o,e._key,i,new rl(t.hasPendingWrites,t.fromCache),e.converter)}function Tv(...r){return new vp("arrayUnion",r)}(function(e,t=!0){(function(o){ha=o})(ua),Jo(new Ys("firestore",(i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new ia(new nC(i.getProvider("auth-internal")),new sC(h,i.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Te(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(_.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),ls(xy,Sy,e),ls(xy,Sy,"esm2017")})();const Iv=({rating:r,onRatingChange:e,readOnly:t=!1})=>{const i=[1,2,3,4,5];return v.jsx("div",{className:"star-rating",children:i.map(o=>v.jsx("span",{className:`star ${o<=r?"filled":""}`,"data-value":o,onClick:()=>!t&&e(o),onMouseOver:l=>{if(!t){const h=l.currentTarget;Array.from(h.parentNode.children).forEach(g=>{parseInt(g.dataset.value)<=o?g.classList.add("filled"):g.classList.remove("filled")})}},onMouseOut:l=>{if(!t){const h=l.currentTarget;Array.from(h.parentNode.children).forEach(g=>{parseInt(g.dataset.value)<=r?g.classList.add("filled"):g.classList.remove("filled")})}},style:{cursor:t?"default":"pointer"},children:""},o))})},cP=["fuck","shit","asshole","bitch","cunt","damn","hell"],Cf=250,hP=["Certified Nursing Assistant (CNA)","Licensed Practical Nurse (LPN) / Licensed Vocational Nurse (LVN)","Registered Nurse (RN)","Nurse Practitioner (NP)","Family Nurse Practitioner (FNP)","Adult-Gerontology Nurse Practitioner (AGNP)","Pediatric Nurse Practitioner (PNP)","Psychiatric Mental Health Nurse Practitioner (PMHNP)","Acute Care Nurse Practitioner (ACNP)","Women's Health Nurse Practitioner (WHNP)","Certified Registered Nurse Anesthetist (CRNA)","Clinical Nurse Specialist (CNS)","Certified Nurse-Midwife (CNM)","Cardiac Nurse","Critical Care Nurse (ICU Nurse)","Emergency Nurse (ER Nurse)","Oncology Nurse","Pediatric Nurse","Labor and Delivery Nurse","Neonatal Intensive Care Unit (NICU) Nurse","Medical-Surgical Nurse","Geriatric Nurse","Psychiatric/Mental Health Nurse","Home Health Nurse","Public Health Nurse","School Nurse","Perioperative Nurse (Operating Room Nurse)","Rehabilitation Nurse","Hospice Nurse / Palliative Care Nurse","Forensic Nurse","Travel Nurse","Infusion Nurse","Nephrology Nurse","Diabetic Nurse","Dermatology Nurse","Gastroenterology Nurse","Orthopedic Nurse","Urology Nurse","Wound Care Nurse","Ostomy Care Nurse","Informatics Nurse","Research Nurse","Case Management Nurse","Nurse Educator","Nurse Administrator/Manager","Occupational Health Nurse","Flight Nurse / Transport Nurse","Correctional Nurse","IV Therapy Nurse","Transplant Nurse","Genetics Nurse","Pain Management Nurse","Military Nurse","Ambulatory Care Nurse","Endoscopy Nurse","Plastic Surgery Nurse","Rural Health Nurse","Parish Nurse / Faith Community Nurse","Camp Nurse","Hyperbaric Nurse","Legal Nurse Consultant","Integrative Health Nurse"],Fo=["Select your nursing field...",...hP.sort()];function xv(r){const e=r.toLowerCase();for(const t of cP)if(e.includes(t))return{isValid:!1,message:"Content contains inappropriate language."};return r.length>Cf?{isValid:!1,message:`Content exceeds ${Cf} character limit.`}:{isValid:!0,message:"Content is valid."}}let dP=class extends ci.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ReviewsHubPage ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?v.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-120px)] p-4 bg-red-100 text-red-800 rounded-lg shadow-md",children:[v.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong."}),v.jsx("p",{className:"text-lg text-center mb-2",children:"We're sorry, but there was an error loading this section."}),v.jsx("p",{className:"text-sm text-red-600 text-center",children:this.state.error&&this.state.error.toString()}),v.jsxs("details",{className:"mt-4 text-left text-sm p-2 bg-red-50 rounded-md",children:[v.jsx("summary",{className:"font-semibold cursor-pointer",children:"Error Details"}),v.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words text-red-700",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),v.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"mt-6 px-6 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-colors",children:"Try Again"})]}):this.props.children}};const _w=()=>{const{db:r,currentUserId:e,currentUserIsAnonymous:t,authReady:i,appId:o,showMessage:l,setShowAuthModal:h}=O.useContext(oh),[f,g]=O.useState(""),[_,E]=O.useState([]),[T,C]=O.useState([]),[j,W]=O.useState(!0),[H,F]=O.useState(!1),[ee,re]=O.useState(!1),[X,ve]=O.useState(20),[le,Se]=O.useState(null),[b,S]=O.useState(""),[x,k]=O.useState([]),[N,L]=O.useState([]),[R,ue]=O.useState(!1),[tt,it]=O.useState(!1),[pe,se]=O.useState(null),[he,oe]=O.useState([]),[V,q]=O.useState(!1),[me,xe]=O.useState(!1),[De,Ce]=O.useState(""),[je,te]=O.useState(0),[ne,we]=O.useState(Fo[0]),[Je,yt]=O.useState(""),[Ue,un]=O.useState([]),[Pn,At]=O.useState(!1),[ar,Hn]=O.useState(!1),[mn,Vt]=O.useState({}),[gn,Ir]=O.useState({}),[bn,Ee]=O.useState(!1),[Oe,dt]=O.useState(""),[ft,$n]=O.useState(""),[qr,kn]=O.useState(!1),[Wn,xr]=O.useState(""),[Sr,Ei]=O.useState(""),[Ti,Ii]=O.useState(!0),[Cr,qn]=O.useState(null),Ar=ci.useRef(null),Gn=ci.useRef(null),Xt=ci.useRef(null),Nn=ci.useRef(null),Gr=ci.useRef(null);console.log("ReviewsHubPage: Component rendered."),O.useEffect(()=>{if(i&&r&&e&&!t)try{const G=M_(r.app);G.currentUser&&G.currentUser.uid===e?qn(G.currentUser.displayName):qn(null)}catch(G){console.error("ReviewsHubPage: Error getting auth instance or current user:",G),qn(null)}else qn(null)},[i,e,t,r]),O.useEffect(()=>{let G=()=>{};if(console.log("ReviewsHubPage: useEffect for hospital onSnapshot. DB, AppId Ready:",!!r,!!o),r&&o){W(!0),F(!1);const ke=Xi(r,`artifacts/${o}/public/data/hospitals`);G=Mo(ke,Ne=>{console.log("ReviewsHubPage: onSnapshot triggered for hospitals.");const Ae=[];Ne.forEach(He=>{const Et=He.data();Et.name&&Ae.push({id:He.id,name:Et.name,location:Et.location||""})}),Ae.sort((He,Et)=>He.name.localeCompare(Et.name)),console.log("ReviewsHubPage: Fetched Hospitals from snapshot:",Ae.length),E(Ae),W(!1),F(Ae.length===0)},Ne=>{console.error("ReviewsHubPage: Error fetching hospitals with onSnapshot:",Ne),l("Error loading hospitals.","error"),W(!1),F(!0)})}else W(!0),E([]),C([]),F(!1),re(!1);return()=>{console.log("ReviewsHubPage: Cleaning up hospital onSnapshot listener."),G()}},[r,o,Xi,Mo,l]);const Kn=O.useCallback(async G=>{if(G.preventDefault(),!e||t){l("You must be logged in to add a hospital. Please sign up or log in.","error"),h(!0);return}if(!r||!o){l("Firebase not ready to add a hospital.","error");return}if(!Oe.trim()||!ft.trim()){l("Please enter both hospital name and location.","error");return}try{const Ne={id:Date.now().toString(),name:Oe.trim(),location:ft.trim()};E(He=>[...He,Ne].sort((Et,rt)=>Et.name.localeCompare(rt.name))),dt(""),$n(""),Ee(!1);const Ae=wr(Xi(r,`artifacts/${o}/public/data/hospitals`));await il(Ae,{name:Ne.name,location:Ne.location,createdAt:new Date().toISOString(),createdBy:e}),l("Hospital added successfully! You can now add doctors to it.","success"),Nn.current&&setTimeout(()=>{const He=document.querySelector(`button.bg-gray-100[data-hospital-name="${Ne.name}"]`);He&&He.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(ke){console.error("ReviewsHubPage: Error adding hospital:",ke),l(`Error adding hospital: ${ke.message}`,"error"),E(Ne=>Ne.filter(Ae=>Ae.id!==tempId))}},[e,t,r,o,Oe,ft,l,Xi,wr,il,h]);O.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering hospitals triggered. HospitalInput:",f,"CurrentDisplayCount:",X);const G=f.trim().toLowerCase(),ke=_.filter(Ne=>Ne.name.toLowerCase().includes(G)||Ne.location&&Ne.location.toLowerCase().includes(G));C(ke.slice(0,X)),re(ke.length>X),F(ke.length===0&&!j)},[_,f,X,j]);const Is=O.useCallback(()=>{ve(G=>G+20)},[]),Kr=O.useCallback(async G=>{if(console.log("ReviewsHubPage: handleHospitalSelect called for hospital:",G.name),Se(G),console.log("ReviewsHubPage: Populating hospitalInput with:",G.name),g(G.name),S(""),ue(!0),it(!1),k([]),L([]),kn(!1),!r||!o||!G.id){l("Firebase or hospital ID missing for fetching doctors.","error"),ue(!1),it(!0);return}const ke=Xi(r,`artifacts/${o}/public/data/hospitals/${G.id}/doctors`);return Mo(ke,Ae=>{console.log("ReviewsHubPage: onSnapshot triggered for doctors.");const He=[];Ae.forEach(qe=>{const Ge=qe.data(),yn=Ge.ratings||[],Si=yn.length>0?yn.reduce((Ci,Ai)=>Ci+(Ai.stars||0),0)/yn.length:0;Ge.name&&He.push({id:qe.id,hospitalId:G.id,...Ge,averageRating:Si,numReviews:yn.length})}),He.sort((qe,Ge)=>qe.name.localeCompare(Ge.name)),console.log("ReviewsHubPage: Fetched Doctors from snapshot for selected hospital:",He.length),k(He),ue(!1),it(He.length===0);const Et=b.trim().toLowerCase(),rt=He.filter(qe=>qe.name.toLowerCase().includes(Et)||qe.specialty&&qe.specialty.toLowerCase().includes(Et));L(rt)},Ae=>{console.error("ReviewsHubPage: Error fetching doctors with onSnapshot:",Ae),l("Error loading doctors.","error"),ue(!1),it(!0)})},[r,o,l,b,Xi,Mo]);O.useEffect(()=>{le&&Ar.current&&document.activeElement!==document.getElementById("hospital-input")&&(console.log("ReviewsHubPage: Scrolling useEffect triggered for doctor selection section."),setTimeout(()=>{requestAnimationFrame(()=>{Ar.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[le]),O.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering doctors triggered. DoctorInput:",b);const G=b.trim().toLowerCase(),ke=x.filter(Ne=>Ne.name.toLowerCase().includes(G)||Ne.specialty&&Ne.specialty.toLowerCase().includes(G));L(ke)},[x,b]);const xs=O.useCallback(async G=>{if(G.preventDefault(),!e||t){l("You must be logged in to add a doctor. Please sign up or log in.","error"),h(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!le||!le.id){l("Please select a hospital first to add a doctor.","error");return}if(!Wn.trim()||!Sr.trim()){l("Please enter both doctor name and specialty.","error");return}try{const Ne={id:Date.now().toString(),hospitalId:le.id,name:Wn.trim(),specialty:Sr.trim(),ratings:[],averageRating:0,numReviews:0};k(He=>[...He,Ne].sort((Et,rt)=>Et.name.localeCompare(rt.name))),xr(""),Ei(""),kn(!1);const Ae=wr(Xi(r,`artifacts/${o}/public/data/hospitals/${le.id}/doctors`));await il(Ae,{name:Ne.name,specialty:Ne.specialty,ratings:[],createdAt:new Date().toISOString(),createdBy:e}),l(`Dr. ${Ne.name} added successfully to ${le.name}!`,"success"),Gr.current&&setTimeout(()=>{const He=document.querySelector(`button.bg-gray-100[data-doctor-name="${Ne.name}"]`);He&&He.scrollIntoView({behavior:"smooth",block:"center"})},500)}catch(ke){console.error("ReviewsHubPage: Error adding doctor:",ke),l(`Error adding doctor: ${ke.message}`,"error"),k(Ne=>Ne.filter(Ae=>Ae.id!==tempId))}},[e,t,r,o,le,Wn,Sr,l,Xi,wr,il,h]),lr=O.useCallback(async G=>{console.log("ReviewsHubPage: handleDoctorSelect called for doctor:",G.name),se(G),S(G.name),q(!0),xe(!1),Ii(!0),Gn.current&&(console.log("ReviewsHubPage: Scrolling to doctor reviews display section."),setTimeout(()=>{Gn.current.scrollIntoView({behavior:"smooth",block:"start"})},100))},[]);O.useEffect(()=>{let G=()=>{};if(pe&&r&&o){const ke=wr(r,`artifacts/${o}/public/data/hospitals/${pe.hospitalId}/doctors/${pe.id}`);console.log("ReviewsHubPage: Setting up onSnapshot for doctorDocRef:",ke.path),G=Mo(ke,Ne=>{var Ae;if(console.log("ReviewsHubPage: onSnapshot triggered for doctorDocRef."),q(!1),!Ne.exists()||!((Ae=Ne.data())!=null&&Ae.ratings)||Ne.data().ratings.length===0)console.log("ReviewsHubPage: No reviews or document data for this doctor found in snapshot."),xe(!0),oe([]);else{xe(!1);const Et=Ne.data().ratings||[];console.log("ReviewsHubPage: Fetched reviews from snapshot:",Et.length),Et.sort((qe,Ge)=>{const yn=qe.date?qe.date.seconds?qe.date.seconds*1e3:new Date(qe.date).getTime():0;return(Ge.date?Ge.date.seconds?Ge.date.seconds*1e3:new Date(Ge.date).getTime():0)-yn});const rt=Et.map(qe=>({...qe,date:qe.date&&typeof qe.date.toDate=="function"?qe.date.toDate():new Date(qe.date),comments:qe.comments?qe.comments.map(Ge=>({...Ge,date:Ge.date&&typeof Ge.date.toDate=="function"?Ge.date.toDate():new Date(Ge.date)})):[]}));oe(rt),console.log("ReviewsHubPage: Reviews state updated. Current reviews count:",rt.length)}},Ne=>{console.error("ReviewsHubPage: Error fetching reviews with onSnapshot:",Ne),l("Error loading reviews.","error"),q(!1),xe(!0)})}else oe([]),xe(!1),q(!1);return()=>{console.log("ReviewsHubPage: Cleaning up onSnapshot listener."),G()}},[pe,r,o,l,wr,Mo]);const Ss=O.useCallback(async()=>{if(console.log("ReviewsHubPage: handleSubmitReview called."),!e||t){l("You must be logged in to submit a review. Please sign up or log in.","error"),h(!0);return}if(!r||!o){l("Firebase not ready.","error");return}if(!le||!pe){l("Please select a hospital and doctor before submitting a review.","error");return}if(ne===Fo[0]||ne.trim()===""){l("Please select or type your nursing field.","error");return}const G=xv(De);if(!G.isValid){l(G.message,"error");return}if(je===0){l("Please select a star rating.","error");return}try{const ke=wr(r,`artifacts/${o}/public/data/hospitals/${le.id}/doctors/${pe.id}`),Ne={stars:je,comment:De,reviewerId:Cr||`RN-${e.substring(0,5)}`,date:new Date,hospitalName:le.name,doctorName:pe.name,nursingField:ne,comments:[]};console.log("ReviewsHubPage: Submitting new review:",Ne),await rc(ke,{ratings:Tv(Ne)}),Ce(""),te(0),we(Fo[0]),yt(""),l("Review submitted successfully!","success"),console.log("ReviewsHubPage: Review submitted successfully!")}catch(ke){console.error("ReviewsHubPage: Error adding review: ",ke),l(`Error submitting review: ${ke.message}`,"error")}},[e,t,le,pe,De,je,ne,r,o,l,wr,rc,Tv,h,Cr]),pt=O.useCallback(async(G,ke)=>{if(console.log("ReviewsHubPage: handleAddCommentToReview called."),!e||t){l("You must be logged in to add a comment. Please sign up or log in.","error"),h(!0);return}if(ke.trim()===""){l("Comment cannot be empty.","error");return}if(!le||!pe){l("Hospital or doctor not selected.","error");return}const Ne=xv(ke);if(!Ne.isValid){l(Ne.message,"error");return}try{console.log("ReviewsHubPage: Attempting to fetch doctor document for comment update.");const Ae=wr(r,`artifacts/${o}/public/data/hospitals/${le.id}/doctors/${pe.id}`),He=await Ev(Ae);if(He.exists()){let rt=[...He.data().ratings||[]];console.log("ReviewsHubPage: Current ratings from doc:",rt);const qe=rt.findIndex(Ge=>{const yn=Ge.date?typeof Ge.date.toDate=="function"?Ge.date.toDate().getTime():new Date(Ge.date).getTime():0;return console.log(`ReviewsHubPage: Comparing reviewDateMillis ${G} with review date ${yn}`),yn===G});if(qe!==-1){const Ge={text:ke,userId:Cr||`RN-${e.substring(0,5)}`,date:new Date};rt[qe].comments=rt[qe].comments||[],rt[qe].comments.push(Ge),console.log("ReviewsHubPage: New comment added to array. Updated ratings structure:",rt),console.log("ReviewsHubPage: Updating doc with new comments array."),await rc(Ae,{ratings:rt}),l("Comment added successfully!","success"),console.log("ReviewsHubPage: Comment added successfully to review index",qe,"for doctor",pe.id),Vt({}),Ir({})}else l("Error posting comment: Could not find review to update.","error"),console.error("ReviewsHubPage: Error: Review not found by timestamp for doctor",pe.id)}else l("Error posting comment: Doctor document not found.","error"),console.error("ReviewsHubPage: Doctor document not found for comment addition:",pe.id)}catch(Ae){console.error("ReviewsHubPage: Error adding comment to review: ",Ae),l(`Error posting comment: ${Ae.message}`,"error")}},[e,t,le,pe,r,o,l,wr,Ev,rc,h,Cr]),xi=O.useCallback(()=>{if(!e||t){l("You must be logged in to write a review. Please sign up or log in.","error"),h(!0);return}Hn(!0),Xt.current&&Xt.current.scrollIntoView({behavior:"smooth",block:"start"})},[e,t,l,h]),Dn=O.useCallback(()=>{Hn(!1),Gn.current&&Gn.current.scrollIntoView({behavior:"smooth",block:"start"})},[]),Qr=G=>{const ke=G.target.value;if(yt(ke),we(ke),ke.length>0){const Ne=Fo.filter(Ae=>Ae.toLowerCase().includes(ke.toLowerCase())&&Ae!==Fo[0]);un(Ne),At(!0)}else un([]),At(!1),we(Fo[0])},Yr=G=>{yt(G),we(G),At(!1),un([])};return v.jsx(dP,{children:v.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8 pt-20",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:[" ",v.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:["Share Your RN",v.jsx("span",{className:"text-[#CC5500]",children:"Tea"}),"!"]}),v.jsxs("section",{id:"hospital-selection-section",className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[v.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Which hospital are you interested in?"}),v.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[v.jsx("input",{type:"text",id:"hospital-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Search for a hospital...",value:f,onChange:G=>g(G.target.value)}),v.jsx("button",{id:"search-hospital-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Hospital"})]}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("button",{onClick:()=>{!e||t?(l("Login or Sign Up to add a hospital.","info"),h(!0)):Ee(G=>!G)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:bn&&e&&!t?"Hide Add Hospital Form":v.jsxs(v.Fragment,{children:["or ",v.jsx("span",{className:"text-[#CC5500]",children:"Add Hospital"})]})}),bn&&(!e||t)&&v.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a hospital."}),bn&&e&&!t&&v.jsxs("form",{ref:Nn,onSubmit:Kn,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[v.jsx("input",{type:"text",placeholder:"New Hospital Name",value:Oe,onChange:G=>dt(G.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),v.jsx("input",{type:"text",placeholder:"Location (e.g., Boston, MA)",value:ft,onChange:G=>$n(G.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),v.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Hospital"}),v.jsx("button",{type:"button",onClick:()=>Ee(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]})]}),v.jsxs("div",{className:"mb-4 mt-8",children:[v.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Hospitals with reviews:"}),v.jsxs("div",{id:"hospitals-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[" ",j&&v.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading hospitals..."}),H&&!j&&v.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No hospitals found yet. Be the first to add a review!"}),T.map(G=>v.jsx("button",{"data-hospital-name":G.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>Kr(G),children:G.name},G.id))]}),ee&&v.jsx("button",{id:"load-more-hospitals-btn",className:"mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 w-full btn-hover-scale",onClick:Is,children:"Load More Hospitals"})]})]}),v.jsxs("section",{id:"doctor-selection-section",ref:Ar,className:`bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${le?"":"hidden"}`,children:[v.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Select a doctor"}),v.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4",children:[v.jsx("input",{type:"text",id:"doctor-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"e.g., Dr. Sarah Lee",value:b,onChange:G=>S(G.target.value)}),v.jsx("button",{id:"select-doctor-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:()=>{},disabled:!0,children:"Search Doctor"})]}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("button",{onClick:()=>{!e||t?(l("Login or Sign Up to add a doctor.","info"),h(!0)):kn(G=>!G)},className:"text-gray-600 hover:text-custom-beige font-semibold py-2 px-4 rounded-md transition-colors transform hover:scale-105 transition-transform duration-300 ease-in-out",children:qr&&e&&!t?"Hide Add Doctor Form":v.jsxs(v.Fragment,{children:["or ",v.jsx("span",{className:"text-[#CC5500]",children:"Add Doctor"})]})}),qr&&(!e||t)&&v.jsx("p",{className:"text-red-600 mt-2 text-center",children:"Please log in or sign up to add a doctor."}),qr&&e&&!t&&v.jsxs("form",{ref:Gr,onSubmit:xs,className:"space-y-4 mt-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[v.jsx("input",{type:"text",placeholder:"New Doctor Name",value:Wn,onChange:G=>xr(G.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),v.jsx("input",{type:"text",placeholder:"Specialty (e.g., Cardiologist)",value:Sr,onChange:G=>Ei(G.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-custom-beige",required:!0}),v.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Submit New Doctor"}),v.jsx("button",{type:"button",onClick:()=>kn(!1),className:"w-full bg-gray-400 text-white py-2 px-4 rounded-md hover:bg-gray-500 transition-colors mt-2",children:"Cancel"})]})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:["Doctors with reviews at ",v.jsx("span",{id:"display-selected-hospital",className:"text-gray-800",children:le==null?void 0:le.name}),":"]}),v.jsxs("div",{id:"doctors-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2","aria-live":"polite",children:[" ",R&&v.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading doctors..."}),tt&&!R&&v.jsx("p",{className:"text-500 italic w-full text-center",children:"No doctors found for this hospital yet."}),N.map(G=>v.jsx("button",{"data-doctor-name":G.name,className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-[#CC5500] hover:text-white transition duration-200 btn-hover-scale",onClick:()=>lr(G),children:`${G.name} (${G.specialty||"N/A"}) - Avg. ${G.averageRating.toFixed(1)}  (${G.numReviews})`},G.id))]})]})]}),v.jsxs("div",{id:"reviews-content-grid",className:`grid grid-cols-1 gap-8 ${pe?"":"hidden"}`,children:[e&&!t&&v.jsxs("section",{id:"review-submission-section",ref:Xt,className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6 cursor-pointer",onClick:()=>Ii(G=>!G),children:[v.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:["Share Some Tea for ",v.jsx("span",{className:"text-[#CC5500]",children:pe==null?void 0:pe.name})]}),v.jsx("button",{className:"text-gray-600 hover:text-[#CC5500] transition-colors",children:Ti?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]}),!Ti&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{htmlFor:"review-stars",className:"block text-gray-700 text-sm font-medium mb-2",children:"Rating"}),v.jsx(Iv,{rating:je,onRatingChange:te})]}),v.jsxs("div",{className:"mb-4 relative",children:[" ",v.jsx("label",{htmlFor:"nursing-field-input",className:"block text-gray-700 text-sm font-medium mb-2",children:"Which field of Nursing are you?"}),v.jsx("input",{type:"text",id:"nursing-field-input",className:"w-full p-3 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Start typing your nursing field...",value:Je,onChange:Qr,onFocus:()=>At(!0),onBlur:()=>setTimeout(()=>At(!1),100)}),Pn&&Ue.length>0&&v.jsx("ul",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto mt-1",children:Ue.map((G,ke)=>v.jsx("li",{className:"p-3 hover:bg-gray-100 cursor-pointer text-gray-800",onClick:()=>Yr(G),children:G},ke))})]}),v.jsx("textarea",{id:"review-text",className:"w-full p-3 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-custom-beige",rows:"6",placeholder:"Share your experience or review here...",value:De,onChange:G=>Ce(G.target.value),maxLength:Cf}),v.jsx("button",{id:"submit-review-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full btn-hover-scale",onClick:Ss,children:"Submit Review"}),v.jsxs("div",{className:"text-sm text-gray-500 mt-4",children:["Your User ID: ",v.jsx("span",{id:"display-user-id",children:e})]}),window.innerWidth<1024&&v.jsx("button",{id:"cancel-review-mobile-btn",className:"bg-gray-400 text-white px-4 py-2 rounded-full mt-4 w-full",onClick:Dn,children:"Cancel"})]})]}),v.jsxs("section",{id:"doctor-reviews-display",ref:Gn,className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[" ",v.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:["Here's the tea on ",v.jsx("span",{id:"display-selected-doctor-reviews",className:"text-[#CC5500] font-extrabold",children:pe&&pe.name?pe.name:""})]}),window.innerWidth<1024&&e&&!t&&v.jsxs("button",{id:"add-review-mobile-btn",className:"bg-[#001346] text-white px-5 py-2 rounded-md hover:bg-[#000A2C] transition duration-200 btn-hover-scale mb-4 w-full",onClick:xi,children:["Write a Review for ",pe==null?void 0:pe.name]}),V&&v.jsx("p",{className:"text-gray-700 italic text-center","aria-live":"polite",children:"Loading reviews..."})," ",me&&!V&&v.jsx("p",{className:"text-gray-700 italic text-center","aria-live":"polite",children:"No reviews found for this doctor yet. Be the first to add one!"})," ",he.length>0&&v.jsx("div",{id:"reviews-list",className:"space-y-6",children:he.map((G,ke)=>{const Ne={"@context":"https://schema.org","@type":"Review",itemReviewed:{"@type":"Physician",name:pe==null?void 0:pe.name,url:`https://www.myrntea.com/doctors/${pe==null?void 0:pe.id}`},reviewRating:{"@type":"Rating",ratingValue:G.stars,bestRating:5},author:{"@type":"Person",name:G.reviewerId},reviewBody:G.comment,datePublished:G.date instanceof Date?G.date.toISOString():new Date(G.date).toISOString()};return v.jsxs("div",{className:"p-5 rounded-xl shadow-lg border border-gray-100",style:{backgroundColor:"#fff8e7"},children:[" ",v.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(Ne)}}),v.jsxs("div",{className:"flex items-center mb-4",children:[v.jsxs("div",{className:"w-10 h-10 bg-custom-beige rounded-full flex items-center justify-center text-gray-800 font-bold text-lg mr-3 shadow-sm",children:[G.reviewerId?G.reviewerId.substring(0,5).toUpperCase():"RN"," "]}),v.jsxs("div",{children:[v.jsx("p",{className:"font-semibold text-gray-800",children:G.reviewerId}),v.jsx("p",{className:"text-sm text-gray-600",children:G.nursingField}),v.jsx("p",{className:"text-xs text-gray-500",children:G.date instanceof Date?G.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),v.jsxs("div",{className:"ml-auto",children:[" ",v.jsx(Iv,{rating:G.stars,onRatingChange:()=>{},readOnly:!0})]})]}),v.jsx("p",{className:"text-gray-800 leading-relaxed mb-4 text-base",children:G.comment}),v.jsxs("div",{className:"flex items-center gap-4 border-t border-gray-100 pt-3 mt-3",children:[v.jsxs("button",{className:"flex items-center text-gray-600 hover:text-blue-500 transition-colors",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Like (0)"]}),v.jsxs("button",{onClick:()=>{!e||t?(l("Login or Sign Up to add a comment.","info"),h(!0)):Vt(Ae=>({...Ae,[G.date.getTime()]:!Ae[G.date.getTime()]}))},className:"flex items-center text-gray-600 hover:text-green-500 transition-colors",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Comment (",G.comments?G.comments.length:0,")"]})]}),v.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[G.comments&&G.comments.length>0?v.jsx("div",{className:"space-y-3 mb-4",children:G.comments.map((Ae,He)=>v.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[v.jsxs("div",{className:"flex items-center mb-1",children:[v.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-800 text-xs font-semibold mr-2",children:Ae.userId?Ae.userId.substring(0,5).toUpperCase():"U"}),v.jsx("p",{className:"font-medium text-gray-800",children:Ae.userId}),v.jsx("p",{className:"text-xs text-gray-500 ml-auto",children:Ae.date instanceof Date?Ae.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),v.jsx("p",{className:"ml-8 text-gray-700",children:Ae.text})," "]},Ae.date.getTime()+"_"+He))}):v.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"No comments yet. Be the first!"}),mn[G.date.getTime()]&&e&&!t&&v.jsxs("div",{className:"flex mt-2",children:[v.jsx("input",{type:"text",placeholder:"Write a comment...",className:"flex-grow p-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:Ae=>{Ae.key==="Enter"&&Ae.target.value.trim()&&(pt(G.date.getTime(),Ae.target.value),Ae.target.value="")},value:gn[G.date.getTime()]||"",onChange:Ae=>Ir(He=>({...He,[G.date.getTime()]:Ae.target.value}))}),v.jsx("button",{className:"submit-comment-btn bg-custom-beige text-gray-800 px-4 py-2 rounded-r-md hover:opacity-90 transition duration-200 btn-hover-scale",onClick:()=>{const Ae=gn[G.date.getTime()];pt(G.date.getTime(),Ae)},children:"Post"})]})]})]},G.date.getTime()+ke)})})]})]})]})})},fP=()=>{const r=oa(),{auth:e,showMessage:t,appId:i}=O.useContext(oh),[o,l]=O.useState(""),[h,f]=O.useState(""),[g,_]=O.useState(""),[E,T]=O.useState(""),[C,j]=O.useState(""),[W,H]=O.useState(!1);O.useEffect(()=>{if(r.hash){const ee=r.hash.substring(1),re=document.getElementById(ee);re&&setTimeout(()=>{re.scrollIntoView({behavior:"smooth",block:"start"})},100)}},[r.hash]),O.useEffect(()=>{const ee=document.querySelectorAll(".revealable"),re=new IntersectionObserver((X,ve)=>{X.forEach(le=>{le.isIntersecting&&(le.target.style.opacity=1,ve.unobserve(le.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return ee.forEach(X=>{re.observe(X)}),()=>{ee.forEach(X=>{re.unobserve(X)})}},[]);const F=O.useCallback(async ee=>{var re;if(ee.preventDefault(),H(!0),C){console.warn("Honeypot field filled. Likely a bot submission. Discarding."),t("Thank you for your message!","success"),H(!1);return}if(!o.trim()||!h.trim()||!g.trim()||!E.trim()){t("Please fill in all required fields.","error"),H(!1);return}try{const ve=`${`https://${i}.cloudfunctions.net`}/sendContactEmail`,le=await fetch(ve,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{name:o,email:h,subject:g,message:E}})}),Se=await le.json();if(le.ok&&Se.data.success)t("Your message has been sent successfully!","success"),l(""),f(""),_(""),T(""),j("");else{const b=((re=Se.data)==null?void 0:re.message)||"Failed to send message. Please try again.";t(`Error: ${b}`,"error")}}catch(X){console.error("Error submitting contact form:",X),t(`An unexpected error occurred: ${X.message}`,"error")}finally{H(!1)}},[o,h,g,E,C,t,i]);return v.jsxs(v.Fragment,{children:[v.jsxs("section",{id:"home",className:"relative bg-custom-beige text-gray-800 py-24 px-6 md:px-10 lg:px-16 text-center rounded-lg mx-4 mb-2 shadow-lg overflow-hidden animate-fade-in section-hover",children:[v.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:v.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[v.jsx("defs",{children:v.jsx("pattern",{id:"dot-pattern",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:v.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"#FFC982"})})}),v.jsx("rect",{x:"0",y:"0",width:"100",height:"100",fill:"url(#dot-pattern)"})]})}),v.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[v.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 leading-tight animate-fade-in-down drop-shadow-md",children:"RNTea: Rate, Navigate, Trust."}),v.jsx("p",{className:"text-xl md:text-2xl mb-10 text-gray-700 animate-fade-in-up",children:" Do you really trust your Doctors? Let's hear from experienced RNs for a change. "}),v.jsx(Zi,{to:"#full-reviews-hub",className:"bg-white text-gray-800 hover:bg-gray-100 font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 hover:shadow-2xl border border-gray-200 animate-fade-in-up antialiased",children:" View All Reviews "})]})]}),v.jsx("section",{id:"about",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 mt-2 mb-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:v.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-center gap-12",children:[v.jsx("div",{className:"md:w-1/2 flex justify-center order-2 md:order-1 animate-slide-in-left",children:v.jsx("img",{src:"/Express-collage.jpg",alt:"Collage of diverse medical professionals working together",className:"rounded-lg shadow-xl border-4 w-full max-w-md object-cover",onError:ee=>{ee.target.onerror=null,ee.target.src="https://placehold.co/400x300/F0F0F0/888888?text=Image+Not+Loaded"}})}),v.jsxs("div",{className:"md:w-1/2 text-center md:text-left order-1 md:order-2 animate-slide-in-right",children:[v.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-6",children:"Our Philosophy"}),v.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-4 antialiased",children:"At RNTea, we believe in transparency and community to help you find the best care. Discover insights, share experiences, and make informed decisions with confidence."}),v.jsx("p",{className:"text-lg text-gray-700 leading-relaxed antialiased",children:"Our platform empowers Registered Nurses to share their honest experiences, providing a unique and invaluable perspective on healthcare providers. We aim to build a trusted resource for patients seeking reliable and empathetic care, while also helping nurses navigate career decisions whether it be short term travel contracts or a potential employer."}),v.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mt-4 font-semibold antialiased",children:"Now spill some RNTea!"})]})]})}),v.jsx("section",{id:"full-reviews-hub",className:"relative z-10 scroll-margin-top-adjusted revealable",children:v.jsx(_w,{})}),v.jsx("section",{id:"contact",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 my-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:v.jsxs("div",{className:"container mx-auto",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 text-center mb-16 animate-fade-in-down",children:"Contact Us!"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[v.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-left group relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),v.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Send us a Message"}),v.jsxs("form",{onSubmit:F,children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{htmlFor:"your-name",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Name"}),v.jsx("input",{type:"text",id:"your-name",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"John Doe",value:o,onChange:ee=>l(ee.target.value),required:!0})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{htmlFor:"your-email",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Email"}),v.jsx("input",{type:"email",id:"your-email",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"you@example.com",value:h,onChange:ee=>f(ee.target.value),required:!0})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{htmlFor:"subject",className:"block text-gray-700 text-sm font-medium mb-2",children:"Subject"}),v.jsx("input",{type:"text",id:"subject",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Regarding a review...",value:g,onChange:ee=>_(ee.target.value),required:!0})]}),v.jsxs("div",{className:"mb-6",children:[v.jsxs("label",{htmlFor:"your-message",className:"block text-gray-700 text-sm font-medium mb-2",children:["Your Message ",v.jsx("span",{className:"text-gray-500",children:"(optional)"})]}),v.jsx("textarea",{id:"your-message",rows:"5",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Share your experience... (optional)",value:E,onChange:ee=>T(ee.target.value),required:!0})]}),v.jsxs("div",{style:{display:"none"},children:[v.jsx("label",{htmlFor:"honeypot-field",children:"Leave this field blank"}),v.jsx("input",{type:"text",id:"honeypot-field",name:"honeypot",value:C,onChange:ee=>j(ee.target.value),tabIndex:"-1",autoComplete:"off"})]}),v.jsx("button",{type:"submit",className:"bg-[#FFDEB5] hover:bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-md w-full transition duration-300 ease-in-out",disabled:W,children:W?"Sending...":"Send Message"})]})]}),v.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-right group relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#CC5500] w-0 transition-all duration-300 ease-out group-hover:w-full"}),v.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Find Us"}),v.jsxs("div",{className:"mb-8",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Email Addresses"}),v.jsxs("div",{className:"flex items-center mb-3",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-gray-700 font-medium",children:"General Questions"}),v.jsx("a",{href:"mailto:questions@rntea.com",className:"text-blue-600 hover:underline",children:"questions@rntea.com"})]})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15.75c-2.648 0-5.195-.429-7.669-1.245a2.793 2.793 0 01-1.342-2.934 11.233 11.233 0 013.744-6.436 2.922 2.922 0 011.644-1.018 10.38 10.38 0 015.894 0 2.922 2.922 0 011.644 1.018 11.233 11.233 0 013.744 6.436 2.793 2.793 0 01-1.342 2.934z"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-gray-700 font-medium",children:"Business Inquiries"}),v.jsx("a",{href:"mailto:business@rntea.com",className:"text-blue-600 hover:underline",children:"business@rntea.com"})]})]})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Connect with Us"}),v.jsxs("div",{className:"flex space-x-6 justify-start",children:[v.jsx("a",{href:"https://facebook.com/rntea",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-600 hover:text-blue-700 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:v.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.271 0-4.192 1.552-4.192 4.615v3.385z"})})}),v.jsx("a",{href:"https://twitter.com/rntea_official",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-gray-800 hover:text-black transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:v.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 1200 1227",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",children:v.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 671.544L0 1226.37H105.866L515.414 750.206L852.076 1226.37H1200L714.163 519.284ZM569.165 687.828L521.617 619.927L144.036 79.6262H302.46L603.935 515.043L651.483 582.944L1055.03 1147.37H896.59L569.165 687.828Z"})})}),v.jsx("a",{href:"https://linkedin.com/company/rntea-4a8149371/",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-blue-700 hover:text-blue-800 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:v.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),v.jsx("a",{href:"https://instagram.com/rntea_official",target:"_blank",rel:"noopener noreferrer",className:"social-icon-hover text-pink-500 hover:text-pink-600 transition duration-300 transform hover:scale-110 w-10 h-10 flex items-center justify-center",children:v.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",children:v.jsx("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4c0 3.2-2.6 5.8-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8C2 4.6 4.6 2 7.8 2zm-.2 2A2.2 2.2 0 0 0 5.4 6.2v8.4c0 1.2.9 2.2 2.2 2.2h8.4a2.2 2.2 0 0 0 2.2-2.2V6.2A2.2 2.2 0 0 0 16.2 4H7.6zM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm6.5-3A1.5 1.5 0 1 0 18.5 7 1.5 1.5 0 0 0 18.5 4z"})})})]})]})]})]})]})})]})};function pP({onClose:r}){const e=O.useRef(null);return O.useEffect(()=>{const t=i=>{i.key==="Escape"&&r()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[r]),O.useEffect(()=>{const t=o=>{e.current&&!e.current.contains(o.target)&&r()},i=setTimeout(()=>{document.addEventListener("mousedown",t)},100);return()=>{clearTimeout(i),document.removeEventListener("mousedown",t)}},[r]),v.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{ref:e,className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative p-6 md:p-8",children:[v.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl font-bold leading-none","aria-label":"Close",children:""}),v.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-6 text-center",children:"The RNTea business Data Protection Protocol"}),v.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mt-8 mb-4 text-center",children:"Version 2.1 | Effective Date: July 12, 2025"}),v.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Preamble"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:'WHEREAS, RNTea business ("RNTea business," "we," "our") is a data-driven enterprise that values the trust placed in it by its users, clients, and partners ("Data Subjects," "you," "your");'}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the processing of personal data is a fundamental aspect of our operations;"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, the protection of personal data is a fundamental right, as articulated in international and national legal frameworks, including but not limited to the GDPR (Regulation (EU) 2016/679) and the CCPA (California Civil Code  1798.100 et seq.), and other applicable data protection laws;"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"WHEREAS, this Protocol is designed to be a comprehensive, transparent, and legally compliant framework governing our collection, use, retention, and disclosure of personal data;"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"THEREFORE, RNTea business hereby establishes this Data Protection Protocol, which applies to all processing of personal data by the company."}),v.jsx("hr",{className:"my-8 border-t border-gray-300"}),v.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article I: Foundational Principles of Data Processing"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business adheres to the following principles, which govern all data processing activities:"}),v.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[v.jsxs("li",{children:[v.jsx("strong",{children:"Lawfulness, Fairness, and Transparency:"})," We process personal data lawfully, fairly, and in a transparent manner. This Protocol serves as the primary instrument for achieving this transparency."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Purpose Limitation:"})," We collect personal data for specified, explicit, and legitimate purposes and do not process it in a manner incompatible with those purposes."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Data Minimization:"})," We collect only the personal data that is adequate, relevant, and limited to what is necessary in relation to the purposes for which it is processed."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Accuracy:"})," We take every reasonable step to ensure that personal data is accurate and, where necessary, kept up to date. Inaccurate personal data will be rectified or erased without undue delay."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Storage Limitation:"})," We retain personal data for no longer than is necessary for the purposes for which it is processed."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Integrity and Confidentiality:"})," We process personal data in a manner that ensures appropriate security, including protection against unauthorized or unlawful processing and against accidental loss, destruction, or damage, using appropriate technical and organizational measures."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Accountability:"})," As the data controller, RNTea business is responsible for, and must be able to demonstrate compliance with, the principles outlined in this Protocol."]})]}),v.jsx("hr",{className:"my-8 border-t border-gray-300"}),v.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article II: Categories of Personal Data Collected & Lawful Basis"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"The personal data we process falls into the following categories, with the corresponding lawful basis for processing:"}),v.jsx("div",{className:"overflow-x-auto mb-4",children:v.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Category of Data"}),v.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Examples of Data Collected"}),v.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Purpose of Processing"}),v.jsx("th",{className:"py-2 px-4 border-b text-left text-gray-700 bg-gray-50",children:"Lawful Basis for Processing"})]})}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Identity & Account Data"}),v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Name, email address, username, password (hashed), professional title"}),v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To create and manage your account, provide access to services, and communicate with you."}),v.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[v.jsx("strong",{children:"Contractual Necessity:"})," The processing is necessary for the performance of a contract to which you are a party."]})]}),v.jsxs("tr",{children:[v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Transactional Data"}),v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Billing address, payment information (tokenized), subscription history"}),v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To process payments, manage subscriptions, and maintain financial records."}),v.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[v.jsx("strong",{children:"Contractual Necessity:"})," Necessary to fulfill a transaction you initiated. ",v.jsx("strong",{children:"Legal Obligation:"})," To comply with tax and accounting laws."]})]}),v.jsxs("tr",{children:[v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Technical & Usage Data"}),v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"IP address, browser type, operating system, pages visited, time spent, clickstream data"}),v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To ensure the security and stability of our platform, analyze usage patterns, and improve our services."}),v.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[v.jsx("strong",{children:"Legitimate Interest:"})," Our legitimate interest in securing our platform, preventing fraud, and understanding user behavior to enhance our products."]})]}),v.jsxs("tr",{children:[v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Correspondence & Support Data"}),v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Content of emails, chat messages, or support tickets"}),v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"To respond to your inquiries, provide customer support, and resolve disputes."}),v.jsxs("td",{className:"py-2 px-4 border-b text-gray-700",children:[v.jsx("strong",{children:"Legitimate Interest:"})," To provide effective customer service. ",v.jsx("strong",{children:"Contractual Necessity:"})," To assist with issues related to our service."]})]}),v.jsxs("tr",{children:[v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Voluntarily Provided Data"}),v.jsx("td",{className:"py-2 px-4 border-b text-gray-700",children:"Your professional bio, profile picture, or survey responses"}),v.jsxs("td",{className:"py-2 px-4 text-gray-700",children:[v.jsx("strong",{children:"Consent:"})," Your explicit consent is requested and may be withdrawn at any time."]})]})]})]})}),v.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[v.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Legitimate Interest Balancing Test"}),v.jsx("br",{}),`The use of "Legitimate Interest" as a lawful basis is subject to a strict balancing test under the GDPR. A data controller must demonstrate that its interests in processing the data (e.g., security, service improvement) are not overridden by the fundamental rights and freedoms of the Data Subject. This requires a formal assessment and is a point of frequent legal scrutiny. In this model, we assert that the processing of technical data for security purposes is a legitimate interest vital to protecting all users, and a user's reasonable expectation is that such data would be processed for platform integrity.`]}),v.jsx("hr",{className:"my-8 border-t border-gray-300"}),v.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article III: Data Sharing and Disclosure"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"We may share your personal data with the following categories of recipients, always under the principles of data minimization and purpose limitation:"}),v.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[v.jsxs("li",{children:[v.jsx("strong",{children:"Service Providers:"})," We engage third-party service providers (data processors) who perform functions on our behalf, such as cloud hosting, payment processing, and analytics. These providers are bound by contractual obligations to protect your data and are prohibited from using it for any purpose other than providing their service to us."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Legal and Regulatory Authorities:"})," We will disclose your data when legally required to do so, such as in response to a subpoena, court order, or governmental request."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Business Transfers:"})," In the event of a merger, acquisition, or sale of assets, your personal data may be transferred as part of the business transaction, subject to the recipient agreeing to abide by a privacy policy consistent with this Protocol."]})]}),v.jsx("hr",{className:"my-8 border-t border-gray-300"}),v.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article IV: Data Subject Rights"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"You have the following rights concerning your personal data. To exercise these rights, please contact our Data Protection Officer at the address provided in Article VIII."}),v.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[v.jsxs("li",{children:[v.jsx("strong",{children:"Right to Access:"}),' You have the right to request a copy of the personal data we hold about you (a "Subject Access Request").']}),v.jsxs("li",{children:[v.jsx("strong",{children:"Right to Rectification:"})," You have the right to request the correction of inaccurate or incomplete personal data."]}),v.jsxs("li",{children:[v.jsx("strong",{children:'Right to Erasure ("Right to be Forgotten"):'})," You have the right to request the deletion of your personal data under certain circumstances (e.g., if the data is no longer necessary for the purposes for which it was collected)."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Right to Restrict Processing:"})," You have the right to request that we cease or limit the processing of your personal data under specific conditions."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Right to Data Portability:"})," You have the right to receive your personal data in a structured, commonly used, and machine-readable format and to transmit that data to another data controller."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Right to Object:"})," You have the right to object to the processing of your personal data based on legitimate interest or for direct marketing purposes."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Right to Withdraw Consent:"})," Where processing is based on your consent, you have the right to withdraw that consent at any time."]})]}),v.jsxs("div",{className:"annotation bg-blue-50 border-l-4 border-blue-200 text-blue-800 p-4 rounded-md my-4",children:[v.jsx("strong",{className:"font-semibold",children:"Scholarly Annotation: The Practicality of Rights"}),v.jsx("br",{}),'While these rights are fundamental, their implementation is not absolute. For instance, the "Right to Erasure" may be overridden by a legal obligation to retain data (e.g., financial records for tax purposes) or if the data is required for the establishment, exercise, or defense of legal claims. A robust privacy policy must manage user expectations by clarifying these limitations.']}),v.jsx("hr",{className:"my-8 border-t border-gray-300"}),v.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article V: Data Security"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"RNTea business implements appropriate technical and organizational measures to ensure a level of security appropriate to the risk. These measures include:"}),v.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[v.jsxs("li",{children:[v.jsx("strong",{children:"Pseudonymization and Encryption:"})," Where feasible, data is pseudonymized and sensitive data is encrypted both in transit and at rest."]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Access Controls:"}),' Access to personal data is restricted to authorized personnel on a "need-to-know" basis.']}),v.jsxs("li",{children:[v.jsx("strong",{children:"Security Audits:"})," We conduct regular security audits and vulnerability assessments."]})]}),v.jsx("hr",{className:"my-8 border-t border-gray-300"}),v.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VI: International Data Transfers"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"As a global company, your data may be transferred to and processed in countries outside your own. We ensure that any such transfer is lawful and adequately protected. For transfers of personal data from the European Union, we rely on established mechanisms such as Standard Contractual Clauses (SCCs)."}),v.jsx("hr",{className:"my-8 border-t border-gray-300"}),v.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VII: Contact Information"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"For any questions, concerns, or to exercise your rights under this Protocol, please contact our designated Data Protection Officer (DPO):"}),v.jsxs("ul",{className:"list-disc list-inside text-lg text-gray-700 space-y-2 mb-4",children:[v.jsxs("li",{children:[v.jsx("strong",{children:"DPO:"})," [Insert DPO Name]"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Email:"})," [Insert DPO Email]"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Mailing Address:"})," [Insert Mailing Address]"]})]}),v.jsx("hr",{className:"my-8 border-t border-gray-300"}),v.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Article VIII: Changes to This Protocol"}),v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"This Protocol may be amended from time to time. We will notify you of any material changes by posting the new Protocol on our website or by other means of communication. Your continued use of our services after a change indicates your acceptance of the updated terms."})]})})}const mP=({message:r,type:e})=>{if(!r)return null;const t=e==="success"?"bg-green-100":"bg-red-100",i=e==="success"?"text-green-700":"text-red-700";return v.jsx("div",{className:`p-3 rounded-md ${t} ${i} my-4 message-box-fade show`,children:r})},gP=({onClose:r})=>{var bn;const{signUpWithEmailPassword:e,signInWithEmailPassword:t,signInWithApple:i,linkAnonymousWithEmailPassword:o,linkAnonymousWithApple:l,auth:h,currentUserId:f,signInWithGoogle:g,db:_,appId:E}=O.useContext(oh),[T,C]=O.useState(!0),[j,W]=O.useState(""),[H,F]=O.useState(""),[ee,re]=O.useState(""),[X,ve]=O.useState(""),[le,Se]=O.useState(""),[b,S]=O.useState(""),[x,k]=O.useState(0),[N,L]=O.useState(null),[R,ue]=O.useState(""),[tt,it]=O.useState(!1),[pe,se]=O.useState(!1),[he,oe]=O.useState(""),[V,q]=O.useState(""),[me,xe]=O.useState(""),[De,Ce]=O.useState(""),[je,te]=O.useState(""),[ne,we]=O.useState(""),[Je,yt]=O.useState(""),Ue=O.useCallback((Ee,Oe)=>{Se(Ee),S(Oe),setTimeout(()=>{Se(""),S("")},5e3)},[]),un=(bn=h==null?void 0:h.currentUser)==null?void 0:bn.isAnonymous,Pn=O.useCallback(async Ee=>{if(console.log("checkEmailExists: Checking email:",Ee),!h)return console.error("Firebase Auth not initialized for email check."),!1;try{const Oe=await bS(h,Ee);return console.log("checkEmailExists: Sign-in methods for email:",Oe),Oe.length>0}catch(Oe){return console.error("Error checking email existence:",Oe),!1}},[h]);O.useEffect(()=>{if(!T&&x===2&&h&&!window.recaptchaVerifier){if(console.log("AuthModal: Attempting to initialize reCAPTCHA Verifier..."),typeof window.grecaptcha>"u"||!window.grecaptcha.ready){console.warn("AuthModal: grecaptcha script not fully loaded yet. Deferring initialization...");return}window.grecaptcha.ready(()=>{if(window.recaptchaVerifier){console.log("AuthModal: reCAPTCHA Verifier already exists, skipping re-initialization.");return}console.log("AuthModal: grecaptcha is ready. Creating RecaptchaVerifier...");try{if(!document.getElementById("recaptcha-container")){console.error("AuthModal: reCAPTCHA container 'recaptcha-container' not found!"),Ue("reCAPTCHA container missing. Verification may fail.","error");return}window.recaptchaVerifier=new V_(h,"recaptcha-container",{size:"invisible",callback:Oe=>{console.log("AuthModal: reCAPTCHA callback fired (solved):",Oe)},"expired-callback":()=>{console.log("AuthModal: reCAPTCHA expired."),Ue("Verification expired. Please try again.","error"),L(null),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset()},"error-callback":Oe=>{console.error("AuthModal: reCAPTCHA error callback:",Oe),Ue("Verification error. Please try again.","error"),L(null),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset()}}),window.recaptchaVerifier.render().then(Oe=>{console.log("AuthModal: reCAPTCHA rendered with widget ID:",Oe)}).catch(Oe=>{console.error("AuthModal: Error rendering reCAPTCHA:",Oe),Ue("Failed to initialize verification. Please refresh.","error"),delete window.recaptchaVerifier})}catch(Ee){console.error("AuthModal: Error creating RecaptchaVerifier instance:",Ee),Ue("Failed to initialize verification. Check console.","error")}})}return()=>{window.recaptchaVerifier&&(console.log("AuthModal: Cleaning up reCAPTCHA Verifier..."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset(),delete window.recaptchaVerifier)}},[T,x,h,Ue]);const At=O.useCallback(async()=>{if(Se(""),Ce(""),yt(""),!X.trim()){Ce("Please enter your phone number.");return}if(!X.startsWith("+")||X.trim().length<10){Ce('Phone number must start with a "+" and include country code (e.g., +11234567890).');return}if(!ne.trim()){yt("Please enter a username.");return}if(!h){Ue("Authentication service not ready.","error");return}if(!window.recaptchaVerifier||!(window.grecaptcha&&typeof window.grecaptcha.render=="function")){Ue("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available or grecaptcha not loaded.");return}it(!0);try{await window.recaptchaVerifier.verify();const Ee=await r1(h,X,window.recaptchaVerifier);L(Ee),Ue("Verification code sent! Please check your phone.","success")}catch(Ee){console.error("Error sending OTP:",Ee);let Oe="Failed to send code. Please try again.";Ee.code==="auth/invalid-phone-number"?Oe="Invalid phone number format. Please ensure it includes the country code (e.g., +11234567890).":Ee.code==="auth/too-many-requests"?Oe="Too many requests. Please try again later.":Ee.code==="auth/captcha-check-failed"&&(Oe="Security check failed. Please try again."),Ue(Oe,"error"),L(null),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset()}finally{it(!1)}},[X,ne,h,Ue]),ar=O.useCallback(async()=>{if(Se(""),te(""),!R.trim()){te("Please enter the verification code.");return}if(!N){Ue("No verification request found. Please send the code first.","error");return}se(!0);try{const Oe=(await N.confirm(R)).user;if(_&&Oe&&E)try{await il(wr(_,"artifacts",E,"users",Oe.uid),{email:Oe.email||null,phoneNumber:X,username:ne,createdAt:new Date},{merge:!0}),console.log("User profile with phone number and username info saved.")}catch(dt){console.error("Error saving user phone number and username info:",dt),Ue("Account created, but failed to save phone number and username.","warning")}else console.warn("Firestore DB, user, or appId not available, phone number and username info not saved.");Ue("Phone number verified and account created!","success"),r(),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset()}catch(Ee){console.error("Error verifying OTP:",Ee);let Oe="Failed to verify code. Please try again.";Ee.code==="auth/invalid-verification-code"?Oe="Invalid verification code. Please check the code and try again.":Ee.code==="auth/code-expired"&&(Oe="The verification code has expired. Please resend the code."),Ue(Oe,"error"),te("Invalid verification code. Please try again."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset()}finally{se(!1)}},[R,N,_,E,X,ne,Ue,r]),Hn=O.useCallback(async Ee=>{if(Ee.preventDefault(),Se(""),oe(""),q(""),xe(""),Ce(""),te(""),yt(""),console.log("handleNextStep: Current step BEFORE update:",x,"isLogin:",T),x===0){if(!j){oe("Please enter your email.");return}if(!T){const Oe=await Pn(j);if(console.log("handleNextStep: Email exists check result:",Oe),Oe){oe("This email is already registered. Please sign in or use a different email.");return}}k(Oe=>Oe+1)}else if(x===1){if(!H){q("Please enter your password.");return}if(H.length<6){q("Password must be at least 6 characters long.");return}if(!ee){xe("Please confirm your password.");return}if(H!==ee){xe("Passwords do not match.");return}k(Oe=>Oe+1)}else if(x===2){if(!ne.trim()){yt("Please enter a username.");return}if(!X.trim()){Ce("Please enter your phone number.");return}if(!N){if(!window.recaptchaVerifier||!(window.grecaptcha&&typeof window.grecaptcha.render=="function")){Ue("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available or grecaptcha not loaded in handleNextStep.");return}await At()}}console.log("handleNextStep: Current step AFTER update:",x)},[j,H,ee,X,ne,x,T,Pn,At,N,Ue]),mn=O.useCallback(()=>{Se(""),oe(""),q(""),xe(""),Ce(""),te(""),yt(""),console.log("handlePrevStep: Current step BEFORE update:",x),x>0&&(k(Ee=>Ee-1),L(null),ue(""),x===2&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset()),console.log("handlePrevStep: Current step AFTER update:",x)},[x]),Vt=async Ee=>{if(Ee.preventDefault(),Se(""),oe(""),q(""),xe(""),Ce(""),te(""),yt(""),T){if(!j){oe("Please enter your email.");return}if(!H){q("Please enter your password.");return}try{un?await o(j,H):await t(j,H)}catch(Oe){console.error("Unexpected error during sign-in process:",Oe),Ue(`An unexpected error occurred: ${Oe.message}`,"error")}}else if(x<2)await Hn(Ee);else if(x===2&&!N){if(!window.recaptchaVerifier||!(window.grecaptcha&&typeof window.grecaptcha.render=="function")){Ue("Verification system not ready. Please wait a moment and try again.","error"),console.error("AuthModal: reCAPTCHA verifier not available or grecaptcha not loaded in handleAuthAction.");return}await At()}else x===2&&N&&await ar()},gn=async()=>{await g()&&r()},Ir=O.useCallback(()=>{C(Ee=>!Ee),W(""),F(""),re(""),ve(""),we(""),Se(""),S(""),k(0),L(null),ue(""),oe(""),q(""),xe(""),Ce(""),te(""),yt(""),window.recaptchaVerifier&&(console.log("AuthModal: Clearing and deleting reCAPTCHA Verifier on mode toggle."),window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset(),delete window.recaptchaVerifier)},[]);return v.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4 font-inter",children:v.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md relative animate-scale-in",children:[v.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold transition-transform duration-200 transform hover:scale-110",children:""}),v.jsx("h2",{className:"text-3xl font-extrabold text-gray-800 mb-6 text-center",children:T?"Sign In":"Sign Up"}),le&&v.jsx("div",{className:`p-3 mb-4 rounded-md text-center text-sm font-medium
                        ${b==="error"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:le}),v.jsxs("form",{onSubmit:Vt,className:"space-y-4 flex flex-col items-center",children:[v.jsx("div",{className:"overflow-hidden w-full",children:v.jsxs("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${T?0:x*100}%)`},children:[T&&v.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Email"}),v.jsx("input",{type:"email",id:"email",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${he?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com",value:j,onChange:Ee=>{W(Ee.target.value),oe("")},required:!0,"aria-invalid":!!he,"aria-describedby":he?"email-error":null}),he&&v.jsx("p",{id:"email-error",className:"text-red-500 text-xs mt-1 text-left",children:he})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Password"}),v.jsx("input",{type:"password",id:"password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${V?"border-red-500":"border-gray-300"}`,placeholder:"********",value:H,onChange:Ee=>{F(Ee.target.value),q("")},required:!0,"aria-invalid":!!V,"aria-describedby":V?"password-error":null}),V&&v.jsx("p",{id:"password-error",className:"text-red-500 text-xs mt-1 text-left",children:V})]})]}),!T&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:v.jsxs("div",{children:[v.jsx("label",{htmlFor:"signup-email",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Email"}),v.jsx("input",{type:"email",id:"signup-email",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${he?"border-red-500":"border-gray-300"}`,placeholder:"your.email@example.com",value:j,onChange:Ee=>{W(Ee.target.value),oe("")},required:!0,"aria-invalid":!!he,"aria-describedby":he?"signup-email-error":null}),he&&v.jsx("p",{id:"signup-email-error",className:"text-red-500 text-xs mt-1 text-left",children:he})]})}),v.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"signup-password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Password"}),v.jsx("input",{type:"password",id:"signup-password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${V?"border-red-500":"border-gray-300"}`,placeholder:"********",value:H,onChange:Ee=>{F(Ee.target.value),q("")},required:!0,"aria-invalid":!!V,"aria-describedby":V?"signup-password-error":null}),V&&v.jsx("p",{id:"signup-password-error",className:"text-red-500 text-xs mt-1 text-left",children:V})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"confirm-password",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Confirm Password"}),v.jsx("input",{type:"password",id:"confirm-password",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${me?"border-red-500":"border-gray-300"}`,placeholder:"********",value:ee,onChange:Ee=>{re(Ee.target.value),xe("")},required:!T,"aria-invalid":!!me,"aria-describedby":me?"confirm-password-error":null}),me&&v.jsx("p",{id:"confirm-password-error",className:"text-red-500 text-xs mt-1 text-left",children:me})]})]}),v.jsxs("div",{className:"w-full flex-shrink-0 space-y-4 px-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Username"}),v.jsx("input",{type:"text",id:"username",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${Je?"border-red-500":"border-gray-300"}`,placeholder:"Choose a username",value:ne,onChange:Ee=>{we(Ee.target.value),yt("")},disabled:tt||N,required:!T,"aria-invalid":!!Je,"aria-describedby":Je?"username-error":null}),Je&&v.jsx("p",{id:"username-error",className:"text-red-500 text-xs mt-1 text-left",children:Je})]}),N?v.jsxs("div",{className:"relative",children:[v.jsx("label",{htmlFor:"otp",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Enter Verification Code"}),v.jsx("input",{type:"text",id:"otp",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${je?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 123456",value:R,onChange:Ee=>{ue(Ee.target.value),te("")},required:!0,disabled:pe,"aria-invalid":!!je,"aria-describedby":je?"otp-error":null}),je&&v.jsx("p",{id:"otp-error",className:"text-red-500 text-xs mt-1 text-left",children:je}),v.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-left",children:["Code sent to ",X,"."]}),v.jsx("button",{type:"button",onClick:At,disabled:tt||pe,className:"w-full bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105 mt-2",children:tt?"Sending...":"Resend Code"})]}):v.jsxs("div",{className:"relative",children:[v.jsx("label",{htmlFor:"phoneNumber",className:"block text-gray-700 text-sm font-medium mb-2 text-left",children:"Phone Number"}),v.jsx("input",{type:"tel",id:"phoneNumber",className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent focus:shadow-md block ${De?"border-red-500":"border-gray-300"}`,placeholder:"e.g., +11234567890",value:X,onChange:Ee=>{ve(Ee.target.value),Ce("")},required:!T,disabled:tt,"aria-invalid":!!De,"aria-describedby":De?"phone-number-error":null}),v.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"For human verification purposes only! Include country code (e.g., +1)."}),v.jsx("div",{id:"recaptcha-container",className:"mt-4"})]})]})]})]})}),!T&&v.jsx("div",{className:"flex justify-center space-x-2 mt-4",children:[0,1,2].map(Ee=>v.jsx("span",{className:`block w-3 h-3 rounded-full transition-colors duration-300
                                        ${x===Ee?"bg-[#CC5500] scale-125":"bg-gray-300 hover:bg-gray-400 cursor-pointer"}`,onClick:()=>k(Ee),role:"button",tabIndex:"0","aria-label":`Go to step ${Ee+1}`},Ee))}),v.jsxs("div",{className:"flex justify-between items-center mt-4 w-full px-4",children:[!T&&x>0&&v.jsx("button",{type:"button",onClick:mn,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hover:shadow-lg transform hover:scale-105 min-w-[100px]",children:"Previous"}),!T&&x===0&&v.jsx("div",{className:"flex-grow"}),v.jsx("button",{type:"submit",className:`font-bold py-3 px-6 rounded-full transition duration-300 shadow-lg hover:shadow-xl transform hover:scale-105
                                ${T?"bg-[#FFDEB5] text-gray-800 hover:bg-[#FFC982] w-full":"bg-[#CC5500] text-white hover:bg-[#A84500] w-auto ml-auto"}`,disabled:T&&(tt||pe)||!T&&x===2&&!N&&tt||!T&&x===2&&N&&pe,children:T?"Sign In":x===0||x===1?"Next":x===2&&!N?tt?"Sending Code...":"Send Code":pe?"Verifying...":"Verify Code"})]})]}),v.jsxs("div",{className:"mt-6 text-center",children:[v.jsxs("p",{className:"text-gray-600",children:[T?"Don't have an account? ":"Already have an account? ",v.jsx("button",{onClick:Ir,className:"text-[#CC5500] hover:underline font-semibold transition-colors duration-200",children:T?"Sign Up":"Sign In"})]}),T&&v.jsx("button",{onClick:()=>Ue("Password reset functionality not yet implemented.","info"),className:"text-[#CC5500] hover:underline text-sm mt-2 transition-colors duration-200",children:"Forgot Password?"})]}),v.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6 space-y-4",children:[v.jsx("p",{className:"text-center text-gray-600",children:"Or continue with"}),v.jsx("div",{className:"flex justify-center gap-4",children:v.jsxs("button",{onClick:gn,className:"flex items-center justify-center w-1/2 bg-white border border-gray-300 text-gray-800 py-3 px-4 rounded-full shadow-md hover:bg-gray-50 transition duration-300 transform hover:scale-105",children:[v.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{d:"M12.0003 4.75C14.0273 4.75 15.8053 5.438 17.1523 6.694L18.9643 4.882C17.0183 3.033 14.6063 2 12.0003 2C8.87533 2 6.07133 3.453 4.38633 5.859L6.04633 7.153C6.88233 5.761 8.39633 4.75 12.0003 4.75Z",fill:"#EA4335"}),v.jsx("path",{d:"M23.4999 12.272C23.4999 11.492 23.4249 10.721 23.2999 9.969H12.2009V14.51H18.7959C18.5919 15.534 17.9739 16.395 17.1199 16.989L18.7959 18.293C19.8669 17.335 20.6699 16.035 21.1899 14.51L23.4999 12.272Z",fill:"#4285F4"}),v.jsx("path",{d:"M6.04625 16.847L4.38625 18.141C5.97125 20.547 8.87525 22 12.0003 22C14.5943 22 17.0003 20.967 18.9353 19.14L17.1433 17.714C15.8053 18.528 14.0273 19.002 12.0003 19.002C8.39633 19.002 6.88233 17.991 6.04625 16.847Z",fill:"#34A853"}),v.jsx("path",{d:"M4.70725 14.51L2.39725 16.75C1.61525 15.226 1.12725 13.626 1.12725 12C1.12725 10.374 1.61525 8.774 2.39725 7.25L4.70725 9.488C4.24925 10.492 3.99925 11.25 3.99925 12C3.99925 12.75 4.24925 13.508 4.70725 14.51Z",fill:"#FBBC04"})]}),"Google"]})})]})]})})},oh=O.createContext(null),Ya=null,yP=null;class vP extends ci.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("App.jsx ErrorBoundary: Uncaught error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?v.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-100 text-red-800 p-4 rounded-lg shadow-lg m-4",children:[v.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong in App.jsx!"}),v.jsx("p",{className:"text-lg mb-2 text-center",children:"We're sorry, but there was an issue rendering the application. Details below:"}),v.jsxs("details",{className:"mt-4 text-left p-4 bg-red-50 rounded-lg border border-red-200 overflow-auto max-w-lg",children:[v.jsx("summary",{className:"font-semibold cursor-pointer text-red-700",children:"Click for Error Details"}),v.jsx("pre",{className:"mt-2 text-sm whitespace-pre-wrap break-words font-mono text-red-900",children:this.state.error&&this.state.error.toString()}),this.state.errorInfo&&v.jsxs("pre",{className:"mt-2 text-xs text-red-600 font-mono whitespace-pre-wrap break-words",children:["Component Stack: ",this.state.errorInfo.componentStack]})]})]}):this.props.children}}function _P(){const[r,e]=O.useState(null),[t,i]=O.useState(null),[o,l]=O.useState(null),[h,f]=O.useState(null),[g,_]=O.useState(!1),[E,T]=O.useState(!0),[C,j]=O.useState({text:"",type:""}),[W,H]=O.useState(!1),[F,ee]=O.useState(!1),re=oa();Lv();const[X,ve]=O.useState(!1),[le,Se]=O.useState(null),b=O.useRef(null),[S,x]=O.useState(!1),[k,N]=O.useState(!1),[L,R]=O.useState(0),ue=O.useCallback((te,ne)=>{j({text:te,type:ne}),setTimeout(()=>j({text:"",type:""}),5e3)},[]);O.useEffect(()=>{console.log("App.jsx: useEffect for Firebase Initialization triggered."),console.log("App.jsx: Current path detected by React Router:",re.pathname),(async()=>{try{console.log("App.jsx: Loading Firebase...");let ne=null,we="Unknown";const Je={apiKey:"AIzaSyBEwSVX9UY7-MNxeYwdbY0ZmDuXzYyt56g",authDomain:"rntea-cca78.firebaseapp.com",projectId:"rntea-cca78",storageBucket:"rntea-cca78.appspot.com",messagingSenderId:"806310857835",appId:"1:806310857835:web:b03b05847c818ee4fe352e",measurementId:"G-ZKBPS9FGE"};if(console.log("App.jsx DEBUG: Constructed viteConfig:",Je),Je.apiKey&&Je.projectId&&Je.appId)ne=Je,we="Vite Environment Variables (import.meta.env)";else if(!(Ya&&Ya.apiKey&&Ya.projectId&&Ya.appId))throw new Error("Firebase configuration is incomplete or missing from both Vite environment variables and Canvas setup. Please ensure either .env file is correct or Canvas variables are provided.");if(console.log(`App.jsx: Firebase config source: ${we}`),console.log("App.jsx: Firebase config being used (sensitive parts masked):",{apiKey:ne!=null&&ne.apiKey?"********":"N/A",authDomain:ne==null?void 0:ne.authDomain,projectId:ne==null?void 0:ne.projectId,storageBucket:ne==null?void 0:ne.storageBucket,messagingSenderId:ne==null?void 0:ne.messagingSenderId,appId:ne!=null&&ne.appId?"********":"N/A",measurementId:ne==null?void 0:ne.measurementId}),!ne||!ne.apiKey||!ne.projectId||!ne.appId)throw new Error(`Firebase configuration is incomplete from ${we}. Missing apiKey, projectId, or appId. This should not happen if previous checks passed.`);const yt=Jv(ne),Ue=M_(yt),un=QR(yt);e(yt),l(Ue),i(un),console.log("App.jsx: Firebase Loaded, Awaiting Auth...");const Pn=DS(Ue,async At=>{var ar,Hn;if(console.log("App.jsx: onAuthStateChanged - User status changed. User:",At),At)f(At.uid);else{console.log("App.jsx: No user found. Checking for custom token.");let mn=null;try{mn=typeof __initial_auth_token<"u"?__initial_auth_token:null}catch(Vt){console.warn("App.jsx: __initial_auth_token is not declared or accessible:",Vt)}if(mn){console.log("App.jsx: Signing in with custom token...");try{await CS(Ue,mn),f((ar=Ue.currentUser)==null?void 0:ar.uid),console.log("App.jsx: Custom token sign-in successful. Current user ID:",(Hn=Ue.currentUser)==null?void 0:Hn.uid)}catch(Vt){console.error("App.jsx: Error during custom token authentication:",Vt),ue(`Authentication failed: ${Vt.message}`,"error"),f(null)}}else console.log("App.jsx: No custom token found. User remains signed out by default."),f(null)}_(!0),T(!1),console.log("App.jsx: Firebase initialization complete. AuthReady:",!0,"LoadingFirebase:",!1)});return()=>{console.log("App.jsx: useEffect cleanup - Unsubscribing from auth state changes."),Pn()}}catch(ne){console.error("App.jsx: FATAL ERROR: Failed to initialize Firebase application:",ne),ue("Failed to initialize application. Please try again later.","error"),T(!1),_(!1)}})()},[re.pathname,Ya,ue]),window.onloadCallback=()=>{console.log("App.jsx: window.onloadCallback triggered from reCAPTCHA script."),N(!0)},O.useEffect(()=>{g&&o&&k&&typeof window.grecaptcha<"u"&&window.grecaptcha.ready&&!le?(console.log("App.jsx: All prerequisites met. Initializing RecaptchaVerifier..."),window.grecaptcha.ready(()=>{if(le){console.log("App.jsx: RecaptchaVerifier already exists in state, skipping re-initialization."),x(!0);return}console.log("App.jsx: Creating and rendering RecaptchaVerifier instance...");try{if(!document.getElementById("recaptcha-container-app")){console.error("App.jsx: Central reCAPTCHA container 'recaptcha-container-app' not found!"),ue("reCAPTCHA container missing. Phone verification may fail.","error");return}const ne=new V_(o,"recaptcha-container-app",{size:"invisible",callback:we=>{console.log("App.jsx: Central reCAPTCHA callback fired (solved):",we),x(!0),R(Je=>Je+1)},"expired-callback":()=>{console.log("App.jsx: Central reCAPTCHA expired."),ue("Verification expired. Please try again.","error"),x(!1),b.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&window.grecaptcha.reset(b.current),R(we=>we+1)},"error-callback":we=>{console.error("App.jsx: reCAPTCHA error callback:",we),ue("Failed to load verification. Please refresh.","error"),x(!1),R(Je=>Je+1)}});ne.render().then(we=>{console.log("App.jsx: Central reCAPTCHA rendered with widget ID:",we),b.current=we,Se(ne),ne.size==="invisible"&&x(!0),console.log("App.jsx: recaptchaVerifierState set and isRecaptchaReadyForUse true."),R(Je=>Je+1)}).catch(we=>{console.error("App.jsx: Error rendering central reCAPTCHA:",we),ue("Failed to initialize verification. Please refresh.","error"),x(!1),R(Je=>Je+1)})}catch(te){console.error("App.jsx: Error creating central RecaptchaVerifier instance:",te),ue("Failed to initialize verification. Check console.","error"),x(!1),R(ne=>ne+1)}})):le&&le.size==="invisible"&&(S||(x(!0),R(te=>te+1)))},[g,o,k,ue,S,le]),O.useEffect(()=>()=>{le&&(console.log("App.jsx: Cleaning up central reCAPTCHA Verifier..."),b.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"?window.grecaptcha.reset(b.current):window.grecaptcha&&typeof window.grecaptcha.reset=="function"&&(console.warn("App.jsx: Attempting general reCAPTCHA reset as widget ID is null."),window.grecaptcha.reset()),le.clear(),Se(null),b.current=null,x(!1),R(te=>te+1))},[le]);const tt=O.useCallback(async()=>{if(!S||!le||typeof le.execute!="function")throw console.error("App.jsx: reCAPTCHA Verifier not ready for execution. isReady:",S,"instance:",le),ue("Verification not ready. Please try again.","error"),new Error("reCAPTCHA not ready.");try{const te=await le.execute();return console.log("App.jsx: reCAPTCHA token obtained:",te),te}catch(te){throw console.error("App.jsx: Error executing reCAPTCHA:",te),ue(`Verification failed: ${te.message}`,"error"),te}},[ue,S,le]),it=O.useCallback(()=>{b.current!==null&&window.grecaptcha&&typeof window.grecaptcha.reset=="function"?(console.log("App.jsx: Resetting central reCAPTCHA widget with ID."),window.grecaptcha.reset(b.current)):window.grecaptcha&&typeof window.grecaptcha.reset=="function"?(console.warn("App.jsx: Attempting general reCAPTCHA reset as widget ID is null."),window.grecaptcha.reset()):console.warn("App.jsx: Cannot reset reCAPTCHA: grecaptcha or reset function not available."),x(!1)},[]),pe=O.useCallback(async(te,ne)=>{if(!o)return ue("Firebase Auth not initialized.","error"),null;try{const we=await AS(o,te,ne);return ue("Account created successfully!","success"),H(!1),we.user}catch(we){throw console.error("Error signing up with email/password:",we),ue(`Sign Up Failed: ${we.message}`,"error"),we}},[o,ue]),se=O.useCallback(async(te,ne)=>{if(!o)return ue("Firebase Auth not initialized.","error"),null;try{const we=await RS(o,te,ne);return ue("Signed in successfully!","success"),H(!1),we.user}catch(we){return console.error("Error signing in with email/password:",we),ue(`Sign In Failed: ${we.message}`,"error"),null}},[o,ue]),he=O.useCallback(async()=>{if(!o)return ue("Firebase Auth not initialized.","error"),null;try{const te=new hi;let ne;return o.currentUser&&o.currentUser.isAnonymous?(ne=await Yu(o.currentUser,await Ju(o,te).then(we=>we.credential)),ue("Anonymous account linked with Google!","success")):(ne=await Ju(o,te),ue("Signed in with Google successfully!","success")),H(!1),ne.user}catch(te){return console.error("Error signing in with Google:",te),te.code==="auth/account-exists-with-different-credential"?ue("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):ue(`Google Sign In Failed: ${te.message}`,"error"),null}},[o,ue,H]),oe=O.useCallback(async()=>{if(!o)return ue("Firebase Auth not initialized.","error"),null;try{const te=new Ko("apple.com");let ne;return o.currentUser&&o.currentUser.isAnonymous?(ne=await Yu(o.currentUser,await Ju(o,te).then(we=>we.credential)),ue("Anonymous account linked with Apple!","success")):(ne=await Ju(o,te),ue("Signed in with Apple successfully!","success")),H(!1),ne.user}catch(te){return console.error("Error signing in with Apple:",te),te.code==="auth/account-exists-with-different-credential"?ue("An account with this email already exists using a different sign-in method. Please sign in with your original method or link accounts in your profile.","error"):ue(`Apple Sign In Failed: ${te.message}`,"error"),null}},[o,ue]),V=O.useCallback(async()=>{if(!o){ue("Firebase Auth not initialized.","error");return}try{await VS(o),f(null),ue("Signed out successfully!","success")}catch(te){console.error("Error signing out:",te),ue(`Sign Out Failed: ${te.message}`,"error")}},[o,ue]),q=O.useCallback(async(te,ne)=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return ue("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const we=to.credential(te,ne),Je=await Yu(o.currentUser,we);return ue("Anonymous account linked with email/password!","success"),H(!1),Je.user}catch(we){return console.error("Error linking anonymous account with email/password:",we),ue(`Linking Failed: ${we.message}`,"error"),null}},[o,ue]),me=O.useCallback(async()=>{if(!o||!o.currentUser||!o.currentUser.isAnonymous)return ue("Not an anonymous user or Firebase Auth not ready.","error"),null;try{const te=new Ko("apple.com"),ne=await Yu(o.currentUser,te);return ue("Anonymous account linked with Apple!","success"),H(!1),ne.user}catch(te){return console.error("Error linking anonymous account with Apple:",te),ue(`Linking Failed: ${te.message}`,"error"),null}},[o,ue]),xe=O.useMemo(()=>({app:r,db:t,auth:o,currentUserId:h,authReady:g,appId:"rntea-cca78",showMessage:ue,signUpWithEmailPassword:pe,signInWithEmailPassword:se,signInWithGoogle:he,signInWithApple:oe,signOutUser:V,linkAnonymousWithEmailPassword:q,linkAnonymousWithApple:me,setShowAuthModal:H,executeRecaptcha:tt,resetRecaptcha:it,isRecaptchaReadyForUse:S,recaptchaVerifier:le}),[r,t,o,h,g,yP,ue,pe,se,he,oe,V,q,me,H,tt,it,S,le]),De=O.useCallback(()=>{ve(te=>!te),document.body.style.overflow=X?"":"hidden"},[X]),Ce=O.useCallback(()=>{ve(!1),document.body.style.overflow=""},[]),je=O.useCallback(te=>{if(te==="/")return re.pathname==="/";if(te==="/reviews")return re.pathname==="/reviews";if(te.startsWith("/#")){const ne=te.substring(2);return re.pathname==="/"&&re.hash===`#${ne}`}return!1},[re.pathname,re.hash]);return v.jsxs("div",{className:"min-h-screen flex flex-col",children:[v.jsxs("header",{className:"bg-white shadow-sm py-8 px-6 md:px-10 lg:px-16 flex justify-between items-center rounded-b-lg fixed top-0 w-full z-30",children:[v.jsx(Zi,{to:"/",className:"text-3xl font-bold text-gray-800 rntea-brand",children:"RNTea"}),v.jsx("nav",{className:"hidden md:block",children:v.jsxs("ul",{className:"flex space-x-6 items-center",children:[v.jsx("li",{children:v.jsx(Zi,{to:"/#about",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${je("/#about")?"font-bold":""}`,children:v.jsxs("span",{className:"relative inline-block",children:["About",v.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),v.jsx("li",{children:v.jsx(Zi,{to:"/reviews",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${je("/reviews")?"font-bold":""}`,children:v.jsxs("span",{className:"relative inline-block",children:["Reviews",v.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),v.jsx("li",{children:v.jsx(Zi,{to:"/#contact",className:`group relative overflow-hidden text-lg text-gray-700 font-medium transition duration-300 ease-in-out hover:text-custom-beige ${je("/#contact")?"font-bold":""}`,children:v.jsxs("span",{className:"relative inline-block",children:["Contact",v.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})})}),v.jsx("li",{children:h?v.jsx("button",{onClick:V,className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):v.jsx("button",{onClick:()=>H(!0),className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})})]})}),v.jsxs("div",{className:`hamburger-menu md:hidden flex flex-col justify-around w-8 h-6 cursor-pointer z-50 ${X?"open":""}`,id:"hamburger-menu",onClick:De,children:[v.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),v.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),v.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"})]})]}),v.jsxs("div",{className:`mobile-nav-overlay md:hidden fixed top-0 left-0 w-full h-full bg-white bg-opacity-98 z-40 flex flex-col justify-center items-center transition-transform duration-400 ease-in-out ${X?"open":""}`,id:"mobile-nav-overlay",children:[v.jsx("button",{className:"absolute top-6 right-6 text-gray-800 hover:text-gray-600 text-4xl focus:outline-none z-50",onClick:Ce,"aria-label":"Close navigation menu",children:""}),v.jsx(Zi,{to:"/#about",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Ce,style:{animationDelay:"0.1s"},children:v.jsxs("span",{className:"relative inline-block",children:["About",v.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),v.jsx(Zi,{to:"/reviews",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Ce,style:{animationDelay:"0.2s"},children:v.jsxs("span",{className:"relative inline-block",children:["Reviews",v.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),v.jsx(Zi,{to:"/#contact",className:"group relative overflow-hidden text-2xl text-gray-800 my-4 transition duration-300 ease-in-out hover:text-custom-beige",onClick:Ce,style:{animationDelay:"0.3s"},children:v.jsxs("span",{className:"relative inline-block",children:["Contact",v.jsx("span",{className:"absolute left-0 bottom-0 h-0.5 bg-[#CC5500] w-0 transition-all duration-300 group-hover:w-full"})]})}),h?v.jsx("button",{onClick:()=>{V(),Ce()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign Out"}):v.jsx("button",{onClick:()=>{H(!0),Ce()},className:"bg-[#CC5500] text-white font-bold py-2 px-4 rounded-full hover:bg-[#A84500] transition duration-300 shadow-md btn-hover-scale",children:"Sign In"})]}),v.jsxs("main",{className:"flex-grow w-full flex flex-col mt-[120px]",children:[v.jsx(mP,{message:C.text,type:C.type}),v.jsx("div",{id:"recaptcha-container-app",className:"hidden"}),v.jsx(vP,{children:E?v.jsx("p",{className:"text-center text-gray-500 py-8",children:"App.jsx: Initializing application and Firebase..."}):v.jsxs(oh.Provider,{value:xe,children:[v.jsxs(xT,{children:[console.log(`App.jsx: Route matched for path: ${re.pathname}`),v.jsx(ic,{path:"/",element:v.jsx(fP,{})}),v.jsx(ic,{path:"/reviews",element:v.jsx(_w,{})}),v.jsx(ic,{path:"/test-route",element:v.jsx("h2",{className:"text-center text-2xl text-center mt-8",children:"This is a Test Route."})})]}),W&&v.jsx(gP,{onClose:()=>H(!1)},`${L}-${S}`)]})})]}),v.jsx("footer",{className:"bg-white py-4 px-6 md:px-10 lg:px-16 border-t border-gray-200 text-center text-gray-600",children:v.jsxs("p",{className:"text-sm",children:[" ",new Date().getFullYear()," RNTea business. All Rights Reserved.",v.jsx("button",{onClick:()=>ee(!0),className:"ml-1 text-blue-600 hover:underline focus:outline-none",children:"Privacy Policy"})]})}),F&&v.jsx(pP,{onClose:()=>ee(!1)})]})}const Sv=document.getElementById("root");Sv?(console.log("main.jsx: Root element found. Attempting to mount React App with Router..."),DE.createRoot(Sv).render(v.jsx(ci.StrictMode,{children:v.jsx(kT,{children:v.jsx(_P,{})})})),console.log("main.jsx: React App with Router mount instruction sent.")):console.error("main.jsx: ERROR - Root element not found in DOM. Cannot mount React App.");
