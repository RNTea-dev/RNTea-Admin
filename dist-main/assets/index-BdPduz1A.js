function Vw(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Qy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var nd={exports:{}},xa={},rd={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm;function Ow(){if(Xm)return be;Xm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function C(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,H={};function U(V,W,de){this.props=V,this.context=W,this.refs=H,this.updater=de||F}U.prototype.isReactComponent={},U.prototype.setState=function(V,W){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,W,"setState")},U.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function se(){}se.prototype=U.prototype;function re(V,W,de){this.props=V,this.context=W,this.refs=H,this.updater=de||F}var ne=re.prototype=new se;ne.constructor=re,$(ne,U.prototype),ne.isPureReactComponent=!0;var oe=Array.isArray,xe=Object.prototype.hasOwnProperty,ye={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(V,W,de){var Re,Pe={},ke=null,Me=null;if(W!=null)for(Re in W.ref!==void 0&&(Me=W.ref),W.key!==void 0&&(ke=""+W.key),W)xe.call(W,Re)&&!N.hasOwnProperty(Re)&&(Pe[Re]=W[Re]);var Fe=arguments.length-2;if(Fe===1)Pe.children=de;else if(1<Fe){for(var Be=Array(Fe),dt=0;dt<Fe;dt++)Be[dt]=arguments[dt+2];Pe.children=Be}if(V&&V.defaultProps)for(Re in Fe=V.defaultProps,Fe)Pe[Re]===void 0&&(Pe[Re]=Fe[Re]);return{$$typeof:r,type:V,key:ke,ref:Me,props:Pe,_owner:ye.current}}function A(V,W){return{$$typeof:r,type:V.type,key:W,ref:V.ref,props:V.props,_owner:V._owner}}function k(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function D(V){var W={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(de){return W[de]})}var O=/\/+/g;function R(V,W){return typeof V=="object"&&V!==null&&V.key!=null?D(""+V.key):W.toString(36)}function Xe(V,W,de,Re,Pe){var ke=typeof V;(ke==="undefined"||ke==="boolean")&&(V=null);var Me=!1;if(V===null)Me=!0;else switch(ke){case"string":case"number":Me=!0;break;case"object":switch(V.$$typeof){case r:case e:Me=!0}}if(Me)return Me=V,Pe=Pe(Me),V=Re===""?"."+R(Me,0):Re,oe(Pe)?(de="",V!=null&&(de=V.replace(O,"$&/")+"/"),Xe(Pe,W,de,"",function(dt){return dt})):Pe!=null&&(k(Pe)&&(Pe=A(Pe,de+(!Pe.key||Me&&Me.key===Pe.key?"":(""+Pe.key).replace(O,"$&/")+"/")+V)),W.push(Pe)),1;if(Me=0,Re=Re===""?".":Re+":",oe(V))for(var Fe=0;Fe<V.length;Fe++){ke=V[Fe];var Be=Re+R(ke,Fe);Me+=Xe(ke,W,de,Be,Pe)}else if(Be=C(V),typeof Be=="function")for(V=Be.call(V),Fe=0;!(ke=V.next()).done;)ke=ke.value,Be=Re+R(ke,Fe++),Me+=Xe(ke,W,de,Be,Pe);else if(ke==="object")throw W=String(V),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Me}function ht(V,W,de){if(V==null)return V;var Re=[],Pe=0;return Xe(V,Re,"","",function(ke){return W.call(de,ke,Pe++)}),Re}function De(V){if(V._status===-1){var W=V._result;W=W(),W.then(function(de){(V._status===0||V._status===-1)&&(V._status=1,V._result=de)},function(de){(V._status===0||V._status===-1)&&(V._status=2,V._result=de)}),V._status===-1&&(V._status=0,V._result=W)}if(V._status===1)return V._result.default;throw V._result}var He={current:null},ee={transition:null},me={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:ee,ReactCurrentOwner:ye};function ie(){throw Error("act(...) is not supported in production builds of React.")}return be.Children={map:ht,forEach:function(V,W,de){ht(V,function(){W.apply(this,arguments)},de)},count:function(V){var W=0;return ht(V,function(){W++}),W},toArray:function(V){return ht(V,function(W){return W})||[]},only:function(V){if(!k(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},be.Component=U,be.Fragment=t,be.Profiler=o,be.PureComponent=re,be.StrictMode=s,be.Suspense=g,be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,be.act=ie,be.cloneElement=function(V,W,de){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Re=$({},V.props),Pe=V.key,ke=V.ref,Me=V._owner;if(W!=null){if(W.ref!==void 0&&(ke=W.ref,Me=ye.current),W.key!==void 0&&(Pe=""+W.key),V.type&&V.type.defaultProps)var Fe=V.type.defaultProps;for(Be in W)xe.call(W,Be)&&!N.hasOwnProperty(Be)&&(Re[Be]=W[Be]===void 0&&Fe!==void 0?Fe[Be]:W[Be])}var Be=arguments.length-2;if(Be===1)Re.children=de;else if(1<Be){Fe=Array(Be);for(var dt=0;dt<Be;dt++)Fe[dt]=arguments[dt+2];Re.children=Fe}return{$$typeof:r,type:V.type,key:Pe,ref:ke,props:Re,_owner:Me}},be.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},be.createElement=I,be.createFactory=function(V){var W=I.bind(null,V);return W.type=V,W},be.createRef=function(){return{current:null}},be.forwardRef=function(V){return{$$typeof:p,render:V}},be.isValidElement=k,be.lazy=function(V){return{$$typeof:w,_payload:{_status:-1,_result:V},_init:De}},be.memo=function(V,W){return{$$typeof:v,type:V,compare:W===void 0?null:W}},be.startTransition=function(V){var W=ee.transition;ee.transition={};try{V()}finally{ee.transition=W}},be.unstable_act=ie,be.useCallback=function(V,W){return He.current.useCallback(V,W)},be.useContext=function(V){return He.current.useContext(V)},be.useDebugValue=function(){},be.useDeferredValue=function(V){return He.current.useDeferredValue(V)},be.useEffect=function(V,W){return He.current.useEffect(V,W)},be.useId=function(){return He.current.useId()},be.useImperativeHandle=function(V,W,de){return He.current.useImperativeHandle(V,W,de)},be.useInsertionEffect=function(V,W){return He.current.useInsertionEffect(V,W)},be.useLayoutEffect=function(V,W){return He.current.useLayoutEffect(V,W)},be.useMemo=function(V,W){return He.current.useMemo(V,W)},be.useReducer=function(V,W,de){return He.current.useReducer(V,W,de)},be.useRef=function(V){return He.current.useRef(V)},be.useState=function(V){return He.current.useState(V)},be.useSyncExternalStore=function(V,W,de){return He.current.useSyncExternalStore(V,W,de)},be.useTransition=function(){return He.current.useTransition()},be.version="18.3.1",be}var Jm;function Yd(){return Jm||(Jm=1,rd.exports=Ow()),rd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function Lw(){if(Zm)return xa;Zm=1;var r=Yd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(p,g,v){var w,T={},C=null,F=null;v!==void 0&&(C=""+v),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(F=g.ref);for(w in g)s.call(g,w)&&!l.hasOwnProperty(w)&&(T[w]=g[w]);if(p&&p.defaultProps)for(w in g=p.defaultProps,g)T[w]===void 0&&(T[w]=g[w]);return{$$typeof:e,type:p,key:C,ref:F,props:T,_owner:o.current}}return xa.Fragment=t,xa.jsx=h,xa.jsxs=h,xa}var eg;function Mw(){return eg||(eg=1,nd.exports=Lw()),nd.exports}var x=Mw(),q=Yd();const Si=Qy(q),Fw=Vw({__proto__:null,default:Si},[q]);var Eu={},id={exports:{}},on={},sd={exports:{}},od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg;function Uw(){return tg||(tg=1,function(r){function e(ee,me){var ie=ee.length;ee.push(me);e:for(;0<ie;){var V=ie-1>>>1,W=ee[V];if(0<o(W,me))ee[V]=me,ee[ie]=W,ie=V;else break e}}function t(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var me=ee[0],ie=ee.pop();if(ie!==me){ee[0]=ie;e:for(var V=0,W=ee.length,de=W>>>1;V<de;){var Re=2*(V+1)-1,Pe=ee[Re],ke=Re+1,Me=ee[ke];if(0>o(Pe,ie))ke<W&&0>o(Me,Pe)?(ee[V]=Me,ee[ke]=ie,V=ke):(ee[V]=Pe,ee[Re]=ie,V=Re);else if(ke<W&&0>o(Me,ie))ee[V]=Me,ee[ke]=ie,V=ke;else break e}}return me}function o(ee,me){var ie=ee.sortIndex-me.sortIndex;return ie!==0?ie:ee.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var g=[],v=[],w=1,T=null,C=3,F=!1,$=!1,H=!1,U=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(ee){for(var me=t(v);me!==null;){if(me.callback===null)s(v);else if(me.startTime<=ee)s(v),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(v)}}function oe(ee){if(H=!1,ne(ee),!$)if(t(g)!==null)$=!0,De(xe);else{var me=t(v);me!==null&&He(oe,me.startTime-ee)}}function xe(ee,me){$=!1,H&&(H=!1,se(I),I=-1),F=!0;var ie=C;try{for(ne(me),T=t(g);T!==null&&(!(T.expirationTime>me)||ee&&!D());){var V=T.callback;if(typeof V=="function"){T.callback=null,C=T.priorityLevel;var W=V(T.expirationTime<=me);me=r.unstable_now(),typeof W=="function"?T.callback=W:T===t(g)&&s(g),ne(me)}else s(g);T=t(g)}if(T!==null)var de=!0;else{var Re=t(v);Re!==null&&He(oe,Re.startTime-me),de=!1}return de}finally{T=null,C=ie,F=!1}}var ye=!1,N=null,I=-1,A=5,k=-1;function D(){return!(r.unstable_now()-k<A)}function O(){if(N!==null){var ee=r.unstable_now();k=ee;var me=!0;try{me=N(!0,ee)}finally{me?R():(ye=!1,N=null)}}else ye=!1}var R;if(typeof re=="function")R=function(){re(O)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,ht=Xe.port2;Xe.port1.onmessage=O,R=function(){ht.postMessage(null)}}else R=function(){U(O,0)};function De(ee){N=ee,ye||(ye=!0,R())}function He(ee,me){I=U(function(){ee(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ee){ee.callback=null},r.unstable_continueExecution=function(){$||F||($=!0,De(xe))},r.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ee?Math.floor(1e3/ee):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(ee){switch(C){case 1:case 2:case 3:var me=3;break;default:me=C}var ie=C;C=me;try{return ee()}finally{C=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ee,me){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ie=C;C=ee;try{return me()}finally{C=ie}},r.unstable_scheduleCallback=function(ee,me,ie){var V=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?V+ie:V):ie=V,ee){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ie+W,ee={id:w++,callback:me,priorityLevel:ee,startTime:ie,expirationTime:W,sortIndex:-1},ie>V?(ee.sortIndex=ie,e(v,ee),t(g)===null&&ee===t(v)&&(H?(se(I),I=-1):H=!0,He(oe,ie-V))):(ee.sortIndex=W,e(g,ee),$||F||($=!0,De(xe))),ee},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(ee){var me=C;return function(){var ie=C;C=me;try{return ee.apply(this,arguments)}finally{C=ie}}}}(od)),od}var ng;function jw(){return ng||(ng=1,sd.exports=Uw()),sd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg;function zw(){if(rg)return on;rg=1;var r=Yd(),e=jw();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function C(n){return g.call(T,n)?!0:g.call(w,n)?!1:v.test(n)?T[n]=!0:(w[n]=!0,!1)}function F(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,i,a,c){if(i===null||typeof i>"u"||F(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function H(n,i,a,c,d,m,_){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=m,this.removeEmptyString=_}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new H(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];U[i]=new H(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new H(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new H(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new H(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new H(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new H(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new H(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new H(n,5,!1,n.toLowerCase(),null,!1,!1)});var se=/[\-:]([a-z])/g;function re(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(se,re);U[i]=new H(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(se,re);U[i]=new H(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(se,re);U[i]=new H(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new H(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new H(n,1,!1,n.toLowerCase(),null,!0,!0)});function ne(n,i,a,c){var d=U.hasOwnProperty(i)?U[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&($(i,a,d,c)&&(a=null),c||d===null?C(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),ye=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Xe=Symbol.for("react.suspense_list"),ht=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),He=Symbol.for("react.offscreen"),ee=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=ee&&n[ee]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,V;function W(n){if(V===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);V=i&&i[1]||""}return`
`+V+n}var de=!1;function Re(n,i){if(!n||de)return"";de=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(z){var c=z}Reflect.construct(n,[],i)}else{try{i.call()}catch(z){c=z}n.call(i.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),m=c.stack.split(`
`),_=d.length-1,S=m.length-1;1<=_&&0<=S&&d[_]!==m[S];)S--;for(;1<=_&&0<=S;_--,S--)if(d[_]!==m[S]){if(_!==1||S!==1)do if(_--,S--,0>S||d[_]!==m[S]){var P=`
`+d[_].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=_&&0<=S);break}}}finally{de=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?W(n):""}function Pe(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function ke(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case ye:return"Portal";case A:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case Xe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ht:return i=n.displayName||null,i!==null?i:ke(n.type)||"Memo";case De:i=n._payload,n=n._init;try{return ke(n(i))}catch{}}return null}function Me(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function dt(n){var i=Be(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,m.call(this,_)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function yn(n){n._valueTracker||(n._valueTracker=dt(n))}function Xn(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Xt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bn(n,i){var a=i.checked;return ie({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Jn(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Fe(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ui(n,i){i=i.checked,i!=null&&ne(n,"checked",i,!1)}function ji(n,i){Ui(n,i);var a=Fe(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Hr(n,i.type,a):i.hasOwnProperty("defaultValue")&&Hr(n,i.type,Fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Cs(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Hr(n,i,a){(i!=="number"||Xt(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Dn=Array.isArray;function vn(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function zi(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Wr(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Dn(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Fe(a)}}function te(n,i){var a=Fe(i.value),c=Fe(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function We(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ue(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ee(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ue(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ut,_n=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(ut=ut||document.createElement("div"),ut.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ut.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Qe(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nt=["Webkit","ms","Moz","O"];Object.keys(qe).forEach(function(n){nt.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),qe[i]=qe[n]})});function wn(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||qe.hasOwnProperty(n)&&qe[n]?(""+i).trim():i+"px"}function qr(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=wn(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Bi=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bo(n,i){if(i){if(Bi[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function $o(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $i=null;function Rs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var As=null,En=null,Zn=null;function xs(n){if(n=fa(n)){if(typeof As!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Ll(i),As(n.stateNode,n.type,i))}}function er(n){En?Zn?Zn.push(n):Zn=[n]:En=n}function Ho(){if(En){var n=En,i=Zn;if(Zn=En=null,xs(n),i)for(n=0;n<i.length;n++)xs(i[n])}}function Hi(n,i){return n(i)}function Wo(){}var vr=!1;function qo(n,i,a){if(vr)return n(i,a);vr=!0;try{return Hi(n,i,a)}finally{vr=!1,(En!==null||Zn!==null)&&(Wo(),Ho())}}function ft(n,i){var a=n.stateNode;if(a===null)return null;var c=Ll(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Ps=!1;if(p)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{Ps=!1}function Wi(n,i,a,c,d,m,_,S,P){var z=Array.prototype.slice.call(arguments,3);try{i.apply(a,z)}catch(Q){this.onError(Q)}}var qi=!1,ks=null,On=!1,Ko=null,kc={onError:function(n){qi=!0,ks=n}};function Ns(n,i,a,c,d,m,_,S,P){qi=!1,ks=null,Wi.apply(kc,arguments)}function al(n,i,a,c,d,m,_,S,P){if(Ns.apply(this,arguments),qi){if(qi){var z=ks;qi=!1,ks=null}else throw Error(t(198));On||(On=!0,Ko=z)}}function Ln(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Ki(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Mn(n){if(Ln(n)!==n)throw Error(t(188))}function ll(n){var i=n.alternate;if(!i){if(i=Ln(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Mn(d),n;if(m===c)return Mn(d),i;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var _=!1,S=d.child;S;){if(S===a){_=!0,a=d,c=m;break}if(S===c){_=!0,c=d,a=m;break}S=S.sibling}if(!_){for(S=m.child;S;){if(S===a){_=!0,a=m,c=d;break}if(S===c){_=!0,c=m,a=d;break}S=S.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Go(n){return n=ll(n),n!==null?bs(n):null}function bs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=bs(n);if(i!==null)return i;n=n.sibling}return null}var Ds=e.unstable_scheduleCallback,Qo=e.unstable_cancelCallback,ul=e.unstable_shouldYield,Nc=e.unstable_requestPaint,Je=e.unstable_now,cl=e.unstable_getCurrentPriorityLevel,Gi=e.unstable_ImmediatePriority,Kr=e.unstable_UserBlockingPriority,Tn=e.unstable_NormalPriority,Yo=e.unstable_LowPriority,hl=e.unstable_IdlePriority,Qi=null,un=null;function dl(n){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Qi,n,void 0,(n.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:pl,Xo=Math.log,fl=Math.LN2;function pl(n){return n>>>=0,n===0?32:31-(Xo(n)/fl|0)|0}var Vs=64,Os=4194304;function Gr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Yi(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,_=a&268435455;if(_!==0){var S=_&~d;S!==0?c=Gr(S):(m&=_,m!==0&&(c=Gr(m)))}else _=a&~d,_!==0?c=Gr(_):m!==0&&(c=Gr(m));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,m=i&-i,d>=m||d===16&&(m&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Kt(i),d=1<<a,c|=n[a],i&=~d;return c}function bc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _r(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var _=31-Kt(m),S=1<<_,P=d[_];P===-1?((S&a)===0||(S&c)!==0)&&(d[_]=bc(S,i)):P<=i&&(n.expiredLanes|=S),m&=~S}}function cn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Xi(){var n=Vs;return Vs<<=1,(Vs&4194240)===0&&(Vs=64),n}function Qr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Yr(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Kt(i),n[i]=a}function Ye(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Kt(a),m=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Xr(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Kt(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Le=0;function Jr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ml,Ls,gl,yl,vl,Jo=!1,tr=[],Nt=null,Fn=null,Un=null,Zr=new Map,In=new Map,nr=[],Dc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _l(n,i){switch(n){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Zr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(i.pointerId)}}function Jt(n,i,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},i!==null&&(i=fa(i),i!==null&&Ls(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Vc(n,i,a,c,d){switch(i){case"focusin":return Nt=Jt(Nt,n,i,a,c,d),!0;case"dragenter":return Fn=Jt(Fn,n,i,a,c,d),!0;case"mouseover":return Un=Jt(Un,n,i,a,c,d),!0;case"pointerover":var m=d.pointerId;return Zr.set(m,Jt(Zr.get(m)||null,n,i,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,In.set(m,Jt(In.get(m)||null,n,i,a,c,d)),!0}return!1}function wl(n){var i=ns(n.target);if(i!==null){var a=Ln(i);if(a!==null){if(i=a.tag,i===13){if(i=Ki(a),i!==null){n.blockedOn=i,vl(n.priority,function(){gl(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function wr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Ms(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);$i=c,a.target.dispatchEvent(c),$i=null}else return i=fa(a),i!==null&&Ls(i),n.blockedOn=a,!1;i.shift()}return!0}function Ji(n,i,a){wr(n)&&a.delete(i)}function El(){Jo=!1,Nt!==null&&wr(Nt)&&(Nt=null),Fn!==null&&wr(Fn)&&(Fn=null),Un!==null&&wr(Un)&&(Un=null),Zr.forEach(Ji),In.forEach(Ji)}function jn(n,i){n.blockedOn===i&&(n.blockedOn=null,Jo||(Jo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,El)))}function zn(n){function i(d){return jn(d,n)}if(0<tr.length){jn(tr[0],n);for(var a=1;a<tr.length;a++){var c=tr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Nt!==null&&jn(Nt,n),Fn!==null&&jn(Fn,n),Un!==null&&jn(Un,n),Zr.forEach(i),In.forEach(i),a=0;a<nr.length;a++)c=nr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<nr.length&&(a=nr[0],a.blockedOn===null);)wl(a),a.blockedOn===null&&nr.shift()}var Er=oe.ReactCurrentBatchConfig,ei=!0;function rt(n,i,a,c){var d=Le,m=Er.transition;Er.transition=null;try{Le=1,Zo(n,i,a,c)}finally{Le=d,Er.transition=m}}function Oc(n,i,a,c){var d=Le,m=Er.transition;Er.transition=null;try{Le=4,Zo(n,i,a,c)}finally{Le=d,Er.transition=m}}function Zo(n,i,a,c){if(ei){var d=Ms(n,i,a,c);if(d===null)qc(n,i,c,Zi,a),_l(n,c);else if(Vc(d,n,i,a,c))c.stopPropagation();else if(_l(n,c),i&4&&-1<Dc.indexOf(n)){for(;d!==null;){var m=fa(d);if(m!==null&&ml(m),m=Ms(n,i,a,c),m===null&&qc(n,i,c,Zi,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else qc(n,i,c,null,a)}}var Zi=null;function Ms(n,i,a,c){if(Zi=null,n=Rs(c),n=ns(n),n!==null)if(i=Ln(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Ki(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Zi=n,null}function ea(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cl()){case Gi:return 1;case Kr:return 4;case Tn:case Yo:return 16;case hl:return 536870912;default:return 16}default:return 16}}var hn=null,Fs=null,Zt=null;function ta(){if(Zt)return Zt;var n,i=Fs,a=i.length,c,d="value"in hn?hn.value:hn.textContent,m=d.length;for(n=0;n<a&&i[n]===d[n];n++);var _=a-n;for(c=1;c<=_&&i[a-c]===d[m-c];c++);return Zt=d.slice(n,1<c?1-c:void 0)}function Us(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function rr(){return!0}function na(){return!1}function bt(n){function i(a,c,d,m,_){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?rr:na,this.isPropagationStopped=na,this}return ie(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),i}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=bt(Bn),ir=ie({},Bn,{view:0,detail:0}),Lc=bt(ir),zs,Tr,ti,es=ie({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ti&&(ti&&n.type==="mousemove"?(zs=n.screenX-ti.screenX,Tr=n.screenY-ti.screenY):Tr=zs=0,ti=n),zs)},movementY:function(n){return"movementY"in n?n.movementY:Tr}}),Bs=bt(es),ra=ie({},es,{dataTransfer:0}),Tl=bt(ra),$s=ie({},ir,{relatedTarget:0}),Hs=bt($s),Il=ie({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ir=bt(Il),Sl=ie({},Bn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Cl=bt(Sl),Rl=ie({},Bn,{data:0}),ia=bt(Rl),Ws={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Al={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Al[n])?!!i[n]:!1}function sr(){return xl}var u=ie({},ir,{key:function(n){if(n.key){var i=Ws[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Us(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Gt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sr,charCode:function(n){return n.type==="keypress"?Us(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Us(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),f=bt(u),y=ie({},es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=bt(y),L=ie({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sr}),B=bt(L),Z=ie({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=bt(Z),wt=ie({},es,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=bt(wt),Rt=[9,13,27,32],gt=p&&"CompositionEvent"in window,Sn=null;p&&"documentMode"in document&&(Sn=document.documentMode);var dn=p&&"TextEvent"in window&&!Sn,ts=p&&(!gt||Sn&&8<Sn&&11>=Sn),qs=" ",Wf=!1;function qf(n,i){switch(n){case"keyup":return Rt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ks=!1;function N0(n,i){switch(n){case"compositionend":return Kf(i);case"keypress":return i.which!==32?null:(Wf=!0,qs);case"textInput":return n=i.data,n===qs&&Wf?null:n;default:return null}}function b0(n,i){if(Ks)return n==="compositionend"||!gt&&qf(n,i)?(n=ta(),Zt=Fs=hn=null,Ks=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ts&&i.locale!=="ko"?null:i.data;default:return null}}var D0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!D0[n.type]:i==="textarea"}function Qf(n,i,a,c){er(c),i=Dl(i,"onChange"),0<i.length&&(a=new js("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var sa=null,oa=null;function V0(n){fp(n,0)}function Pl(n){var i=Js(n);if(Xn(i))return n}function O0(n,i){if(n==="change")return i}var Yf=!1;if(p){var Mc;if(p){var Fc="oninput"in document;if(!Fc){var Xf=document.createElement("div");Xf.setAttribute("oninput","return;"),Fc=typeof Xf.oninput=="function"}Mc=Fc}else Mc=!1;Yf=Mc&&(!document.documentMode||9<document.documentMode)}function Jf(){sa&&(sa.detachEvent("onpropertychange",Zf),oa=sa=null)}function Zf(n){if(n.propertyName==="value"&&Pl(oa)){var i=[];Qf(i,oa,n,Rs(n)),qo(V0,i)}}function L0(n,i,a){n==="focusin"?(Jf(),sa=i,oa=a,sa.attachEvent("onpropertychange",Zf)):n==="focusout"&&Jf()}function M0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pl(oa)}function F0(n,i){if(n==="click")return Pl(i)}function U0(n,i){if(n==="input"||n==="change")return Pl(i)}function j0(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var $n=typeof Object.is=="function"?Object.is:j0;function aa(n,i){if($n(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!$n(n[d],i[d]))return!1}return!0}function ep(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function tp(n,i){var a=ep(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ep(a)}}function np(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?np(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function rp(){for(var n=window,i=Xt();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Xt(n.document)}return i}function Uc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function z0(n){var i=rp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&np(a.ownerDocument.documentElement,a)){if(c!==null&&Uc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=tp(a,m);var _=tp(a,c);d&&_&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(i),n.extend(_.node,_.offset)):(i.setEnd(_.node,_.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var B0=p&&"documentMode"in document&&11>=document.documentMode,Gs=null,jc=null,la=null,zc=!1;function ip(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zc||Gs==null||Gs!==Xt(c)||(c=Gs,"selectionStart"in c&&Uc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),la&&aa(la,c)||(la=c,c=Dl(jc,"onSelect"),0<c.length&&(i=new js("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Gs)))}function kl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Qs={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionend:kl("Transition","TransitionEnd")},Bc={},sp={};p&&(sp=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function Nl(n){if(Bc[n])return Bc[n];if(!Qs[n])return n;var i=Qs[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in sp)return Bc[n]=i[a];return n}var op=Nl("animationend"),ap=Nl("animationiteration"),lp=Nl("animationstart"),up=Nl("transitionend"),cp=new Map,hp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(n,i){cp.set(n,i),l(i,[n])}for(var $c=0;$c<hp.length;$c++){var Hc=hp[$c],$0=Hc.toLowerCase(),H0=Hc[0].toUpperCase()+Hc.slice(1);ni($0,"on"+H0)}ni(op,"onAnimationEnd"),ni(ap,"onAnimationIteration"),ni(lp,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(up,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ua));function dp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,al(c,i,void 0,n),n.currentTarget=null}function fp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var _=c.length-1;0<=_;_--){var S=c[_],P=S.instance,z=S.currentTarget;if(S=S.listener,P!==m&&d.isPropagationStopped())break e;dp(d,S,z),m=P}else for(_=0;_<c.length;_++){if(S=c[_],P=S.instance,z=S.currentTarget,S=S.listener,P!==m&&d.isPropagationStopped())break e;dp(d,S,z),m=P}}}if(On)throw n=Ko,On=!1,Ko=null,n}function et(n,i){var a=i[Jc];a===void 0&&(a=i[Jc]=new Set);var c=n+"__bubble";a.has(c)||(pp(i,n,2,!1),a.add(c))}function Wc(n,i,a){var c=0;i&&(c|=4),pp(a,n,c,i)}var bl="_reactListening"+Math.random().toString(36).slice(2);function ca(n){if(!n[bl]){n[bl]=!0,s.forEach(function(a){a!=="selectionchange"&&(W0.has(a)||Wc(a,!1,n),Wc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[bl]||(i[bl]=!0,Wc("selectionchange",!1,i))}}function pp(n,i,a,c){switch(ea(i)){case 1:var d=rt;break;case 4:d=Oc;break;default:d=Zo}a=d.bind(null,i,a,n),d=void 0,!Ps||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function qc(n,i,a,c,d){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var P=_.tag;if((P===3||P===4)&&(P=_.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;_=_.return}for(;S!==null;){if(_=ns(S),_===null)return;if(P=_.tag,P===5||P===6){c=m=_;continue e}S=S.parentNode}}c=c.return}qo(function(){var z=m,Q=Rs(a),X=[];e:{var G=cp.get(n);if(G!==void 0){var ae=js,he=n;switch(n){case"keypress":if(Us(a)===0)break e;case"keydown":case"keyup":ae=f;break;case"focusin":he="focus",ae=Hs;break;case"focusout":he="blur",ae=Hs;break;case"beforeblur":case"afterblur":ae=Hs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Bs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Tl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=B;break;case op:case ap:case lp:ae=Ir;break;case up:ae=Ge;break;case"scroll":ae=Lc;break;case"wheel":ae=Ue;break;case"copy":case"cut":case"paste":ae=Cl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=E}var fe=(i&4)!==0,pt=!fe&&n==="scroll",M=fe?G!==null?G+"Capture":null:G;fe=[];for(var b=z,j;b!==null;){j=b;var J=j.stateNode;if(j.tag===5&&J!==null&&(j=J,M!==null&&(J=ft(b,M),J!=null&&fe.push(ha(b,J,j)))),pt)break;b=b.return}0<fe.length&&(G=new ae(G,he,null,a,Q),X.push({event:G,listeners:fe}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",G&&a!==$i&&(he=a.relatedTarget||a.fromElement)&&(ns(he)||he[Sr]))break e;if((ae||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,ae?(he=a.relatedTarget||a.toElement,ae=z,he=he?ns(he):null,he!==null&&(pt=Ln(he),he!==pt||he.tag!==5&&he.tag!==6)&&(he=null)):(ae=null,he=z),ae!==he)){if(fe=Bs,J="onMouseLeave",M="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(fe=E,J="onPointerLeave",M="onPointerEnter",b="pointer"),pt=ae==null?G:Js(ae),j=he==null?G:Js(he),G=new fe(J,b+"leave",ae,a,Q),G.target=pt,G.relatedTarget=j,J=null,ns(Q)===z&&(fe=new fe(M,b+"enter",he,a,Q),fe.target=j,fe.relatedTarget=pt,J=fe),pt=J,ae&&he)t:{for(fe=ae,M=he,b=0,j=fe;j;j=Ys(j))b++;for(j=0,J=M;J;J=Ys(J))j++;for(;0<b-j;)fe=Ys(fe),b--;for(;0<j-b;)M=Ys(M),j--;for(;b--;){if(fe===M||M!==null&&fe===M.alternate)break t;fe=Ys(fe),M=Ys(M)}fe=null}else fe=null;ae!==null&&mp(X,G,ae,fe,!1),he!==null&&pt!==null&&mp(X,pt,he,fe,!0)}}e:{if(G=z?Js(z):window,ae=G.nodeName&&G.nodeName.toLowerCase(),ae==="select"||ae==="input"&&G.type==="file")var pe=O0;else if(Gf(G))if(Yf)pe=U0;else{pe=M0;var ve=L0}else(ae=G.nodeName)&&ae.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(pe=F0);if(pe&&(pe=pe(n,z))){Qf(X,pe,a,Q);break e}ve&&ve(n,G,z),n==="focusout"&&(ve=G._wrapperState)&&ve.controlled&&G.type==="number"&&Hr(G,"number",G.value)}switch(ve=z?Js(z):window,n){case"focusin":(Gf(ve)||ve.contentEditable==="true")&&(Gs=ve,jc=z,la=null);break;case"focusout":la=jc=Gs=null;break;case"mousedown":zc=!0;break;case"contextmenu":case"mouseup":case"dragend":zc=!1,ip(X,a,Q);break;case"selectionchange":if(B0)break;case"keydown":case"keyup":ip(X,a,Q)}var _e;if(gt)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Ks?qf(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(ts&&a.locale!=="ko"&&(Ks||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Ks&&(_e=ta()):(hn=Q,Fs="value"in hn?hn.value:hn.textContent,Ks=!0)),ve=Dl(z,Ie),0<ve.length&&(Ie=new ia(Ie,n,null,a,Q),X.push({event:Ie,listeners:ve}),_e?Ie.data=_e:(_e=Kf(a),_e!==null&&(Ie.data=_e)))),(_e=dn?N0(n,a):b0(n,a))&&(z=Dl(z,"onBeforeInput"),0<z.length&&(Q=new ia("onBeforeInput","beforeinput",null,a,Q),X.push({event:Q,listeners:z}),Q.data=_e))}fp(X,i)})}function ha(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Dl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=ft(n,a),m!=null&&c.unshift(ha(n,m,d)),m=ft(n,i),m!=null&&c.push(ha(n,m,d))),n=n.return}return c}function Ys(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function mp(n,i,a,c,d){for(var m=i._reactName,_=[];a!==null&&a!==c;){var S=a,P=S.alternate,z=S.stateNode;if(P!==null&&P===c)break;S.tag===5&&z!==null&&(S=z,d?(P=ft(a,m),P!=null&&_.unshift(ha(a,P,S))):d||(P=ft(a,m),P!=null&&_.push(ha(a,P,S)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var q0=/\r\n?/g,K0=/\u0000|\uFFFD/g;function gp(n){return(typeof n=="string"?n:""+n).replace(q0,`
`).replace(K0,"")}function Vl(n,i,a){if(i=gp(i),gp(n)!==i&&a)throw Error(t(425))}function Ol(){}var Kc=null,Gc=null;function Qc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Yc=typeof setTimeout=="function"?setTimeout:void 0,G0=typeof clearTimeout=="function"?clearTimeout:void 0,yp=typeof Promise=="function"?Promise:void 0,Q0=typeof queueMicrotask=="function"?queueMicrotask:typeof yp<"u"?function(n){return yp.resolve(null).then(n).catch(Y0)}:Yc;function Y0(n){setTimeout(function(){throw n})}function Xc(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),zn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);zn(i)}function ri(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function vp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),or="__reactFiber$"+Xs,da="__reactProps$"+Xs,Sr="__reactContainer$"+Xs,Jc="__reactEvents$"+Xs,X0="__reactListeners$"+Xs,J0="__reactHandles$"+Xs;function ns(n){var i=n[or];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Sr]||a[or]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=vp(n);n!==null;){if(a=n[or])return a;n=vp(n)}return i}n=a,a=n.parentNode}return null}function fa(n){return n=n[or]||n[Sr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Js(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ll(n){return n[da]||null}var Zc=[],Zs=-1;function ii(n){return{current:n}}function tt(n){0>Zs||(n.current=Zc[Zs],Zc[Zs]=null,Zs--)}function Ze(n,i){Zs++,Zc[Zs]=n.current,n.current=i}var si={},Ft=ii(si),en=ii(!1),rs=si;function eo(n,i){var a=n.type.contextTypes;if(!a)return si;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=i[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function tn(n){return n=n.childContextTypes,n!=null}function Ml(){tt(en),tt(Ft)}function _p(n,i,a){if(Ft.current!==si)throw Error(t(168));Ze(Ft,i),Ze(en,a)}function wp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,Me(n)||"Unknown",d));return ie({},a,c)}function Fl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||si,rs=Ft.current,Ze(Ft,n),Ze(en,en.current),!0}function Ep(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=wp(n,i,rs),c.__reactInternalMemoizedMergedChildContext=n,tt(en),tt(Ft),Ze(Ft,n)):tt(en),Ze(en,a)}var Cr=null,Ul=!1,eh=!1;function Tp(n){Cr===null?Cr=[n]:Cr.push(n)}function Z0(n){Ul=!0,Tp(n)}function oi(){if(!eh&&Cr!==null){eh=!0;var n=0,i=Le;try{var a=Cr;for(Le=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Cr=null,Ul=!1}catch(d){throw Cr!==null&&(Cr=Cr.slice(n+1)),Ds(Gi,oi),d}finally{Le=i,eh=!1}}return null}var to=[],no=0,jl=null,zl=0,Cn=[],Rn=0,is=null,Rr=1,Ar="";function ss(n,i){to[no++]=zl,to[no++]=jl,jl=n,zl=i}function Ip(n,i,a){Cn[Rn++]=Rr,Cn[Rn++]=Ar,Cn[Rn++]=is,is=n;var c=Rr;n=Ar;var d=32-Kt(c)-1;c&=~(1<<d),a+=1;var m=32-Kt(i)+d;if(30<m){var _=d-d%5;m=(c&(1<<_)-1).toString(32),c>>=_,d-=_,Rr=1<<32-Kt(i)+d|a<<d|c,Ar=m+n}else Rr=1<<m|a<<d|c,Ar=n}function th(n){n.return!==null&&(ss(n,1),Ip(n,1,0))}function nh(n){for(;n===jl;)jl=to[--no],to[no]=null,zl=to[--no],to[no]=null;for(;n===is;)is=Cn[--Rn],Cn[Rn]=null,Ar=Cn[--Rn],Cn[Rn]=null,Rr=Cn[--Rn],Cn[Rn]=null}var fn=null,pn=null,it=!1,Hn=null;function Sp(n,i){var a=kn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Cp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,fn=n,pn=ri(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,fn=n,pn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=is!==null?{id:Rr,overflow:Ar}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=kn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,fn=n,pn=null,!0):!1;default:return!1}}function rh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ih(n){if(it){var i=pn;if(i){var a=i;if(!Cp(n,i)){if(rh(n))throw Error(t(418));i=ri(a.nextSibling);var c=fn;i&&Cp(n,i)?Sp(c,a):(n.flags=n.flags&-4097|2,it=!1,fn=n)}}else{if(rh(n))throw Error(t(418));n.flags=n.flags&-4097|2,it=!1,fn=n}}}function Rp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fn=n}function Bl(n){if(n!==fn)return!1;if(!it)return Rp(n),it=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Qc(n.type,n.memoizedProps)),i&&(i=pn)){if(rh(n))throw Ap(),Error(t(418));for(;i;)Sp(n,i),i=ri(i.nextSibling)}if(Rp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){pn=ri(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}pn=null}}else pn=fn?ri(n.stateNode.nextSibling):null;return!0}function Ap(){for(var n=pn;n;)n=ri(n.nextSibling)}function ro(){pn=fn=null,it=!1}function sh(n){Hn===null?Hn=[n]:Hn.push(n)}var ew=oe.ReactCurrentBatchConfig;function pa(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(_){var S=d.refs;_===null?delete S[m]:S[m]=_},i._stringRef=m,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function $l(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function xp(n){var i=n._init;return i(n._payload)}function Pp(n){function i(M,b){if(n){var j=M.deletions;j===null?(M.deletions=[b],M.flags|=16):j.push(b)}}function a(M,b){if(!n)return null;for(;b!==null;)i(M,b),b=b.sibling;return null}function c(M,b){for(M=new Map;b!==null;)b.key!==null?M.set(b.key,b):M.set(b.index,b),b=b.sibling;return M}function d(M,b){return M=pi(M,b),M.index=0,M.sibling=null,M}function m(M,b,j){return M.index=j,n?(j=M.alternate,j!==null?(j=j.index,j<b?(M.flags|=2,b):j):(M.flags|=2,b)):(M.flags|=1048576,b)}function _(M){return n&&M.alternate===null&&(M.flags|=2),M}function S(M,b,j,J){return b===null||b.tag!==6?(b=Yh(j,M.mode,J),b.return=M,b):(b=d(b,j),b.return=M,b)}function P(M,b,j,J){var pe=j.type;return pe===N?Q(M,b,j.props.children,J,j.key):b!==null&&(b.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===De&&xp(pe)===b.type)?(J=d(b,j.props),J.ref=pa(M,b,j),J.return=M,J):(J=fu(j.type,j.key,j.props,null,M.mode,J),J.ref=pa(M,b,j),J.return=M,J)}function z(M,b,j,J){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=Xh(j,M.mode,J),b.return=M,b):(b=d(b,j.children||[]),b.return=M,b)}function Q(M,b,j,J,pe){return b===null||b.tag!==7?(b=fs(j,M.mode,J,pe),b.return=M,b):(b=d(b,j),b.return=M,b)}function X(M,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Yh(""+b,M.mode,j),b.return=M,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case xe:return j=fu(b.type,b.key,b.props,null,M.mode,j),j.ref=pa(M,null,b),j.return=M,j;case ye:return b=Xh(b,M.mode,j),b.return=M,b;case De:var J=b._init;return X(M,J(b._payload),j)}if(Dn(b)||me(b))return b=fs(b,M.mode,j,null),b.return=M,b;$l(M,b)}return null}function G(M,b,j,J){var pe=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return pe!==null?null:S(M,b,""+j,J);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case xe:return j.key===pe?P(M,b,j,J):null;case ye:return j.key===pe?z(M,b,j,J):null;case De:return pe=j._init,G(M,b,pe(j._payload),J)}if(Dn(j)||me(j))return pe!==null?null:Q(M,b,j,J,null);$l(M,j)}return null}function ae(M,b,j,J,pe){if(typeof J=="string"&&J!==""||typeof J=="number")return M=M.get(j)||null,S(b,M,""+J,pe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case xe:return M=M.get(J.key===null?j:J.key)||null,P(b,M,J,pe);case ye:return M=M.get(J.key===null?j:J.key)||null,z(b,M,J,pe);case De:var ve=J._init;return ae(M,b,j,ve(J._payload),pe)}if(Dn(J)||me(J))return M=M.get(j)||null,Q(b,M,J,pe,null);$l(b,J)}return null}function he(M,b,j,J){for(var pe=null,ve=null,_e=b,Ie=b=0,Pt=null;_e!==null&&Ie<j.length;Ie++){_e.index>Ie?(Pt=_e,_e=null):Pt=_e.sibling;var $e=G(M,_e,j[Ie],J);if($e===null){_e===null&&(_e=Pt);break}n&&_e&&$e.alternate===null&&i(M,_e),b=m($e,b,Ie),ve===null?pe=$e:ve.sibling=$e,ve=$e,_e=Pt}if(Ie===j.length)return a(M,_e),it&&ss(M,Ie),pe;if(_e===null){for(;Ie<j.length;Ie++)_e=X(M,j[Ie],J),_e!==null&&(b=m(_e,b,Ie),ve===null?pe=_e:ve.sibling=_e,ve=_e);return it&&ss(M,Ie),pe}for(_e=c(M,_e);Ie<j.length;Ie++)Pt=ae(_e,M,Ie,j[Ie],J),Pt!==null&&(n&&Pt.alternate!==null&&_e.delete(Pt.key===null?Ie:Pt.key),b=m(Pt,b,Ie),ve===null?pe=Pt:ve.sibling=Pt,ve=Pt);return n&&_e.forEach(function(mi){return i(M,mi)}),it&&ss(M,Ie),pe}function fe(M,b,j,J){var pe=me(j);if(typeof pe!="function")throw Error(t(150));if(j=pe.call(j),j==null)throw Error(t(151));for(var ve=pe=null,_e=b,Ie=b=0,Pt=null,$e=j.next();_e!==null&&!$e.done;Ie++,$e=j.next()){_e.index>Ie?(Pt=_e,_e=null):Pt=_e.sibling;var mi=G(M,_e,$e.value,J);if(mi===null){_e===null&&(_e=Pt);break}n&&_e&&mi.alternate===null&&i(M,_e),b=m(mi,b,Ie),ve===null?pe=mi:ve.sibling=mi,ve=mi,_e=Pt}if($e.done)return a(M,_e),it&&ss(M,Ie),pe;if(_e===null){for(;!$e.done;Ie++,$e=j.next())$e=X(M,$e.value,J),$e!==null&&(b=m($e,b,Ie),ve===null?pe=$e:ve.sibling=$e,ve=$e);return it&&ss(M,Ie),pe}for(_e=c(M,_e);!$e.done;Ie++,$e=j.next())$e=ae(_e,M,Ie,$e.value,J),$e!==null&&(n&&$e.alternate!==null&&_e.delete($e.key===null?Ie:$e.key),b=m($e,b,Ie),ve===null?pe=$e:ve.sibling=$e,ve=$e);return n&&_e.forEach(function(Dw){return i(M,Dw)}),it&&ss(M,Ie),pe}function pt(M,b,j,J){if(typeof j=="object"&&j!==null&&j.type===N&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case xe:e:{for(var pe=j.key,ve=b;ve!==null;){if(ve.key===pe){if(pe=j.type,pe===N){if(ve.tag===7){a(M,ve.sibling),b=d(ve,j.props.children),b.return=M,M=b;break e}}else if(ve.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===De&&xp(pe)===ve.type){a(M,ve.sibling),b=d(ve,j.props),b.ref=pa(M,ve,j),b.return=M,M=b;break e}a(M,ve);break}else i(M,ve);ve=ve.sibling}j.type===N?(b=fs(j.props.children,M.mode,J,j.key),b.return=M,M=b):(J=fu(j.type,j.key,j.props,null,M.mode,J),J.ref=pa(M,b,j),J.return=M,M=J)}return _(M);case ye:e:{for(ve=j.key;b!==null;){if(b.key===ve)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){a(M,b.sibling),b=d(b,j.children||[]),b.return=M,M=b;break e}else{a(M,b);break}else i(M,b);b=b.sibling}b=Xh(j,M.mode,J),b.return=M,M=b}return _(M);case De:return ve=j._init,pt(M,b,ve(j._payload),J)}if(Dn(j))return he(M,b,j,J);if(me(j))return fe(M,b,j,J);$l(M,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,b!==null&&b.tag===6?(a(M,b.sibling),b=d(b,j),b.return=M,M=b):(a(M,b),b=Yh(j,M.mode,J),b.return=M,M=b),_(M)):a(M,b)}return pt}var io=Pp(!0),kp=Pp(!1),Hl=ii(null),Wl=null,so=null,oh=null;function ah(){oh=so=Wl=null}function lh(n){var i=Hl.current;tt(Hl),n._currentValue=i}function uh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function oo(n,i){Wl=n,oh=so=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(nn=!0),n.firstContext=null)}function An(n){var i=n._currentValue;if(oh!==n)if(n={context:n,memoizedValue:i,next:null},so===null){if(Wl===null)throw Error(t(308));so=n,Wl.dependencies={lanes:0,firstContext:n}}else so=so.next=n;return i}var os=null;function ch(n){os===null?os=[n]:os.push(n)}function Np(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,ch(i)):(a.next=d.next,d.next=a),i.interleaved=a,xr(n,c)}function xr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ai=!1;function hh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function li(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ze&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,xr(n,a)}return d=c.interleaved,d===null?(i.next=i,ch(c)):(i.next=d.next,d.next=i),c.interleaved=i,xr(n,a)}function ql(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Xr(n,a)}}function Dp(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Kl(n,i,a,c){var d=n.updateQueue;ai=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var P=S,z=P.next;P.next=null,_===null?m=z:_.next=z,_=P;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==_&&(S===null?Q.firstBaseUpdate=z:S.next=z,Q.lastBaseUpdate=P))}if(m!==null){var X=d.baseState;_=0,Q=z=P=null,S=m;do{var G=S.lane,ae=S.eventTime;if((c&G)===G){Q!==null&&(Q=Q.next={eventTime:ae,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var he=n,fe=S;switch(G=i,ae=a,fe.tag){case 1:if(he=fe.payload,typeof he=="function"){X=he.call(ae,X,G);break e}X=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=fe.payload,G=typeof he=="function"?he.call(ae,X,G):he,G==null)break e;X=ie({},X,G);break e;case 2:ai=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,G=d.effects,G===null?d.effects=[S]:G.push(S))}else ae={eventTime:ae,lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(z=Q=ae,P=X):Q=Q.next=ae,_|=G;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;G=S,S=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Q===null&&(P=X),d.baseState=P,d.firstBaseUpdate=z,d.lastBaseUpdate=Q,i=d.shared.interleaved,i!==null){d=i;do _|=d.lane,d=d.next;while(d!==i)}else m===null&&(d.shared.lanes=0);us|=_,n.lanes=_,n.memoizedState=X}}function Vp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ma={},ar=ii(ma),ga=ii(ma),ya=ii(ma);function as(n){if(n===ma)throw Error(t(174));return n}function dh(n,i){switch(Ze(ya,i),Ze(ga,n),Ze(ar,ma),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ee(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Ee(i,n)}tt(ar),Ze(ar,i)}function ao(){tt(ar),tt(ga),tt(ya)}function Op(n){as(ya.current);var i=as(ar.current),a=Ee(i,n.type);i!==a&&(Ze(ga,n),Ze(ar,a))}function fh(n){ga.current===n&&(tt(ar),tt(ga))}var ot=ii(0);function Gl(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ph=[];function mh(){for(var n=0;n<ph.length;n++)ph[n]._workInProgressVersionPrimary=null;ph.length=0}var Ql=oe.ReactCurrentDispatcher,gh=oe.ReactCurrentBatchConfig,ls=0,at=null,Et=null,At=null,Yl=!1,va=!1,_a=0,tw=0;function Ut(){throw Error(t(321))}function yh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!$n(n[a],i[a]))return!1;return!0}function vh(n,i,a,c,d,m){if(ls=m,at=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ql.current=n===null||n.memoizedState===null?sw:ow,n=a(c,d),va){m=0;do{if(va=!1,_a=0,25<=m)throw Error(t(301));m+=1,At=Et=null,i.updateQueue=null,Ql.current=aw,n=a(c,d)}while(va)}if(Ql.current=Zl,i=Et!==null&&Et.next!==null,ls=0,At=Et=at=null,Yl=!1,i)throw Error(t(300));return n}function _h(){var n=_a!==0;return _a=0,n}function lr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?at.memoizedState=At=n:At=At.next=n,At}function xn(){if(Et===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var i=At===null?at.memoizedState:At.next;if(i!==null)At=i,Et=n;else{if(n===null)throw Error(t(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},At===null?at.memoizedState=At=n:At=At.next=n}return At}function wa(n,i){return typeof i=="function"?i(n):i}function wh(n){var i=xn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Et,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var S=_=null,P=null,z=m;do{var Q=z.lane;if((ls&Q)===Q)P!==null&&(P=P.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var X={lane:Q,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};P===null?(S=P=X,_=c):P=P.next=X,at.lanes|=Q,us|=Q}z=z.next}while(z!==null&&z!==m);P===null?_=c:P.next=S,$n(c,i.memoizedState)||(nn=!0),i.memoizedState=c,i.baseState=_,i.baseQueue=P,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,at.lanes|=m,us|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Eh(n){var i=xn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=n(m,_.action),_=_.next;while(_!==d);$n(m,i.memoizedState)||(nn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function Lp(){}function Mp(n,i){var a=at,c=xn(),d=i(),m=!$n(c.memoizedState,d);if(m&&(c.memoizedState=d,nn=!0),c=c.queue,Th(jp.bind(null,a,c,n),[n]),c.getSnapshot!==i||m||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,Ea(9,Up.bind(null,a,c,d,i),void 0,null),xt===null)throw Error(t(349));(ls&30)!==0||Fp(a,i,d)}return d}function Fp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Up(n,i,a,c){i.value=a,i.getSnapshot=c,zp(i)&&Bp(n)}function jp(n,i,a){return a(function(){zp(i)&&Bp(n)})}function zp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!$n(n,a)}catch{return!0}}function Bp(n){var i=xr(n,1);i!==null&&Gn(i,n,1,-1)}function $p(n){var i=lr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:n},i.queue=n,n=n.dispatch=iw.bind(null,at,n),[i.memoizedState,n]}function Ea(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Hp(){return xn().memoizedState}function Xl(n,i,a,c){var d=lr();at.flags|=n,d.memoizedState=Ea(1|i,a,void 0,c===void 0?null:c)}function Jl(n,i,a,c){var d=xn();c=c===void 0?null:c;var m=void 0;if(Et!==null){var _=Et.memoizedState;if(m=_.destroy,c!==null&&yh(c,_.deps)){d.memoizedState=Ea(i,a,m,c);return}}at.flags|=n,d.memoizedState=Ea(1|i,a,m,c)}function Wp(n,i){return Xl(8390656,8,n,i)}function Th(n,i){return Jl(2048,8,n,i)}function qp(n,i){return Jl(4,2,n,i)}function Kp(n,i){return Jl(4,4,n,i)}function Gp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Qp(n,i,a){return a=a!=null?a.concat([n]):null,Jl(4,4,Gp.bind(null,i,n),a)}function Ih(){}function Yp(n,i){var a=xn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&yh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Xp(n,i){var a=xn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&yh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Jp(n,i,a){return(ls&21)===0?(n.baseState&&(n.baseState=!1,nn=!0),n.memoizedState=a):($n(a,i)||(a=Xi(),at.lanes|=a,us|=a,n.baseState=!0),i)}function nw(n,i){var a=Le;Le=a!==0&&4>a?a:4,n(!0);var c=gh.transition;gh.transition={};try{n(!1),i()}finally{Le=a,gh.transition=c}}function Zp(){return xn().memoizedState}function rw(n,i,a){var c=di(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},em(n))tm(i,a);else if(a=Np(n,i,a,c),a!==null){var d=Yt();Gn(a,n,c,d),nm(a,i,c)}}function iw(n,i,a){var c=di(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(em(n))tm(i,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,S=m(_,a);if(d.hasEagerState=!0,d.eagerState=S,$n(S,_)){var P=i.interleaved;P===null?(d.next=d,ch(i)):(d.next=P.next,P.next=d),i.interleaved=d;return}}catch{}finally{}a=Np(n,i,d,c),a!==null&&(d=Yt(),Gn(a,n,c,d),nm(a,i,c))}}function em(n){var i=n.alternate;return n===at||i!==null&&i===at}function tm(n,i){va=Yl=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function nm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Xr(n,a)}}var Zl={readContext:An,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},sw={readContext:An,useCallback:function(n,i){return lr().memoizedState=[n,i===void 0?null:i],n},useContext:An,useEffect:Wp,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Xl(4194308,4,Gp.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Xl(4194308,4,n,i)},useInsertionEffect:function(n,i){return Xl(4,2,n,i)},useMemo:function(n,i){var a=lr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=lr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=rw.bind(null,at,n),[c.memoizedState,n]},useRef:function(n){var i=lr();return n={current:n},i.memoizedState=n},useState:$p,useDebugValue:Ih,useDeferredValue:function(n){return lr().memoizedState=n},useTransition:function(){var n=$p(!1),i=n[0];return n=nw.bind(null,n[1]),lr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=at,d=lr();if(it){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),xt===null)throw Error(t(349));(ls&30)!==0||Fp(c,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,Wp(jp.bind(null,c,m,n),[n]),c.flags|=2048,Ea(9,Up.bind(null,c,m,a,i),void 0,null),a},useId:function(){var n=lr(),i=xt.identifierPrefix;if(it){var a=Ar,c=Rr;a=(c&~(1<<32-Kt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=_a++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=tw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},ow={readContext:An,useCallback:Yp,useContext:An,useEffect:Th,useImperativeHandle:Qp,useInsertionEffect:qp,useLayoutEffect:Kp,useMemo:Xp,useReducer:wh,useRef:Hp,useState:function(){return wh(wa)},useDebugValue:Ih,useDeferredValue:function(n){var i=xn();return Jp(i,Et.memoizedState,n)},useTransition:function(){var n=wh(wa)[0],i=xn().memoizedState;return[n,i]},useMutableSource:Lp,useSyncExternalStore:Mp,useId:Zp,unstable_isNewReconciler:!1},aw={readContext:An,useCallback:Yp,useContext:An,useEffect:Th,useImperativeHandle:Qp,useInsertionEffect:qp,useLayoutEffect:Kp,useMemo:Xp,useReducer:Eh,useRef:Hp,useState:function(){return Eh(wa)},useDebugValue:Ih,useDeferredValue:function(n){var i=xn();return Et===null?i.memoizedState=n:Jp(i,Et.memoizedState,n)},useTransition:function(){var n=Eh(wa)[0],i=xn().memoizedState;return[n,i]},useMutableSource:Lp,useSyncExternalStore:Mp,useId:Zp,unstable_isNewReconciler:!1};function Wn(n,i){if(n&&n.defaultProps){i=ie({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Sh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ie({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var eu={isMounted:function(n){return(n=n._reactInternals)?Ln(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Yt(),d=di(n),m=Pr(c,d);m.payload=i,a!=null&&(m.callback=a),i=li(n,m,d),i!==null&&(Gn(i,n,d,c),ql(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Yt(),d=di(n),m=Pr(c,d);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=li(n,m,d),i!==null&&(Gn(i,n,d,c),ql(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Yt(),c=di(n),d=Pr(a,c);d.tag=2,i!=null&&(d.callback=i),i=li(n,d,c),i!==null&&(Gn(i,n,c,a),ql(i,n,c))}};function rm(n,i,a,c,d,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,_):i.prototype&&i.prototype.isPureReactComponent?!aa(a,c)||!aa(d,m):!0}function im(n,i,a){var c=!1,d=si,m=i.contextType;return typeof m=="object"&&m!==null?m=An(m):(d=tn(i)?rs:Ft.current,c=i.contextTypes,m=(c=c!=null)?eo(n,d):si),i=new i(a,m),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=eu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),i}function sm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&eu.enqueueReplaceState(i,i.state,null)}function Ch(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},hh(n);var m=i.contextType;typeof m=="object"&&m!==null?d.context=An(m):(m=tn(i)?rs:Ft.current,d.context=eo(n,m)),d.state=n.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Sh(n,i,m,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&eu.enqueueReplaceState(d,d.state,null),Kl(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function lo(n,i){try{var a="",c=i;do a+=Pe(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:i,stack:d,digest:null}}function Rh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Ah(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var lw=typeof WeakMap=="function"?WeakMap:Map;function om(n,i,a){a=Pr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){au||(au=!0,Bh=c),Ah(n,i)},a}function am(n,i,a){a=Pr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Ah(n,i)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Ah(n,i),typeof c!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})}),a}function lm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new lw;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=Tw.bind(null,n,i,a),i.then(n,n))}function um(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function cm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Pr(-1,1),i.tag=2,li(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var uw=oe.ReactCurrentOwner,nn=!1;function Qt(n,i,a,c){i.child=n===null?kp(i,null,a,c):io(i,n.child,a,c)}function hm(n,i,a,c,d){a=a.render;var m=i.ref;return oo(i,d),c=vh(n,i,a,c,m,d),a=_h(),n!==null&&!nn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,kr(n,i,d)):(it&&a&&th(i),i.flags|=1,Qt(n,i,c,d),i.child)}function dm(n,i,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!Qh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,fm(n,i,m,c,d)):(n=fu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,(n.lanes&d)===0){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:aa,a(_,c)&&n.ref===i.ref)return kr(n,i,d)}return i.flags|=1,n=pi(m,c),n.ref=i.ref,n.return=i,i.child=n}function fm(n,i,a,c,d){if(n!==null){var m=n.memoizedProps;if(aa(m,c)&&n.ref===i.ref)if(nn=!1,i.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(nn=!0);else return i.lanes=n.lanes,kr(n,i,d)}return xh(n,i,a,c,d)}function pm(n,i,a){var c=i.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(co,mn),mn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ze(co,mn),mn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Ze(co,mn),mn|=c}else m!==null?(c=m.baseLanes|a,i.memoizedState=null):c=a,Ze(co,mn),mn|=c;return Qt(n,i,d,a),i.child}function mm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function xh(n,i,a,c,d){var m=tn(a)?rs:Ft.current;return m=eo(i,m),oo(i,d),a=vh(n,i,a,c,m,d),c=_h(),n!==null&&!nn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,kr(n,i,d)):(it&&c&&th(i),i.flags|=1,Qt(n,i,a,d),i.child)}function gm(n,i,a,c,d){if(tn(a)){var m=!0;Fl(i)}else m=!1;if(oo(i,d),i.stateNode===null)nu(n,i),im(i,a,c),Ch(i,a,c,d),c=!0;else if(n===null){var _=i.stateNode,S=i.memoizedProps;_.props=S;var P=_.context,z=a.contextType;typeof z=="object"&&z!==null?z=An(z):(z=tn(a)?rs:Ft.current,z=eo(i,z));var Q=a.getDerivedStateFromProps,X=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function";X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==c||P!==z)&&sm(i,_,c,z),ai=!1;var G=i.memoizedState;_.state=G,Kl(i,c,_,d),P=i.memoizedState,S!==c||G!==P||en.current||ai?(typeof Q=="function"&&(Sh(i,a,Q,c),P=i.memoizedState),(S=ai||rm(i,a,S,c,G,P,z))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=P),_.props=c,_.state=P,_.context=z,c=S):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{_=i.stateNode,bp(n,i),S=i.memoizedProps,z=i.type===i.elementType?S:Wn(i.type,S),_.props=z,X=i.pendingProps,G=_.context,P=a.contextType,typeof P=="object"&&P!==null?P=An(P):(P=tn(a)?rs:Ft.current,P=eo(i,P));var ae=a.getDerivedStateFromProps;(Q=typeof ae=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==X||G!==P)&&sm(i,_,c,P),ai=!1,G=i.memoizedState,_.state=G,Kl(i,c,_,d);var he=i.memoizedState;S!==X||G!==he||en.current||ai?(typeof ae=="function"&&(Sh(i,a,ae,c),he=i.memoizedState),(z=ai||rm(i,a,z,c,G,he,P)||!1)?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,he,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,he,P)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=he),_.props=c,_.state=he,_.context=P,c=z):(typeof _.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),c=!1)}return Ph(n,i,a,c,m,d)}function Ph(n,i,a,c,d,m){mm(n,i);var _=(i.flags&128)!==0;if(!c&&!_)return d&&Ep(i,a,!1),kr(n,i,m);c=i.stateNode,uw.current=i;var S=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&_?(i.child=io(i,n.child,null,m),i.child=io(i,null,S,m)):Qt(n,i,S,m),i.memoizedState=c.state,d&&Ep(i,a,!0),i.child}function ym(n){var i=n.stateNode;i.pendingContext?_p(n,i.pendingContext,i.pendingContext!==i.context):i.context&&_p(n,i.context,!1),dh(n,i.containerInfo)}function vm(n,i,a,c,d){return ro(),sh(d),i.flags|=256,Qt(n,i,a,c),i.child}var kh={dehydrated:null,treeContext:null,retryLane:0};function Nh(n){return{baseLanes:n,cachePool:null,transitions:null}}function _m(n,i,a){var c=i.pendingProps,d=ot.current,m=!1,_=(i.flags&128)!==0,S;if((S=_)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(m=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ze(ot,d&1),n===null)return ih(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(_=c.children,n=c.fallback,m?(c=i.mode,m=i.child,_={mode:"hidden",children:_},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=_):m=pu(_,c,0,null),n=fs(n,c,a,null),m.return=i,n.return=i,m.sibling=n,i.child=m,i.child.memoizedState=Nh(a),i.memoizedState=kh,n):bh(i,_));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return cw(n,i,_,c,S,d,a);if(m){m=c.fallback,_=i.mode,d=n.child,S=d.sibling;var P={mode:"hidden",children:c.children};return(_&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=P,i.deletions=null):(c=pi(d,P),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?m=pi(S,m):(m=fs(m,_,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,_=n.child.memoizedState,_=_===null?Nh(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},m.memoizedState=_,m.childLanes=n.childLanes&~a,i.memoizedState=kh,c}return m=n.child,n=m.sibling,c=pi(m,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function bh(n,i){return i=pu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function tu(n,i,a,c){return c!==null&&sh(c),io(i,n.child,null,a),n=bh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function cw(n,i,a,c,d,m,_){if(a)return i.flags&256?(i.flags&=-257,c=Rh(Error(t(422))),tu(n,i,_,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(m=c.fallback,d=i.mode,c=pu({mode:"visible",children:c.children},d,0,null),m=fs(m,d,_,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,(i.mode&1)!==0&&io(i,n.child,null,_),i.child.memoizedState=Nh(_),i.memoizedState=kh,m);if((i.mode&1)===0)return tu(n,i,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,m=Error(t(419)),c=Rh(m,c,void 0),tu(n,i,_,c)}if(S=(_&n.childLanes)!==0,nn||S){if(c=xt,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|_))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,xr(n,d),Gn(c,n,d,-1))}return Gh(),c=Rh(Error(t(421))),tu(n,i,_,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=Iw.bind(null,n),d._reactRetry=i,null):(n=m.treeContext,pn=ri(d.nextSibling),fn=i,it=!0,Hn=null,n!==null&&(Cn[Rn++]=Rr,Cn[Rn++]=Ar,Cn[Rn++]=is,Rr=n.id,Ar=n.overflow,is=i),i=bh(i,c.children),i.flags|=4096,i)}function wm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),uh(n.return,i,a)}function Dh(n,i,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function Em(n,i,a){var c=i.pendingProps,d=c.revealOrder,m=c.tail;if(Qt(n,i,c.children,a),c=ot.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wm(n,a,i);else if(n.tag===19)wm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ze(ot,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&Gl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Dh(i,!1,d,a,m);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Gl(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Dh(i,!0,a,null,m);break;case"together":Dh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function nu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function kr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),us|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=pi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=pi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function hw(n,i,a){switch(i.tag){case 3:ym(i),ro();break;case 5:Op(i);break;case 1:tn(i.type)&&Fl(i);break;case 4:dh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Ze(Hl,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ze(ot,ot.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?_m(n,i,a):(Ze(ot,ot.current&1),n=kr(n,i,a),n!==null?n.sibling:null);Ze(ot,ot.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Em(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ze(ot,ot.current),c)break;return null;case 22:case 23:return i.lanes=0,pm(n,i,a)}return kr(n,i,a)}var Tm,Vh,Im,Sm;Tm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Vh=function(){},Im=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,as(ar.current);var m=null;switch(a){case"input":d=bn(n,d),c=bn(n,c),m=[];break;case"select":d=ie({},d,{value:void 0}),c=ie({},c,{value:void 0}),m=[];break;case"textarea":d=zi(n,d),c=zi(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ol)}Bo(a,c);var _;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var S=d[z];for(_ in S)S.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?m||(m=[]):(m=m||[]).push(z,null));for(z in c){var P=c[z];if(S=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&P!==S&&(P!=null||S!=null))if(z==="style")if(S){for(_ in S)!S.hasOwnProperty(_)||P&&P.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in P)P.hasOwnProperty(_)&&S[_]!==P[_]&&(a||(a={}),a[_]=P[_])}else a||(m||(m=[]),m.push(z,a)),a=P;else z==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,S=S?S.__html:void 0,P!=null&&S!==P&&(m=m||[]).push(z,P)):z==="children"?typeof P!="string"&&typeof P!="number"||(m=m||[]).push(z,""+P):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(P!=null&&z==="onScroll"&&et("scroll",n),m||S===P||(m=[])):(m=m||[]).push(z,P))}a&&(m=m||[]).push("style",a);var z=m;(i.updateQueue=z)&&(i.flags|=4)}},Sm=function(n,i,a,c){a!==c&&(i.flags|=4)};function Ta(n,i){if(!it)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function jt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function dw(n,i,a){var c=i.pendingProps;switch(nh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(i),null;case 1:return tn(i.type)&&Ml(),jt(i),null;case 3:return c=i.stateNode,ao(),tt(en),tt(Ft),mh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Bl(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Hn!==null&&(Wh(Hn),Hn=null))),Vh(n,i),jt(i),null;case 5:fh(i);var d=as(ya.current);if(a=i.type,n!==null&&i.stateNode!=null)Im(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return jt(i),null}if(n=as(ar.current),Bl(i)){c=i.stateNode,a=i.type;var m=i.memoizedProps;switch(c[or]=i,c[da]=m,n=(i.mode&1)!==0,a){case"dialog":et("cancel",c),et("close",c);break;case"iframe":case"object":case"embed":et("load",c);break;case"video":case"audio":for(d=0;d<ua.length;d++)et(ua[d],c);break;case"source":et("error",c);break;case"img":case"image":case"link":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"input":Jn(c,m),et("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},et("invalid",c);break;case"textarea":Wr(c,m),et("invalid",c)}Bo(a,m),d=null;for(var _ in m)if(m.hasOwnProperty(_)){var S=m[_];_==="children"?typeof S=="string"?c.textContent!==S&&(m.suppressHydrationWarning!==!0&&Vl(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(m.suppressHydrationWarning!==!0&&Vl(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(_)&&S!=null&&_==="onScroll"&&et("scroll",c)}switch(a){case"input":yn(c),Cs(c,m,!0);break;case"textarea":yn(c),We(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Ol)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ue(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=_.createElement(a,{is:c.is}):(n=_.createElement(a),a==="select"&&(_=n,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):n=_.createElementNS(n,a),n[or]=i,n[da]=c,Tm(n,i,!1,!1),i.stateNode=n;e:{switch(_=$o(a,c),a){case"dialog":et("cancel",n),et("close",n),d=c;break;case"iframe":case"object":case"embed":et("load",n),d=c;break;case"video":case"audio":for(d=0;d<ua.length;d++)et(ua[d],n);d=c;break;case"source":et("error",n),d=c;break;case"img":case"image":case"link":et("error",n),et("load",n),d=c;break;case"details":et("toggle",n),d=c;break;case"input":Jn(n,c),d=bn(n,c),et("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ie({},c,{value:void 0}),et("invalid",n);break;case"textarea":Wr(n,c),d=zi(n,c),et("invalid",n);break;default:d=c}Bo(a,d),S=d;for(m in S)if(S.hasOwnProperty(m)){var P=S[m];m==="style"?qr(n,P):m==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&_n(n,P)):m==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&Qe(n,P):typeof P=="number"&&Qe(n,""+P):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?P!=null&&m==="onScroll"&&et("scroll",n):P!=null&&ne(n,m,P,_))}switch(a){case"input":yn(n),Cs(n,c,!1);break;case"textarea":yn(n),We(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?vn(n,!!c.multiple,m,!1):c.defaultValue!=null&&vn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Ol)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return jt(i),null;case 6:if(n&&i.stateNode!=null)Sm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=as(ya.current),as(ar.current),Bl(i)){if(c=i.stateNode,a=i.memoizedProps,c[or]=i,(m=c.nodeValue!==a)&&(n=fn,n!==null))switch(n.tag){case 3:Vl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Vl(c.nodeValue,a,(n.mode&1)!==0)}m&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[or]=i,i.stateNode=c}return jt(i),null;case 13:if(tt(ot),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(it&&pn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Ap(),ro(),i.flags|=98560,m=!1;else if(m=Bl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[or]=i}else ro(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;jt(i),m=!1}else Hn!==null&&(Wh(Hn),Hn=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(ot.current&1)!==0?Tt===0&&(Tt=3):Gh())),i.updateQueue!==null&&(i.flags|=4),jt(i),null);case 4:return ao(),Vh(n,i),n===null&&ca(i.stateNode.containerInfo),jt(i),null;case 10:return lh(i.type._context),jt(i),null;case 17:return tn(i.type)&&Ml(),jt(i),null;case 19:if(tt(ot),m=i.memoizedState,m===null)return jt(i),null;if(c=(i.flags&128)!==0,_=m.rendering,_===null)if(c)Ta(m,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(_=Gl(n),_!==null){for(i.flags|=128,Ta(m,!1),c=_.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)m=a,n=c,m.flags&=14680066,_=m.alternate,_===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=_.childLanes,m.lanes=_.lanes,m.child=_.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=_.memoizedProps,m.memoizedState=_.memoizedState,m.updateQueue=_.updateQueue,m.type=_.type,n=_.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ze(ot,ot.current&1|2),i.child}n=n.sibling}m.tail!==null&&Je()>ho&&(i.flags|=128,c=!0,Ta(m,!1),i.lanes=4194304)}else{if(!c)if(n=Gl(_),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ta(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!it)return jt(i),null}else 2*Je()-m.renderingStartTime>ho&&a!==1073741824&&(i.flags|=128,c=!0,Ta(m,!1),i.lanes=4194304);m.isBackwards?(_.sibling=i.child,i.child=_):(a=m.last,a!==null?a.sibling=_:i.child=_,m.last=_)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Je(),i.sibling=null,a=ot.current,Ze(ot,c?a&1|2:a&1),i):(jt(i),null);case 22:case 23:return Kh(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(mn&1073741824)!==0&&(jt(i),i.subtreeFlags&6&&(i.flags|=8192)):jt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function fw(n,i){switch(nh(i),i.tag){case 1:return tn(i.type)&&Ml(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ao(),tt(en),tt(Ft),mh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return fh(i),null;case 13:if(tt(ot),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));ro()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return tt(ot),null;case 4:return ao(),null;case 10:return lh(i.type._context),null;case 22:case 23:return Kh(),null;case 24:return null;default:return null}}var ru=!1,zt=!1,pw=typeof WeakSet=="function"?WeakSet:Set,ce=null;function uo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ct(n,i,c)}else a.current=null}function Oh(n,i,a){try{a()}catch(c){ct(n,i,c)}}var Cm=!1;function mw(n,i){if(Kc=ei,n=rp(),Uc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,S=-1,P=-1,z=0,Q=0,X=n,G=null;t:for(;;){for(var ae;X!==a||d!==0&&X.nodeType!==3||(S=_+d),X!==m||c!==0&&X.nodeType!==3||(P=_+c),X.nodeType===3&&(_+=X.nodeValue.length),(ae=X.firstChild)!==null;)G=X,X=ae;for(;;){if(X===n)break t;if(G===a&&++z===d&&(S=_),G===m&&++Q===c&&(P=_),(ae=X.nextSibling)!==null)break;X=G,G=X.parentNode}X=ae}a=S===-1||P===-1?null:{start:S,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gc={focusedElem:n,selectionRange:a},ei=!1,ce=i;ce!==null;)if(i=ce,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ce=n;else for(;ce!==null;){i=ce;try{var he=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var fe=he.memoizedProps,pt=he.memoizedState,M=i.stateNode,b=M.getSnapshotBeforeUpdate(i.elementType===i.type?fe:Wn(i.type,fe),pt);M.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var j=i.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){ct(i,i.return,J)}if(n=i.sibling,n!==null){n.return=i.return,ce=n;break}ce=i.return}return he=Cm,Cm=!1,he}function Ia(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&Oh(i,a,m)}d=d.next}while(d!==c)}}function iu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Lh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Rm(n){var i=n.alternate;i!==null&&(n.alternate=null,Rm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[or],delete i[da],delete i[Jc],delete i[X0],delete i[J0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Am(n){return n.tag===5||n.tag===3||n.tag===4}function xm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Am(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ol));else if(c!==4&&(n=n.child,n!==null))for(Mh(n,i,a),n=n.sibling;n!==null;)Mh(n,i,a),n=n.sibling}function Fh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Fh(n,i,a),n=n.sibling;n!==null;)Fh(n,i,a),n=n.sibling}var Dt=null,qn=!1;function ui(n,i,a){for(a=a.child;a!==null;)Pm(n,i,a),a=a.sibling}function Pm(n,i,a){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Qi,a)}catch{}switch(a.tag){case 5:zt||uo(a,i);case 6:var c=Dt,d=qn;Dt=null,ui(n,i,a),Dt=c,qn=d,Dt!==null&&(qn?(n=Dt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Dt.removeChild(a.stateNode));break;case 18:Dt!==null&&(qn?(n=Dt,a=a.stateNode,n.nodeType===8?Xc(n.parentNode,a):n.nodeType===1&&Xc(n,a),zn(n)):Xc(Dt,a.stateNode));break;case 4:c=Dt,d=qn,Dt=a.stateNode.containerInfo,qn=!0,ui(n,i,a),Dt=c,qn=d;break;case 0:case 11:case 14:case 15:if(!zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,_=m.destroy;m=m.tag,_!==void 0&&((m&2)!==0||(m&4)!==0)&&Oh(a,i,_),d=d.next}while(d!==c)}ui(n,i,a);break;case 1:if(!zt&&(uo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){ct(a,i,S)}ui(n,i,a);break;case 21:ui(n,i,a);break;case 22:a.mode&1?(zt=(c=zt)||a.memoizedState!==null,ui(n,i,a),zt=c):ui(n,i,a);break;default:ui(n,i,a)}}function km(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new pw),i.forEach(function(c){var d=Sw.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Kn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,_=i,S=_;e:for(;S!==null;){switch(S.tag){case 5:Dt=S.stateNode,qn=!1;break e;case 3:Dt=S.stateNode.containerInfo,qn=!0;break e;case 4:Dt=S.stateNode.containerInfo,qn=!0;break e}S=S.return}if(Dt===null)throw Error(t(160));Pm(m,_,d),Dt=null,qn=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch(z){ct(d,i,z)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Nm(i,n),i=i.sibling}function Nm(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Kn(i,n),ur(n),c&4){try{Ia(3,n,n.return),iu(3,n)}catch(fe){ct(n,n.return,fe)}try{Ia(5,n,n.return)}catch(fe){ct(n,n.return,fe)}}break;case 1:Kn(i,n),ur(n),c&512&&a!==null&&uo(a,a.return);break;case 5:if(Kn(i,n),ur(n),c&512&&a!==null&&uo(a,a.return),n.flags&32){var d=n.stateNode;try{Qe(d,"")}catch(fe){ct(n,n.return,fe)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,_=a!==null?a.memoizedProps:m,S=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{S==="input"&&m.type==="radio"&&m.name!=null&&Ui(d,m),$o(S,_);var z=$o(S,m);for(_=0;_<P.length;_+=2){var Q=P[_],X=P[_+1];Q==="style"?qr(d,X):Q==="dangerouslySetInnerHTML"?_n(d,X):Q==="children"?Qe(d,X):ne(d,Q,X,z)}switch(S){case"input":ji(d,m);break;case"textarea":te(d,m);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ae=m.value;ae!=null?vn(d,!!m.multiple,ae,!1):G!==!!m.multiple&&(m.defaultValue!=null?vn(d,!!m.multiple,m.defaultValue,!0):vn(d,!!m.multiple,m.multiple?[]:"",!1))}d[da]=m}catch(fe){ct(n,n.return,fe)}}break;case 6:if(Kn(i,n),ur(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(fe){ct(n,n.return,fe)}}break;case 3:if(Kn(i,n),ur(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{zn(i.containerInfo)}catch(fe){ct(n,n.return,fe)}break;case 4:Kn(i,n),ur(n);break;case 13:Kn(i,n),ur(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(zh=Je())),c&4&&km(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?(zt=(z=zt)||Q,Kn(i,n),zt=z):Kn(i,n),ur(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Q&&(n.mode&1)!==0)for(ce=n,Q=n.child;Q!==null;){for(X=ce=Q;ce!==null;){switch(G=ce,ae=G.child,G.tag){case 0:case 11:case 14:case 15:Ia(4,G,G.return);break;case 1:uo(G,G.return);var he=G.stateNode;if(typeof he.componentWillUnmount=="function"){c=G,a=G.return;try{i=c,he.props=i.memoizedProps,he.state=i.memoizedState,he.componentWillUnmount()}catch(fe){ct(c,a,fe)}}break;case 5:uo(G,G.return);break;case 22:if(G.memoizedState!==null){Vm(X);continue}}ae!==null?(ae.return=G,ce=ae):Vm(X)}Q=Q.sibling}e:for(Q=null,X=n;;){if(X.tag===5){if(Q===null){Q=X;try{d=X.stateNode,z?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(S=X.stateNode,P=X.memoizedProps.style,_=P!=null&&P.hasOwnProperty("display")?P.display:null,S.style.display=wn("display",_))}catch(fe){ct(n,n.return,fe)}}}else if(X.tag===6){if(Q===null)try{X.stateNode.nodeValue=z?"":X.memoizedProps}catch(fe){ct(n,n.return,fe)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break e;for(;X.sibling===null;){if(X.return===null||X.return===n)break e;Q===X&&(Q=null),X=X.return}Q===X&&(Q=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Kn(i,n),ur(n),c&4&&km(n);break;case 21:break;default:Kn(i,n),ur(n)}}function ur(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Am(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Qe(d,""),c.flags&=-33);var m=xm(n);Fh(n,m,d);break;case 3:case 4:var _=c.stateNode.containerInfo,S=xm(n);Mh(n,S,_);break;default:throw Error(t(161))}}catch(P){ct(n,n.return,P)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function gw(n,i,a){ce=n,bm(n)}function bm(n,i,a){for(var c=(n.mode&1)!==0;ce!==null;){var d=ce,m=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||ru;if(!_){var S=d.alternate,P=S!==null&&S.memoizedState!==null||zt;S=ru;var z=zt;if(ru=_,(zt=P)&&!z)for(ce=d;ce!==null;)_=ce,P=_.child,_.tag===22&&_.memoizedState!==null?Om(d):P!==null?(P.return=_,ce=P):Om(d);for(;m!==null;)ce=m,bm(m),m=m.sibling;ce=d,ru=S,zt=z}Dm(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,ce=m):Dm(n)}}function Dm(n){for(;ce!==null;){var i=ce;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:zt||iu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!zt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Wn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&Vp(i,m,c);break;case 3:var _=i.updateQueue;if(_!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Vp(i,_,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var P=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var z=i.alternate;if(z!==null){var Q=z.memoizedState;if(Q!==null){var X=Q.dehydrated;X!==null&&zn(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||i.flags&512&&Lh(i)}catch(G){ct(i,i.return,G)}}if(i===n){ce=null;break}if(a=i.sibling,a!==null){a.return=i.return,ce=a;break}ce=i.return}}function Vm(n){for(;ce!==null;){var i=ce;if(i===n){ce=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ce=a;break}ce=i.return}}function Om(n){for(;ce!==null;){var i=ce;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{iu(4,i)}catch(P){ct(i,a,P)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(P){ct(i,d,P)}}var m=i.return;try{Lh(i)}catch(P){ct(i,m,P)}break;case 5:var _=i.return;try{Lh(i)}catch(P){ct(i,_,P)}}}catch(P){ct(i,i.return,P)}if(i===n){ce=null;break}var S=i.sibling;if(S!==null){S.return=i.return,ce=S;break}ce=i.return}}var yw=Math.ceil,su=oe.ReactCurrentDispatcher,Uh=oe.ReactCurrentOwner,Pn=oe.ReactCurrentBatchConfig,ze=0,xt=null,yt=null,Vt=0,mn=0,co=ii(0),Tt=0,Sa=null,us=0,ou=0,jh=0,Ca=null,rn=null,zh=0,ho=1/0,Nr=null,au=!1,Bh=null,ci=null,lu=!1,hi=null,uu=0,Ra=0,$h=null,cu=-1,hu=0;function Yt(){return(ze&6)!==0?Je():cu!==-1?cu:cu=Je()}function di(n){return(n.mode&1)===0?1:(ze&2)!==0&&Vt!==0?Vt&-Vt:ew.transition!==null?(hu===0&&(hu=Xi()),hu):(n=Le,n!==0||(n=window.event,n=n===void 0?16:ea(n.type)),n)}function Gn(n,i,a,c){if(50<Ra)throw Ra=0,$h=null,Error(t(185));Yr(n,a,c),((ze&2)===0||n!==xt)&&(n===xt&&((ze&2)===0&&(ou|=a),Tt===4&&fi(n,Vt)),sn(n,c),a===1&&ze===0&&(i.mode&1)===0&&(ho=Je()+500,Ul&&oi()))}function sn(n,i){var a=n.callbackNode;_r(n,i);var c=Yi(n,n===xt?Vt:0);if(c===0)a!==null&&Qo(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Qo(a),i===1)n.tag===0?Z0(Mm.bind(null,n)):Tp(Mm.bind(null,n)),Q0(function(){(ze&6)===0&&oi()}),a=null;else{switch(Jr(c)){case 1:a=Gi;break;case 4:a=Kr;break;case 16:a=Tn;break;case 536870912:a=hl;break;default:a=Tn}a=Wm(a,Lm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Lm(n,i){if(cu=-1,hu=0,(ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(fo()&&n.callbackNode!==a)return null;var c=Yi(n,n===xt?Vt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=du(n,c);else{i=c;var d=ze;ze|=2;var m=Um();(xt!==n||Vt!==i)&&(Nr=null,ho=Je()+500,hs(n,i));do try{ww();break}catch(S){Fm(n,S)}while(!0);ah(),su.current=m,ze=d,yt!==null?i=0:(xt=null,Vt=0,i=Tt)}if(i!==0){if(i===2&&(d=cn(n),d!==0&&(c=d,i=Hh(n,d))),i===1)throw a=Sa,hs(n,0),fi(n,c),sn(n,Je()),a;if(i===6)fi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!vw(d)&&(i=du(n,c),i===2&&(m=cn(n),m!==0&&(c=m,i=Hh(n,m))),i===1))throw a=Sa,hs(n,0),fi(n,c),sn(n,Je()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:ds(n,rn,Nr);break;case 3:if(fi(n,c),(c&130023424)===c&&(i=zh+500-Je(),10<i)){if(Yi(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Yt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Yc(ds.bind(null,n,rn,Nr),i);break}ds(n,rn,Nr);break;case 4:if(fi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var _=31-Kt(c);m=1<<_,_=i[_],_>d&&(d=_),c&=~m}if(c=d,c=Je()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*yw(c/1960))-c,10<c){n.timeoutHandle=Yc(ds.bind(null,n,rn,Nr),c);break}ds(n,rn,Nr);break;case 5:ds(n,rn,Nr);break;default:throw Error(t(329))}}}return sn(n,Je()),n.callbackNode===a?Lm.bind(null,n):null}function Hh(n,i){var a=Ca;return n.current.memoizedState.isDehydrated&&(hs(n,i).flags|=256),n=du(n,i),n!==2&&(i=rn,rn=a,i!==null&&Wh(i)),n}function Wh(n){rn===null?rn=n:rn.push.apply(rn,n)}function vw(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!$n(m(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function fi(n,i){for(i&=~jh,i&=~ou,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Kt(i),c=1<<a;n[a]=-1,i&=~c}}function Mm(n){if((ze&6)!==0)throw Error(t(327));fo();var i=Yi(n,0);if((i&1)===0)return sn(n,Je()),null;var a=du(n,i);if(n.tag!==0&&a===2){var c=cn(n);c!==0&&(i=c,a=Hh(n,c))}if(a===1)throw a=Sa,hs(n,0),fi(n,i),sn(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ds(n,rn,Nr),sn(n,Je()),null}function qh(n,i){var a=ze;ze|=1;try{return n(i)}finally{ze=a,ze===0&&(ho=Je()+500,Ul&&oi())}}function cs(n){hi!==null&&hi.tag===0&&(ze&6)===0&&fo();var i=ze;ze|=1;var a=Pn.transition,c=Le;try{if(Pn.transition=null,Le=1,n)return n()}finally{Le=c,Pn.transition=a,ze=i,(ze&6)===0&&oi()}}function Kh(){mn=co.current,tt(co)}function hs(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,G0(a)),yt!==null)for(a=yt.return;a!==null;){var c=a;switch(nh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ml();break;case 3:ao(),tt(en),tt(Ft),mh();break;case 5:fh(c);break;case 4:ao();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:lh(c.type._context);break;case 22:case 23:Kh()}a=a.return}if(xt=n,yt=n=pi(n.current,null),Vt=mn=i,Tt=0,Sa=null,jh=ou=us=0,rn=Ca=null,os!==null){for(i=0;i<os.length;i++)if(a=os[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var _=m.next;m.next=d,c.next=_}a.pending=c}os=null}return n}function Fm(n,i){do{var a=yt;try{if(ah(),Ql.current=Zl,Yl){for(var c=at.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Yl=!1}if(ls=0,At=Et=at=null,va=!1,_a=0,Uh.current=null,a===null||a.return===null){Tt=1,Sa=i,yt=null;break}e:{var m=n,_=a.return,S=a,P=i;if(i=Vt,S.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var z=P,Q=S,X=Q.tag;if((Q.mode&1)===0&&(X===0||X===11||X===15)){var G=Q.alternate;G?(Q.updateQueue=G.updateQueue,Q.memoizedState=G.memoizedState,Q.lanes=G.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ae=um(_);if(ae!==null){ae.flags&=-257,cm(ae,_,S,m,i),ae.mode&1&&lm(m,z,i),i=ae,P=z;var he=i.updateQueue;if(he===null){var fe=new Set;fe.add(P),i.updateQueue=fe}else he.add(P);break e}else{if((i&1)===0){lm(m,z,i),Gh();break e}P=Error(t(426))}}else if(it&&S.mode&1){var pt=um(_);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),cm(pt,_,S,m,i),sh(lo(P,S));break e}}m=P=lo(P,S),Tt!==4&&(Tt=2),Ca===null?Ca=[m]:Ca.push(m),m=_;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var M=om(m,P,i);Dp(m,M);break e;case 1:S=P;var b=m.type,j=m.stateNode;if((m.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(ci===null||!ci.has(j)))){m.flags|=65536,i&=-i,m.lanes|=i;var J=am(m,S,i);Dp(m,J);break e}}m=m.return}while(m!==null)}zm(a)}catch(pe){i=pe,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function Um(){var n=su.current;return su.current=Zl,n===null?Zl:n}function Gh(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),xt===null||(us&268435455)===0&&(ou&268435455)===0||fi(xt,Vt)}function du(n,i){var a=ze;ze|=2;var c=Um();(xt!==n||Vt!==i)&&(Nr=null,hs(n,i));do try{_w();break}catch(d){Fm(n,d)}while(!0);if(ah(),ze=a,su.current=c,yt!==null)throw Error(t(261));return xt=null,Vt=0,Tt}function _w(){for(;yt!==null;)jm(yt)}function ww(){for(;yt!==null&&!ul();)jm(yt)}function jm(n){var i=Hm(n.alternate,n,mn);n.memoizedProps=n.pendingProps,i===null?zm(n):yt=i,Uh.current=null}function zm(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=dw(a,i,mn),a!==null){yt=a;return}}else{if(a=fw(a,i),a!==null){a.flags&=32767,yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Tt=6,yt=null;return}}if(i=i.sibling,i!==null){yt=i;return}yt=i=n}while(i!==null);Tt===0&&(Tt=5)}function ds(n,i,a){var c=Le,d=Pn.transition;try{Pn.transition=null,Le=1,Ew(n,i,a,c)}finally{Pn.transition=d,Le=c}return null}function Ew(n,i,a,c){do fo();while(hi!==null);if((ze&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(Ye(n,m),n===xt&&(yt=xt=null,Vt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||lu||(lu=!0,Wm(Tn,function(){return fo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Pn.transition,Pn.transition=null;var _=Le;Le=1;var S=ze;ze|=4,Uh.current=null,mw(n,a),Nm(a,n),z0(Gc),ei=!!Kc,Gc=Kc=null,n.current=a,gw(a),Nc(),ze=S,Le=_,Pn.transition=m}else n.current=a;if(lu&&(lu=!1,hi=n,uu=d),m=n.pendingLanes,m===0&&(ci=null),dl(a.stateNode),sn(n,Je()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(au)throw au=!1,n=Bh,Bh=null,n;return(uu&1)!==0&&n.tag!==0&&fo(),m=n.pendingLanes,(m&1)!==0?n===$h?Ra++:(Ra=0,$h=n):Ra=0,oi(),null}function fo(){if(hi!==null){var n=Jr(uu),i=Pn.transition,a=Le;try{if(Pn.transition=null,Le=16>n?16:n,hi===null)var c=!1;else{if(n=hi,hi=null,uu=0,(ze&6)!==0)throw Error(t(331));var d=ze;for(ze|=4,ce=n.current;ce!==null;){var m=ce,_=m.child;if((ce.flags&16)!==0){var S=m.deletions;if(S!==null){for(var P=0;P<S.length;P++){var z=S[P];for(ce=z;ce!==null;){var Q=ce;switch(Q.tag){case 0:case 11:case 15:Ia(8,Q,m)}var X=Q.child;if(X!==null)X.return=Q,ce=X;else for(;ce!==null;){Q=ce;var G=Q.sibling,ae=Q.return;if(Rm(Q),Q===z){ce=null;break}if(G!==null){G.return=ae,ce=G;break}ce=ae}}}var he=m.alternate;if(he!==null){var fe=he.child;if(fe!==null){he.child=null;do{var pt=fe.sibling;fe.sibling=null,fe=pt}while(fe!==null)}}ce=m}}if((m.subtreeFlags&2064)!==0&&_!==null)_.return=m,ce=_;else e:for(;ce!==null;){if(m=ce,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Ia(9,m,m.return)}var M=m.sibling;if(M!==null){M.return=m.return,ce=M;break e}ce=m.return}}var b=n.current;for(ce=b;ce!==null;){_=ce;var j=_.child;if((_.subtreeFlags&2064)!==0&&j!==null)j.return=_,ce=j;else e:for(_=b;ce!==null;){if(S=ce,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:iu(9,S)}}catch(pe){ct(S,S.return,pe)}if(S===_){ce=null;break e}var J=S.sibling;if(J!==null){J.return=S.return,ce=J;break e}ce=S.return}}if(ze=d,oi(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Qi,n)}catch{}c=!0}return c}finally{Le=a,Pn.transition=i}}return!1}function Bm(n,i,a){i=lo(a,i),i=om(n,i,1),n=li(n,i,1),i=Yt(),n!==null&&(Yr(n,1,i),sn(n,i))}function ct(n,i,a){if(n.tag===3)Bm(n,n,a);else for(;i!==null;){if(i.tag===3){Bm(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ci===null||!ci.has(c))){n=lo(a,n),n=am(i,n,1),i=li(i,n,1),n=Yt(),i!==null&&(Yr(i,1,n),sn(i,n));break}}i=i.return}}function Tw(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Yt(),n.pingedLanes|=n.suspendedLanes&a,xt===n&&(Vt&a)===a&&(Tt===4||Tt===3&&(Vt&130023424)===Vt&&500>Je()-zh?hs(n,0):jh|=a),sn(n,i)}function $m(n,i){i===0&&((n.mode&1)===0?i=1:(i=Os,Os<<=1,(Os&130023424)===0&&(Os=4194304)));var a=Yt();n=xr(n,i),n!==null&&(Yr(n,i,a),sn(n,a))}function Iw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),$m(n,a)}function Sw(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),$m(n,a)}var Hm;Hm=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||en.current)nn=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return nn=!1,hw(n,i,a);nn=(n.flags&131072)!==0}else nn=!1,it&&(i.flags&1048576)!==0&&Ip(i,zl,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;nu(n,i),n=i.pendingProps;var d=eo(i,Ft.current);oo(i,a),d=vh(null,i,c,n,d,a);var m=_h();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,tn(c)?(m=!0,Fl(i)):m=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,hh(i),d.updater=eu,i.stateNode=d,d._reactInternals=i,Ch(i,c,n,a),i=Ph(null,i,c,!0,m,a)):(i.tag=0,it&&m&&th(i),Qt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(nu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=Rw(c),n=Wn(c,n),d){case 0:i=xh(null,i,c,n,a);break e;case 1:i=gm(null,i,c,n,a);break e;case 11:i=hm(null,i,c,n,a);break e;case 14:i=dm(null,i,c,Wn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Wn(c,d),xh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Wn(c,d),gm(n,i,c,d,a);case 3:e:{if(ym(i),n===null)throw Error(t(387));c=i.pendingProps,m=i.memoizedState,d=m.element,bp(n,i),Kl(i,c,null,a);var _=i.memoizedState;if(c=_.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){d=lo(Error(t(423)),i),i=vm(n,i,c,a,d);break e}else if(c!==d){d=lo(Error(t(424)),i),i=vm(n,i,c,a,d);break e}else for(pn=ri(i.stateNode.containerInfo.firstChild),fn=i,it=!0,Hn=null,a=kp(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ro(),c===d){i=kr(n,i,a);break e}Qt(n,i,c,a)}i=i.child}return i;case 5:return Op(i),n===null&&ih(i),c=i.type,d=i.pendingProps,m=n!==null?n.memoizedProps:null,_=d.children,Qc(c,d)?_=null:m!==null&&Qc(c,m)&&(i.flags|=32),mm(n,i),Qt(n,i,_,a),i.child;case 6:return n===null&&ih(i),null;case 13:return _m(n,i,a);case 4:return dh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=io(i,null,c,a):Qt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Wn(c,d),hm(n,i,c,d,a);case 7:return Qt(n,i,i.pendingProps,a),i.child;case 8:return Qt(n,i,i.pendingProps.children,a),i.child;case 12:return Qt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,m=i.memoizedProps,_=d.value,Ze(Hl,c._currentValue),c._currentValue=_,m!==null)if($n(m.value,_)){if(m.children===d.children&&!en.current){i=kr(n,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var S=m.dependencies;if(S!==null){_=m.child;for(var P=S.firstContext;P!==null;){if(P.context===c){if(m.tag===1){P=Pr(-1,a&-a),P.tag=2;var z=m.updateQueue;if(z!==null){z=z.shared;var Q=z.pending;Q===null?P.next=P:(P.next=Q.next,Q.next=P),z.pending=P}}m.lanes|=a,P=m.alternate,P!==null&&(P.lanes|=a),uh(m.return,a,i),S.lanes|=a;break}P=P.next}}else if(m.tag===10)_=m.type===i.type?null:m.child;else if(m.tag===18){if(_=m.return,_===null)throw Error(t(341));_.lanes|=a,S=_.alternate,S!==null&&(S.lanes|=a),uh(_,a,i),_=m.sibling}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===i){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}Qt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,oo(i,a),d=An(d),c=c(d),i.flags|=1,Qt(n,i,c,a),i.child;case 14:return c=i.type,d=Wn(c,i.pendingProps),d=Wn(c.type,d),dm(n,i,c,d,a);case 15:return fm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Wn(c,d),nu(n,i),i.tag=1,tn(c)?(n=!0,Fl(i)):n=!1,oo(i,a),im(i,c,d),Ch(i,c,d,a),Ph(null,i,c,!0,n,a);case 19:return Em(n,i,a);case 22:return pm(n,i,a)}throw Error(t(156,i.tag))};function Wm(n,i){return Ds(n,i)}function Cw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(n,i,a,c){return new Cw(n,i,a,c)}function Qh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Rw(n){if(typeof n=="function")return Qh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===ht)return 14}return 2}function pi(n,i){var a=n.alternate;return a===null?(a=kn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function fu(n,i,a,c,d,m){var _=2;if(c=n,typeof n=="function")Qh(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case N:return fs(a.children,d,m,i);case I:_=8,d|=8;break;case A:return n=kn(12,a,i,d|2),n.elementType=A,n.lanes=m,n;case R:return n=kn(13,a,i,d),n.elementType=R,n.lanes=m,n;case Xe:return n=kn(19,a,i,d),n.elementType=Xe,n.lanes=m,n;case He:return pu(a,d,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:_=10;break e;case D:_=9;break e;case O:_=11;break e;case ht:_=14;break e;case De:_=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=kn(_,a,i,d),i.elementType=n,i.type=c,i.lanes=m,i}function fs(n,i,a,c){return n=kn(7,n,c,i),n.lanes=a,n}function pu(n,i,a,c){return n=kn(22,n,c,i),n.elementType=He,n.lanes=a,n.stateNode={isHidden:!1},n}function Yh(n,i,a){return n=kn(6,n,null,i),n.lanes=a,n}function Xh(n,i,a){return i=kn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Aw(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qr(0),this.expirationTimes=Qr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Jh(n,i,a,c,d,m,_,S,P){return n=new Aw(n,i,a,S,P),i===1?(i=1,m===!0&&(i|=8)):i=0,m=kn(3,null,null,i),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},hh(m),n}function xw(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function qm(n){if(!n)return si;n=n._reactInternals;e:{if(Ln(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(tn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(tn(a))return wp(n,a,i)}return i}function Km(n,i,a,c,d,m,_,S,P){return n=Jh(a,c,!0,n,d,m,_,S,P),n.context=qm(null),a=n.current,c=Yt(),d=di(a),m=Pr(c,d),m.callback=i??null,li(a,m,d),n.current.lanes=d,Yr(n,d,c),sn(n,c),n}function mu(n,i,a,c){var d=i.current,m=Yt(),_=di(d);return a=qm(a),i.context===null?i.context=a:i.pendingContext=a,i=Pr(m,_),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=li(d,i,_),n!==null&&(Gn(n,d,_,m),ql(n,d,_)),_}function gu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Gm(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Zh(n,i){Gm(n,i),(n=n.alternate)&&Gm(n,i)}function Pw(){return null}var Qm=typeof reportError=="function"?reportError:function(n){console.error(n)};function ed(n){this._internalRoot=n}yu.prototype.render=ed.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));mu(n,i,null,null)},yu.prototype.unmount=ed.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;cs(function(){mu(null,n,null,null)}),i[Sr]=null}};function yu(n){this._internalRoot=n}yu.prototype.unstable_scheduleHydration=function(n){if(n){var i=yl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<nr.length&&i!==0&&i<nr[a].priority;a++);nr.splice(a,0,n),a===0&&wl(n)}};function td(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function vu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ym(){}function kw(n,i,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var z=gu(_);m.call(z)}}var _=Km(i,c,n,0,null,!1,!1,"",Ym);return n._reactRootContainer=_,n[Sr]=_.current,ca(n.nodeType===8?n.parentNode:n),cs(),_}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var z=gu(P);S.call(z)}}var P=Jh(n,0,!1,null,null,!1,!1,"",Ym);return n._reactRootContainer=P,n[Sr]=P.current,ca(n.nodeType===8?n.parentNode:n),cs(function(){mu(i,P,a,c)}),P}function _u(n,i,a,c,d){var m=a._reactRootContainer;if(m){var _=m;if(typeof d=="function"){var S=d;d=function(){var P=gu(_);S.call(P)}}mu(i,_,n,d)}else _=kw(a,i,n,d,c);return gu(_)}ml=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Gr(i.pendingLanes);a!==0&&(Xr(i,a|1),sn(i,Je()),(ze&6)===0&&(ho=Je()+500,oi()))}break;case 13:cs(function(){var c=xr(n,1);if(c!==null){var d=Yt();Gn(c,n,1,d)}}),Zh(n,1)}},Ls=function(n){if(n.tag===13){var i=xr(n,134217728);if(i!==null){var a=Yt();Gn(i,n,134217728,a)}Zh(n,134217728)}},gl=function(n){if(n.tag===13){var i=di(n),a=xr(n,i);if(a!==null){var c=Yt();Gn(a,n,i,c)}Zh(n,i)}},yl=function(){return Le},vl=function(n,i){var a=Le;try{return Le=n,i()}finally{Le=a}},As=function(n,i,a){switch(i){case"input":if(ji(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=Ll(c);if(!d)throw Error(t(90));Xn(c),ji(c,d)}}}break;case"textarea":te(n,a);break;case"select":i=a.value,i!=null&&vn(n,!!a.multiple,i,!1)}},Hi=qh,Wo=cs;var Nw={usingClientEntryPoint:!1,Events:[fa,Js,Ll,er,Ho,qh]},Aa={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bw={bundleType:Aa.bundleType,version:Aa.version,rendererPackageName:Aa.rendererPackageName,rendererConfig:Aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Go(n),n===null?null:n.stateNode},findFiberByHostInstance:Aa.findFiberByHostInstance||Pw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wu.isDisabled&&wu.supportsFiber)try{Qi=wu.inject(bw),un=wu}catch{}}return on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nw,on.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!td(i))throw Error(t(200));return xw(n,i,null,a)},on.createRoot=function(n,i){if(!td(n))throw Error(t(299));var a=!1,c="",d=Qm;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Jh(n,1,!1,null,null,a,!1,c,d),n[Sr]=i.current,ca(n.nodeType===8?n.parentNode:n),new ed(i)},on.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Go(i),n=n===null?null:n.stateNode,n},on.flushSync=function(n){return cs(n)},on.hydrate=function(n,i,a){if(!vu(i))throw Error(t(200));return _u(null,n,i,!0,a)},on.hydrateRoot=function(n,i,a){if(!td(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",_=Qm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),i=Km(i,null,n,1,a??null,d,!1,m,_),n[Sr]=i.current,ca(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new yu(i)},on.render=function(n,i,a){if(!vu(i))throw Error(t(200));return _u(null,n,i,!1,a)},on.unmountComponentAtNode=function(n){if(!vu(n))throw Error(t(40));return n._reactRootContainer?(cs(function(){_u(null,null,n,!1,function(){n._reactRootContainer=null,n[Sr]=null})}),!0):!1},on.unstable_batchedUpdates=qh,on.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!vu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return _u(n,i,a,!1,c)},on.version="18.3.1-next-f1338f8080-20240426",on}var ig;function Yy(){if(ig)return id.exports;ig=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),id.exports=zw(),id.exports}var sg;function Bw(){if(sg)return Eu;sg=1;var r=Yy();return Eu.createRoot=r.createRoot,Eu.hydrateRoot=r.hydrateRoot,Eu}var $w=Bw();const Hw=Qy($w);Yy();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Ua.apply(this,arguments)}var Ti;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ti||(Ti={}));const og="popstate";function Ww(r){r===void 0&&(r={});function e(s,o){let{pathname:l,search:h,hash:p}=s.location;return Ed("",{pathname:l,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Fu(o)}return Kw(e,t,null,r)}function _t(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Xy(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qw(){return Math.random().toString(36).substr(2,8)}function ag(r,e){return{usr:r.state,key:r.key,idx:e}}function Ed(r,e,t,s){return t===void 0&&(t=null),Ua({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Do(e):e,{state:t,key:e&&e.key||s||qw()})}function Fu(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Do(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function Kw(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,p=Ti.Pop,g=null,v=w();v==null&&(v=0,h.replaceState(Ua({},h.state,{idx:v}),""));function w(){return(h.state||{idx:null}).idx}function T(){p=Ti.Pop;let U=w(),se=U==null?null:U-v;v=U,g&&g({action:p,location:H.location,delta:se})}function C(U,se){p=Ti.Push;let re=Ed(H.location,U,se);v=w()+1;let ne=ag(re,v),oe=H.createHref(re);try{h.pushState(ne,"",oe)}catch(xe){if(xe instanceof DOMException&&xe.name==="DataCloneError")throw xe;o.location.assign(oe)}l&&g&&g({action:p,location:H.location,delta:1})}function F(U,se){p=Ti.Replace;let re=Ed(H.location,U,se);v=w();let ne=ag(re,v),oe=H.createHref(re);h.replaceState(ne,"",oe),l&&g&&g({action:p,location:H.location,delta:0})}function $(U){let se=o.location.origin!=="null"?o.location.origin:o.location.href,re=typeof U=="string"?U:Fu(U);return re=re.replace(/ $/,"%20"),_t(se,"No window.location.(origin|href) available to create URL for href: "+re),new URL(re,se)}let H={get action(){return p},get location(){return r(o,h)},listen(U){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(og,T),g=U,()=>{o.removeEventListener(og,T),g=null}},createHref(U){return e(o,U)},createURL:$,encodeLocation(U){let se=$(U);return{pathname:se.pathname,search:se.search,hash:se.hash}},push:C,replace:F,go(U){return h.go(U)}};return H}var lg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(lg||(lg={}));function Gw(r,e,t){return t===void 0&&(t="/"),Qw(r,e,t)}function Qw(r,e,t,s){let o=typeof e=="string"?Do(e):e,l=Xd(o.pathname||"/",t);if(l==null)return null;let h=Jy(r);Yw(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let v=lE(l);p=sE(h[g],v)}return p}function Jy(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,p)=>{let g={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(_t(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let v=Ci([s,g.relativePath]),w=t.concat(g);l.children&&l.children.length>0&&(_t(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Jy(l.children,e,w,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:rE(v,l.index),routesMeta:w})};return r.forEach((l,h)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,h);else for(let g of Zy(l.path))o(l,h,g)}),e}function Zy(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=Zy(s.join("/")),p=[];return p.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&p.push(...h),p.map(g=>r.startsWith("/")&&g===""?"/":g)}function Yw(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:iE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const Xw=/^:[\w-]+$/,Jw=3,Zw=2,eE=1,tE=10,nE=-2,ug=r=>r==="*";function rE(r,e){let t=r.split("/"),s=t.length;return t.some(ug)&&(s+=nE),e&&(s+=Zw),t.filter(o=>!ug(o)).reduce((o,l)=>o+(Xw.test(l)?Jw:l===""?eE:tE),s)}function iE(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function sE(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let p=0;p<s.length;++p){let g=s[p],v=p===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",T=oE({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},w),C=g.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Ci([l,T.pathname]),pathnameBase:dE(Ci([l,T.pathnameBase])),route:C}),T.pathnameBase!=="/"&&(l=Ci([l,T.pathnameBase]))}return h}function oE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=aE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((v,w,T)=>{let{paramName:C,isOptional:F}=w;if(C==="*"){let H=p[T]||"";h=l.slice(0,l.length-H.length).replace(/(.)\/+$/,"$1")}const $=p[T];return F&&!$?v[C]=void 0:v[C]=($||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:h,pattern:r}}function aE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Xy(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(s.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function lE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xy(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Xd(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function uE(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Do(r):r;return{pathname:t?t.startsWith("/")?t:cE(t,e):e,search:fE(s),hash:pE(o)}}function cE(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function ad(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ev(r,e){let t=hE(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function tv(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Do(r):(o=Ua({},r),_t(!o.pathname||!o.pathname.includes("?"),ad("?","pathname","search",o)),_t(!o.pathname||!o.pathname.includes("#"),ad("#","pathname","hash",o)),_t(!o.search||!o.search.includes("#"),ad("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,p;if(h==null)p=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let C=h.split("/");for(;C[0]==="..";)C.shift(),T-=1;o.pathname=C.join("/")}p=T>=0?e[T]:"/"}let g=uE(o,p),v=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(v||w)&&(g.pathname+="/"),g}const Ci=r=>r.join("/").replace(/\/\/+/g,"/"),dE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),fE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,pE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function mE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const nv=["post","put","patch","delete"];new Set(nv);const gE=["get",...nv];new Set(gE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ja(){return ja=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},ja.apply(this,arguments)}const Jd=q.createContext(null),yE=q.createContext(null),ws=q.createContext(null),oc=q.createContext(null),Es=q.createContext({outlet:null,matches:[],isDataRoute:!1}),rv=q.createContext(null);function vE(r,e){let{relative:t}=e===void 0?{}:e;Ga()||_t(!1);let{basename:s,navigator:o}=q.useContext(ws),{hash:l,pathname:h,search:p}=sv(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:Ci([s,h])),o.createHref({pathname:g,search:p,hash:l})}function Ga(){return q.useContext(oc)!=null}function Vo(){return Ga()||_t(!1),q.useContext(oc).location}function iv(r){q.useContext(ws).static||q.useLayoutEffect(r)}function _E(){let{isDataRoute:r}=q.useContext(Es);return r?bE():wE()}function wE(){Ga()||_t(!1);let r=q.useContext(Jd),{basename:e,future:t,navigator:s}=q.useContext(ws),{matches:o}=q.useContext(Es),{pathname:l}=Vo(),h=JSON.stringify(ev(o,t.v7_relativeSplatPath)),p=q.useRef(!1);return iv(()=>{p.current=!0}),q.useCallback(function(v,w){if(w===void 0&&(w={}),!p.current)return;if(typeof v=="number"){s.go(v);return}let T=tv(v,JSON.parse(h),l,w.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Ci([e,T.pathname])),(w.replace?s.replace:s.push)(T,w.state,w)},[e,s,h,l,r])}function sv(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=q.useContext(ws),{matches:o}=q.useContext(Es),{pathname:l}=Vo(),h=JSON.stringify(ev(o,s.v7_relativeSplatPath));return q.useMemo(()=>tv(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function EE(r,e){return TE(r,e)}function TE(r,e,t,s){Ga()||_t(!1);let{navigator:o}=q.useContext(ws),{matches:l}=q.useContext(Es),h=l[l.length-1],p=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let v=Vo(),w;if(e){var T;let U=typeof e=="string"?Do(e):e;g==="/"||(T=U.pathname)!=null&&T.startsWith(g)||_t(!1),w=U}else w=v;let C=w.pathname||"/",F=C;if(g!=="/"){let U=g.replace(/^\//,"").split("/");F="/"+C.replace(/^\//,"").split("/").slice(U.length).join("/")}let $=Gw(r,{pathname:F}),H=AE($&&$.map(U=>Object.assign({},U,{params:Object.assign({},p,U.params),pathname:Ci([g,o.encodeLocation?o.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?g:Ci([g,o.encodeLocation?o.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),l,t,s);return e&&H?q.createElement(oc.Provider,{value:{location:ja({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Ti.Pop}},H):H}function IE(){let r=NE(),e=mE(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:o},t):null,null)}const SE=q.createElement(IE,null);class CE extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?q.createElement(Es.Provider,{value:this.props.routeContext},q.createElement(rv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RE(r){let{routeContext:e,match:t,children:s}=r,o=q.useContext(Jd);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(Es.Provider,{value:e},s)}function AE(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let w=h.findIndex(T=>T.route.id&&(p==null?void 0:p[T.route.id])!==void 0);w>=0||_t(!1),h=h.slice(0,Math.min(h.length,w+1))}let g=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let w=0;w<h.length;w++){let T=h[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(v=w),T.route.id){let{loaderData:C,errors:F}=t,$=T.route.loader&&C[T.route.id]===void 0&&(!F||F[T.route.id]===void 0);if(T.route.lazy||$){g=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((w,T,C)=>{let F,$=!1,H=null,U=null;t&&(F=p&&T.route.id?p[T.route.id]:void 0,H=T.route.errorElement||SE,g&&(v<0&&C===0?(DE("route-fallback"),$=!0,U=null):v===C&&($=!0,U=T.route.hydrateFallbackElement||null)));let se=e.concat(h.slice(0,C+1)),re=()=>{let ne;return F?ne=H:$?ne=U:T.route.Component?ne=q.createElement(T.route.Component,null):T.route.element?ne=T.route.element:ne=w,q.createElement(RE,{match:T,routeContext:{outlet:w,matches:se,isDataRoute:t!=null},children:ne})};return t&&(T.route.ErrorBoundary||T.route.errorElement||C===0)?q.createElement(CE,{location:t.location,revalidation:t.revalidation,component:H,error:F,children:re(),routeContext:{outlet:null,matches:se,isDataRoute:!0}}):re()},null)}var ov=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(ov||{}),av=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(av||{});function xE(r){let e=q.useContext(Jd);return e||_t(!1),e}function PE(r){let e=q.useContext(yE);return e||_t(!1),e}function kE(r){let e=q.useContext(Es);return e||_t(!1),e}function lv(r){let e=kE(),t=e.matches[e.matches.length-1];return t.route.id||_t(!1),t.route.id}function NE(){var r;let e=q.useContext(rv),t=PE(),s=lv();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function bE(){let{router:r}=xE(ov.UseNavigateStable),e=lv(av.UseNavigateStable),t=q.useRef(!1);return iv(()=>{t.current=!0}),q.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,ja({fromRouteId:e},l)))},[r,e])}const cg={};function DE(r,e,t){cg[r]||(cg[r]=!0)}function VE(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function Td(r){_t(!1)}function OE(r){let{basename:e="/",children:t=null,location:s,navigationType:o=Ti.Pop,navigator:l,static:h=!1,future:p}=r;Ga()&&_t(!1);let g=e.replace(/^\/*/,"/"),v=q.useMemo(()=>({basename:g,navigator:l,static:h,future:ja({v7_relativeSplatPath:!1},p)}),[g,p,l,h]);typeof s=="string"&&(s=Do(s));let{pathname:w="/",search:T="",hash:C="",state:F=null,key:$="default"}=s,H=q.useMemo(()=>{let U=Xd(w,g);return U==null?null:{location:{pathname:U,search:T,hash:C,state:F,key:$},navigationType:o}},[g,w,T,C,F,$,o]);return H==null?null:q.createElement(ws.Provider,{value:v},q.createElement(oc.Provider,{children:t,value:H}))}function LE(r){let{children:e,location:t}=r;return EE(Id(e),t)}new Promise(()=>{});function Id(r,e){e===void 0&&(e=[]);let t=[];return q.Children.forEach(r,(s,o)=>{if(!q.isValidElement(s))return;let l=[...e,o];if(s.type===q.Fragment){t.push.apply(t,Id(s.props.children,l));return}s.type!==Td&&_t(!1),!s.props.index||!s.props.children||_t(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Id(s.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sd(){return Sd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Sd.apply(this,arguments)}function ME(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function FE(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function UE(r,e){return r.button===0&&(!e||e==="_self")&&!FE(r)}const jE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zE="6";try{window.__reactRouterVersion=zE}catch{}const BE="startTransition",hg=Fw[BE];function $E(r){let{basename:e,children:t,future:s,window:o}=r,l=q.useRef();l.current==null&&(l.current=Ww({window:o,v5Compat:!0}));let h=l.current,[p,g]=q.useState({action:h.action,location:h.location}),{v7_startTransition:v}=s||{},w=q.useCallback(T=>{v&&hg?hg(()=>g(T)):g(T)},[g,v]);return q.useLayoutEffect(()=>h.listen(w),[h,w]),q.useEffect(()=>VE(s),[s]),q.createElement(OE,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:h,future:s})}const HE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yi=q.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:p,target:g,to:v,preventScrollReset:w,viewTransition:T}=e,C=ME(e,jE),{basename:F}=q.useContext(ws),$,H=!1;if(typeof v=="string"&&WE.test(v)&&($=v,HE))try{let ne=new URL(window.location.href),oe=v.startsWith("//")?new URL(ne.protocol+v):new URL(v),xe=Xd(oe.pathname,F);oe.origin===ne.origin&&xe!=null?v=xe+oe.search+oe.hash:H=!0}catch{}let U=vE(v,{relative:o}),se=qE(v,{replace:h,state:p,target:g,preventScrollReset:w,relative:o,viewTransition:T});function re(ne){s&&s(ne),ne.defaultPrevented||se(ne)}return q.createElement("a",Sd({},C,{href:$||U,onClick:H||l?s:re,ref:t,target:g}))});var dg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(dg||(dg={}));var fg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(fg||(fg={}));function qE(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:p}=e===void 0?{}:e,g=_E(),v=Vo(),w=sv(r,{relative:h});return q.useCallback(T=>{if(UE(T,t)){T.preventDefault();let C=s!==void 0?s:Fu(v)===Fu(w);g(r,{replace:C,state:o,preventScrollReset:l,relative:h,viewTransition:p})}},[v,g,w,s,o,t,r,l,h,p])}const KE=()=>{};var pg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},GE=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],p=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},cv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,p=h?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,w=l>>2,T=(l&3)<<4|p>>4;let C=(p&15)<<2|v>>6,F=v&63;g||(F=64,h||(C=64)),s.push(t[w],t[T],t[C],t[F])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(uv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):GE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||T==null)throw new QE;const C=l<<2|p>>4;if(s.push(C),v!==64){const F=p<<4&240|v>>2;if(s.push(F),T!==64){const $=v<<6&192|T;s.push($)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class QE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YE=function(r){const e=uv(r);return cv.encodeByteArray(e,!0)},Uu=function(r){return YE(r).replace(/\./g,"")},hv=function(r){try{return cv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=()=>XE().__FIREBASE_DEFAULTS__,ZE=()=>{if(typeof process>"u"||typeof pg>"u")return;const r=pg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},eT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&hv(r[1]);return e&&JSON.parse(e)},ac=()=>{try{return KE()||JE()||ZE()||eT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},dv=r=>{var e,t;return(t=(e=ac())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},tT=r=>{const e=dv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},fv=()=>{var r;return(r=ac())===null||r===void 0?void 0:r.config},pv=r=>{var e;return(e=ac())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(r){return r.endsWith(".cloudworkstations.dev")}async function mv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Uu(JSON.stringify(t)),Uu(JSON.stringify(h)),""].join(".")}const Da={};function iT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Da))Da[e]?r.emulator.push(e):r.prod.push(e);return r}function sT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let mg=!1;function gv(r,e){if(typeof window>"u"||typeof document>"u"||!Oo(window.location.host)||Da[r]===e||Da[r]||mg)return;Da[r]=e;function t(C){return`__firebase__banner__${C}`}const s="__firebase__banner",l=iT().prod.length>0;function h(){const C=document.getElementById(s);C&&C.remove()}function p(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function g(C,F){C.setAttribute("width","24"),C.setAttribute("id",F),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function v(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{mg=!0,h()},C}function w(C,F){C.setAttribute("id",F),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=sT(s),F=t("text"),$=document.getElementById(F)||document.createElement("span"),H=t("learnmore"),U=document.getElementById(H)||document.createElement("a"),se=t("preprendIcon"),re=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ne=C.element;p(ne),w(U,H);const oe=v();g(re,se),ne.append(re,$,U,oe),document.body.appendChild(ne)}l?($.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function aT(){var r;const e=(r=ac())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function cT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hT(){const r=Wt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function dT(){return!aT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fT(){try{return typeof indexedDB=="object"}catch{return!1}}function pT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="FirebaseError";class $r extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=mT,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qa.prototype.create)}}class Qa{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?gT(l,s):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new $r(o,p,s)}}function gT(r,e){return r.replace(yT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const yT=/\{\$([^}]+)}/g;function vT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ni(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(gg(l)&&gg(h)){if(!Ni(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function gg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function _T(r,e){const t=new wT(r,e);return t.subscribe.bind(t)}class wT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");ET(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=ld),o.error===void 0&&(o.error=ld),o.complete===void 0&&(o.complete=ld);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ET(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function ld(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(r){return r&&r._delegate?r._delegate:r}class gs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new nT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ST(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);s===p&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:IT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IT(r){return r===ps?void 0:r}function ST(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new TT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const RT={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},AT=Ve.INFO,xT={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},PT=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=xT[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zd{constructor(e){this.name=e,this._logLevel=AT,this._logHandler=PT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const kT=(r,e)=>e.some(t=>r instanceof t);let yg,vg;function NT(){return yg||(yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bT(){return vg||(vg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yv=new WeakMap,Cd=new WeakMap,vv=new WeakMap,ud=new WeakMap,ef=new WeakMap;function DT(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ri(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&yv.set(t,r)}).catch(()=>{}),ef.set(e,r),e}function VT(r){if(Cd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Cd.set(r,e)}let Rd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Cd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||vv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ri(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function OT(r){Rd=r(Rd)}function LT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(cd(this),e,...t);return vv.set(s,e.sort?e.sort():[e]),Ri(s)}:bT().includes(r)?function(...e){return r.apply(cd(this),e),Ri(yv.get(this))}:function(...e){return Ri(r.apply(cd(this),e))}}function MT(r){return typeof r=="function"?LT(r):(r instanceof IDBTransaction&&VT(r),kT(r,NT())?new Proxy(r,Rd):r)}function Ri(r){if(r instanceof IDBRequest)return DT(r);if(ud.has(r))return ud.get(r);const e=MT(r);return e!==r&&(ud.set(r,e),ef.set(e,r)),e}const cd=r=>ef.get(r);function FT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),p=Ri(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Ri(h.result),g.oldVersion,g.newVersion,Ri(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const UT=["get","getKey","getAll","getAllKeys","count"],jT=["put","add","delete","clear"],hd=new Map;function _g(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(hd.get(e))return hd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=jT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||UT.includes(t)))return;const l=async function(h,...p){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return s&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&g.done]))[0]};return hd.set(e,l),l}OT(r=>({...r,get:(e,t,s)=>_g(e,t)||r.get(e,t,s),has:(e,t)=>!!_g(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function BT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ad="@firebase/app",wg="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new Zd("@firebase/app"),$T="@firebase/app-compat",HT="@firebase/analytics-compat",WT="@firebase/analytics",qT="@firebase/app-check-compat",KT="@firebase/app-check",GT="@firebase/auth",QT="@firebase/auth-compat",YT="@firebase/database",XT="@firebase/data-connect",JT="@firebase/database-compat",ZT="@firebase/functions",e1="@firebase/functions-compat",t1="@firebase/installations",n1="@firebase/installations-compat",r1="@firebase/messaging",i1="@firebase/messaging-compat",s1="@firebase/performance",o1="@firebase/performance-compat",a1="@firebase/remote-config",l1="@firebase/remote-config-compat",u1="@firebase/storage",c1="@firebase/storage-compat",h1="@firebase/firestore",d1="@firebase/ai",f1="@firebase/firestore-compat",p1="firebase",m1="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="[DEFAULT]",g1={[Ad]:"fire-core",[$T]:"fire-core-compat",[WT]:"fire-analytics",[HT]:"fire-analytics-compat",[KT]:"fire-app-check",[qT]:"fire-app-check-compat",[GT]:"fire-auth",[QT]:"fire-auth-compat",[YT]:"fire-rtdb",[XT]:"fire-data-connect",[JT]:"fire-rtdb-compat",[ZT]:"fire-fn",[e1]:"fire-fn-compat",[t1]:"fire-iid",[n1]:"fire-iid-compat",[r1]:"fire-fcm",[i1]:"fire-fcm-compat",[s1]:"fire-perf",[o1]:"fire-perf-compat",[a1]:"fire-rc",[l1]:"fire-rc-compat",[u1]:"fire-gcs",[c1]:"fire-gcs-compat",[h1]:"fire-fst",[f1]:"fire-fst-compat",[d1]:"fire-vertex","fire-js":"fire-js",[p1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new Map,y1=new Map,Pd=new Map;function Eg(r,e){try{r.container.addComponent(e)}catch(t){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Io(r){const e=r.name;if(Pd.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;Pd.set(e,r);for(const t of ju.values())Eg(t,r);for(const t of y1.values())Eg(t,r);return!0}function tf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Nn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new Qa("app","Firebase",v1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=m1;function _v(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:xd,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw Ai.create("bad-app-name",{appName:String(o)});if(t||(t=fv()),!t)throw Ai.create("no-options");const l=ju.get(o);if(l){if(Ni(t,l.options)&&Ni(s,l.config))return l;throw Ai.create("duplicate-app",{appName:o})}const h=new CT(o);for(const g of Pd.values())h.addComponent(g);const p=new _1(t,s,h);return ju.set(o,p),p}function wv(r=xd){const e=ju.get(r);if(!e&&r===xd&&fv())return _v();if(!e)throw Ai.create("no-app",{appName:r});return e}function xi(r,e,t){var s;let o=(s=g1[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(p.join(" "));return}Io(new gs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="firebase-heartbeat-database",E1=1,za="firebase-heartbeat-store";let dd=null;function Ev(){return dd||(dd=FT(w1,E1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(za)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ai.create("idb-open",{originalErrorMessage:r.message})})),dd}async function T1(r){try{const t=(await Ev()).transaction(za),s=await t.objectStore(za).get(Tv(r));return await t.done,s}catch(e){if(e instanceof $r)Mr.warn(e.message);else{const t=Ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mr.warn(t.message)}}}async function Tg(r,e){try{const s=(await Ev()).transaction(za,"readwrite");await s.objectStore(za).put(e,Tv(r)),await s.done}catch(t){if(t instanceof $r)Mr.warn(t.message);else{const s=Ai.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Mr.warn(s.message)}}}function Tv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=1024,S1=30;class C1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new A1(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Ig();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>S1){const h=x1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Mr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ig(),{heartbeatsToSend:s,unsentEntries:o}=R1(this._heartbeatsCache.heartbeats),l=Uu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Mr.warn(t),""}}}function Ig(){return new Date().toISOString().substring(0,10)}function R1(r,e=I1){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Sg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Sg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class A1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fT()?pT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await T1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Tg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Tg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Sg(r){return Uu(JSON.stringify({version:2,heartbeats:r})).length}function x1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(r){Io(new gs("platform-logger",e=>new zT(e),"PRIVATE")),Io(new gs("heartbeat",e=>new C1(e),"PRIVATE")),xi(Ad,wg,r),xi(Ad,wg,"esm2017"),xi("fire-js","")}P1("");var k1="firebase",N1="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi(k1,N1,"app");function nf(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function Iv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const b1=Iv,Sv=new Qa("auth","Firebase",Iv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=new Zd("@firebase/auth");function D1(r,...e){zu.logLevel<=Ve.WARN&&zu.warn(`Auth (${Lo}): ${r}`,...e)}function xu(r,...e){zu.logLevel<=Ve.ERROR&&zu.error(`Auth (${Lo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(r,...e){throw rf(r,...e)}function hr(r,...e){return rf(r,...e)}function Cv(r,e,t){const s=Object.assign(Object.assign({},b1()),{[e]:t});return new Qa("auth","Firebase",s).create(e,{appName:r.name})}function Vr(r){return Cv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Sv.create(r,...e)}function Se(r,e,...t){if(!r)throw rf(e,...t)}function br(r){const e="INTERNAL ASSERTION FAILED: "+r;throw xu(e),new Error(e)}function Ur(r,e){r||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function V1(){return Cg()==="http:"||Cg()==="https:"}function Cg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V1()||uT()||"connection"in navigator)?navigator.onLine:!0}function L1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ur(t>e,"Short delay should be less than long delay!"),this.isMobile=oT()||cT()}get(){return O1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(r,e){Ur(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U1=new Xa(3e4,6e4);function Ja(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Mo(r,e,t,s,o={}){return Av(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const p=Ya(Object.assign({key:r.config.apiKey},h)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:g},l);return lT()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Oo(r.emulatorConfig.host)&&(v.credentials="include"),Rv.fetch()(await xv(r,r.config.apiHost,t,p),v)})}async function Av(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},M1),e);try{const o=new j1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Tu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[g,v]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Tu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Tu(r,"user-disabled",h);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Cv(r,w,v);Fr(r,w)}}catch(o){if(o instanceof $r)throw o;Fr(r,"network-request-failed",{message:String(o)})}}async function of(r,e,t,s,o={}){const l=await Mo(r,e,t,s,o);return"mfaPendingCredential"in l&&Fr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function xv(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?sf(r.config,o):`${r.config.apiScheme}://${o}`;return F1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class j1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(hr(this.auth,"network-request-failed")),U1.get())})}}function Tu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=hr(r,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(r,e){return Mo(r,"POST","/v1/accounts:delete",e)}async function Bu(r,e){return Mo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function B1(r,e=!1){const t=qt(r),s=await t.getIdToken(e),o=af(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Va(fd(o.auth_time)),issuedAtTime:Va(fd(o.iat)),expirationTime:Va(fd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function fd(r){return Number(r)*1e3}function af(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return xu("JWT malformed, contained fewer than 3 sections"),null;try{const o=hv(t);return o?JSON.parse(o):(xu("Failed to decode base64 JWT payload"),null)}catch(o){return xu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Rg(r){const e=af(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof $r&&$1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function $1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Va(this.lastLoginAt),this.creationTime=Va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(r){var e;const t=r.auth,s=await r.getIdToken(),o=await Ba(r,Bu(t,{idToken:s}));Se(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Pv(l.providerUserInfo):[],p=q1(r.providerData,h),g=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),w=g?v:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new Nd(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,T)}async function W1(r){const e=qt(r);await $u(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q1(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Pv(r){return r.map(e=>{var{providerId:t}=e,s=nf(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(r,e){const t=await Av(r,{},async()=>{const s=Ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await xv(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&Oo(r.emulatorConfig.host)&&(g.credentials="include"),Rv.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function G1(r,e){return Mo(r,"POST","/v2/accounts:revokeToken",Ja(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=Rg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await K1(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new _o;return s&&(Se(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Qn{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=nf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new H1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Nd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ba(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return B1(this,e)}reload(){return W1(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await $u(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await Ba(this,z1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,h,p,g,v,w;const T=(s=t.displayName)!==null&&s!==void 0?s:void 0,C=(o=t.email)!==null&&o!==void 0?o:void 0,F=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,$=(h=t.photoURL)!==null&&h!==void 0?h:void 0,H=(p=t.tenantId)!==null&&p!==void 0?p:void 0,U=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,se=(v=t.createdAt)!==null&&v!==void 0?v:void 0,re=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:ne,emailVerified:oe,isAnonymous:xe,providerData:ye,stsTokenManager:N}=t;Se(ne&&N,e,"internal-error");const I=_o.fromJSON(this.name,N);Se(typeof ne=="string",e,"internal-error"),gi(T,e.name),gi(C,e.name),Se(typeof oe=="boolean",e,"internal-error"),Se(typeof xe=="boolean",e,"internal-error"),gi(F,e.name),gi($,e.name),gi(H,e.name),gi(U,e.name),gi(se,e.name),gi(re,e.name);const A=new Qn({uid:ne,auth:e,email:C,emailVerified:oe,displayName:T,isAnonymous:xe,photoURL:$,phoneNumber:F,tenantId:H,stsTokenManager:I,createdAt:se,lastLoginAt:re});return ye&&Array.isArray(ye)&&(A.providerData=ye.map(k=>Object.assign({},k))),U&&(A._redirectEventId=U),A}static async _fromIdTokenResponse(e,t,s=!1){const o=new _o;o.updateFromServerResponse(t);const l=new Qn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await $u(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Pv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new _o;p.updateFromIdToken(s);const g=new Qn({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Nd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag=new Map;function Dr(r){Ur(r instanceof Function,"Expected a class definition");let e=Ag.get(r);return e?(Ur(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ag.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}kv.type="NONE";const xg=kv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(r,e,t){return`firebase:${r}:${e}:${t}`}class wo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Pu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Pu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Bu(this.auth,{idToken:e}).catch(()=>{});return t?Qn._fromGetAccountInfoResponse(this.auth,t,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new wo(Dr(xg),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Dr(xg);const h=Pu(s,e.config.apiKey,e.name);let p=null;for(const v of t)try{const w=await v._get(h);if(w){let T;if(typeof w=="string"){const C=await Bu(e,{idToken:w}).catch(()=>{});if(!C)break;T=await Qn._fromGetAccountInfoResponse(e,C,w)}else T=Qn._fromJSON(e,w);v!==l&&(p=T),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new wo(l,e,s):(l=g[0],p&&await l._set(h,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new wo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Lv(e))return"Blackberry";if(Mv(e))return"Webos";if(bv(e))return"Safari";if((e.includes("chrome/")||Dv(e))&&!e.includes("edge/"))return"Chrome";if(Ov(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Nv(r=Wt()){return/firefox\//i.test(r)}function bv(r=Wt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dv(r=Wt()){return/crios\//i.test(r)}function Vv(r=Wt()){return/iemobile/i.test(r)}function Ov(r=Wt()){return/android/i.test(r)}function Lv(r=Wt()){return/blackberry/i.test(r)}function Mv(r=Wt()){return/webos/i.test(r)}function lf(r=Wt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Q1(r=Wt()){var e;return lf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Y1(){return hT()&&document.documentMode===10}function Fv(r=Wt()){return lf(r)||Ov(r)||Mv(r)||Lv(r)||/windows phone/i.test(r)||Vv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(r,e=[]){let t;switch(r){case"Browser":t=Pg(Wt());break;case"Worker":t=`${Pg(Wt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,p)=>{try{const g=e(l);h(g)}catch(g){p(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(r,e={}){return Mo(r,"GET","/v2/passwordPolicy",Ja(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=6;class eI{constructor(e){var t,s,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:Z1,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,h,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kg(this),this.idTokenSubscription=new kg(this),this.beforeStateQueue=new X1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dr(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Bu(this,{idToken:e}),s=await Qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Nn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===p)&&(g!=null&&g.user)&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $u(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(Vr(this));const t=e?qt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await J1(this),t=new eI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qa("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await G1(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Dr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[Dr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Uv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&D1(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Za(r){return qt(r)}class kg{constructor(e){this.auth=e,this.observer=null,this.addObserver=_T(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nI(r){uf=r}function rI(r){return uf.loadJS(r)}function iI(){return uf.gapiScript}function sI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(r,e){const t=tf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ni(l,e??{}))return o;Fr(o,"already-initialized")}return t.initialize({options:e})}function aI(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Dr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function lI(r,e,t){const s=Za(r);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=jv(e),{host:h,port:p}=uI(e),g=p===null?"":`:${p}`,v={url:`${l}//${h}${g}/`},w=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(Ni(v,s.config.emulator)&&Ni(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,Oo(h)?(mv(`${l}//${h}${g}`),gv("Auth",!0)):cI()}function jv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function uI(r){const e=jv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Ng(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:Ng(h)}}}function Ng(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function cI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,t){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r,e){return of(r,"POST","/v1/accounts:signInWithIdp",Ja(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="http://localhost";class ys extends zv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=nf(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new ys(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Eo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Eo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Eo(e,t)}buildRequest(){const e={requestUri:hI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ya(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends Bv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends el{constructor(){super("facebook.com")}static credential(e){return ys._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends el{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ys._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return _i.credential(t,s)}catch{return null}}}_i.GOOGLE_SIGN_IN_METHOD="google.com";_i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends el{constructor(){super("github.com")}static credential(e){return ys._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends el{constructor(){super("twitter.com")}static credential(e,t){return ys._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ei.credential(t,s)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(r,e){return of(r,"POST","/v1/accounts:signUp",Ja(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Qn._fromIdTokenResponse(e,s,o),h=bg(s);return new jr({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=bg(s);return new jr({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function bg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(r){var e;if(Nn(r.app))return Promise.reject(Vr(r));const t=Za(r);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new jr({user:t.currentUser,providerId:null,operationType:"signIn"});const s=await dI(t,{returnSecureToken:!0}),o=await jr._fromIdTokenResponse(t,"signIn",s,!0);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends $r{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Hu.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Hu(e,t,s,o)}}function $v(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Hu._fromErrorAndOperation(r,l,e,s):l})}async function pI(r,e,t=!1){const s=await Ba(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return jr._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(r,e,t=!1){const{auth:s}=r;if(Nn(s.app))return Promise.reject(Vr(s));const o="reauthenticate";try{const l=await Ba(r,$v(s,o,e,r),t);Se(l.idToken,s,"internal-error");const h=af(l.idToken);Se(h,s,"internal-error");const{sub:p}=h;return Se(r.uid===p,s,"user-mismatch"),jr._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Fr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(r,e,t=!1){if(Nn(r.app))return Promise.reject(Vr(r));const s="signIn",o=await $v(r,s,e),l=await jr._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(r,e){return of(r,"POST","/v1/accounts:signInWithCustomToken",Ja(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vI(r,e){if(Nn(r.app))return Promise.reject(Vr(r));const t=Za(r),s=await yI(t,{token:e,returnSecureToken:!0}),o=await jr._fromIdTokenResponse(t,"signIn",s);return await t._updateCurrentUser(o.user),o}function _I(r,e,t,s){return qt(r).onIdTokenChanged(e,t,s)}function wI(r,e,t){return qt(r).beforeAuthStateChanged(e,t)}function EI(r,e,t,s){return qt(r).onAuthStateChanged(e,t,s)}const Wu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wu,"1"),this.storage.removeItem(Wu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=1e3,II=10;class Wv extends Hv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);Y1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,II):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},TI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wv.type="LOCAL";const SI=Wv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends Hv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qv.type="SESSION";const Kv=qv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new lc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(h).map(async v=>v(t.origin,l)),g=await CI(p);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,g)=>{const v=cf("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const C=T;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(C.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(){return window}function AI(r){dr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function xI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PI(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function kI(){return Gv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="firebaseLocalStorageDb",NI=1,qu="firebaseLocalStorage",Yv="fbase_key";class tl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function uc(r,e){return r.transaction([qu],e?"readwrite":"readonly").objectStore(qu)}function bI(){const r=indexedDB.deleteDatabase(Qv);return new tl(r).toPromise()}function bd(){const r=indexedDB.open(Qv,NI);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(qu,{keyPath:Yv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(qu)?e(s):(s.close(),await bI(),e(await bd()))})})}async function Dg(r,e,t){const s=uc(r,!0).put({[Yv]:e,value:t});return new tl(s).toPromise()}async function DI(r,e){const t=uc(r,!1).get(e),s=await new tl(t).toPromise();return s===void 0?null:s.value}function Vg(r,e){const t=uc(r,!0).delete(e);return new tl(t).toPromise()}const VI=800,OI=3;class Xv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>OI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lc._getInstance(kI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await xI(),!this.activeServiceWorker)return;this.sender=new RI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bd();return await Dg(e,Wu,"1"),await Vg(e,Wu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Dg(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>DI(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Vg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=uc(o,!1).getAll();return new tl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xv.type="LOCAL";const LI=Xv;new Xa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(r,e){return e?Dr(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf extends zv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Eo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function FI(r){return gI(r.auth,new hf(r),r.bypassAuthState)}function UI(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),mI(t,new hf(r),r.bypassAuthState)}async function jI(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),pI(t,new hf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FI;case"linkViaPopup":case"linkViaRedirect":return jI;case"reauthViaPopup":case"reauthViaRedirect":return UI;default:Fr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=new Xa(2e3,1e4);class vo extends Jv{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=cf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zI.get())};e()}}vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="pendingRedirect",ku=new Map;class $I extends Jv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ku.get(this.auth._key());if(!e){try{const s=await HI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ku.set(this.auth._key(),e)}return this.bypassAuthState||ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HI(r,e){const t=KI(e),s=qI(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function WI(r,e){ku.set(r._key(),e)}function qI(r){return Dr(r._redirectPersistence)}function KI(r){return Pu(BI,r.config.apiKey,r.name)}async function GI(r,e,t=!1){if(Nn(r.app))return Promise.reject(Vr(r));const s=Za(r),o=MI(s,e),h=await new $I(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=10*60*1e3;class YI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Zv(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(hr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Og(e))}saveEventToCache(e){this.cachedEventUids.add(Og(e)),this.lastProcessedEventTime=Date.now()}}function Og(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Zv({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(r,e={}){return Mo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eS=/^https?/;async function tS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await JI(r);for(const t of e)try{if(nS(t))return}catch{}Fr(r,"unauthorized-domain")}function nS(r){const e=kd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!eS.test(t))return!1;if(ZI.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new Xa(3e4,6e4);function Lg(){const r=dr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function iS(r){return new Promise((e,t)=>{var s,o,l;function h(){Lg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lg(),t(hr(r,"network-request-failed"))},timeout:rS.get()})}if(!((o=(s=dr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=dr().gapi)===null||l===void 0)&&l.load)h();else{const p=sI("iframefcb");return dr()[p]=()=>{gapi.load?h():t(hr(r,"network-request-failed"))},rI(`${iI()}?onload=${p}`).catch(g=>t(g))}}).catch(e=>{throw Nu=null,e})}let Nu=null;function sS(r){return Nu=Nu||iS(r),Nu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new Xa(5e3,15e3),aS="__/auth/iframe",lS="emulator/auth/iframe",uS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hS(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?sf(e,lS):`https://${r.config.authDomain}/${aS}`,s={apiKey:e.apiKey,appName:r.name,v:Lo},o=cS.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Ya(s).slice(1)}`}async function dS(r){const e=await sS(r),t=dr().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:hS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uS,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=hr(r,"network-request-failed"),p=dr().setTimeout(()=>{l(h)},oS.get());function g(){dr().clearTimeout(p),o(s)}s.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pS=500,mS=600,gS="_blank",yS="http://localhost";class Mg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vS(r,e,t,s=pS,o=mS){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g=Object.assign(Object.assign({},fS),{width:s.toString(),height:o.toString(),top:l,left:h}),v=Wt().toLowerCase();t&&(p=Dv(v)?gS:t),Nv(v)&&(e=e||yS,g.scrollbars="yes");const w=Object.entries(g).reduce((C,[F,$])=>`${C}${F}=${$},`,"");if(Q1(v)&&p!=="_self")return _S(e||"",p),new Mg(null);const T=window.open(e||"",p,w);Se(T,r,"popup-blocked");try{T.focus()}catch{}return new Mg(T)}function _S(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="__/auth/handler",ES="emulator/auth/handler",TS=encodeURIComponent("fac");async function Fg(r,e,t,s,o,l){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Lo,eventId:o};if(e instanceof Bv){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",vT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof el){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await r._getAppCheckToken(),v=g?`#${TS}=${encodeURIComponent(g)}`:"";return`${IS(r)}?${Ya(p).slice(1)}${v}`}function IS({config:r}){return r.emulator?sf(r,ES):`https://${r.authDomain}/${wS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="webStorageSupport";class SS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kv,this._completeRedirectFn=GI,this._overrideRedirectResult=WI}async _openPopup(e,t,s,o){var l;Ur((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Fg(e,t,s,kd(),o);return vS(e,h,cf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Fg(e,t,s,kd(),o);return AI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ur(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await dS(e),s=new YI(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pd,{type:pd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[pd];h!==void 0&&t(!!h),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fv()||bv()||lf()}}const CS=SS;var Ug="@firebase/auth",jg="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xS(r){Io(new gs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=s.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Uv(r)},v=new tI(s,o,l,g);return aI(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Io(new gs("auth-internal",e=>{const t=Za(e.getProvider("auth").getImmediate());return(s=>new RS(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(Ug,jg,AS(r)),xi(Ug,jg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=5*60,kS=pv("authIdTokenMaxAge")||PS;let zg=null;const NS=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>kS)return;const o=t==null?void 0:t.token;zg!==o&&(zg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function bS(r=wv()){const e=tf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=oI(r,{popupRedirectResolver:CS,persistence:[LI,SI,Kv]}),s=pv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=NS(l.toString());wI(t,h,()=>h(t.currentUser)),_I(t,p=>h(p))}}const o=dv("auth");return o&&lI(t,`http://${o}`),t}function DS(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}nI({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=hr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",DS().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xS("Browser");var Bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pi,e_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function A(){}A.prototype=I.prototype,N.D=I.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(k,D,O){for(var R=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)R[Xe-2]=arguments[Xe];return I.prototype[D].apply(k,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,I,A){A||(A=0);var k=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)k[D]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(D=0;16>D;++D)k[D]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=N.g[0],A=N.g[1],D=N.g[2];var O=N.g[3],R=I+(O^A&(D^O))+k[0]+3614090360&4294967295;I=A+(R<<7&4294967295|R>>>25),R=O+(D^I&(A^D))+k[1]+3905402710&4294967295,O=I+(R<<12&4294967295|R>>>20),R=D+(A^O&(I^A))+k[2]+606105819&4294967295,D=O+(R<<17&4294967295|R>>>15),R=A+(I^D&(O^I))+k[3]+3250441966&4294967295,A=D+(R<<22&4294967295|R>>>10),R=I+(O^A&(D^O))+k[4]+4118548399&4294967295,I=A+(R<<7&4294967295|R>>>25),R=O+(D^I&(A^D))+k[5]+1200080426&4294967295,O=I+(R<<12&4294967295|R>>>20),R=D+(A^O&(I^A))+k[6]+2821735955&4294967295,D=O+(R<<17&4294967295|R>>>15),R=A+(I^D&(O^I))+k[7]+4249261313&4294967295,A=D+(R<<22&4294967295|R>>>10),R=I+(O^A&(D^O))+k[8]+1770035416&4294967295,I=A+(R<<7&4294967295|R>>>25),R=O+(D^I&(A^D))+k[9]+2336552879&4294967295,O=I+(R<<12&4294967295|R>>>20),R=D+(A^O&(I^A))+k[10]+4294925233&4294967295,D=O+(R<<17&4294967295|R>>>15),R=A+(I^D&(O^I))+k[11]+2304563134&4294967295,A=D+(R<<22&4294967295|R>>>10),R=I+(O^A&(D^O))+k[12]+1804603682&4294967295,I=A+(R<<7&4294967295|R>>>25),R=O+(D^I&(A^D))+k[13]+4254626195&4294967295,O=I+(R<<12&4294967295|R>>>20),R=D+(A^O&(I^A))+k[14]+2792965006&4294967295,D=O+(R<<17&4294967295|R>>>15),R=A+(I^D&(O^I))+k[15]+1236535329&4294967295,A=D+(R<<22&4294967295|R>>>10),R=I+(D^O&(A^D))+k[1]+4129170786&4294967295,I=A+(R<<5&4294967295|R>>>27),R=O+(A^D&(I^A))+k[6]+3225465664&4294967295,O=I+(R<<9&4294967295|R>>>23),R=D+(I^A&(O^I))+k[11]+643717713&4294967295,D=O+(R<<14&4294967295|R>>>18),R=A+(O^I&(D^O))+k[0]+3921069994&4294967295,A=D+(R<<20&4294967295|R>>>12),R=I+(D^O&(A^D))+k[5]+3593408605&4294967295,I=A+(R<<5&4294967295|R>>>27),R=O+(A^D&(I^A))+k[10]+38016083&4294967295,O=I+(R<<9&4294967295|R>>>23),R=D+(I^A&(O^I))+k[15]+3634488961&4294967295,D=O+(R<<14&4294967295|R>>>18),R=A+(O^I&(D^O))+k[4]+3889429448&4294967295,A=D+(R<<20&4294967295|R>>>12),R=I+(D^O&(A^D))+k[9]+568446438&4294967295,I=A+(R<<5&4294967295|R>>>27),R=O+(A^D&(I^A))+k[14]+3275163606&4294967295,O=I+(R<<9&4294967295|R>>>23),R=D+(I^A&(O^I))+k[3]+4107603335&4294967295,D=O+(R<<14&4294967295|R>>>18),R=A+(O^I&(D^O))+k[8]+1163531501&4294967295,A=D+(R<<20&4294967295|R>>>12),R=I+(D^O&(A^D))+k[13]+2850285829&4294967295,I=A+(R<<5&4294967295|R>>>27),R=O+(A^D&(I^A))+k[2]+4243563512&4294967295,O=I+(R<<9&4294967295|R>>>23),R=D+(I^A&(O^I))+k[7]+1735328473&4294967295,D=O+(R<<14&4294967295|R>>>18),R=A+(O^I&(D^O))+k[12]+2368359562&4294967295,A=D+(R<<20&4294967295|R>>>12),R=I+(A^D^O)+k[5]+4294588738&4294967295,I=A+(R<<4&4294967295|R>>>28),R=O+(I^A^D)+k[8]+2272392833&4294967295,O=I+(R<<11&4294967295|R>>>21),R=D+(O^I^A)+k[11]+1839030562&4294967295,D=O+(R<<16&4294967295|R>>>16),R=A+(D^O^I)+k[14]+4259657740&4294967295,A=D+(R<<23&4294967295|R>>>9),R=I+(A^D^O)+k[1]+2763975236&4294967295,I=A+(R<<4&4294967295|R>>>28),R=O+(I^A^D)+k[4]+1272893353&4294967295,O=I+(R<<11&4294967295|R>>>21),R=D+(O^I^A)+k[7]+4139469664&4294967295,D=O+(R<<16&4294967295|R>>>16),R=A+(D^O^I)+k[10]+3200236656&4294967295,A=D+(R<<23&4294967295|R>>>9),R=I+(A^D^O)+k[13]+681279174&4294967295,I=A+(R<<4&4294967295|R>>>28),R=O+(I^A^D)+k[0]+3936430074&4294967295,O=I+(R<<11&4294967295|R>>>21),R=D+(O^I^A)+k[3]+3572445317&4294967295,D=O+(R<<16&4294967295|R>>>16),R=A+(D^O^I)+k[6]+76029189&4294967295,A=D+(R<<23&4294967295|R>>>9),R=I+(A^D^O)+k[9]+3654602809&4294967295,I=A+(R<<4&4294967295|R>>>28),R=O+(I^A^D)+k[12]+3873151461&4294967295,O=I+(R<<11&4294967295|R>>>21),R=D+(O^I^A)+k[15]+530742520&4294967295,D=O+(R<<16&4294967295|R>>>16),R=A+(D^O^I)+k[2]+3299628645&4294967295,A=D+(R<<23&4294967295|R>>>9),R=I+(D^(A|~O))+k[0]+4096336452&4294967295,I=A+(R<<6&4294967295|R>>>26),R=O+(A^(I|~D))+k[7]+1126891415&4294967295,O=I+(R<<10&4294967295|R>>>22),R=D+(I^(O|~A))+k[14]+2878612391&4294967295,D=O+(R<<15&4294967295|R>>>17),R=A+(O^(D|~I))+k[5]+4237533241&4294967295,A=D+(R<<21&4294967295|R>>>11),R=I+(D^(A|~O))+k[12]+1700485571&4294967295,I=A+(R<<6&4294967295|R>>>26),R=O+(A^(I|~D))+k[3]+2399980690&4294967295,O=I+(R<<10&4294967295|R>>>22),R=D+(I^(O|~A))+k[10]+4293915773&4294967295,D=O+(R<<15&4294967295|R>>>17),R=A+(O^(D|~I))+k[1]+2240044497&4294967295,A=D+(R<<21&4294967295|R>>>11),R=I+(D^(A|~O))+k[8]+1873313359&4294967295,I=A+(R<<6&4294967295|R>>>26),R=O+(A^(I|~D))+k[15]+4264355552&4294967295,O=I+(R<<10&4294967295|R>>>22),R=D+(I^(O|~A))+k[6]+2734768916&4294967295,D=O+(R<<15&4294967295|R>>>17),R=A+(O^(D|~I))+k[13]+1309151649&4294967295,A=D+(R<<21&4294967295|R>>>11),R=I+(D^(A|~O))+k[4]+4149444226&4294967295,I=A+(R<<6&4294967295|R>>>26),R=O+(A^(I|~D))+k[11]+3174756917&4294967295,O=I+(R<<10&4294967295|R>>>22),R=D+(I^(O|~A))+k[2]+718787259&4294967295,D=O+(R<<15&4294967295|R>>>17),R=A+(O^(D|~I))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+O&4294967295}s.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var A=I-this.blockSize,k=this.B,D=this.h,O=0;O<I;){if(D==0)for(;O<=A;)o(this,N,O),O+=this.blockSize;if(typeof N=="string"){for(;O<I;)if(k[D++]=N.charCodeAt(O++),D==this.blockSize){o(this,k),D=0;break}}else for(;O<I;)if(k[D++]=N[O++],D==this.blockSize){o(this,k),D=0;break}}this.h=D,this.o+=I},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var A=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=A&255,A/=256;for(this.u(N),N=Array(16),I=A=0;4>I;++I)for(var k=0;32>k;k+=8)N[A++]=this.g[I]>>>k&255;return N};function l(N,I){var A=p;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=I(N)}function h(N,I){this.h=I;for(var A=[],k=!0,D=N.length-1;0<=D;D--){var O=N[D]|0;k&&O==I||(A[D]=O,k=!1)}this.g=A}var p={};function g(N){return-128<=N&&128>N?l(N,function(I){return new h([I|0],0>I?-1:0)}):new h([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return T;if(0>N)return U(v(-N));for(var I=[],A=1,k=0;N>=A;k++)I[k]=N/A|0,A*=4294967296;return new h(I,0)}function w(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return U(w(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(I,8)),k=T,D=0;D<N.length;D+=8){var O=Math.min(8,N.length-D),R=parseInt(N.substring(D,D+O),I);8>O?(O=v(Math.pow(I,O)),k=k.j(O).add(v(R))):(k=k.j(A),k=k.add(v(R)))}return k}var T=g(0),C=g(1),F=g(16777216);r=h.prototype,r.m=function(){if(H(this))return-U(this).m();for(var N=0,I=1,A=0;A<this.g.length;A++){var k=this.i(A);N+=(0<=k?k:4294967296+k)*I,I*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if($(this))return"0";if(H(this))return"-"+U(this).toString(N);for(var I=v(Math.pow(N,6)),A=this,k="";;){var D=oe(A,I).g;A=se(A,D.j(I));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=D,$(A))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function $(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function H(N){return N.h==-1}r.l=function(N){return N=se(this,N),H(N)?-1:$(N)?0:1};function U(N){for(var I=N.g.length,A=[],k=0;k<I;k++)A[k]=~N.g[k];return new h(A,~N.h).add(C)}r.abs=function(){return H(this)?U(this):this},r.add=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0,D=0;D<=I;D++){var O=k+(this.i(D)&65535)+(N.i(D)&65535),R=(O>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);k=R>>>16,O&=65535,R&=65535,A[D]=R<<16|O}return new h(A,A[A.length-1]&-2147483648?-1:0)};function se(N,I){return N.add(U(I))}r.j=function(N){if($(this)||$(N))return T;if(H(this))return H(N)?U(this).j(U(N)):U(U(this).j(N));if(H(N))return U(this.j(U(N)));if(0>this.l(F)&&0>N.l(F))return v(this.m()*N.m());for(var I=this.g.length+N.g.length,A=[],k=0;k<2*I;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<N.g.length;D++){var O=this.i(k)>>>16,R=this.i(k)&65535,Xe=N.i(D)>>>16,ht=N.i(D)&65535;A[2*k+2*D]+=R*ht,re(A,2*k+2*D),A[2*k+2*D+1]+=O*ht,re(A,2*k+2*D+1),A[2*k+2*D+1]+=R*Xe,re(A,2*k+2*D+1),A[2*k+2*D+2]+=O*Xe,re(A,2*k+2*D+2)}for(k=0;k<I;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=I;k<2*I;k++)A[k]=0;return new h(A,0)};function re(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function ne(N,I){this.g=N,this.h=I}function oe(N,I){if($(I))throw Error("division by zero");if($(N))return new ne(T,T);if(H(N))return I=oe(U(N),I),new ne(U(I.g),U(I.h));if(H(I))return I=oe(N,U(I)),new ne(U(I.g),I.h);if(30<N.g.length){if(H(N)||H(I))throw Error("slowDivide_ only works with positive integers.");for(var A=C,k=I;0>=k.l(N);)A=xe(A),k=xe(k);var D=ye(A,1),O=ye(k,1);for(k=ye(k,2),A=ye(A,2);!$(k);){var R=O.add(k);0>=R.l(N)&&(D=D.add(A),O=R),k=ye(k,1),A=ye(A,1)}return I=se(N,D.j(I)),new ne(D,I)}for(D=T;0<=N.l(I);){for(A=Math.max(1,Math.floor(N.m()/I.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=v(A),R=O.j(I);H(R)||0<R.l(N);)A-=k,O=v(A),R=O.j(I);$(O)&&(O=C),D=D.add(O),N=se(N,R)}return new ne(D,N)}r.A=function(N){return oe(this,N).h},r.and=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)&N.i(k);return new h(A,this.h&N.h)},r.or=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)|N.i(k);return new h(A,this.h|N.h)},r.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)^N.i(k);return new h(A,this.h^N.h)};function xe(N){for(var I=N.g.length+1,A=[],k=0;k<I;k++)A[k]=N.i(k)<<1|N.i(k-1)>>>31;return new h(A,N.h)}function ye(N,I){var A=I>>5;I%=32;for(var k=N.g.length-A,D=[],O=0;O<k;O++)D[O]=0<I?N.i(O+A)>>>I|N.i(O+A+1)<<32-I:N.i(O+A);return new h(D,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,e_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,Pi=h}).apply(typeof Bg<"u"?Bg:typeof self<"u"?self:typeof window<"u"?window:{});var Iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var t_,Pa,n_,bu,Dd,r_,i_,s_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,y){return u==Array.prototype||u==Object.prototype||(u[f]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Iu=="object"&&Iu];for(var f=0;f<u.length;++f){var y=u[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function o(u,f){if(f)e:{var y=s;u=u.split(".");for(var E=0;E<u.length-1;E++){var L=u[E];if(!(L in y))break e;y=y[L]}u=u[u.length-1],E=y[u],f=f(E),f!=E&&f!=null&&e(y,u,{configurable:!0,writable:!0,value:f})}}function l(u,f){u instanceof String&&(u+="");var y=0,E=!1,L={next:function(){if(!E&&y<u.length){var B=y++;return{value:f(B,u[B]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(u){return u||function(){return l(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function g(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function v(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function w(u,f,y){return u.call.apply(u.bind,arguments)}function T(u,f,y){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function C(u,f,y){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:T,C.apply(null,arguments)}function F(u,f){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function $(u,f){function y(){}y.prototype=f.prototype,u.aa=f.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(E,L,B){for(var Z=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)Z[Ge-2]=arguments[Ge];return f.prototype[L].apply(E,Z)}}function H(u){const f=u.length;if(0<f){const y=Array(f);for(let E=0;E<f;E++)y[E]=u[E];return y}return[]}function U(u,f){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(g(E)){const L=u.length||0,B=E.length||0;u.length=L+B;for(let Z=0;Z<B;Z++)u[L+Z]=E[Z]}else u.push(E)}}class se{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function re(u){return/^[\s\xa0]*$/.test(u)}function ne(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var xe=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function ye(u,f,y){for(const E in u)f.call(y,u[E],E,u)}function N(u,f){for(const y in u)f.call(void 0,u[y],y,u)}function I(u){const f={};for(const y in u)f[y]=u[y];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,f){let y,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(y in E)u[y]=E[y];for(let B=0;B<A.length;B++)y=A[B],Object.prototype.hasOwnProperty.call(E,y)&&(u[y]=E[y])}}function D(u){var f=1;u=u.split(":");const y=[];for(;0<f&&u.length;)y.push(u.shift()),f--;return u.length&&y.push(u.join(":")),y}function O(u){p.setTimeout(()=>{throw u},0)}function R(){var u=me;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Xe{constructor(){this.h=this.g=null}add(f,y){const E=ht.get();E.set(f,y),this.h?this.h.next=E:this.g=E,this.h=E}}var ht=new se(()=>new De,u=>u.reset());class De{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let He,ee=!1,me=new Xe,ie=()=>{const u=p.Promise.resolve(void 0);He=()=>{u.then(V)}};var V=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){O(y)}var f=ht;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}ee=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};p.addEventListener("test",y,f),p.removeEventListener("test",y,f)}catch{}return u}();function Pe(u,f){if(de.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(xe){e:{try{oe(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else y=="mouseover"?f=u.fromElement:y=="mouseout"&&(f=u.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ke[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}$(Pe,de);var ke={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Be(u,f,y,E,L){this.listener=u,this.proxy=null,this.src=f,this.type=y,this.capture=!!E,this.ha=L,this.key=++Fe,this.da=this.fa=!1}function dt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function yn(u){this.src=u,this.g={},this.h=0}yn.prototype.add=function(u,f,y,E,L){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var Z=Xt(u,f,E,L);return-1<Z?(f=u[Z],y||(f.fa=!1)):(f=new Be(f,this.src,B,!!E,L),f.fa=y,u.push(f)),f};function Xn(u,f){var y=f.type;if(y in u.g){var E=u.g[y],L=Array.prototype.indexOf.call(E,f,void 0),B;(B=0<=L)&&Array.prototype.splice.call(E,L,1),B&&(dt(f),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Xt(u,f,y,E){for(var L=0;L<u.length;++L){var B=u[L];if(!B.da&&B.listener==f&&B.capture==!!y&&B.ha==E)return L}return-1}var bn="closure_lm_"+(1e6*Math.random()|0),Jn={};function Ui(u,f,y,E,L){if(Array.isArray(f)){for(var B=0;B<f.length;B++)Ui(u,f[B],y,E,L);return null}return y=We(y),u&&u[Me]?u.K(f,y,v(E)?!!E.capture:!1,L):ji(u,f,y,!1,E,L)}function ji(u,f,y,E,L,B){if(!f)throw Error("Invalid event type");var Z=v(L)?!!L.capture:!!L,Ge=Wr(u);if(Ge||(u[bn]=Ge=new yn(u)),y=Ge.add(f,y,E,Z,B),y.proxy)return y;if(E=Cs(),y.proxy=E,E.src=u,E.listener=y,u.addEventListener)Re||(L=Z),L===void 0&&(L=!1),u.addEventListener(f.toString(),E,L);else if(u.attachEvent)u.attachEvent(vn(f.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Cs(){function u(y){return f.call(u.src,u.listener,y)}const f=zi;return u}function Hr(u,f,y,E,L){if(Array.isArray(f))for(var B=0;B<f.length;B++)Hr(u,f[B],y,E,L);else E=v(E)?!!E.capture:!!E,y=We(y),u&&u[Me]?(u=u.i,f=String(f).toString(),f in u.g&&(B=u.g[f],y=Xt(B,y,E,L),-1<y&&(dt(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete u.g[f],u.h--)))):u&&(u=Wr(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Xt(f,y,E,L)),(y=-1<u?f[u]:null)&&Dn(y))}function Dn(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Me])Xn(f.i,u);else{var y=u.type,E=u.proxy;f.removeEventListener?f.removeEventListener(y,E,u.capture):f.detachEvent?f.detachEvent(vn(y),E):f.addListener&&f.removeListener&&f.removeListener(E),(y=Wr(f))?(Xn(y,u),y.h==0&&(y.src=null,f[bn]=null)):dt(u)}}}function vn(u){return u in Jn?Jn[u]:Jn[u]="on"+u}function zi(u,f){if(u.da)u=!0;else{f=new Pe(f,this);var y=u.listener,E=u.ha||u.src;u.fa&&Dn(u),u=y.call(E,f)}return u}function Wr(u){return u=u[bn],u instanceof yn?u:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function We(u){return typeof u=="function"?u:(u[te]||(u[te]=function(f){return u.handleEvent(f)}),u[te])}function ue(){W.call(this),this.i=new yn(this),this.M=this,this.F=null}$(ue,W),ue.prototype[Me]=!0,ue.prototype.removeEventListener=function(u,f,y,E){Hr(this,u,f,y,E)};function Ee(u,f){var y,E=u.F;if(E)for(y=[];E;E=E.F)y.push(E);if(u=u.M,E=f.type||f,typeof f=="string")f=new de(f,u);else if(f instanceof de)f.target=f.target||u;else{var L=f;f=new de(E,u),k(f,L)}if(L=!0,y)for(var B=y.length-1;0<=B;B--){var Z=f.g=y[B];L=ut(Z,E,!0,f)&&L}if(Z=f.g=u,L=ut(Z,E,!0,f)&&L,L=ut(Z,E,!1,f)&&L,y)for(B=0;B<y.length;B++)Z=f.g=y[B],L=ut(Z,E,!1,f)&&L}ue.prototype.N=function(){if(ue.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var y=u.g[f],E=0;E<y.length;E++)dt(y[E]);delete u.g[f],u.h--}}this.F=null},ue.prototype.K=function(u,f,y,E){return this.i.add(String(u),f,!1,y,E)},ue.prototype.L=function(u,f,y,E){return this.i.add(String(u),f,!0,y,E)};function ut(u,f,y,E){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,B=0;B<f.length;++B){var Z=f[B];if(Z&&!Z.da&&Z.capture==y){var Ge=Z.listener,wt=Z.ha||Z.src;Z.fa&&Xn(u.i,Z),L=Ge.call(wt,E)!==!1&&L}}return L&&!E.defaultPrevented}function _n(u,f,y){if(typeof u=="function")y&&(u=C(u,y));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:p.setTimeout(u,f||0)}function Qe(u){u.g=_n(()=>{u.g=null,u.i&&(u.i=!1,Qe(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class qe extends W{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Qe(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nt(u){W.call(this),this.h=u,this.g={}}$(nt,W);var wn=[];function qr(u){ye(u.g,function(f,y){this.g.hasOwnProperty(y)&&Dn(f)},u),u.g={}}nt.prototype.N=function(){nt.aa.N.call(this),qr(this)},nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bi=p.JSON.stringify,Bo=p.JSON.parse,$o=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function $i(){}$i.prototype.h=null;function Rs(u){return u.h||(u.h=u.i())}function As(){}var En={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zn(){de.call(this,"d")}$(Zn,de);function xs(){de.call(this,"c")}$(xs,de);var er={},Ho=null;function Hi(){return Ho=Ho||new ue}er.La="serverreachability";function Wo(u){de.call(this,er.La,u)}$(Wo,de);function vr(u){const f=Hi();Ee(f,new Wo(f))}er.STAT_EVENT="statevent";function qo(u,f){de.call(this,er.STAT_EVENT,u),this.stat=f}$(qo,de);function ft(u){const f=Hi();Ee(f,new qo(f,u))}er.Ma="timingevent";function Ps(u,f){de.call(this,er.Ma,u),this.size=f}$(Ps,de);function Vn(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},f)}function Wi(){this.g=!0}Wi.prototype.xa=function(){this.g=!1};function qi(u,f,y,E,L,B){u.info(function(){if(u.g)if(B)for(var Z="",Ge=B.split("&"),wt=0;wt<Ge.length;wt++){var Ue=Ge[wt].split("=");if(1<Ue.length){var Rt=Ue[0];Ue=Ue[1];var gt=Rt.split("_");Z=2<=gt.length&&gt[1]=="type"?Z+(Rt+"="+Ue+"&"):Z+(Rt+"=redacted&")}}else Z=null;else Z=B;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+f+`
`+y+`
`+Z})}function ks(u,f,y,E,L,B,Z){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+f+`
`+y+`
`+B+" "+Z})}function On(u,f,y,E){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+kc(u,y)+(E?" "+E:"")})}function Ko(u,f){u.info(function(){return"TIMEOUT: "+f})}Wi.prototype.info=function(){};function kc(u,f){if(!u.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var E=y[u];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var Z=1;Z<L.length;Z++)L[Z]=""}}}}return Bi(y)}catch{return f}}var Ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},al={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ln;function Ki(){}$(Ki,$i),Ki.prototype.g=function(){return new XMLHttpRequest},Ki.prototype.i=function(){return{}},Ln=new Ki;function Mn(u,f,y,E){this.j=u,this.i=f,this.l=y,this.R=E||1,this.U=new nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ll}function ll(){this.i=null,this.g="",this.h=!1}var Go={},bs={};function Ds(u,f,y){u.L=1,u.v=Xr(cn(f)),u.m=y,u.P=!0,Qo(u,null)}function Qo(u,f){u.F=Date.now(),Je(u),u.A=cn(u.v);var y=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),Zr(y.i,"t",E),u.C=0,y=u.j.J,u.h=new ll,u.g=Rl(u.j,y?f:null,!u.m),0<u.O&&(u.M=new qe(C(u.Y,u,u.g),u.O)),f=u.U,y=u.g,E=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(wn[0]=L.toString()),L=wn);for(var B=0;B<L.length;B++){var Z=Ui(y,L[B],E||f.handleEvent,!1,f.h||f);if(!Z)break;f.g[Z.key]=Z}f=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),vr(),qi(u.i,u.u,u.A,u.l,u.R,u.m)}Mn.prototype.ca=function(u){u=u.target;const f=this.M;f&&Zt(u)==3?f.j():this.Y(u)},Mn.prototype.Y=function(u){try{if(u==this.g)e:{const gt=Zt(this.g);var f=this.g.Ba();const Sn=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||ta(this.g)))){this.J||gt!=4||f==7||(f==8||0>=Sn?vr(3):vr(2)),Gi(this);var y=this.g.Z();this.X=y;t:if(ul(this)){var E=ta(this.g);u="";var L=E.length,B=Zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tn(this),Kr(this);var Z="";break t}this.h.i=new p.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(E[f],{stream:!(B&&f==L-1)});E.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=y==200,ks(this.i,this.u,this.A,this.l,this.R,gt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,wt=this.g;if((Ge=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(Ge)){var Ue=Ge;break t}}Ue=null}if(y=Ue)On(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yo(this,y);else{this.o=!1,this.s=3,ft(12),Tn(this),Kr(this);break e}}if(this.P){y=!0;let dn;for(;!this.J&&this.C<Z.length;)if(dn=Nc(this,Z),dn==bs){gt==4&&(this.s=4,ft(14),y=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==Go){this.s=4,ft(15),On(this.i,this.l,Z,"[Invalid Chunk]"),y=!1;break}else On(this.i,this.l,dn,null),Yo(this,dn);if(ul(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||Z.length!=0||this.h.h||(this.s=1,ft(16),y=!1),this.o=this.o&&y,!y)On(this.i,this.l,Z,"[Invalid Chunked Response]"),Tn(this),Kr(this);else if(0<Z.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),ra(Rt),Rt.M=!0,ft(11))}}else On(this.i,this.l,Z,null),Yo(this,Z);gt==4&&Tn(this),this.o&&!this.J&&(gt==4?Hs(this.j,this):(this.o=!1,Je(this)))}else Us(this.g),y==400&&0<Z.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Tn(this),Kr(this)}}}catch{}finally{}};function ul(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Nc(u,f){var y=u.C,E=f.indexOf(`
`,y);return E==-1?bs:(y=Number(f.substring(y,E)),isNaN(y)?Go:(E+=1,E+y>f.length?bs:(f=f.slice(E,E+y),u.C=E+y,f)))}Mn.prototype.cancel=function(){this.J=!0,Tn(this)};function Je(u){u.S=Date.now()+u.I,cl(u,u.I)}function cl(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Vn(C(u.ba,u),f)}function Gi(u){u.B&&(p.clearTimeout(u.B),u.B=null)}Mn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ko(this.i,this.A),this.L!=2&&(vr(),ft(17)),Tn(this),this.s=2,Kr(this)):cl(this,this.S-u)};function Kr(u){u.j.G==0||u.J||Hs(u.j,u)}function Tn(u){Gi(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,qr(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Yo(u,f){try{var y=u.j;if(y.G!=0&&(y.g==u||Kt(y.h,u))){if(!u.K&&Kt(y.h,u)&&y.G==3){try{var E=y.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)$s(y),Bn(y);else break e;Bs(y),ft(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Vn(C(y.Za,y),6e3));if(1>=dl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ir(y,11)}else if((u.K||y.g==u)&&$s(y),!re(f))for(L=y.Da.g.parse(f),f=0;f<L.length;f++){let Ue=L[f];if(y.T=Ue[0],Ue=Ue[1],y.G==2)if(Ue[0]=="c"){y.K=Ue[1],y.ia=Ue[2];const Rt=Ue[3];Rt!=null&&(y.la=Rt,y.j.info("VER="+y.la));const gt=Ue[4];gt!=null&&(y.Aa=gt,y.j.info("SVER="+y.Aa));const Sn=Ue[5];Sn!=null&&typeof Sn=="number"&&0<Sn&&(E=1.5*Sn,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const dn=u.g;if(dn){const ts=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ts){var B=E.h;B.g||ts.indexOf("spdy")==-1&&ts.indexOf("quic")==-1&&ts.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Xo(B,B.h),B.h=null))}if(E.D){const qs=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;qs&&(E.ya=qs,Ye(E.I,E.D,qs))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var Z=u;if(E.qa=Cl(E,E.J?E.ia:null,E.W),Z.K){fl(E.h,Z);var Ge=Z,wt=E.L;wt&&(Ge.I=wt),Ge.B&&(Gi(Ge),Je(Ge)),E.g=Z}else es(E);0<y.i.length&&ir(y)}else Ue[0]!="stop"&&Ue[0]!="close"||Ir(y,7);else y.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Ir(y,7):bt(y):Ue[0]!="noop"&&y.l&&y.l.ta(Ue),y.v=0)}}vr(4)}catch{}}var hl=class{constructor(u,f){this.g=u,this.map=f}};function Qi(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function un(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function dl(u){return u.h?1:u.g?u.g.size:0}function Kt(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Xo(u,f){u.g?u.g.add(f):u.h=f}function fl(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Qi.prototype.cancel=function(){if(this.i=pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function pl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const y of u.g.values())f=f.concat(y.D);return f}return H(u.i)}function Vs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var f=[],y=u.length,E=0;E<y;E++)f.push(u[E]);return f}f=[],y=0;for(E in u)f[y++]=u[E];return f}function Os(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var f=[];u=u.length;for(var y=0;y<u;y++)f.push(y);return f}f=[],y=0;for(const E in u)f[y++]=E;return f}}}function Gr(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var y=Os(u),E=Vs(u),L=E.length,B=0;B<L;B++)f.call(void 0,E[B],y&&y[B],u)}var Yi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bc(u,f){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var E=u[y].indexOf("="),L=null;if(0<=E){var B=u[y].substring(0,E);L=u[y].substring(E+1)}else B=u[y];f(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function _r(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof _r){this.h=u.h,Xi(this,u.j),this.o=u.o,this.g=u.g,Qr(this,u.s),this.l=u.l;var f=u.i,y=new tr;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Yr(this,y),this.m=u.m}else u&&(f=String(u).match(Yi))?(this.h=!1,Xi(this,f[1]||"",!0),this.o=Le(f[2]||""),this.g=Le(f[3]||"",!0),Qr(this,f[4]),this.l=Le(f[5]||"",!0),Yr(this,f[6]||"",!0),this.m=Le(f[7]||"")):(this.h=!1,this.i=new tr(null,this.h))}_r.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Jr(f,Ls,!0),":");var y=this.g;return(y||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Jr(f,Ls,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Jr(y,y.charAt(0)=="/"?yl:gl,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Jr(y,Jo)),u.join("")};function cn(u){return new _r(u)}function Xi(u,f,y){u.j=y?Le(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Qr(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Yr(u,f,y){f instanceof tr?(u.i=f,nr(u.i,u.h)):(y||(f=Jr(f,vl)),u.i=new tr(f,u.h))}function Ye(u,f,y){u.i.set(f,y)}function Xr(u){return Ye(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Le(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Jr(u,f,y){return typeof u=="string"?(u=encodeURI(u).replace(f,ml),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ml(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ls=/[#\/\?@]/g,gl=/[#\?:]/g,yl=/[#\?]/g,vl=/[#\?@]/g,Jo=/#/g;function tr(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Nt(u){u.g||(u.g=new Map,u.h=0,u.i&&bc(u.i,function(f,y){u.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}r=tr.prototype,r.add=function(u,f){Nt(this),this.i=null,u=In(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(f),this.h+=1,this};function Fn(u,f){Nt(u),f=In(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Un(u,f){return Nt(u),f=In(u,f),u.g.has(f)}r.forEach=function(u,f){Nt(this),this.g.forEach(function(y,E){y.forEach(function(L){u.call(f,L,E,this)},this)},this)},r.na=function(){Nt(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let E=0;E<f.length;E++){const L=u[E];for(let B=0;B<L.length;B++)y.push(f[E])}return y},r.V=function(u){Nt(this);let f=[];if(typeof u=="string")Un(this,u)&&(f=f.concat(this.g.get(In(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)f=f.concat(u[y])}return f},r.set=function(u,f){return Nt(this),this.i=null,u=In(this,u),Un(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},r.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Zr(u,f,y){Fn(u,f),0<y.length&&(u.i=null,u.g.set(In(u,f),H(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var E=f[y];const B=encodeURIComponent(String(E)),Z=this.V(E);for(E=0;E<Z.length;E++){var L=B;Z[E]!==""&&(L+="="+encodeURIComponent(String(Z[E]))),u.push(L)}}return this.i=u.join("&")};function In(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function nr(u,f){f&&!u.j&&(Nt(u),u.i=null,u.g.forEach(function(y,E){var L=E.toLowerCase();E!=L&&(Fn(this,E),Zr(this,L,y))},u)),u.j=f}function Dc(u,f){const y=new Wi;if(p.Image){const E=new Image;E.onload=F(Jt,y,"TestLoadImage: loaded",!0,f,E),E.onerror=F(Jt,y,"TestLoadImage: error",!1,f,E),E.onabort=F(Jt,y,"TestLoadImage: abort",!1,f,E),E.ontimeout=F(Jt,y,"TestLoadImage: timeout",!1,f,E),p.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else f(!1)}function _l(u,f){const y=new Wi,E=new AbortController,L=setTimeout(()=>{E.abort(),Jt(y,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:E.signal}).then(B=>{clearTimeout(L),B.ok?Jt(y,"TestPingServer: ok",!0,f):Jt(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Jt(y,"TestPingServer: error",!1,f)})}function Jt(u,f,y,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(y)}catch{}}function Vc(){this.g=new $o}function wl(u,f,y){const E=y||"";try{Gr(u,function(L,B){let Z=L;v(L)&&(Z=Bi(L)),f.push(E+B+"="+encodeURIComponent(Z))})}catch(L){throw f.push(E+"type="+encodeURIComponent("_badmap")),L}}function wr(u){this.l=u.Ub||null,this.j=u.eb||!1}$(wr,$i),wr.prototype.g=function(){return new Ji(this.l,this.j)},wr.prototype.i=function(u){return function(){return u}}({});function Ji(u,f){ue.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Ji,ue),r=Ji.prototype,r.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,zn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||p).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,zn(this)),this.g&&(this.readyState=3,zn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;El(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function El(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?jn(this):zn(this),this.readyState==3&&El(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,jn(this))},r.Qa=function(u){this.g&&(this.response=u,jn(this))},r.ga=function(){this.g&&jn(this)};function jn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,zn(u)}r.setRequestHeader=function(u,f){this.u.append(u,f)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=f.next();return u.join(`\r
`)};function zn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Er(u){let f="";return ye(u,function(y,E){f+=E,f+=":",f+=y,f+=`\r
`}),f}function ei(u,f,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=Er(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Ye(u,f,y))}function rt(u){ue.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(rt,ue);var Oc=/^https?$/i,Zo=["POST","PUT"];r=rt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,f,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ln.g(),this.v=this.o?Rs(this.o):Rs(Ln),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(B){Zi(this,B);return}if(u=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)y.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const B of E.keys())y.set(B,E.get(B));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),L=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Zo,f,void 0))||E||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,Z]of y)this.g.setRequestHeader(B,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fs(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){Zi(this,B)}};function Zi(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Ms(u),hn(u)}function Ms(u){u.A||(u.A=!0,Ee(u,"complete"),Ee(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ee(this,"complete"),Ee(this,"abort"),hn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hn(this,!0)),rt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ea(this):this.bb())},r.bb=function(){ea(this)};function ea(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Zt(u)!=4||u.Z()!=2)){if(u.u&&Zt(u)==4)_n(u.Ea,0,u);else if(Ee(u,"readystatechange"),Zt(u)==4){u.h=!1;try{const Z=u.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var E;if(E=Z===0){var L=String(u.D).match(Yi)[1]||null;!L&&p.self&&p.self.location&&(L=p.self.location.protocol.slice(0,-1)),E=!Oc.test(L?L.toLowerCase():"")}y=E}if(y)Ee(u,"complete"),Ee(u,"success");else{u.m=6;try{var B=2<Zt(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",Ms(u)}}finally{hn(u)}}}}function hn(u,f){if(u.g){Fs(u);const y=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Ee(u,"ready");try{y.onreadystatechange=E}catch{}}}function Fs(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Zt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Zt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Bo(f)}};function ta(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Us(u){const f={};u=(u.g&&2<=Zt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(re(u[E]))continue;var y=D(u[E]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const B=f[L]||[];f[L]=B,B.push(y)}N(f,function(E){return E.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(u,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||f}function na(u){this.Aa=0,this.i=[],this.j=new Wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rr("baseRetryDelayMs",5e3,u),this.cb=rr("retryDelaySeedMs",1e4,u),this.Wa=rr("forwardChannelMaxRetries",2,u),this.wa=rr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Qi(u&&u.concurrentRequestLimit),this.Da=new Vc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=na.prototype,r.la=8,r.G=1,r.connect=function(u,f,y,E){ft(0),this.W=u,this.H=f||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=Cl(this,null,this.W),ir(this)};function bt(u){if(js(u),u.G==3){var f=u.U++,y=cn(u.I);if(Ye(y,"SID",u.K),Ye(y,"RID",f),Ye(y,"TYPE","terminate"),Tr(u,y),f=new Mn(u,u.j,f),f.L=2,f.v=Xr(cn(y)),y=!1,p.navigator&&p.navigator.sendBeacon)try{y=p.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&p.Image&&(new Image().src=f.v,y=!0),y||(f.g=Rl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Je(f)}Sl(u)}function Bn(u){u.g&&(ra(u),u.g.cancel(),u.g=null)}function js(u){Bn(u),u.u&&(p.clearTimeout(u.u),u.u=null),$s(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ir(u){if(!un(u.h)&&!u.s){u.s=!0;var f=u.Ga;He||ie(),ee||(He(),ee=!0),me.add(f,u),u.B=0}}function Lc(u,f){return dl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Vn(C(u.Ga,u,f),Il(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Mn(this,this.j,u);let B=this.o;if(this.S&&(B?(B=I(B),k(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=ti(this,L,f),y=cn(this.I),Ye(y,"RID",u),Ye(y,"CVER",22),this.D&&Ye(y,"X-HTTP-Session-Id",this.D),Tr(this,y),B&&(this.O?f="headers="+encodeURIComponent(String(Er(B)))+"&"+f:this.m&&ei(y,this.m,B)),Xo(this.h,L),this.Ua&&Ye(y,"TYPE","init"),this.P?(Ye(y,"$req",f),Ye(y,"SID","null"),L.T=!0,Ds(L,y,null)):Ds(L,y,f),this.G=2}}else this.G==3&&(u?zs(this,u):this.i.length==0||un(this.h)||zs(this))};function zs(u,f){var y;f?y=f.l:y=u.U++;const E=cn(u.I);Ye(E,"SID",u.K),Ye(E,"RID",y),Ye(E,"AID",u.T),Tr(u,E),u.m&&u.o&&ei(E,u.m,u.o),y=new Mn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),f&&(u.i=f.D.concat(u.i)),f=ti(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Xo(u.h,y),Ds(y,E,f)}function Tr(u,f){u.H&&ye(u.H,function(y,E){Ye(f,E,y)}),u.l&&Gr({},function(y,E){Ye(f,E,y)})}function ti(u,f,y){y=Math.min(u.i.length,y);var E=u.l?C(u.l.Na,u.l,u):null;e:{var L=u.i;let B=-1;for(;;){const Z=["count="+y];B==-1?0<y?(B=L[0].g,Z.push("ofs="+B)):B=0:Z.push("ofs="+B);let Ge=!0;for(let wt=0;wt<y;wt++){let Ue=L[wt].g;const Rt=L[wt].map;if(Ue-=B,0>Ue)B=Math.max(0,L[wt].g-100),Ge=!1;else try{wl(Rt,Z,"req"+Ue+"_")}catch{E&&E(Rt)}}if(Ge){E=Z.join("&");break e}}}return u=u.i.splice(0,y),f.D=u,E}function es(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;He||ie(),ee||(He(),ee=!0),me.add(f,u),u.v=0}}function Bs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Vn(C(u.Fa,u),Il(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Tl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Vn(C(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Bn(this),Tl(this))};function ra(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Tl(u){u.g=new Mn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=cn(u.qa);Ye(f,"RID","rpc"),Ye(f,"SID",u.K),Ye(f,"AID",u.T),Ye(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ye(f,"TO",u.ja),Ye(f,"TYPE","xmlhttp"),Tr(u,f),u.m&&u.o&&ei(f,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Xr(cn(f)),y.m=null,y.P=!0,Qo(y,u)}r.Za=function(){this.C!=null&&(this.C=null,Bn(this),Bs(this),ft(19))};function $s(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function Hs(u,f){var y=null;if(u.g==f){$s(u),ra(u),u.g=null;var E=2}else if(Kt(u.h,f))y=f.D,fl(u.h,f),E=1;else return;if(u.G!=0){if(f.o)if(E==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;E=Hi(),Ee(E,new Ps(E,y)),ir(u)}else es(u);else if(L=f.s,L==3||L==0&&0<f.X||!(E==1&&Lc(u,f)||E==2&&Bs(u)))switch(y&&0<y.length&&(f=u.h,f.i=f.i.concat(y)),L){case 1:Ir(u,5);break;case 4:Ir(u,10);break;case 3:Ir(u,6);break;default:Ir(u,2)}}}function Il(u,f){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*f}function Ir(u,f){if(u.j.info("Error code "+f),f==2){var y=C(u.fb,u),E=u.Xa;const L=!E;E=new _r(E||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Xi(E,"https"),Xr(E),L?Dc(E.toString(),y):_l(E.toString(),y)}else ft(2);u.G=0,u.l&&u.l.sa(f),Sl(u),js(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Sl(u){if(u.G=0,u.ka=[],u.l){const f=pl(u.h);(f.length!=0||u.i.length!=0)&&(U(u.ka,f),U(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function Cl(u,f,y){var E=y instanceof _r?cn(y):new _r(y);if(E.g!="")f&&(E.g=f+"."+E.g),Qr(E,E.s);else{var L=p.location;E=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var B=new _r(null);E&&Xi(B,E),f&&(B.g=f),L&&Qr(B,L),y&&(B.l=y),E=B}return y=u.D,f=u.ya,y&&f&&Ye(E,y,f),Ye(E,"VER",u.la),Tr(u,E),E}function Rl(u,f,y){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new rt(new wr({eb:y})):new rt(u.pa),f.Ha(u.J),f}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ia(){}r=ia.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ws(){}Ws.prototype.g=function(u,f){return new Gt(u,f)};function Gt(u,f){ue.call(this),this.g=new na(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!re(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!re(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new sr(this)}$(Gt,ue),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){bt(this.g)},Gt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Bi(u),u=y);f.i.push(new hl(f.Ya++,u)),f.G==3&&ir(f)},Gt.prototype.N=function(){this.g.l=null,delete this.j,bt(this.g),delete this.g,Gt.aa.N.call(this)};function Al(u){Zn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const y in f){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}$(Al,Zn);function xl(){xs.call(this),this.status=1}$(xl,xs);function sr(u){this.g=u}$(sr,ia),sr.prototype.ua=function(){Ee(this.g,"a")},sr.prototype.ta=function(u){Ee(this.g,new Al(u))},sr.prototype.sa=function(u){Ee(this.g,new xl)},sr.prototype.ra=function(){Ee(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,s_=function(){return new Ws},i_=function(){return Hi()},r_=er,Dd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,bu=Ns,al.COMPLETE="complete",n_=al,As.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",ue.prototype.listen=ue.prototype.K,Pa=As,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,t_=rt}).apply(typeof Iu<"u"?Iu:typeof self<"u"?self:typeof window<"u"?window:{});const $g="@firebase/firestore",Hg="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new Zd("@firebase/firestore");function po(){return vs.logLevel}function le(r,...e){if(vs.logLevel<=Ve.DEBUG){const t=e.map(df);vs.debug(`Firestore (${Fo}): ${r}`,...t)}}function zr(r,...e){if(vs.logLevel<=Ve.ERROR){const t=e.map(df);vs.error(`Firestore (${Fo}): ${r}`,...t)}}function So(r,...e){if(vs.logLevel<=Ve.WARN){const t=e.map(df);vs.warn(`Firestore (${Fo}): ${r}`,...t)}}function df(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,o_(r,s,t)}function o_(r,e,t){let s=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw zr(s),new Error(s)}function Ke(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||o_(e,o,s)}function Ae(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends $r{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($t.UNAUTHENTICATED))}shutdown(){}}class OS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class LS{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Or,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},p=g=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Or)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new a_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class MS{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FS{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new MS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class US{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const s=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,le("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Wg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=jS(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ne(r,e){return r<e?-1:r>e?1:0}function Vd(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Ne(s,o);{const l=l_(),h=zS(l.encode(qg(r,t)),l.encode(qg(e,t)));return h!==0?h:Ne(s,o)}}t+=s>65535?2:1}return Ne(r.length,e.length)}function qg(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function zS(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Ne(r[t],e[t]);return Ne(r.length,e.length)}function Co(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=-62135596800,Gg=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Gg);return new St(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Kg)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gg}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Kg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new St(0,0))}static max(){return new Ce(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="__name__";class cr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=cr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ne(e.length,t.length)}static compareSegments(e,t){const s=cr.isNumericId(e),o=cr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?cr.extractNumericId(e).compare(cr.extractNumericId(t)):Vd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pi.fromString(e.substring(4,e.length-2))}}class st extends cr{construct(e,t,s){return new st(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new st(t)}static emptyPath(){return new st([])}}const BS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends cr{construct(e,t,s){return new Lt(e,t,s)}static isValidIdentifier(e){return BS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qg}static keyField(){return new Lt([Qg])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ge(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ge(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(s+=p,o++):(l(),o++)}if(l(),h)throw new ge(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(st.fromString(e))}static fromName(e){return new we(st.fromString(e).popFirst(5))}static empty(){return new we(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new st(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=-1;function $S(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new St(t+1,0):new St(t,s));return new bi(o,we.empty(),e)}function HS(r){return new bi(r.readTime,r.key,$a)}class bi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new bi(Ce.min(),we.empty(),$a)}static max(){return new bi(Ce.max(),we.empty(),$a)}}function WS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:Ne(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==qS)throw r;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,s)=>{t(e)})}static reject(e){return new K((t,s)=>{s(e)})}static waitFor(e){return new K((t,s)=>{let o=0,l=0,h=!1;e.forEach(p=>{++o,p.next(()=>{++l,h&&l===o&&t()},g=>s(g))}),h=!0,l===o&&t()})}static or(e){let t=K.resolve(!1);for(const s of e)t=t.next(o=>o?K.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new K((s,o)=>{const l=e.length,h=new Array(l);let p=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next(w=>{h[v]=w,++p,p===l&&s(h)},w=>o(w))}})}static doWhile(e,t){return new K((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function GS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function jo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>t.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}cc.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=-1;function hc(r){return r==null}function Ku(r){return r===0&&1/r==-1/0}function QS(r){return typeof r=="number"&&Number.isInteger(r)&&!Ku(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="";function YS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Yg(e)),e=XS(r.get(t),e);return Yg(e)}function XS(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case c_:t+="";break;default:t+=l}}return t}function Yg(r){return r+c_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Fi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function h_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Su(this.root,e,this.comparator,!1)}getReverseIterator(){return new Su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Su(this.root,e,this.comparator,!0)}}class Su{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Ot.RED,this.left=o??Ot.EMPTY,this.right=l??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Ot(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jg(this.data.getIterator())}getIteratorFrom(e){return new Jg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ct(this.comparator);return t.data=e,t}}class Jg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new Ct(Lt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new d_("Invalid base64 string: "+l):l}}(e);return new Mt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const JS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(r){if(Ke(!!r,39018),typeof r=="string"){let e=0;const t=JS.exec(r);if(Ke(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:mt(r.seconds),nanos:mt(r.nanos)}}function mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Vi(r){return typeof r=="string"?Mt.fromBase64String(r):Mt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="server_timestamp",p_="__type__",m_="__previous_value__",g_="__local_write_time__";function pf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[p_])===null||t===void 0?void 0:t.stringValue)===f_}function dc(r){const e=r.mapValue.fields[m_];return pf(e)?dc(e):e}function Ha(r){const e=Di(r.mapValue.fields[g_].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t,s,o,l,h,p,g,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=w}}const Gu="(default)";class Wa{constructor(e,t){this.projectId=e,this.database=t||Gu}static empty(){return new Wa("","")}get isDefaultDatabase(){return this.database===Gu}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="__type__",eC="__max__",Cu={mapValue:{}},v_="__vector__",Qu="value";function Oi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?pf(r)?4:nC(r)?9007199254740991:tC(r)?10:11:Te(28295,{value:r})}function gr(r,e){if(r===e)return!0;const t=Oi(r);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ha(r).isEqual(Ha(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Di(o.timestampValue),p=Di(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Vi(o.bytesValue).isEqual(Vi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return mt(o.geoPointValue.latitude)===mt(l.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return mt(o.integerValue)===mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=mt(o.doubleValue),p=mt(l.doubleValue);return h===p?Ku(h)===Ku(p):isNaN(h)&&isNaN(p)}return!1}(r,e);case 9:return Co(r.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Xg(h)!==Xg(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!gr(h[g],p[g])))return!1;return!0}(r,e);default:return Te(52216,{left:r})}}function qa(r,e){return(r.values||[]).find(t=>gr(t,e))!==void 0}function Ro(r,e){if(r===e)return 0;const t=Oi(r),s=Oi(e);if(t!==s)return Ne(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(r.booleanValue,e.booleanValue);case 2:return function(l,h){const p=mt(l.integerValue||l.doubleValue),g=mt(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(r,e);case 3:return Zg(r.timestampValue,e.timestampValue);case 4:return Zg(Ha(r),Ha(e));case 5:return Vd(r.stringValue,e.stringValue);case 6:return function(l,h){const p=Vi(l),g=Vi(h);return p.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const p=l.split("/"),g=h.split("/");for(let v=0;v<p.length&&v<g.length;v++){const w=Ne(p[v],g[v]);if(w!==0)return w}return Ne(p.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const p=Ne(mt(l.latitude),mt(h.latitude));return p!==0?p:Ne(mt(l.longitude),mt(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return ey(r.arrayValue,e.arrayValue);case 10:return function(l,h){var p,g,v,w;const T=l.fields||{},C=h.fields||{},F=(p=T[Qu])===null||p===void 0?void 0:p.arrayValue,$=(g=C[Qu])===null||g===void 0?void 0:g.arrayValue,H=Ne(((v=F==null?void 0:F.values)===null||v===void 0?void 0:v.length)||0,((w=$==null?void 0:$.values)===null||w===void 0?void 0:w.length)||0);return H!==0?H:ey(F,$)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===Cu.mapValue&&h===Cu.mapValue)return 0;if(l===Cu.mapValue)return 1;if(h===Cu.mapValue)return-1;const p=l.fields||{},g=Object.keys(p),v=h.fields||{},w=Object.keys(v);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const C=Vd(g[T],w[T]);if(C!==0)return C;const F=Ro(p[g[T]],v[w[T]]);if(F!==0)return F}return Ne(g.length,w.length)}(r.mapValue,e.mapValue);default:throw Te(23264,{Pe:t})}}function Zg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ne(r,e);const t=Di(r),s=Di(e),o=Ne(t.seconds,s.seconds);return o!==0?o:Ne(t.nanos,s.nanos)}function ey(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Ro(t[o],s[o]);if(l)return l}return Ne(t.length,s.length)}function Ao(r){return Od(r)}function Od(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Di(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Vi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return we.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Od(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Od(t.fields[h])}`;return o+"}"}(r.mapValue):Te(61005,{value:r})}function Du(r){switch(Oi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dc(r);return e?16+Du(e):16;case 5:return 2*r.stringValue.length;case 6:return Vi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+Du(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Fi(s.fields,(l,h)=>{o+=l.length+Du(h)}),o}(r.mapValue);default:throw Te(13486,{value:r})}}function Ld(r){return!!r&&"integerValue"in r}function mf(r){return!!r&&"arrayValue"in r}function ty(r){return!!r&&"nullValue"in r}function ny(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Vu(r){return!!r&&"mapValue"in r}function tC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[y_])===null||t===void 0?void 0:t.stringValue)===v_}function Oa(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Fi(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Oa(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Oa(r.arrayValue.values[t]);return e}return Object.assign({},r)}function nC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===eC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Vu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oa(t)}setAll(e){let t=Lt.emptyPath(),s={},o=[];e.forEach((h,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=p.popLast()}h?s[p.lastSegment()]=Oa(h):o.push(p.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Vu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Vu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Fi(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new gn(Oa(this.value))}}function __(r){const e=[];return Fi(r.fields,(t,s)=>{const o=new Lt([t]);if(Vu(s)){const l=__(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,t,s,o,l,h,p){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Ht(e,0,Ce.min(),Ce.min(),Ce.min(),gn.empty(),0)}static newFoundDocument(e,t,s,o){return new Ht(e,1,t,Ce.min(),s,o,0)}static newNoDocument(e,t){return new Ht(e,2,t,Ce.min(),Ce.min(),gn.empty(),0)}static newUnknownDocument(e,t){return new Ht(e,3,t,Ce.min(),Ce.min(),gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t){this.position=e,this.inclusive=t}}function ry(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=we.comparator(we.fromName(h.referenceValue),t.key):s=Ro(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function iy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!gr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t="asc"){this.field=e,this.dir=t}}function rC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{}class It extends w_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new sC(e,t,s):t==="array-contains"?new lC(e,s):t==="in"?new uC(e,s):t==="not-in"?new cC(e,s):t==="array-contains-any"?new hC(e,s):new It(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new oC(e,s):new aC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ro(t,this.value)):t!==null&&Oi(this.value)===Oi(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends w_{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new yr(e,t)}matches(e){return E_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function E_(r){return r.op==="and"}function T_(r){return iC(r)&&E_(r)}function iC(r){for(const e of r.filters)if(e instanceof yr)return!1;return!0}function Md(r){if(r instanceof It)return r.field.canonicalString()+r.op.toString()+Ao(r.value);if(T_(r))return r.filters.map(e=>Md(e)).join(",");{const e=r.filters.map(t=>Md(t)).join(",");return`${r.op}(${e})`}}function I_(r,e){return r instanceof It?function(s,o){return o instanceof It&&s.op===o.op&&s.field.isEqual(o.field)&&gr(s.value,o.value)}(r,e):r instanceof yr?function(s,o){return o instanceof yr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,p)=>l&&I_(h,o.filters[p]),!0):!1}(r,e):void Te(19439)}function S_(r){return r instanceof It?function(t){return`${t.field.canonicalString()} ${t.op} ${Ao(t.value)}`}(r):r instanceof yr?function(t){return t.op.toString()+" {"+t.getFilters().map(S_).join(" ,")+"}"}(r):"Filter"}class sC extends It{constructor(e,t,s){super(e,t,s),this.key=we.fromName(s.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class oC extends It{constructor(e,t){super(e,"in",t),this.keys=C_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aC extends It{constructor(e,t){super(e,"not-in",t),this.keys=C_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function C_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>we.fromName(s.referenceValue))}class lC extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mf(t)&&qa(t.arrayValue,this.value)}}class uC extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&qa(this.value.arrayValue,t)}}class cC extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!qa(this.value.arrayValue,t)}}class hC extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>qa(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t=null,s=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.Ie=null}}function sy(r,e=null,t=[],s=[],o=null,l=null,h=null){return new dC(r,e,t,s,o,l,h)}function gf(r){const e=Ae(r);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Md(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),hc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ao(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ao(s)).join(",")),e.Ie=t}return e.Ie}function yf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!rC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!I_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!iy(r.startAt,e.startAt)&&iy(r.endAt,e.endAt)}function Fd(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t=null,s=[],o=[],l=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function fC(r,e,t,s,o,l,h,p){return new fc(r,e,t,s,o,l,h,p)}function pc(r){return new fc(r)}function oy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function pC(r){return r.collectionGroup!==null}function La(r){const e=Ae(r);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Ct(Lt.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(p=p.add(v.field))})}),p})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Xu(l,s))}),t.has(Lt.keyField().canonicalString())||e.Ee.push(new Xu(Lt.keyField(),s))}return e.Ee}function fr(r){const e=Ae(r);return e.de||(e.de=mC(e,La(r))),e.de}function mC(r,e){if(r.limitType==="F")return sy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Xu(o.field,l)});const t=r.endAt?new Yu(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Yu(r.startAt.position,r.startAt.inclusive):null;return sy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Ud(r,e,t){return new fc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function mc(r,e){return yf(fr(r),fr(e))&&r.limitType===e.limitType}function R_(r){return`${gf(fr(r))}|lt:${r.limitType}`}function mo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>S_(o)).join(", ")}]`),hc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>Ao(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>Ao(o)).join(",")),`Target(${s})`}(fr(r))}; limitType=${r.limitType})`}function gc(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):we.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of La(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,p,g){const v=ry(h,p,g);return h.inclusive?v<=0:v<0}(s.startAt,La(s),o)||s.endAt&&!function(h,p,g){const v=ry(h,p,g);return h.inclusive?v>=0:v>0}(s.endAt,La(s),o))}(r,e)}function gC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function A_(r){return(e,t)=>{let s=!1;for(const o of La(r)){const l=yC(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function yC(r,e,t){const s=r.field.isKeyField()?we.comparator(e.key,t.key):function(l,h,p){const g=h.data.field(l),v=p.data.field(l);return g!==null&&v!==null?Ro(g,v):Te(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return h_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new lt(we.comparator);function Br(){return vC}const x_=new lt(we.comparator);function ka(...r){let e=x_;for(const t of r)e=e.insert(t.key,t);return e}function P_(r){let e=x_;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ms(){return Ma()}function k_(){return Ma()}function Ma(){return new Ts(r=>r.toString(),(r,e)=>r.isEqual(e))}const _C=new lt(we.comparator),wC=new Ct(we.comparator);function Oe(...r){let e=wC;for(const t of r)e=e.add(t);return e}const EC=new Ct(Ne);function TC(){return EC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ku(e)?"-0":e}}function N_(r){return{integerValue:""+r}}function IC(r,e){return QS(e)?N_(e):vf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this._=void 0}}function SC(r,e,t){return r instanceof Ju?function(o,l){const h={fields:{[p_]:{stringValue:f_},[g_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&pf(l)&&(l=dc(l)),l&&(h.fields[m_]=l),{mapValue:h}}(t,e):r instanceof xo?D_(r,e):r instanceof Ka?V_(r,e):function(o,l){const h=b_(o,l),p=ay(h)+ay(o.Re);return Ld(h)&&Ld(o.Re)?N_(p):vf(o.serializer,p)}(r,e)}function CC(r,e,t){return r instanceof xo?D_(r,e):r instanceof Ka?V_(r,e):t}function b_(r,e){return r instanceof Zu?function(s){return Ld(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Ju extends yc{}class xo extends yc{constructor(e){super(),this.elements=e}}function D_(r,e){const t=O_(e);for(const s of r.elements)t.some(o=>gr(o,s))||t.push(s);return{arrayValue:{values:t}}}class Ka extends yc{constructor(e){super(),this.elements=e}}function V_(r,e){let t=O_(e);for(const s of r.elements)t=t.filter(o=>!gr(o,s));return{arrayValue:{values:t}}}class Zu extends yc{constructor(e,t){super(),this.serializer=e,this.Re=t}}function ay(r){return mt(r.integerValue||r.doubleValue)}function O_(r){return mf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t){this.field=e,this.transform=t}}function AC(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof xo&&o instanceof xo||s instanceof Ka&&o instanceof Ka?Co(s.elements,o.elements,gr):s instanceof Zu&&o instanceof Zu?gr(s.Re,o.Re):s instanceof Ju&&o instanceof Ju}(r.transform,e.transform)}class xC{constructor(e,t){this.version=e,this.transformResults=t}}class Lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Lr}static exists(e){return new Lr(void 0,e)}static updateTime(e){return new Lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ou(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class vc{}function L_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new F_(r.key,Lr.none()):new _c(r.key,r.data,Lr.none());{const t=r.data,s=gn.empty();let o=new Ct(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Is(r.key,s,new Yn(o.toArray()),Lr.none())}}function PC(r,e,t){r instanceof _c?function(o,l,h){const p=o.value.clone(),g=uy(o.fieldTransforms,l,h.transformResults);p.setAll(g),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):r instanceof Is?function(o,l,h){if(!Ou(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=uy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(M_(o)),g.setAll(p),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Fa(r,e,t,s){return r instanceof _c?function(l,h,p,g){if(!Ou(l.precondition,h))return p;const v=l.value.clone(),w=cy(l.fieldTransforms,g,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null}(r,e,t,s):r instanceof Is?function(l,h,p,g){if(!Ou(l.precondition,h))return p;const v=cy(l.fieldTransforms,g,h),w=h.data;return w.setAll(M_(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(r,e,t,s):function(l,h,p){return Ou(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p}(r,e,t)}function kC(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=b_(s.transform,o||null);l!=null&&(t===null&&(t=gn.empty()),t.set(s.field,l))}return t||null}function ly(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Co(s,o,(l,h)=>AC(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class _c extends vc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Is extends vc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function M_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function uy(r,e,t){const s=new Map;Ke(r.length===t.length,32656,{Ve:t.length,me:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,p=e.data.field(l.field);s.set(l.field,CC(h,p,t[o]))}return s}function cy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,SC(l,h,e))}return s}class F_ extends vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NC extends vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&PC(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Fa(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Fa(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=k_();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=t.has(o.key)?null:p;const g=L_(h,p);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ce.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,(t,s)=>ly(t,s))&&Co(this.baseMutations,e.baseMutations,(t,s)=>ly(t,s))}}class _f{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ke(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return _C}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new _f(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,je;function OC(r){switch(r){case Y.OK:return Te(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function U_(r){if(r===void 0)return zr("GRPC error has no .code"),Y.UNKNOWN;switch(r){case vt.OK:return Y.OK;case vt.CANCELLED:return Y.CANCELLED;case vt.UNKNOWN:return Y.UNKNOWN;case vt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case vt.INTERNAL:return Y.INTERNAL;case vt.UNAVAILABLE:return Y.UNAVAILABLE;case vt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case vt.NOT_FOUND:return Y.NOT_FOUND;case vt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case vt.ABORTED:return Y.ABORTED;case vt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case vt.DATA_LOSS:return Y.DATA_LOSS;default:return Te(39323,{code:r})}}(je=vt||(vt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Pi([4294967295,4294967295],0);function hy(r){const e=l_().encode(r),t=new e_;return t.update(e),new Uint8Array(t.digest())}function dy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Pi([t,s],0),new Pi([o,l],0)]}class wf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Na(`Invalid padding: ${t}`);if(s<0)throw new Na(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Na(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Na(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Pi.fromNumber(this.pe)}we(e,t,s){let o=e.add(t.multiply(Pi.fromNumber(s)));return o.compare(LC)===1&&(o=new Pi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=hy(e),[s,o]=dy(t);for(let l=0;l<this.hashCount;l++){const h=this.we(s,o,l);if(!this.be(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new wf(l,o,t);return s.forEach(p=>h.insert(p)),h}insert(e){if(this.pe===0)return;const t=hy(e),[s,o]=dy(t);for(let l=0;l<this.hashCount;l++){const h=this.we(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,nl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new wc(Ce.min(),o,new lt(Ne),Br(),Oe())}}class nl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new nl(s,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t,s,o){this.De=e,this.removedTargetIds=t,this.key=s,this.ve=o}}class j_{constructor(e,t){this.targetId=e,this.Ce=t}}class z_{constructor(e,t,s=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class fy{constructor(){this.Fe=0,this.Me=py(),this.xe=Mt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Oe(),t=Oe(),s=Oe();return this.Me.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:l})}}),new nl(this.xe,this.Oe,e,t,s)}Qe(){this.Ne=!1,this.Me=py()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ke(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class MC{constructor(e){this.ze=e,this.je=new Map,this.He=Br(),this.Je=Ru(),this.Ye=Ru(),this.Ze=new lt(Ne)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const s=this.rt(t);switch(e.state){case 0:this.it(t)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(t);break;case 3:this.it(t)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),s.ke(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((s,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,s=e.Ce.count,o=this._t(t);if(o){const l=o.target;if(Fd(l))if(s===0){const h=new we(l.path);this.tt(t,h,Ht.newNoDocument(h,Ce.min()))}else Ke(s===1,20013,{expectedCount:s});else{const h=this.ut(t);if(h!==s){const p=this.ct(e),g=p?this.lt(p,e,h):1;if(g!==0){this.st(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,p;try{h=Vi(s).toUint8Array()}catch(g){if(g instanceof d_)return So("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new wf(h,o,l)}catch(g){return So(g instanceof Na?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.pe===0?null:p}lt(e,t,s){return t.Ce.count===s-this.Tt(e,t.targetId)?0:2}Tt(e,t){const s=this.ze.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const h=this.ze.Pt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.tt(t,l,null),o++)}),o}It(e){const t=new Map;this.je.forEach((l,h)=>{const p=this._t(h);if(p){if(l.current&&Fd(p.target)){const g=new we(p.target.path);this.Et(g).has(h)||this.dt(h,g)||this.tt(h,g,Ht.newNoDocument(g,e))}l.Le&&(t.set(h,l.qe()),l.Qe())}});let s=Oe();this.Ye.forEach((l,h)=>{let p=!0;h.forEachWhile(g=>{const v=this._t(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(s=s.add(l))}),this.He.forEach((l,h)=>h.setReadTime(e));const o=new wc(e,t,this.Ze,this.He,s);return this.He=Br(),this.Je=Ru(),this.Ye=Ru(),this.Ze=new lt(Ne),o}et(e,t){if(!this.it(e))return;const s=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,s),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),s&&(this.He=this.He.insert(t,s))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new fy,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ct(Ne),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ct(Ne),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new fy),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Ru(){return new lt(we.comparator)}function py(){return new lt(we.comparator)}const FC={asc:"ASCENDING",desc:"DESCENDING"},UC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jC={and:"AND",or:"OR"};class zC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jd(r,e){return r.useProto3Json||hc(e)?e:{value:e}}function ec(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function BC(r,e){return ec(r,e.toTimestamp())}function pr(r){return Ke(!!r,49232),Ce.fromTimestamp(function(t){const s=Di(t);return new St(s.seconds,s.nanos)}(r))}function Ef(r,e){return zd(r,e).canonicalString()}function zd(r,e){const t=function(o){return new st(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function $_(r){const e=st.fromString(r);return Ke(G_(e),10190,{key:e.toString()}),e}function Bd(r,e){return Ef(r.databaseId,e.path)}function md(r,e){const t=$_(e);if(t.get(1)!==r.databaseId.projectId)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(W_(t))}function H_(r,e){return Ef(r.databaseId,e)}function $C(r){const e=$_(r);return e.length===4?st.emptyPath():W_(e)}function $d(r){return new st(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function W_(r){return Ke(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function my(r,e,t){return{name:Bd(r,e),fields:t.value.mapValue.fields}}function HC(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Te(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,w){return v.useProto3Json?(Ke(w===void 0||typeof w=="string",58123),Mt.fromBase64String(w||"")):(Ke(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Mt.fromUint8Array(w||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&function(v){const w=v.code===void 0?Y.UNKNOWN:U_(v.code);return new ge(w,v.message||"")}(h);t=new z_(s,o,l,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=md(r,s.document.name),l=pr(s.document.updateTime),h=s.document.createTime?pr(s.document.createTime):Ce.min(),p=new gn({mapValue:{fields:s.document.fields}}),g=Ht.newFoundDocument(o,l,h,p),v=s.targetIds||[],w=s.removedTargetIds||[];t=new Lu(v,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=md(r,s.document),l=s.readTime?pr(s.readTime):Ce.min(),h=Ht.newNoDocument(o,l),p=s.removedTargetIds||[];t=new Lu([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=md(r,s.document),l=s.removedTargetIds||[];t=new Lu([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new VC(o,l),p=s.targetId;t=new j_(p,h)}}return t}function WC(r,e){let t;if(e instanceof _c)t={update:my(r,e.key,e.value)};else if(e instanceof F_)t={delete:Bd(r,e.key)};else if(e instanceof Is)t={update:my(r,e.key,e.data),updateMask:eR(e.fieldMask)};else{if(!(e instanceof NC))return Te(16599,{ft:e.type});t={verify:Bd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const p=h.transform;if(p instanceof Ju)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof xo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Ka)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Zu)return{fieldPath:h.field.canonicalString(),increment:p.Re};throw Te(20930,{transform:h.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:BC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)}(r,e.precondition)),t}function qC(r,e){return r&&r.length>0?(Ke(e!==void 0,14353),r.map(t=>function(o,l){let h=o.updateTime?pr(o.updateTime):pr(l);return h.isEqual(Ce.min())&&(h=pr(l)),new xC(h,o.transformResults||[])}(t,e))):[]}function KC(r,e){return{documents:[H_(r,e.path)]}}function GC(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=H_(r,o);const l=function(v){if(v.length!==0)return K_(yr.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(v){if(v.length!==0)return v.map(w=>function(C){return{field:go(C.field),direction:XC(C.dir)}}(w))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=jd(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:t,parent:o}}function QC(r){let e=$C(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ke(s===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=function(T){const C=q_(T);return C instanceof yr&&T_(C)?C.getFilters():[C]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(C=>function($){return new Xu(yo($.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(C))}(t.orderBy));let p=null;t.limit&&(p=function(T){let C;return C=typeof T=="object"?T.value:T,hc(C)?null:C}(t.limit));let g=null;t.startAt&&(g=function(T){const C=!!T.before,F=T.values||[];return new Yu(F,C)}(t.startAt));let v=null;return t.endAt&&(v=function(T){const C=!T.before,F=T.values||[];return new Yu(F,C)}(t.endAt)),fC(e,o,h,l,p,"F",g,v)}function YC(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function q_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=yo(t.unaryFilter.field);return It.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=yo(t.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=yo(t.unaryFilter.field);return It.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=yo(t.unaryFilter.field);return It.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(r):r.fieldFilter!==void 0?function(t){return It.create(yo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return yr.create(t.compositeFilter.filters.map(s=>q_(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(t.compositeFilter.op))}(r):Te(30097,{filter:r})}function XC(r){return FC[r]}function JC(r){return UC[r]}function ZC(r){return jC[r]}function go(r){return{fieldPath:r.canonicalString()}}function yo(r){return Lt.fromServerFormat(r.fieldPath)}function K_(r){return r instanceof It?function(t){if(t.op==="=="){if(ny(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NAN"}};if(ty(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ny(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NAN"}};if(ty(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(t.field),op:JC(t.op),value:t.value}}}(r):r instanceof yr?function(t){const s=t.getFilters().map(o=>K_(o));return s.length===1?s[0]:{compositeFilter:{op:ZC(t.op),filters:s}}}(r):Te(54877,{filter:r})}function eR(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function G_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t,s,o,l=Ce.min(),h=Ce.min(),p=Mt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.wt=e}}function nR(r){const e=QC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.Cn=new iR}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(bi.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(bi.min())}updateCollectionGroup(e,t,s){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class iR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ct(st.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ct(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q_=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(Q_,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Po(0)}static lr(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="LruGarbageCollector",sR=1048576;function vy([r,e],[t,s]){const o=Ne(r,t);return o===0?Ne(e,s):o}class oR{constructor(e){this.Er=e,this.buffer=new Ct(vy),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();vy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){le(yy,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){jo(t)?le(yy,"Ignoring IndexedDB error during garbage collection: ",t):await Uo(t)}await this.mr(3e5)})}}class lR{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return K.resolve(cc.le);const s=new oR(t);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.gr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(gy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gy):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let s,o,l,h,p,g,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(s=T,p=Date.now(),this.removeTargets(e,s,t))).next(T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(v=Date.now(),po()<=Ve.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${l} targets in `+(g-p)+`ms
	Removed ${T} documents in `+(v-g)+`ms
Total Duration: ${v-w}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T})))}}function uR(r,e){return new lR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.changes=new Ts(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?K.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&Fa(s.mutation,o,Yn.empty(),St.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Oe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Oe()){const o=ms();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let h=ka();return l.forEach((p,g)=>{h=h.insert(p,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=ms();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Oe()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,p)=>{t.set(h,p)})})}computeViews(e,t,s,o){let l=Br();const h=Ma(),p=function(){return Ma()}();return t.forEach((g,v)=>{const w=s.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof Is)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),Fa(w.mutation,v,w.mutation.getFieldMask(),St.now())):h.set(v.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((v,w)=>h.set(v,w)),t.forEach((v,w)=>{var T;return p.set(v,new hR(w,(T=h.get(v))!==null&&T!==void 0?T:null))}),p))}recalculateAndSaveOverlays(e,t){const s=Ma();let o=new lt((h,p)=>h-p),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const p of h)p.keys().forEach(g=>{const v=t.get(g);if(v===null)return;let w=s.get(g)||Yn.empty();w=p.applyToLocalView(v,w),s.set(g,w);const T=(o.get(p.batchId)||Oe()).add(g);o=o.insert(p.batchId,T)})}).next(()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),v=g.key,w=g.value,T=k_();w.forEach(C=>{if(!l.has(C)){const F=L_(t.get(C),s.get(C));F!==null&&T.set(C,F),l=l.add(C)}}),h.push(this.documentOverlayCache.saveOverlays(e,v,T))}return K.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return we.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):K.resolve(ms());let p=$a,g=l;return h.next(v=>K.forEach(v,(w,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),l.get(w)?K.resolve():this.remoteDocumentCache.getEntry(e,w).next(C=>{g=g.insert(w,C)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,g,v,Oe())).next(w=>({batchId:p,changes:P_(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next(s=>{let o=ka();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=ka();return this.indexManager.getCollectionParents(e,l).next(p=>K.forEach(p,g=>{const v=function(T,C){return new fc(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next(w=>{w.forEach((T,C)=>{h=h.insert(T,C)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(h=>{l.forEach((g,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,Ht.newInvalidDocument(w)))});let p=ka();return h.forEach((g,v)=>{const w=l.get(g);w!==void 0&&Fa(w.mutation,v,Yn.empty(),St.now()),gc(t,v)&&(p=p.insert(g,v))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return K.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:pr(o.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:nR(o.bundledQuery),readTime:pr(o.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.overlays=new lt(we.comparator),this.Qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ms();return K.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.St(e,t,l)}),K.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(s)),K.resolve()}getOverlaysForCollection(e,t,s){const o=ms(),l=t.length+1,h=new we(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new lt((v,w)=>v-w);const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let w=l.get(v.largestBatchId);w===null&&(w=ms(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const p=ms(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,w)=>p.set(v,w)),!(p.size()>=o)););return K.resolve(p)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new DC(t,s));let l=this.Qr.get(t);l===void 0&&(l=Oe(),this.Qr.set(t,l)),this.Qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this.$r=new Ct(kt.Ur),this.Kr=new Ct(kt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const s=new kt(e,t);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.zr(new kt(e,t))}jr(e,t){e.forEach(s=>this.removeReference(s,t))}Hr(e){const t=new we(new st([])),s=new kt(t,e),o=new kt(t,e+1),l=[];return this.Kr.forEachInRange([s,o],h=>{this.zr(h),l.push(h.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new we(new st([])),s=new kt(t,e),o=new kt(t,e+1);let l=Oe();return this.Kr.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new kt(e,0),s=this.$r.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return we.comparator(e.key,t.key)||Ne(e.Zr,t.Zr)}static Wr(e,t){return Ne(e.Zr,t.Zr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Ct(kt.Ur)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new bC(l,t,s,o);this.mutationQueue.push(h);for(const p of o)this.Xr=this.Xr.add(new kt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ti(s),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?ff:this.nr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([s,o],h=>{const p=this.ei(h.Zr);l.push(p)}),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ct(Ne);return t.forEach(o=>{const l=new kt(o,0),h=new kt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,h],p=>{s=s.add(p.Zr)})}),K.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;we.isDocumentKey(l)||(l=l.child(""));const h=new kt(new we(l),0);let p=new Ct(Ne);return this.Xr.forEachWhile(g=>{const v=g.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(p=p.add(g.Zr)),!0)},h),K.resolve(this.ni(p))}ni(e){const t=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ke(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return K.forEach(t.mutations,o=>{const l=new kt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,t){const s=new kt(t,0),o=this.Xr.firstAfterOrEqual(s);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.ii=e,this.docs=function(){return new lt(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ii(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return K.resolve(s?s.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let s=Br();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Ht.newInvalidDocument(o))}),K.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Br();const h=t.path,p=new we(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:v,value:{document:w}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||WS(HS(w),s)<=0||(o.has(w.key)||gc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Te(9500)}si(e,t){return K.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new vR(this)}getSize(e){return K.resolve(this.size)}}class vR extends cR{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),K.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.persistence=e,this.oi=new Ts(t=>gf(t),yf),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this._i=0,this.ai=new Tf,this.targetCount=0,this.ui=Po.cr()}forEachTarget(e,t){return this.oi.forEach((s,o)=>t(o)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this._i&&(this._i=t),K.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Po(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Tr(t),K.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.oi.forEach((h,p)=>{p.sequenceNumber<=t&&s.get(p.targetId)===null&&(this.oi.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),K.waitFor(l).next(()=>o)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const s=this.oi.get(t)||null;return K.resolve(s)}addMatchingKeys(e,t,s){return this.ai.Gr(t,s),K.resolve()}removeMatchingKeys(e,t,s){this.ai.jr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ai.Yr(t);return K.resolve(s)}containsKey(e,t){return K.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t){this.ci={},this.overlays={},this.li=new cc(0),this.hi=!1,this.hi=!0,this.Pi=new mR,this.referenceDelegate=e(this),this.Ti=new _R(this),this.indexManager=new rR,this.remoteDocumentCache=function(o){return new yR(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new tR(t),this.Ei=new fR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ci[e.toKey()];return s||(s=new gR(t,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,s){le("MemoryPersistence","Starting transaction:",e);const o=new wR(this.li.next());return this.referenceDelegate.di(),s(o).next(l=>this.referenceDelegate.Ai(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ri(e,t){return K.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,t)))}}class wR extends KS{constructor(e){super(),this.currentSequenceNumber=e}}class If{constructor(e){this.persistence=e,this.Vi=new Tf,this.mi=null}static fi(e){return new If(e)}get gi(){if(this.mi)return this.mi;throw Te(60996)}addReference(e,t,s){return this.Vi.addReference(s,t),this.gi.delete(s.toString()),K.resolve()}removeReference(e,t,s){return this.Vi.removeReference(s,t),this.gi.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.gi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.gi,s=>{const o=we.fromPath(s);return this.pi(e,o).next(l=>{l||t.removeEntry(o,Ce.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(s=>{s?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return K.or([()=>K.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class tc{constructor(e,t){this.persistence=e,this.yi=new Ts(s=>YS(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=uR(this,t)}static fi(e,t){return new tc(e,t)}di(){}Ai(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}br(e){let t=0;return this.yr(e,s=>{t++}).next(()=>t)}yr(e,t){return K.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(l=>l?K.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.si(e,h=>this.Dr(e,h,t).next(p=>{p||(s++,l.removeEntry(h,Ce.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),K.resolve()}removeReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),K.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Du(e.data.value)),t}Dr(e,t,s){return K.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return K.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.ds=s,this.As=o}static Rs(e,t){let s=Oe(),o=Oe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Sf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return dT()?8:GS(Wt())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ws(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.bs(e,t,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new ER;return this.Ss(e,t,h).next(p=>{if(l.result=p,this.fs)return this.Ds(e,t,h,p.size)})}).next(()=>l.result)}Ds(e,t,s,o){return s.documentReadCount<this.gs?(po()<=Ve.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),K.resolve()):(po()<=Ve.DEBUG&&le("QueryEngine","Query:",mo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(po()<=Ve.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fr(t))):K.resolve())}ws(e,t){if(oy(t))return K.resolve(null);let s=fr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Ud(t,null,"F"),s=fr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=Oe(...l);return this.ys.getDocuments(e,h).next(p=>this.indexManager.getMinOffset(e,s).next(g=>{const v=this.vs(t,p);return this.Cs(t,v,h,g.readTime)?this.ws(e,Ud(t,null,"F")):this.Fs(e,v,t,g)}))})))}bs(e,t,s,o){return oy(t)||o.isEqual(Ce.min())?K.resolve(null):this.ys.getDocuments(e,s).next(l=>{const h=this.vs(t,l);return this.Cs(t,h,s,o)?K.resolve(null):(po()<=Ve.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),mo(t)),this.Fs(e,h,t,$S(o,$a)).next(p=>p))})}vs(e,t){let s=new Ct(A_(e));return t.forEach((o,l)=>{gc(e,l)&&(s=s.add(l))}),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return po()<=Ve.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",mo(t)),this.ys.getDocumentsMatchingQuery(e,t,bi.min(),s)}Fs(e,t,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="LocalStore",IR=3e8;class SR{constructor(e,t,s,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new lt(Ne),this.Os=new Ts(l=>gf(l),yf),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dR(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function CR(r,e,t,s){return new SR(r,e,t,s)}async function X_(r,e){const t=Ae(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ls(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],p=[];let g=Oe();for(const v of o){h.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}for(const v of l){p.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next(v=>({ks:v,removedBatchIds:h,addedBatchIds:p}))})})}function RR(r,e){const t=Ae(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(p,g,v,w){const T=v.batch,C=T.keys();let F=K.resolve();return C.forEach($=>{F=F.next(()=>w.getEntry(g,$)).next(H=>{const U=v.docVersions.get($);Ke(U!==null,48541),H.version.compareTo(U)<0&&(T.applyToRemoteDocument(H,v),H.isValidDocument()&&(H.setReadTime(v.commitVersion),w.addEntry(H)))})}),F.next(()=>p.mutationQueue.removeMutationBatch(g,T))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let g=Oe();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(g=g.add(p.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function J_(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function AR(r,e){const t=Ae(r),s=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const p=[];e.targetChanges.forEach((w,T)=>{const C=o.get(T);if(!C)return;p.push(t.Ti.removeMatchingKeys(l,w.removedDocuments,T).next(()=>t.Ti.addMatchingKeys(l,w.addedDocuments,T)));let F=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?F=F.withResumeToken(Mt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):w.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(w.resumeToken,s)),o=o.insert(T,F),function(H,U,se){return H.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=IR?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0}(C,F,w)&&p.push(t.Ti.updateTargetData(l,F))});let g=Br(),v=Oe();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))}),p.push(xR(l,h,e.documentUpdates).next(w=>{g=w.qs,v=w.Qs})),!s.isEqual(Ce.min())){const w=t.Ti.getLastRemoteSnapshotVersion(l).next(T=>t.Ti.setTargetsMetadata(l,l.currentSequenceNumber,s));p.push(w)}return K.waitFor(p).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,v)).next(()=>g)}).then(l=>(t.xs=o,l))}function xR(r,e,t){let s=Oe(),o=Oe();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=Br();return t.forEach((p,g)=>{const v=l.get(p);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Ce.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):le(Cf,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",g.version)}),{qs:h,Qs:o}})}function PR(r,e){const t=Ae(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=ff),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function kR(r,e){const t=Ae(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Ti.getTargetData(s,e).next(l=>l?(o=l,K.resolve(o)):t.Ti.allocateTargetId(s).next(h=>(o=new Ii(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(s.targetId,s),t.Os.set(e,s.targetId)),s})}async function Hd(r,e,t){const s=Ae(r),o=s.xs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!jo(h))throw h;le(Cf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function _y(r,e,t){const s=Ae(r);let o=Ce.min(),l=Oe();return s.persistence.runTransaction("Execute query","readwrite",h=>function(g,v,w){const T=Ae(g),C=T.Os.get(w);return C!==void 0?K.resolve(T.xs.get(C)):T.Ti.getTargetData(v,w)}(s,h,fr(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(h,p.targetId).next(g=>{l=g})}).next(()=>s.Ms.getDocumentsMatchingQuery(h,e,t?o:Ce.min(),t?l:Oe())).next(p=>(NR(s,gC(e),p),{documents:p,$s:l})))}function NR(r,e,t){let s=r.Ns.get(e)||Ce.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.Ns.set(e,s)}class wy{constructor(){this.activeTargetIds=TC()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bR{constructor(){this.xo=new wy,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,s){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new wy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="ConnectivityMonitor";class Ty{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){le(Ey,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){le(Ey,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au=null;function Wd(){return Au===null?Au=function(){return 268435456+Math.round(2147483648*Math.random())}():Au++,"0x"+Au.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="RestConnection",VR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OR{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===Gu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,t,s,o,l){const h=Wd(),p=this.jo(e,t.toUriEncodedString());le(gd,`Sending RPC '${e}' ${h}:`,p,s);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,o,l);const{host:v}=new URL(p),w=Oo(v);return this.Jo(e,p,g,s,w).then(T=>(le(gd,`Received RPC '${e}' ${h}: `,T),T),T=>{throw So(gd,`RPC '${e}' ${h} failed with error: `,T,"url: ",p,"request:",s),T})}Yo(e,t,s,o,l,h){return this.zo(e,t,s,o,l)}Ho(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),s&&s.headers.forEach((o,l)=>e[l]=o)}jo(e,t){const s=VR[e];return`${this.Ko}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class MR extends OR{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=Wd();return new Promise((p,g)=>{const v=new t_;v.setWithCredentials(!0),v.listenOnce(n_.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case bu.NO_ERROR:const T=v.getResponseJson();le(Bt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),p(T);break;case bu.TIMEOUT:le(Bt,`RPC '${e}' ${h} timed out`),g(new ge(Y.DEADLINE_EXCEEDED,"Request time out"));break;case bu.HTTP_ERROR:const C=v.getStatus();if(le(Bt,`RPC '${e}' ${h} failed with status:`,C,"response text:",v.getResponseText()),C>0){let F=v.getResponseJson();Array.isArray(F)&&(F=F[0]);const $=F==null?void 0:F.error;if($&&$.status&&$.message){const H=function(se){const re=se.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(re)>=0?re:Y.UNKNOWN}($.status);g(new ge(H,$.message))}else g(new ge(Y.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ge(Y.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{h_:e,streamId:h,P_:v.getLastErrorCode(),T_:v.getLastError()})}}finally{le(Bt,`RPC '${e}' ${h} completed.`)}});const w=JSON.stringify(o);le(Bt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",w,s,15)})}I_(e,t,s){const o=Wd(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=s_(),p=i_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=l.join("");le(Bt,`Creating RPC '${e}' stream ${o}: ${w}`,g);const T=h.createWebChannel(w,g);this.E_(T);let C=!1,F=!1;const $=new LR({Zo:U=>{F?le(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(C||(le(Bt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),C=!0),le(Bt,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Xo:()=>T.close()}),H=(U,se,re)=>{U.listen(se,ne=>{try{re(ne)}catch(oe){setTimeout(()=>{throw oe},0)}})};return H(T,Pa.EventType.OPEN,()=>{F||(le(Bt,`RPC '${e}' stream ${o} transport opened.`),$.__())}),H(T,Pa.EventType.CLOSE,()=>{F||(F=!0,le(Bt,`RPC '${e}' stream ${o} transport closed`),$.u_(),this.d_(T))}),H(T,Pa.EventType.ERROR,U=>{F||(F=!0,So(Bt,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),$.u_(new ge(Y.UNAVAILABLE,"The operation could not be completed")))}),H(T,Pa.EventType.MESSAGE,U=>{var se;if(!F){const re=U.data[0];Ke(!!re,16349);const ne=re,oe=(ne==null?void 0:ne.error)||((se=ne[0])===null||se===void 0?void 0:se.error);if(oe){le(Bt,`RPC '${e}' stream ${o} received error:`,oe);const xe=oe.status;let ye=function(A){const k=vt[A];if(k!==void 0)return U_(k)}(xe),N=oe.message;ye===void 0&&(ye=Y.INTERNAL,N="Unknown error status: "+xe+" with message "+oe.message),F=!0,$.u_(new ge(ye,N)),T.close()}else le(Bt,`RPC '${e}' stream ${o} received:`,re),$.c_(re)}}),H(p,r_.STAT_EVENT,U=>{U.stat===Dd.PROXY?le(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Dd.NOPROXY&&le(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{$.a_()},0),$}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(r){return new zC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,t,s=1e3,o=1.5,l=6e4){this.xi=e,this.timerId=t,this.A_=s,this.R_=o,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-s);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="PersistentStream";class e0{constructor(e,t,s,o,l,h,p,g){this.xi=e,this.S_=s,this.D_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Z_(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.v_===t&&this.z_(s,o)},s=>{e(()=>{const o=new ge(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(o)})})}z_(e,t){const s=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.j_(o))}),this.stream.onMessage(o=>{s(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return le(Iy,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(le(Iy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FR extends e0{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=HC(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ce.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?pr(h.readTime):Ce.min()}(e);return this.listener.Y_(t,s)}Z_(e){const t={};t.database=$d(this.serializer),t.addTarget=function(l,h){let p;const g=h.target;if(p=Fd(g)?{documents:KC(l,g)}:{query:GC(l,g).gt},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=B_(l,h.resumeToken);const v=jd(l,h.expectedCount);v!==null&&(p.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ce.min())>0){p.readTime=ec(l,h.snapshotVersion.toTimestamp());const v=jd(l,h.expectedCount);v!==null&&(p.expectedCount=v)}return p}(this.serializer,e);const s=YC(this.serializer,e);s&&(t.labels=s),this.Q_(t)}X_(e){const t={};t.database=$d(this.serializer),t.removeTarget=e,this.Q_(t)}}class UR extends e0{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=qC(e.writeResults,e.commitTime),s=pr(e.commitTime);return this.listener.ra(s,t)}ia(){const e={};e.database=$d(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>WC(this.serializer,s))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{}class zR extends jR{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.zo(e,zd(t,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(Y.UNKNOWN,l.toString())})}Yo(e,t,s,o,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,p])=>this.connection.Yo(e,zd(t,s),o,h,p,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(Y.UNKNOWN,h.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class BR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(zr(t),this.ua=!1):le("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="RemoteStore";class $R{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(h=>{s.enqueueAndForget(async()=>{Ss(this)&&(le(_s,"Restarting streams for network reachability change."),await async function(g){const v=Ae(g);v.da.add(4),await rl(v),v.Va.set("Unknown"),v.da.delete(4),await Tc(v)}(this))})}),this.Va=new BR(s,o)}}async function Tc(r){if(Ss(r))for(const e of r.Aa)await e(!0)}async function rl(r){for(const e of r.Aa)await e(!1)}function t0(r,e){const t=Ae(r);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),Pf(t)?xf(t):zo(t).N_()&&Af(t,e))}function Rf(r,e){const t=Ae(r),s=zo(t);t.Ea.delete(e),s.N_()&&n0(t,e),t.Ea.size===0&&(s.N_()?s.k_():Ss(t)&&t.Va.set("Unknown"))}function Af(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zo(r).Z_(e)}function n0(r,e){r.ma.Ke(e),zo(r).X_(e)}function xf(r){r.ma=new MC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),zo(r).start(),r.Va.ca()}function Pf(r){return Ss(r)&&!zo(r).O_()&&r.Ea.size>0}function Ss(r){return Ae(r).da.size===0}function r0(r){r.ma=void 0}async function HR(r){r.Va.set("Online")}async function WR(r){r.Ea.forEach((e,t)=>{Af(r,e)})}async function qR(r,e){r0(r),Pf(r)?(r.Va.Pa(e),xf(r)):r.Va.set("Unknown")}async function KR(r,e,t){if(r.Va.set("Online"),e instanceof z_&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const p of l.targetIds)o.Ea.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ea.delete(p),o.ma.removeTarget(p))}(r,e)}catch(s){le(_s,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await nc(r,s)}else if(e instanceof Lu?r.ma.Xe(e):e instanceof j_?r.ma.ot(e):r.ma.nt(e),!t.isEqual(Ce.min()))try{const s=await J_(r.localStore);t.compareTo(s)>=0&&await function(l,h){const p=l.ma.It(h);return p.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ea.get(v);w&&l.Ea.set(v,w.withResumeToken(g.resumeToken,h))}}),p.targetMismatches.forEach((g,v)=>{const w=l.Ea.get(g);if(!w)return;l.Ea.set(g,w.withResumeToken(Mt.EMPTY_BYTE_STRING,w.snapshotVersion)),n0(l,g);const T=new Ii(w.target,g,v,w.sequenceNumber);Af(l,T)}),l.remoteSyncer.applyRemoteEvent(p)}(r,t)}catch(s){le(_s,"Failed to raise snapshot:",s),await nc(r,s)}}async function nc(r,e,t){if(!jo(e))throw e;r.da.add(1),await rl(r),r.Va.set("Offline"),t||(t=()=>J_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{le(_s,"Retrying IndexedDB access"),await t(),r.da.delete(1),await Tc(r)})}function i0(r,e){return e().catch(t=>nc(r,t,e))}async function Ic(r){const e=Ae(r),t=Li(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:ff;for(;GR(e);)try{const o=await PR(e.localStore,s);if(o===null){e.Ia.length===0&&t.k_();break}s=o.batchId,QR(e,o)}catch(o){await nc(e,o)}s0(e)&&o0(e)}function GR(r){return Ss(r)&&r.Ia.length<10}function QR(r,e){r.Ia.push(e);const t=Li(r);t.N_()&&t.ea&&t.ta(e.mutations)}function s0(r){return Ss(r)&&!Li(r).O_()&&r.Ia.length>0}function o0(r){Li(r).start()}async function YR(r){Li(r).ia()}async function XR(r){const e=Li(r);for(const t of r.Ia)e.ta(t.mutations)}async function JR(r,e,t){const s=r.Ia.shift(),o=_f.from(s,e,t);await i0(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Ic(r)}async function ZR(r,e){e&&Li(r).ea&&await async function(s,o){if(function(h){return OC(h)&&h!==Y.ABORTED}(o.code)){const l=s.Ia.shift();Li(s).L_(),await i0(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Ic(s)}}(r,e),s0(r)&&o0(r)}async function Sy(r,e){const t=Ae(r);t.asyncQueue.verifyOperationInProgress(),le(_s,"RemoteStore received new credentials");const s=Ss(t);t.da.add(3),await rl(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await Tc(t)}async function eA(r,e){const t=Ae(r);e?(t.da.delete(2),await Tc(t)):e||(t.da.add(2),await rl(t),t.Va.set("Unknown"))}function zo(r){return r.fa||(r.fa=function(t,s,o){const l=Ae(t);return l.oa(),new FR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{e_:HR.bind(null,r),n_:WR.bind(null,r),i_:qR.bind(null,r),Y_:KR.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Pf(r)?xf(r):r.Va.set("Unknown")):(await r.fa.stop(),r0(r))})),r.fa}function Li(r){return r.ga||(r.ga=function(t,s,o){const l=Ae(t);return l.oa(),new UR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:YR.bind(null,r),i_:ZR.bind(null,r),na:XR.bind(null,r),ra:JR.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await Ic(r)):(await r.ga.stop(),r.Ia.length>0&&(le(_s,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,p=new kf(e,t,h,o,l);return p.start(s),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nf(r,e){if(zr("AsyncQueue",`${e}: ${r}`),jo(r))return new ge(Y.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{static emptySet(e){return new To(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||we.comparator(t.key,s.key):(t,s)=>we.comparator(t.key,s.key),this.keyedMap=ka(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof To)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new To;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.pa=new lt(we.comparator)}track(e){const t=e.doc.key,s=this.pa.get(t);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(t,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(t):e.type===1&&s.type===2?this.pa=this.pa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,s)=>{e.push(s)}),e}}class ko{constructor(e,t,s,o,l,h,p,g,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach(p=>{h.push({type:0,doc:p})}),new ko(e,t,To.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class nA{constructor(){this.queries=Ry(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ae(t),l=o.queries;o.queries=Ry(),l.forEach((h,p)=>{for(const g of p.Sa)g.onError(s)})})(this,new ge(Y.ABORTED,"Firestore shutting down"))}}function Ry(){return new Ts(r=>R_(r),mc)}async function bf(r,e){const t=Ae(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Da()&&e.va()&&(s=2):(l=new tA,s=e.va()?0:1);try{switch(s){case 0:l.ba=await t.onListen(o,!0);break;case 1:l.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=Nf(h,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.Sa.push(e),e.Fa(t.onlineState),l.ba&&e.Ma(l.ba)&&Vf(t)}async function Df(r,e){const t=Ae(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.va()?0:1:!l.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function rA(r,e){const t=Ae(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const p of h.Sa)p.Ma(o)&&(s=!0);h.ba=o}}s&&Vf(t)}function iA(r,e,t){const s=Ae(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Vf(r){r.Ca.forEach(e=>{e.next()})}var qd,Ay;(Ay=qd||(qd={})).xa="default",Ay.Cache="cache";class Of{constructor(e,t,s){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ko(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const s=t!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==qd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this.key=e}}class l0{constructor(e){this.key=e}}class sA{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Oe(),this.mutatedKeys=Oe(),this.Za=A_(e),this.Xa=new To(this.Za)}get eu(){return this.Ha}tu(e,t){const s=t?t.nu:new Cy,o=t?t.Xa:this.Xa;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,T)=>{const C=o.get(w),F=gc(this.query,T)?T:null,$=!!C&&this.mutatedKeys.has(C.key),H=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let U=!1;C&&F?C.data.isEqual(F.data)?$!==H&&(s.track({type:3,doc:F}),U=!0):this.ru(C,F)||(s.track({type:2,doc:F}),U=!0,(g&&this.Za(F,g)>0||v&&this.Za(F,v)<0)&&(p=!0)):!C&&F?(s.track({type:0,doc:F}),U=!0):C&&!F&&(s.track({type:1,doc:C}),U=!0,(g||v)&&(p=!0)),U&&(F?(h=h.add(F),l=H?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{Xa:h,nu:s,Cs:p,mutatedKeys:l}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const h=e.nu.wa();h.sort((w,T)=>function(F,$){const H=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:U})}};return H(F)-H($)}(w.type,T.type)||this.Za(w.doc,T.doc)),this.iu(s),o=o!=null&&o;const p=t&&!o?this.su():[],g=this.Ya.size===0&&this.current&&!o?1:0,v=g!==this.Ja;return this.Ja=g,h.length!==0||v?{snapshot:new ko(this.query,e.Xa,l,h,e.mutatedKeys,g===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:p}:{ou:p}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Cy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Oe(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const t=[];return e.forEach(s=>{this.Ya.has(s)||t.push(new l0(s))}),this.Ya.forEach(s=>{e.has(s)||t.push(new a0(s))}),t}au(e){this.Ha=e.$s,this.Ya=Oe();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return ko.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Lf="SyncEngine";class oA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class aA{constructor(e){this.key=e,this.cu=!1}}class lA{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.lu={},this.hu=new Ts(p=>R_(p),mc),this.Pu=new Map,this.Tu=new Set,this.Iu=new lt(we.comparator),this.Eu=new Map,this.du=new Tf,this.Au={},this.Ru=new Map,this.Vu=Po.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function uA(r,e,t=!0){const s=p0(r);let o;const l=s.hu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.uu()):o=await u0(s,e,t,!0),o}async function cA(r,e){const t=p0(r);await u0(t,e,!0,!1)}async function u0(r,e,t,s){const o=await kR(r.localStore,fr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let p;return s&&(p=await hA(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&t0(r.remoteStore,o),p}async function hA(r,e,t,s,o){r.fu=(T,C,F)=>async function(H,U,se,re){let ne=U.view.tu(se);ne.Cs&&(ne=await _y(H.localStore,U.query,!1).then(({documents:N})=>U.view.tu(N,ne)));const oe=re&&re.targetChanges.get(U.targetId),xe=re&&re.targetMismatches.get(U.targetId)!=null,ye=U.view.applyChanges(ne,H.isPrimaryClient,oe,xe);return Py(H,U.targetId,ye.ou),ye.snapshot}(r,T,C,F);const l=await _y(r.localStore,e,!0),h=new sA(e,l.$s),p=h.tu(l.documents),g=nl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),v=h.applyChanges(p,r.isPrimaryClient,g);Py(r,t,v.ou);const w=new oA(e,t,h);return r.hu.set(e,w),r.Pu.has(t)?r.Pu.get(t).push(e):r.Pu.set(t,[e]),v.snapshot}async function dA(r,e,t){const s=Ae(r),o=s.hu.get(e),l=s.Pu.get(o.targetId);if(l.length>1)return s.Pu.set(o.targetId,l.filter(h=>!mc(h,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Hd(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Rf(s.remoteStore,o.targetId),Kd(s,o.targetId)}).catch(Uo)):(Kd(s,o.targetId),await Hd(s.localStore,o.targetId,!0))}async function fA(r,e){const t=Ae(r),s=t.hu.get(e),o=t.Pu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Rf(t.remoteStore,s.targetId))}async function pA(r,e,t){const s=EA(r);try{const o=await function(h,p){const g=Ae(h),v=St.now(),w=p.reduce((F,$)=>F.add($.key),Oe());let T,C;return g.persistence.runTransaction("Locally write mutations","readwrite",F=>{let $=Br(),H=Oe();return g.Bs.getEntries(F,w).next(U=>{$=U,$.forEach((se,re)=>{re.isValidDocument()||(H=H.add(se))})}).next(()=>g.localDocuments.getOverlayedDocuments(F,$)).next(U=>{T=U;const se=[];for(const re of p){const ne=kC(re,T.get(re.key).overlayedDocument);ne!=null&&se.push(new Is(re.key,ne,__(ne.value.mapValue),Lr.exists(!0)))}return g.mutationQueue.addMutationBatch(F,v,se,p)}).next(U=>{C=U;const se=U.applyToLocalDocumentSet(T,H);return g.documentOverlayCache.saveOverlays(F,U.batchId,se)})}).then(()=>({batchId:C.batchId,changes:P_(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,p,g){let v=h.Au[h.currentUser.toKey()];v||(v=new lt(Ne)),v=v.insert(p,g),h.Au[h.currentUser.toKey()]=v}(s,o.batchId,t),await il(s,o.changes),await Ic(s.remoteStore)}catch(o){const l=Nf(o,"Failed to persist write");t.reject(l)}}async function c0(r,e){const t=Ae(r);try{const s=await AR(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Eu.get(l);h&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.cu=!0:o.modifiedDocuments.size>0?Ke(h.cu,14607):o.removedDocuments.size>0&&(Ke(h.cu,42227),h.cu=!1))}),await il(t,s,e)}catch(s){await Uo(s)}}function xy(r,e,t){const s=Ae(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.hu.forEach((l,h)=>{const p=h.view.Fa(e);p.snapshot&&o.push(p.snapshot)}),function(h,p){const g=Ae(h);g.onlineState=p;let v=!1;g.queries.forEach((w,T)=>{for(const C of T.Sa)C.Fa(p)&&(v=!0)}),v&&Vf(g)}(s.eventManager,e),o.length&&s.lu.Y_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function mA(r,e,t){const s=Ae(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let h=new lt(we.comparator);h=h.insert(l,Ht.newNoDocument(l,Ce.min()));const p=Oe().add(l),g=new wc(Ce.min(),new Map,new lt(Ne),h,p);await c0(s,g),s.Iu=s.Iu.remove(l),s.Eu.delete(e),Mf(s)}else await Hd(s.localStore,e,!1).then(()=>Kd(s,e,t)).catch(Uo)}async function gA(r,e){const t=Ae(r),s=e.batch.batchId;try{const o=await RR(t.localStore,e);d0(t,s,null),h0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await il(t,o)}catch(o){await Uo(o)}}async function yA(r,e,t){const s=Ae(r);try{const o=await function(h,p){const g=Ae(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let w;return g.mutationQueue.lookupMutationBatch(v,p).next(T=>(Ke(T!==null,37113),w=T.keys(),g.mutationQueue.removeMutationBatch(v,T))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,w,p)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w)).next(()=>g.localDocuments.getDocuments(v,w))})}(s.localStore,e);d0(s,e,t),h0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await il(s,o)}catch(o){await Uo(o)}}function h0(r,e){(r.Ru.get(e)||[]).forEach(t=>{t.resolve()}),r.Ru.delete(e)}function d0(r,e,t){const s=Ae(r);let o=s.Au[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Au[s.currentUser.toKey()]=o}}function Kd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),t&&r.lu.gu(s,t);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||f0(r,s)})}function f0(r,e){r.Tu.delete(e.path.canonicalString());const t=r.Iu.get(e);t!==null&&(Rf(r.remoteStore,t),r.Iu=r.Iu.remove(e),r.Eu.delete(t),Mf(r))}function Py(r,e,t){for(const s of t)s instanceof a0?(r.du.addReference(s.key,e),vA(r,s)):s instanceof l0?(le(Lf,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||f0(r,s.key)):Te(19791,{pu:s})}function vA(r,e){const t=e.key,s=t.path.canonicalString();r.Iu.get(t)||r.Tu.has(s)||(le(Lf,"New document in limbo: "+t),r.Tu.add(s),Mf(r))}function Mf(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const t=new we(st.fromString(e)),s=r.Vu.next();r.Eu.set(s,new aA(t)),r.Iu=r.Iu.insert(t,s),t0(r.remoteStore,new Ii(fr(pc(t.path)),s,"TargetPurposeLimboResolution",cc.le))}}async function il(r,e,t){const s=Ae(r),o=[],l=[],h=[];s.hu.isEmpty()||(s.hu.forEach((p,g)=>{h.push(s.fu(g,e,t).then(v=>{var w;if((v||t)&&s.isPrimaryClient){const T=v?!v.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(v){o.push(v);const T=Sf.Rs(g.targetId,v);l.push(T)}}))}),await Promise.all(h),s.lu.Y_(o),await async function(g,v){const w=Ae(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>K.forEach(v,C=>K.forEach(C.ds,F=>w.persistence.referenceDelegate.addReference(T,C.targetId,F)).next(()=>K.forEach(C.As,F=>w.persistence.referenceDelegate.removeReference(T,C.targetId,F)))))}catch(T){if(!jo(T))throw T;le(Cf,"Failed to update sequence numbers: "+T)}for(const T of v){const C=T.targetId;if(!T.fromCache){const F=w.xs.get(C),$=F.snapshotVersion,H=F.withLastLimboFreeSnapshotVersion($);w.xs=w.xs.insert(C,H)}}}(s.localStore,l))}async function _A(r,e){const t=Ae(r);if(!t.currentUser.isEqual(e)){le(Lf,"User change. New user:",e.toKey());const s=await X_(t.localStore,e);t.currentUser=e,function(l,h){l.Ru.forEach(p=>{p.forEach(g=>{g.reject(new ge(Y.CANCELLED,h))})}),l.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await il(t,s.ks)}}function wA(r,e){const t=Ae(r),s=t.Eu.get(e);if(s&&s.cu)return Oe().add(s.key);{let o=Oe();const l=t.Pu.get(e);if(!l)return o;for(const h of l){const p=t.hu.get(h);o=o.unionWith(p.view.eu)}return o}}function p0(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=c0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mA.bind(null,e),e.lu.Y_=rA.bind(null,e.eventManager),e.lu.gu=iA.bind(null,e.eventManager),e}function EA(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yA.bind(null,e),e}class rc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ec(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return CR(this.persistence,new TR,e.initialUser,this.serializer)}Su(e){return new Y_(If.fi,this.serializer)}bu(e){return new bR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rc.provider={build:()=>new rc};class TA extends rc{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Ke(this.persistence.referenceDelegate instanceof tc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new aR(s,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new Y_(s=>tc.fi(s,t),this.serializer)}}class Gd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>xy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=_A.bind(null,this.syncEngine),await eA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nA}()}createDatastore(e){const t=Ec(e.databaseInfo.databaseId),s=function(l){return new MR(l)}(e.databaseInfo);return function(l,h,p,g){return new zR(l,h,p,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,h,p){return new $R(s,o,l,h,p)}(this.localStore,this.datastore,e.asyncQueue,t=>xy(this.syncEngine,t,0),function(){return Ty.C()?new Ty:new DR}())}createSyncEngine(e,t){return function(o,l,h,p,g,v,w){const T=new lA(o,l,h,p,g,v);return w&&(T.mu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ae(o);le(_s,"RemoteStore shutting down."),l.da.add(5),await rl(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Gd.provider={build:()=>new Gd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="FirestoreClient";class IA{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=$t.UNAUTHENTICATED,this.clientId=u_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{le(Mi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(le(Mi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Nf(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function vd(r,e){r.asyncQueue.verifyOperationInProgress(),le(Mi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await X_(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function ky(r,e){r.asyncQueue.verifyOperationInProgress();const t=await SA(r);le(Mi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>Sy(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>Sy(e.remoteStore,o)),r._onlineComponents=e}async function SA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){le(Mi,"Using user provided OfflineComponentProvider");try{await vd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;So("Error using user provided cache. Falling back to memory cache: "+t),await vd(r,new rc)}}else le(Mi,"Using default OfflineComponentProvider"),await vd(r,new TA(void 0));return r._offlineComponents}async function m0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(le(Mi,"Using user provided OnlineComponentProvider"),await ky(r,r._uninitializedComponentsProvider._online)):(le(Mi,"Using default OnlineComponentProvider"),await ky(r,new Gd))),r._onlineComponents}function CA(r){return m0(r).then(e=>e.syncEngine)}async function ic(r){const e=await m0(r),t=e.eventManager;return t.onListen=uA.bind(null,e.syncEngine),t.onUnlisten=dA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fA.bind(null,e.syncEngine),t}function RA(r,e,t={}){const s=new Or;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,p,g,v){const w=new Ff({next:C=>{w.xu(),h.enqueueAndForget(()=>Df(l,T));const F=C.docs.has(p);!F&&C.fromCache?v.reject(new ge(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&C.fromCache&&g&&g.source==="server"?v.reject(new ge(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(C)},error:C=>v.reject(C)}),T=new Of(pc(p.path),w,{includeMetadataChanges:!0,Qa:!0});return bf(l,T)}(await ic(r),r.asyncQueue,e,t,s)),s.promise}function AA(r,e,t={}){const s=new Or;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,p,g,v){const w=new Ff({next:C=>{w.xu(),h.enqueueAndForget(()=>Df(l,T)),C.fromCache&&g.source==="server"?v.reject(new ge(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(C)},error:C=>v.reject(C)}),T=new Of(p,w,{includeMetadataChanges:!0,Qa:!0});return bf(l,T)}(await ic(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(r,e,t){if(!t)throw new ge(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function xA(r,e,t,s){if(e===!0&&s===!0)throw new ge(Y.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function by(r){if(!we.isDocumentKey(r))throw new ge(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Dy(r){if(we.isDocumentKey(r))throw new ge(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Uf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function mr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ge(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uf(r);throw new ge(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="firestore.googleapis.com",Vy=!0;class Oy{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v0,this.ssl=Vy}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Vy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sR)throw new ge(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g0((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Oy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new VS;switch(s.type){case"firstParty":return new FS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Ny.get(t);s&&(le("ComponentProvider","Removing Datastore"),Ny.delete(t),s.terminate())}(this),Promise.resolve()}}function PA(r,e,t,s={}){var o;r=mr(r,Sc);const l=Oo(e),h=r._getSettings(),p=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${t}`;l&&(mv(`https://${g}`),gv("Firestore",!0)),h.host!==v0&&h.host!==g&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:g,ssl:l,emulatorOptions:s});if(!Ni(v,p)&&(r._setSettings(v),s.mockUserToken)){let w,T;if(typeof s.mockUserToken=="string")w=s.mockUserToken,T=$t.MOCK_USER;else{w=rT(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new ge(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new $t(C)}r._authCredentials=new OS(new a_(w,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new sl(this.firestore,e,this._query)}}class ln{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class ki extends sl{constructor(e,t,s){super(e,t,pc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new we(e))}withConverter(e){return new ki(this.firestore,e,this._path)}}function Ly(r,e,...t){if(r=qt(r),y0("collection","path",e),r instanceof Sc){const s=st.fromString(e,...t);return Dy(s),new ki(r,null,s)}{if(!(r instanceof ln||r instanceof ki))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...t));return Dy(s),new ki(r.firestore,null,s)}}function _d(r,e,...t){if(r=qt(r),arguments.length===1&&(e=u_.newId()),y0("doc","path",e),r instanceof Sc){const s=st.fromString(e,...t);return by(s),new ln(r,null,new we(s))}{if(!(r instanceof ln||r instanceof ki))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...t));return by(s),new ln(r.firestore,r instanceof ki?r.converter:null,new we(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="AsyncQueue";class Fy{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Z_(this,"async_queue_retry"),this.rc=()=>{const s=yd();s&&le(My,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const t=yd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=yd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Or;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!jo(e))throw e;le(My,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,zr("INTERNAL UNHANDLED ERROR: ",Uy(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=t,t}enqueueAfterDelay(e,t,s){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=kf.createAndSchedule(this,e,t,s,l=>this.uc(l));return this.Zu.push(o),o}oc(){this.Xu&&Te(47125,{cc:Uy(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function Uy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class No extends Sc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Fy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fy(e),this._firestoreClient=void 0,await e}}}function kA(r,e){const t=typeof r=="object"?r:wv(),s=typeof r=="string"?r:Gu,o=tf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=tT("firestore");l&&PA(o,...l)}return o}function Cc(r){if(r._terminated)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||NA(r),r._firestoreClient}function NA(r){var e,t,s;const o=r._freezeSettings(),l=function(p,g,v,w){return new ZS(p,g,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,g0(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new IA(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bo(Mt.fromBase64String(e))}catch(t){throw new ge(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bo(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=/^__.*__$/;class _0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Is(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function w0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ic:r})}}class xc{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new xc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:s,Rc:!1});return o.Vc(e),o}mc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:s,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return sc(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(w0(this.Ic)&&bA.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class DA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ec(e)}bc(e,t,s,o=!1){return new xc({Ic:e,methodName:t,wc:s,path:Lt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function VA(r){const e=r._freezeSettings(),t=Ec(r._databaseId);return new DA(r._databaseId,!!e.ignoreUndefinedProperties,t)}class Pc extends Ac{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pc}}function OA(r,e,t){return new xc({Ic:3,wc:e.settings.wc,methodName:r._methodName,Rc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Bf extends Ac{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){const t=OA(this,e,!0),s=this.Sc.map(l=>ol(l,t)),o=new xo(s);return new RC(e.path,o)}isEqual(e){return e instanceof Bf&&Ni(this.Sc,e.Sc)}}function LA(r,e,t,s){const o=r.bc(1,e,t);T0("Data must be an object, but it was:",o,s);const l=[],h=gn.empty();Fi(s,(g,v)=>{const w=$f(e,g,t);v=qt(v);const T=o.mc(w);if(v instanceof Pc)l.push(w);else{const C=ol(v,T);C!=null&&(l.push(w),h.set(w,C))}});const p=new Yn(l);return new _0(h,p,o.fieldTransforms)}function MA(r,e,t,s,o,l){const h=r.bc(1,e,t),p=[zy(e,s,t)],g=[o];if(l.length%2!=0)throw new ge(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)p.push(zy(e,l[C])),g.push(l[C+1]);const v=[],w=gn.empty();for(let C=p.length-1;C>=0;--C)if(!jA(v,p[C])){const F=p[C];let $=g[C];$=qt($);const H=h.mc(F);if($ instanceof Pc)v.push(F);else{const U=ol($,H);U!=null&&(v.push(F),w.set(F,U))}}const T=new Yn(v);return new _0(w,T,h.fieldTransforms)}function ol(r,e){if(E0(r=qt(r)))return T0("Unsupported field value:",e,r),FA(r,e);if(r instanceof Ac)return function(s,o){if(!w0(o.Ic))throw o.gc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const p of s){let g=ol(p,o.fc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=qt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return IC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=St.fromDate(s);return{timestampValue:ec(o.serializer,l)}}if(s instanceof St){const l=new St(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ec(o.serializer,l)}}if(s instanceof jf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof bo)return{bytesValue:B_(o.serializer,s._byteString)};if(s instanceof ln){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.gc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ef(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof zf)return function(h,p){return{mapValue:{fields:{[y_]:{stringValue:v_},[Qu]:{arrayValue:{values:h.toArray().map(v=>{if(typeof v!="number")throw p.gc("VectorValues must only contain numeric values.");return vf(p.serializer,v)})}}}}}}(s,o);throw o.gc(`Unsupported field value: ${Uf(s)}`)}(r,e)}function FA(r,e){const t={};return h_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(r,(s,o)=>{const l=ol(o,e.Ac(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function E0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof St||r instanceof jf||r instanceof bo||r instanceof ln||r instanceof Ac||r instanceof zf)}function T0(r,e,t){if(!E0(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=Uf(t);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function zy(r,e,t){if((e=qt(e))instanceof Rc)return e._internalPath;if(typeof e=="string")return $f(r,e);throw sc("Field path arguments must be of type string or ",r,!1,void 0,t)}const UA=new RegExp("[~\\*/\\[\\]]");function $f(r,e,t){if(e.search(UA)>=0)throw sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Rc(...e.split("."))._internalPath}catch{throw sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function sc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ge(Y.INVALID_ARGUMENT,p+r+g)}function jA(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(S0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zA extends I0{data(){return super.data()}}function S0(r,e){return typeof e=="string"?$f(r,e):e instanceof Rc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ge(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BA{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Fi(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Qu].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>mt(h.doubleValue));return new zf(l)}convertGeoPoint(e){return new jf(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=dc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){const t=Di(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=st.fromString(e);Ke(G_(s),9688,{name:e});const o=new Wa(s.get(1),s.get(3)),l=new we(s.popFirst(5));return o.isEqual(t)||zr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class R0 extends I0{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(S0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Mu extends R0{data(e={}){return super.data(e)}}class A0{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ba(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Mu(this._firestore,this._userDataWriter,s.key,s,new ba(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(p=>{const g=new Mu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new ba(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>l||p.type!==3).map(p=>{const g=new Mu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new ba(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return p.type!==0&&(v=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:$A(p.type),doc:g,oldIndex:v,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $A(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(r){r=mr(r,ln);const e=mr(r.firestore,No);return RA(Cc(e),r._key).then(t=>x0(e,r,t))}class Hf extends BA{constructor(e){super(),this.firestore=e}convertBytes(e){return new bo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function By(r){r=mr(r,sl);const e=mr(r.firestore,No),t=Cc(e),s=new Hf(e);return C0(r._query),AA(t,r._query).then(o=>new A0(e,s,r,o))}function $y(r,e,t,...s){r=mr(r,ln);const o=mr(r.firestore,No),l=VA(o);let h;return h=typeof(e=qt(e))=="string"||e instanceof Rc?MA(l,"updateDoc",r._key,e,t,s):LA(l,"updateDoc",r._key,e),qA(o,[h.toMutation(r._key,Lr.exists(!0))])}function WA(r,...e){var t,s,o;r=qt(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||jy(e[h])||(l=e[h],h++);const p={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(jy(e[h])){const T=e[h];e[h]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[h+1]=(s=T.error)===null||s===void 0?void 0:s.bind(T),e[h+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let g,v,w;if(r instanceof ln)v=mr(r.firestore,No),w=pc(r._key.path),g={next:T=>{e[h]&&e[h](x0(v,r,T))},error:e[h+1],complete:e[h+2]};else{const T=mr(r,sl);v=mr(T.firestore,No),w=T._query;const C=new Hf(v);g={next:F=>{e[h]&&e[h](new A0(v,C,T,F))},error:e[h+1],complete:e[h+2]},C0(r._query)}return function(C,F,$,H){const U=new Ff(H),se=new Of(F,U,$);return C.asyncQueue.enqueueAndForget(async()=>bf(await ic(C),se)),()=>{U.xu(),C.asyncQueue.enqueueAndForget(async()=>Df(await ic(C),se))}}(Cc(v),w,p,g)}function qA(r,e){return function(s,o){const l=new Or;return s.asyncQueue.enqueueAndForget(async()=>pA(await CA(s),o,l)),l.promise}(Cc(r),e)}function x0(r,e,t){const s=t.docs.get(e._key),o=new Hf(r);return new R0(r,o,e._key,s,new ba(t.hasPendingWrites,t.fromCache),e.converter)}function KA(...r){return new Bf("arrayUnion",r)}(function(e,t=!0){(function(o){Fo=o})(Lo),Io(new gs("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),p=new No(new LS(s.getProvider("auth-internal")),new US(h,s.getProvider("app-check-internal")),function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ge(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(v.options.projectId,w)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p},"PUBLIC").setMultipleInstances(!0)),xi($g,Hg,e),xi($g,Hg,"esm2017")})();const GA=()=>{const r=Vo();return q.useEffect(()=>{if(r.hash){const e=r.hash.substring(1),t=document.getElementById(e);t&&setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"start"})},100)}},[r.hash]),q.useEffect(()=>{const e=document.querySelectorAll(".revealable"),t=new IntersectionObserver((s,o)=>{s.forEach(l=>{l.isIntersecting&&(l.target.style.opacity=1,o.unobserve(l.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return e.forEach(s=>{t.observe(s)}),()=>{e.forEach(s=>{t.unobserve(s)})}},[]),x.jsxs(x.Fragment,{children:[x.jsxs("section",{id:"home",className:"relative bg-custom-beige text-gray-800 py-24 px-6 md:px-10 lg:px-16 text-center rounded-lg mx-4 mb-2 shadow-lg overflow-hidden animate-fade-in section-hover",children:[x.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:x.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[x.jsx("defs",{children:x.jsx("pattern",{id:"dot-pattern",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:x.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"#FFC982"})})}),x.jsx("rect",{x:"0",y:"0",width:"100",height:"100",fill:"url(#dot-pattern)"})]})}),x.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[x.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 leading-tight animate-fade-in-down drop-shadow-md",children:"RNTea: Rate, Navigate, Trust."}),x.jsx("p",{className:"text-xl md:text-2xl mb-10 text-gray-700 animate-fade-in-up",children:" Do you really trust your Doctors? Let's hear from experienced RNs for a change. "}),x.jsx(yi,{to:"/reviews",className:"bg-white text-gray-800 hover:bg-gray-100 font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-xl border border-gray-200 animate-fade-in-up antialiased",children:" View Some Reviews "})]})]}),x.jsx("section",{id:"about",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 mt-2 mb-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:x.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-center gap-12",children:[x.jsx("div",{className:"md:w-1/2 flex justify-center order-2 md:order-1 animate-slide-in-left",children:x.jsx("img",{src:"Express-collage.jpg",alt:"Collage of diverse medical professionals",className:"rounded-lg shadow-xl border-4 border-custom-beige w-full max-w-md object-cover",onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/400x300/F0F0F0/888888?text=Image+Not+Loaded"}})}),x.jsxs("div",{className:"md:w-1/2 text-center md:text-left order-1 md:order-2 animate-slide-in-right",children:[x.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-6",children:"Our Philosophy"}),x.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-4 antialiased",children:"At RNTea, we believe in transparency and community to help you find the best care. Discover insights, share experiences, and make informed decisions with confidence."}),x.jsx("p",{className:"text-lg text-gray-700 leading-relaxed antialiased",children:"Our platform empowers Registered Nurses to share their honest experiences, providing a unique and invaluable perspective on healthcare providers. We aim to build a trusted resource for patients seeking reliable and empathetic care, while also helping nurses navigate career decisions whether it be short term travel contracts or a potential employer."}),x.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mt-4 font-semibold antialiased",children:"Now spill some RNTea!"})]})]})}),x.jsx("section",{id:"reviews",className:"bg-custom-beige py-20 px-6 md:px-10 lg:px-16 mx-4 my-1 rounded-lg shadow-lg section-hover",children:x.jsxs("div",{className:"container mx-auto",children:[x.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-16 animate-fade-in-down revealable",children:"Community Reviews"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10",children:[x.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transform transition duration-300 hover:scale-105 hover:shadow-xl border border-gray-200 animate-scale-in revealable",style:{animationDelay:"0.1s"},children:x.jsxs("div",{className:"p-6",children:[x.jsxs("div",{className:"flex items-center mb-4",children:[x.jsx("span",{className:"text-yellow-500 text-2xl mr-2",children:"★★★★★"}),x.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Dr. Sarah Lee"})]}),x.jsx("p",{className:"text-gray-600 text-base mb-4",children:'"Dr. Lee is incredibly attentive and truly listens to patient concerns. Her communication with nursing staff is excellent, leading to coordinated and effective care. Highly recommend!"'}),x.jsx("p",{className:"text-gray-500 text-sm italic",children:"- RN, John Doe (Emergency Department)"})]})}),x.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transform transition duration-300 hover:scale-105 hover:shadow-xl border border-gray-200 animate-scale-in revealable",style:{animationDelay:"0.2s"},children:x.jsxs("div",{className:"p-6",children:[x.jsxs("div",{className:"flex items-center mb-4",children:[x.jsx("span",{className:"text-yellow-500 text-2xl mr-2",children:"★★★★☆"}),x.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Dr. Michael Chen"})]}),x.jsx("p",{className:"text-gray-600 text-base mb-4",children:'"Good bedside manner, but sometimes a bit slow on charting updates. Overall, a competent physician who cares about patient outcomes."'}),x.jsx("p",{className:"text-gray-500 text-sm italic",children:"- RN, Jane Smith (ICU)"})]})}),x.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transform transition duration-300 hover:scale-105 hover:shadow-xl border border-gray-200 animate-scale-in revealable",style:{animationDelay:"0.3s"},children:x.jsxs("div",{className:"p-6",children:[x.jsxs("div",{className:"flex items-center mb-4",children:[x.jsx("span",{className:"text-yellow-500 text-2xl mr-2",children:"★★★☆☆"}),x.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Dr. Emily White"})]}),x.jsx("p",{className:"text-gray-600 text-base mb-4",children:'"Knowledgeable, but can be a bit rushed during rounds. Improvement in team communication would greatly enhance efficiency."'}),x.jsx("p",{className:"text-gray-500 text-sm italic",children:"- RN, David Brown (Surgical Unit)"})]})})]})]})}),x.jsx("section",{id:"contact",className:"bg-white py-20 px-6 md:px-10 lg:px-16 mx-4 my-1 rounded-lg shadow-lg section-hover scroll-margin-top-adjusted revealable",children:x.jsxs("div",{className:"container mx-auto",children:[x.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 text-center mb-16 animate-fade-in-down",children:"Contact Us!"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[x.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-left",children:[x.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Send us a Message"}),x.jsxs("form",{children:[x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{htmlFor:"your-name",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Name"}),x.jsx("input",{type:"text",id:"your-name",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"John Doe"})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{htmlFor:"your-email",className:"block text-gray-700 text-sm font-medium mb-2",children:"Your Email"}),x.jsx("input",{type:"email",id:"your-email",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"you@example.com"})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{htmlFor:"subject",className:"block text-gray-700 text-sm font-medium mb-2",children:"Subject"}),x.jsx("input",{type:"text",id:"subject",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Regarding a review..."})]}),x.jsxs("div",{className:"mb-6",children:[x.jsxs("label",{htmlFor:"your-message",className:"block text-gray-700 text-sm font-medium mb-2",children:["Your Message ",x.jsx("span",{className:"text-gray-500",children:"(optional)"})]}),x.jsx("textarea",{id:"your-message",rows:"5",className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-custom-beige focus:border-transparent",placeholder:"Share your experience... (optional)"})]}),x.jsxs("div",{className:"mb-6 bg-gray-200 p-4 rounded text-center text-gray-600 text-sm",children:["[ReCAPTCHA Placeholder]",x.jsx("p",{className:"text-xs mt-2",children:"ERROR for site owner: Invalid domain for site key"}),x.jsx("p",{className:"text-xs",children:"reCAPTCHA Privacy - Terms"})]}),x.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-md w-full transition duration-300 ease-in-out",children:"Send Message"})]})]}),x.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg shadow-md animate-slide-in-right",children:[x.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Find Us"}),x.jsxs("div",{className:"mb-8",children:[x.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Email Addresses"}),x.jsxs("div",{className:"flex items-center mb-3",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-700 font-medium",children:"General Questions"}),x.jsx("a",{href:"mailto:questions@rntea.com",className:"text-blue-600 hover:underline",children:"questions@rntea.com"})]})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15.75c-2.648 0-5.195-.429-7.669-1.245a2.793 2.793 0 01-1.342-2.934 11.233 11.233 0 013.744-6.436 2.922 2.922 0 011.644-1.018 10.38 10.38 0 015.894 0 2.922 2.922 0 011.644 1.018 11.233 11.233 0 013.744 6.436 2.793 2.793 0 01-1.342 2.934z"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-700 font-medium",children:"Business Inquiries"}),x.jsx("a",{href:"mailto:business@rntea.com",className:"text-blue-600 hover:underline",children:"business@rntea.com"})]})]})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Connect with Us"}),x.jsxs("div",{className:"flex space-x-6 justify-start",children:[x.jsx("a",{href:"https://facebook.com/rntea",target:"_blank",className:"social-icon-hover text-blue-600 hover:text-blue-700 transition duration-300 transform hover:scale-110",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.271 0-4.192 1.552-4.192 4.615v3.385z"})})}),x.jsx("a",{href:"https://twitter.com/rntea_official",target:"_blank",className:"social-icon-hover text-blue-400 hover:text-blue-500 transition duration-300 transform hover:scale-110",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.791-1.574 2.162-2.722-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.218 0-5.817 2.6-5.817 5.817 0 .455.05.897.138 1.316-4.836-.244-9.135-2.56-12.008-6.075-.5.855-.78 1.849-.78 2.923 0 2.01.996 3.78 2.502 4.829-.922-.028-1.79-.28-2.54-.66v.073c0 2.81 1.997 5.148 4.637 5.682-.485.131-.996.202-1.52.202-.371 0-.73-.035-1.076-.103.736 2.302 2.863 3.972 5.385 4.019-1.987 1.558-4.494 2.484-7.228 2.484-.473 0-.94-.027-1.4-.083 2.57 1.64 5.622 2.593 8.89 2.593 10.665 0 16.48-8.825 16.48-16.493 0-.252-.007-.5-.018-.75z"})})}),x.jsx("a",{href:"https://linkedin.com/company/rntea",target:"_blank",className:"social-icon-hover text-blue-700 hover:text-blue-800 transition duration-300 transform hover:scale-110",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),x.jsx("a",{href:"https://instagram.com/rntea_official",target:"_blank",className:"social-icon-hover text-pink-500 hover:text-pink-600 transition duration-300 transform hover:scale-110",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.07 1.645.07 4.85s-.012 3.584-.07 4.85c-.148 3.252-1.691 4.771-4.919 4.919-.058 1.265-.07 1.645-.07 4.85s.012 3.584.07 4.85c.148 3.252 1.691 4.771 4.919 4.919 1.265.058 1.645.07 4.85.07s3.584-.012 4.85-.07c3.252-.148 4.771-1.691 4.919-4.919.058-1.265.07-1.645.07-4.85s-.012-3.584-.07-4.85c-.119-2.618-1.26-3.83-3.949-3.949-1.265-.058-1.645-.07-4.85-.07zm0 2.163c-3.204 0-3.584.012-4.85.07-2.618.119-3.83 1.26-3.949 3.949-.058 1.265-.07 1.645-.07 4.85s.012 3.584.07 4.85c.119 2.618 1.26 3.83 3.949 3.949 1.265.058 1.645.07 4.85.07s3.584-.012 4.85-.07c2.618-.119 3.83-1.26 3.949-3.949.058-1.265.07-1.645.07-4.85s-.012-3.584-.07-4.85c-.119-2.618-1.26-3.83-3.949-3.949-1.265-.058-1.645-.07-4.85-.07zm0 3.65c-2.481 0-4.5 2.019-4.5 4.5s2.019 4.5 4.5 4.5 4.5-2.019 4.5-4.5-2.019-4.5-4.5-4.5zm0 2.163c1.336 0 2.337 1.001 2.337 2.337s-1.001 2.337-2.337 2.337-2.337-1.001-2.337-2.337 1.001-2.337 2.337-2.337zm6.406-7.078c-.732 0-1.328.596-1.328 1.328s.596 1.328 1.328 1.328 1.328-.596 1.328-1.328-.596-1.328-1.328-1.328z"})})})]})]})]})]})]})})]})},P0=({message:r,type:e})=>{if(!r)return null;const t=e==="success"?"bg-green-100":"bg-red-100",s=e==="success"?"text-green-700":"text-red-700";return x.jsx("div",{className:`p-3 rounded-md ${t} ${s} my-4 message-box-fade show`,children:r})},Hy=({rating:r,onRatingChange:e,readOnly:t=!1})=>{const s=[1,2,3,4,5];return x.jsx("div",{className:"star-rating",children:s.map(o=>x.jsx("span",{className:`star ${o<=r?"filled":""}`,"data-value":o,onClick:()=>!t&&e(o),onMouseOver:l=>{if(!t){const h=l.currentTarget;Array.from(h.parentNode.children).forEach(g=>{parseInt(g.dataset.value)<=o?g.classList.add("filled"):g.classList.remove("filled")})}},onMouseOut:l=>{if(!t){const h=l.currentTarget;Array.from(h.parentNode.children).forEach(g=>{parseInt(g.dataset.value)<=r?g.classList.add("filled"):g.classList.remove("filled")})}},style:{cursor:t?"default":"pointer"},children:"★"},o))})},QA=["fuck","shit","asshole","bitch","cunt","damn","hell"],Qd=250;function Wy(r){const e=r.toLowerCase();for(const t of QA)if(e.includes(t))return{isValid:!1,message:"Content contains inappropriate language."};return r.length>Qd?{isValid:!1,message:`Content exceeds ${Qd} character limit.`}:{isValid:!0,message:"Content is valid."}}let YA=class extends Si.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ReviewsHubPage ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?x.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-120px)] p-4 bg-red-100 text-red-800 rounded-lg shadow-md",children:[x.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong."}),x.jsx("p",{className:"text-lg text-center mb-2",children:"We're sorry, but there was an error loading this section."}),x.jsx("p",{className:"text-sm text-red-600 text-center",children:this.state.error&&this.state.error.toString()}),x.jsxs("details",{className:"mt-4 text-left text-sm p-2 bg-red-50 rounded-md",children:[x.jsx("summary",{className:"font-semibold cursor-pointer",children:"Error Details"}),x.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words text-red-700",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),x.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"mt-6 px-6 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-colors",children:"Try Again"})]}):this.props.children}};const XA=()=>{const{db:r,currentUserId:e,authReady:t,appId:s,showMessage:o,message:l}=q.useContext(k0),[h,p]=q.useState(""),[g,v]=q.useState([]),[w,T]=q.useState([]),[C,F]=q.useState(!0),[$,H]=q.useState(!1),[U,se]=q.useState(!1),[re,ne]=q.useState(20),[oe,xe]=q.useState(null),[ye,N]=q.useState(""),[I,A]=q.useState([]),[k,D]=q.useState([]),[O,R]=q.useState(!1),[Xe,ht]=q.useState(!1),[De,He]=q.useState(null),[ee,me]=q.useState([]),[ie,V]=q.useState(!1),[W,de]=q.useState(!1),[Re,Pe]=q.useState(""),[ke,Me]=q.useState(0),[Fe,Be]=q.useState(!1),[dt,yn]=q.useState({}),Xn=Si.useRef(null),Xt=Si.useRef(null),bn=Si.useRef(null);console.log("ReviewsHubPage: Component rendered.");const Jn=q.useCallback(async()=>{if(console.log("ReviewsHubPage: loadHospitals called. AuthReady:",t),!t||!r||!s){o("Firebase not ready or app ID missing. Please wait.","error");return}F(!0),H(!1),v([]),T([]),se(!1);try{const te=Ly(r,`artifacts/${s}/public/data/hospitals`),We=await By(te),ue=[];We.forEach(Ee=>{const ut=Ee.data();ut.name&&ue.push({id:Ee.id,name:ut.name,location:ut.location||""})}),ue.sort((Ee,ut)=>Ee.name.localeCompare(ut.name)),console.log("ReviewsHubPage: Fetched Hospitals:",ue.length),v(ue),ne(20),F(!1),H(ue.length===0)}catch(te){console.error("ReviewsHubPage: Error fetching hospitals:",te),o("Error loading hospitals.","error"),F(!1),H(!0)}},[t,r,s,o]);q.useEffect(()=>{console.log("ReviewsHubPage: useEffect for filtering hospitals triggered. HospitalInput:",h,"CurrentDisplayCount:",re);const te=h.trim().toLowerCase(),We=g.filter(ue=>ue.name.toLowerCase().includes(te)||ue.location&&ue.location.toLowerCase().includes(te));T(We.slice(0,re)),se(We.length>re),H(We.length===0&&!C)},[g,h,re,C]);const Ui=q.useCallback(()=>{ne(te=>te+20)},[]);q.useEffect(()=>{console.log("ReviewsHubPage: Initial useEffect for loadHospitals. AuthReady:",t),t&&Jn()},[t,Jn]);const ji=q.useCallback(async te=>{if(console.log("ReviewsHubPage: handleHospitalSelect called for hospital:",te.name),xe(te),console.log("ReviewsHubPage: Populating hospitalInput with:",te.name),p(te.name),N(""),He(null),me([]),Be(!1),R(!0),ht(!1),A([]),D([]),!r||!s||!te.id){o("Firebase or hospital ID missing for fetching doctors.","error"),R(!1),ht(!0);return}try{const We=Ly(r,`artifacts/${s}/public/data/hospitals/${te.id}/doctors`),ue=await By(We),Ee=[];ue.forEach(Qe=>{const qe=Qe.data(),nt=qe.ratings||[],wn=nt.length>0?nt.reduce((qr,Bi)=>qr+(Bi.stars||0),0)/nt.length:0;qe.name&&Ee.push({id:Qe.id,hospitalId:te.id,...qe,averageRating:wn,numReviews:nt.length})}),Ee.sort((Qe,qe)=>Qe.name.localeCompare(qe.name)),console.log("ReviewsHubPage: Fetched Doctors for selected hospital:",Ee.length),A(Ee),R(!1),ht(Ee.length===0);const ut=ye.trim().toLowerCase(),_n=Ee.filter(Qe=>Qe.name.toLowerCase().includes(ut)||Qe.specialty&&Qe.specialty.toLowerCase().includes(ut));D(_n)}catch(We){console.error("ReviewsHubPage: Error fetching doctors:",We),o("Error loading doctors.","error"),R(!1),ht(!0)}},[r,s,o,ye]);q.useEffect(()=>{oe&&Xn.current&&document.activeElement!==document.getElementById("hospital-input")&&(console.log("ReviewsHubPage: Scrolling useEffect triggered for doctor selection section."),setTimeout(()=>{requestAnimationFrame(()=>{Xn.current.scrollIntoView({behavior:"smooth",block:"start"})})},100))},[oe]);const Cs=q.useCallback(()=>{console.log("ReviewsHubPage: filterAndRenderDoctors called. DoctorInput:",ye);const te=ye.trim().toLowerCase();if(!oe){o("Please select a hospital first.","error");return}const We=I.filter(ue=>ue.name.toLowerCase().includes(te)||ue.specialty&&ue.specialty.toLowerCase().includes(te));D(We)},[ye,oe,I,o]),Hr=q.useCallback(async te=>{if(console.log("ReviewsHubPage: handleDoctorSelect called for doctor:",te.name),He(te),N(te.name),V(!0),de(!1),me([]),window.innerWidth<1024?Be(!1):Be(!0),Xt.current&&(console.log("ReviewsHubPage: Scrolling to doctor reviews display section."),setTimeout(()=>{Xt.current.scrollIntoView({behavior:"smooth",block:"start"})},100)),!r||!s||!te.hospitalId||!te.id){console.error("Firebase/Doctor info not fully available for onSnapshot."),o("Cannot load reviews: Missing Firebase or doctor details.","error"),V(!1),de(!0);return}const We=_d(r,`artifacts/${s}/public/data/hospitals/${te.hospitalId}/doctors/${te.id}`);console.log("ReviewsHubPage: Setting up onSnapshot for doctorDocRef:",We.path);const ue=WA(We,Ee=>{if(console.log("ReviewsHubPage: onSnapshot triggered for doctorDocRef."),V(!1),!Ee.exists()||!Ee.data().ratings||Ee.data().ratings.length===0)console.log("ReviewsHubPage: No reviews or document data for this doctor found in snapshot."),de(!0),me([]);else{de(!1);const _n=Ee.data().ratings||[];console.log("ReviewsHubPage: Fetched reviews from snapshot:",_n.length),_n.sort((qe,nt)=>{const wn=qe.date?qe.date.seconds?qe.date.seconds*1e3:new Date(qe.date).getTime():0;return(nt.date?nt.date.seconds?nt.date.seconds*1e3:new Date(nt.date).getTime():0)-wn});const Qe=_n.map(qe=>({...qe,date:qe.date&&typeof qe.date.toDate=="function"?qe.date.toDate():new Date(qe.date)}));me(Qe),console.log("ReviewsHubPage: Reviews state updated. Current reviews count:",Qe.length)}},Ee=>{console.error("ReviewsHubPage: Error fetching reviews with onSnapshot:",Ee),o("Error loading reviews.","error"),V(!1),de(!0)});return()=>{console.log("ReviewsHubPage: Cleaning up onSnapshot listener."),ue()}},[r,s,o]),Dn=q.useCallback(async()=>{if(console.log("ReviewsHubPage: handleSubmitReview called."),!t||!e){o("Please wait for authentication to complete or log in.","error");return}if(!oe||!De){o("Please select a hospital and doctor before submitting a review.","error");return}const te=Wy(Re);if(!te.isValid){o(te.message,"error");return}if(ke===0){o("Please select a star rating.","error");return}try{const We=_d(r,`artifacts/${s}/public/data/hospitals/${oe.id}/doctors/${De.id}`),ue={stars:ke,comment:Re,reviewerId:`RN-${e.substring(0,5)}`,date:new Date,hospitalName:oe.name,doctorName:De.name,comments:[]};console.log("ReviewsHubPage: Submitting new review:",ue),await $y(We,{ratings:KA(ue)}),Pe(""),Me(0),o("Review submitted successfully!","success"),console.log("ReviewsHubPage: Review submitted successfully!")}catch(We){console.error("ReviewsHubPage: Error adding review: ",We),o(`Error submitting review: ${We.message}`,"error")}},[t,e,oe,De,Re,ke,r,s,o]),vn=q.useCallback(async(te,We)=>{if(console.log("ReviewsHubPage: handleAddCommentToReview called."),!t||!e){o("Authentication Required. Please wait to post a comment.","error");return}if(We.trim()===""){o("Comment cannot be empty.","error");return}if(!oe||!De){o("Hospital or doctor not selected.","error");return}const ue=Wy(We);if(!ue.isValid){o(ue.message,"error");return}try{console.log("ReviewsHubPage: Attempting to fetch doctor document for comment update.");const Ee=_d(r,`artifacts/${s}/public/data/hospitals/${oe.id}/doctors/${De.id}`),ut=await HA(Ee);if(ut.exists()){let Qe=[...ut.data().ratings||[]];console.log("ReviewsHubPage: Current ratings from doc:",Qe);const qe=Qe.findIndex(nt=>{const wn=nt.date?typeof nt.date.toDate=="function"?nt.date.toDate().getTime():new Date(nt.date).getTime():0;return console.log(`ReviewsHubPage: Comparing reviewDateMillis ${te} with review date ${wn}`),wn===te});if(qe!==-1){const nt={text:We,userId:`RN-${e.substring(0,5)}`,date:new Date};Qe[qe].comments=Qe[qe].comments||[],Qe[qe].comments.push(nt),console.log("ReviewsHubPage: New comment added to array. Updated ratings structure:",Qe),console.log("ReviewsHubPage: Updating doc with new comments array."),await $y(Ee,{ratings:Qe}),o("Comment added successfully!","success"),console.log("ReviewsHubPage: Comment added successfully to review index",qe,"for doctor",De.id),yn({})}else o("Error posting comment: Could not find review to update.","error"),console.error("ReviewsHubPage: Error: Review not found by timestamp for doctor",De.id)}else o("Error posting comment: Doctor document not found.","error"),console.error("ReviewsHubPage: Doctor document not found for comment addition:",De.id)}catch(Ee){console.error("ReviewsHubPage: Error adding comment to review: ",Ee),o(`Error posting comment: ${Ee.message}`,"error")}},[t,e,oe,De,r,s,o]),zi=q.useCallback(()=>{Be(!0),bn.current&&bn.current.scrollIntoView({behavior:"smooth",block:"start"})},[]),Wr=q.useCallback(()=>{Be(!1),Xt.current&&Xt.current.scrollIntoView({behavior:"smooth",block:"start"})},[]);return x.jsx(YA,{children:x.jsxs("div",{className:"flex-grow container mx-auto px-4 py-8 md:px-6 lg:px-8 pt-20",children:[x.jsx(P0,{message:(l==null?void 0:l.text)||"",type:(l==null?void 0:l.type)||""}),x.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center mb-8",children:"Share Your RNTea!"}),x.jsxs("section",{id:"hospital-selection-section",className:"bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[x.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Which hospital are you interested in?"}),x.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[x.jsx("input",{type:"text",id:"hospital-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"Search for a hospital...",value:h,onChange:te=>p(te.target.value)}),x.jsx("button",{id:"search-hospital-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:Jn,children:"Search"})]}),x.jsxs("div",{className:"mb-4 mt-8",children:[x.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Hospitals with reviews:"}),x.jsxs("div",{id:"hospitals-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2",children:[C&&x.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading hospitals..."}),$&&!C&&x.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"No hospitals found yet. Be the first to add a review!"}),w.map(te=>x.jsx("button",{className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-custom-beige hover:text-gray-800 transition duration-200 btn-hover-scale",onClick:()=>ji(te),children:te.name},te.id))]}),U&&x.jsx("button",{id:"load-more-hospitals-btn",className:"mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 w-full btn-hover-scale",onClick:Ui,children:"Load More Hospitals"})]})]}),x.jsxs("section",{id:"doctor-selection-section",ref:Xn,className:`bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${oe?"":"hidden"}`,children:[x.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 text-center",children:"Select a doctor"}),x.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-6",children:[x.jsx("input",{type:"text",id:"doctor-input",className:"flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-beige",placeholder:"e.g., Dr. Sarah Lee",value:ye,onChange:te=>N(te.target.value)}),x.jsx("button",{id:"select-doctor-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full md:w-auto btn-hover-scale",onClick:Cs,children:"Search Doctor"})]}),x.jsxs("div",{className:"mb-4",children:[x.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:["Doctors with reviews at ",x.jsx("span",{id:"display-selected-hospital",className:"text-gray-800",children:oe==null?void 0:oe.name}),":"]}),x.jsxs("div",{id:"doctors-list",className:"flex flex-wrap gap-2 mt-2 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2",children:[O&&x.jsx("p",{className:"text-gray-500 italic w-full text-center",children:"Loading doctors..."}),Xe&&!O&&x.jsx("p",{className:"text-500 italic w-full text-center",children:"No doctors found for this hospital yet."}),k.map(te=>x.jsx("button",{className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-full hover:bg-custom-beige hover:text-gray-800 transition duration-200 btn-hover-scale",onClick:()=>Hr(te),children:`${te.name} (${te.specialty||"N/A"}) - Avg. ${te.averageRating.toFixed(1)} ★ (${te.numReviews})`},te.id))]})]})]}),x.jsxs("div",{id:"reviews-content-grid",className:`grid grid-cols-1 lg:grid-cols-3 gap-8 ${De?"":"hidden"}`,children:[x.jsxs("section",{id:"review-submission-section",ref:bn,className:`lg:col-span-1 bg-white p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted ${Fe||window.innerWidth>=1024?"":"hidden"}`,children:[x.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:["Write a Review for ",x.jsx("span",{id:"display-selected-doctor-submission",className:"text-[#CC5500]",style:{textShadow:"none"},children:De==null?void 0:De.name})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{htmlFor:"review-stars",className:"block text-gray-700 text-sm font-medium mb-2",children:"Rating"}),x.jsx(Hy,{rating:ke,onRatingChange:Me})]}),x.jsx("textarea",{id:"review-text",className:"w-full p-3 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-custom-beige",rows:"6",placeholder:"Share your experience or review here...",value:Re,onChange:te=>Pe(te.target.value),maxLength:Qd}),x.jsx("button",{id:"submit-review-btn",className:"bg-custom-beige text-gray-800 font-bold py-3 px-6 rounded-full hover:opacity-90 transition duration-300 shadow-md w-full btn-hover-scale",onClick:Dn,children:"Submit Review"}),x.jsxs("div",{className:"text-sm text-gray-500 mt-4",children:["Your User ID: ",x.jsx("span",{id:"display-user-id",children:e})]}),window.innerWidth<1024&&x.jsx("button",{id:"cancel-review-mobile-btn",className:"bg-gray-400 text-white px-4 py-2 rounded-full mt-4 w-full",onClick:Wr,children:"Cancel"})]}),x.jsxs("section",{id:"doctor-reviews-display",ref:Xt,className:"lg:col-span-2 bg-custom-beige p-6 md:p-8 rounded-lg shadow-lg mb-8 section-hover scroll-margin-top-adjusted",children:[x.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:["Reviews for ",x.jsx("span",{id:"display-selected-doctor-reviews",className:"text-[#CC5500] font-extrabold",style:{textShadow:"none"},children:De==null?void 0:De.name})]}),window.innerWidth<1024&&!Fe&&x.jsxs("button",{id:"add-review-mobile-btn",className:"bg-[#FFFFFF] text-gray-800 px-5 py-2 rounded-md hover:bg-gray-100 transition duration-200 btn-hover-scale mb-4 w-full",onClick:zi,children:["Write a Review for ",De==null?void 0:De.name]}),ie&&x.jsx("p",{className:"text-gray-700 italic text-center",children:"Loading reviews..."}),W&&!ie&&x.jsx("p",{className:"text-gray-700 italic text-center",children:"No reviews found for this doctor yet. Be the first to add one!"}),ee.length>0&&x.jsx("div",{id:"reviews-list",className:"space-y-6",children:ee.map((te,We)=>x.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-md border border-gray-200",children:[x.jsx("div",{className:"flex justify-between items-start mb-3",children:x.jsxs("div",{children:[x.jsx(Hy,{rating:te.stars,onRatingChange:()=>{},readOnly:!0}),x.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Reviewed by ",te.reviewerId," on: ",te.date instanceof Date?te.date.toLocaleDateString():new Date(te.date.seconds*1e3).toLocaleDateString()]})]})}),x.jsx("p",{className:"text-gray-800 leading-relaxed mb-4",children:te.comment}),x.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[x.jsxs("h4",{className:"text-md font-semibold text-gray-700 mb-3",children:["Comments (",te.comments?te.comments.length:0,")"]}),te.comments&&te.comments.length>0?x.jsx("div",{className:"space-y-3 mb-4",children:te.comments.map((ue,Ee)=>x.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 border border-gray-100",children:[x.jsx("p",{children:ue.text}),x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["by ",ue.userId," on ",ue.date&&typeof ue.date.toDate=="function"?ue.date.toDate().toLocaleDateString():ue.date&&ue.date.seconds?new Date(ue.date.seconds*1e3).toLocaleDateString():"N/A"]})]},ue.date&&(typeof ue.date.getTime=="function"?ue.date.getTime():ue.date.seconds?new Date(ue.date.seconds*1e3).getTime():Date.now())+"_"+Ee))}):x.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"No comments yet. Be the first!"}),x.jsx("button",{onClick:()=>yn(ue=>({...ue,[te.date.getTime()]:!ue[te.date.getTime()]})),className:"text-blue-500 hover:underline text-sm mb-3",children:dt[te.date.getTime()]?"Cancel Comment":"Add a Comment"}),dt[te.date.getTime()]&&x.jsxs("div",{className:"flex mt-2",children:[x.jsx("input",{type:"text",placeholder:"Write a comment...",className:"flex-grow p-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:ue=>{ue.key==="Enter"&&ue.target.value.trim()&&(vn(te.date.getTime(),ue.target.value),ue.target.value="")}}),x.jsx("button",{className:"submit-comment-btn bg-gray-600 text-white px-4 py-2 rounded-r-md hover:bg-gray-700 transition duration-200 btn-hover-scale",onClick:ue=>{const Ee=ue.target.previousElementSibling;vn(te.date.getTime(),Ee.value),Ee.value=""},children:"Post"})]})]})]},te.date.getTime()+We))})]})]})]})})},k0=q.createContext(null),qy=typeof __firebase_config<"u"?JSON.parse(__firebase_config):null,wd=typeof __initial_auth_token<"u"?__initial_auth_token:null,Ky=typeof __app_id<"u"?JSON.parse(__app_id):null,JA={apiKey:"AIzaSyBEwSVX9UY7-MNxeYwdbY0ZmDuXzYyt56g",authDomain:"rntea-cca78.firebaseapp.com",projectId:"rntea-cca78",storageBucket:"rntea-cca78.firebasestorage.app",messagingSenderId:"806310857835",appId:"1:806310857835:web:b03b05847c818ee4fe352e",measurementId:"G-ZKZBPS9FGE"};class ZA extends Si.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("App.jsx ErrorBoundary: Uncaught error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?x.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-100 text-red-800 p-4 rounded-lg shadow-lg m-4",children:[x.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Oops! Something went wrong in App.jsx!"}),x.jsx("p",{className:"text-lg mb-2 text-center",children:"There was an issue rendering the application. Details below:"}),x.jsxs("details",{className:"mt-4 text-left p-4 bg-red-50 rounded-lg border border-red-200 overflow-auto max-w-lg",children:[x.jsx("summary",{className:"font-semibold cursor-pointer text-red-700",children:"Click for Error Details"}),x.jsx("pre",{className:"mt-2 text-sm whitespace-pre-wrap break-words font-mono text-red-900",children:this.state.error&&this.state.error.toString()}),this.state.errorInfo&&x.jsxs("pre",{className:"mt-2 text-xs text-red-600 font-mono whitespace-pre-wrap break-words",children:["Component Stack: ",this.state.errorInfo.componentStack]})]})]}):this.props.children}}function ex(){const[r,e]=q.useState(null),[t,s]=q.useState(null),[o,l]=q.useState(null),[h,p]=q.useState(null),[g,v]=q.useState(!1),[w,T]=q.useState(!0),[C,F]=q.useState({text:"",type:""}),$=Vo(),[H,U]=q.useState(!1);q.useEffect(()=>{console.log("App.jsx: useEffect for Firebase Initialization triggered."),console.log("App.jsx: Current path detected by React Router:",$.pathname),(async()=>{try{const ye=qy||JA;console.log("App.jsx: Firebase config being used:",ye);const N=_v(ye),I=bS(N),A=kA(N);e(N),l(I),s(A);const k=EI(I,async D=>{var O,R;if(console.log("App.jsx: onAuthStateChanged - User status changed. User:",D),D)p(D.uid);else{console.log("App.jsx: No user found. Attempting anonymous sign-in or custom token sign-in.");try{wd?(console.log("App.jsx: Signing in with custom token..."),await vI(I,wd)):await fI(I),p(((O=I.currentUser)==null?void 0:O.uid)||"anonymous"),console.log("App.jsx: Sign-in successful. Current user ID:",(R=I.currentUser)==null?void 0:R.uid)}catch(Xe){console.error("App.jsx: Error during authentication (anonymous/custom token):",Xe),p(crypto.randomUUID()),F({text:`Authentication failed: ${Xe.message}`,type:"error"})}}v(!0),T(!1),console.log("App.jsx: Firebase initialization complete. AuthReady:",!0,"LoadingFirebase:",!1)});return()=>{console.log("App.jsx: useEffect cleanup - Unsubscribing from auth state changes."),k()}}catch(ye){console.error("App.jsx: FATAL ERROR: Failed to initialize Firebase application:",ye),F({text:"Failed to initialize application. Please try again later.",type:"error"}),T(!1),v(!1)}})()},[$.pathname,qy,wd]);const se=Si.useMemo(()=>({app:r,db:t,auth:o,currentUserId:h,authReady:g,appId:Ky||"rntea-cca78",setMessage:F}),[r,t,o,h,g,Ky,F]),re=q.useCallback(()=>{U(xe=>!xe),document.body.style.overflow=H?"":"hidden"},[H]),ne=q.useCallback(()=>{U(!1),document.body.style.overflow=""},[]);q.useCallback((xe,ye)=>{F({text:xe,type:ye}),setTimeout(()=>F({text:"",type:""}),5e3)},[]);const oe=q.useCallback(xe=>{if(xe==="/")return $.pathname==="/";if(xe==="/reviews")return $.pathname==="/reviews";if(xe.startsWith("/#")){const ye=xe.substring(2);return $.pathname==="/"&&$.hash===`#${ye}`}return!1},[$.pathname,$.hash]);return x.jsxs("div",{className:"min-h-screen flex flex-col",children:[x.jsxs("header",{className:"bg-white shadow-sm py-8 px-6 md:px-10 lg:px-16 flex justify-between items-center rounded-b-lg fixed top-0 w-full z-30",children:[x.jsx(yi,{to:"/",className:"text-3xl font-bold text-gray-800 rntea-brand",children:"RNTea"}),x.jsx("nav",{className:"hidden md:block",children:x.jsxs("ul",{className:"flex space-x-6",children:[x.jsx("li",{children:x.jsx(yi,{to:"/#about",className:`text-lg text-gray-700 font-medium animated-link ${oe("/#about")?"font-bold":""}`,children:"About"})}),x.jsx("li",{children:x.jsx(yi,{to:"/reviews",className:`text-lg text-gray-700 font-medium animated-link ${oe("/reviews")?"font-bold":""}`,children:"Reviews"})}),x.jsx("li",{children:x.jsx(yi,{to:"/#contact",className:`text-lg text-gray-700 font-medium animated-link ${oe("/#contact")?"font-bold":""}`,children:"Contact"})})]})}),x.jsxs("div",{className:`hamburger-menu md:hidden flex flex-col justify-around w-8 h-6 cursor-pointer z-50 ${H?"open":""}`,id:"hamburger-menu",onClick:re,children:[x.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),x.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"}),x.jsx("div",{className:"hamburger-bar w-full h-0.5 bg-gray-800 rounded transition-all duration-300 transform"})]})]}),x.jsxs("div",{className:`mobile-nav-overlay md:hidden fixed top-0 left-0 w-full h-full bg-white bg-opacity-98 z-40 flex flex-col justify-center items-center transition-transform duration-400 ease-in-out ${H?"open":""}`,id:"mobile-nav-overlay",children:[x.jsx("button",{className:"absolute top-6 right-6 text-gray-800 hover:text-gray-600 text-4xl focus:outline-none z-50",onClick:ne,"aria-label":"Close navigation menu",children:"×"}),x.jsx(yi,{to:"/#about",className:"text-2xl text-gray-800 my-4 animated-link transition duration-300 ease-in-out hover:text-custom-beige",onClick:ne,style:{animationDelay:"0.1s"},children:"About"}),x.jsx(yi,{to:"/reviews",className:"text-2xl text-gray-800 my-4 animated-link transition duration-300 ease-in-out hover:text-custom-beige",onClick:ne,style:{animationDelay:"0.2s"},children:"Reviews"}),x.jsx(yi,{to:"/#contact",className:"text-2xl text-gray-800 my-4 animated-link transition duration-300 ease-in-out hover:text-custom-beige",onClick:ne,style:{animationDelay:"0.3s"},children:"Contact"})]}),x.jsxs("main",{className:"flex-grow w-full flex flex-col mt-[120px]",children:[x.jsx(P0,{message:C.text,type:C.type}),w&&x.jsx("p",{className:"text-center text-blue-500 py-2",children:"App.jsx: Loading Firebase..."}),!w&&!g&&x.jsx("p",{className:"text-center text-orange-500 py-2",children:"App.jsx: Firebase Loaded, Awaiting Auth..."}),!w&&g&&x.jsx("p",{className:"text-center text-green-500 py-2",children:"App.jsx: Firebase & Auth Ready!"}),x.jsx(ZA,{children:w?x.jsx("p",{className:"text-center text-gray-500 py-8",children:"App.jsx: Initializing application and Firebase..."}):x.jsx(k0.Provider,{value:se,children:x.jsxs(LE,{children:[console.log(`App.jsx: Route matched for path: ${$.pathname}`),x.jsx(Td,{path:"/",element:x.jsx(GA,{})}),x.jsx(Td,{path:"/reviews",element:x.jsx(XA,{})})]})})})]})]})}const Gy=document.getElementById("root");Gy?(console.log("main.jsx: Root element found. Attempting to mount React App with Router..."),Hw.createRoot(Gy).render(x.jsx(Si.StrictMode,{children:x.jsx($E,{children:x.jsx(ex,{})})})),console.log("main.jsx: React App with Router mount instruction sent.")):console.error("main.jsx: ERROR - Root element not found in DOM. Cannot mount React App.");
